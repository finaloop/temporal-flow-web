import{r as k,a as th,g as nh,R as ie,c as Lr,t as Rm}from"./vendor-DBEsKlBz.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(a){if(a.ep)return;a.ep=!0;const u=n(a);fetch(a.href,u)}})();var x0={exports:{}},qc={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NS=k,kS=Symbol.for("react.element"),IS=Symbol.for("react.fragment"),CS=Object.prototype.hasOwnProperty,OS=NS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AS={key:!0,ref:!0,__self:!0,__source:!0};function b0(e,t,n){var i,a={},u=null,c=null;n!==void 0&&(u=""+n),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(c=t.ref);for(i in t)CS.call(t,i)&&!AS.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)a[i]===void 0&&(a[i]=t[i]);return{$$typeof:kS,type:e,key:u,ref:c,props:a,_owner:OS.current}}qc.Fragment=IS;qc.jsx=b0;qc.jsxs=b0;x0.exports=qc;var _=x0.exports,_0,Mm=th;_0=Mm.createRoot,Mm.hydrateRoot;function Tn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=Tn(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var E0={exports:{}},S0={},T0={exports:{}},N0={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ha=k;function DS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var PS=typeof Object.is=="function"?Object.is:DS,RS=Ha.useState,MS=Ha.useEffect,LS=Ha.useLayoutEffect,$S=Ha.useDebugValue;function WS(e,t){var n=t(),i=RS({inst:{value:n,getSnapshot:t}}),a=i[0].inst,u=i[1];return LS(function(){a.value=n,a.getSnapshot=t,Cf(a)&&u({inst:a})},[e,n,t]),MS(function(){return Cf(a)&&u({inst:a}),e(function(){Cf(a)&&u({inst:a})})},[e]),$S(n),n}function Cf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!PS(e,n)}catch{return!0}}function FS(e,t){return t()}var jS=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?FS:WS;N0.useSyncExternalStore=Ha.useSyncExternalStore!==void 0?Ha.useSyncExternalStore:jS;T0.exports=N0;var BS=T0.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xc=k,HS=BS;function KS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zS=typeof Object.is=="function"?Object.is:KS,US=HS.useSyncExternalStore,YS=Xc.useRef,VS=Xc.useEffect,qS=Xc.useMemo,XS=Xc.useDebugValue;S0.useSyncExternalStoreWithSelector=function(e,t,n,i,a){var u=YS(null);if(u.current===null){var c={hasValue:!1,value:null};u.current=c}else c=u.current;u=qS(function(){function h(b){if(!p){if(p=!0,m=b,b=i(b),a!==void 0&&c.hasValue){var N=c.value;if(a(N,b))return y=N}return y=b}if(N=y,zS(m,b))return N;var E=i(b);return a!==void 0&&a(N,E)?N:(m=b,y=E)}var p=!1,m,y,x=n===void 0?null:n;return[function(){return h(t())},x===null?void 0:function(){return h(x())}]},[t,n,i,a]);var f=US(e,u[0],u[1]);return VS(function(){c.hasValue=!0,c.value=f},[f]),XS(f),f};E0.exports=S0;var GS=E0.exports;const ZS=nh(GS),QS={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Lm=e=>{let t;const n=new Set,i=(m,y)=>{const x=typeof m=="function"?m(t):m;if(!Object.is(x,t)){const b=t;t=y??(typeof x!="object"||x===null)?x:Object.assign({},t,x),n.forEach(N=>N(t,b))}},a=()=>t,h={setState:i,getState:a,getInitialState:()=>p,subscribe:m=>(n.add(m),()=>n.delete(m)),destroy:()=>{(QS?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=t=e(i,a,h);return h},JS=e=>e?Lm(e):Lm,{useDebugValue:eT}=ie,{useSyncExternalStoreWithSelector:tT}=ZS,nT=e=>e;function k0(e,t=nT,n){const i=tT(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return eT(i),i}const $m=(e,t)=>{const n=JS(e),i=(a,u=t)=>k0(n,a,u);return Object.assign(i,n),i},rT=(e,t)=>e?$m(e,t):$m;function qn(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,a]of e)if(!Object.is(a,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}var iT={value:()=>{}};function Gc(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new bc(n)}function bc(e){this._=e}function oT(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",a=n.indexOf(".");if(a>=0&&(i=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}bc.prototype=Gc.prototype={constructor:bc,on:function(e,t){var n=this._,i=oT(e+"",n),a,u=-1,c=i.length;if(arguments.length<2){for(;++u<c;)if((a=(e=i[u]).type)&&(a=aT(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++u<c;)if(a=(e=i[u]).type)n[a]=Wm(n[a],e.name,t);else if(t==null)for(a in n)n[a]=Wm(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new bc(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),i=0,a,u;i<a;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(u=this._[e],i=0,a=u.length;i<a;++i)u[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],a=0,u=i.length;a<u;++a)i[a].value.apply(t,n)}};function aT(e,t){for(var n=0,i=e.length,a;n<i;++n)if((a=e[n]).name===t)return a.value}function Wm(e,t,n){for(var i=0,a=e.length;i<a;++i)if(e[i].name===t){e[i]=iT,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var od="http://www.w3.org/1999/xhtml";const Fm={svg:"http://www.w3.org/2000/svg",xhtml:od,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Zc(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Fm.hasOwnProperty(t)?{space:Fm[t],local:e}:e}function sT(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===od&&t.documentElement.namespaceURI===od?t.createElement(e):t.createElementNS(n,e)}}function uT(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function I0(e){var t=Zc(e);return(t.local?uT:sT)(t)}function cT(){}function rh(e){return e==null?cT:function(){return this.querySelector(e)}}function lT(e){typeof e!="function"&&(e=rh(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var u=t[a],c=u.length,f=i[a]=new Array(c),h,p,m=0;m<c;++m)(h=u[m])&&(p=e.call(h,h.__data__,m,u))&&("__data__"in h&&(p.__data__=h.__data__),f[m]=p);return new or(i,this._parents)}function fT(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function dT(){return[]}function C0(e){return e==null?dT:function(){return this.querySelectorAll(e)}}function hT(e){return function(){return fT(e.apply(this,arguments))}}function pT(e){typeof e=="function"?e=hT(e):e=C0(e);for(var t=this._groups,n=t.length,i=[],a=[],u=0;u<n;++u)for(var c=t[u],f=c.length,h,p=0;p<f;++p)(h=c[p])&&(i.push(e.call(h,h.__data__,p,c)),a.push(h));return new or(i,a)}function O0(e){return function(){return this.matches(e)}}function A0(e){return function(t){return t.matches(e)}}var mT=Array.prototype.find;function gT(e){return function(){return mT.call(this.children,e)}}function vT(){return this.firstElementChild}function yT(e){return this.select(e==null?vT:gT(typeof e=="function"?e:A0(e)))}var wT=Array.prototype.filter;function xT(){return Array.from(this.children)}function bT(e){return function(){return wT.call(this.children,e)}}function _T(e){return this.selectAll(e==null?xT:bT(typeof e=="function"?e:A0(e)))}function ET(e){typeof e!="function"&&(e=O0(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var u=t[a],c=u.length,f=i[a]=[],h,p=0;p<c;++p)(h=u[p])&&e.call(h,h.__data__,p,u)&&f.push(h);return new or(i,this._parents)}function D0(e){return new Array(e.length)}function ST(){return new or(this._enter||this._groups.map(D0),this._parents)}function Ic(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ic.prototype={constructor:Ic,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function TT(e){return function(){return e}}function NT(e,t,n,i,a,u){for(var c=0,f,h=t.length,p=u.length;c<p;++c)(f=t[c])?(f.__data__=u[c],i[c]=f):n[c]=new Ic(e,u[c]);for(;c<h;++c)(f=t[c])&&(a[c]=f)}function kT(e,t,n,i,a,u,c){var f,h,p=new Map,m=t.length,y=u.length,x=new Array(m),b;for(f=0;f<m;++f)(h=t[f])&&(x[f]=b=c.call(h,h.__data__,f,t)+"",p.has(b)?a[f]=h:p.set(b,h));for(f=0;f<y;++f)b=c.call(e,u[f],f,u)+"",(h=p.get(b))?(i[f]=h,h.__data__=u[f],p.delete(b)):n[f]=new Ic(e,u[f]);for(f=0;f<m;++f)(h=t[f])&&p.get(x[f])===h&&(a[f]=h)}function IT(e){return e.__data__}function CT(e,t){if(!arguments.length)return Array.from(this,IT);var n=t?kT:NT,i=this._parents,a=this._groups;typeof e!="function"&&(e=TT(e));for(var u=a.length,c=new Array(u),f=new Array(u),h=new Array(u),p=0;p<u;++p){var m=i[p],y=a[p],x=y.length,b=OT(e.call(m,m&&m.__data__,p,i)),N=b.length,E=f[p]=new Array(N),C=c[p]=new Array(N),M=h[p]=new Array(x);n(m,y,E,C,M,b,t);for(var z=0,ee=0,B,le;z<N;++z)if(B=E[z]){for(z>=ee&&(ee=z+1);!(le=C[ee])&&++ee<N;);B._next=le||null}}return c=new or(c,i),c._enter=f,c._exit=h,c}function OT(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function AT(){return new or(this._exit||this._groups.map(D0),this._parents)}function DT(e,t,n){var i=this.enter(),a=this,u=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?u.remove():n(u),i&&a?i.merge(a).order():a}function PT(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,a=n.length,u=i.length,c=Math.min(a,u),f=new Array(a),h=0;h<c;++h)for(var p=n[h],m=i[h],y=p.length,x=f[h]=new Array(y),b,N=0;N<y;++N)(b=p[N]||m[N])&&(x[N]=b);for(;h<a;++h)f[h]=n[h];return new or(f,this._parents)}function RT(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],a=i.length-1,u=i[a],c;--a>=0;)(c=i[a])&&(u&&c.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(c,u),u=c);return this}function MT(e){e||(e=LT);function t(y,x){return y&&x?e(y.__data__,x.__data__):!y-!x}for(var n=this._groups,i=n.length,a=new Array(i),u=0;u<i;++u){for(var c=n[u],f=c.length,h=a[u]=new Array(f),p,m=0;m<f;++m)(p=c[m])&&(h[m]=p);h.sort(t)}return new or(a,this._parents).order()}function LT(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function $T(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function WT(){return Array.from(this)}function FT(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],a=0,u=i.length;a<u;++a){var c=i[a];if(c)return c}return null}function jT(){let e=0;for(const t of this)++e;return e}function BT(){return!this.node()}function HT(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var a=t[n],u=0,c=a.length,f;u<c;++u)(f=a[u])&&e.call(f,f.__data__,u,a);return this}function KT(e){return function(){this.removeAttribute(e)}}function zT(e){return function(){this.removeAttributeNS(e.space,e.local)}}function UT(e,t){return function(){this.setAttribute(e,t)}}function YT(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function VT(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function qT(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function XT(e,t){var n=Zc(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?zT:KT:typeof t=="function"?n.local?qT:VT:n.local?YT:UT)(n,t))}function P0(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function GT(e){return function(){this.style.removeProperty(e)}}function ZT(e,t,n){return function(){this.style.setProperty(e,t,n)}}function QT(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function JT(e,t,n){return arguments.length>1?this.each((t==null?GT:typeof t=="function"?QT:ZT)(e,t,n??"")):Ka(this.node(),e)}function Ka(e,t){return e.style.getPropertyValue(t)||P0(e).getComputedStyle(e,null).getPropertyValue(t)}function eN(e){return function(){delete this[e]}}function tN(e,t){return function(){this[e]=t}}function nN(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function rN(e,t){return arguments.length>1?this.each((t==null?eN:typeof t=="function"?nN:tN)(e,t)):this.node()[e]}function R0(e){return e.trim().split(/^|\s+/)}function ih(e){return e.classList||new M0(e)}function M0(e){this._node=e,this._names=R0(e.getAttribute("class")||"")}M0.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function L0(e,t){for(var n=ih(e),i=-1,a=t.length;++i<a;)n.add(t[i])}function $0(e,t){for(var n=ih(e),i=-1,a=t.length;++i<a;)n.remove(t[i])}function iN(e){return function(){L0(this,e)}}function oN(e){return function(){$0(this,e)}}function aN(e,t){return function(){(t.apply(this,arguments)?L0:$0)(this,e)}}function sN(e,t){var n=R0(e+"");if(arguments.length<2){for(var i=ih(this.node()),a=-1,u=n.length;++a<u;)if(!i.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?aN:t?iN:oN)(n,t))}function uN(){this.textContent=""}function cN(e){return function(){this.textContent=e}}function lN(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function fN(e){return arguments.length?this.each(e==null?uN:(typeof e=="function"?lN:cN)(e)):this.node().textContent}function dN(){this.innerHTML=""}function hN(e){return function(){this.innerHTML=e}}function pN(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function mN(e){return arguments.length?this.each(e==null?dN:(typeof e=="function"?pN:hN)(e)):this.node().innerHTML}function gN(){this.nextSibling&&this.parentNode.appendChild(this)}function vN(){return this.each(gN)}function yN(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wN(){return this.each(yN)}function xN(e){var t=typeof e=="function"?e:I0(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function bN(){return null}function _N(e,t){var n=typeof e=="function"?e:I0(e),i=t==null?bN:typeof t=="function"?t:rh(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function EN(){var e=this.parentNode;e&&e.removeChild(this)}function SN(){return this.each(EN)}function TN(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function NN(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function kN(e){return this.select(e?NN:TN)}function IN(e){return arguments.length?this.property("__data__",e):this.node().__data__}function CN(e){return function(t){e.call(this,t,this.__data__)}}function ON(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function AN(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,a=t.length,u;n<a;++n)u=t[n],(!e.type||u.type===e.type)&&u.name===e.name?this.removeEventListener(u.type,u.listener,u.options):t[++i]=u;++i?t.length=i:delete this.__on}}}function DN(e,t,n){return function(){var i=this.__on,a,u=CN(t);if(i){for(var c=0,f=i.length;c<f;++c)if((a=i[c]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=u,a.options=n),a.value=t;return}}this.addEventListener(e.type,u,n),a={type:e.type,name:e.name,value:t,listener:u,options:n},i?i.push(a):this.__on=[a]}}function PN(e,t,n){var i=ON(e+""),a,u=i.length,c;if(arguments.length<2){var f=this.node().__on;if(f){for(var h=0,p=f.length,m;h<p;++h)for(a=0,m=f[h];a<u;++a)if((c=i[a]).type===m.type&&c.name===m.name)return m.value}return}for(f=t?DN:AN,a=0;a<u;++a)this.each(f(i[a],t,n));return this}function W0(e,t,n){var i=P0(e),a=i.CustomEvent;typeof a=="function"?a=new a(t,n):(a=i.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function RN(e,t){return function(){return W0(this,e,t)}}function MN(e,t){return function(){return W0(this,e,t.apply(this,arguments))}}function LN(e,t){return this.each((typeof t=="function"?MN:RN)(e,t))}function*$N(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],a=0,u=i.length,c;a<u;++a)(c=i[a])&&(yield c)}var F0=[null];function or(e,t){this._groups=e,this._parents=t}function cu(){return new or([[document.documentElement]],F0)}function WN(){return this}or.prototype=cu.prototype={constructor:or,select:lT,selectAll:pT,selectChild:yT,selectChildren:_T,filter:ET,data:CT,enter:ST,exit:AT,join:DT,merge:PT,selection:WN,order:RT,sort:MT,call:$T,nodes:WT,node:FT,size:jT,empty:BT,each:HT,attr:XT,style:JT,property:rN,classed:sN,text:fN,html:mN,raise:vN,lower:wN,append:xN,insert:_N,remove:SN,clone:kN,datum:IN,on:PN,dispatch:LN,[Symbol.iterator]:$N};function wr(e){return typeof e=="string"?new or([[document.querySelector(e)]],[document.documentElement]):new or([[e]],F0)}function FN(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Mr(e,t){if(e=FN(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const jN={passive:!1},qs={capture:!0,passive:!1};function Of(e){e.stopImmediatePropagation()}function Wa(e){e.preventDefault(),e.stopImmediatePropagation()}function j0(e){var t=e.document.documentElement,n=wr(e).on("dragstart.drag",Wa,qs);"onselectstart"in t?n.on("selectstart.drag",Wa,qs):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function B0(e,t){var n=e.document.documentElement,i=wr(e).on("dragstart.drag",null);t&&(i.on("click.drag",Wa,qs),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const sc=e=>()=>e;function ad(e,{sourceEvent:t,subject:n,target:i,identifier:a,active:u,x:c,y:f,dx:h,dy:p,dispatch:m}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:m}})}ad.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function BN(e){return!e.ctrlKey&&!e.button}function HN(){return this.parentNode}function KN(e,t){return t??{x:e.x,y:e.y}}function zN(){return navigator.maxTouchPoints||"ontouchstart"in this}function UN(){var e=BN,t=HN,n=KN,i=zN,a={},u=Gc("start","drag","end"),c=0,f,h,p,m,y=0;function x(B){B.on("mousedown.drag",b).filter(i).on("touchstart.drag",C).on("touchmove.drag",M,jN).on("touchend.drag touchcancel.drag",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(B,le){if(!(m||!e.call(this,B,le))){var ce=ee(this,t.call(this,B,le),B,le,"mouse");ce&&(wr(B.view).on("mousemove.drag",N,qs).on("mouseup.drag",E,qs),j0(B.view),Of(B),p=!1,f=B.clientX,h=B.clientY,ce("start",B))}}function N(B){if(Wa(B),!p){var le=B.clientX-f,ce=B.clientY-h;p=le*le+ce*ce>y}a.mouse("drag",B)}function E(B){wr(B.view).on("mousemove.drag mouseup.drag",null),B0(B.view,p),Wa(B),a.mouse("end",B)}function C(B,le){if(e.call(this,B,le)){var ce=B.changedTouches,U=t.call(this,B,le),J=ce.length,oe,X;for(oe=0;oe<J;++oe)(X=ee(this,U,B,le,ce[oe].identifier,ce[oe]))&&(Of(B),X("start",B,ce[oe]))}}function M(B){var le=B.changedTouches,ce=le.length,U,J;for(U=0;U<ce;++U)(J=a[le[U].identifier])&&(Wa(B),J("drag",B,le[U]))}function z(B){var le=B.changedTouches,ce=le.length,U,J;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),U=0;U<ce;++U)(J=a[le[U].identifier])&&(Of(B),J("end",B,le[U]))}function ee(B,le,ce,U,J,oe){var X=u.copy(),Y=Mr(oe||ce,le),ue,ge,R;if((R=n.call(B,new ad("beforestart",{sourceEvent:ce,target:x,identifier:J,active:c,x:Y[0],y:Y[1],dx:0,dy:0,dispatch:X}),U))!=null)return ue=R.x-Y[0]||0,ge=R.y-Y[1]||0,function re(Q,ye,he){var W=Y,ae;switch(Q){case"start":a[J]=re,ae=c++;break;case"end":delete a[J],--c;case"drag":Y=Mr(he||ye,le),ae=c;break}X.call(Q,B,new ad(Q,{sourceEvent:ye,subject:R,target:x,identifier:J,active:ae,x:Y[0]+ue,y:Y[1]+ge,dx:Y[0]-W[0],dy:Y[1]-W[1],dispatch:X}),U)}}return x.filter=function(B){return arguments.length?(e=typeof B=="function"?B:sc(!!B),x):e},x.container=function(B){return arguments.length?(t=typeof B=="function"?B:sc(B),x):t},x.subject=function(B){return arguments.length?(n=typeof B=="function"?B:sc(B),x):n},x.touchable=function(B){return arguments.length?(i=typeof B=="function"?B:sc(!!B),x):i},x.on=function(){var B=u.on.apply(u,arguments);return B===u?x:B},x.clickDistance=function(B){return arguments.length?(y=(B=+B)*B,x):Math.sqrt(y)},x}function oh(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function H0(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function lu(){}var Xs=.7,Cc=1/Xs,Fa="\\s*([+-]?\\d+)\\s*",Gs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ei="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",YN=/^#([0-9a-f]{3,8})$/,VN=new RegExp(`^rgb\\(${Fa},${Fa},${Fa}\\)$`),qN=new RegExp(`^rgb\\(${ei},${ei},${ei}\\)$`),XN=new RegExp(`^rgba\\(${Fa},${Fa},${Fa},${Gs}\\)$`),GN=new RegExp(`^rgba\\(${ei},${ei},${ei},${Gs}\\)$`),ZN=new RegExp(`^hsl\\(${Gs},${ei},${ei}\\)$`),QN=new RegExp(`^hsla\\(${Gs},${ei},${ei},${Gs}\\)$`),jm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oh(lu,Zs,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Bm,formatHex:Bm,formatHex8:JN,formatHsl:ek,formatRgb:Hm,toString:Hm});function Bm(){return this.rgb().formatHex()}function JN(){return this.rgb().formatHex8()}function ek(){return K0(this).formatHsl()}function Hm(){return this.rgb().formatRgb()}function Zs(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=YN.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Km(t):n===3?new Vn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?uc(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?uc(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=VN.exec(e))?new Vn(t[1],t[2],t[3],1):(t=qN.exec(e))?new Vn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=XN.exec(e))?uc(t[1],t[2],t[3],t[4]):(t=GN.exec(e))?uc(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ZN.exec(e))?Ym(t[1],t[2]/100,t[3]/100,1):(t=QN.exec(e))?Ym(t[1],t[2]/100,t[3]/100,t[4]):jm.hasOwnProperty(e)?Km(jm[e]):e==="transparent"?new Vn(NaN,NaN,NaN,0):null}function Km(e){return new Vn(e>>16&255,e>>8&255,e&255,1)}function uc(e,t,n,i){return i<=0&&(e=t=n=NaN),new Vn(e,t,n,i)}function tk(e){return e instanceof lu||(e=Zs(e)),e?(e=e.rgb(),new Vn(e.r,e.g,e.b,e.opacity)):new Vn}function sd(e,t,n,i){return arguments.length===1?tk(e):new Vn(e,t,n,i??1)}function Vn(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}oh(Vn,sd,H0(lu,{brighter(e){return e=e==null?Cc:Math.pow(Cc,e),new Vn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Xs:Math.pow(Xs,e),new Vn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Vn(Uo(this.r),Uo(this.g),Uo(this.b),Oc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zm,formatHex:zm,formatHex8:nk,formatRgb:Um,toString:Um}));function zm(){return`#${Bo(this.r)}${Bo(this.g)}${Bo(this.b)}`}function nk(){return`#${Bo(this.r)}${Bo(this.g)}${Bo(this.b)}${Bo((isNaN(this.opacity)?1:this.opacity)*255)}`}function Um(){const e=Oc(this.opacity);return`${e===1?"rgb(":"rgba("}${Uo(this.r)}, ${Uo(this.g)}, ${Uo(this.b)}${e===1?")":`, ${e})`}`}function Oc(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Uo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Bo(e){return e=Uo(e),(e<16?"0":"")+e.toString(16)}function Ym(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new $r(e,t,n,i)}function K0(e){if(e instanceof $r)return new $r(e.h,e.s,e.l,e.opacity);if(e instanceof lu||(e=Zs(e)),!e)return new $r;if(e instanceof $r)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,a=Math.min(t,n,i),u=Math.max(t,n,i),c=NaN,f=u-a,h=(u+a)/2;return f?(t===u?c=(n-i)/f+(n<i)*6:n===u?c=(i-t)/f+2:c=(t-n)/f+4,f/=h<.5?u+a:2-u-a,c*=60):f=h>0&&h<1?0:c,new $r(c,f,h,e.opacity)}function rk(e,t,n,i){return arguments.length===1?K0(e):new $r(e,t,n,i??1)}function $r(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}oh($r,rk,H0(lu,{brighter(e){return e=e==null?Cc:Math.pow(Cc,e),new $r(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Xs:Math.pow(Xs,e),new $r(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,a=2*n-i;return new Vn(Af(e>=240?e-240:e+120,a,i),Af(e,a,i),Af(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new $r(Vm(this.h),cc(this.s),cc(this.l),Oc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Oc(this.opacity);return`${e===1?"hsl(":"hsla("}${Vm(this.h)}, ${cc(this.s)*100}%, ${cc(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Vm(e){return e=(e||0)%360,e<0?e+360:e}function cc(e){return Math.max(0,Math.min(1,e||0))}function Af(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const z0=e=>()=>e;function ik(e,t){return function(n){return e+n*t}}function ok(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function ak(e){return(e=+e)==1?U0:function(t,n){return n-t?ok(t,n,e):z0(isNaN(t)?n:t)}}function U0(e,t){var n=t-e;return n?ik(e,n):z0(isNaN(e)?t:e)}const qm=function e(t){var n=ak(t);function i(a,u){var c=n((a=sd(a)).r,(u=sd(u)).r),f=n(a.g,u.g),h=n(a.b,u.b),p=U0(a.opacity,u.opacity);return function(m){return a.r=c(m),a.g=f(m),a.b=h(m),a.opacity=p(m),a+""}}return i.gamma=e,i}(1);function qi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var ud=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Df=new RegExp(ud.source,"g");function sk(e){return function(){return e}}function uk(e){return function(t){return e(t)+""}}function ck(e,t){var n=ud.lastIndex=Df.lastIndex=0,i,a,u,c=-1,f=[],h=[];for(e=e+"",t=t+"";(i=ud.exec(e))&&(a=Df.exec(t));)(u=a.index)>n&&(u=t.slice(n,u),f[c]?f[c]+=u:f[++c]=u),(i=i[0])===(a=a[0])?f[c]?f[c]+=a:f[++c]=a:(f[++c]=null,h.push({i:c,x:qi(i,a)})),n=Df.lastIndex;return n<t.length&&(u=t.slice(n),f[c]?f[c]+=u:f[++c]=u),f.length<2?h[0]?uk(h[0].x):sk(t):(t=h.length,function(p){for(var m=0,y;m<t;++m)f[(y=h[m]).i]=y.x(p);return f.join("")})}var Xm=180/Math.PI,cd={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Y0(e,t,n,i,a,u){var c,f,h;return(c=Math.sqrt(e*e+t*t))&&(e/=c,t/=c),(h=e*n+t*i)&&(n-=e*h,i-=t*h),(f=Math.sqrt(n*n+i*i))&&(n/=f,i/=f,h/=f),e*i<t*n&&(e=-e,t=-t,h=-h,c=-c),{translateX:a,translateY:u,rotate:Math.atan2(t,e)*Xm,skewX:Math.atan(h)*Xm,scaleX:c,scaleY:f}}var lc;function lk(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?cd:Y0(t.a,t.b,t.c,t.d,t.e,t.f)}function fk(e){return e==null||(lc||(lc=document.createElementNS("http://www.w3.org/2000/svg","g")),lc.setAttribute("transform",e),!(e=lc.transform.baseVal.consolidate()))?cd:(e=e.matrix,Y0(e.a,e.b,e.c,e.d,e.e,e.f))}function V0(e,t,n,i){function a(p){return p.length?p.pop()+" ":""}function u(p,m,y,x,b,N){if(p!==y||m!==x){var E=b.push("translate(",null,t,null,n);N.push({i:E-4,x:qi(p,y)},{i:E-2,x:qi(m,x)})}else(y||x)&&b.push("translate("+y+t+x+n)}function c(p,m,y,x){p!==m?(p-m>180?m+=360:m-p>180&&(p+=360),x.push({i:y.push(a(y)+"rotate(",null,i)-2,x:qi(p,m)})):m&&y.push(a(y)+"rotate("+m+i)}function f(p,m,y,x){p!==m?x.push({i:y.push(a(y)+"skewX(",null,i)-2,x:qi(p,m)}):m&&y.push(a(y)+"skewX("+m+i)}function h(p,m,y,x,b,N){if(p!==y||m!==x){var E=b.push(a(b)+"scale(",null,",",null,")");N.push({i:E-4,x:qi(p,y)},{i:E-2,x:qi(m,x)})}else(y!==1||x!==1)&&b.push(a(b)+"scale("+y+","+x+")")}return function(p,m){var y=[],x=[];return p=e(p),m=e(m),u(p.translateX,p.translateY,m.translateX,m.translateY,y,x),c(p.rotate,m.rotate,y,x),f(p.skewX,m.skewX,y,x),h(p.scaleX,p.scaleY,m.scaleX,m.scaleY,y,x),p=m=null,function(b){for(var N=-1,E=x.length,C;++N<E;)y[(C=x[N]).i]=C.x(b);return y.join("")}}}var dk=V0(lk,"px, ","px)","deg)"),hk=V0(fk,", ",")",")"),pk=1e-12;function Gm(e){return((e=Math.exp(e))+1/e)/2}function mk(e){return((e=Math.exp(e))-1/e)/2}function gk(e){return((e=Math.exp(2*e))-1)/(e+1)}const vk=function e(t,n,i){function a(u,c){var f=u[0],h=u[1],p=u[2],m=c[0],y=c[1],x=c[2],b=m-f,N=y-h,E=b*b+N*N,C,M;if(E<pk)M=Math.log(x/p)/t,C=function(U){return[f+U*b,h+U*N,p*Math.exp(t*U*M)]};else{var z=Math.sqrt(E),ee=(x*x-p*p+i*E)/(2*p*n*z),B=(x*x-p*p-i*E)/(2*x*n*z),le=Math.log(Math.sqrt(ee*ee+1)-ee),ce=Math.log(Math.sqrt(B*B+1)-B);M=(ce-le)/t,C=function(U){var J=U*M,oe=Gm(le),X=p/(n*z)*(oe*gk(t*J+le)-mk(le));return[f+X*b,h+X*N,p*oe/Gm(t*J+le)]}}return C.duration=M*1e3*t/Math.SQRT2,C}return a.rho=function(u){var c=Math.max(.001,+u),f=c*c,h=f*f;return e(c,f,h)},a}(Math.SQRT2,2,4);var za=0,Ws=0,Cs=0,q0=1e3,Ac,Fs,Dc=0,Xo=0,Qc=0,Qs=typeof performance=="object"&&performance.now?performance:Date,X0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ah(){return Xo||(X0(yk),Xo=Qs.now()+Qc)}function yk(){Xo=0}function Pc(){this._call=this._time=this._next=null}Pc.prototype=G0.prototype={constructor:Pc,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ah():+n)+(t==null?0:+t),!this._next&&Fs!==this&&(Fs?Fs._next=this:Ac=this,Fs=this),this._call=e,this._time=n,ld()},stop:function(){this._call&&(this._call=null,this._time=1/0,ld())}};function G0(e,t,n){var i=new Pc;return i.restart(e,t,n),i}function wk(){ah(),++za;for(var e=Ac,t;e;)(t=Xo-e._time)>=0&&e._call.call(void 0,t),e=e._next;--za}function Zm(){Xo=(Dc=Qs.now())+Qc,za=Ws=0;try{wk()}finally{za=0,bk(),Xo=0}}function xk(){var e=Qs.now(),t=e-Dc;t>q0&&(Qc-=t,Dc=e)}function bk(){for(var e,t=Ac,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ac=n);Fs=e,ld(i)}function ld(e){if(!za){Ws&&(Ws=clearTimeout(Ws));var t=e-Xo;t>24?(e<1/0&&(Ws=setTimeout(Zm,e-Qs.now()-Qc)),Cs&&(Cs=clearInterval(Cs))):(Cs||(Dc=Qs.now(),Cs=setInterval(xk,q0)),za=1,X0(Zm))}}function Qm(e,t,n){var i=new Pc;return t=t==null?0:+t,i.restart(a=>{i.stop(),e(a+t)},t,n),i}var _k=Gc("start","end","cancel","interrupt"),Ek=[],Z0=0,Jm=1,fd=2,_c=3,eg=4,dd=5,Ec=6;function Jc(e,t,n,i,a,u){var c=e.__transition;if(!c)e.__transition={};else if(n in c)return;Sk(e,n,{name:t,index:i,group:a,on:_k,tween:Ek,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:Z0})}function sh(e,t){var n=Hr(e,t);if(n.state>Z0)throw new Error("too late; already scheduled");return n}function ni(e,t){var n=Hr(e,t);if(n.state>_c)throw new Error("too late; already running");return n}function Hr(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Sk(e,t,n){var i=e.__transition,a;i[t]=n,n.timer=G0(u,0,n.time);function u(p){n.state=Jm,n.timer.restart(c,n.delay,n.time),n.delay<=p&&c(p-n.delay)}function c(p){var m,y,x,b;if(n.state!==Jm)return h();for(m in i)if(b=i[m],b.name===n.name){if(b.state===_c)return Qm(c);b.state===eg?(b.state=Ec,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete i[m]):+m<t&&(b.state=Ec,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete i[m])}if(Qm(function(){n.state===_c&&(n.state=eg,n.timer.restart(f,n.delay,n.time),f(p))}),n.state=fd,n.on.call("start",e,e.__data__,n.index,n.group),n.state===fd){for(n.state=_c,a=new Array(x=n.tween.length),m=0,y=-1;m<x;++m)(b=n.tween[m].value.call(e,e.__data__,n.index,n.group))&&(a[++y]=b);a.length=y+1}}function f(p){for(var m=p<n.duration?n.ease.call(null,p/n.duration):(n.timer.restart(h),n.state=dd,1),y=-1,x=a.length;++y<x;)a[y].call(e,m);n.state===dd&&(n.on.call("end",e,e.__data__,n.index,n.group),h())}function h(){n.state=Ec,n.timer.stop(),delete i[t];for(var p in i)return;delete e.__transition}}function Sc(e,t){var n=e.__transition,i,a,u=!0,c;if(n){t=t==null?null:t+"";for(c in n){if((i=n[c]).name!==t){u=!1;continue}a=i.state>fd&&i.state<dd,i.state=Ec,i.timer.stop(),i.on.call(a?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[c]}u&&delete e.__transition}}function Tk(e){return this.each(function(){Sc(this,e)})}function Nk(e,t){var n,i;return function(){var a=ni(this,e),u=a.tween;if(u!==n){i=n=u;for(var c=0,f=i.length;c<f;++c)if(i[c].name===t){i=i.slice(),i.splice(c,1);break}}a.tween=i}}function kk(e,t,n){var i,a;if(typeof n!="function")throw new Error;return function(){var u=ni(this,e),c=u.tween;if(c!==i){a=(i=c).slice();for(var f={name:t,value:n},h=0,p=a.length;h<p;++h)if(a[h].name===t){a[h]=f;break}h===p&&a.push(f)}u.tween=a}}function Ik(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Hr(this.node(),n).tween,a=0,u=i.length,c;a<u;++a)if((c=i[a]).name===e)return c.value;return null}return this.each((t==null?Nk:kk)(n,e,t))}function uh(e,t,n){var i=e._id;return e.each(function(){var a=ni(this,i);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return Hr(a,i).value[t]}}function Q0(e,t){var n;return(typeof t=="number"?qi:t instanceof Zs?qm:(n=Zs(t))?(t=n,qm):ck)(e,t)}function Ck(e){return function(){this.removeAttribute(e)}}function Ok(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ak(e,t,n){var i,a=n+"",u;return function(){var c=this.getAttribute(e);return c===a?null:c===i?u:u=t(i=c,n)}}function Dk(e,t,n){var i,a=n+"",u;return function(){var c=this.getAttributeNS(e.space,e.local);return c===a?null:c===i?u:u=t(i=c,n)}}function Pk(e,t,n){var i,a,u;return function(){var c,f=n(this),h;return f==null?void this.removeAttribute(e):(c=this.getAttribute(e),h=f+"",c===h?null:c===i&&h===a?u:(a=h,u=t(i=c,f)))}}function Rk(e,t,n){var i,a,u;return function(){var c,f=n(this),h;return f==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),h=f+"",c===h?null:c===i&&h===a?u:(a=h,u=t(i=c,f)))}}function Mk(e,t){var n=Zc(e),i=n==="transform"?hk:Q0;return this.attrTween(e,typeof t=="function"?(n.local?Rk:Pk)(n,i,uh(this,"attr."+e,t)):t==null?(n.local?Ok:Ck)(n):(n.local?Dk:Ak)(n,i,t))}function Lk(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function $k(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Wk(e,t){var n,i;function a(){var u=t.apply(this,arguments);return u!==i&&(n=(i=u)&&$k(e,u)),n}return a._value=t,a}function Fk(e,t){var n,i;function a(){var u=t.apply(this,arguments);return u!==i&&(n=(i=u)&&Lk(e,u)),n}return a._value=t,a}function jk(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=Zc(e);return this.tween(n,(i.local?Wk:Fk)(i,t))}function Bk(e,t){return function(){sh(this,e).delay=+t.apply(this,arguments)}}function Hk(e,t){return t=+t,function(){sh(this,e).delay=t}}function Kk(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Bk:Hk)(t,e)):Hr(this.node(),t).delay}function zk(e,t){return function(){ni(this,e).duration=+t.apply(this,arguments)}}function Uk(e,t){return t=+t,function(){ni(this,e).duration=t}}function Yk(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?zk:Uk)(t,e)):Hr(this.node(),t).duration}function Vk(e,t){if(typeof t!="function")throw new Error;return function(){ni(this,e).ease=t}}function qk(e){var t=this._id;return arguments.length?this.each(Vk(t,e)):Hr(this.node(),t).ease}function Xk(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ni(this,e).ease=n}}function Gk(e){if(typeof e!="function")throw new Error;return this.each(Xk(this._id,e))}function Zk(e){typeof e!="function"&&(e=O0(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var u=t[a],c=u.length,f=i[a]=[],h,p=0;p<c;++p)(h=u[p])&&e.call(h,h.__data__,p,u)&&f.push(h);return new Si(i,this._parents,this._name,this._id)}function Qk(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,a=n.length,u=Math.min(i,a),c=new Array(i),f=0;f<u;++f)for(var h=t[f],p=n[f],m=h.length,y=c[f]=new Array(m),x,b=0;b<m;++b)(x=h[b]||p[b])&&(y[b]=x);for(;f<i;++f)c[f]=t[f];return new Si(c,this._parents,this._name,this._id)}function Jk(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function eI(e,t,n){var i,a,u=Jk(t)?sh:ni;return function(){var c=u(this,e),f=c.on;f!==i&&(a=(i=f).copy()).on(t,n),c.on=a}}function tI(e,t){var n=this._id;return arguments.length<2?Hr(this.node(),n).on.on(e):this.each(eI(n,e,t))}function nI(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function rI(){return this.on("end.remove",nI(this._id))}function iI(e){var t=this._name,n=this._id;typeof e!="function"&&(e=rh(e));for(var i=this._groups,a=i.length,u=new Array(a),c=0;c<a;++c)for(var f=i[c],h=f.length,p=u[c]=new Array(h),m,y,x=0;x<h;++x)(m=f[x])&&(y=e.call(m,m.__data__,x,f))&&("__data__"in m&&(y.__data__=m.__data__),p[x]=y,Jc(p[x],t,n,x,p,Hr(m,n)));return new Si(u,this._parents,t,n)}function oI(e){var t=this._name,n=this._id;typeof e!="function"&&(e=C0(e));for(var i=this._groups,a=i.length,u=[],c=[],f=0;f<a;++f)for(var h=i[f],p=h.length,m,y=0;y<p;++y)if(m=h[y]){for(var x=e.call(m,m.__data__,y,h),b,N=Hr(m,n),E=0,C=x.length;E<C;++E)(b=x[E])&&Jc(b,t,n,E,x,N);u.push(x),c.push(m)}return new Si(u,c,t,n)}var aI=cu.prototype.constructor;function sI(){return new aI(this._groups,this._parents)}function uI(e,t){var n,i,a;return function(){var u=Ka(this,e),c=(this.style.removeProperty(e),Ka(this,e));return u===c?null:u===n&&c===i?a:a=t(n=u,i=c)}}function J0(e){return function(){this.style.removeProperty(e)}}function cI(e,t,n){var i,a=n+"",u;return function(){var c=Ka(this,e);return c===a?null:c===i?u:u=t(i=c,n)}}function lI(e,t,n){var i,a,u;return function(){var c=Ka(this,e),f=n(this),h=f+"";return f==null&&(h=f=(this.style.removeProperty(e),Ka(this,e))),c===h?null:c===i&&h===a?u:(a=h,u=t(i=c,f))}}function fI(e,t){var n,i,a,u="style."+t,c="end."+u,f;return function(){var h=ni(this,e),p=h.on,m=h.value[u]==null?f||(f=J0(t)):void 0;(p!==n||a!==m)&&(i=(n=p).copy()).on(c,a=m),h.on=i}}function dI(e,t,n){var i=(e+="")=="transform"?dk:Q0;return t==null?this.styleTween(e,uI(e,i)).on("end.style."+e,J0(e)):typeof t=="function"?this.styleTween(e,lI(e,i,uh(this,"style."+e,t))).each(fI(this._id,e)):this.styleTween(e,cI(e,i,t),n).on("end.style."+e,null)}function hI(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function pI(e,t,n){var i,a;function u(){var c=t.apply(this,arguments);return c!==a&&(i=(a=c)&&hI(e,c,n)),i}return u._value=t,u}function mI(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,pI(e,t,n??""))}function gI(e){return function(){this.textContent=e}}function vI(e){return function(){var t=e(this);this.textContent=t??""}}function yI(e){return this.tween("text",typeof e=="function"?vI(uh(this,"text",e)):gI(e==null?"":e+""))}function wI(e){return function(t){this.textContent=e.call(this,t)}}function xI(e){var t,n;function i(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&wI(a)),t}return i._value=e,i}function bI(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,xI(e))}function _I(){for(var e=this._name,t=this._id,n=ev(),i=this._groups,a=i.length,u=0;u<a;++u)for(var c=i[u],f=c.length,h,p=0;p<f;++p)if(h=c[p]){var m=Hr(h,t);Jc(h,e,n,p,c,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new Si(i,this._parents,e,n)}function EI(){var e,t,n=this,i=n._id,a=n.size();return new Promise(function(u,c){var f={value:c},h={value:function(){--a===0&&u()}};n.each(function(){var p=ni(this,i),m=p.on;m!==e&&(t=(e=m).copy(),t._.cancel.push(f),t._.interrupt.push(f),t._.end.push(h)),p.on=t}),a===0&&u()})}var SI=0;function Si(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function ev(){return++SI}var yi=cu.prototype;Si.prototype={constructor:Si,select:iI,selectAll:oI,selectChild:yi.selectChild,selectChildren:yi.selectChildren,filter:Zk,merge:Qk,selection:sI,transition:_I,call:yi.call,nodes:yi.nodes,node:yi.node,size:yi.size,empty:yi.empty,each:yi.each,on:tI,attr:Mk,attrTween:jk,style:dI,styleTween:mI,text:yI,textTween:bI,remove:rI,tween:Ik,delay:Kk,duration:Yk,ease:qk,easeVarying:Gk,end:EI,[Symbol.iterator]:yi[Symbol.iterator]};function TI(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var NI={time:null,delay:0,duration:250,ease:TI};function kI(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function II(e){var t,n;e instanceof Si?(t=e._id,e=e._name):(t=ev(),(n=NI).time=ah(),e=e==null?null:e+"");for(var i=this._groups,a=i.length,u=0;u<a;++u)for(var c=i[u],f=c.length,h,p=0;p<f;++p)(h=c[p])&&Jc(h,e,t,p,c,n||kI(h,t));return new Si(i,this._parents,e,t)}cu.prototype.interrupt=Tk;cu.prototype.transition=II;const fc=e=>()=>e;function CI(e,{sourceEvent:t,target:n,transform:i,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function xi(e,t,n){this.k=e,this.x=t,this.y=n}xi.prototype={constructor:xi,scale:function(e){return e===1?this:new xi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new xi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var _i=new xi(1,0,0);xi.prototype;function Pf(e){e.stopImmediatePropagation()}function Os(e){e.preventDefault(),e.stopImmediatePropagation()}function OI(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function AI(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function tg(){return this.__zoom||_i}function DI(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function PI(){return navigator.maxTouchPoints||"ontouchstart"in this}function RI(e,t,n){var i=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],u=e.invertY(t[0][1])-n[0][1],c=e.invertY(t[1][1])-n[1][1];return e.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),c>u?(u+c)/2:Math.min(0,u)||Math.max(0,c))}function tv(){var e=OI,t=AI,n=RI,i=DI,a=PI,u=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],f=250,h=vk,p=Gc("start","zoom","end"),m,y,x,b=500,N=150,E=0,C=10;function M(R){R.property("__zoom",tg).on("wheel.zoom",J,{passive:!1}).on("mousedown.zoom",oe).on("dblclick.zoom",X).filter(a).on("touchstart.zoom",Y).on("touchmove.zoom",ue).on("touchend.zoom touchcancel.zoom",ge).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}M.transform=function(R,re,Q,ye){var he=R.selection?R.selection():R;he.property("__zoom",tg),R!==he?le(R,re,Q,ye):he.interrupt().each(function(){ce(this,arguments).event(ye).start().zoom(null,typeof re=="function"?re.apply(this,arguments):re).end()})},M.scaleBy=function(R,re,Q,ye){M.scaleTo(R,function(){var he=this.__zoom.k,W=typeof re=="function"?re.apply(this,arguments):re;return he*W},Q,ye)},M.scaleTo=function(R,re,Q,ye){M.transform(R,function(){var he=t.apply(this,arguments),W=this.__zoom,ae=Q==null?B(he):typeof Q=="function"?Q.apply(this,arguments):Q,fe=W.invert(ae),we=typeof re=="function"?re.apply(this,arguments):re;return n(ee(z(W,we),ae,fe),he,c)},Q,ye)},M.translateBy=function(R,re,Q,ye){M.transform(R,function(){return n(this.__zoom.translate(typeof re=="function"?re.apply(this,arguments):re,typeof Q=="function"?Q.apply(this,arguments):Q),t.apply(this,arguments),c)},null,ye)},M.translateTo=function(R,re,Q,ye,he){M.transform(R,function(){var W=t.apply(this,arguments),ae=this.__zoom,fe=ye==null?B(W):typeof ye=="function"?ye.apply(this,arguments):ye;return n(_i.translate(fe[0],fe[1]).scale(ae.k).translate(typeof re=="function"?-re.apply(this,arguments):-re,typeof Q=="function"?-Q.apply(this,arguments):-Q),W,c)},ye,he)};function z(R,re){return re=Math.max(u[0],Math.min(u[1],re)),re===R.k?R:new xi(re,R.x,R.y)}function ee(R,re,Q){var ye=re[0]-Q[0]*R.k,he=re[1]-Q[1]*R.k;return ye===R.x&&he===R.y?R:new xi(R.k,ye,he)}function B(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function le(R,re,Q,ye){R.on("start.zoom",function(){ce(this,arguments).event(ye).start()}).on("interrupt.zoom end.zoom",function(){ce(this,arguments).event(ye).end()}).tween("zoom",function(){var he=this,W=arguments,ae=ce(he,W).event(ye),fe=t.apply(he,W),we=Q==null?B(fe):typeof Q=="function"?Q.apply(he,W):Q,ke=Math.max(fe[1][0]-fe[0][0],fe[1][1]-fe[0][1]),Me=he.__zoom,Re=typeof re=="function"?re.apply(he,W):re,Be=h(Me.invert(we).concat(ke/Me.k),Re.invert(we).concat(ke/Re.k));return function(Ve){if(Ve===1)Ve=Re;else{var qe=Be(Ve),Ee=ke/qe[2];Ve=new xi(Ee,we[0]-qe[0]*Ee,we[1]-qe[1]*Ee)}ae.zoom(null,Ve)}})}function ce(R,re,Q){return!Q&&R.__zooming||new U(R,re)}function U(R,re){this.that=R,this.args=re,this.active=0,this.sourceEvent=null,this.extent=t.apply(R,re),this.taps=0}U.prototype={event:function(R){return R&&(this.sourceEvent=R),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(R,re){return this.mouse&&R!=="mouse"&&(this.mouse[1]=re.invert(this.mouse[0])),this.touch0&&R!=="touch"&&(this.touch0[1]=re.invert(this.touch0[0])),this.touch1&&R!=="touch"&&(this.touch1[1]=re.invert(this.touch1[0])),this.that.__zoom=re,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(R){var re=wr(this.that).datum();p.call(R,this.that,new CI(R,{sourceEvent:this.sourceEvent,target:M,type:R,transform:this.that.__zoom,dispatch:p}),re)}};function J(R,...re){if(!e.apply(this,arguments))return;var Q=ce(this,re).event(R),ye=this.__zoom,he=Math.max(u[0],Math.min(u[1],ye.k*Math.pow(2,i.apply(this,arguments)))),W=Mr(R);if(Q.wheel)(Q.mouse[0][0]!==W[0]||Q.mouse[0][1]!==W[1])&&(Q.mouse[1]=ye.invert(Q.mouse[0]=W)),clearTimeout(Q.wheel);else{if(ye.k===he)return;Q.mouse=[W,ye.invert(W)],Sc(this),Q.start()}Os(R),Q.wheel=setTimeout(ae,N),Q.zoom("mouse",n(ee(z(ye,he),Q.mouse[0],Q.mouse[1]),Q.extent,c));function ae(){Q.wheel=null,Q.end()}}function oe(R,...re){if(x||!e.apply(this,arguments))return;var Q=R.currentTarget,ye=ce(this,re,!0).event(R),he=wr(R.view).on("mousemove.zoom",we,!0).on("mouseup.zoom",ke,!0),W=Mr(R,Q),ae=R.clientX,fe=R.clientY;j0(R.view),Pf(R),ye.mouse=[W,this.__zoom.invert(W)],Sc(this),ye.start();function we(Me){if(Os(Me),!ye.moved){var Re=Me.clientX-ae,Be=Me.clientY-fe;ye.moved=Re*Re+Be*Be>E}ye.event(Me).zoom("mouse",n(ee(ye.that.__zoom,ye.mouse[0]=Mr(Me,Q),ye.mouse[1]),ye.extent,c))}function ke(Me){he.on("mousemove.zoom mouseup.zoom",null),B0(Me.view,ye.moved),Os(Me),ye.event(Me).end()}}function X(R,...re){if(e.apply(this,arguments)){var Q=this.__zoom,ye=Mr(R.changedTouches?R.changedTouches[0]:R,this),he=Q.invert(ye),W=Q.k*(R.shiftKey?.5:2),ae=n(ee(z(Q,W),ye,he),t.apply(this,re),c);Os(R),f>0?wr(this).transition().duration(f).call(le,ae,ye,R):wr(this).call(M.transform,ae,ye,R)}}function Y(R,...re){if(e.apply(this,arguments)){var Q=R.touches,ye=Q.length,he=ce(this,re,R.changedTouches.length===ye).event(R),W,ae,fe,we;for(Pf(R),ae=0;ae<ye;++ae)fe=Q[ae],we=Mr(fe,this),we=[we,this.__zoom.invert(we),fe.identifier],he.touch0?!he.touch1&&he.touch0[2]!==we[2]&&(he.touch1=we,he.taps=0):(he.touch0=we,W=!0,he.taps=1+!!m);m&&(m=clearTimeout(m)),W&&(he.taps<2&&(y=we[0],m=setTimeout(function(){m=null},b)),Sc(this),he.start())}}function ue(R,...re){if(this.__zooming){var Q=ce(this,re).event(R),ye=R.changedTouches,he=ye.length,W,ae,fe,we;for(Os(R),W=0;W<he;++W)ae=ye[W],fe=Mr(ae,this),Q.touch0&&Q.touch0[2]===ae.identifier?Q.touch0[0]=fe:Q.touch1&&Q.touch1[2]===ae.identifier&&(Q.touch1[0]=fe);if(ae=Q.that.__zoom,Q.touch1){var ke=Q.touch0[0],Me=Q.touch0[1],Re=Q.touch1[0],Be=Q.touch1[1],Ve=(Ve=Re[0]-ke[0])*Ve+(Ve=Re[1]-ke[1])*Ve,qe=(qe=Be[0]-Me[0])*qe+(qe=Be[1]-Me[1])*qe;ae=z(ae,Math.sqrt(Ve/qe)),fe=[(ke[0]+Re[0])/2,(ke[1]+Re[1])/2],we=[(Me[0]+Be[0])/2,(Me[1]+Be[1])/2]}else if(Q.touch0)fe=Q.touch0[0],we=Q.touch0[1];else return;Q.zoom("touch",n(ee(ae,fe,we),Q.extent,c))}}function ge(R,...re){if(this.__zooming){var Q=ce(this,re).event(R),ye=R.changedTouches,he=ye.length,W,ae;for(Pf(R),x&&clearTimeout(x),x=setTimeout(function(){x=null},b),W=0;W<he;++W)ae=ye[W],Q.touch0&&Q.touch0[2]===ae.identifier?delete Q.touch0:Q.touch1&&Q.touch1[2]===ae.identifier&&delete Q.touch1;if(Q.touch1&&!Q.touch0&&(Q.touch0=Q.touch1,delete Q.touch1),Q.touch0)Q.touch0[1]=this.__zoom.invert(Q.touch0[0]);else if(Q.end(),Q.taps===2&&(ae=Mr(ae,this),Math.hypot(y[0]-ae[0],y[1]-ae[1])<C)){var fe=wr(this).on("dblclick.zoom");fe&&fe.apply(this,arguments)}}}return M.wheelDelta=function(R){return arguments.length?(i=typeof R=="function"?R:fc(+R),M):i},M.filter=function(R){return arguments.length?(e=typeof R=="function"?R:fc(!!R),M):e},M.touchable=function(R){return arguments.length?(a=typeof R=="function"?R:fc(!!R),M):a},M.extent=function(R){return arguments.length?(t=typeof R=="function"?R:fc([[+R[0][0],+R[0][1]],[+R[1][0],+R[1][1]]]),M):t},M.scaleExtent=function(R){return arguments.length?(u[0]=+R[0],u[1]=+R[1],M):[u[0],u[1]]},M.translateExtent=function(R){return arguments.length?(c[0][0]=+R[0][0],c[1][0]=+R[1][0],c[0][1]=+R[0][1],c[1][1]=+R[1][1],M):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},M.constrain=function(R){return arguments.length?(n=R,M):n},M.duration=function(R){return arguments.length?(f=+R,M):f},M.interpolate=function(R){return arguments.length?(h=R,M):h},M.on=function(){var R=p.on.apply(p,arguments);return R===p?M:R},M.clickDistance=function(R){return arguments.length?(E=(R=+R)*R,M):Math.sqrt(E)},M.tapDistance=function(R){return arguments.length?(C=+R,M):C},M}const el=k.createContext(null),MI=el.Provider,Ti={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},nv=Ti.error001();function $t(e,t){const n=k.useContext(el);if(n===null)throw new Error(nv);return k0(n,e,t)}const gn=()=>{const e=k.useContext(el);if(e===null)throw new Error(nv);return k.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},LI=e=>e.userSelectionActive?"none":"all";function Js({position:e,children:t,className:n,style:i,...a}){const u=$t(LI),c=`${e}`.split("-");return ie.createElement("div",{className:Tn(["react-flow__panel",n,...c]),style:{...i,pointerEvents:u},...a},t)}function $I({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:ie.createElement(Js,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},ie.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const WI=({x:e,y:t,label:n,labelStyle:i={},labelShowBg:a=!0,labelBgStyle:u={},labelBgPadding:c=[2,4],labelBgBorderRadius:f=2,children:h,className:p,...m})=>{const y=k.useRef(null),[x,b]=k.useState({x:0,y:0,width:0,height:0}),N=Tn(["react-flow__edge-textwrapper",p]);return k.useEffect(()=>{if(y.current){const E=y.current.getBBox();b({x:E.x,y:E.y,width:E.width,height:E.height})}},[n]),typeof n>"u"||!n?null:ie.createElement("g",{transform:`translate(${e-x.width/2} ${t-x.height/2})`,className:N,visibility:x.width?"visible":"hidden",...m},a&&ie.createElement("rect",{width:x.width+2*c[0],x:-c[0],y:-c[1],height:x.height+2*c[1],className:"react-flow__edge-textbg",style:u,rx:f,ry:f}),ie.createElement("text",{className:"react-flow__edge-text",y:x.height/2,dy:"0.3em",ref:y,style:i},n),h)};var FI=k.memo(WI);const ch=e=>({width:e.offsetWidth,height:e.offsetHeight}),Ua=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),lh=(e={x:0,y:0},t)=>({x:Ua(e.x,t[0][0],t[1][0]),y:Ua(e.y,t[0][1],t[1][1])}),ng=(e,t,n)=>e<t?Ua(Math.abs(e-t),1,50)/50:e>n?-Ua(Math.abs(e-n),1,50)/50:0,rv=(e,t)=>{const n=ng(e.x,35,t.width-35)*20,i=ng(e.y,35,t.height-35)*20;return[n,i]},iv=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},ov=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),eu=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),av=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),rg=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),jI=(e,t)=>av(ov(eu(e),eu(t))),hd=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},BI=e=>br(e.width)&&br(e.height)&&br(e.x)&&br(e.y),br=e=>!isNaN(e)&&isFinite(e),tn=Symbol.for("internals"),sv=["Enter"," ","Escape"],HI=(e,t)=>{},KI=e=>"nativeEvent"in e;function pd(e){var a,u;const t=KI(e)?e.nativeEvent:e,n=((u=(a=t.composedPath)==null?void 0:a.call(t))==null?void 0:u[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const uv=e=>"clientX"in e,eo=(e,t)=>{var u,c;const n=uv(e),i=n?e.clientX:(u=e.touches)==null?void 0:u[0].clientX,a=n?e.clientY:(c=e.touches)==null?void 0:c[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},Rc=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},fu=({id:e,path:t,labelX:n,labelY:i,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:y,markerStart:x,interactionWidth:b=20})=>ie.createElement(ie.Fragment,null,ie.createElement("path",{id:e,style:m,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:y,markerStart:x}),b&&ie.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:b,className:"react-flow__edge-interaction"}),a&&br(n)&&br(i)?ie.createElement(FI,{x:n,y:i,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p}):null);fu.displayName="BaseEdge";function As(e,t,n){return n===void 0?n:i=>{const a=t().edges.find(u=>u.id===e);a&&n(i,{...a})}}function cv({sourceX:e,sourceY:t,targetX:n,targetY:i}){const a=Math.abs(n-e)/2,u=n<e?n+a:n-a,c=Math.abs(i-t)/2,f=i<t?i+c:i-c;return[u,f,a,c]}function lv({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:a,sourceControlY:u,targetControlX:c,targetControlY:f}){const h=e*.125+a*.375+c*.375+n*.125,p=t*.125+u*.375+f*.375+i*.125,m=Math.abs(h-e),y=Math.abs(p-t);return[h,p,m,y]}var Go;(function(e){e.Strict="strict",e.Loose="loose"})(Go||(Go={}));var Ho;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ho||(Ho={}));var tu;(function(e){e.Partial="partial",e.Full="full"})(tu||(tu={}));var Gi;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Gi||(Gi={}));var Mc;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Mc||(Mc={}));var Ue;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Ue||(Ue={}));function ig({pos:e,x1:t,y1:n,x2:i,y2:a}){return e===Ue.Left||e===Ue.Right?[.5*(t+i),n]:[t,.5*(n+a)]}function fv({sourceX:e,sourceY:t,sourcePosition:n=Ue.Bottom,targetX:i,targetY:a,targetPosition:u=Ue.Top}){const[c,f]=ig({pos:n,x1:e,y1:t,x2:i,y2:a}),[h,p]=ig({pos:u,x1:i,y1:a,x2:e,y2:t}),[m,y,x,b]=lv({sourceX:e,sourceY:t,targetX:i,targetY:a,sourceControlX:c,sourceControlY:f,targetControlX:h,targetControlY:p});return[`M${e},${t} C${c},${f} ${h},${p} ${i},${a}`,m,y,x,b]}const fh=k.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,sourcePosition:a=Ue.Bottom,targetPosition:u=Ue.Top,label:c,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:y,style:x,markerEnd:b,markerStart:N,interactionWidth:E})=>{const[C,M,z]=fv({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:i,targetPosition:u});return ie.createElement(fu,{path:C,labelX:M,labelY:z,label:c,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:y,style:x,markerEnd:b,markerStart:N,interactionWidth:E})});fh.displayName="SimpleBezierEdge";const og={[Ue.Left]:{x:-1,y:0},[Ue.Right]:{x:1,y:0},[Ue.Top]:{x:0,y:-1},[Ue.Bottom]:{x:0,y:1}},zI=({source:e,sourcePosition:t=Ue.Bottom,target:n})=>t===Ue.Left||t===Ue.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},ag=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function UI({source:e,sourcePosition:t=Ue.Bottom,target:n,targetPosition:i=Ue.Top,center:a,offset:u}){const c=og[t],f=og[i],h={x:e.x+c.x*u,y:e.y+c.y*u},p={x:n.x+f.x*u,y:n.y+f.y*u},m=zI({source:h,sourcePosition:t,target:p}),y=m.x!==0?"x":"y",x=m[y];let b=[],N,E;const C={x:0,y:0},M={x:0,y:0},[z,ee,B,le]=cv({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(c[y]*f[y]===-1){N=a.x??z,E=a.y??ee;const U=[{x:N,y:h.y},{x:N,y:p.y}],J=[{x:h.x,y:E},{x:p.x,y:E}];c[y]===x?b=y==="x"?U:J:b=y==="x"?J:U}else{const U=[{x:h.x,y:p.y}],J=[{x:p.x,y:h.y}];if(y==="x"?b=c.x===x?J:U:b=c.y===x?U:J,t===i){const ge=Math.abs(e[y]-n[y]);if(ge<=u){const R=Math.min(u-1,u-ge);c[y]===x?C[y]=(h[y]>e[y]?-1:1)*R:M[y]=(p[y]>n[y]?-1:1)*R}}if(t!==i){const ge=y==="x"?"y":"x",R=c[y]===f[ge],re=h[ge]>p[ge],Q=h[ge]<p[ge];(c[y]===1&&(!R&&re||R&&Q)||c[y]!==1&&(!R&&Q||R&&re))&&(b=y==="x"?U:J)}const oe={x:h.x+C.x,y:h.y+C.y},X={x:p.x+M.x,y:p.y+M.y},Y=Math.max(Math.abs(oe.x-b[0].x),Math.abs(X.x-b[0].x)),ue=Math.max(Math.abs(oe.y-b[0].y),Math.abs(X.y-b[0].y));Y>=ue?(N=(oe.x+X.x)/2,E=b[0].y):(N=b[0].x,E=(oe.y+X.y)/2)}return[[e,{x:h.x+C.x,y:h.y+C.y},...b,{x:p.x+M.x,y:p.y+M.y},n],N,E,B,le]}function YI(e,t,n,i){const a=Math.min(ag(e,t)/2,ag(t,n)/2,i),{x:u,y:c}=t;if(e.x===u&&u===n.x||e.y===c&&c===n.y)return`L${u} ${c}`;if(e.y===c){const p=e.x<n.x?-1:1,m=e.y<n.y?1:-1;return`L ${u+a*p},${c}Q ${u},${c} ${u},${c+a*m}`}const f=e.x<n.x?1:-1,h=e.y<n.y?-1:1;return`L ${u},${c+a*h}Q ${u},${c} ${u+a*f},${c}`}function md({sourceX:e,sourceY:t,sourcePosition:n=Ue.Bottom,targetX:i,targetY:a,targetPosition:u=Ue.Top,borderRadius:c=5,centerX:f,centerY:h,offset:p=20}){const[m,y,x,b,N]=UI({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:a},targetPosition:u,center:{x:f,y:h},offset:p});return[m.reduce((C,M,z)=>{let ee="";return z>0&&z<m.length-1?ee=YI(m[z-1],M,m[z+1],c):ee=`${z===0?"M":"L"}${M.x} ${M.y}`,C+=ee,C},""),y,x,b,N]}const tl=k.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:m,sourcePosition:y=Ue.Bottom,targetPosition:x=Ue.Top,markerEnd:b,markerStart:N,pathOptions:E,interactionWidth:C})=>{const[M,z,ee]=md({sourceX:e,sourceY:t,sourcePosition:y,targetX:n,targetY:i,targetPosition:x,borderRadius:E==null?void 0:E.borderRadius,offset:E==null?void 0:E.offset});return ie.createElement(fu,{path:M,labelX:z,labelY:ee,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:b,markerStart:N,interactionWidth:C})});tl.displayName="SmoothStepEdge";const dh=k.memo(e=>{var t;return ie.createElement(tl,{...e,pathOptions:k.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});dh.displayName="StepEdge";function VI({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[a,u,c,f]=cv({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,a,u,c,f]}const hh=k.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:y,markerStart:x,interactionWidth:b})=>{const[N,E,C]=VI({sourceX:e,sourceY:t,targetX:n,targetY:i});return ie.createElement(fu,{path:N,labelX:E,labelY:C,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:y,markerStart:x,interactionWidth:b})});hh.displayName="StraightEdge";function dc(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function sg({pos:e,x1:t,y1:n,x2:i,y2:a,c:u}){switch(e){case Ue.Left:return[t-dc(t-i,u),n];case Ue.Right:return[t+dc(i-t,u),n];case Ue.Top:return[t,n-dc(n-a,u)];case Ue.Bottom:return[t,n+dc(a-n,u)]}}function dv({sourceX:e,sourceY:t,sourcePosition:n=Ue.Bottom,targetX:i,targetY:a,targetPosition:u=Ue.Top,curvature:c=.25}){const[f,h]=sg({pos:n,x1:e,y1:t,x2:i,y2:a,c}),[p,m]=sg({pos:u,x1:i,y1:a,x2:e,y2:t,c}),[y,x,b,N]=lv({sourceX:e,sourceY:t,targetX:i,targetY:a,sourceControlX:f,sourceControlY:h,targetControlX:p,targetControlY:m});return[`M${e},${t} C${f},${h} ${p},${m} ${i},${a}`,y,x,b,N]}const Lc=k.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,sourcePosition:a=Ue.Bottom,targetPosition:u=Ue.Top,label:c,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:y,style:x,markerEnd:b,markerStart:N,pathOptions:E,interactionWidth:C})=>{const[M,z,ee]=dv({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:i,targetPosition:u,curvature:E==null?void 0:E.curvature});return ie.createElement(fu,{path:M,labelX:z,labelY:ee,label:c,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:y,style:x,markerEnd:b,markerStart:N,interactionWidth:C})});Lc.displayName="BezierEdge";const ph=k.createContext(null),qI=ph.Provider;ph.Consumer;const XI=()=>k.useContext(ph),GI=e=>"id"in e&&"source"in e&&"target"in e,ZI=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`reactflow__edge-${e}${t||""}-${n}${i||""}`,gd=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`,QI=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),JI=(e,t)=>{if(!e.source||!e.target)return t;let n;return GI(e)?n={...e}:n={...e,id:ZI(e)},QI(n,t)?t:t.concat(n)},vd=({x:e,y:t},[n,i,a],u,[c,f])=>{const h={x:(e-n)/a,y:(t-i)/a};return u?{x:c*Math.round(h.x/c),y:f*Math.round(h.y/f)}:h},hv=({x:e,y:t},[n,i,a])=>({x:e*a+n,y:t*a+i}),Yo=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],i=(e.height??0)*t[1],a={x:e.position.x-n,y:e.position.y-i};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-i}:a}},nl=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((i,a)=>{const{x:u,y:c}=Yo(a,t).positionAbsolute;return ov(i,eu({x:u,y:c,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return av(n)},pv=(e,t,[n,i,a]=[0,0,1],u=!1,c=!1,f=[0,0])=>{const h={x:(t.x-n)/a,y:(t.y-i)/a,width:t.width/a,height:t.height/a},p=[];return e.forEach(m=>{const{width:y,height:x,selectable:b=!0,hidden:N=!1}=m;if(c&&!b||N)return!1;const{positionAbsolute:E}=Yo(m,f),C={x:E.x,y:E.y,width:y||0,height:x||0},M=hd(h,C),z=typeof y>"u"||typeof x>"u"||y===null||x===null,ee=u&&M>0,B=(y||0)*(x||0);(z||ee||M>=B||m.dragging)&&p.push(m)}),p},mv=(e,t)=>{const n=e.map(i=>i.id);return t.filter(i=>n.includes(i.source)||n.includes(i.target))},gv=(e,t,n,i,a,u=.1)=>{const c=t/(e.width*(1+u)),f=n/(e.height*(1+u)),h=Math.min(c,f),p=Ua(h,i,a),m=e.x+e.width/2,y=e.y+e.height/2,x=t/2-m*p,b=n/2-y*p;return{x,y:b,zoom:p}},Lo=(e,t=0)=>e.transition().duration(t);function ug(e,t,n,i){return(t[n]||[]).reduce((a,u)=>{var c,f;return`${e.id}-${u.id}-${n}`!==i&&a.push({id:u.id||null,type:n,nodeId:e.id,x:(((c=e.positionAbsolute)==null?void 0:c.x)??0)+u.x+u.width/2,y:(((f=e.positionAbsolute)==null?void 0:f.y)??0)+u.y+u.height/2}),a},[])}function eC(e,t,n,i,a,u){const{x:c,y:f}=eo(e),p=t.elementsFromPoint(c,f).find(N=>N.classList.contains("react-flow__handle"));if(p){const N=p.getAttribute("data-nodeid");if(N){const E=mh(void 0,p),C=p.getAttribute("data-handleid"),M=u({nodeId:N,id:C,type:E});if(M){const z=a.find(ee=>ee.nodeId===N&&ee.type===E&&ee.id===C);return{handle:{id:C,type:E,nodeId:N,x:(z==null?void 0:z.x)||n.x,y:(z==null?void 0:z.y)||n.y},validHandleResult:M}}}}let m=[],y=1/0;if(a.forEach(N=>{const E=Math.sqrt((N.x-n.x)**2+(N.y-n.y)**2);if(E<=i){const C=u(N);E<=y&&(E<y?m=[{handle:N,validHandleResult:C}]:E===y&&m.push({handle:N,validHandleResult:C}),y=E)}}),!m.length)return{handle:null,validHandleResult:vv()};if(m.length===1)return m[0];const x=m.some(({validHandleResult:N})=>N.isValid),b=m.some(({handle:N})=>N.type==="target");return m.find(({handle:N,validHandleResult:E})=>b?N.type==="target":x?E.isValid:!0)||m[0]}const tC={source:null,target:null,sourceHandle:null,targetHandle:null},vv=()=>({handleDomNode:null,isValid:!1,connection:tC,endHandle:null});function yv(e,t,n,i,a,u,c){const f=a==="target",h=c.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),p={...vv(),handleDomNode:h};if(h){const m=mh(void 0,h),y=h.getAttribute("data-nodeid"),x=h.getAttribute("data-handleid"),b=h.classList.contains("connectable"),N=h.classList.contains("connectableend"),E={source:f?y:n,sourceHandle:f?x:i,target:f?n:y,targetHandle:f?i:x};p.connection=E,b&&N&&(t===Go.Strict?f&&m==="source"||!f&&m==="target":y!==n||x!==i)&&(p.endHandle={nodeId:y,handleId:x,type:m},p.isValid=u(E))}return p}function nC({nodes:e,nodeId:t,handleId:n,handleType:i}){return e.reduce((a,u)=>{if(u[tn]){const{handleBounds:c}=u[tn];let f=[],h=[];c&&(f=ug(u,c,"source",`${t}-${n}-${i}`),h=ug(u,c,"target",`${t}-${n}-${i}`)),a.push(...f,...h)}return a},[])}function mh(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Rf(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function rC(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function wv({event:e,handleId:t,nodeId:n,onConnect:i,isTarget:a,getState:u,setState:c,isValidConnection:f,edgeUpdaterType:h,onReconnectEnd:p}){const m=iv(e.target),{connectionMode:y,domNode:x,autoPanOnConnect:b,connectionRadius:N,onConnectStart:E,panBy:C,getNodes:M,cancelConnection:z}=u();let ee=0,B;const{x:le,y:ce}=eo(e),U=m==null?void 0:m.elementFromPoint(le,ce),J=mh(h,U),oe=x==null?void 0:x.getBoundingClientRect();if(!oe||!J)return;let X,Y=eo(e,oe),ue=!1,ge=null,R=!1,re=null;const Q=nC({nodes:M(),nodeId:n,handleId:t,handleType:J}),ye=()=>{if(!b)return;const[ae,fe]=rv(Y,oe);C({x:ae,y:fe}),ee=requestAnimationFrame(ye)};c({connectionPosition:Y,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:J,connectionStartHandle:{nodeId:n,handleId:t,type:J},connectionEndHandle:null}),E==null||E(e,{nodeId:n,handleId:t,handleType:J});function he(ae){const{transform:fe}=u();Y=eo(ae,oe);const{handle:we,validHandleResult:ke}=eC(ae,m,vd(Y,fe,!1,[1,1]),N,Q,Me=>yv(Me,y,n,t,a?"target":"source",f,m));if(B=we,ue||(ye(),ue=!0),re=ke.handleDomNode,ge=ke.connection,R=ke.isValid,c({connectionPosition:B&&R?hv({x:B.x,y:B.y},fe):Y,connectionStatus:rC(!!B,R),connectionEndHandle:ke.endHandle}),!B&&!R&&!re)return Rf(X);ge.source!==ge.target&&re&&(Rf(X),X=re,re.classList.add("connecting","react-flow__handle-connecting"),re.classList.toggle("valid",R),re.classList.toggle("react-flow__handle-valid",R))}function W(ae){var fe,we;(B||re)&&ge&&R&&(i==null||i(ge)),(we=(fe=u()).onConnectEnd)==null||we.call(fe,ae),h&&(p==null||p(ae)),Rf(X),z(),cancelAnimationFrame(ee),ue=!1,R=!1,ge=null,re=null,m.removeEventListener("mousemove",he),m.removeEventListener("mouseup",W),m.removeEventListener("touchmove",he),m.removeEventListener("touchend",W)}m.addEventListener("mousemove",he),m.addEventListener("mouseup",W),m.addEventListener("touchmove",he),m.addEventListener("touchend",W)}const cg=()=>!0,iC=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),oC=(e,t,n)=>i=>{const{connectionStartHandle:a,connectionEndHandle:u,connectionClickStartHandle:c}=i;return{connecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===n||(u==null?void 0:u.nodeId)===e&&(u==null?void 0:u.handleId)===t&&(u==null?void 0:u.type)===n,clickConnecting:(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.handleId)===t&&(c==null?void 0:c.type)===n}},xv=k.forwardRef(({type:e="source",position:t=Ue.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:a=!0,isConnectableEnd:u=!0,id:c,onConnect:f,children:h,className:p,onMouseDown:m,onTouchStart:y,...x},b)=>{var oe,X;const N=c||null,E=e==="target",C=gn(),M=XI(),{connectOnClick:z,noPanClassName:ee}=$t(iC,qn),{connecting:B,clickConnecting:le}=$t(oC(M,N,e),qn);M||(X=(oe=C.getState()).onError)==null||X.call(oe,"010",Ti.error010());const ce=Y=>{const{defaultEdgeOptions:ue,onConnect:ge,hasDefaultEdges:R}=C.getState(),re={...ue,...Y};if(R){const{edges:Q,setEdges:ye}=C.getState();ye(JI(re,Q))}ge==null||ge(re),f==null||f(re)},U=Y=>{if(!M)return;const ue=uv(Y);a&&(ue&&Y.button===0||!ue)&&wv({event:Y,handleId:N,nodeId:M,onConnect:ce,isTarget:E,getState:C.getState,setState:C.setState,isValidConnection:n||C.getState().isValidConnection||cg}),ue?m==null||m(Y):y==null||y(Y)},J=Y=>{const{onClickConnectStart:ue,onClickConnectEnd:ge,connectionClickStartHandle:R,connectionMode:re,isValidConnection:Q}=C.getState();if(!M||!R&&!a)return;if(!R){ue==null||ue(Y,{nodeId:M,handleId:N,handleType:e}),C.setState({connectionClickStartHandle:{nodeId:M,type:e,handleId:N}});return}const ye=iv(Y.target),he=n||Q||cg,{connection:W,isValid:ae}=yv({nodeId:M,id:N,type:e},re,R.nodeId,R.handleId||null,R.type,he,ye);ae&&ce(W),ge==null||ge(Y),C.setState({connectionClickStartHandle:null})};return ie.createElement("div",{"data-handleid":N,"data-nodeid":M,"data-handlepos":t,"data-id":`${M}-${N}-${e}`,className:Tn(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",ee,p,{source:!E,target:E,connectable:i,connectablestart:a,connectableend:u,connecting:le,connectionindicator:i&&(a&&!B||u&&B)}]),onMouseDown:U,onTouchStart:U,onClick:z?J:void 0,ref:b,...x},h)});xv.displayName="Handle";var Qi=k.memo(xv);const bv=({data:e,isConnectable:t,targetPosition:n=Ue.Top,sourcePosition:i=Ue.Bottom})=>ie.createElement(ie.Fragment,null,ie.createElement(Qi,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,ie.createElement(Qi,{type:"source",position:i,isConnectable:t}));bv.displayName="DefaultNode";var yd=k.memo(bv);const _v=({data:e,isConnectable:t,sourcePosition:n=Ue.Bottom})=>ie.createElement(ie.Fragment,null,e==null?void 0:e.label,ie.createElement(Qi,{type:"source",position:n,isConnectable:t}));_v.displayName="InputNode";var Ev=k.memo(_v);const Sv=({data:e,isConnectable:t,targetPosition:n=Ue.Top})=>ie.createElement(ie.Fragment,null,ie.createElement(Qi,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);Sv.displayName="OutputNode";var Tv=k.memo(Sv);const gh=()=>null;gh.displayName="GroupNode";const aC=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),hc=e=>e.id;function sC(e,t){return qn(e.selectedNodes.map(hc),t.selectedNodes.map(hc))&&qn(e.selectedEdges.map(hc),t.selectedEdges.map(hc))}const Nv=k.memo(({onSelectionChange:e})=>{const t=gn(),{selectedNodes:n,selectedEdges:i}=$t(aC,sC);return k.useEffect(()=>{const a={nodes:n,edges:i};e==null||e(a),t.getState().onSelectionChange.forEach(u=>u(a))},[n,i,e]),null});Nv.displayName="SelectionListener";const uC=e=>!!e.onSelectionChange;function cC({onSelectionChange:e}){const t=$t(uC);return e||t?ie.createElement(Nv,{onSelectionChange:e}):null}const lC=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Ia(e,t){k.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function mt(e,t,n){k.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const fC=({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:a,onConnectStart:u,onConnectEnd:c,onClickConnectStart:f,onClickConnectEnd:h,nodesDraggable:p,nodesConnectable:m,nodesFocusable:y,edgesFocusable:x,edgesUpdatable:b,elevateNodesOnSelect:N,minZoom:E,maxZoom:C,nodeExtent:M,onNodesChange:z,onEdgesChange:ee,elementsSelectable:B,connectionMode:le,snapGrid:ce,snapToGrid:U,translateExtent:J,connectOnClick:oe,defaultEdgeOptions:X,fitView:Y,fitViewOptions:ue,onNodesDelete:ge,onEdgesDelete:R,onNodeDrag:re,onNodeDragStart:Q,onNodeDragStop:ye,onSelectionDrag:he,onSelectionDragStart:W,onSelectionDragStop:ae,noPanClassName:fe,nodeOrigin:we,rfId:ke,autoPanOnConnect:Me,autoPanOnNodeDrag:Re,onError:Be,connectionRadius:Ve,isValidConnection:qe,nodeDragThreshold:Ee})=>{const{setNodes:nt,setEdges:xt,setDefaultNodesAndEdges:Ke,setMinZoom:Tt,setMaxZoom:Xe,setTranslateExtent:rt,setNodeExtent:Nt,reset:Je}=$t(lC,qn),He=gn();return k.useEffect(()=>{const jt=i==null?void 0:i.map(Bt=>({...Bt,...X}));return Ke(n,jt),()=>{Je()}},[]),mt("defaultEdgeOptions",X,He.setState),mt("connectionMode",le,He.setState),mt("onConnect",a,He.setState),mt("onConnectStart",u,He.setState),mt("onConnectEnd",c,He.setState),mt("onClickConnectStart",f,He.setState),mt("onClickConnectEnd",h,He.setState),mt("nodesDraggable",p,He.setState),mt("nodesConnectable",m,He.setState),mt("nodesFocusable",y,He.setState),mt("edgesFocusable",x,He.setState),mt("edgesUpdatable",b,He.setState),mt("elementsSelectable",B,He.setState),mt("elevateNodesOnSelect",N,He.setState),mt("snapToGrid",U,He.setState),mt("snapGrid",ce,He.setState),mt("onNodesChange",z,He.setState),mt("onEdgesChange",ee,He.setState),mt("connectOnClick",oe,He.setState),mt("fitViewOnInit",Y,He.setState),mt("fitViewOnInitOptions",ue,He.setState),mt("onNodesDelete",ge,He.setState),mt("onEdgesDelete",R,He.setState),mt("onNodeDrag",re,He.setState),mt("onNodeDragStart",Q,He.setState),mt("onNodeDragStop",ye,He.setState),mt("onSelectionDrag",he,He.setState),mt("onSelectionDragStart",W,He.setState),mt("onSelectionDragStop",ae,He.setState),mt("noPanClassName",fe,He.setState),mt("nodeOrigin",we,He.setState),mt("rfId",ke,He.setState),mt("autoPanOnConnect",Me,He.setState),mt("autoPanOnNodeDrag",Re,He.setState),mt("onError",Be,He.setState),mt("connectionRadius",Ve,He.setState),mt("isValidConnection",qe,He.setState),mt("nodeDragThreshold",Ee,He.setState),Ia(e,nt),Ia(t,xt),Ia(E,Tt),Ia(C,Xe),Ia(J,rt),Ia(M,Nt),null},lg={display:"none"},dC={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},kv="react-flow__node-desc",Iv="react-flow__edge-desc",hC="react-flow__aria-live",pC=e=>e.ariaLiveMessage;function mC({rfId:e}){const t=$t(pC);return ie.createElement("div",{id:`${hC}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:dC},t)}function gC({rfId:e,disableKeyboardA11y:t}){return ie.createElement(ie.Fragment,null,ie.createElement("div",{id:`${kv}-${e}`,style:lg},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),ie.createElement("div",{id:`${Iv}-${e}`,style:lg},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&ie.createElement(mC,{rfId:e}))}var nu=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,i]=k.useState(!1),a=k.useRef(!1),u=k.useRef(new Set([])),[c,f]=k.useMemo(()=>{if(e!==null){const p=(Array.isArray(e)?e:[e]).filter(y=>typeof y=="string").map(y=>y.split("+")),m=p.reduce((y,x)=>y.concat(...x),[]);return[p,m]}return[[],[]]},[e]);return k.useEffect(()=>{const h=typeof document<"u"?document:null,p=(t==null?void 0:t.target)||h;if(e!==null){const m=b=>{if(a.current=b.ctrlKey||b.metaKey||b.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&pd(b))return!1;const E=dg(b.code,f);u.current.add(b[E]),fg(c,u.current,!1)&&(b.preventDefault(),i(!0))},y=b=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&pd(b))return!1;const E=dg(b.code,f);fg(c,u.current,!0)?(i(!1),u.current.clear()):u.current.delete(b[E]),b.key==="Meta"&&u.current.clear(),a.current=!1},x=()=>{u.current.clear(),i(!1)};return p==null||p.addEventListener("keydown",m),p==null||p.addEventListener("keyup",y),window.addEventListener("blur",x),()=>{p==null||p.removeEventListener("keydown",m),p==null||p.removeEventListener("keyup",y),window.removeEventListener("blur",x)}}},[e,i]),n};function fg(e,t,n){return e.filter(i=>n||i.length===t.size).some(i=>i.every(a=>t.has(a)))}function dg(e,t){return t.includes(e)?"code":"key"}function Cv(e,t,n,i){var f,h;const a=e.parentNode||e.parentId;if(!a)return n;const u=t.get(a),c=Yo(u,i);return Cv(u,t,{x:(n.x??0)+c.x,y:(n.y??0)+c.y,z:(((f=u[tn])==null?void 0:f.z)??0)>(n.z??0)?((h=u[tn])==null?void 0:h.z)??0:n.z??0},i)}function Ov(e,t,n){e.forEach(i=>{var u;const a=i.parentNode||i.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||n!=null&&n[i.id]){const{x:c,y:f,z:h}=Cv(i,e,{...i.position,z:((u=i[tn])==null?void 0:u.z)??0},t);i.positionAbsolute={x:c,y:f},i[tn].z=h,n!=null&&n[i.id]&&(i[tn].isParent=!0)}})}function Mf(e,t,n,i){const a=new Map,u={},c=i?1e3:0;return e.forEach(f=>{var b;const h=(br(f.zIndex)?f.zIndex:0)+(f.selected?c:0),p=t.get(f.id),m={...f,positionAbsolute:{x:f.position.x,y:f.position.y}},y=f.parentNode||f.parentId;y&&(u[y]=!0);const x=(p==null?void 0:p.type)&&(p==null?void 0:p.type)!==f.type;Object.defineProperty(m,tn,{enumerable:!1,value:{handleBounds:x||(b=p==null?void 0:p[tn])==null?void 0:b.handleBounds,z:h}}),a.set(f.id,m)}),Ov(a,n,u),a}function Av(e,t={}){const{getNodes:n,width:i,height:a,minZoom:u,maxZoom:c,d3Zoom:f,d3Selection:h,fitViewOnInitDone:p,fitViewOnInit:m,nodeOrigin:y}=e(),x=t.initial&&!p&&m;if(f&&h&&(x||!t.initial)){const N=n().filter(C=>{var z;const M=t.includeHiddenNodes?C.width&&C.height:!C.hidden;return(z=t.nodes)!=null&&z.length?M&&t.nodes.some(ee=>ee.id===C.id):M}),E=N.every(C=>C.width&&C.height);if(N.length>0&&E){const C=nl(N,y),{x:M,y:z,zoom:ee}=gv(C,i,a,t.minZoom??u,t.maxZoom??c,t.padding??.1),B=_i.translate(M,z).scale(ee);return typeof t.duration=="number"&&t.duration>0?f.transform(Lo(h,t.duration),B):f.transform(h,B),!0}}return!1}function vC(e,t){return e.forEach(n=>{const i=t.get(n.id);i&&t.set(i.id,{...i,[tn]:i[tn],selected:n.selected})}),new Map(t)}function yC(e,t){return t.map(n=>{const i=e.find(a=>a.id===n.id);return i&&(n.selected=i.selected),n})}function pc({changedNodes:e,changedEdges:t,get:n,set:i}){const{nodeInternals:a,edges:u,onNodesChange:c,onEdgesChange:f,hasDefaultNodes:h,hasDefaultEdges:p}=n();e!=null&&e.length&&(h&&i({nodeInternals:vC(e,a)}),c==null||c(e)),t!=null&&t.length&&(p&&i({edges:yC(t,u)}),f==null||f(t))}const Ca=()=>{},wC={zoomIn:Ca,zoomOut:Ca,zoomTo:Ca,getZoom:()=>1,setViewport:Ca,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Ca,fitBounds:Ca,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},xC=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),bC=()=>{const e=gn(),{d3Zoom:t,d3Selection:n}=$t(xC,qn);return k.useMemo(()=>n&&t?{zoomIn:a=>t.scaleBy(Lo(n,a==null?void 0:a.duration),1.2),zoomOut:a=>t.scaleBy(Lo(n,a==null?void 0:a.duration),1/1.2),zoomTo:(a,u)=>t.scaleTo(Lo(n,u==null?void 0:u.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,u)=>{const[c,f,h]=e.getState().transform,p=_i.translate(a.x??c,a.y??f).scale(a.zoom??h);t.transform(Lo(n,u==null?void 0:u.duration),p)},getViewport:()=>{const[a,u,c]=e.getState().transform;return{x:a,y:u,zoom:c}},fitView:a=>Av(e.getState,a),setCenter:(a,u,c)=>{const{width:f,height:h,maxZoom:p}=e.getState(),m=typeof(c==null?void 0:c.zoom)<"u"?c.zoom:p,y=f/2-a*m,x=h/2-u*m,b=_i.translate(y,x).scale(m);t.transform(Lo(n,c==null?void 0:c.duration),b)},fitBounds:(a,u)=>{const{width:c,height:f,minZoom:h,maxZoom:p}=e.getState(),{x:m,y,zoom:x}=gv(a,c,f,h,p,(u==null?void 0:u.padding)??.1),b=_i.translate(m,y).scale(x);t.transform(Lo(n,u==null?void 0:u.duration),b)},project:a=>{const{transform:u,snapToGrid:c,snapGrid:f}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),vd(a,u,c,f)},screenToFlowPosition:a=>{const{transform:u,snapToGrid:c,snapGrid:f,domNode:h}=e.getState();if(!h)return a;const{x:p,y:m}=h.getBoundingClientRect(),y={x:a.x-p,y:a.y-m};return vd(y,u,c,f)},flowToScreenPosition:a=>{const{transform:u,domNode:c}=e.getState();if(!c)return a;const{x:f,y:h}=c.getBoundingClientRect(),p=hv(a,u);return{x:p.x+f,y:p.y+h}},viewportInitialized:!0}:wC,[t,n])};function vh(){const e=bC(),t=gn(),n=k.useCallback(()=>t.getState().getNodes().map(E=>({...E})),[]),i=k.useCallback(E=>t.getState().nodeInternals.get(E),[]),a=k.useCallback(()=>{const{edges:E=[]}=t.getState();return E.map(C=>({...C}))},[]),u=k.useCallback(E=>{const{edges:C=[]}=t.getState();return C.find(M=>M.id===E)},[]),c=k.useCallback(E=>{const{getNodes:C,setNodes:M,hasDefaultNodes:z,onNodesChange:ee}=t.getState(),B=C(),le=typeof E=="function"?E(B):E;if(z)M(le);else if(ee){const ce=le.length===0?B.map(U=>({type:"remove",id:U.id})):le.map(U=>({item:U,type:"reset"}));ee(ce)}},[]),f=k.useCallback(E=>{const{edges:C=[],setEdges:M,hasDefaultEdges:z,onEdgesChange:ee}=t.getState(),B=typeof E=="function"?E(C):E;if(z)M(B);else if(ee){const le=B.length===0?C.map(ce=>({type:"remove",id:ce.id})):B.map(ce=>({item:ce,type:"reset"}));ee(le)}},[]),h=k.useCallback(E=>{const C=Array.isArray(E)?E:[E],{getNodes:M,setNodes:z,hasDefaultNodes:ee,onNodesChange:B}=t.getState();if(ee){const ce=[...M(),...C];z(ce)}else if(B){const le=C.map(ce=>({item:ce,type:"add"}));B(le)}},[]),p=k.useCallback(E=>{const C=Array.isArray(E)?E:[E],{edges:M=[],setEdges:z,hasDefaultEdges:ee,onEdgesChange:B}=t.getState();if(ee)z([...M,...C]);else if(B){const le=C.map(ce=>({item:ce,type:"add"}));B(le)}},[]),m=k.useCallback(()=>{const{getNodes:E,edges:C=[],transform:M}=t.getState(),[z,ee,B]=M;return{nodes:E().map(le=>({...le})),edges:C.map(le=>({...le})),viewport:{x:z,y:ee,zoom:B}}},[]),y=k.useCallback(({nodes:E,edges:C})=>{const{nodeInternals:M,getNodes:z,edges:ee,hasDefaultNodes:B,hasDefaultEdges:le,onNodesDelete:ce,onEdgesDelete:U,onNodesChange:J,onEdgesChange:oe}=t.getState(),X=(E||[]).map(re=>re.id),Y=(C||[]).map(re=>re.id),ue=z().reduce((re,Q)=>{const ye=Q.parentNode||Q.parentId,he=!X.includes(Q.id)&&ye&&re.find(ae=>ae.id===ye);return(typeof Q.deletable=="boolean"?Q.deletable:!0)&&(X.includes(Q.id)||he)&&re.push(Q),re},[]),ge=ee.filter(re=>typeof re.deletable=="boolean"?re.deletable:!0),R=ge.filter(re=>Y.includes(re.id));if(ue||R){const re=mv(ue,ge),Q=[...R,...re],ye=Q.reduce((he,W)=>(he.includes(W.id)||he.push(W.id),he),[]);if((le||B)&&(le&&t.setState({edges:ee.filter(he=>!ye.includes(he.id))}),B&&(ue.forEach(he=>{M.delete(he.id)}),t.setState({nodeInternals:new Map(M)}))),ye.length>0&&(U==null||U(Q),oe&&oe(ye.map(he=>({id:he,type:"remove"})))),ue.length>0&&(ce==null||ce(ue),J)){const he=ue.map(W=>({id:W.id,type:"remove"}));J(he)}}},[]),x=k.useCallback(E=>{const C=BI(E),M=C?null:t.getState().nodeInternals.get(E.id);return!C&&!M?[null,null,C]:[C?E:rg(M),M,C]},[]),b=k.useCallback((E,C=!0,M)=>{const[z,ee,B]=x(E);return z?(M||t.getState().getNodes()).filter(le=>{if(!B&&(le.id===ee.id||!le.positionAbsolute))return!1;const ce=rg(le),U=hd(ce,z);return C&&U>0||U>=z.width*z.height}):[]},[]),N=k.useCallback((E,C,M=!0)=>{const[z]=x(E);if(!z)return!1;const ee=hd(z,C);return M&&ee>0||ee>=z.width*z.height},[]);return k.useMemo(()=>({...e,getNodes:n,getNode:i,getEdges:a,getEdge:u,setNodes:c,setEdges:f,addNodes:h,addEdges:p,toObject:m,deleteElements:y,getIntersectingNodes:b,isNodeIntersecting:N}),[e,n,i,a,u,c,f,h,p,m,y,b,N])}const _C={actInsideInputWithModifier:!1};var EC=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=gn(),{deleteElements:i}=vh(),a=nu(e,_C),u=nu(t);k.useEffect(()=>{if(a){const{edges:c,getNodes:f}=n.getState(),h=f().filter(m=>m.selected),p=c.filter(m=>m.selected);i({nodes:h,edges:p}),n.setState({nodesSelectionActive:!1})}},[a]),k.useEffect(()=>{n.setState({multiSelectionActive:u})},[u])};function SC(e){const t=gn();k.useEffect(()=>{let n;const i=()=>{var u,c;if(!e.current)return;const a=ch(e.current);(a.height===0||a.width===0)&&((c=(u=t.getState()).onError)==null||c.call(u,"004",Ti.error004())),t.setState({width:a.width||500,height:a.height||500})};return i(),window.addEventListener("resize",i),e.current&&(n=new ResizeObserver(()=>i()),n.observe(e.current)),()=>{window.removeEventListener("resize",i),n&&e.current&&n.unobserve(e.current)}},[])}const yh={position:"absolute",width:"100%",height:"100%",top:0,left:0},TC=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,mc=e=>({x:e.x,y:e.y,zoom:e.k}),Oa=(e,t)=>e.target.closest(`.${t}`),hg=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),pg=e=>{const t=e.ctrlKey&&Rc()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},NC=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),kC=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:i,zoomOnScroll:a=!0,zoomOnPinch:u=!0,panOnScroll:c=!1,panOnScrollSpeed:f=.5,panOnScrollMode:h=Ho.Free,zoomOnDoubleClick:p=!0,elementsSelectable:m,panOnDrag:y=!0,defaultViewport:x,translateExtent:b,minZoom:N,maxZoom:E,zoomActivationKeyCode:C,preventScrolling:M=!0,children:z,noWheelClassName:ee,noPanClassName:B})=>{const le=k.useRef(),ce=gn(),U=k.useRef(!1),J=k.useRef(!1),oe=k.useRef(null),X=k.useRef({x:0,y:0,zoom:0}),{d3Zoom:Y,d3Selection:ue,d3ZoomHandler:ge,userSelectionActive:R}=$t(NC,qn),re=nu(C),Q=k.useRef(0),ye=k.useRef(!1),he=k.useRef();return SC(oe),k.useEffect(()=>{if(oe.current){const W=oe.current.getBoundingClientRect(),ae=tv().scaleExtent([N,E]).translateExtent(b),fe=wr(oe.current).call(ae),we=_i.translate(x.x,x.y).scale(Ua(x.zoom,N,E)),ke=[[0,0],[W.width,W.height]],Me=ae.constrain()(we,ke,b);ae.transform(fe,Me),ae.wheelDelta(pg),ce.setState({d3Zoom:ae,d3Selection:fe,d3ZoomHandler:fe.on("wheel.zoom"),transform:[Me.x,Me.y,Me.k],domNode:oe.current.closest(".react-flow")})}},[]),k.useEffect(()=>{ue&&Y&&(c&&!re&&!R?ue.on("wheel.zoom",W=>{if(Oa(W,ee))return!1;W.preventDefault(),W.stopImmediatePropagation();const ae=ue.property("__zoom").k||1;if(W.ctrlKey&&u){const qe=Mr(W),Ee=pg(W),nt=ae*Math.pow(2,Ee);Y.scaleTo(ue,nt,qe,W);return}const fe=W.deltaMode===1?20:1;let we=h===Ho.Vertical?0:W.deltaX*fe,ke=h===Ho.Horizontal?0:W.deltaY*fe;!Rc()&&W.shiftKey&&h!==Ho.Vertical&&(we=W.deltaY*fe,ke=0),Y.translateBy(ue,-(we/ae)*f,-(ke/ae)*f,{internal:!0});const Me=mc(ue.property("__zoom")),{onViewportChangeStart:Re,onViewportChange:Be,onViewportChangeEnd:Ve}=ce.getState();clearTimeout(he.current),ye.current||(ye.current=!0,t==null||t(W,Me),Re==null||Re(Me)),ye.current&&(e==null||e(W,Me),Be==null||Be(Me),he.current=setTimeout(()=>{n==null||n(W,Me),Ve==null||Ve(Me),ye.current=!1},150))},{passive:!1}):typeof ge<"u"&&ue.on("wheel.zoom",function(W,ae){if(!M&&W.type==="wheel"&&!W.ctrlKey||Oa(W,ee))return null;W.preventDefault(),ge.call(this,W,ae)},{passive:!1}))},[R,c,h,ue,Y,ge,re,u,M,ee,t,e,n]),k.useEffect(()=>{Y&&Y.on("start",W=>{var we,ke;if(!W.sourceEvent||W.sourceEvent.internal)return null;Q.current=(we=W.sourceEvent)==null?void 0:we.button;const{onViewportChangeStart:ae}=ce.getState(),fe=mc(W.transform);U.current=!0,X.current=fe,((ke=W.sourceEvent)==null?void 0:ke.type)==="mousedown"&&ce.setState({paneDragging:!0}),ae==null||ae(fe),t==null||t(W.sourceEvent,fe)})},[Y,t]),k.useEffect(()=>{Y&&(R&&!U.current?Y.on("zoom",null):R||Y.on("zoom",W=>{var fe;const{onViewportChange:ae}=ce.getState();if(ce.setState({transform:[W.transform.x,W.transform.y,W.transform.k]}),J.current=!!(i&&hg(y,Q.current??0)),(e||ae)&&!((fe=W.sourceEvent)!=null&&fe.internal)){const we=mc(W.transform);ae==null||ae(we),e==null||e(W.sourceEvent,we)}}))},[R,Y,e,y,i]),k.useEffect(()=>{Y&&Y.on("end",W=>{if(!W.sourceEvent||W.sourceEvent.internal)return null;const{onViewportChangeEnd:ae}=ce.getState();if(U.current=!1,ce.setState({paneDragging:!1}),i&&hg(y,Q.current??0)&&!J.current&&i(W.sourceEvent),J.current=!1,(n||ae)&&TC(X.current,W.transform)){const fe=mc(W.transform);X.current=fe,clearTimeout(le.current),le.current=setTimeout(()=>{ae==null||ae(fe),n==null||n(W.sourceEvent,fe)},c?150:0)}})},[Y,c,y,n,i]),k.useEffect(()=>{Y&&Y.filter(W=>{const ae=re||a,fe=u&&W.ctrlKey;if((y===!0||Array.isArray(y)&&y.includes(1))&&W.button===1&&W.type==="mousedown"&&(Oa(W,"react-flow__node")||Oa(W,"react-flow__edge")))return!0;if(!y&&!ae&&!c&&!p&&!u||R||!p&&W.type==="dblclick"||Oa(W,ee)&&W.type==="wheel"||Oa(W,B)&&(W.type!=="wheel"||c&&W.type==="wheel"&&!re)||!u&&W.ctrlKey&&W.type==="wheel"||!ae&&!c&&!fe&&W.type==="wheel"||!y&&(W.type==="mousedown"||W.type==="touchstart")||Array.isArray(y)&&!y.includes(W.button)&&W.type==="mousedown")return!1;const we=Array.isArray(y)&&y.includes(W.button)||!W.button||W.button<=1;return(!W.ctrlKey||W.type==="wheel")&&we})},[R,Y,a,u,c,p,y,m,re]),ie.createElement("div",{className:"react-flow__renderer",ref:oe,style:yh},z)},IC=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function CC(){const{userSelectionActive:e,userSelectionRect:t}=$t(IC,qn);return e&&t?ie.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function mg(e,t){const n=t.parentNode||t.parentId,i=e.find(a=>a.id===n);if(i){const a=t.position.x+t.width-i.width,u=t.position.y+t.height-i.height;if(a>0||u>0||t.position.x<0||t.position.y<0){if(i.style={...i.style},i.style.width=i.style.width??i.width,i.style.height=i.style.height??i.height,a>0&&(i.style.width+=a),u>0&&(i.style.height+=u),t.position.x<0){const c=Math.abs(t.position.x);i.position.x=i.position.x-c,i.style.width+=c,t.position.x=0}if(t.position.y<0){const c=Math.abs(t.position.y);i.position.y=i.position.y-c,i.style.height+=c,t.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function OC(e,t){if(e.some(i=>i.type==="reset"))return e.filter(i=>i.type==="reset").map(i=>i.item);const n=e.filter(i=>i.type==="add").map(i=>i.item);return t.reduce((i,a)=>{const u=e.filter(f=>f.id===a.id);if(u.length===0)return i.push(a),i;const c={...a};for(const f of u)if(f)switch(f.type){case"select":{c.selected=f.selected;break}case"position":{typeof f.position<"u"&&(c.position=f.position),typeof f.positionAbsolute<"u"&&(c.positionAbsolute=f.positionAbsolute),typeof f.dragging<"u"&&(c.dragging=f.dragging),c.expandParent&&mg(i,c);break}case"dimensions":{typeof f.dimensions<"u"&&(c.width=f.dimensions.width,c.height=f.dimensions.height),typeof f.updateStyle<"u"&&(c.style={...c.style||{},...f.dimensions}),typeof f.resizing=="boolean"&&(c.resizing=f.resizing),c.expandParent&&mg(i,c);break}case"remove":return i}return i.push(c),i},n)}function AC(e,t){return OC(e,t)}const Xi=(e,t)=>({id:e,type:"select",selected:t});function Pa(e,t){return e.reduce((n,i)=>{const a=t.includes(i.id);return!i.selected&&a?(i.selected=!0,n.push(Xi(i.id,!0))):i.selected&&!a&&(i.selected=!1,n.push(Xi(i.id,!1))),n},[])}const Lf=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},DC=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Dv=k.memo(({isSelecting:e,selectionMode:t=tu.Full,panOnDrag:n,onSelectionStart:i,onSelectionEnd:a,onPaneClick:u,onPaneContextMenu:c,onPaneScroll:f,onPaneMouseEnter:h,onPaneMouseMove:p,onPaneMouseLeave:m,children:y})=>{const x=k.useRef(null),b=gn(),N=k.useRef(0),E=k.useRef(0),C=k.useRef(),{userSelectionActive:M,elementsSelectable:z,dragging:ee}=$t(DC,qn),B=()=>{b.setState({userSelectionActive:!1,userSelectionRect:null}),N.current=0,E.current=0},le=ge=>{u==null||u(ge),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1})},ce=ge=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){ge.preventDefault();return}c==null||c(ge)},U=f?ge=>f(ge):void 0,J=ge=>{const{resetSelectedElements:R,domNode:re}=b.getState();if(C.current=re==null?void 0:re.getBoundingClientRect(),!z||!e||ge.button!==0||ge.target!==x.current||!C.current)return;const{x:Q,y:ye}=eo(ge,C.current);R(),b.setState({userSelectionRect:{width:0,height:0,startX:Q,startY:ye,x:Q,y:ye}}),i==null||i(ge)},oe=ge=>{const{userSelectionRect:R,nodeInternals:re,edges:Q,transform:ye,onNodesChange:he,onEdgesChange:W,nodeOrigin:ae,getNodes:fe}=b.getState();if(!e||!C.current||!R)return;b.setState({userSelectionActive:!0,nodesSelectionActive:!1});const we=eo(ge,C.current),ke=R.startX??0,Me=R.startY??0,Re={...R,x:we.x<ke?we.x:ke,y:we.y<Me?we.y:Me,width:Math.abs(we.x-ke),height:Math.abs(we.y-Me)},Be=fe(),Ve=pv(re,Re,ye,t===tu.Partial,!0,ae),qe=mv(Ve,Q).map(nt=>nt.id),Ee=Ve.map(nt=>nt.id);if(N.current!==Ee.length){N.current=Ee.length;const nt=Pa(Be,Ee);nt.length&&(he==null||he(nt))}if(E.current!==qe.length){E.current=qe.length;const nt=Pa(Q,qe);nt.length&&(W==null||W(nt))}b.setState({userSelectionRect:Re})},X=ge=>{if(ge.button!==0)return;const{userSelectionRect:R}=b.getState();!M&&R&&ge.target===x.current&&(le==null||le(ge)),b.setState({nodesSelectionActive:N.current>0}),B(),a==null||a(ge)},Y=ge=>{M&&(b.setState({nodesSelectionActive:N.current>0}),a==null||a(ge)),B()},ue=z&&(e||M);return ie.createElement("div",{className:Tn(["react-flow__pane",{dragging:ee,selection:e}]),onClick:ue?void 0:Lf(le,x),onContextMenu:Lf(ce,x),onWheel:Lf(U,x),onMouseEnter:ue?void 0:h,onMouseDown:ue?J:void 0,onMouseMove:ue?oe:p,onMouseUp:ue?X:void 0,onMouseLeave:ue?Y:m,ref:x,style:yh},y,ie.createElement(CC,null))});Dv.displayName="Pane";function Pv(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const i=t.get(n);return i?i.selected?!0:Pv(i,t):!1}function gg(e,t,n){let i=e;do{if(i!=null&&i.matches(t))return!0;if(i===n.current)return!1;i=i.parentElement}while(i);return!1}function PC(e,t,n,i){return Array.from(e.values()).filter(a=>(a.selected||a.id===i)&&(!a.parentNode||a.parentId||!Pv(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var u,c;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((u=a.positionAbsolute)==null?void 0:u.x)??0),y:n.y-(((c=a.positionAbsolute)==null?void 0:c.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function RC(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Rv(e,t,n,i,a=[0,0],u){const c=RC(e,e.extent||i);let f=c;const h=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(h&&e.width&&e.height){const y=n.get(h),{x,y:b}=Yo(y,a).positionAbsolute;f=y&&br(x)&&br(b)&&br(y.width)&&br(y.height)?[[x+e.width*a[0],b+e.height*a[1]],[x+y.width-e.width+e.width*a[0],b+y.height-e.height+e.height*a[1]]]:f}else u==null||u("005",Ti.error005()),f=c;else if(e.extent&&h&&e.extent!=="parent"){const y=n.get(h),{x,y:b}=Yo(y,a).positionAbsolute;f=[[e.extent[0][0]+x,e.extent[0][1]+b],[e.extent[1][0]+x,e.extent[1][1]+b]]}let p={x:0,y:0};if(h){const y=n.get(h);p=Yo(y,a).positionAbsolute}const m=f&&f!=="parent"?lh(t,f):t;return{position:{x:m.x-p.x,y:m.y-p.y},positionAbsolute:m}}function $f({nodeId:e,dragItems:t,nodeInternals:n}){const i=t.map(a=>({...n.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?i.find(a=>a.id===e):i[0],i]}const vg=(e,t,n,i)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const u=Array.from(a),c=t.getBoundingClientRect(),f={x:c.width*i[0],y:c.height*i[1]};return u.map(h=>{const p=h.getBoundingClientRect();return{id:h.getAttribute("data-handleid"),position:h.getAttribute("data-handlepos"),x:(p.left-c.left-f.x)/n,y:(p.top-c.top-f.y)/n,...ch(h)}})};function Ds(e,t,n){return n===void 0?n:i=>{const a=t().nodeInternals.get(e);a&&n(i,{...a})}}function wd({id:e,store:t,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:a,unselectNodesAndEdges:u,multiSelectionActive:c,nodeInternals:f,onError:h}=t.getState(),p=f.get(e);if(!p){h==null||h("012",Ti.error012(e));return}t.setState({nodesSelectionActive:!1}),p.selected?(n||p.selected&&c)&&(u({nodes:[p],edges:[]}),requestAnimationFrame(()=>{var m;return(m=i==null?void 0:i.current)==null?void 0:m.blur()})):a([e])}function MC(){const e=gn();return k.useCallback(({sourceEvent:n})=>{const{transform:i,snapGrid:a,snapToGrid:u}=e.getState(),c=n.touches?n.touches[0].clientX:n.clientX,f=n.touches?n.touches[0].clientY:n.clientY,h={x:(c-i[0])/i[2],y:(f-i[1])/i[2]};return{xSnapped:u?a[0]*Math.round(h.x/a[0]):h.x,ySnapped:u?a[1]*Math.round(h.y/a[1]):h.y,...h}},[])}function Wf(e){return(t,n,i)=>e==null?void 0:e(t,i)}function Mv({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:i,nodeId:a,isSelectable:u,selectNodesOnDrag:c}){const f=gn(),[h,p]=k.useState(!1),m=k.useRef([]),y=k.useRef({x:null,y:null}),x=k.useRef(0),b=k.useRef(null),N=k.useRef({x:0,y:0}),E=k.useRef(null),C=k.useRef(!1),M=k.useRef(!1),z=k.useRef(!1),ee=MC();return k.useEffect(()=>{if(e!=null&&e.current){const B=wr(e.current),le=({x:J,y:oe})=>{const{nodeInternals:X,onNodeDrag:Y,onSelectionDrag:ue,updateNodePositions:ge,nodeExtent:R,snapGrid:re,snapToGrid:Q,nodeOrigin:ye,onError:he}=f.getState();y.current={x:J,y:oe};let W=!1,ae={x:0,y:0,x2:0,y2:0};if(m.current.length>1&&R){const we=nl(m.current,ye);ae=eu(we)}if(m.current=m.current.map(we=>{const ke={x:J-we.distance.x,y:oe-we.distance.y};Q&&(ke.x=re[0]*Math.round(ke.x/re[0]),ke.y=re[1]*Math.round(ke.y/re[1]));const Me=[[R[0][0],R[0][1]],[R[1][0],R[1][1]]];m.current.length>1&&R&&!we.extent&&(Me[0][0]=we.positionAbsolute.x-ae.x+R[0][0],Me[1][0]=we.positionAbsolute.x+(we.width??0)-ae.x2+R[1][0],Me[0][1]=we.positionAbsolute.y-ae.y+R[0][1],Me[1][1]=we.positionAbsolute.y+(we.height??0)-ae.y2+R[1][1]);const Re=Rv(we,ke,X,Me,ye,he);return W=W||we.position.x!==Re.position.x||we.position.y!==Re.position.y,we.position=Re.position,we.positionAbsolute=Re.positionAbsolute,we}),!W)return;ge(m.current,!0,!0),p(!0);const fe=a?Y:Wf(ue);if(fe&&E.current){const[we,ke]=$f({nodeId:a,dragItems:m.current,nodeInternals:X});fe(E.current,we,ke)}},ce=()=>{if(!b.current)return;const[J,oe]=rv(N.current,b.current);if(J!==0||oe!==0){const{transform:X,panBy:Y}=f.getState();y.current.x=(y.current.x??0)-J/X[2],y.current.y=(y.current.y??0)-oe/X[2],Y({x:J,y:oe})&&le(y.current)}x.current=requestAnimationFrame(ce)},U=J=>{var ye;const{nodeInternals:oe,multiSelectionActive:X,nodesDraggable:Y,unselectNodesAndEdges:ue,onNodeDragStart:ge,onSelectionDragStart:R}=f.getState();M.current=!0;const re=a?ge:Wf(R);(!c||!u)&&!X&&a&&((ye=oe.get(a))!=null&&ye.selected||ue()),a&&u&&c&&wd({id:a,store:f,nodeRef:e});const Q=ee(J);if(y.current=Q,m.current=PC(oe,Y,Q,a),re&&m.current){const[he,W]=$f({nodeId:a,dragItems:m.current,nodeInternals:oe});re(J.sourceEvent,he,W)}};if(t)B.on(".drag",null);else{const J=UN().on("start",oe=>{const{domNode:X,nodeDragThreshold:Y}=f.getState();Y===0&&U(oe),z.current=!1;const ue=ee(oe);y.current=ue,b.current=(X==null?void 0:X.getBoundingClientRect())||null,N.current=eo(oe.sourceEvent,b.current)}).on("drag",oe=>{var ge,R;const X=ee(oe),{autoPanOnNodeDrag:Y,nodeDragThreshold:ue}=f.getState();if(oe.sourceEvent.type==="touchmove"&&oe.sourceEvent.touches.length>1&&(z.current=!0),!z.current){if(!C.current&&M.current&&Y&&(C.current=!0,ce()),!M.current){const re=X.xSnapped-(((ge=y==null?void 0:y.current)==null?void 0:ge.x)??0),Q=X.ySnapped-(((R=y==null?void 0:y.current)==null?void 0:R.y)??0);Math.sqrt(re*re+Q*Q)>ue&&U(oe)}(y.current.x!==X.xSnapped||y.current.y!==X.ySnapped)&&m.current&&M.current&&(E.current=oe.sourceEvent,N.current=eo(oe.sourceEvent,b.current),le(X))}}).on("end",oe=>{if(!(!M.current||z.current)&&(p(!1),C.current=!1,M.current=!1,cancelAnimationFrame(x.current),m.current)){const{updateNodePositions:X,nodeInternals:Y,onNodeDragStop:ue,onSelectionDragStop:ge}=f.getState(),R=a?ue:Wf(ge);if(X(m.current,!1,!1),R){const[re,Q]=$f({nodeId:a,dragItems:m.current,nodeInternals:Y});R(oe.sourceEvent,re,Q)}}}).filter(oe=>{const X=oe.target;return!oe.button&&(!n||!gg(X,`.${n}`,e))&&(!i||gg(X,i,e))});return B.call(J),()=>{B.on(".drag",null)}}}},[e,t,n,i,u,f,a,c,ee]),h}function Lv(){const e=gn();return k.useCallback(n=>{const{nodeInternals:i,nodeExtent:a,updateNodePositions:u,getNodes:c,snapToGrid:f,snapGrid:h,onError:p,nodesDraggable:m}=e.getState(),y=c().filter(z=>z.selected&&(z.draggable||m&&typeof z.draggable>"u")),x=f?h[0]:5,b=f?h[1]:5,N=n.isShiftPressed?4:1,E=n.x*x*N,C=n.y*b*N,M=y.map(z=>{if(z.positionAbsolute){const ee={x:z.positionAbsolute.x+E,y:z.positionAbsolute.y+C};f&&(ee.x=h[0]*Math.round(ee.x/h[0]),ee.y=h[1]*Math.round(ee.y/h[1]));const{positionAbsolute:B,position:le}=Rv(z,ee,i,a,void 0,p);z.position=le,z.positionAbsolute=B}return z});u(M,!0,!1)},[])}const ja={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Ps=e=>{const t=({id:n,type:i,data:a,xPos:u,yPos:c,xPosOrigin:f,yPosOrigin:h,selected:p,onClick:m,onMouseEnter:y,onMouseMove:x,onMouseLeave:b,onContextMenu:N,onDoubleClick:E,style:C,className:M,isDraggable:z,isSelectable:ee,isConnectable:B,isFocusable:le,selectNodesOnDrag:ce,sourcePosition:U,targetPosition:J,hidden:oe,resizeObserver:X,dragHandle:Y,zIndex:ue,isParent:ge,noDragClassName:R,noPanClassName:re,initialized:Q,disableKeyboardA11y:ye,ariaLabel:he,rfId:W,hasHandleBounds:ae})=>{const fe=gn(),we=k.useRef(null),ke=k.useRef(null),Me=k.useRef(U),Re=k.useRef(J),Be=k.useRef(i),Ve=ee||z||m||y||x||b,qe=Lv(),Ee=Ds(n,fe.getState,y),nt=Ds(n,fe.getState,x),xt=Ds(n,fe.getState,b),Ke=Ds(n,fe.getState,N),Tt=Ds(n,fe.getState,E),Xe=Je=>{const{nodeDragThreshold:He}=fe.getState();if(ee&&(!ce||!z||He>0)&&wd({id:n,store:fe,nodeRef:we}),m){const jt=fe.getState().nodeInternals.get(n);jt&&m(Je,{...jt})}},rt=Je=>{if(!pd(Je)&&!ye)if(sv.includes(Je.key)&&ee){const He=Je.key==="Escape";wd({id:n,store:fe,unselect:He,nodeRef:we})}else z&&p&&Object.prototype.hasOwnProperty.call(ja,Je.key)&&(fe.setState({ariaLiveMessage:`Moved selected node ${Je.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~u}, y: ${~~c}`}),qe({x:ja[Je.key].x,y:ja[Je.key].y,isShiftPressed:Je.shiftKey}))};k.useEffect(()=>()=>{ke.current&&(X==null||X.unobserve(ke.current),ke.current=null)},[]),k.useEffect(()=>{if(we.current&&!oe){const Je=we.current;(!Q||!ae||ke.current!==Je)&&(ke.current&&(X==null||X.unobserve(ke.current)),X==null||X.observe(Je),ke.current=Je)}},[oe,Q,ae]),k.useEffect(()=>{const Je=Be.current!==i,He=Me.current!==U,jt=Re.current!==J;we.current&&(Je||He||jt)&&(Je&&(Be.current=i),He&&(Me.current=U),jt&&(Re.current=J),fe.getState().updateNodeDimensions([{id:n,nodeElement:we.current,forceUpdate:!0}]))},[n,i,U,J]);const Nt=Mv({nodeRef:we,disabled:oe||!z,noDragClassName:R,handleSelector:Y,nodeId:n,isSelectable:ee,selectNodesOnDrag:ce});return oe?null:ie.createElement("div",{className:Tn(["react-flow__node",`react-flow__node-${i}`,{[re]:z},M,{selected:p,selectable:ee,parent:ge,dragging:Nt}]),ref:we,style:{zIndex:ue,transform:`translate(${f}px,${h}px)`,pointerEvents:Ve?"all":"none",visibility:Q?"visible":"hidden",...C},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Ee,onMouseMove:nt,onMouseLeave:xt,onContextMenu:Ke,onClick:Xe,onDoubleClick:Tt,onKeyDown:le?rt:void 0,tabIndex:le?0:void 0,role:le?"button":void 0,"aria-describedby":ye?void 0:`${kv}-${W}`,"aria-label":he},ie.createElement(qI,{value:n},ie.createElement(e,{id:n,data:a,type:i,xPos:u,yPos:c,selected:p,isConnectable:B,sourcePosition:U,targetPosition:J,dragging:Nt,dragHandle:Y,zIndex:ue})))};return t.displayName="NodeWrapper",k.memo(t)};const LC=e=>{const t=e.getNodes().filter(n=>n.selected);return{...nl(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function $C({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const i=gn(),{width:a,height:u,x:c,y:f,transformString:h,userSelectionActive:p}=$t(LC,qn),m=Lv(),y=k.useRef(null);if(k.useEffect(()=>{var N;n||(N=y.current)==null||N.focus({preventScroll:!0})},[n]),Mv({nodeRef:y}),p||!a||!u)return null;const x=e?N=>{const E=i.getState().getNodes().filter(C=>C.selected);e(N,E)}:void 0,b=N=>{Object.prototype.hasOwnProperty.call(ja,N.key)&&m({x:ja[N.key].x,y:ja[N.key].y,isShiftPressed:N.shiftKey})};return ie.createElement("div",{className:Tn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:h}},ie.createElement("div",{ref:y,className:"react-flow__nodesselection-rect",onContextMenu:x,tabIndex:n?void 0:-1,onKeyDown:n?void 0:b,style:{width:a,height:u,top:f,left:c}}))}var WC=k.memo($C);const FC=e=>e.nodesSelectionActive,$v=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:u,onPaneScroll:c,deleteKeyCode:f,onMove:h,onMoveStart:p,onMoveEnd:m,selectionKeyCode:y,selectionOnDrag:x,selectionMode:b,onSelectionStart:N,onSelectionEnd:E,multiSelectionKeyCode:C,panActivationKeyCode:M,zoomActivationKeyCode:z,elementsSelectable:ee,zoomOnScroll:B,zoomOnPinch:le,panOnScroll:ce,panOnScrollSpeed:U,panOnScrollMode:J,zoomOnDoubleClick:oe,panOnDrag:X,defaultViewport:Y,translateExtent:ue,minZoom:ge,maxZoom:R,preventScrolling:re,onSelectionContextMenu:Q,noWheelClassName:ye,noPanClassName:he,disableKeyboardA11y:W})=>{const ae=$t(FC),fe=nu(y),we=nu(M),ke=we||X,Me=we||ce,Re=fe||x&&ke!==!0;return EC({deleteKeyCode:f,multiSelectionKeyCode:C}),ie.createElement(kC,{onMove:h,onMoveStart:p,onMoveEnd:m,onPaneContextMenu:u,elementsSelectable:ee,zoomOnScroll:B,zoomOnPinch:le,panOnScroll:Me,panOnScrollSpeed:U,panOnScrollMode:J,zoomOnDoubleClick:oe,panOnDrag:!fe&&ke,defaultViewport:Y,translateExtent:ue,minZoom:ge,maxZoom:R,zoomActivationKeyCode:z,preventScrolling:re,noWheelClassName:ye,noPanClassName:he},ie.createElement(Dv,{onSelectionStart:N,onSelectionEnd:E,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:u,onPaneScroll:c,panOnDrag:ke,isSelecting:!!Re,selectionMode:b},e,ae&&ie.createElement(WC,{onSelectionContextMenu:Q,noPanClassName:he,disableKeyboardA11y:W})))};$v.displayName="FlowRenderer";var jC=k.memo($v);function BC(e){return $t(k.useCallback(n=>e?pv(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function HC(e){const t={input:Ps(e.input||Ev),default:Ps(e.default||yd),output:Ps(e.output||Tv),group:Ps(e.group||gh)},n={},i=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,u)=>(a[u]=Ps(e[u]||yd),a),n);return{...t,...i}}const KC=({x:e,y:t,width:n,height:i,origin:a})=>!n||!i?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-n*a[0],y:t-i*a[1]},zC=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Wv=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:a,updateNodeDimensions:u,onError:c}=$t(zC,qn),f=BC(e.onlyRenderVisibleElements),h=k.useRef(),p=k.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const m=new ResizeObserver(y=>{const x=y.map(b=>({id:b.target.getAttribute("data-id"),nodeElement:b.target,forceUpdate:!0}));u(x)});return h.current=m,m},[]);return k.useEffect(()=>()=>{var m;(m=h==null?void 0:h.current)==null||m.disconnect()},[]),ie.createElement("div",{className:"react-flow__nodes",style:yh},f.map(m=>{var le,ce,U;let y=m.type||"default";e.nodeTypes[y]||(c==null||c("003",Ti.error003(y)),y="default");const x=e.nodeTypes[y]||e.nodeTypes.default,b=!!(m.draggable||t&&typeof m.draggable>"u"),N=!!(m.selectable||a&&typeof m.selectable>"u"),E=!!(m.connectable||n&&typeof m.connectable>"u"),C=!!(m.focusable||i&&typeof m.focusable>"u"),M=e.nodeExtent?lh(m.positionAbsolute,e.nodeExtent):m.positionAbsolute,z=(M==null?void 0:M.x)??0,ee=(M==null?void 0:M.y)??0,B=KC({x:z,y:ee,width:m.width??0,height:m.height??0,origin:e.nodeOrigin});return ie.createElement(x,{key:m.id,id:m.id,className:m.className,style:m.style,type:y,data:m.data,sourcePosition:m.sourcePosition||Ue.Bottom,targetPosition:m.targetPosition||Ue.Top,hidden:m.hidden,xPos:z,yPos:ee,xPosOrigin:B.x,yPosOrigin:B.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!m.selected,isDraggable:b,isSelectable:N,isConnectable:E,isFocusable:C,resizeObserver:p,dragHandle:m.dragHandle,zIndex:((le=m[tn])==null?void 0:le.z)??0,isParent:!!((ce=m[tn])!=null&&ce.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!m.width&&!!m.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:m.ariaLabel,hasHandleBounds:!!((U=m[tn])!=null&&U.handleBounds)})}))};Wv.displayName="NodeRenderer";var UC=k.memo(Wv);const YC=(e,t,n)=>n===Ue.Left?e-t:n===Ue.Right?e+t:e,VC=(e,t,n)=>n===Ue.Top?e-t:n===Ue.Bottom?e+t:e,yg="react-flow__edgeupdater",wg=({position:e,centerX:t,centerY:n,radius:i=10,onMouseDown:a,onMouseEnter:u,onMouseOut:c,type:f})=>ie.createElement("circle",{onMouseDown:a,onMouseEnter:u,onMouseOut:c,className:Tn([yg,`${yg}-${f}`]),cx:YC(t,i,e),cy:VC(n,i,e),r:i,stroke:"transparent",fill:"transparent"}),qC=()=>!0;var Aa=e=>{const t=({id:n,className:i,type:a,data:u,onClick:c,onEdgeDoubleClick:f,selected:h,animated:p,label:m,labelStyle:y,labelShowBg:x,labelBgStyle:b,labelBgPadding:N,labelBgBorderRadius:E,style:C,source:M,target:z,sourceX:ee,sourceY:B,targetX:le,targetY:ce,sourcePosition:U,targetPosition:J,elementsSelectable:oe,hidden:X,sourceHandleId:Y,targetHandleId:ue,onContextMenu:ge,onMouseEnter:R,onMouseMove:re,onMouseLeave:Q,reconnectRadius:ye,onReconnect:he,onReconnectStart:W,onReconnectEnd:ae,markerEnd:fe,markerStart:we,rfId:ke,ariaLabel:Me,isFocusable:Re,isReconnectable:Be,pathOptions:Ve,interactionWidth:qe,disableKeyboardA11y:Ee})=>{const nt=k.useRef(null),[xt,Ke]=k.useState(!1),[Tt,Xe]=k.useState(!1),rt=gn(),Nt=k.useMemo(()=>`url('#${gd(we,ke)}')`,[we,ke]),Je=k.useMemo(()=>`url('#${gd(fe,ke)}')`,[fe,ke]);if(X)return null;const He=_t=>{var Dt;const{edges:Ht,addSelectedEdges:qt,unselectNodesAndEdges:Wt,multiSelectionActive:Fe}=rt.getState(),Kt=Ht.find(pe=>pe.id===n);Kt&&(oe&&(rt.setState({nodesSelectionActive:!1}),Kt.selected&&Fe?(Wt({nodes:[],edges:[Kt]}),(Dt=nt.current)==null||Dt.blur()):qt([n])),c&&c(_t,Kt))},jt=As(n,rt.getState,f),Bt=As(n,rt.getState,ge),bt=As(n,rt.getState,R),un=As(n,rt.getState,re),Ut=As(n,rt.getState,Q),cn=(_t,Ht)=>{if(_t.button!==0)return;const{edges:qt,isValidConnection:Wt}=rt.getState(),Fe=Ht?z:M,Kt=(Ht?ue:Y)||null,Dt=Ht?"target":"source",pe=Wt||qC,ne=Ht,Oe=qt.find(Le=>Le.id===n);Xe(!0),W==null||W(_t,Oe,Dt);const Te=Le=>{Xe(!1),ae==null||ae(Le,Oe,Dt)};wv({event:_t,handleId:Kt,nodeId:Fe,onConnect:Le=>he==null?void 0:he(Oe,Le),isTarget:ne,getState:rt.getState,setState:rt.setState,isValidConnection:pe,edgeUpdaterType:Dt,onReconnectEnd:Te})},Jt=_t=>cn(_t,!0),Yt=_t=>cn(_t,!1),nn=()=>Ke(!0),Vt=()=>Ke(!1),ln=!oe&&!c,hn=_t=>{var Ht;if(!Ee&&sv.includes(_t.key)&&oe){const{unselectNodesAndEdges:qt,addSelectedEdges:Wt,edges:Fe}=rt.getState();_t.key==="Escape"?((Ht=nt.current)==null||Ht.blur(),qt({edges:[Fe.find(Dt=>Dt.id===n)]})):Wt([n])}};return ie.createElement("g",{className:Tn(["react-flow__edge",`react-flow__edge-${a}`,i,{selected:h,animated:p,inactive:ln,updating:xt}]),onClick:He,onDoubleClick:jt,onContextMenu:Bt,onMouseEnter:bt,onMouseMove:un,onMouseLeave:Ut,onKeyDown:Re?hn:void 0,tabIndex:Re?0:void 0,role:Re?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":Me===null?void 0:Me||`Edge from ${M} to ${z}`,"aria-describedby":Re?`${Iv}-${ke}`:void 0,ref:nt},!Tt&&ie.createElement(e,{id:n,source:M,target:z,selected:h,animated:p,label:m,labelStyle:y,labelShowBg:x,labelBgStyle:b,labelBgPadding:N,labelBgBorderRadius:E,data:u,style:C,sourceX:ee,sourceY:B,targetX:le,targetY:ce,sourcePosition:U,targetPosition:J,sourceHandleId:Y,targetHandleId:ue,markerStart:Nt,markerEnd:Je,pathOptions:Ve,interactionWidth:qe}),Be&&ie.createElement(ie.Fragment,null,(Be==="source"||Be===!0)&&ie.createElement(wg,{position:U,centerX:ee,centerY:B,radius:ye,onMouseDown:Jt,onMouseEnter:nn,onMouseOut:Vt,type:"source"}),(Be==="target"||Be===!0)&&ie.createElement(wg,{position:J,centerX:le,centerY:ce,radius:ye,onMouseDown:Yt,onMouseEnter:nn,onMouseOut:Vt,type:"target"})))};return t.displayName="EdgeWrapper",k.memo(t)};function XC(e){const t={default:Aa(e.default||Lc),straight:Aa(e.bezier||hh),step:Aa(e.step||dh),smoothstep:Aa(e.step||tl),simplebezier:Aa(e.simplebezier||fh)},n={},i=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,u)=>(a[u]=Aa(e[u]||Lc),a),n);return{...t,...i}}function xg(e,t,n=null){const i=((n==null?void 0:n.x)||0)+t.x,a=((n==null?void 0:n.y)||0)+t.y,u=(n==null?void 0:n.width)||t.width,c=(n==null?void 0:n.height)||t.height;switch(e){case Ue.Top:return{x:i+u/2,y:a};case Ue.Right:return{x:i+u,y:a+c/2};case Ue.Bottom:return{x:i+u/2,y:a+c};case Ue.Left:return{x:i,y:a+c/2}}}function bg(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const GC=(e,t,n,i,a,u)=>{const c=xg(n,e,t),f=xg(u,i,a);return{sourceX:c.x,sourceY:c.y,targetX:f.x,targetY:f.y}};function ZC({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:i,targetWidth:a,targetHeight:u,width:c,height:f,transform:h}){const p={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+a),y2:Math.max(e.y+i,t.y+u)};p.x===p.x2&&(p.x2+=1),p.y===p.y2&&(p.y2+=1);const m=eu({x:(0-h[0])/h[2],y:(0-h[1])/h[2],width:c/h[2],height:f/h[2]}),y=Math.max(0,Math.min(m.x2,p.x2)-Math.max(m.x,p.x)),x=Math.max(0,Math.min(m.y2,p.y2)-Math.max(m.y,p.y));return Math.ceil(y*x)>0}function _g(e){var i,a,u,c,f;const t=((i=e==null?void 0:e[tn])==null?void 0:i.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((u=e==null?void 0:e.positionAbsolute)==null?void 0:u.y)<"u";return[{x:((c=e==null?void 0:e.positionAbsolute)==null?void 0:c.x)||0,y:((f=e==null?void 0:e.positionAbsolute)==null?void 0:f.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const QC=[{level:0,isMaxLevel:!0,edges:[]}];function JC(e,t,n=!1){let i=-1;const a=e.reduce((c,f)=>{var m,y;const h=br(f.zIndex);let p=h?f.zIndex:0;if(n){const x=t.get(f.target),b=t.get(f.source),N=f.selected||(x==null?void 0:x.selected)||(b==null?void 0:b.selected),E=Math.max(((m=b==null?void 0:b[tn])==null?void 0:m.z)||0,((y=x==null?void 0:x[tn])==null?void 0:y.z)||0,1e3);p=(h?f.zIndex:0)+(N?E:0)}return c[p]?c[p].push(f):c[p]=[f],i=p>i?p:i,c},{}),u=Object.entries(a).map(([c,f])=>{const h=+c;return{edges:f,level:h,isMaxLevel:h===i}});return u.length===0?QC:u}function eO(e,t,n){const i=$t(k.useCallback(a=>e?a.edges.filter(u=>{const c=t.get(u.source),f=t.get(u.target);return(c==null?void 0:c.width)&&(c==null?void 0:c.height)&&(f==null?void 0:f.width)&&(f==null?void 0:f.height)&&ZC({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:f.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:f.width,targetHeight:f.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return JC(i,t,n)}const tO=({color:e="none",strokeWidth:t=1})=>ie.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),nO=({color:e="none",strokeWidth:t=1})=>ie.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Eg={[Mc.Arrow]:tO,[Mc.ArrowClosed]:nO};function rO(e){const t=gn();return k.useMemo(()=>{var a,u;return Object.prototype.hasOwnProperty.call(Eg,e)?Eg[e]:((u=(a=t.getState()).onError)==null||u.call(a,"009",Ti.error009(e)),null)},[e])}const iO=({id:e,type:t,color:n,width:i=12.5,height:a=12.5,markerUnits:u="strokeWidth",strokeWidth:c,orient:f="auto-start-reverse"})=>{const h=rO(t);return h?ie.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${i}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:f,refX:"0",refY:"0"},ie.createElement(h,{color:n,strokeWidth:c})):null},oO=({defaultColor:e,rfId:t})=>n=>{const i=[];return n.edges.reduce((a,u)=>([u.markerStart,u.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const f=gd(c,t);i.includes(f)||(a.push({id:f,color:c.color||e,...c}),i.push(f))}}),a),[]).sort((a,u)=>a.id.localeCompare(u.id))},Fv=({defaultColor:e,rfId:t})=>{const n=$t(k.useCallback(oO({defaultColor:e,rfId:t}),[e,t]),(i,a)=>!(i.length!==a.length||i.some((u,c)=>u.id!==a[c].id)));return ie.createElement("defs",null,n.map(i=>ie.createElement(iO,{id:i.id,key:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient})))};Fv.displayName="MarkerDefinitions";var aO=k.memo(Fv);const sO=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),jv=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:i,edgeTypes:a,noPanClassName:u,onEdgeContextMenu:c,onEdgeMouseEnter:f,onEdgeMouseMove:h,onEdgeMouseLeave:p,onEdgeClick:m,onEdgeDoubleClick:y,onReconnect:x,onReconnectStart:b,onReconnectEnd:N,reconnectRadius:E,children:C,disableKeyboardA11y:M})=>{const{edgesFocusable:z,edgesUpdatable:ee,elementsSelectable:B,width:le,height:ce,connectionMode:U,nodeInternals:J,onError:oe}=$t(sO,qn),X=eO(t,J,n);return le?ie.createElement(ie.Fragment,null,X.map(({level:Y,edges:ue,isMaxLevel:ge})=>ie.createElement("svg",{key:Y,style:{zIndex:Y},width:le,height:ce,className:"react-flow__edges react-flow__container"},ge&&ie.createElement(aO,{defaultColor:e,rfId:i}),ie.createElement("g",null,ue.map(R=>{const[re,Q,ye]=_g(J.get(R.source)),[he,W,ae]=_g(J.get(R.target));if(!ye||!ae)return null;let fe=R.type||"default";a[fe]||(oe==null||oe("011",Ti.error011(fe)),fe="default");const we=a[fe]||a.default,ke=U===Go.Strict?W.target:(W.target??[]).concat(W.source??[]),Me=bg(Q.source,R.sourceHandle),Re=bg(ke,R.targetHandle),Be=(Me==null?void 0:Me.position)||Ue.Bottom,Ve=(Re==null?void 0:Re.position)||Ue.Top,qe=!!(R.focusable||z&&typeof R.focusable>"u"),Ee=R.reconnectable||R.updatable,nt=typeof x<"u"&&(Ee||ee&&typeof Ee>"u");if(!Me||!Re)return oe==null||oe("008",Ti.error008(Me,R)),null;const{sourceX:xt,sourceY:Ke,targetX:Tt,targetY:Xe}=GC(re,Me,Be,he,Re,Ve);return ie.createElement(we,{key:R.id,id:R.id,className:Tn([R.className,u]),type:fe,data:R.data,selected:!!R.selected,animated:!!R.animated,hidden:!!R.hidden,label:R.label,labelStyle:R.labelStyle,labelShowBg:R.labelShowBg,labelBgStyle:R.labelBgStyle,labelBgPadding:R.labelBgPadding,labelBgBorderRadius:R.labelBgBorderRadius,style:R.style,source:R.source,target:R.target,sourceHandleId:R.sourceHandle,targetHandleId:R.targetHandle,markerEnd:R.markerEnd,markerStart:R.markerStart,sourceX:xt,sourceY:Ke,targetX:Tt,targetY:Xe,sourcePosition:Be,targetPosition:Ve,elementsSelectable:B,onContextMenu:c,onMouseEnter:f,onMouseMove:h,onMouseLeave:p,onClick:m,onEdgeDoubleClick:y,onReconnect:x,onReconnectStart:b,onReconnectEnd:N,reconnectRadius:E,rfId:i,ariaLabel:R.ariaLabel,isFocusable:qe,isReconnectable:nt,pathOptions:"pathOptions"in R?R.pathOptions:void 0,interactionWidth:R.interactionWidth,disableKeyboardA11y:M})})))),C):null};jv.displayName="EdgeRenderer";var uO=k.memo(jv);const cO=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function lO({children:e}){const t=$t(cO);return ie.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function fO(e){const t=vh(),n=k.useRef(!1);k.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const dO={[Ue.Left]:Ue.Right,[Ue.Right]:Ue.Left,[Ue.Top]:Ue.Bottom,[Ue.Bottom]:Ue.Top},Bv=({nodeId:e,handleType:t,style:n,type:i=Gi.Bezier,CustomComponent:a,connectionStatus:u})=>{var ce,U,J;const{fromNode:c,handleId:f,toX:h,toY:p,connectionMode:m}=$t(k.useCallback(oe=>({fromNode:oe.nodeInternals.get(e),handleId:oe.connectionHandleId,toX:(oe.connectionPosition.x-oe.transform[0])/oe.transform[2],toY:(oe.connectionPosition.y-oe.transform[1])/oe.transform[2],connectionMode:oe.connectionMode}),[e]),qn),y=(ce=c==null?void 0:c[tn])==null?void 0:ce.handleBounds;let x=y==null?void 0:y[t];if(m===Go.Loose&&(x=x||(y==null?void 0:y[t==="source"?"target":"source"])),!c||!x)return null;const b=f?x.find(oe=>oe.id===f):x[0],N=b?b.x+b.width/2:(c.width??0)/2,E=b?b.y+b.height/2:c.height??0,C=(((U=c.positionAbsolute)==null?void 0:U.x)??0)+N,M=(((J=c.positionAbsolute)==null?void 0:J.y)??0)+E,z=b==null?void 0:b.position,ee=z?dO[z]:null;if(!z||!ee)return null;if(a)return ie.createElement(a,{connectionLineType:i,connectionLineStyle:n,fromNode:c,fromHandle:b,fromX:C,fromY:M,toX:h,toY:p,fromPosition:z,toPosition:ee,connectionStatus:u});let B="";const le={sourceX:C,sourceY:M,sourcePosition:z,targetX:h,targetY:p,targetPosition:ee};return i===Gi.Bezier?[B]=dv(le):i===Gi.Step?[B]=md({...le,borderRadius:0}):i===Gi.SmoothStep?[B]=md(le):i===Gi.SimpleBezier?[B]=fv(le):B=`M${C},${M} ${h},${p}`,ie.createElement("path",{d:B,fill:"none",className:"react-flow__connection-path",style:n})};Bv.displayName="ConnectionLine";const hO=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function pO({containerStyle:e,style:t,type:n,component:i}){const{nodeId:a,handleType:u,nodesConnectable:c,width:f,height:h,connectionStatus:p}=$t(hO,qn);return!(a&&u&&f&&c)?null:ie.createElement("svg",{style:e,width:f,height:h,className:"react-flow__edges react-flow__connectionline react-flow__container"},ie.createElement("g",{className:Tn(["react-flow__connection",p])},ie.createElement(Bv,{nodeId:a,handleType:u,style:t,type:n,CustomComponent:i,connectionStatus:p})))}function Sg(e,t){return k.useRef(null),gn(),k.useMemo(()=>t(e),[e])}const Hv=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:i,onMoveEnd:a,onInit:u,onNodeClick:c,onEdgeClick:f,onNodeDoubleClick:h,onEdgeDoubleClick:p,onNodeMouseEnter:m,onNodeMouseMove:y,onNodeMouseLeave:x,onNodeContextMenu:b,onSelectionContextMenu:N,onSelectionStart:E,onSelectionEnd:C,connectionLineType:M,connectionLineStyle:z,connectionLineComponent:ee,connectionLineContainerStyle:B,selectionKeyCode:le,selectionOnDrag:ce,selectionMode:U,multiSelectionKeyCode:J,panActivationKeyCode:oe,zoomActivationKeyCode:X,deleteKeyCode:Y,onlyRenderVisibleElements:ue,elementsSelectable:ge,selectNodesOnDrag:R,defaultViewport:re,translateExtent:Q,minZoom:ye,maxZoom:he,preventScrolling:W,defaultMarkerColor:ae,zoomOnScroll:fe,zoomOnPinch:we,panOnScroll:ke,panOnScrollSpeed:Me,panOnScrollMode:Re,zoomOnDoubleClick:Be,panOnDrag:Ve,onPaneClick:qe,onPaneMouseEnter:Ee,onPaneMouseMove:nt,onPaneMouseLeave:xt,onPaneScroll:Ke,onPaneContextMenu:Tt,onEdgeContextMenu:Xe,onEdgeMouseEnter:rt,onEdgeMouseMove:Nt,onEdgeMouseLeave:Je,onReconnect:He,onReconnectStart:jt,onReconnectEnd:Bt,reconnectRadius:bt,noDragClassName:un,noWheelClassName:Ut,noPanClassName:cn,elevateEdgesOnSelect:Jt,disableKeyboardA11y:Yt,nodeOrigin:nn,nodeExtent:Vt,rfId:ln})=>{const hn=Sg(e,HC),_t=Sg(t,XC);return fO(u),ie.createElement(jC,{onPaneClick:qe,onPaneMouseEnter:Ee,onPaneMouseMove:nt,onPaneMouseLeave:xt,onPaneContextMenu:Tt,onPaneScroll:Ke,deleteKeyCode:Y,selectionKeyCode:le,selectionOnDrag:ce,selectionMode:U,onSelectionStart:E,onSelectionEnd:C,multiSelectionKeyCode:J,panActivationKeyCode:oe,zoomActivationKeyCode:X,elementsSelectable:ge,onMove:n,onMoveStart:i,onMoveEnd:a,zoomOnScroll:fe,zoomOnPinch:we,zoomOnDoubleClick:Be,panOnScroll:ke,panOnScrollSpeed:Me,panOnScrollMode:Re,panOnDrag:Ve,defaultViewport:re,translateExtent:Q,minZoom:ye,maxZoom:he,onSelectionContextMenu:N,preventScrolling:W,noDragClassName:un,noWheelClassName:Ut,noPanClassName:cn,disableKeyboardA11y:Yt},ie.createElement(lO,null,ie.createElement(uO,{edgeTypes:_t,onEdgeClick:f,onEdgeDoubleClick:p,onlyRenderVisibleElements:ue,onEdgeContextMenu:Xe,onEdgeMouseEnter:rt,onEdgeMouseMove:Nt,onEdgeMouseLeave:Je,onReconnect:He,onReconnectStart:jt,onReconnectEnd:Bt,reconnectRadius:bt,defaultMarkerColor:ae,noPanClassName:cn,elevateEdgesOnSelect:!!Jt,disableKeyboardA11y:Yt,rfId:ln},ie.createElement(pO,{style:z,type:M,component:ee,containerStyle:B})),ie.createElement("div",{className:"react-flow__edgelabel-renderer"}),ie.createElement(UC,{nodeTypes:hn,onNodeClick:c,onNodeDoubleClick:h,onNodeMouseEnter:m,onNodeMouseMove:y,onNodeMouseLeave:x,onNodeContextMenu:b,selectNodesOnDrag:R,onlyRenderVisibleElements:ue,noPanClassName:cn,noDragClassName:un,disableKeyboardA11y:Yt,nodeOrigin:nn,nodeExtent:Vt,rfId:ln})))};Hv.displayName="GraphView";var mO=k.memo(Hv);const xd=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Yi={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:xd,nodeExtent:xd,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Go.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:HI,isValidConnection:void 0},gO=()=>rT((e,t)=>({...Yi,setNodes:n=>{const{nodeInternals:i,nodeOrigin:a,elevateNodesOnSelect:u}=t();e({nodeInternals:Mf(n,i,a,u)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:i={}}=t();e({edges:n.map(a=>({...i,...a}))})},setDefaultNodesAndEdges:(n,i)=>{const a=typeof n<"u",u=typeof i<"u",c=a?Mf(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:c,edges:u?i:[],hasDefaultNodes:a,hasDefaultEdges:u})},updateNodeDimensions:n=>{const{onNodesChange:i,nodeInternals:a,fitViewOnInit:u,fitViewOnInitDone:c,fitViewOnInitOptions:f,domNode:h,nodeOrigin:p}=t(),m=h==null?void 0:h.querySelector(".react-flow__viewport");if(!m)return;const y=window.getComputedStyle(m),{m22:x}=new window.DOMMatrixReadOnly(y.transform),b=n.reduce((E,C)=>{const M=a.get(C.id);if(M!=null&&M.hidden)a.set(M.id,{...M,[tn]:{...M[tn],handleBounds:void 0}});else if(M){const z=ch(C.nodeElement);!!(z.width&&z.height&&(M.width!==z.width||M.height!==z.height||C.forceUpdate))&&(a.set(M.id,{...M,[tn]:{...M[tn],handleBounds:{source:vg(".source",C.nodeElement,x,p),target:vg(".target",C.nodeElement,x,p)}},...z}),E.push({id:M.id,type:"dimensions",dimensions:z}))}return E},[]);Ov(a,p);const N=c||u&&!c&&Av(t,{initial:!0,...f});e({nodeInternals:new Map(a),fitViewOnInitDone:N}),(b==null?void 0:b.length)>0&&(i==null||i(b))},updateNodePositions:(n,i=!0,a=!1)=>{const{triggerNodeChanges:u}=t(),c=n.map(f=>{const h={id:f.id,type:"position",dragging:a};return i&&(h.positionAbsolute=f.positionAbsolute,h.position=f.position),h});u(c)},triggerNodeChanges:n=>{const{onNodesChange:i,nodeInternals:a,hasDefaultNodes:u,nodeOrigin:c,getNodes:f,elevateNodesOnSelect:h}=t();if(n!=null&&n.length){if(u){const p=AC(n,f()),m=Mf(p,a,c,h);e({nodeInternals:m})}i==null||i(n)}},addSelectedNodes:n=>{const{multiSelectionActive:i,edges:a,getNodes:u}=t();let c,f=null;i?c=n.map(h=>Xi(h,!0)):(c=Pa(u(),n),f=Pa(a,[])),pc({changedNodes:c,changedEdges:f,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:i,edges:a,getNodes:u}=t();let c,f=null;i?c=n.map(h=>Xi(h,!0)):(c=Pa(a,n),f=Pa(u(),[])),pc({changedNodes:f,changedEdges:c,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:i}={})=>{const{edges:a,getNodes:u}=t(),c=n||u(),f=i||a,h=c.map(m=>(m.selected=!1,Xi(m.id,!1))),p=f.map(m=>Xi(m.id,!1));pc({changedNodes:h,changedEdges:p,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:i,maxZoom:a}=t();i==null||i.scaleExtent([n,a]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:i,minZoom:a}=t();i==null||i.scaleExtent([a,n]),e({maxZoom:n})},setTranslateExtent:n=>{var i;(i=t().d3Zoom)==null||i.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:i}=t(),u=i().filter(f=>f.selected).map(f=>Xi(f.id,!1)),c=n.filter(f=>f.selected).map(f=>Xi(f.id,!1));pc({changedNodes:u,changedEdges:c,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:i}=t();i.forEach(a=>{a.positionAbsolute=lh(a.position,n)}),e({nodeExtent:n,nodeInternals:new Map(i)})},panBy:n=>{const{transform:i,width:a,height:u,d3Zoom:c,d3Selection:f,translateExtent:h}=t();if(!c||!f||!n.x&&!n.y)return!1;const p=_i.translate(i[0]+n.x,i[1]+n.y).scale(i[2]),m=[[0,0],[a,u]],y=c==null?void 0:c.constrain()(p,m,h);return c.transform(f,y),i[0]!==y.x||i[1]!==y.y||i[2]!==y.k},cancelConnection:()=>e({connectionNodeId:Yi.connectionNodeId,connectionHandleId:Yi.connectionHandleId,connectionHandleType:Yi.connectionHandleType,connectionStatus:Yi.connectionStatus,connectionStartHandle:Yi.connectionStartHandle,connectionEndHandle:Yi.connectionEndHandle}),reset:()=>e({...Yi})}),Object.is),Kv=({children:e})=>{const t=k.useRef(null);return t.current||(t.current=gO()),ie.createElement(MI,{value:t.current},e)};Kv.displayName="ReactFlowProvider";const zv=({children:e})=>k.useContext(el)?ie.createElement(ie.Fragment,null,e):ie.createElement(Kv,null,e);zv.displayName="ReactFlowWrapper";const vO={input:Ev,default:yd,output:Tv,group:gh},yO={default:Lc,straight:hh,step:dh,smoothstep:tl,simplebezier:fh},wO=[0,0],xO=[15,15],bO={x:0,y:0,zoom:1},_O={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Uv=k.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,className:a,nodeTypes:u=vO,edgeTypes:c=yO,onNodeClick:f,onEdgeClick:h,onInit:p,onMove:m,onMoveStart:y,onMoveEnd:x,onConnect:b,onConnectStart:N,onConnectEnd:E,onClickConnectStart:C,onClickConnectEnd:M,onNodeMouseEnter:z,onNodeMouseMove:ee,onNodeMouseLeave:B,onNodeContextMenu:le,onNodeDoubleClick:ce,onNodeDragStart:U,onNodeDrag:J,onNodeDragStop:oe,onNodesDelete:X,onEdgesDelete:Y,onSelectionChange:ue,onSelectionDragStart:ge,onSelectionDrag:R,onSelectionDragStop:re,onSelectionContextMenu:Q,onSelectionStart:ye,onSelectionEnd:he,connectionMode:W=Go.Strict,connectionLineType:ae=Gi.Bezier,connectionLineStyle:fe,connectionLineComponent:we,connectionLineContainerStyle:ke,deleteKeyCode:Me="Backspace",selectionKeyCode:Re="Shift",selectionOnDrag:Be=!1,selectionMode:Ve=tu.Full,panActivationKeyCode:qe="Space",multiSelectionKeyCode:Ee=Rc()?"Meta":"Control",zoomActivationKeyCode:nt=Rc()?"Meta":"Control",snapToGrid:xt=!1,snapGrid:Ke=xO,onlyRenderVisibleElements:Tt=!1,selectNodesOnDrag:Xe=!0,nodesDraggable:rt,nodesConnectable:Nt,nodesFocusable:Je,nodeOrigin:He=wO,edgesFocusable:jt,edgesUpdatable:Bt,elementsSelectable:bt,defaultViewport:un=bO,minZoom:Ut=.5,maxZoom:cn=2,translateExtent:Jt=xd,preventScrolling:Yt=!0,nodeExtent:nn,defaultMarkerColor:Vt="#b1b1b7",zoomOnScroll:ln=!0,zoomOnPinch:hn=!0,panOnScroll:_t=!1,panOnScrollSpeed:Ht=.5,panOnScrollMode:qt=Ho.Free,zoomOnDoubleClick:Wt=!0,panOnDrag:Fe=!0,onPaneClick:Kt,onPaneMouseEnter:Dt,onPaneMouseMove:pe,onPaneMouseLeave:ne,onPaneScroll:Oe,onPaneContextMenu:Te,children:$e,onEdgeContextMenu:Le,onEdgeDoubleClick:Ye,onEdgeMouseEnter:ft,onEdgeMouseMove:pt,onEdgeMouseLeave:Et,onEdgeUpdate:Pn,onEdgeUpdateStart:Gn,onEdgeUpdateEnd:Er,onReconnect:St,onReconnectStart:Lt,onReconnectEnd:cr,reconnectRadius:lr=10,edgeUpdaterRadius:fr=10,onNodesChange:dr,onEdgesChange:ao,noDragClassName:Nn="nodrag",noWheelClassName:Zn="nowheel",noPanClassName:Rn="nopan",fitView:zr=!1,fitViewOptions:it,connectOnClick:yt=!0,attributionPosition:Pt,proOptions:Xt,defaultEdgeOptions:vn,elevateNodesOnSelect:Sr=!0,elevateEdgesOnSelect:Rt=!1,disableKeyboardA11y:xn=!1,autoPanOnConnect:Qn=!0,autoPanOnNodeDrag:oi=!0,connectionRadius:Ur=20,isValidConnection:Ci,onError:so,style:Oi,id:Jn,nodeDragThreshold:uo,...Ai},ra)=>{const at=Jn||"1";return ie.createElement("div",{...Ai,style:{...Oi,..._O},ref:ra,className:Tn(["react-flow",a]),"data-testid":"rf__wrapper",id:Jn},ie.createElement(zv,null,ie.createElement(mO,{onInit:p,onMove:m,onMoveStart:y,onMoveEnd:x,onNodeClick:f,onEdgeClick:h,onNodeMouseEnter:z,onNodeMouseMove:ee,onNodeMouseLeave:B,onNodeContextMenu:le,onNodeDoubleClick:ce,nodeTypes:u,edgeTypes:c,connectionLineType:ae,connectionLineStyle:fe,connectionLineComponent:we,connectionLineContainerStyle:ke,selectionKeyCode:Re,selectionOnDrag:Be,selectionMode:Ve,deleteKeyCode:Me,multiSelectionKeyCode:Ee,panActivationKeyCode:qe,zoomActivationKeyCode:nt,onlyRenderVisibleElements:Tt,selectNodesOnDrag:Xe,defaultViewport:un,translateExtent:Jt,minZoom:Ut,maxZoom:cn,preventScrolling:Yt,zoomOnScroll:ln,zoomOnPinch:hn,zoomOnDoubleClick:Wt,panOnScroll:_t,panOnScrollSpeed:Ht,panOnScrollMode:qt,panOnDrag:Fe,onPaneClick:Kt,onPaneMouseEnter:Dt,onPaneMouseMove:pe,onPaneMouseLeave:ne,onPaneScroll:Oe,onPaneContextMenu:Te,onSelectionContextMenu:Q,onSelectionStart:ye,onSelectionEnd:he,onEdgeContextMenu:Le,onEdgeDoubleClick:Ye,onEdgeMouseEnter:ft,onEdgeMouseMove:pt,onEdgeMouseLeave:Et,onReconnect:St??Pn,onReconnectStart:Lt??Gn,onReconnectEnd:cr??Er,reconnectRadius:lr??fr,defaultMarkerColor:Vt,noDragClassName:Nn,noWheelClassName:Zn,noPanClassName:Rn,elevateEdgesOnSelect:Rt,rfId:at,disableKeyboardA11y:xn,nodeOrigin:He,nodeExtent:nn}),ie.createElement(fC,{nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:b,onConnectStart:N,onConnectEnd:E,onClickConnectStart:C,onClickConnectEnd:M,nodesDraggable:rt,nodesConnectable:Nt,nodesFocusable:Je,edgesFocusable:jt,edgesUpdatable:Bt,elementsSelectable:bt,elevateNodesOnSelect:Sr,minZoom:Ut,maxZoom:cn,nodeExtent:nn,onNodesChange:dr,onEdgesChange:ao,snapToGrid:xt,snapGrid:Ke,connectionMode:W,translateExtent:Jt,connectOnClick:yt,defaultEdgeOptions:vn,fitView:zr,fitViewOptions:it,onNodesDelete:X,onEdgesDelete:Y,onNodeDragStart:U,onNodeDrag:J,onNodeDragStop:oe,onSelectionDrag:R,onSelectionDragStart:ge,onSelectionDragStop:re,noPanClassName:Rn,nodeOrigin:He,rfId:at,autoPanOnConnect:Qn,autoPanOnNodeDrag:oi,onError:so,connectionRadius:Ur,isValidConnection:Ci,nodeDragThreshold:uo}),ie.createElement(cC,{onSelectionChange:ue}),$e,ie.createElement($I,{proOptions:Xt,position:Pt}),ie.createElement(gC,{rfId:at,disableKeyboardA11y:xn})))});Uv.displayName="ReactFlow";function Yv(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,a]of e)if(!Object.is(a,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}const Vv=({id:e,x:t,y:n,width:i,height:a,style:u,color:c,strokeColor:f,strokeWidth:h,className:p,borderRadius:m,shapeRendering:y,onClick:x,selected:b})=>{const{background:N,backgroundColor:E}=u||{},C=c||N||E;return ie.createElement("rect",{className:Tn(["react-flow__minimap-node",{selected:b},p]),x:t,y:n,rx:m,ry:m,width:i,height:a,fill:C,stroke:f,strokeWidth:h,shapeRendering:y,onClick:x?M=>x(M,e):void 0})};Vv.displayName="MiniMapNode";var EO=k.memo(Vv);const SO=e=>e.nodeOrigin,TO=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),Ff=e=>e instanceof Function?e:()=>e;function NO({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:i=5,nodeStrokeWidth:a=2,nodeComponent:u=EO,onClick:c}){const f=$t(TO,Yv),h=$t(SO),p=Ff(t),m=Ff(e),y=Ff(n),x=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return ie.createElement(ie.Fragment,null,f.map(b=>{const{x:N,y:E}=Yo(b,h).positionAbsolute;return ie.createElement(u,{key:b.id,x:N,y:E,width:b.width,height:b.height,style:b.style,selected:b.selected,className:y(b),color:p(b),borderRadius:i,strokeColor:m(b),strokeWidth:a,shapeRendering:x,onClick:c,id:b.id})}))}var kO=k.memo(NO);const IO=200,CO=150,OO=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?jI(nl(t,e.nodeOrigin),n):n,rfId:e.rfId}},AO="react-flow__minimap-desc";function qv({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:i="#e2e2e2",nodeClassName:a="",nodeBorderRadius:u=5,nodeStrokeWidth:c=2,nodeComponent:f,maskColor:h="rgb(240, 240, 240, 0.6)",maskStrokeColor:p="none",maskStrokeWidth:m=1,position:y="bottom-right",onClick:x,onNodeClick:b,pannable:N=!1,zoomable:E=!1,ariaLabel:C="React Flow mini map",inversePan:M=!1,zoomStep:z=10,offsetScale:ee=5}){const B=gn(),le=k.useRef(null),{boundingRect:ce,viewBB:U,rfId:J}=$t(OO,Yv),oe=(e==null?void 0:e.width)??IO,X=(e==null?void 0:e.height)??CO,Y=ce.width/oe,ue=ce.height/X,ge=Math.max(Y,ue),R=ge*oe,re=ge*X,Q=ee*ge,ye=ce.x-(R-ce.width)/2-Q,he=ce.y-(re-ce.height)/2-Q,W=R+Q*2,ae=re+Q*2,fe=`${AO}-${J}`,we=k.useRef(0);we.current=ge,k.useEffect(()=>{if(le.current){const Re=wr(le.current),Be=Ee=>{const{transform:nt,d3Selection:xt,d3Zoom:Ke}=B.getState();if(Ee.sourceEvent.type!=="wheel"||!xt||!Ke)return;const Tt=-Ee.sourceEvent.deltaY*(Ee.sourceEvent.deltaMode===1?.05:Ee.sourceEvent.deltaMode?1:.002)*z,Xe=nt[2]*Math.pow(2,Tt);Ke.scaleTo(xt,Xe)},Ve=Ee=>{const{transform:nt,d3Selection:xt,d3Zoom:Ke,translateExtent:Tt,width:Xe,height:rt}=B.getState();if(Ee.sourceEvent.type!=="mousemove"||!xt||!Ke)return;const Nt=we.current*Math.max(1,nt[2])*(M?-1:1),Je={x:nt[0]-Ee.sourceEvent.movementX*Nt,y:nt[1]-Ee.sourceEvent.movementY*Nt},He=[[0,0],[Xe,rt]],jt=_i.translate(Je.x,Je.y).scale(nt[2]),Bt=Ke.constrain()(jt,He,Tt);Ke.transform(xt,Bt)},qe=tv().on("zoom",N?Ve:null).on("zoom.wheel",E?Be:null);return Re.call(qe),()=>{Re.on("zoom",null)}}},[N,E,M,z]);const ke=x?Re=>{const Be=Mr(Re);x(Re,{x:Be[0],y:Be[1]})}:void 0,Me=b?(Re,Be)=>{const Ve=B.getState().nodeInternals.get(Be);b(Re,Ve)}:void 0;return ie.createElement(Js,{position:y,style:e,className:Tn(["react-flow__minimap",t]),"data-testid":"rf__minimap"},ie.createElement("svg",{width:oe,height:X,viewBox:`${ye} ${he} ${W} ${ae}`,role:"img","aria-labelledby":fe,ref:le,onClick:ke},C&&ie.createElement("title",{id:fe},C),ie.createElement(kO,{onClick:Me,nodeColor:i,nodeStrokeColor:n,nodeBorderRadius:u,nodeClassName:a,nodeStrokeWidth:c,nodeComponent:f}),ie.createElement("path",{className:"react-flow__minimap-mask",d:`M${ye-Q},${he-Q}h${W+Q*2}v${ae+Q*2}h${-W-Q*2}z
        M${U.x},${U.y}h${U.width}v${U.height}h${-U.width}z`,fill:h,fillRule:"evenodd",stroke:p,strokeWidth:m,pointerEvents:"none"})))}qv.displayName="MiniMap";var DO=k.memo(qv);function PO(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,a]of e)if(!Object.is(a,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}function RO(){return ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},ie.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function MO(){return ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},ie.createElement("path",{d:"M0 0h32v4.2H0z"}))}function LO(){return ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},ie.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function $O(){return ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ie.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function WO(){return ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ie.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const js=({children:e,className:t,...n})=>ie.createElement("button",{type:"button",className:Tn(["react-flow__controls-button",t]),...n},e);js.displayName="ControlButton";const FO=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Xv=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:a,onZoomIn:u,onZoomOut:c,onFitView:f,onInteractiveChange:h,className:p,children:m,position:y="bottom-left"})=>{const x=gn(),[b,N]=k.useState(!1),{isInteractive:E,minZoomReached:C,maxZoomReached:M}=$t(FO,PO),{zoomIn:z,zoomOut:ee,fitView:B}=vh();if(k.useEffect(()=>{N(!0)},[]),!b)return null;const le=()=>{z(),u==null||u()},ce=()=>{ee(),c==null||c()},U=()=>{B(a),f==null||f()},J=()=>{x.setState({nodesDraggable:!E,nodesConnectable:!E,elementsSelectable:!E}),h==null||h(!E)};return ie.createElement(Js,{className:Tn(["react-flow__controls",p]),position:y,style:e,"data-testid":"rf__controls"},t&&ie.createElement(ie.Fragment,null,ie.createElement(js,{onClick:le,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:M},ie.createElement(RO,null)),ie.createElement(js,{onClick:ce,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:C},ie.createElement(MO,null))),n&&ie.createElement(js,{className:"react-flow__controls-fitview",onClick:U,title:"fit view","aria-label":"fit view"},ie.createElement(LO,null)),i&&ie.createElement(js,{className:"react-flow__controls-interactive",onClick:J,title:"toggle interactivity","aria-label":"toggle interactivity"},E?ie.createElement(WO,null):ie.createElement($O,null)),m)};Xv.displayName="Controls";var jO=k.memo(Xv);function BO(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,a]of e)if(!Object.is(a,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}var jr;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(jr||(jr={}));function HO({color:e,dimensions:t,lineWidth:n}){return ie.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function KO({color:e,radius:t}){return ie.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const zO={[jr.Dots]:"#91919a",[jr.Lines]:"#eee",[jr.Cross]:"#e2e2e2"},UO={[jr.Dots]:1,[jr.Lines]:1,[jr.Cross]:6},YO=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Gv({id:e,variant:t=jr.Dots,gap:n=20,size:i,lineWidth:a=1,offset:u=2,color:c,style:f,className:h}){const p=k.useRef(null),{transform:m,patternId:y}=$t(YO,BO),x=c||zO[t],b=i||UO[t],N=t===jr.Dots,E=t===jr.Cross,C=Array.isArray(n)?n:[n,n],M=[C[0]*m[2]||1,C[1]*m[2]||1],z=b*m[2],ee=E?[z,z]:M,B=N?[z/u,z/u]:[ee[0]/u,ee[1]/u];return ie.createElement("svg",{className:Tn(["react-flow__background",h]),style:{...f,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:p,"data-testid":"rf__background"},ie.createElement("pattern",{id:y+e,x:m[0]%M[0],y:m[1]%M[1],width:M[0],height:M[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${B[0]},-${B[1]})`},N?ie.createElement(KO,{color:x,radius:z/u}):ie.createElement(HO,{dimensions:ee,color:x,lineWidth:a})),ie.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${y+e})`}))}Gv.displayName="Background";var VO=k.memo(Gv);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ki=(e,t)=>{const n=k.forwardRef(({color:i="currentColor",size:a=24,strokeWidth:u=2,absoluteStrokeWidth:c,className:f="",children:h,...p},m)=>k.createElement("svg",{ref:m,...qO,width:a,height:a,stroke:i,strokeWidth:c?Number(u)*24/Number(a):u,className:["lucide",`lucide-${XO(e)}`,f].join(" "),...p},[...t.map(([y,x])=>k.createElement(y,x)),...Array.isArray(h)?h:[h]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=ki("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=ki("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=ki("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=ki("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=ki("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=ki("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=ki("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=ki("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=ki("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var Qv={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Lr,function(){var n=function(s,d){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,w){g.__proto__=w}||function(g,w){for(var S in w)Object.prototype.hasOwnProperty.call(w,S)&&(g[S]=w[S])})(s,d)},i=function(){return(i=Object.assign||function(s){for(var d,g=1,w=arguments.length;g<w;g++)for(var S in d=arguments[g])Object.prototype.hasOwnProperty.call(d,S)&&(s[S]=d[S]);return s}).apply(this,arguments)};function a(s,d,g){for(var w,S=0,A=d.length;S<A;S++)!w&&S in d||((w=w||Array.prototype.slice.call(d,0,S))[S]=d[S]);return s.concat(w||Array.prototype.slice.call(d))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Lr,c=Object.keys,f=Array.isArray;function h(s,d){return typeof d!="object"||c(d).forEach(function(g){s[g]=d[g]}),s}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var p=Object.getPrototypeOf,m={}.hasOwnProperty;function y(s,d){return m.call(s,d)}function x(s,d){typeof d=="function"&&(d=d(p(s))),(typeof Reflect>"u"?c:Reflect.ownKeys)(d).forEach(function(g){N(s,g,d[g])})}var b=Object.defineProperty;function N(s,d,g,w){b(s,d,h(g&&y(g,"get")&&typeof g.get=="function"?{get:g.get,set:g.set,configurable:!0}:{value:g,configurable:!0,writable:!0},w))}function E(s){return{from:function(d){return s.prototype=Object.create(d.prototype),N(s.prototype,"constructor",s),{extend:x.bind(null,s.prototype)}}}}var C=Object.getOwnPropertyDescriptor,M=[].slice;function z(s,d,g){return M.call(s,d,g)}function ee(s,d){return d(s)}function B(s){if(!s)throw new Error("Assertion Failed")}function le(s){u.setImmediate?setImmediate(s):setTimeout(s,0)}function ce(s,d){if(typeof d=="string"&&y(s,d))return s[d];if(!d)return s;if(typeof d!="string"){for(var g=[],w=0,S=d.length;w<S;++w){var A=ce(s,d[w]);g.push(A)}return g}var $=d.indexOf(".");if($!==-1){var H=s[d.substr(0,$)];return H==null?void 0:ce(H,d.substr($+1))}}function U(s,d,g){if(s&&d!==void 0&&!("isFrozen"in Object&&Object.isFrozen(s)))if(typeof d!="string"&&"length"in d){B(typeof g!="string"&&"length"in g);for(var w=0,S=d.length;w<S;++w)U(s,d[w],g[w])}else{var A,$,H=d.indexOf(".");H!==-1?(A=d.substr(0,H),($=d.substr(H+1))===""?g===void 0?f(s)&&!isNaN(parseInt(A))?s.splice(A,1):delete s[A]:s[A]=g:U(H=!(H=s[A])||!y(s,A)?s[A]={}:H,$,g)):g===void 0?f(s)&&!isNaN(parseInt(d))?s.splice(d,1):delete s[d]:s[d]=g}}function J(s){var d,g={};for(d in s)y(s,d)&&(g[d]=s[d]);return g}var oe=[].concat;function X(s){return oe.apply([],s)}var Tr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(X([8,16,32,64].map(function(s){return["Int","Uint","Float"].map(function(d){return d+s+"Array"})}))).filter(function(s){return u[s]}),Y=new Set(Tr.map(function(s){return u[s]})),ue=null;function ge(s){return ue=new WeakMap,s=function d(g){if(!g||typeof g!="object")return g;var w=ue.get(g);if(w)return w;if(f(g)){w=[],ue.set(g,w);for(var S=0,A=g.length;S<A;++S)w.push(d(g[S]))}else if(Y.has(g.constructor))w=g;else{var $,H=p(g);for($ in w=H===Object.prototype?{}:Object.create(H),ue.set(g,w),g)y(g,$)&&(w[$]=d(g[$]))}return w}(s),ue=null,s}var R={}.toString;function re(s){return R.call(s).slice(8,-1)}var Q=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ye=typeof Q=="symbol"?function(s){var d;return s!=null&&(d=s[Q])&&d.apply(s)}:function(){return null};function he(s,d){return d=s.indexOf(d),0<=d&&s.splice(d,1),0<=d}var W={};function ae(s){var d,g,w,S;if(arguments.length===1){if(f(s))return s.slice();if(this===W&&typeof s=="string")return[s];if(S=ye(s)){for(g=[];!(w=S.next()).done;)g.push(w.value);return g}if(s==null)return[s];if(typeof(d=s.length)!="number")return[s];for(g=new Array(d);d--;)g[d]=s[d];return g}for(d=arguments.length,g=new Array(d);d--;)g[d]=arguments[d];return g}var fe=typeof Symbol<"u"?function(s){return s[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Jt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Hn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Jt),we={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ke(s,d){this.name=s,this.message=d}function Me(s,d){return s+". Errors: "+Object.keys(d).map(function(g){return d[g].toString()}).filter(function(g,w,S){return S.indexOf(g)===w}).join(`
`)}function Re(s,d,g,w){this.failures=d,this.failedKeys=w,this.successCount=g,this.message=Me(s,d)}function Be(s,d){this.name="BulkError",this.failures=Object.keys(d).map(function(g){return d[g]}),this.failuresByPos=d,this.message=Me(s,this.failures)}E(ke).from(Error).extend({toString:function(){return this.name+": "+this.message}}),E(Re).from(ke),E(Be).from(ke);var Ve=Hn.reduce(function(s,d){return s[d]=d+"Error",s},{}),qe=ke,Ee=Hn.reduce(function(s,d){var g=d+"Error";function w(S,A){this.name=g,S?typeof S=="string"?(this.message="".concat(S).concat(A?`
 `+A:""),this.inner=A||null):typeof S=="object"&&(this.message="".concat(S.name," ").concat(S.message),this.inner=S):(this.message=we[d]||g,this.inner=null)}return E(w).from(qe),s[d]=w,s},{});Ee.Syntax=SyntaxError,Ee.Type=TypeError,Ee.Range=RangeError;var nt=Jt.reduce(function(s,d){return s[d+"Error"]=Ee[d],s},{}),xt=Hn.reduce(function(s,d){return["Syntax","Type","Range"].indexOf(d)===-1&&(s[d+"Error"]=Ee[d]),s},{});function Ke(){}function Tt(s){return s}function Xe(s,d){return s==null||s===Tt?d:function(g){return d(s(g))}}function rt(s,d){return function(){s.apply(this,arguments),d.apply(this,arguments)}}function Nt(s,d){return s===Ke?d:function(){var g=s.apply(this,arguments);g!==void 0&&(arguments[0]=g);var w=this.onsuccess,S=this.onerror;this.onsuccess=null,this.onerror=null;var A=d.apply(this,arguments);return w&&(this.onsuccess=this.onsuccess?rt(w,this.onsuccess):w),S&&(this.onerror=this.onerror?rt(S,this.onerror):S),A!==void 0?A:g}}function Je(s,d){return s===Ke?d:function(){s.apply(this,arguments);var g=this.onsuccess,w=this.onerror;this.onsuccess=this.onerror=null,d.apply(this,arguments),g&&(this.onsuccess=this.onsuccess?rt(g,this.onsuccess):g),w&&(this.onerror=this.onerror?rt(w,this.onerror):w)}}function He(s,d){return s===Ke?d:function(g){var w=s.apply(this,arguments);h(g,w);var S=this.onsuccess,A=this.onerror;return this.onsuccess=null,this.onerror=null,g=d.apply(this,arguments),S&&(this.onsuccess=this.onsuccess?rt(S,this.onsuccess):S),A&&(this.onerror=this.onerror?rt(A,this.onerror):A),w===void 0?g===void 0?void 0:g:h(w,g)}}function jt(s,d){return s===Ke?d:function(){return d.apply(this,arguments)!==!1&&s.apply(this,arguments)}}function Bt(s,d){return s===Ke?d:function(){var g=s.apply(this,arguments);if(g&&typeof g.then=="function"){for(var w=this,S=arguments.length,A=new Array(S);S--;)A[S]=arguments[S];return g.then(function(){return d.apply(w,A)})}return d.apply(this,arguments)}}xt.ModifyError=Re,xt.DexieError=ke,xt.BulkError=Be;var bt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function un(s){bt=s}var Ut={},cn=100,Tr=typeof Promise>"u"?[]:function(){var s=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[s,p(s),s];var d=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[d,p(d),s]}(),Jt=Tr[0],Hn=Tr[1],Tr=Tr[2],Hn=Hn&&Hn.then,Yt=Jt&&Jt.constructor,nn=!!Tr,Vt=function(s,d){Kt.push([s,d]),hn&&(queueMicrotask(pt),hn=!1)},ln=!0,hn=!0,_t=[],Ht=[],qt=Tt,Wt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ke,pgp:!1,env:{},finalize:Ke},Fe=Wt,Kt=[],Dt=0,pe=[];function ne(s){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var d=this._PSD=Fe;if(typeof s!="function"){if(s!==Ut)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&$e(this,this._value))}this._state=null,this._value=null,++d.ref,function g(w,S){try{S(function(A){if(w._state===null){if(A===w)throw new TypeError("A promise cannot be resolved with itself.");var $=w._lib&&Et();A&&typeof A.then=="function"?g(w,function(H,Z){A instanceof ne?A._then(H,Z):A.then(H,Z)}):(w._state=!0,w._value=A,Le(w)),$&&Pn()}},$e.bind(null,w))}catch(A){$e(w,A)}}(this,s)}var Oe={get:function(){var s=Fe,d=dr;function g(w,S){var A=this,$=!s.global&&(s!==Fe||d!==dr),H=$&&!Rn(),Z=new ne(function(I,L){Ye(A,new Te(vn(w,s,$,H),vn(S,s,$,H),I,L,s))});return this._consoleTask&&(Z._consoleTask=this._consoleTask),Z}return g.prototype=Ut,g},set:function(s){N(this,"then",s&&s.prototype===Ut?Oe:{get:function(){return s},set:Oe.set})}};function Te(s,d,g,w,S){this.onFulfilled=typeof s=="function"?s:null,this.onRejected=typeof d=="function"?d:null,this.resolve=g,this.reject=w,this.psd=S}function $e(s,d){var g,w;Ht.push(d),s._state===null&&(g=s._lib&&Et(),d=qt(d),s._state=!1,s._value=d,w=s,_t.some(function(S){return S._value===w._value})||_t.push(w),Le(s),g&&Pn())}function Le(s){var d=s._listeners;s._listeners=[];for(var g=0,w=d.length;g<w;++g)Ye(s,d[g]);var S=s._PSD;--S.ref||S.finalize(),Dt===0&&(++Dt,Vt(function(){--Dt==0&&Gn()},[]))}function Ye(s,d){if(s._state!==null){var g=s._state?d.onFulfilled:d.onRejected;if(g===null)return(s._state?d.resolve:d.reject)(s._value);++d.psd.ref,++Dt,Vt(ft,[g,s,d])}else s._listeners.push(d)}function ft(s,d,g){try{var w,S=d._value;!d._state&&Ht.length&&(Ht=[]),w=bt&&d._consoleTask?d._consoleTask.run(function(){return s(S)}):s(S),d._state||Ht.indexOf(S)!==-1||function(A){for(var $=_t.length;$;)if(_t[--$]._value===A._value)return _t.splice($,1)}(d),g.resolve(w)}catch(A){g.reject(A)}finally{--Dt==0&&Gn(),--g.psd.ref||g.psd.finalize()}}function pt(){Xt(Wt,function(){Et()&&Pn()})}function Et(){var s=ln;return hn=ln=!1,s}function Pn(){var s,d,g;do for(;0<Kt.length;)for(s=Kt,Kt=[],g=s.length,d=0;d<g;++d){var w=s[d];w[0].apply(null,w[1])}while(0<Kt.length);hn=ln=!0}function Gn(){var s=_t;_t=[],s.forEach(function(w){w._PSD.onunhandled.call(null,w._value,w)});for(var d=pe.slice(0),g=d.length;g;)d[--g]()}function Er(s){return new ne(Ut,!1,s)}function St(s,d){var g=Fe;return function(){var w=Et(),S=Fe;try{return yt(g,!0),s.apply(this,arguments)}catch(A){d&&d(A)}finally{yt(S,!1),w&&Pn()}}}x(ne.prototype,{then:Oe,_then:function(s,d){Ye(this,new Te(null,null,s,d,Fe))},catch:function(s){if(arguments.length===1)return this.then(null,s);var d=s,g=arguments[1];return typeof d=="function"?this.then(null,function(w){return(w instanceof d?g:Er)(w)}):this.then(null,function(w){return(w&&w.name===d?g:Er)(w)})},finally:function(s){return this.then(function(d){return ne.resolve(s()).then(function(){return d})},function(d){return ne.resolve(s()).then(function(){return Er(d)})})},timeout:function(s,d){var g=this;return s<1/0?new ne(function(w,S){var A=setTimeout(function(){return S(new Ee.Timeout(d))},s);g.then(w,S).finally(clearTimeout.bind(null,A))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&N(ne.prototype,Symbol.toStringTag,"Dexie.Promise"),Wt.env=Pt(),x(ne,{all:function(){var s=ae.apply(null,arguments).map(zr);return new ne(function(d,g){s.length===0&&d([]);var w=s.length;s.forEach(function(S,A){return ne.resolve(S).then(function($){s[A]=$,--w||d(s)},g)})})},resolve:function(s){return s instanceof ne?s:s&&typeof s.then=="function"?new ne(function(d,g){s.then(d,g)}):new ne(Ut,!0,s)},reject:Er,race:function(){var s=ae.apply(null,arguments).map(zr);return new ne(function(d,g){s.map(function(w){return ne.resolve(w).then(d,g)})})},PSD:{get:function(){return Fe},set:function(s){return Fe=s}},totalEchoes:{get:function(){return dr}},newPSD:Nn,usePSD:Xt,scheduler:{get:function(){return Vt},set:function(s){Vt=s}},rejectionMapper:{get:function(){return qt},set:function(s){qt=s}},follow:function(s,d){return new ne(function(g,w){return Nn(function(S,A){var $=Fe;$.unhandleds=[],$.onunhandled=A,$.finalize=rt(function(){var H,Z=this;H=function(){Z.unhandleds.length===0?S():A(Z.unhandleds[0])},pe.push(function I(){H(),pe.splice(pe.indexOf(I),1)}),++Dt,Vt(function(){--Dt==0&&Gn()},[])},$.finalize),s()},d,g,w)})}}),Yt&&(Yt.allSettled&&N(ne,"allSettled",function(){var s=ae.apply(null,arguments).map(zr);return new ne(function(d){s.length===0&&d([]);var g=s.length,w=new Array(g);s.forEach(function(S,A){return ne.resolve(S).then(function($){return w[A]={status:"fulfilled",value:$}},function($){return w[A]={status:"rejected",reason:$}}).then(function(){return--g||d(w)})})})}),Yt.any&&typeof AggregateError<"u"&&N(ne,"any",function(){var s=ae.apply(null,arguments).map(zr);return new ne(function(d,g){s.length===0&&g(new AggregateError([]));var w=s.length,S=new Array(w);s.forEach(function(A,$){return ne.resolve(A).then(function(H){return d(H)},function(H){S[$]=H,--w||g(new AggregateError(S))})})})}),Yt.withResolvers&&(ne.withResolvers=Yt.withResolvers));var Lt={awaits:0,echoes:0,id:0},cr=0,lr=[],fr=0,dr=0,ao=0;function Nn(s,d,g,w){var S=Fe,A=Object.create(S);return A.parent=S,A.ref=0,A.global=!1,A.id=++ao,Wt.env,A.env=nn?{Promise:ne,PromiseProp:{value:ne,configurable:!0,writable:!0},all:ne.all,race:ne.race,allSettled:ne.allSettled,any:ne.any,resolve:ne.resolve,reject:ne.reject}:{},d&&h(A,d),++S.ref,A.finalize=function(){--this.parent.ref||this.parent.finalize()},w=Xt(A,s,g,w),A.ref===0&&A.finalize(),w}function Zn(){return Lt.id||(Lt.id=++cr),++Lt.awaits,Lt.echoes+=cn,Lt.id}function Rn(){return!!Lt.awaits&&(--Lt.awaits==0&&(Lt.id=0),Lt.echoes=Lt.awaits*cn,!0)}function zr(s){return Lt.echoes&&s&&s.constructor===Yt?(Zn(),s.then(function(d){return Rn(),d},function(d){return Rn(),Rt(d)})):s}function it(){var s=lr[lr.length-1];lr.pop(),yt(s,!1)}function yt(s,d){var g,w=Fe;(d?!Lt.echoes||fr++&&s===Fe:!fr||--fr&&s===Fe)||queueMicrotask(d?(function(S){++dr,Lt.echoes&&--Lt.echoes!=0||(Lt.echoes=Lt.awaits=Lt.id=0),lr.push(Fe),yt(S,!0)}).bind(null,s):it),s!==Fe&&(Fe=s,w===Wt&&(Wt.env=Pt()),nn&&(g=Wt.env.Promise,d=s.env,(w.global||s.global)&&(Object.defineProperty(u,"Promise",d.PromiseProp),g.all=d.all,g.race=d.race,g.resolve=d.resolve,g.reject=d.reject,d.allSettled&&(g.allSettled=d.allSettled),d.any&&(g.any=d.any))))}function Pt(){var s=u.Promise;return nn?{Promise:s,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:s.all,race:s.race,allSettled:s.allSettled,any:s.any,resolve:s.resolve,reject:s.reject}:{}}function Xt(s,d,g,w,S){var A=Fe;try{return yt(s,!0),d(g,w,S)}finally{yt(A,!1)}}function vn(s,d,g,w){return typeof s!="function"?s:function(){var S=Fe;g&&Zn(),yt(d,!0);try{return s.apply(this,arguments)}finally{yt(S,!1),w&&queueMicrotask(Rn)}}}function Sr(s){Promise===Yt&&Lt.echoes===0?fr===0?s():enqueueNativeMicroTask(s):setTimeout(s,0)}(""+Hn).indexOf("[native code]")===-1&&(Zn=Rn=Ke);var Rt=ne.reject,xn="￿",Qn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",oi="String expected.",Ur=[],Ci="__dbnames",so="readonly",Oi="readwrite";function Jn(s,d){return s?d?function(){return s.apply(this,arguments)&&d.apply(this,arguments)}:s:d}var uo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ai(s){return typeof s!="string"||/\./.test(s)?function(d){return d}:function(d){return d[s]===void 0&&s in d&&delete(d=ge(d))[s],d}}function ra(){throw Ee.Type()}function at(s,d){try{var g=wu(s),w=wu(d);if(g!==w)return g==="Array"?1:w==="Array"?-1:g==="binary"?1:w==="binary"?-1:g==="string"?1:w==="string"?-1:g==="Date"?1:w!=="Date"?NaN:-1;switch(g){case"number":case"Date":case"string":return d<s?1:s<d?-1:0;case"binary":return function(S,A){for(var $=S.length,H=A.length,Z=$<H?$:H,I=0;I<Z;++I)if(S[I]!==A[I])return S[I]<A[I]?-1:1;return $===H?0:$<H?-1:1}(Za(s),Za(d));case"Array":return function(S,A){for(var $=S.length,H=A.length,Z=$<H?$:H,I=0;I<Z;++I){var L=at(S[I],A[I]);if(L!==0)return L}return $===H?0:$<H?-1:1}(s,d)}}catch{}return NaN}function wu(s){var d=typeof s;return d!="object"?d:ArrayBuffer.isView(s)?"binary":(s=re(s),s==="ArrayBuffer"?"binary":s)}function Za(s){return s instanceof Uint8Array?s:ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s)}var Qa=(At.prototype._trans=function(s,d,g){var w=this._tx||Fe.trans,S=this.name,A=bt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(s==="readonly"?"read":"write"," ").concat(this.name));function $(I,L,O){if(!O.schema[S])throw new Ee.NotFound("Table "+S+" not part of transaction");return d(O.idbtrans,O)}var H=Et();try{var Z=w&&w.db._novip===this.db._novip?w===Fe.trans?w._promise(s,$,g):Nn(function(){return w._promise(s,$,g)},{trans:w,transless:Fe.transless||Fe}):function I(L,O,K,F){if(L.idbdb&&(L._state.openComplete||Fe.letThrough||L._vip)){var q=L._createTransaction(O,K,L._dbSchema);try{q.create(),L._state.PR1398_maxLoop=3}catch(te){return te.name===Ve.InvalidState&&L.isOpen()&&0<--L._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),L.close({disableAutoOpen:!1}),L.open().then(function(){return I(L,O,K,F)})):Rt(te)}return q._promise(O,function(te,V){return Nn(function(){return Fe.trans=q,F(te,V,q)})}).then(function(te){if(O==="readwrite")try{q.idbtrans.commit()}catch{}return O==="readonly"?te:q._completion.then(function(){return te})})}if(L._state.openComplete)return Rt(new Ee.DatabaseClosed(L._state.dbOpenError));if(!L._state.isBeingOpened){if(!L._state.autoOpen)return Rt(new Ee.DatabaseClosed);L.open().catch(Ke)}return L._state.dbReadyPromise.then(function(){return I(L,O,K,F)})}(this.db,s,[this.name],$);return A&&(Z._consoleTask=A,Z=Z.catch(function(I){return console.trace(I),Rt(I)})),Z}finally{H&&Pn()}},At.prototype.get=function(s,d){var g=this;return s&&s.constructor===Object?this.where(s).first(d):s==null?Rt(new Ee.Type("Invalid argument to Table.get()")):this._trans("readonly",function(w){return g.core.get({trans:w,key:s}).then(function(S){return g.hook.reading.fire(S)})}).then(d)},At.prototype.where=function(s){if(typeof s=="string")return new this.db.WhereClause(this,s);if(f(s))return new this.db.WhereClause(this,"[".concat(s.join("+"),"]"));var d=c(s);if(d.length===1)return this.where(d[0]).equals(s[d[0]]);var g=this.schema.indexes.concat(this.schema.primKey).filter(function(H){if(H.compound&&d.every(function(I){return 0<=H.keyPath.indexOf(I)})){for(var Z=0;Z<d.length;++Z)if(d.indexOf(H.keyPath[Z])===-1)return!1;return!0}return!1}).sort(function(H,Z){return H.keyPath.length-Z.keyPath.length})[0];if(g&&this.db._maxKey!==xn){var A=g.keyPath.slice(0,d.length);return this.where(A).equals(A.map(function(Z){return s[Z]}))}!g&&bt&&console.warn("The query ".concat(JSON.stringify(s)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(d.join("+"),"]"));var w=this.schema.idxByName;function S(H,Z){return at(H,Z)===0}var $=d.reduce(function(O,Z){var I=O[0],L=O[1],O=w[Z],K=s[Z];return[I||O,I||!O?Jn(L,O&&O.multi?function(F){return F=ce(F,Z),f(F)&&F.some(function(q){return S(K,q)})}:function(F){return S(K,ce(F,Z))}):L]},[null,null]),A=$[0],$=$[1];return A?this.where(A.name).equals(s[A.keyPath]).filter($):g?this.filter($):this.where(d).equals("")},At.prototype.filter=function(s){return this.toCollection().and(s)},At.prototype.count=function(s){return this.toCollection().count(s)},At.prototype.offset=function(s){return this.toCollection().offset(s)},At.prototype.limit=function(s){return this.toCollection().limit(s)},At.prototype.each=function(s){return this.toCollection().each(s)},At.prototype.toArray=function(s){return this.toCollection().toArray(s)},At.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},At.prototype.orderBy=function(s){return new this.db.Collection(new this.db.WhereClause(this,f(s)?"[".concat(s.join("+"),"]"):s))},At.prototype.reverse=function(){return this.toCollection().reverse()},At.prototype.mapToClass=function(s){var d,g=this.db,w=this.name;function S(){return d!==null&&d.apply(this,arguments)||this}(this.schema.mappedClass=s).prototype instanceof ra&&(function(Z,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");function L(){this.constructor=Z}n(Z,I),Z.prototype=I===null?Object.create(I):(L.prototype=I.prototype,new L)}(S,d=s),Object.defineProperty(S.prototype,"db",{get:function(){return g},enumerable:!1,configurable:!0}),S.prototype.table=function(){return w},s=S);for(var A=new Set,$=s.prototype;$;$=p($))Object.getOwnPropertyNames($).forEach(function(Z){return A.add(Z)});function H(Z){if(!Z)return Z;var I,L=Object.create(s.prototype);for(I in Z)if(!A.has(I))try{L[I]=Z[I]}catch{}return L}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=H,this.hook("reading",H),s},At.prototype.defineClass=function(){return this.mapToClass(function(s){h(this,s)})},At.prototype.add=function(s,d){var g=this,w=this.schema.primKey,S=w.auto,A=w.keyPath,$=s;return A&&S&&($=Ai(A)(s)),this._trans("readwrite",function(H){return g.core.mutate({trans:H,type:"add",keys:d!=null?[d]:null,values:[$]})}).then(function(H){return H.numFailures?ne.reject(H.failures[0]):H.lastResult}).then(function(H){if(A)try{U(s,A,H)}catch{}return H})},At.prototype.update=function(s,d){return typeof s!="object"||f(s)?this.where(":id").equals(s).modify(d):(s=ce(s,this.schema.primKey.keyPath),s===void 0?Rt(new Ee.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(s).modify(d))},At.prototype.put=function(s,d){var g=this,w=this.schema.primKey,S=w.auto,A=w.keyPath,$=s;return A&&S&&($=Ai(A)(s)),this._trans("readwrite",function(H){return g.core.mutate({trans:H,type:"put",values:[$],keys:d!=null?[d]:null})}).then(function(H){return H.numFailures?ne.reject(H.failures[0]):H.lastResult}).then(function(H){if(A)try{U(s,A,H)}catch{}return H})},At.prototype.delete=function(s){var d=this;return this._trans("readwrite",function(g){return d.core.mutate({trans:g,type:"delete",keys:[s]})}).then(function(g){return g.numFailures?ne.reject(g.failures[0]):void 0})},At.prototype.clear=function(){var s=this;return this._trans("readwrite",function(d){return s.core.mutate({trans:d,type:"deleteRange",range:uo})}).then(function(d){return d.numFailures?ne.reject(d.failures[0]):void 0})},At.prototype.bulkGet=function(s){var d=this;return this._trans("readonly",function(g){return d.core.getMany({keys:s,trans:g}).then(function(w){return w.map(function(S){return d.hook.reading.fire(S)})})})},At.prototype.bulkAdd=function(s,d,g){var w=this,S=Array.isArray(d)?d:void 0,A=(g=g||(S?void 0:d))?g.allKeys:void 0;return this._trans("readwrite",function($){var I=w.schema.primKey,H=I.auto,I=I.keyPath;if(I&&S)throw new Ee.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(S&&S.length!==s.length)throw new Ee.InvalidArgument("Arguments objects and keys must have the same length");var Z=s.length,I=I&&H?s.map(Ai(I)):s;return w.core.mutate({trans:$,type:"add",keys:S,values:I,wantResults:A}).then(function(q){var O=q.numFailures,K=q.results,F=q.lastResult,q=q.failures;if(O===0)return A?K:F;throw new Be("".concat(w.name,".bulkAdd(): ").concat(O," of ").concat(Z," operations failed"),q)})})},At.prototype.bulkPut=function(s,d,g){var w=this,S=Array.isArray(d)?d:void 0,A=(g=g||(S?void 0:d))?g.allKeys:void 0;return this._trans("readwrite",function($){var I=w.schema.primKey,H=I.auto,I=I.keyPath;if(I&&S)throw new Ee.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(S&&S.length!==s.length)throw new Ee.InvalidArgument("Arguments objects and keys must have the same length");var Z=s.length,I=I&&H?s.map(Ai(I)):s;return w.core.mutate({trans:$,type:"put",keys:S,values:I,wantResults:A}).then(function(q){var O=q.numFailures,K=q.results,F=q.lastResult,q=q.failures;if(O===0)return A?K:F;throw new Be("".concat(w.name,".bulkPut(): ").concat(O," of ").concat(Z," operations failed"),q)})})},At.prototype.bulkUpdate=function(s){var d=this,g=this.core,w=s.map(function($){return $.key}),S=s.map(function($){return $.changes}),A=[];return this._trans("readwrite",function($){return g.getMany({trans:$,keys:w,cache:"clone"}).then(function(H){var Z=[],I=[];s.forEach(function(O,K){var F=O.key,q=O.changes,te=H[K];if(te){for(var V=0,de=Object.keys(q);V<de.length;V++){var ve=de[V],me=q[ve];if(ve===d.schema.primKey.keyPath){if(at(me,F)!==0)throw new Ee.Constraint("Cannot update primary key in bulkUpdate()")}else U(te,ve,me)}A.push(K),Z.push(F),I.push(te)}});var L=Z.length;return g.mutate({trans:$,type:"put",keys:Z,values:I,updates:{keys:w,changeSpecs:S}}).then(function(O){var K=O.numFailures,F=O.failures;if(K===0)return L;for(var q=0,te=Object.keys(F);q<te.length;q++){var V,de=te[q],ve=A[Number(de)];ve!=null&&(V=F[de],delete F[de],F[ve]=V)}throw new Be("".concat(d.name,".bulkUpdate(): ").concat(K," of ").concat(L," operations failed"),F)})})})},At.prototype.bulkDelete=function(s){var d=this,g=s.length;return this._trans("readwrite",function(w){return d.core.mutate({trans:w,type:"delete",keys:s})}).then(function($){var S=$.numFailures,A=$.lastResult,$=$.failures;if(S===0)return A;throw new Be("".concat(d.name,".bulkDelete(): ").concat(S," of ").concat(g," operations failed"),$)})},At);function At(){}function ai(s){function d($,H){if(H){for(var Z=arguments.length,I=new Array(Z-1);--Z;)I[Z-1]=arguments[Z];return g[$].subscribe.apply(null,I),s}if(typeof $=="string")return g[$]}var g={};d.addEventType=A;for(var w=1,S=arguments.length;w<S;++w)A(arguments[w]);return d;function A($,H,Z){if(typeof $!="object"){var I;H=H||jt;var L={subscribers:[],fire:Z=Z||Ke,subscribe:function(O){L.subscribers.indexOf(O)===-1&&(L.subscribers.push(O),L.fire=H(L.fire,O))},unsubscribe:function(O){L.subscribers=L.subscribers.filter(function(K){return K!==O}),L.fire=L.subscribers.reduce(H,Z)}};return g[$]=d[$]=L}c(I=$).forEach(function(O){var K=I[O];if(f(K))A(O,I[O][0],I[O][1]);else{if(K!=="asap")throw new Ee.InvalidArgument("Invalid event config");var F=A(O,Tt,function(){for(var q=arguments.length,te=new Array(q);q--;)te[q]=arguments[q];F.subscribers.forEach(function(V){le(function(){V.apply(null,te)})})})}})}}function co(s,d){return E(d).from({prototype:s}),d}function si(s,d){return!(s.filter||s.algorithm||s.or)&&(d?s.justLimit:!s.replayFilter)}function Di(s,d){s.filter=Jn(s.filter,d)}function ia(s,d,g){var w=s.replayFilter;s.replayFilter=w?function(){return Jn(w(),d())}:d,s.justLimit=g&&!w}function oa(s,d){if(s.isPrimKey)return d.primaryKey;var g=d.getIndexByKeyPath(s.index);if(!g)throw new Ee.Schema("KeyPath "+s.index+" on object store "+d.name+" is not indexed");return g}function Ja(s,d,g){var w=oa(s,d.schema);return d.openCursor({trans:g,values:!s.keysOnly,reverse:s.dir==="prev",unique:!!s.unique,query:{index:w,range:s.range}})}function lo(s,d,g,w){var S=s.replayFilter?Jn(s.filter,s.replayFilter()):s.filter;if(s.or){var A={},$=function(H,Z,I){var L,O;S&&!S(Z,I,function(K){return Z.stop(K)},function(K){return Z.fail(K)})||((O=""+(L=Z.primaryKey))=="[object ArrayBuffer]"&&(O=""+new Uint8Array(L)),y(A,O)||(A[O]=!0,d(H,Z,I)))};return Promise.all([s.or._iterate($,g),aa(Ja(s,w,g),s.algorithm,$,!s.keysOnly&&s.valueMapper)])}return aa(Ja(s,w,g),Jn(s.algorithm,S),d,!s.keysOnly&&s.valueMapper)}function aa(s,d,g,w){var S=St(w?function(A,$,H){return g(w(A),$,H)}:g);return s.then(function(A){if(A)return A.start(function(){var $=function(){return A.continue()};d&&!d(A,function(H){return $=H},function(H){A.stop(H),$=Ke},function(H){A.fail(H),$=Ke})||S(A.value,A,function(H){return $=H}),$()})})}var Tr=Symbol(),Pi=(sa.prototype.execute=function(s){if(this.add!==void 0){var d=this.add;if(f(d))return a(a([],f(s)?s:[],!0),d).sort();if(typeof d=="number")return(Number(s)||0)+d;if(typeof d=="bigint")try{return BigInt(s)+d}catch{return BigInt(0)+d}throw new TypeError("Invalid term ".concat(d))}if(this.remove!==void 0){var g=this.remove;if(f(g))return f(s)?s.filter(function(w){return!g.includes(w)}).sort():[];if(typeof g=="number")return Number(s)-g;if(typeof g=="bigint")try{return BigInt(s)-g}catch{return BigInt(0)-g}throw new TypeError("Invalid subtrahend ".concat(g))}return d=(d=this.replacePrefix)===null||d===void 0?void 0:d[0],d&&typeof s=="string"&&s.startsWith(d)?this.replacePrefix[1]+s.substring(d.length):s},sa);function sa(s){Object.assign(this,s)}var es=(dt.prototype._read=function(s,d){var g=this._ctx;return g.error?g.table._trans(null,Rt.bind(null,g.error)):g.table._trans("readonly",s).then(d)},dt.prototype._write=function(s){var d=this._ctx;return d.error?d.table._trans(null,Rt.bind(null,d.error)):d.table._trans("readwrite",s,"locked")},dt.prototype._addAlgorithm=function(s){var d=this._ctx;d.algorithm=Jn(d.algorithm,s)},dt.prototype._iterate=function(s,d){return lo(this._ctx,s,d,this._ctx.table.core)},dt.prototype.clone=function(s){var d=Object.create(this.constructor.prototype),g=Object.create(this._ctx);return s&&h(g,s),d._ctx=g,d},dt.prototype.raw=function(){return this._ctx.valueMapper=null,this},dt.prototype.each=function(s){var d=this._ctx;return this._read(function(g){return lo(d,s,g,d.table.core)})},dt.prototype.count=function(s){var d=this;return this._read(function(g){var w=d._ctx,S=w.table.core;if(si(w,!0))return S.count({trans:g,query:{index:oa(w,S.schema),range:w.range}}).then(function($){return Math.min($,w.limit)});var A=0;return lo(w,function(){return++A,!1},g,S).then(function(){return A})}).then(s)},dt.prototype.sortBy=function(s,d){var g=s.split(".").reverse(),w=g[0],S=g.length-1;function A(Z,I){return I?A(Z[g[I]],I-1):Z[w]}var $=this._ctx.dir==="next"?1:-1;function H(Z,I){return at(A(Z,S),A(I,S))*$}return this.toArray(function(Z){return Z.sort(H)}).then(d)},dt.prototype.toArray=function(s){var d=this;return this._read(function(g){var w=d._ctx;if(w.dir==="next"&&si(w,!0)&&0<w.limit){var S=w.valueMapper,A=oa(w,w.table.core.schema);return w.table.core.query({trans:g,limit:w.limit,values:!0,query:{index:A,range:w.range}}).then(function(H){return H=H.result,S?H.map(S):H})}var $=[];return lo(w,function(H){return $.push(H)},g,w.table.core).then(function(){return $})},s)},dt.prototype.offset=function(s){var d=this._ctx;return s<=0||(d.offset+=s,si(d)?ia(d,function(){var g=s;return function(w,S){return g===0||(g===1?--g:S(function(){w.advance(g),g=0}),!1)}}):ia(d,function(){var g=s;return function(){return--g<0}})),this},dt.prototype.limit=function(s){return this._ctx.limit=Math.min(this._ctx.limit,s),ia(this._ctx,function(){var d=s;return function(g,w,S){return--d<=0&&w(S),0<=d}},!0),this},dt.prototype.until=function(s,d){return Di(this._ctx,function(g,w,S){return!s(g.value)||(w(S),d)}),this},dt.prototype.first=function(s){return this.limit(1).toArray(function(d){return d[0]}).then(s)},dt.prototype.last=function(s){return this.reverse().first(s)},dt.prototype.filter=function(s){var d;return Di(this._ctx,function(g){return s(g.value)}),(d=this._ctx).isMatch=Jn(d.isMatch,s),this},dt.prototype.and=function(s){return this.filter(s)},dt.prototype.or=function(s){return new this.db.WhereClause(this._ctx.table,s,this)},dt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},dt.prototype.desc=function(){return this.reverse()},dt.prototype.eachKey=function(s){var d=this._ctx;return d.keysOnly=!d.isMatch,this.each(function(g,w){s(w.key,w)})},dt.prototype.eachUniqueKey=function(s){return this._ctx.unique="unique",this.eachKey(s)},dt.prototype.eachPrimaryKey=function(s){var d=this._ctx;return d.keysOnly=!d.isMatch,this.each(function(g,w){s(w.primaryKey,w)})},dt.prototype.keys=function(s){var d=this._ctx;d.keysOnly=!d.isMatch;var g=[];return this.each(function(w,S){g.push(S.key)}).then(function(){return g}).then(s)},dt.prototype.primaryKeys=function(s){var d=this._ctx;if(d.dir==="next"&&si(d,!0)&&0<d.limit)return this._read(function(w){var S=oa(d,d.table.core.schema);return d.table.core.query({trans:w,values:!1,limit:d.limit,query:{index:S,range:d.range}})}).then(function(w){return w.result}).then(s);d.keysOnly=!d.isMatch;var g=[];return this.each(function(w,S){g.push(S.primaryKey)}).then(function(){return g}).then(s)},dt.prototype.uniqueKeys=function(s){return this._ctx.unique="unique",this.keys(s)},dt.prototype.firstKey=function(s){return this.limit(1).keys(function(d){return d[0]}).then(s)},dt.prototype.lastKey=function(s){return this.reverse().firstKey(s)},dt.prototype.distinct=function(){var s=this._ctx,s=s.index&&s.table.schema.idxByName[s.index];if(!s||!s.multi)return this;var d={};return Di(this._ctx,function(S){var w=S.primaryKey.toString(),S=y(d,w);return d[w]=!0,!S}),this},dt.prototype.modify=function(s){var d=this,g=this._ctx;return this._write(function(w){var S,A,$;$=typeof s=="function"?s:(S=c(s),A=S.length,function(V){for(var de=!1,ve=0;ve<A;++ve){var me=S[ve],xe=s[me],Ce=ce(V,me);xe instanceof Pi?(U(V,me,xe.execute(Ce)),de=!0):Ce!==xe&&(U(V,me,xe),de=!0)}return de});var H=g.table.core,O=H.schema.primaryKey,Z=O.outbound,I=O.extractKey,L=200,O=d.db._options.modifyChunkSize;O&&(L=typeof O=="object"?O[H.name]||O["*"]||200:O);function K(V,me){var ve=me.failures,me=me.numFailures;q+=V-me;for(var xe=0,Ce=c(ve);xe<Ce.length;xe++){var De=Ce[xe];F.push(ve[De])}}var F=[],q=0,te=[];return d.clone().primaryKeys().then(function(V){function de(me){var xe=Math.min(L,V.length-me);return H.getMany({trans:w,keys:V.slice(me,me+xe),cache:"immutable"}).then(function(Ce){for(var De=[],Ie=[],Ae=Z?[]:null,Se=[],Pe=0;Pe<xe;++Pe){var je=Ce[Pe],tt={value:ge(je),primKey:V[me+Pe]};$.call(tt,tt.value,tt)!==!1&&(tt.value==null?Se.push(V[me+Pe]):Z||at(I(je),I(tt.value))===0?(Ie.push(tt.value),Z&&Ae.push(V[me+Pe])):(Se.push(V[me+Pe]),De.push(tt.value)))}return Promise.resolve(0<De.length&&H.mutate({trans:w,type:"add",values:De}).then(function(ut){for(var ct in ut.failures)Se.splice(parseInt(ct),1);K(De.length,ut)})).then(function(){return(0<Ie.length||ve&&typeof s=="object")&&H.mutate({trans:w,type:"put",keys:Ae,values:Ie,criteria:ve,changeSpec:typeof s!="function"&&s,isAdditionalChunk:0<me}).then(function(ut){return K(Ie.length,ut)})}).then(function(){return(0<Se.length||ve&&s===ua)&&H.mutate({trans:w,type:"delete",keys:Se,criteria:ve,isAdditionalChunk:0<me}).then(function(ut){return K(Se.length,ut)})}).then(function(){return V.length>me+xe&&de(me+L)})})}var ve=si(g)&&g.limit===1/0&&(typeof s!="function"||s===ua)&&{index:g.index,range:g.range};return de(0).then(function(){if(0<F.length)throw new Re("Error modifying one or more objects",F,q,te);return V.length})})})},dt.prototype.delete=function(){var s=this._ctx,d=s.range;return si(s)&&(s.isPrimKey||d.type===3)?this._write(function(g){var w=s.table.core.schema.primaryKey,S=d;return s.table.core.count({trans:g,query:{index:w,range:S}}).then(function(A){return s.table.core.mutate({trans:g,type:"deleteRange",range:S}).then(function($){var H=$.failures;if($.lastResult,$.results,$=$.numFailures,$)throw new Re("Could not delete some values",Object.keys(H).map(function(Z){return H[Z]}),A-$);return A-$})})}):this.modify(ua)},dt);function dt(){}var ua=function(s,d){return d.value=null};function xu(s,d){return s<d?-1:s===d?0:1}function kl(s,d){return d<s?-1:s===d?0:1}function kn(s,d,g){return s=s instanceof _u?new s.Collection(s):s,s._ctx.error=new(g||TypeError)(d),s}function ui(s){return new s.Collection(s,function(){return bu("")}).limit(0)}function fo(s,d,g,w){var S,A,$,H,Z,I,L,O=g.length;if(!g.every(function(q){return typeof q=="string"}))return kn(s,oi);function K(q){S=q==="next"?function(V){return V.toUpperCase()}:function(V){return V.toLowerCase()},A=q==="next"?function(V){return V.toLowerCase()}:function(V){return V.toUpperCase()},$=q==="next"?xu:kl;var te=g.map(function(V){return{lower:A(V),upper:S(V)}}).sort(function(V,de){return $(V.lower,de.lower)});H=te.map(function(V){return V.upper}),Z=te.map(function(V){return V.lower}),L=(I=q)==="next"?"":w}K("next"),s=new s.Collection(s,function(){return Nr(H[0],Z[O-1]+w)}),s._ondirectionchange=function(q){K(q)};var F=0;return s._addAlgorithm(function(q,te,V){var de=q.key;if(typeof de!="string")return!1;var ve=A(de);if(d(ve,Z,F))return!0;for(var me=null,xe=F;xe<O;++xe){var Ce=function(De,Ie,Ae,Se,Pe,je){for(var tt=Math.min(De.length,Se.length),ut=-1,ct=0;ct<tt;++ct){var Mn=Ie[ct];if(Mn!==Se[ct])return Pe(De[ct],Ae[ct])<0?De.substr(0,ct)+Ae[ct]+Ae.substr(ct+1):Pe(De[ct],Se[ct])<0?De.substr(0,ct)+Se[ct]+Ae.substr(ct+1):0<=ut?De.substr(0,ut)+Ie[ut]+Ae.substr(ut+1):null;Pe(De[ct],Mn)<0&&(ut=ct)}return tt<Se.length&&je==="next"?De+Ae.substr(De.length):tt<De.length&&je==="prev"?De.substr(0,Ae.length):ut<0?null:De.substr(0,ut)+Se[ut]+Ae.substr(ut+1)}(de,ve,H[xe],Z[xe],$,I);Ce===null&&me===null?F=xe+1:(me===null||0<$(me,Ce))&&(me=Ce)}return te(me!==null?function(){q.continue(me+L)}:V),!1}),s}function Nr(s,d,g,w){return{type:2,lower:s,upper:d,lowerOpen:g,upperOpen:w}}function bu(s){return{type:1,lower:s,upper:s}}var _u=(Object.defineProperty(fn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),fn.prototype.between=function(s,d,g,w){g=g!==!1,w=w===!0;try{return 0<this._cmp(s,d)||this._cmp(s,d)===0&&(g||w)&&(!g||!w)?ui(this):new this.Collection(this,function(){return Nr(s,d,!g,!w)})}catch{return kn(this,Qn)}},fn.prototype.equals=function(s){return s==null?kn(this,Qn):new this.Collection(this,function(){return bu(s)})},fn.prototype.above=function(s){return s==null?kn(this,Qn):new this.Collection(this,function(){return Nr(s,void 0,!0)})},fn.prototype.aboveOrEqual=function(s){return s==null?kn(this,Qn):new this.Collection(this,function(){return Nr(s,void 0,!1)})},fn.prototype.below=function(s){return s==null?kn(this,Qn):new this.Collection(this,function(){return Nr(void 0,s,!1,!0)})},fn.prototype.belowOrEqual=function(s){return s==null?kn(this,Qn):new this.Collection(this,function(){return Nr(void 0,s)})},fn.prototype.startsWith=function(s){return typeof s!="string"?kn(this,oi):this.between(s,s+xn,!0,!0)},fn.prototype.startsWithIgnoreCase=function(s){return s===""?this.startsWith(s):fo(this,function(d,g){return d.indexOf(g[0])===0},[s],xn)},fn.prototype.equalsIgnoreCase=function(s){return fo(this,function(d,g){return d===g[0]},[s],"")},fn.prototype.anyOfIgnoreCase=function(){var s=ae.apply(W,arguments);return s.length===0?ui(this):fo(this,function(d,g){return g.indexOf(d)!==-1},s,"")},fn.prototype.startsWithAnyOfIgnoreCase=function(){var s=ae.apply(W,arguments);return s.length===0?ui(this):fo(this,function(d,g){return g.some(function(w){return d.indexOf(w)===0})},s,xn)},fn.prototype.anyOf=function(){var s=this,d=ae.apply(W,arguments),g=this._cmp;try{d.sort(g)}catch{return kn(this,Qn)}if(d.length===0)return ui(this);var w=new this.Collection(this,function(){return Nr(d[0],d[d.length-1])});w._ondirectionchange=function(A){g=A==="next"?s._ascending:s._descending,d.sort(g)};var S=0;return w._addAlgorithm(function(A,$,H){for(var Z=A.key;0<g(Z,d[S]);)if(++S===d.length)return $(H),!1;return g(Z,d[S])===0||($(function(){A.continue(d[S])}),!1)}),w},fn.prototype.notEqual=function(s){return this.inAnyRange([[-1/0,s],[s,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},fn.prototype.noneOf=function(){var s=ae.apply(W,arguments);if(s.length===0)return new this.Collection(this);try{s.sort(this._ascending)}catch{return kn(this,Qn)}var d=s.reduce(function(g,w){return g?g.concat([[g[g.length-1][1],w]]):[[-1/0,w]]},null);return d.push([s[s.length-1],this.db._maxKey]),this.inAnyRange(d,{includeLowers:!1,includeUppers:!1})},fn.prototype.inAnyRange=function(de,d){var g=this,w=this._cmp,S=this._ascending,A=this._descending,$=this._min,H=this._max;if(de.length===0)return ui(this);if(!de.every(function(ve){return ve[0]!==void 0&&ve[1]!==void 0&&S(ve[0],ve[1])<=0}))return kn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ee.InvalidArgument);var Z=!d||d.includeLowers!==!1,I=d&&d.includeUppers===!0,L,O=S;function K(ve,me){return O(ve[0],me[0])}try{(L=de.reduce(function(ve,me){for(var xe=0,Ce=ve.length;xe<Ce;++xe){var De=ve[xe];if(w(me[0],De[1])<0&&0<w(me[1],De[0])){De[0]=$(De[0],me[0]),De[1]=H(De[1],me[1]);break}}return xe===Ce&&ve.push(me),ve},[])).sort(K)}catch{return kn(this,Qn)}var F=0,q=I?function(ve){return 0<S(ve,L[F][1])}:function(ve){return 0<=S(ve,L[F][1])},te=Z?function(ve){return 0<A(ve,L[F][0])}:function(ve){return 0<=A(ve,L[F][0])},V=q,de=new this.Collection(this,function(){return Nr(L[0][0],L[L.length-1][1],!Z,!I)});return de._ondirectionchange=function(ve){O=ve==="next"?(V=q,S):(V=te,A),L.sort(K)},de._addAlgorithm(function(ve,me,xe){for(var Ce,De=ve.key;V(De);)if(++F===L.length)return me(xe),!1;return!q(Ce=De)&&!te(Ce)||(g._cmp(De,L[F][1])===0||g._cmp(De,L[F][0])===0||me(function(){O===S?ve.continue(L[F][0]):ve.continue(L[F][1])}),!1)}),de},fn.prototype.startsWithAnyOf=function(){var s=ae.apply(W,arguments);return s.every(function(d){return typeof d=="string"})?s.length===0?ui(this):this.inAnyRange(s.map(function(d){return[d,d+xn]})):kn(this,"startsWithAnyOf() only works with strings")},fn);function fn(){}function er(s){return St(function(d){return ho(d),s(d.target.error),!1})}function ho(s){s.stopPropagation&&s.stopPropagation(),s.preventDefault&&s.preventDefault()}var po="storagemutated",ts="x-storagemutated-1",Yr=ai(null,po),ns=(hr.prototype._lock=function(){return B(!Fe.global),++this._reculock,this._reculock!==1||Fe.global||(Fe.lockOwnerFor=this),this},hr.prototype._unlock=function(){if(B(!Fe.global),--this._reculock==0)for(Fe.global||(Fe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var s=this._blockedFuncs.shift();try{Xt(s[1],s[0])}catch{}}return this},hr.prototype._locked=function(){return this._reculock&&Fe.lockOwnerFor!==this},hr.prototype.create=function(s){var d=this;if(!this.mode)return this;var g=this.db.idbdb,w=this.db._state.dbOpenError;if(B(!this.idbtrans),!s&&!g)switch(w&&w.name){case"DatabaseClosedError":throw new Ee.DatabaseClosed(w);case"MissingAPIError":throw new Ee.MissingAPI(w.message,w);default:throw new Ee.OpenFailed(w)}if(!this.active)throw new Ee.TransactionInactive;return B(this._completion._state===null),(s=this.idbtrans=s||(this.db.core||g).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=St(function(S){ho(S),d._reject(s.error)}),s.onabort=St(function(S){ho(S),d.active&&d._reject(new Ee.Abort(s.error)),d.active=!1,d.on("abort").fire(S)}),s.oncomplete=St(function(){d.active=!1,d._resolve(),"mutatedParts"in s&&Yr.storagemutated.fire(s.mutatedParts)}),this},hr.prototype._promise=function(s,d,g){var w=this;if(s==="readwrite"&&this.mode!=="readwrite")return Rt(new Ee.ReadOnly("Transaction is readonly"));if(!this.active)return Rt(new Ee.TransactionInactive);if(this._locked())return new ne(function(A,$){w._blockedFuncs.push([function(){w._promise(s,d,g).then(A,$)},Fe])});if(g)return Nn(function(){var A=new ne(function($,H){w._lock();var Z=d($,H,w);Z&&Z.then&&Z.then($,H)});return A.finally(function(){return w._unlock()}),A._lib=!0,A});var S=new ne(function(A,$){var H=d(A,$,w);H&&H.then&&H.then(A,$)});return S._lib=!0,S},hr.prototype._root=function(){return this.parent?this.parent._root():this},hr.prototype.waitFor=function(s){var d,g=this._root(),w=ne.resolve(s);g._waitingFor?g._waitingFor=g._waitingFor.then(function(){return w}):(g._waitingFor=w,g._waitingQueue=[],d=g.idbtrans.objectStore(g.storeNames[0]),function A(){for(++g._spinCount;g._waitingQueue.length;)g._waitingQueue.shift()();g._waitingFor&&(d.get(-1/0).onsuccess=A)}());var S=g._waitingFor;return new ne(function(A,$){w.then(function(H){return g._waitingQueue.push(St(A.bind(null,H)))},function(H){return g._waitingQueue.push(St($.bind(null,H)))}).finally(function(){g._waitingFor===S&&(g._waitingFor=null)})})},hr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ee.Abort))},hr.prototype.table=function(s){var d=this._memoizedTables||(this._memoizedTables={});if(y(d,s))return d[s];var g=this.schema[s];if(!g)throw new Ee.NotFound("Table "+s+" not part of transaction");return g=new this.db.Table(s,g,this),g.core=this.db.core.table(s),d[s]=g},hr);function hr(){}function rs(s,d,g,w,S,A,$){return{name:s,keyPath:d,unique:g,multi:w,auto:S,compound:A,src:(g&&!$?"&":"")+(w?"*":"")+(S?"++":"")+Eu(d)}}function Eu(s){return typeof s=="string"?s:s?"["+[].join.call(s,"+")+"]":""}function is(s,d,g){return{name:s,primKey:d,indexes:g,mappedClass:null,idxByName:(w=function(S){return[S.name,S]},g.reduce(function(S,A,$){return $=w(A,$),$&&(S[$[0]]=$[1]),S},{}))};var w}var mo=function(s){try{return s.only([[]]),mo=function(){return[[]]},[[]]}catch{return mo=function(){return xn},xn}};function It(s){return s==null?function(){}:typeof s=="string"?(d=s).split(".").length===1?function(g){return g[d]}:function(g){return ce(g,d)}:function(g){return ce(g,s)};var d}function Ct(s){return[].slice.call(s)}var Il=0;function go(s){return s==null?":id":typeof s=="string"?s:"[".concat(s.join("+"),"]")}function Cl(s,d,Z){function w(V){if(V.type===3)return null;if(V.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var F=V.lower,q=V.upper,te=V.lowerOpen,V=V.upperOpen;return F===void 0?q===void 0?null:d.upperBound(q,!!V):q===void 0?d.lowerBound(F,!!te):d.bound(F,q,!!te,!!V)}function S(K){var F,q=K.name;return{name:q,schema:K,mutate:function(te){var V=te.trans,de=te.type,ve=te.keys,me=te.values,xe=te.range;return new Promise(function(Ce,De){Ce=St(Ce);var Ie=V.objectStore(q),Ae=Ie.keyPath==null,Se=de==="put"||de==="add";if(!Se&&de!=="delete"&&de!=="deleteRange")throw new Error("Invalid operation type: "+de);var Pe,je=(ve||me||{length:1}).length;if(ve&&me&&ve.length!==me.length)throw new Error("Given keys array must have same length as given values array.");if(je===0)return Ce({numFailures:0,failures:{},results:[],lastResult:void 0});function tt(dn){++Mn,ho(dn)}var ut=[],ct=[],Mn=0;if(de==="deleteRange"){if(xe.type===4)return Ce({numFailures:Mn,failures:ct,results:[],lastResult:void 0});xe.type===3?ut.push(Pe=Ie.clear()):ut.push(Pe=Ie.delete(w(xe)))}else{var Ae=Se?Ae?[me,ve]:[me,null]:[ve,null],et=Ae[0],Ft=Ae[1];if(Se)for(var rn=0;rn<je;++rn)ut.push(Pe=Ft&&Ft[rn]!==void 0?Ie[de](et[rn],Ft[rn]):Ie[de](et[rn])),Pe.onerror=tt;else for(rn=0;rn<je;++rn)ut.push(Pe=Ie[de](et[rn])),Pe.onerror=tt}function ko(dn){dn=dn.target.result,ut.forEach(function(qr,wa){return qr.error!=null&&(ct[wa]=qr.error)}),Ce({numFailures:Mn,failures:ct,results:de==="delete"?ve:ut.map(function(qr){return qr.result}),lastResult:dn})}Pe.onerror=function(dn){tt(dn),ko(dn)},Pe.onsuccess=ko})},getMany:function(te){var V=te.trans,de=te.keys;return new Promise(function(ve,me){ve=St(ve);for(var xe,Ce=V.objectStore(q),De=de.length,Ie=new Array(De),Ae=0,Se=0,Pe=function(ut){ut=ut.target,Ie[ut._pos]=ut.result,++Se===Ae&&ve(Ie)},je=er(me),tt=0;tt<De;++tt)de[tt]!=null&&((xe=Ce.get(de[tt]))._pos=tt,xe.onsuccess=Pe,xe.onerror=je,++Ae);Ae===0&&ve(Ie)})},get:function(te){var V=te.trans,de=te.key;return new Promise(function(ve,me){ve=St(ve);var xe=V.objectStore(q).get(de);xe.onsuccess=function(Ce){return ve(Ce.target.result)},xe.onerror=er(me)})},query:(F=I,function(te){return new Promise(function(V,de){V=St(V);var ve,me,xe,Ae=te.trans,Ce=te.values,De=te.limit,Pe=te.query,Ie=De===1/0?void 0:De,Se=Pe.index,Pe=Pe.range,Ae=Ae.objectStore(q),Se=Se.isPrimaryKey?Ae:Ae.index(Se.name),Pe=w(Pe);if(De===0)return V({result:[]});F?((Ie=Ce?Se.getAll(Pe,Ie):Se.getAllKeys(Pe,Ie)).onsuccess=function(je){return V({result:je.target.result})},Ie.onerror=er(de)):(ve=0,me=!Ce&&"openKeyCursor"in Se?Se.openKeyCursor(Pe):Se.openCursor(Pe),xe=[],me.onsuccess=function(je){var tt=me.result;return tt?(xe.push(Ce?tt.value:tt.primaryKey),++ve===De?V({result:xe}):void tt.continue()):V({result:xe})},me.onerror=er(de))})}),openCursor:function(te){var V=te.trans,de=te.values,ve=te.query,me=te.reverse,xe=te.unique;return new Promise(function(Ce,De){Ce=St(Ce);var Se=ve.index,Ie=ve.range,Ae=V.objectStore(q),Ae=Se.isPrimaryKey?Ae:Ae.index(Se.name),Se=me?xe?"prevunique":"prev":xe?"nextunique":"next",Pe=!de&&"openKeyCursor"in Ae?Ae.openKeyCursor(w(Ie),Se):Ae.openCursor(w(Ie),Se);Pe.onerror=er(De),Pe.onsuccess=St(function(je){var tt,ut,ct,Mn,et=Pe.result;et?(et.___id=++Il,et.done=!1,tt=et.continue.bind(et),ut=(ut=et.continuePrimaryKey)&&ut.bind(et),ct=et.advance.bind(et),Mn=function(){throw new Error("Cursor not stopped")},et.trans=V,et.stop=et.continue=et.continuePrimaryKey=et.advance=function(){throw new Error("Cursor not started")},et.fail=St(De),et.next=function(){var Ft=this,rn=1;return this.start(function(){return rn--?Ft.continue():Ft.stop()}).then(function(){return Ft})},et.start=function(Ft){function rn(){if(Pe.result)try{Ft()}catch(dn){et.fail(dn)}else et.done=!0,et.start=function(){throw new Error("Cursor behind last entry")},et.stop()}var ko=new Promise(function(dn,qr){dn=St(dn),Pe.onerror=er(qr),et.fail=qr,et.stop=function(wa){et.stop=et.continue=et.continuePrimaryKey=et.advance=Mn,dn(wa)}});return Pe.onsuccess=St(function(dn){Pe.onsuccess=rn,rn()}),et.continue=tt,et.continuePrimaryKey=ut,et.advance=ct,rn(),ko},Ce(et)):Ce(null)},De)})},count:function(te){var V=te.query,de=te.trans,ve=V.index,me=V.range;return new Promise(function(xe,Ce){var De=de.objectStore(q),Ie=ve.isPrimaryKey?De:De.index(ve.name),De=w(me),Ie=De?Ie.count(De):Ie.count();Ie.onsuccess=St(function(Ae){return xe(Ae.target.result)}),Ie.onerror=er(Ce)})}}}var A,$,H,L=($=Z,H=Ct((A=s).objectStoreNames),{schema:{name:A.name,tables:H.map(function(K){return $.objectStore(K)}).map(function(K){var F=K.keyPath,V=K.autoIncrement,q=f(F),te={},V={name:K.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:F==null,compound:q,keyPath:F,autoIncrement:V,unique:!0,extractKey:It(F)},indexes:Ct(K.indexNames).map(function(de){return K.index(de)}).map(function(xe){var ve=xe.name,me=xe.unique,Ce=xe.multiEntry,xe=xe.keyPath,Ce={name:ve,compound:f(xe),keyPath:xe,unique:me,multiEntry:Ce,extractKey:It(xe)};return te[go(xe)]=Ce}),getIndexByKeyPath:function(de){return te[go(de)]}};return te[":id"]=V.primaryKey,F!=null&&(te[go(F)]=V.primaryKey),V})},hasGetAll:0<H.length&&"getAll"in $.objectStore(H[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),Z=L.schema,I=L.hasGetAll,L=Z.tables.map(S),O={};return L.forEach(function(K){return O[K.name]=K}),{stack:"dbcore",transaction:s.transaction.bind(s),table:function(K){if(!O[K])throw new Error("Table '".concat(K,"' not found"));return O[K]},MIN_KEY:-1/0,MAX_KEY:mo(d),schema:Z}}function Ol(s,d,g,w){var S=g.IDBKeyRange;return g.indexedDB,{dbcore:(w=Cl(d,S,w),s.dbcore.reduce(function(A,$){return $=$.create,i(i({},A),$(A))},w))}}function ca(s,w){var g=w.db,w=Ol(s._middlewares,g,s._deps,w);s.core=w.dbcore,s.tables.forEach(function(S){var A=S.name;s.core.schema.tables.some(function($){return $.name===A})&&(S.core=s.core.table(A),s[A]instanceof s.Table&&(s[A].core=S.core))})}function la(s,d,g,w){g.forEach(function(S){var A=w[S];d.forEach(function($){var H=function Z(I,L){return C(I,L)||(I=p(I))&&Z(I,L)}($,S);(!H||"value"in H&&H.value===void 0)&&($===s.Transaction.prototype||$ instanceof s.Transaction?N($,S,{get:function(){return this.table(S)},set:function(Z){b(this,S,{value:Z,writable:!0,configurable:!0,enumerable:!0})}}):$[S]=new s.Table(S,A))})})}function fa(s,d){d.forEach(function(g){for(var w in g)g[w]instanceof s.Table&&delete g[w]})}function Al(s,d){return s._cfg.version-d._cfg.version}function pn(s,d,g,w){var S=s._dbSchema;g.objectStoreNames.contains("$meta")&&!S.$meta&&(S.$meta=is("$meta",as("")[0],[]),s._storeNames.push("$meta"));var A=s._createTransaction("readwrite",s._storeNames,S);A.create(g),A._completion.catch(w);var $=A._reject.bind(A),H=Fe.transless||Fe;Nn(function(){return Fe.trans=A,Fe.transless=H,d!==0?(ca(s,g),I=d,((Z=A).storeNames.includes("$meta")?Z.table("$meta").get("version").then(function(L){return L??I}):ne.resolve(I)).then(function(L){return K=L,F=A,q=g,te=[],L=(O=s)._versions,V=O._dbSchema=vo(0,O.idbdb,q),(L=L.filter(function(de){return de._cfg.version>=K})).length!==0?(L.forEach(function(de){te.push(function(){var ve=V,me=de._cfg.dbschema;yo(O,ve,q),yo(O,me,q),V=O._dbSchema=me;var xe=kr(ve,me);xe.add.forEach(function(Se){da(q,Se[0],Se[1].primKey,Se[1].indexes)}),xe.change.forEach(function(Se){if(Se.recreate)throw new Ee.Upgrade("Not yet support for changing primary key");var Pe=q.objectStore(Se.name);Se.add.forEach(function(je){return bn(Pe,je)}),Se.change.forEach(function(je){Pe.deleteIndex(je.name),bn(Pe,je)}),Se.del.forEach(function(je){return Pe.deleteIndex(je)})});var Ce=de._cfg.contentUpgrade;if(Ce&&de._cfg.version>K){ca(O,q),F._memoizedTables={};var De=J(me);xe.del.forEach(function(Se){De[Se]=ve[Se]}),fa(O,[O.Transaction.prototype]),la(O,[O.Transaction.prototype],c(De),De),F.schema=De;var Ie,Ae=fe(Ce);return Ae&&Zn(),xe=ne.follow(function(){var Se;(Ie=Ce(F))&&Ae&&(Se=Rn.bind(null,null),Ie.then(Se,Se))}),Ie&&typeof Ie.then=="function"?ne.resolve(Ie):xe.then(function(){return Ie})}}),te.push(function(ve){var me,xe,Ce=de._cfg.dbschema;me=Ce,xe=ve,[].slice.call(xe.db.objectStoreNames).forEach(function(De){return me[De]==null&&xe.db.deleteObjectStore(De)}),fa(O,[O.Transaction.prototype]),la(O,[O.Transaction.prototype],O._storeNames,O._dbSchema),F.schema=O._dbSchema}),te.push(function(ve){O.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(O.idbdb.version/10)===de._cfg.version?(O.idbdb.deleteObjectStore("$meta"),delete O._dbSchema.$meta,O._storeNames=O._storeNames.filter(function(me){return me!=="$meta"})):ve.objectStore("$meta").put(de._cfg.version,"version"))})}),function de(){return te.length?ne.resolve(te.shift()(F.idbtrans)).then(de):ne.resolve()}().then(function(){ha(V,q)})):ne.resolve();var O,K,F,q,te,V}).catch($)):(c(S).forEach(function(L){da(g,L,S[L].primKey,S[L].indexes)}),ca(s,g),void ne.follow(function(){return s.on.populate.fire(A)}).catch($));var Z,I})}function os(s,d){ha(s._dbSchema,d),d.db.version%10!=0||d.objectStoreNames.contains("$meta")||d.db.createObjectStore("$meta").add(Math.ceil(d.db.version/10-1),"version");var g=vo(0,s.idbdb,d);yo(s,s._dbSchema,d);for(var w=0,S=kr(g,s._dbSchema).change;w<S.length;w++){var A=function($){if($.change.length||$.recreate)return console.warn("Unable to patch indexes of table ".concat($.name," because it has changes on the type of index or primary key.")),{value:void 0};var H=d.objectStore($.name);$.add.forEach(function(Z){bt&&console.debug("Dexie upgrade patch: Creating missing index ".concat($.name,".").concat(Z.src)),bn(H,Z)})}(S[w]);if(typeof A=="object")return A.value}}function kr(s,d){var g,w={del:[],add:[],change:[]};for(g in s)d[g]||w.del.push(g);for(g in d){var S=s[g],A=d[g];if(S){var $={name:g,def:A,recreate:!1,del:[],add:[],change:[]};if(""+(S.primKey.keyPath||"")!=""+(A.primKey.keyPath||"")||S.primKey.auto!==A.primKey.auto)$.recreate=!0,w.change.push($);else{var H=S.idxByName,Z=A.idxByName,I=void 0;for(I in H)Z[I]||$.del.push(I);for(I in Z){var L=H[I],O=Z[I];L?L.src!==O.src&&$.change.push(O):$.add.push(O)}(0<$.del.length||0<$.add.length||0<$.change.length)&&w.change.push($)}}else w.add.push([g,A])}return w}function da(s,d,g,w){var S=s.db.createObjectStore(d,g.keyPath?{keyPath:g.keyPath,autoIncrement:g.auto}:{autoIncrement:g.auto});return w.forEach(function(A){return bn(S,A)}),S}function ha(s,d){c(s).forEach(function(g){d.db.objectStoreNames.contains(g)||(bt&&console.debug("Dexie: Creating missing table",g),da(d,g,s[g].primKey,s[g].indexes))})}function bn(s,d){s.createIndex(d.name,d.keyPath,{unique:d.unique,multiEntry:d.multi})}function vo(s,d,g){var w={};return z(d.objectStoreNames,0).forEach(function(S){for(var A=g.objectStore(S),$=rs(Eu(I=A.keyPath),I||"",!0,!1,!!A.autoIncrement,I&&typeof I!="string",!0),H=[],Z=0;Z<A.indexNames.length;++Z){var L=A.index(A.indexNames[Z]),I=L.keyPath,L=rs(L.name,I,!!L.unique,!!L.multiEntry,!1,I&&typeof I!="string",!1);H.push(L)}w[S]=is(S,$,H)}),w}function yo(s,d,g){for(var w=g.db.objectStoreNames,S=0;S<w.length;++S){var A=w[S],$=g.objectStore(A);s._hasGetAll="getAll"in $;for(var H=0;H<$.indexNames.length;++H){var Z=$.indexNames[H],I=$.index(Z).keyPath,L=typeof I=="string"?I:"["+z(I).join("+")+"]";!d[A]||(I=d[A].idxByName[L])&&(I.name=Z,delete d[A].idxByName[L],d[A].idxByName[Z]=I)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(s._hasGetAll=!1)}function as(s){return s.split(",").map(function(d,g){var w=(d=d.trim()).replace(/([&*]|\+\+)/g,""),S=/^\[/.test(w)?w.match(/^\[(.*)\]$/)[1].split("+"):w;return rs(w,S||null,/\&/.test(d),/\*/.test(d),/\+\+/.test(d),f(S),g===0)})}var Su=(wo.prototype._parseStoresSpec=function(s,d){c(s).forEach(function(g){if(s[g]!==null){var w=as(s[g]),S=w.shift();if(S.unique=!0,S.multi)throw new Ee.Schema("Primary key cannot be multi-valued");w.forEach(function(A){if(A.auto)throw new Ee.Schema("Only primary key can be marked as autoIncrement (++)");if(!A.keyPath)throw new Ee.Schema("Index must have a name and cannot be an empty string")}),d[g]=is(g,S,w)}})},wo.prototype.stores=function(g){var d=this.db;this._cfg.storesSource=this._cfg.storesSource?h(this._cfg.storesSource,g):g;var g=d._versions,w={},S={};return g.forEach(function(A){h(w,A._cfg.storesSource),S=A._cfg.dbschema={},A._parseStoresSpec(w,S)}),d._dbSchema=S,fa(d,[d._allTables,d,d.Transaction.prototype]),la(d,[d._allTables,d,d.Transaction.prototype,this._cfg.tables],c(S),S),d._storeNames=c(S),this},wo.prototype.upgrade=function(s){return this._cfg.contentUpgrade=Bt(this._cfg.contentUpgrade||Ke,s),this},wo);function wo(){}function pa(s,d){var g=s._dbNamesDB;return g||(g=s._dbNamesDB=new Or(Ci,{addons:[],indexedDB:s,IDBKeyRange:d})).version(1).stores({dbnames:"name"}),g.table("dbnames")}function _n(s){return s&&typeof s.databases=="function"}function ss(s){return Nn(function(){return Fe.letThrough=!0,s()})}function In(s){return!("from"in s)}var yn=function(s,d){if(!this){var g=new yn;return s&&"d"in s&&h(g,s),g}h(this,arguments.length?{d:1,from:s,to:1<arguments.length?d:s}:{d:0})};function Ri(s,d,g){var w=at(d,g);if(!isNaN(w)){if(0<w)throw RangeError();if(In(s))return h(s,{from:d,to:g,d:1});var S=s.l,w=s.r;if(at(g,s.from)<0)return S?Ri(S,d,g):s.l={from:d,to:g,d:1,l:null,r:null},Mt(s);if(0<at(d,s.to))return w?Ri(w,d,g):s.r={from:d,to:g,d:1,l:null,r:null},Mt(s);at(d,s.from)<0&&(s.from=d,s.l=null,s.d=w?w.d+1:1),0<at(g,s.to)&&(s.to=g,s.r=null,s.d=s.l?s.l.d+1:1),g=!s.r,S&&!s.l&&Bn(s,S),w&&g&&Bn(s,w)}}function Bn(s,d){In(d)||function g(w,Z){var A=Z.from,$=Z.to,H=Z.l,Z=Z.r;Ri(w,A,$),H&&g(w,H),Z&&g(w,Z)}(s,d)}function xo(s,d){var g=Mi(d),w=g.next();if(w.done)return!1;for(var S=w.value,A=Mi(s),$=A.next(S.from),H=$.value;!w.done&&!$.done;){if(at(H.from,S.to)<=0&&0<=at(H.to,S.from))return!0;at(S.from,H.from)<0?S=(w=g.next(H.from)).value:H=($=A.next(S.from)).value}return!1}function Mi(s){var d=In(s)?null:{s:0,n:s};return{next:function(g){for(var w=0<arguments.length;d;)switch(d.s){case 0:if(d.s=1,w)for(;d.n.l&&at(g,d.n.from)<0;)d={up:d,n:d.n.l,s:1};else for(;d.n.l;)d={up:d,n:d.n.l,s:1};case 1:if(d.s=2,!w||at(g,d.n.to)<=0)return{value:d.n,done:!1};case 2:if(d.n.r){d.s=3,d={up:d,n:d.n.r,s:0};continue}case 3:d=d.up}return{done:!0}}}}function Mt(s){var d,g,w=(((d=s.r)===null||d===void 0?void 0:d.d)||0)-(((g=s.l)===null||g===void 0?void 0:g.d)||0),S=1<w?"r":w<-1?"l":"";S&&(d=S=="r"?"l":"r",g=i({},s),w=s[S],s.from=w.from,s.to=w.to,s[S]=w[S],g[S]=w[d],(s[d]=g).d=Ir(g)),s.d=Ir(s)}function Ir(g){var d=g.r,g=g.l;return(d?g?Math.max(d.d,g.d):d.d:g?g.d:0)+1}function Li(s,d){return c(d).forEach(function(g){s[g]?Bn(s[g],d[g]):s[g]=function w(S){var A,$,H={};for(A in S)y(S,A)&&($=S[A],H[A]=!$||typeof $!="object"||Y.has($.constructor)?$:w($));return H}(d[g])}),s}function us(s,d){return s.all||d.all||Object.keys(s).some(function(g){return d[g]&&xo(d[g],s[g])})}x(yn.prototype,((Hn={add:function(s){return Bn(this,s),this},addKey:function(s){return Ri(this,s,s),this},addKeys:function(s){var d=this;return s.forEach(function(g){return Ri(d,g,g)}),this},hasKey:function(s){var d=Mi(this).next(s).value;return d&&at(d.from,s)<=0&&0<=at(d.to,s)}})[Q]=function(){return Mi(this)},Hn));var Cr={},cs={},ls=!1;function ma(s){Li(cs,s),ls||(ls=!0,setTimeout(function(){ls=!1,ga(cs,!(cs={}))},0))}function ga(s,d){d===void 0&&(d=!1);var g=new Set;if(s.all)for(var w=0,S=Object.values(Cr);w<S.length;w++)bo($=S[w],s,g,d);else for(var A in s){var $,H=/^idb\:\/\/(.*)\/(.*)\//.exec(A);H&&(A=H[1],H=H[2],($=Cr["idb://".concat(A,"/").concat(H)])&&bo($,s,g,d))}g.forEach(function(Z){return Z()})}function bo(s,d,g,w){for(var S=[],A=0,$=Object.entries(s.queries.query);A<$.length;A++){for(var H=$[A],Z=H[0],I=[],L=0,O=H[1];L<O.length;L++){var K=O[L];us(d,K.obsSet)?K.subscribers.forEach(function(V){return g.add(V)}):w&&I.push(K)}w&&S.push([Z,I])}if(w)for(var F=0,q=S;F<q.length;F++){var te=q[F],Z=te[0],I=te[1];s.queries.query[Z]=I}}function $i(s){var d=s._state,g=s._deps.indexedDB;if(d.isBeingOpened||s.idbdb)return d.dbReadyPromise.then(function(){return d.dbOpenError?Rt(d.dbOpenError):s});d.isBeingOpened=!0,d.dbOpenError=null,d.openComplete=!1;var w=d.openCanceller,S=Math.round(10*s.verno),A=!1;function $(){if(d.openCanceller!==w)throw new Ee.DatabaseClosed("db.open() was cancelled")}function H(){return new ne(function(K,F){if($(),!g)throw new Ee.MissingAPI;var q=s.name,te=d.autoSchema||!S?g.open(q):g.open(q,S);if(!te)throw new Ee.MissingAPI;te.onerror=er(F),te.onblocked=St(s._fireOnBlocked),te.onupgradeneeded=St(function(V){var de;L=te.transaction,d.autoSchema&&!s._options.allowEmptyDB?(te.onerror=ho,L.abort(),te.result.close(),(de=g.deleteDatabase(q)).onsuccess=de.onerror=St(function(){F(new Ee.NoSuchDatabase("Database ".concat(q," doesnt exist")))})):(L.onerror=er(F),V=V.oldVersion>Math.pow(2,62)?0:V.oldVersion,O=V<1,s.idbdb=te.result,A&&os(s,L),pn(s,V/10,L,F))},F),te.onsuccess=St(function(){L=null;var V,de,ve,me,xe,Ce=s.idbdb=te.result,De=z(Ce.objectStoreNames);if(0<De.length)try{var Ie=Ce.transaction((me=De).length===1?me[0]:me,"readonly");if(d.autoSchema)de=Ce,ve=Ie,(V=s).verno=de.version/10,ve=V._dbSchema=vo(0,de,ve),V._storeNames=z(de.objectStoreNames,0),la(V,[V._allTables],c(ve),ve);else if(yo(s,s._dbSchema,Ie),((xe=kr(vo(0,(xe=s).idbdb,Ie),xe._dbSchema)).add.length||xe.change.some(function(Ae){return Ae.add.length||Ae.change.length}))&&!A)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ce.close(),S=Ce.version+1,A=!0,K(H());ca(s,Ie)}catch{}Ur.push(s),Ce.onversionchange=St(function(Ae){d.vcFired=!0,s.on("versionchange").fire(Ae)}),Ce.onclose=St(function(Ae){s.on("close").fire(Ae)}),O&&(xe=s._deps,Ie=q,Ce=xe.indexedDB,xe=xe.IDBKeyRange,_n(Ce)||Ie===Ci||pa(Ce,xe).put({name:Ie}).catch(Ke)),K()},F)}).catch(function(K){switch(K==null?void 0:K.name){case"UnknownError":if(0<d.PR1398_maxLoop)return d.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),H();break;case"VersionError":if(0<S)return S=0,H()}return ne.reject(K)})}var Z,I=d.dbReadyResolve,L=null,O=!1;return ne.race([w,(typeof navigator>"u"?ne.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(K){function F(){return indexedDB.databases().finally(K)}Z=setInterval(F,100),F()}).finally(function(){return clearInterval(Z)}):Promise.resolve()).then(H)]).then(function(){return $(),d.onReadyBeingFired=[],ne.resolve(ss(function(){return s.on.ready.fire(s.vip)})).then(function K(){if(0<d.onReadyBeingFired.length){var F=d.onReadyBeingFired.reduce(Bt,Ke);return d.onReadyBeingFired=[],ne.resolve(ss(function(){return F(s.vip)})).then(K)}})}).finally(function(){d.openCanceller===w&&(d.onReadyBeingFired=null,d.isBeingOpened=!1)}).catch(function(K){d.dbOpenError=K;try{L&&L.abort()}catch{}return w===d.openCanceller&&s._close(),Rt(K)}).finally(function(){d.openComplete=!0,I()}).then(function(){var K;return O&&(K={},s.tables.forEach(function(F){F.schema.indexes.forEach(function(q){q.name&&(K["idb://".concat(s.name,"/").concat(F.name,"/").concat(q.name)]=new yn(-1/0,[[[]]]))}),K["idb://".concat(s.name,"/").concat(F.name,"/")]=K["idb://".concat(s.name,"/").concat(F.name,"/:dels")]=new yn(-1/0,[[[]]])}),Yr(po).fire(K),ga(K,!0)),s})}function fs(s){function d(A){return s.next(A)}var g=S(d),w=S(function(A){return s.throw(A)});function S(A){return function(Z){var H=A(Z),Z=H.value;return H.done?Z:Z&&typeof Z.then=="function"?Z.then(g,w):f(Z)?Promise.all(Z).then(g,w):g(Z)}}return S(d)()}function _o(s,d,g){for(var w=f(s)?s.slice():[s],S=0;S<g;++S)w.push(d);return w}var Tu={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(s){return i(i({},s),{table:function(d){var g=s.table(d),w=g.schema,S={},A=[];function $(O,K,F){var q=go(O),te=S[q]=S[q]||[],V=O==null?0:typeof O=="string"?1:O.length,de=0<K,de=i(i({},F),{name:de?"".concat(q,"(virtual-from:").concat(F.name,")"):F.name,lowLevelIndex:F,isVirtual:de,keyTail:K,keyLength:V,extractKey:It(O),unique:!de&&F.unique});return te.push(de),de.isPrimaryKey||A.push(de),1<V&&$(V===2?O[0]:O.slice(0,V-1),K+1,F),te.sort(function(ve,me){return ve.keyTail-me.keyTail}),de}d=$(w.primaryKey.keyPath,0,w.primaryKey),S[":id"]=[d];for(var H=0,Z=w.indexes;H<Z.length;H++){var I=Z[H];$(I.keyPath,0,I)}function L(O){var K,F=O.query.index;return F.isVirtual?i(i({},O),{query:{index:F.lowLevelIndex,range:(K=O.query.range,F=F.keyTail,{type:K.type===1?2:K.type,lower:_o(K.lower,K.lowerOpen?s.MAX_KEY:s.MIN_KEY,F),lowerOpen:!0,upper:_o(K.upper,K.upperOpen?s.MIN_KEY:s.MAX_KEY,F),upperOpen:!0})}}):O}return i(i({},g),{schema:i(i({},w),{primaryKey:d,indexes:A,getIndexByKeyPath:function(O){return(O=S[go(O)])&&O[0]}}),count:function(O){return g.count(L(O))},query:function(O){return g.query(L(O))},openCursor:function(O){var K=O.query.index,F=K.keyTail,q=K.isVirtual,te=K.keyLength;return q?g.openCursor(L(O)).then(function(de){return de&&V(de)}):g.openCursor(O);function V(de){return Object.create(de,{continue:{value:function(ve){ve!=null?de.continue(_o(ve,O.reverse?s.MAX_KEY:s.MIN_KEY,F)):O.unique?de.continue(de.key.slice(0,te).concat(O.reverse?s.MIN_KEY:s.MAX_KEY,F)):de.continue()}},continuePrimaryKey:{value:function(ve,me){de.continuePrimaryKey(_o(ve,s.MAX_KEY,F),me)}},primaryKey:{get:function(){return de.primaryKey}},key:{get:function(){var ve=de.key;return te===1?ve[0]:ve.slice(0,te)}},value:{get:function(){return de.value}}})}}})}})}};function Eo(s,d,g,w){return g=g||{},w=w||"",c(s).forEach(function(S){var A,$,H;y(d,S)?(A=s[S],$=d[S],typeof A=="object"&&typeof $=="object"&&A&&$?(H=re(A))!==re($)?g[w+S]=d[S]:H==="Object"?Eo(A,$,g,w+S+"."):A!==$&&(g[w+S]=d[S]):A!==$&&(g[w+S]=d[S])):g[w+S]=void 0}),c(d).forEach(function(S){y(s,S)||(g[w+S]=d[S])}),g}function So(s,d){return d.type==="delete"?d.keys:d.keys||d.values.map(s.extractKey)}var Nu={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(s){return i(i({},s),{table:function(d){var g=s.table(d),w=g.schema.primaryKey;return i(i({},g),{mutate:function(S){var A=Fe.trans,$=A.table(d).hook,H=$.deleting,Z=$.creating,I=$.updating;switch(S.type){case"add":if(Z.fire===Ke)break;return A._promise("readwrite",function(){return L(S)},!0);case"put":if(Z.fire===Ke&&I.fire===Ke)break;return A._promise("readwrite",function(){return L(S)},!0);case"delete":if(H.fire===Ke)break;return A._promise("readwrite",function(){return L(S)},!0);case"deleteRange":if(H.fire===Ke)break;return A._promise("readwrite",function(){return function O(K,F,q){return g.query({trans:K,values:!1,query:{index:w,range:F},limit:q}).then(function(te){var V=te.result;return L({type:"delete",keys:V,trans:K}).then(function(de){return 0<de.numFailures?Promise.reject(de.failures[0]):V.length<q?{failures:[],numFailures:0,lastResult:void 0}:O(K,i(i({},F),{lower:V[V.length-1],lowerOpen:!0}),q)})})}(S.trans,S.range,1e4)},!0)}return g.mutate(S);function L(O){var K,F,q,te=Fe.trans,V=O.keys||So(w,O);if(!V)throw new Error("Keys missing");return(O=O.type==="add"||O.type==="put"?i(i({},O),{keys:V}):i({},O)).type!=="delete"&&(O.values=a([],O.values)),O.keys&&(O.keys=a([],O.keys)),K=g,q=V,((F=O).type==="add"?Promise.resolve([]):K.getMany({trans:F.trans,keys:q,cache:"immutable"})).then(function(de){var ve=V.map(function(me,xe){var Ce,De,Ie,Ae=de[xe],Se={onerror:null,onsuccess:null};return O.type==="delete"?H.fire.call(Se,me,Ae,te):O.type==="add"||Ae===void 0?(Ce=Z.fire.call(Se,me,O.values[xe],te),me==null&&Ce!=null&&(O.keys[xe]=me=Ce,w.outbound||U(O.values[xe],w.keyPath,me))):(Ce=Eo(Ae,O.values[xe]),(De=I.fire.call(Se,Ce,me,Ae,te))&&(Ie=O.values[xe],Object.keys(De).forEach(function(Pe){y(Ie,Pe)?Ie[Pe]=De[Pe]:U(Ie,Pe,De[Pe])}))),Se});return g.mutate(O).then(function(me){for(var xe=me.failures,Ce=me.results,De=me.numFailures,me=me.lastResult,Ie=0;Ie<V.length;++Ie){var Ae=(Ce||V)[Ie],Se=ve[Ie];Ae==null?Se.onerror&&Se.onerror(xe[Ie]):Se.onsuccess&&Se.onsuccess(O.type==="put"&&de[Ie]?O.values[Ie]:Ae)}return{failures:xe,results:Ce,numFailures:De,lastResult:me}}).catch(function(me){return ve.forEach(function(xe){return xe.onerror&&xe.onerror(me)}),Promise.reject(me)})})}}})}})}};function ku(s,d,g){try{if(!d||d.keys.length<s.length)return null;for(var w=[],S=0,A=0;S<d.keys.length&&A<s.length;++S)at(d.keys[S],s[A])===0&&(w.push(g?ge(d.values[S]):d.values[S]),++A);return w.length===s.length?w:null}catch{return null}}var ds={stack:"dbcore",level:-1,create:function(s){return{table:function(d){var g=s.table(d);return i(i({},g),{getMany:function(w){if(!w.cache)return g.getMany(w);var S=ku(w.keys,w.trans._cache,w.cache==="clone");return S?ne.resolve(S):g.getMany(w).then(function(A){return w.trans._cache={keys:w.keys,values:w.cache==="clone"?ge(A):A},A})},mutate:function(w){return w.type!=="add"&&(w.trans._cache=null),g.mutate(w)}})}}}};function va(s,d){return s.trans.mode==="readonly"&&!!s.subscr&&!s.trans.explicit&&s.trans.db._options.cache!=="disabled"&&!d.schema.primaryKey.outbound}function Iu(s,d){switch(s){case"query":return d.values&&!d.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Cu={stack:"dbcore",level:0,name:"Observability",create:function(s){var d=s.schema.name,g=new yn(s.MIN_KEY,s.MAX_KEY);return i(i({},s),{transaction:function(w,S,A){if(Fe.subscr&&S!=="readonly")throw new Ee.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Fe.querier));return s.transaction(w,S,A)},table:function(w){var S=s.table(w),A=S.schema,$=A.primaryKey,O=A.indexes,H=$.extractKey,Z=$.outbound,I=$.autoIncrement&&O.filter(function(F){return F.compound&&F.keyPath.includes($.keyPath)}),L=i(i({},S),{mutate:function(F){function q(Pe){return Pe="idb://".concat(d,"/").concat(w,"/").concat(Pe),me[Pe]||(me[Pe]=new yn)}var te,V,de,ve=F.trans,me=F.mutatedParts||(F.mutatedParts={}),xe=q(""),Ce=q(":dels"),De=F.type,Se=F.type==="deleteRange"?[F.range]:F.type==="delete"?[F.keys]:F.values.length<50?[So($,F).filter(function(Pe){return Pe}),F.values]:[],Ie=Se[0],Ae=Se[1],Se=F.trans._cache;return f(Ie)?(xe.addKeys(Ie),(Se=De==="delete"||Ie.length===Ae.length?ku(Ie,Se):null)||Ce.addKeys(Ie),(Se||Ae)&&(te=q,V=Se,de=Ae,A.indexes.forEach(function(Pe){var je=te(Pe.name||"");function tt(ct){return ct!=null?Pe.extractKey(ct):null}function ut(ct){return Pe.multiEntry&&f(ct)?ct.forEach(function(Mn){return je.addKey(Mn)}):je.addKey(ct)}(V||de).forEach(function(ct,Ft){var et=V&&tt(V[Ft]),Ft=de&&tt(de[Ft]);at(et,Ft)!==0&&(et!=null&&ut(et),Ft!=null&&ut(Ft))})}))):Ie?(Ae={from:(Ae=Ie.lower)!==null&&Ae!==void 0?Ae:s.MIN_KEY,to:(Ae=Ie.upper)!==null&&Ae!==void 0?Ae:s.MAX_KEY},Ce.add(Ae),xe.add(Ae)):(xe.add(g),Ce.add(g),A.indexes.forEach(function(Pe){return q(Pe.name).add(g)})),S.mutate(F).then(function(Pe){return!Ie||F.type!=="add"&&F.type!=="put"||(xe.addKeys(Pe.results),I&&I.forEach(function(je){for(var tt=F.values.map(function(et){return je.extractKey(et)}),ut=je.keyPath.findIndex(function(et){return et===$.keyPath}),ct=0,Mn=Pe.results.length;ct<Mn;++ct)tt[ct][ut]=Pe.results[ct];q(je.name).addKeys(tt)})),ve.mutatedParts=Li(ve.mutatedParts||{},me),Pe})}}),O=function(q){var te=q.query,q=te.index,te=te.range;return[q,new yn((q=te.lower)!==null&&q!==void 0?q:s.MIN_KEY,(te=te.upper)!==null&&te!==void 0?te:s.MAX_KEY)]},K={get:function(F){return[$,new yn(F.key)]},getMany:function(F){return[$,new yn().addKeys(F.keys)]},count:O,query:O,openCursor:O};return c(K).forEach(function(F){L[F]=function(q){var te=Fe.subscr,V=!!te,de=va(Fe,S)&&Iu(F,q)?q.obsSet={}:te;if(V){var ve=function(Ae){return Ae="idb://".concat(d,"/").concat(w,"/").concat(Ae),de[Ae]||(de[Ae]=new yn)},me=ve(""),xe=ve(":dels"),te=K[F](q),V=te[0],te=te[1];if((F==="query"&&V.isPrimaryKey&&!q.values?xe:ve(V.name||"")).add(te),!V.isPrimaryKey){if(F!=="count"){var Ce=F==="query"&&Z&&q.values&&S.query(i(i({},q),{values:!1}));return S[F].apply(this,arguments).then(function(Ae){if(F==="query"){if(Z&&q.values)return Ce.then(function(tt){return tt=tt.result,me.addKeys(tt),Ae});var Se=q.values?Ae.result.map(H):Ae.result;(q.values?me:xe).addKeys(Se)}else if(F==="openCursor"){var Pe=Ae,je=q.values;return Pe&&Object.create(Pe,{key:{get:function(){return xe.addKey(Pe.primaryKey),Pe.key}},primaryKey:{get:function(){var tt=Pe.primaryKey;return xe.addKey(tt),tt}},value:{get:function(){return je&&me.addKey(Pe.primaryKey),Pe.value}}})}return Ae})}xe.add(g)}}return S[F].apply(this,arguments)}}),L}})}};function Cn(s,d,g){if(g.numFailures===0)return d;if(d.type==="deleteRange")return null;var w=d.keys?d.keys.length:"values"in d&&d.values?d.values.length:1;return g.numFailures===w?null:(d=i({},d),f(d.keys)&&(d.keys=d.keys.filter(function(S,A){return!(A in g.failures)})),"values"in d&&f(d.values)&&(d.values=d.values.filter(function(S,A){return!(A in g.failures)})),d)}function To(s,d){return g=s,((w=d).lower===void 0||(w.lowerOpen?0<at(g,w.lower):0<=at(g,w.lower)))&&(s=s,(d=d).upper===void 0||(d.upperOpen?at(s,d.upper)<0:at(s,d.upper)<=0));var g,w}function Wi(s,d,K,w,S,A){if(!K||K.length===0)return s;var $=d.query.index,H=$.multiEntry,Z=d.query.range,I=w.schema.primaryKey.extractKey,L=$.extractKey,O=($.lowLevelIndex||$).extractKey,K=K.reduce(function(F,q){var te=F,V=[];if(q.type==="add"||q.type==="put")for(var de=new yn,ve=q.values.length-1;0<=ve;--ve){var me,xe=q.values[ve],Ce=I(xe);de.hasKey(Ce)||(me=L(xe),(H&&f(me)?me.some(function(Pe){return To(Pe,Z)}):To(me,Z))&&(de.addKey(Ce),V.push(xe)))}switch(q.type){case"add":var De=new yn().addKeys(d.values?F.map(function(je){return I(je)}):F),te=F.concat(d.values?V.filter(function(je){return je=I(je),!De.hasKey(je)&&(De.addKey(je),!0)}):V.map(function(je){return I(je)}).filter(function(je){return!De.hasKey(je)&&(De.addKey(je),!0)}));break;case"put":var Ie=new yn().addKeys(q.values.map(function(je){return I(je)}));te=F.filter(function(je){return!Ie.hasKey(d.values?I(je):je)}).concat(d.values?V:V.map(function(je){return I(je)}));break;case"delete":var Ae=new yn().addKeys(q.keys);te=F.filter(function(je){return!Ae.hasKey(d.values?I(je):je)});break;case"deleteRange":var Se=q.range;te=F.filter(function(je){return!To(I(je),Se)})}return te},s);return K===s?s:(K.sort(function(F,q){return at(O(F),O(q))||at(I(F),I(q))}),d.limit&&d.limit<1/0&&(K.length>d.limit?K.length=d.limit:s.length===d.limit&&K.length<d.limit&&(S.dirty=!0)),A?Object.freeze(K):K)}function hs(s,d){return at(s.lower,d.lower)===0&&at(s.upper,d.upper)===0&&!!s.lowerOpen==!!d.lowerOpen&&!!s.upperOpen==!!d.upperOpen}function Ou(s,d){return function(g,w,S,A){if(g===void 0)return w!==void 0?-1:0;if(w===void 0)return 1;if((w=at(g,w))===0){if(S&&A)return 0;if(S)return 1;if(A)return-1}return w}(s.lower,d.lower,s.lowerOpen,d.lowerOpen)<=0&&0<=function(g,w,S,A){if(g===void 0)return w!==void 0?1:0;if(w===void 0)return-1;if((w=at(g,w))===0){if(S&&A)return 0;if(S)return-1;if(A)return 1}return w}(s.upper,d.upper,s.upperOpen,d.upperOpen)}function Dl(s,d,g,w){s.subscribers.add(g),w.addEventListener("abort",function(){var S,A;s.subscribers.delete(g),s.subscribers.size===0&&(S=s,A=d,setTimeout(function(){S.subscribers.size===0&&he(A,S)},3e3))})}var Pl={stack:"dbcore",level:0,name:"Cache",create:function(s){var d=s.schema.name;return i(i({},s),{transaction:function(g,w,S){var A,$,H=s.transaction(g,w,S);return w==="readwrite"&&($=(A=new AbortController).signal,S=function(Z){return function(){if(A.abort(),w==="readwrite"){for(var I=new Set,L=0,O=g;L<O.length;L++){var K=O[L],F=Cr["idb://".concat(d,"/").concat(K)];if(F){var q=s.table(K),te=F.optimisticOps.filter(function(je){return je.trans===H});if(H._explicit&&Z&&H.mutatedParts)for(var V=0,de=Object.values(F.queries.query);V<de.length;V++)for(var ve=0,me=(De=de[V]).slice();ve<me.length;ve++)us((Ie=me[ve]).obsSet,H.mutatedParts)&&(he(De,Ie),Ie.subscribers.forEach(function(je){return I.add(je)}));else if(0<te.length){F.optimisticOps=F.optimisticOps.filter(function(je){return je.trans!==H});for(var xe=0,Ce=Object.values(F.queries.query);xe<Ce.length;xe++)for(var De,Ie,Ae,Se=0,Pe=(De=Ce[xe]).slice();Se<Pe.length;Se++)(Ie=Pe[Se]).res!=null&&H.mutatedParts&&(Z&&!Ie.dirty?(Ae=Object.isFrozen(Ie.res),Ae=Wi(Ie.res,Ie.req,te,q,Ie,Ae),Ie.dirty?(he(De,Ie),Ie.subscribers.forEach(function(je){return I.add(je)})):Ae!==Ie.res&&(Ie.res=Ae,Ie.promise=ne.resolve({result:Ae}))):(Ie.dirty&&he(De,Ie),Ie.subscribers.forEach(function(je){return I.add(je)})))}}}I.forEach(function(je){return je()})}}},H.addEventListener("abort",S(!1),{signal:$}),H.addEventListener("error",S(!1),{signal:$}),H.addEventListener("complete",S(!0),{signal:$})),H},table:function(g){var w=s.table(g),S=w.schema.primaryKey;return i(i({},w),{mutate:function(A){var $=Fe.trans;if(S.outbound||$.db._options.cache==="disabled"||$.explicit||$.idbtrans.mode!=="readwrite")return w.mutate(A);var H=Cr["idb://".concat(d,"/").concat(g)];return H?($=w.mutate(A),A.type!=="add"&&A.type!=="put"||!(50<=A.values.length||So(S,A).some(function(Z){return Z==null}))?(H.optimisticOps.push(A),A.mutatedParts&&ma(A.mutatedParts),$.then(function(Z){0<Z.numFailures&&(he(H.optimisticOps,A),(Z=Cn(0,A,Z))&&H.optimisticOps.push(Z),A.mutatedParts&&ma(A.mutatedParts))}),$.catch(function(){he(H.optimisticOps,A),A.mutatedParts&&ma(A.mutatedParts)})):$.then(function(Z){var I=Cn(0,i(i({},A),{values:A.values.map(function(L,O){var K;return Z.failures[O]?L:(L=(K=S.keyPath)!==null&&K!==void 0&&K.includes(".")?ge(L):i({},L),U(L,S.keyPath,Z.results[O]),L)})}),Z);H.optimisticOps.push(I),queueMicrotask(function(){return A.mutatedParts&&ma(A.mutatedParts)})}),$):w.mutate(A)},query:function(A){if(!va(Fe,w)||!Iu("query",A))return w.query(A);var $=((I=Fe.trans)===null||I===void 0?void 0:I.db._options.cache)==="immutable",O=Fe,H=O.requery,Z=O.signal,I=function(q,te,V,de){var ve=Cr["idb://".concat(q,"/").concat(te)];if(!ve)return[];if(!(te=ve.queries[V]))return[null,!1,ve,null];var me=te[(de.query?de.query.index.name:null)||""];if(!me)return[null,!1,ve,null];switch(V){case"query":var xe=me.find(function(Ce){return Ce.req.limit===de.limit&&Ce.req.values===de.values&&hs(Ce.req.query.range,de.query.range)});return xe?[xe,!0,ve,me]:[me.find(function(Ce){return("limit"in Ce.req?Ce.req.limit:1/0)>=de.limit&&(!de.values||Ce.req.values)&&Ou(Ce.req.query.range,de.query.range)}),!1,ve,me];case"count":return xe=me.find(function(Ce){return hs(Ce.req.query.range,de.query.range)}),[xe,!!xe,ve,me]}}(d,g,"query",A),L=I[0],O=I[1],K=I[2],F=I[3];return L&&O?L.obsSet=A.obsSet:(O=w.query(A).then(function(q){var te=q.result;if(L&&(L.res=te),$){for(var V=0,de=te.length;V<de;++V)Object.freeze(te[V]);Object.freeze(te)}else q.result=ge(te);return q}).catch(function(q){return F&&L&&he(F,L),Promise.reject(q)}),L={obsSet:A.obsSet,promise:O,subscribers:new Set,type:"query",req:A,dirty:!1},F?F.push(L):(F=[L],(K=K||(Cr["idb://".concat(d,"/").concat(g)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[A.query.index.name||""]=F)),Dl(L,F,H,Z),L.promise.then(function(q){return{result:Wi(q.result,A,K==null?void 0:K.optimisticOps,w,L,$)}})}})}})}};function ya(s,d){return new Proxy(s,{get:function(g,w,S){return w==="db"?d:Reflect.get(g,w,S)}})}var Or=(Gt.prototype.version=function(s){if(isNaN(s)||s<.1)throw new Ee.Type("Given version is not a positive number");if(s=Math.round(10*s)/10,this.idbdb||this._state.isBeingOpened)throw new Ee.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,s);var d=this._versions,g=d.filter(function(w){return w._cfg.version===s})[0];return g||(g=new this.Version(s),d.push(g),d.sort(Al),g.stores({}),this._state.autoSchema=!1,g)},Gt.prototype._whenReady=function(s){var d=this;return this.idbdb&&(this._state.openComplete||Fe.letThrough||this._vip)?s():new ne(function(g,w){if(d._state.openComplete)return w(new Ee.DatabaseClosed(d._state.dbOpenError));if(!d._state.isBeingOpened){if(!d._state.autoOpen)return void w(new Ee.DatabaseClosed);d.open().catch(Ke)}d._state.dbReadyPromise.then(g,w)}).then(s)},Gt.prototype.use=function(s){var d=s.stack,g=s.create,w=s.level,S=s.name;return S&&this.unuse({stack:d,name:S}),s=this._middlewares[d]||(this._middlewares[d]=[]),s.push({stack:d,create:g,level:w??10,name:S}),s.sort(function(A,$){return A.level-$.level}),this},Gt.prototype.unuse=function(s){var d=s.stack,g=s.name,w=s.create;return d&&this._middlewares[d]&&(this._middlewares[d]=this._middlewares[d].filter(function(S){return w?S.create!==w:!!g&&S.name!==g})),this},Gt.prototype.open=function(){var s=this;return Xt(Wt,function(){return $i(s)})},Gt.prototype._close=function(){var s=this._state,d=Ur.indexOf(this);if(0<=d&&Ur.splice(d,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}s.isBeingOpened||(s.dbReadyPromise=new ne(function(g){s.dbReadyResolve=g}),s.openCanceller=new ne(function(g,w){s.cancelOpen=w}))},Gt.prototype.close=function(g){var d=(g===void 0?{disableAutoOpen:!0}:g).disableAutoOpen,g=this._state;d?(g.isBeingOpened&&g.cancelOpen(new Ee.DatabaseClosed),this._close(),g.autoOpen=!1,g.dbOpenError=new Ee.DatabaseClosed):(this._close(),g.autoOpen=this._options.autoOpen||g.isBeingOpened,g.openComplete=!1,g.dbOpenError=null)},Gt.prototype.delete=function(s){var d=this;s===void 0&&(s={disableAutoOpen:!0});var g=0<arguments.length&&typeof arguments[0]!="object",w=this._state;return new ne(function(S,A){function $(){d.close(s);var H=d._deps.indexedDB.deleteDatabase(d.name);H.onsuccess=St(function(){var Z,I,L;Z=d._deps,I=d.name,L=Z.indexedDB,Z=Z.IDBKeyRange,_n(L)||I===Ci||pa(L,Z).delete(I).catch(Ke),S()}),H.onerror=er(A),H.onblocked=d._fireOnBlocked}if(g)throw new Ee.InvalidArgument("Invalid closeOptions argument to db.delete()");w.isBeingOpened?w.dbReadyPromise.then($):$()})},Gt.prototype.backendDB=function(){return this.idbdb},Gt.prototype.isOpen=function(){return this.idbdb!==null},Gt.prototype.hasBeenClosed=function(){var s=this._state.dbOpenError;return s&&s.name==="DatabaseClosed"},Gt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Gt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Gt.prototype,"tables",{get:function(){var s=this;return c(this._allTables).map(function(d){return s._allTables[d]})},enumerable:!1,configurable:!0}),Gt.prototype.transaction=function(){var s=(function(d,g,w){var S=arguments.length;if(S<2)throw new Ee.InvalidArgument("Too few arguments");for(var A=new Array(S-1);--S;)A[S-1]=arguments[S];return w=A.pop(),[d,X(A),w]}).apply(this,arguments);return this._transaction.apply(this,s)},Gt.prototype._transaction=function(s,d,g){var w=this,S=Fe.trans;S&&S.db===this&&s.indexOf("!")===-1||(S=null);var A,$,H=s.indexOf("?")!==-1;s=s.replace("!","").replace("?","");try{if($=d.map(function(I){if(I=I instanceof w.Table?I.name:I,typeof I!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return I}),s=="r"||s===so)A=so;else{if(s!="rw"&&s!=Oi)throw new Ee.InvalidArgument("Invalid transaction mode: "+s);A=Oi}if(S){if(S.mode===so&&A===Oi){if(!H)throw new Ee.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");S=null}S&&$.forEach(function(I){if(S&&S.storeNames.indexOf(I)===-1){if(!H)throw new Ee.SubTransaction("Table "+I+" not included in parent transaction.");S=null}}),H&&S&&!S.active&&(S=null)}}catch(I){return S?S._promise(null,function(L,O){O(I)}):Rt(I)}var Z=(function I(L,O,K,F,q){return ne.resolve().then(function(){var te=Fe.transless||Fe,V=L._createTransaction(O,K,L._dbSchema,F);if(V.explicit=!0,te={trans:V,transless:te},F)V.idbtrans=F.idbtrans;else try{V.create(),V.idbtrans._explicit=!0,L._state.PR1398_maxLoop=3}catch(me){return me.name===Ve.InvalidState&&L.isOpen()&&0<--L._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),L.close({disableAutoOpen:!1}),L.open().then(function(){return I(L,O,K,null,q)})):Rt(me)}var de,ve=fe(q);return ve&&Zn(),te=ne.follow(function(){var me;(de=q.call(V,V))&&(ve?(me=Rn.bind(null,null),de.then(me,me)):typeof de.next=="function"&&typeof de.throw=="function"&&(de=fs(de)))},te),(de&&typeof de.then=="function"?ne.resolve(de).then(function(me){return V.active?me:Rt(new Ee.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):te.then(function(){return de})).then(function(me){return F&&V._resolve(),V._completion.then(function(){return me})}).catch(function(me){return V._reject(me),Rt(me)})})}).bind(null,this,A,$,S,g);return S?S._promise(A,Z,"lock"):Fe.trans?Xt(Fe.transless,function(){return w._whenReady(Z)}):this._whenReady(Z)},Gt.prototype.table=function(s){if(!y(this._allTables,s))throw new Ee.InvalidTable("Table ".concat(s," does not exist"));return this._allTables[s]},Gt);function Gt(s,d){var g=this;this._middlewares={},this.verno=0;var w=Gt.dependencies;this._options=d=i({addons:Gt.addons,autoOpen:!0,indexedDB:w.indexedDB,IDBKeyRange:w.IDBKeyRange,cache:"cloned"},d),this._deps={indexedDB:d.indexedDB,IDBKeyRange:d.IDBKeyRange},w=d.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var S,A,$,H,Z,I={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ke,dbReadyPromise:null,cancelOpen:Ke,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:d.autoOpen};I.dbReadyPromise=new ne(function(O){I.dbReadyResolve=O}),I.openCanceller=new ne(function(O,K){I.cancelOpen=K}),this._state=I,this.name=s,this.on=ai(this,"populate","blocked","versionchange","close",{ready:[Bt,Ke]}),this.on.ready.subscribe=ee(this.on.ready.subscribe,function(O){return function(K,F){Gt.vip(function(){var q,te=g._state;te.openComplete?(te.dbOpenError||ne.resolve().then(K),F&&O(K)):te.onReadyBeingFired?(te.onReadyBeingFired.push(K),F&&O(K)):(O(K),q=g,F||O(function V(){q.on.ready.unsubscribe(K),q.on.ready.unsubscribe(V)}))})}}),this.Collection=(S=this,co(es.prototype,function(de,V){this.db=S;var F=uo,q=null;if(V)try{F=V()}catch(ve){q=ve}var te=de._ctx,V=te.table,de=V.hook.reading.fire;this._ctx={table:V,index:te.index,isPrimKey:!te.index||V.schema.primKey.keyPath&&te.index===V.schema.primKey.name,range:F,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:q,or:te.or,valueMapper:de!==Tt?de:null}})),this.Table=(A=this,co(Qa.prototype,function(O,K,F){this.db=A,this._tx=F,this.name=O,this.schema=K,this.hook=A._allTables[O]?A._allTables[O].hook:ai(null,{creating:[Nt,Ke],reading:[Xe,Tt],updating:[He,Ke],deleting:[Je,Ke]})})),this.Transaction=($=this,co(ns.prototype,function(O,K,F,q,te){var V=this;this.db=$,this.mode=O,this.storeNames=K,this.schema=F,this.chromeTransactionDurability=q,this.idbtrans=null,this.on=ai(this,"complete","error","abort"),this.parent=te||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ne(function(de,ve){V._resolve=de,V._reject=ve}),this._completion.then(function(){V.active=!1,V.on.complete.fire()},function(de){var ve=V.active;return V.active=!1,V.on.error.fire(de),V.parent?V.parent._reject(de):ve&&V.idbtrans&&V.idbtrans.abort(),Rt(de)})})),this.Version=(H=this,co(Su.prototype,function(O){this.db=H,this._cfg={version:O,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Z=this,co(_u.prototype,function(O,K,F){if(this.db=Z,this._ctx={table:O,index:K===":id"?null:K,or:F},this._cmp=this._ascending=at,this._descending=function(q,te){return at(te,q)},this._max=function(q,te){return 0<at(q,te)?q:te},this._min=function(q,te){return at(q,te)<0?q:te},this._IDBKeyRange=Z._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ee.MissingAPI})),this.on("versionchange",function(O){0<O.newVersion?console.warn("Another connection wants to upgrade database '".concat(g.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(g.name,"'. Closing db now to resume the delete request.")),g.close({disableAutoOpen:!1})}),this.on("blocked",function(O){!O.newVersion||O.newVersion<O.oldVersion?console.warn("Dexie.delete('".concat(g.name,"') was blocked")):console.warn("Upgrade '".concat(g.name,"' blocked by other connection holding version ").concat(O.oldVersion/10))}),this._maxKey=mo(d.IDBKeyRange),this._createTransaction=function(O,K,F,q){return new g.Transaction(O,K,F,g._options.chromeTransactionDurability,q)},this._fireOnBlocked=function(O){g.on("blocked").fire(O),Ur.filter(function(K){return K.name===g.name&&K!==g&&!K._state.vcFired}).map(function(K){return K.on("versionchange").fire(O)})},this.use(ds),this.use(Pl),this.use(Cu),this.use(Tu),this.use(Nu);var L=new Proxy(this,{get:function(O,K,F){if(K==="_vip")return!0;if(K==="table")return function(te){return ya(g.table(te),L)};var q=Reflect.get(O,K,F);return q instanceof Qa?ya(q,L):K==="tables"?q.map(function(te){return ya(te,L)}):K==="_createTransaction"?function(){return ya(q.apply(this,arguments),L)}:q}});this.vip=L,w.forEach(function(O){return O(g)})}var Ar,Hn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Rl=(No.prototype.subscribe=function(s,d,g){return this._subscribe(s&&typeof s!="function"?s:{next:s,error:d,complete:g})},No.prototype[Hn]=function(){return this},No);function No(s){this._subscribe=s}try{Ar={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{Ar={indexedDB:null,IDBKeyRange:null}}function ps(s){var d,g=!1,w=new Rl(function(S){var A=fe(s),$,H=!1,Z={},I={},L={get closed(){return H},unsubscribe:function(){H||(H=!0,$&&$.abort(),O&&Yr.storagemutated.unsubscribe(F))}};S.start&&S.start(L);var O=!1,K=function(){return Sr(q)},F=function(te){Li(Z,te),us(I,Z)&&K()},q=function(){var te,V,de;!H&&Ar.indexedDB&&(Z={},te={},$&&$.abort(),$=new AbortController,de=function(ve){var me=Et();try{A&&Zn();var xe=Nn(s,ve);return xe=A?xe.finally(Rn):xe}finally{me&&Pn()}}(V={subscr:te,signal:$.signal,requery:K,querier:s,trans:null}),Promise.resolve(de).then(function(ve){g=!0,d=ve,H||V.signal.aborted||(Z={},function(me){for(var xe in me)if(y(me,xe))return;return 1}(I=te)||O||(Yr(po,F),O=!0),Sr(function(){return!H&&S.next&&S.next(ve)}))},function(ve){g=!1,["DatabaseClosedError","AbortError"].includes(ve==null?void 0:ve.name)||H||Sr(function(){H||S.error&&S.error(ve)})}))};return setTimeout(K,0),L});return w.hasValue=function(){return g},w.getValue=function(){return d},w}var On=Or;function Fi(s){var d=Vr;try{Vr=!0,Yr.storagemutated.fire(s),ga(s,!0)}finally{Vr=d}}x(On,i(i({},xt),{delete:function(s){return new On(s,{addons:[]}).delete()},exists:function(s){return new On(s,{addons:[]}).open().then(function(d){return d.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(s){try{return d=On.dependencies,g=d.indexedDB,d=d.IDBKeyRange,(_n(g)?Promise.resolve(g.databases()).then(function(w){return w.map(function(S){return S.name}).filter(function(S){return S!==Ci})}):pa(g,d).toCollection().primaryKeys()).then(s)}catch{return Rt(new Ee.MissingAPI)}var d,g},defineClass:function(){return function(s){h(this,s)}},ignoreTransaction:function(s){return Fe.trans?Xt(Fe.transless,s):s()},vip:ss,async:function(s){return function(){try{var d=fs(s.apply(this,arguments));return d&&typeof d.then=="function"?d:ne.resolve(d)}catch(g){return Rt(g)}}},spawn:function(s,d,g){try{var w=fs(s.apply(g,d||[]));return w&&typeof w.then=="function"?w:ne.resolve(w)}catch(S){return Rt(S)}},currentTransaction:{get:function(){return Fe.trans||null}},waitFor:function(s,d){return d=ne.resolve(typeof s=="function"?On.ignoreTransaction(s):s).timeout(d||6e4),Fe.trans?Fe.trans.waitFor(d):d},Promise:ne,debug:{get:function(){return bt},set:function(s){un(s)}},derive:E,extend:h,props:x,override:ee,Events:ai,on:Yr,liveQuery:ps,extendObservabilitySet:Li,getByKeyPath:ce,setByKeyPath:U,delByKeyPath:function(s,d){typeof d=="string"?U(s,d,void 0):"length"in d&&[].map.call(d,function(g){U(s,g,void 0)})},shallowClone:J,deepClone:ge,getObjectDiff:Eo,cmp:at,asap:le,minKey:-1/0,addons:[],connections:Ur,errnames:Ve,dependencies:Ar,cache:Cr,semVer:"4.0.10",version:"4.0.10".split(".").map(function(s){return parseInt(s)}).reduce(function(s,d,g){return s+d/Math.pow(10,2*g)})})),On.maxKey=mo(On.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Yr(po,function(s){Vr||(s=new CustomEvent(ts,{detail:s}),Vr=!0,dispatchEvent(s),Vr=!1)}),addEventListener(ts,function(s){s=s.detail,Vr||Fi(s)}));var ji,Vr=!1,Au=function(){};return typeof BroadcastChannel<"u"&&((Au=function(){(ji=new BroadcastChannel(ts)).onmessage=function(s){return s.data&&Fi(s.data)}})(),typeof ji.unref=="function"&&ji.unref(),Yr(po,function(s){Vr||ji.postMessage(s)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(s){if(!Or.disableBfCache&&s.persisted){bt&&console.debug("Dexie: handling persisted pagehide"),ji!=null&&ji.close();for(var d=0,g=Ur;d<g.length;d++)g[d].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(s){!Or.disableBfCache&&s.persisted&&(bt&&console.debug("Dexie: handling persisted pageshow"),Au(),Fi({all:new yn(-1/0,[[]])}))})),ne.rejectionMapper=function(s,d){return!s||s instanceof ke||s instanceof TypeError||s instanceof SyntaxError||!s.name||!nt[s.name]?s:(d=new nt[s.name](d||s.message,s),"stack"in s&&N(d,"stack",{get:function(){return this.inner.stack}}),d)},un(bt),i(Or,Object.freeze({__proto__:null,Dexie:Or,liveQuery:ps,Entity:ra,cmp:at,PropModSymbol:Tr,PropModification:Pi,replacePrefix:function(s,d){return new Pi({replacePrefix:[s,d]})},add:function(s){return new Pi({add:s})},remove:function(s){return new Pi({remove:s})},default:Or,RangeSet:yn,mergeRanges:Bn,rangesOverlap:xo}),{default:Or}),Or})})(Qv);var nA=Qv.exports;const bd=nh(nA),Ng=Symbol.for("Dexie"),_d=globalThis[Ng]||(globalThis[Ng]=bd);if(bd.semVer!==_d.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${bd.semVer} and ${_d.semVer}`);class rA extends _d{constructor(){super("TemporalDB"),this.version(3).stores({workflows:"[workflowId+runId],[parentWorkflowId+parentWorkflowRunId], parentWorkflowId, parentWorkflowRunId",activities:"[activityId+workflowId+workflowRunId],[workflowId+workflowRunId], workflowId, workflowRunId",settings:"id"})}}const ri=new rA;async function kg(e){try{await ri.workflows.put(e),console.debug("Workflow added successfully:",e)}catch(t){console.error("Failed to add workflow:",t,e)}}async function rl(e,t){if(t)try{const n=await ri.workflows.get({workflowId:e,runId:t});return console.debug("Retrieved Workflow:",n),n}catch(n){console.error("Failed to retrieve workflow:",n);return}}async function iA(e,t){try{await ri.workflows.where({workflowId:e,runId:t}).delete(),console.debug(`Deleted Workflow with ID: ${e}`)}catch(n){console.error("Failed to delete workflow:",n)}}async function oA(e){try{await ri.activities.put(e),console.debug("Activity added successfully:",e)}catch(t){console.error("Failed to add activity:",t,e)}}async function aA(e,t,n){try{const i=await ri.activities.get({activityId:t,workflowId:e,workflowRunId:n});return console.debug("Retrieved Activity:",i),i}catch(i){console.error("Failed to retrieve activity:",i);return}}async function sA(e,t,n){try{await ri.activities.where({activityId:t,workflowId:e,workflowRunId:n}).delete(),console.debug(`Deleted Activity with ID: ${t}`)}catch(i){console.error("Failed to delete activity:",i)}}async function Jv(e,t){try{return await ri.activities.where(["workflowId","workflowRunId"]).equals([e,t]).toArray()}catch(n){return console.error("Failed to retrieve activities by workflowId:",n),[]}}async function ey(e,t){try{return await ri.workflows.where(["parentWorkflowId","parentWorkflowRunId"]).equals([e,t]).toArray()}catch(n){return console.error("Failed to retrieve child workflows:",n),[]}}async function Ed(e,t){const n=await rl(e,t);if(!n)throw new Error(`Root workflow not found for ${e} ${t}`);const i=await ey(e,t),a=await Jv(e,t);return[n,...i,...a]}async function ru(e){try{const t=await ri.settings.get(e);return t==null?void 0:t.value}catch(t){console.error("Failed to retrieve setting:",t);return}}async function Sd(e,t){try{await ri.settings.put({id:e,value:t}),console.debug(`Setting ${e} updated successfully:`,t)}catch(n){console.error("Failed to update setting:",n)}}var $c=function(){return $c=Object.assign||function(t){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(t[u]=n[u])}return t},$c.apply(this,arguments)};function uA(){var e=k.useRef(!1),t=k.useCallback(function(){return e.current},[]);return k.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),t}function cA(e,t,n){t===void 0&&(t=[]),n===void 0&&(n={loading:!1});var i=k.useRef(0),a=uA(),u=k.useState(n),c=u[0],f=u[1],h=k.useCallback(function(){for(var p=[],m=0;m<arguments.length;m++)p[m]=arguments[m];var y=++i.current;return c.loading||f(function(x){return $c($c({},x),{loading:!0})}),e.apply(void 0,p).then(function(x){return a()&&y===i.current&&f({value:x,loading:!1}),x},function(x){return a()&&y===i.current&&f({error:x,loading:!1}),x})},t);return[c,h]}function ty(e,t){t===void 0&&(t=[]);var n=cA(e,t,{loading:!0}),i=n[0],a=n[1];return k.useEffect(function(){a()},[a]),i}const lA=e=>ty(async()=>{const n=await rl(e.workflowId,e.workflowRunId);if(!n)throw new Error("Workflow data not found");return n},[e]),fA=e=>ty(async()=>{const n=await aA(e.workflowId,e.activityId,e.workflowRunId);if(!n)throw new Error("Activity data not found");return n},[e]);var sn=(e=>(e.WORKFLOW_EXECUTION_STARTED="EVENT_TYPE_WORKFLOW_EXECUTION_STARTED",e.WORKFLOW_TASK_SCHEDULED="EVENT_TYPE_WORKFLOW_TASK_SCHEDULED",e.WORKFLOW_TASK_STARTED="EVENT_TYPE_WORKFLOW_TASK_STARTED",e.WORKFLOW_TASK_COMPLETED="EVENT_TYPE_WORKFLOW_TASK_COMPLETED",e.ACTIVITY_TASK_SCHEDULED="EVENT_TYPE_ACTIVITY_TASK_SCHEDULED",e.ACTIVITY_TASK_STARTED="EVENT_TYPE_ACTIVITY_TASK_STARTED",e.ACTIVITY_TASK_COMPLETED="EVENT_TYPE_ACTIVITY_TASK_COMPLETED",e.ACTIVITY_TASK_FAILED="EVENT_TYPE_ACTIVITY_TASK_FAILED",e.ACTIVITY_TASK_TIMED_OUT="EVENT_TYPE_ACTIVITY_TASK_TIMED_OUT",e.ACTIVITY_TASK_CANCELED="EVENT_TYPE_ACTIVITY_TASK_CANCELED",e.WORKFLOW_EXECUTION_COMPLETED="EVENT_TYPE_WORKFLOW_EXECUTION_COMPLETED",e.WORKFLOW_EXECUTION_FAILED="EVENT_TYPE_WORKFLOW_EXECUTION_FAILED",e.WORKFLOW_EXECUTION_TIMED_OUT="EVENT_TYPE_WORKFLOW_EXECUTION_TIMED_OUT",e.WORKFLOW_EXECUTION_CANCELED="EVENT_TYPE_WORKFLOW_EXECUTION_CANCELED",e.WORKFLOW_EXECUTION_TERMINATED="EVENT_TYPE_WORKFLOW_EXECUTION_TERMINATED",e.START_CHILD_WORKFLOW_EXECUTION_INITIATED="EVENT_TYPE_START_CHILD_WORKFLOW_EXECUTION_INITIATED",e.CHILD_WORKFLOW_EXECUTION_STARTED="EVENT_TYPE_CHILD_WORKFLOW_EXECUTION_STARTED",e.CHILD_WORKFLOW_EXECUTION_COMPLETED="EVENT_TYPE_CHILD_WORKFLOW_EXECUTION_COMPLETED",e.START_CHILD_WORKFLOW_EXECUTION_FAILED="EVENT_TYPE_START_CHILD_WORKFLOW_EXECUTION_FAILED",e))(sn||{});const Ni=e=>e.type==="workflow"||e.type==="childWorkflow",ny=e=>e.type==="activity",Jo=e=>({workflowId:e.workflowId,workflowRunId:e.runId}),dA=e=>({workflowId:e.workflowId,workflowRunId:e.workflowRunId}),hA=e=>{if(!(!e.parentWorkflowId||!e.parentWorkflowRunId))return{workflowId:e.parentWorkflowId,workflowRunId:e.parentWorkflowRunId}},il=e=>({activityId:e.activityId,workflowId:e.workflowId,workflowRunId:e.workflowRunId}),pA=e=>Ni(e)?hA(e):dA(e);function Bs(e){var n;if(!e||e.length===0)return;if(e.length===1)return(n=e[0])!=null&&n.data?atob(e[0].data):"null";const t=e.map(i=>i!=null&&i.data?atob(i.data):"null").filter(i=>i!==void 0);return t.length>0?`[${t.join(", ")}]`:void 0}async function Ig(e,t,n){var f,h,p,m,y,x,b;const i=[],a={},u={},c=mA(e,t,n);i.push(c);for(const N of e)switch(N.eventType){case sn.WORKFLOW_EXECUTION_STARTED:{if(!c)throw console.error("Root workflow not found"),new Error("Root workflow not found");break}case sn.WORKFLOW_EXECUTION_COMPLETED:case sn.WORKFLOW_EXECUTION_FAILED:case sn.WORKFLOW_EXECUTION_TIMED_OUT:case sn.WORKFLOW_EXECUTION_CANCELED:case sn.WORKFLOW_EXECUTION_TERMINATED:{const E=i[0];E&&(E.endTime=N.eventTime,E.relatedEventIds=E.relatedEventIds||[],E.relatedEventIds.push(N.eventId),E.status=Cg(N.eventType)),N.eventType===sn.WORKFLOW_EXECUTION_COMPLETED&&(E.result=Bs((h=(f=N.workflowExecutionCompletedEventAttributes)==null?void 0:f.result)==null?void 0:h.payloads)),N.eventType===sn.WORKFLOW_EXECUTION_FAILED&&(E.result=JSON.stringify(N.workflowExecutionFailedEventAttributes)),N.eventType===sn.WORKFLOW_EXECUTION_TERMINATED&&(E.result=JSON.stringify(N.workflowExecutionTerminatedEventAttributes));break}case sn.ACTIVITY_TASK_SCHEDULED:{const E=N.activityTaskScheduledEventAttributes;if(E){const C={type:"activity",activityId:E.activityId,activityType:E.activityType.name,workflowId:c.workflowId,workflowRunId:c.runId,namespace:c.namespace,scheduleTime:N.eventTime,scheduleToCloseTimeout:E.scheduleToCloseTimeout,scheduleToStartTimeout:E.scheduleToStartTimeout,startToCloseTimeout:E.startToCloseTimeout,heartbeatTimeout:E.heartbeatTimeout,retryPolicy:E.retryPolicy,input:Bs((p=E.input)==null?void 0:p.payloads),status:"SCHEDULED",relatedEventIds:[N.eventId],workflowTaskCompletedEventId:E.workflowTaskCompletedEventId,taskId:N.taskId,sortEventTime:N.eventTime,sortEventId:N.eventId,taskQueue:E.taskQueue,startTime:""};u[N.eventId]=C,i.push(C)}break}case sn.ACTIVITY_TASK_STARTED:{const E=N.activityTaskStartedEventAttributes;if(E){const C=u[E.scheduledEventId];C.status==="SCHEDULED"&&(C.status="STARTED"),C.startTime=N.eventTime,C.relatedEventIds=C.relatedEventIds||[],C.relatedEventIds.push(N.eventId),(m=N.activityTaskStartedEventAttributes)!=null&&m.lastFailure&&(C.lastFailure=JSON.stringify(N.activityTaskStartedEventAttributes.lastFailure))}break}case sn.ACTIVITY_TASK_COMPLETED:{const E=N.activityTaskCompletedEventAttributes;if(E){const C=u[E.scheduledEventId];C&&(C.endTime=N.eventTime,C.status="COMPLETED",C.relatedEventIds=C.relatedEventIds||[],C.relatedEventIds.push(N.eventId),C.result=Bs((y=E.result)==null?void 0:y.payloads))}break}case sn.ACTIVITY_TASK_FAILED:{const E=N.activityTaskFailedEventAttributes;if(E){const C=u[E.scheduledEventId];C&&(C.endTime=N.eventTime,C.status="FAILED",C.relatedEventIds=C.relatedEventIds||[],C.relatedEventIds.push(N.eventId),C.failure=JSON.stringify(E.failure))}break}case sn.ACTIVITY_TASK_TIMED_OUT:{const E=N.activityTaskTimedOutEventAttributes;if(E){const C=u[E.scheduledEventId];C&&(C.endTime=N.eventTime,C.status="TIMED_OUT",C.relatedEventIds=C.relatedEventIds||[],C.relatedEventIds.push(N.eventId))}break}case sn.ACTIVITY_TASK_CANCELED:{const E=N.activityTaskCanceledEventAttributes;if(E){const C=u[E.scheduledEventId];C&&(C.endTime=N.eventTime,C.status=Cg(N.eventType),C.relatedEventIds=C.relatedEventIds||[],C.relatedEventIds.push(N.eventId))}break}case sn.START_CHILD_WORKFLOW_EXECUTION_INITIATED:{const E=N.startChildWorkflowExecutionInitiatedEventAttributes;if(E){const C={type:"childWorkflow",workflowId:E.workflowId,startTime:N.eventTime,status:"INITIATED",parentWorkflowId:c.workflowId,parentWorkflowRunId:c.runId,runId:"",workflowType:(x=E.workflowType)==null?void 0:x.name,relatedEventIds:[N.eventId],workflowTaskCompletedEventId:E.workflowTaskCompletedEventId,namespace:E.namespace,taskQueue:E.taskQueue,workflowRunTimeout:E.workflowRunTimeout,workflowTaskTimeout:E.workflowTaskTimeout,workflowReusePolicy:E.workflowReusePolicy,header:E.header,memo:E.memo,searchAttributes:E.searchAttributes,taskId:N.taskId,sortEventTime:"",sortEventId:""};a[N.eventId]=C,i.push(C)}break}case sn.CHILD_WORKFLOW_EXECUTION_STARTED:{const E=N.childWorkflowExecutionStartedEventAttributes;if(E&&E.workflowExecution){const C=a[E.initiatedEventId];C&&(C.startTime=N.eventTime,C.relatedEventIds=C.relatedEventIds||[],C.relatedEventIds.push(N.eventId),C.runId=E.workflowExecution.runId,C.status="RUNNING",C.sortEventTime=N.eventTime,C.sortEventId=N.eventId)}break}case sn.CHILD_WORKFLOW_EXECUTION_COMPLETED:{const E=N.childWorkflowExecutionCompletedEventAttributes;if(E){const C=a[E.initiatedEventId];C&&(C.endTime=N.eventTime,C.status="COMPLETED",C.relatedEventIds=C.relatedEventIds||[],C.relatedEventIds.push(N.eventId),C.result=Bs((b=E.result)==null?void 0:b.payloads))}break}case sn.START_CHILD_WORKFLOW_EXECUTION_FAILED:{const E=N.startChildWorkflowExecutionFailedEventAttributes;if(E){const C=a[E.initiatedEventId];C&&(E.cause==="START_CHILD_WORKFLOW_EXECUTION_FAILED_CAUSE_WORKFLOW_ALREADY_EXISTS"?(C.runId="",C.status="RUNNING"):E.cause==="WORKFLOW_ID_REUSE_POLICY_ALLOW_DUPLICATE_FAILED_ONLY"&&(C.status="INITIATED",C.runId=""))}break}}return i}function mA(e,t,n){var i,a,u;for(const c of e)if(c.eventType===sn.WORKFLOW_EXECUTION_STARTED){const f=c.workflowExecutionStartedEventAttributes;if(f)return{type:"workflow",workflowId:f.workflowId,runId:n,workflowType:f.workflowType.name,startTime:c.eventTime,status:"RUNNING",relatedEventIds:[c.eventId],input:Bs((i=f.input)==null?void 0:i.payloads),header:f.header,attempts:f.attempt,searchAttributes:f.searchAttributes,memo:f.memo,taskQueue:f.taskQueue,namespace:t,parentWorkflowId:(a=f.parentWorkflowExecution)==null?void 0:a.workflowId,parentWorkflowRunId:(u=f.parentWorkflowExecution)==null?void 0:u.runId,parentWorkflowNamespace:f.parentWorkflowNamespace,originalExecutionRunId:f.originalExecutionRunId,firstExecutionRunId:f.firstExecutionRunId,workflowTaskTimeout:f.workflowTaskTimeout,workflowRunTimeout:f.workflowRunTimeout,taskId:c.taskId,sortEventTime:c.eventTime,sortEventId:c.eventId,workflowTaskCompletedEventId:""}}throw new Error("Root workflow not found")}function Cg(e){switch(e){case"EVENT_TYPE_WORKFLOW_EXECUTION_STARTED":case"EVENT_TYPE_CHILD_WORKFLOW_EXECUTION_STARTED":case"EVENT_TYPE_ACTIVITY_TASK_STARTED":return"RUNNING";case"EVENT_TYPE_WORKFLOW_EXECUTION_COMPLETED":case"EVENT_TYPE_CHILD_WORKFLOW_EXECUTION_COMPLETED":case"EVENT_TYPE_ACTIVITY_TASK_COMPLETED":return"COMPLETED";case"EVENT_TYPE_WORKFLOW_EXECUTION_FAILED":case"EVENT_TYPE_CHILD_WORKFLOW_EXECUTION_FAILED":case"EVENT_TYPE_ACTIVITY_TASK_FAILED":return"FAILED";case"EVENT_TYPE_WORKFLOW_EXECUTION_TIMED_OUT":case"EVENT_TYPE_CHILD_WORKFLOW_EXECUTION_TIMED_OUT":case"EVENT_TYPE_ACTIVITY_TASK_TIMED_OUT":return"TIMED_OUT";case"EVENT_TYPE_WORKFLOW_EXECUTION_CANCELED":case"EVENT_TYPE_CHILD_WORKFLOW_EXECUTION_CANCELED":case"EVENT_TYPE_ACTIVITY_TASK_CANCELED":return"CANCELED";case"EVENT_TYPE_WORKFLOW_EXECUTION_TERMINATED":case"EVENT_TYPE_CHILD_WORKFLOW_EXECUTION_TERMINATED":return"TERMINATED";case"EVENT_TYPE_ACTIVITY_TASK_SCHEDULED":return"SCHEDULED";default:return e}}function Og(e){switch(e){case"WORKFLOW_EXECUTION_STATUS_RUNNING":return"RUNNING";case"WORKFLOW_EXECUTION_STATUS_COMPLETED":return"COMPLETED";case"WORKFLOW_EXECUTION_STATUS_FAILED":return"FAILED";case"WORKFLOW_EXECUTION_STATUS_TIMED_OUT":return"TIMED_OUT";case"WORKFLOW_EXECUTION_STATUS_CANCELED":return"CANCELED";case"WORKFLOW_EXECUTION_STATUS_TERMINATED":return"TERMINATED";default:return e}}const gA=e=>({id:e.id,data:e,type:"workflowNode",position:{x:0,y:0}}),vA=e=>({id:e.id,data:e,type:"activityNode",position:{x:0,y:0}}),Ag=e=>{if(e.type==="workflow")return gA(e);if(e.type==="activity")return vA(e);if(e.type==="batch")return{id:e.id,data:e,type:"batchNode",position:{x:0,y:0}};throw new Error("Invalid node data type")},Br=e=>`${e.workflowId}$$${e.workflowRunId}`,ry=e=>{const[t,n]=e.split("$$");return{workflowId:t,workflowRunId:n}},du=e=>`${e.workflowId}$$${e.workflowRunId}$$${e.activityId}`,yA=e=>{const[t,n,i]=e.split("$$");return{workflowId:t,workflowRunId:n,activityId:i}},iy=e=>{if(e.__isBatch){const t=e,n=t.__batchItems,i=n.map(a=>Ni(a)?Jo(a):il(a));return{id:t.__originalId+"_batch",type:"batch",referencedBatches:i,__batchItems:n,__batchCount:n.length}}if(Ni(e))return wA(e);if(ny(e))return xA(e);throw new Error("Invalid chronological item type")},wA=e=>({type:"workflow",id:Br(Jo(e))}),xA=e=>({type:"activity",id:du(il(e))}),Hs=e=>Ni(e)?Br(Jo(e)):du(il(e));function oy(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=oy(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function xr(){for(var e,t,n=0,i="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=oy(e))&&(i&&(i+=" "),i+=t);return i}const wh=(e,t)=>{if(!e||!t)return null;const n=new Date(e),a=new Date(t).getTime()-n.getTime(),u=Math.floor(a/1e3),c=Math.floor(u/60),f=Math.floor(c/60),h=[];return f>0&&h.push(`${f}h`),c%60>0&&h.push(`${c%60}m`),u%60>0&&h.push(`${u%60}s`),a%1e3>0&&h.push(`${a%1e3}ms`),h.join(" ")},jf=e=>{switch(e.toLowerCase()){case"completed":return"border-green-500";case"running":return"border-blue-500";case"retrying":return"border-orange-600";case"pending":return"border-purple-600";case"terminated":return"border-yellow-500";case"failed":return"border-red-600";default:return"border-gray-500"}},bA=e=>{switch(e.toLowerCase()){case"completed":return"text-green-600 bg-green-50";case"retrying":return"text-orange-700 bg-orange-100";case"running":return"text-blue-600 bg-blue-50";case"pending":return"text-purple-700 bg-purple-100";case"terminated":return"text-yellow-600 bg-yellow-50";case"failed":return"text-red-700 bg-red-100";default:return"text-gray-600 bg-gray-50"}},xh=k.memo(({id:e,onShowNodeData:t,onBatchAction:n,onClick:i,IconComponent:a,TitleComponent:u,TypeLabelComponent:c,ExtraActionsComponent:f,status:h,startTime:p,endTime:m,taskQueue:y,count:x})=>{const b=x&&x>1;return _.jsxs("div",{className:"relative min-w-[450px]",children:[_.jsx(Qi,{type:"source",position:Ue.Right,id:`${e}-right`,style:{top:"50%",transform:"translateY(-50%)"}}),_.jsx(Qi,{type:"target",position:Ue.Left,id:`${e}-left`,style:{top:"50%",transform:"translateY(-50%)"}}),_.jsx(Qi,{type:"source",position:Ue.Bottom,id:`${e}-bottom`,style:{left:"25px"}}),_.jsx(Qi,{type:"target",position:Ue.Top,id:`${e}-top`,style:{left:"25px"}}),_.jsxs("div",{className:"relative",children:[b&&_.jsxs(_.Fragment,{children:[_.jsx("div",{className:xr("absolute rounded-xl shadow-lg border-2 transition-all duration-300",jf(h),"opacity-40"),style:{top:"-8px",left:"-8px",width:"100%",height:"100%",pointerEvents:"none"},children:_.jsx("div",{className:"p-4 bg-white rounded-xl"})}),_.jsx("div",{className:xr("absolute rounded-xl shadow-lg border-2 transition-all duration-300",jf(h),"opacity-70"),style:{top:"-4px",left:"-4px",width:"100%",height:"100%",pointerEvents:"none"},children:_.jsx("div",{className:"p-4 bg-white rounded-xl"})})]}),_.jsx("div",{className:xr("rounded-xl shadow-lg border-2 transition-all duration-300 relative",jf(h)),children:_.jsxs("div",{className:xr("p-4 relative bg-white rounded-xl",i&&!b&&"cursor-pointer"),onClick:i,children:[_.jsxs("div",{className:"absolute -top-2.5 -right-2.5 flex gap-1",children:[b&&n&&_.jsx("div",{onClick:N=>{N.stopPropagation(),n()},className:"w-6 h-6 flex items-center justify-center bg-blue-500 hover:bg-blue-600 rounded-full text-white shadow-lg z-10 cursor-pointer",children:_.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4.5a6.5 6.5 0 1 0 4.135 11.286l3.572 3.572a1 1 0 0 0 1.414-1.414l-3.572-3.572A6.5 6.5 0 0 0 11 4.5z"})})}),!b&&t&&_.jsx("div",{onClick:N=>{N.stopPropagation(),t(N)},className:"w-6 h-6 flex items-center justify-center bg-gray-500 hover:bg-gray-600 rounded-full text-white shadow-lg z-10 cursor-pointer",children:_.jsx(eA,{className:"w-3 h-3"})}),f]}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"w-8 h-8 rounded flex items-center justify-center flex-shrink-0",children:a}),_.jsx("div",{className:"min-w-0",children:u})]}),_.jsxs("div",{className:"absolute -top-3 left-3 flex gap-2",children:[c,_.jsx("div",{className:xr("px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",bA(h)),children:(h==null?void 0:h.toLowerCase())||"unknown"}),b&&_.jsxs("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgba(224, 242, 254, 0.9)",color:"#0369a1"},children:["batch: ",x]}),p&&m&&_.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgba(236, 254, 255, 0.9)",color:"#0891b2"},children:wh(p,m)})]}),y&&_.jsx("div",{className:"absolute -bottom-2.5 right-2",children:_.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm",style:{backgroundColor:"rgba(240, 253, 244, 0.9)",color:"#166534",fontSize:"0.7rem"},children:y})})]})})]})]})}),Ra={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Dg=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,Pg=e=>"init"in e,Bf=e=>!!e.write,Rg=e=>"v"in e||"e"in e,gc=e=>{if("e"in e)throw e.e;if((Ra?"production":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},ay=Symbol(),bh=e=>e[ay],Td=e=>{var t;return _h(e)&&!((t=bh(e))!=null&&t[1])},_A=(e,t)=>{const n=bh(e);if(n)n[1]=!0,n[0].forEach(i=>i(t));else if((Ra?"production":void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},EA=e=>{if(bh(e))return;const t=[new Set,!1];e[ay]=t;const n=()=>{t[1]=!0};e.then(n,n),e.onCancel=i=>{t[0].add(i)}},_h=e=>typeof(e==null?void 0:e.then)=="function",sy=(e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},Hf=(e,t,n)=>{const i=n(e),a="v"in i,u=i.v,c=Td(i.v)?i.v:null;if(_h(t)){EA(t);for(const f of i.d.keys())sy(e,t,n(f))}i.v=t,delete i.e,(!a||!Object.is(u,i.v))&&(++i.n,c&&_A(c,t))},Mg=(e,t,n)=>{var i;const a=new Set;for(const u of((i=n.get(e))==null?void 0:i.t)||[])n.has(u)&&a.add(u);for(const u of t.p)a.add(u);return a},SA=()=>{const e=new Set,t=()=>{e.forEach(n=>n())};return t.add=n=>(e.add(n),()=>{e.delete(n)}),t},Kf=()=>{const e={},t=new WeakMap,n=i=>{var a,u;(a=t.get(e))==null||a.forEach(c=>c(i)),(u=t.get(i))==null||u.forEach(c=>c())};return n.add=(i,a)=>{const u=i||e,c=(t.has(u)?t:t.set(u,new Set)).get(u);return c.add(a),()=>{c==null||c.delete(a),c.size||t.delete(u)}},n},TA=e=>(e.c||(e.c=Kf()),e.m||(e.m=Kf()),e.u||(e.u=Kf()),e.f||(e.f=SA()),e),NA=Symbol(),kA=(e=new WeakMap,t=new WeakMap,n=new WeakMap,i=new Set,a=new Set,u=new Set,c={},f=(x,...b)=>x.read(...b),h=(x,...b)=>x.write(...b),p=(x,b)=>{var N;return(N=x.unstable_onInit)==null?void 0:N.call(x,b)},m=(x,b)=>{var N;return(N=x.onMount)==null?void 0:N.call(x,b)},...y)=>{const x=y[0]||(U=>{if((Ra?"production":void 0)!=="production"&&!U)throw new Error("Atom is undefined or null");let J=e.get(U);return J||(J={d:new Map,p:new Set,n:0},e.set(U,J),p==null||p(U,ce)),J}),b=y[1]||(()=>{let U,J;const oe=X=>{try{X()}catch(Y){U||(U=!0,J=Y)}};do{c.f&&oe(c.f);const X=new Set,Y=X.add.bind(X);i.forEach(ue=>{var ge;return(ge=t.get(ue))==null?void 0:ge.l.forEach(Y)}),i.clear(),u.forEach(Y),u.clear(),a.forEach(Y),a.clear(),X.forEach(oe),i.size&&N()}while(i.size||u.size||a.size);if(U)throw J}),N=y[2]||(()=>{const U=[],J=new WeakSet,oe=new WeakSet,X=Array.from(i);for(;X.length;){const Y=X[X.length-1],ue=x(Y);if(oe.has(Y)){X.pop();continue}if(J.has(Y)){if(n.get(Y)===ue.n)U.push([Y,ue]);else if((Ra?"production":void 0)!=="production"&&n.has(Y))throw new Error("[Bug] invalidated atom exists");oe.add(Y),X.pop();continue}J.add(Y);for(const ge of Mg(Y,ue,t))J.has(ge)||X.push(ge)}for(let Y=U.length-1;Y>=0;--Y){const[ue,ge]=U[Y];let R=!1;for(const re of ge.d.keys())if(re!==ue&&i.has(re)){R=!0;break}R&&(E(ue),z(ue)),n.delete(ue)}}),E=y[3]||(U=>{var J,oe;const X=x(U);if(Rg(X)&&(t.has(U)&&n.get(U)!==X.n||Array.from(X.d).every(([he,W])=>E(he).n===W)))return X;X.d.clear();let Y=!0;const ue=()=>{t.has(U)&&(z(U),N(),b())},ge=he=>{var W;if(Dg(U,he)){const fe=x(he);if(!Rg(fe))if(Pg(he))Hf(he,he.init,x);else throw new Error("no atom init");return gc(fe)}const ae=E(he);try{return gc(ae)}finally{X.d.set(he,ae.n),Td(X.v)&&sy(U,X.v,ae),(W=t.get(he))==null||W.t.add(U),Y||ue()}};let R,re;const Q={get signal(){return R||(R=new AbortController),R.signal},get setSelf(){return(Ra?"production":void 0)!=="production"&&!Bf(U)&&console.warn("setSelf function cannot be used with read-only atom"),!re&&Bf(U)&&(re=(...he)=>{if((Ra?"production":void 0)!=="production"&&Y&&console.warn("setSelf function cannot be called in sync"),!Y)try{return M(U,...he)}finally{N(),b()}}),re}},ye=X.n;try{const he=f(U,ge,Q);return Hf(U,he,x),_h(he)&&((J=he.onCancel)==null||J.call(he,()=>R==null?void 0:R.abort()),he.then(ue,ue)),X}catch(he){return delete X.v,X.e=he,++X.n,X}finally{Y=!1,ye!==X.n&&n.get(U)===ye&&(n.set(U,X.n),i.add(U),(oe=c.c)==null||oe.call(c,U))}}),C=y[4]||(U=>{const J=[U];for(;J.length;){const oe=J.pop(),X=x(oe);for(const Y of Mg(oe,X,t)){const ue=x(Y);n.set(Y,ue.n),J.push(Y)}}}),M=y[5]||((U,...J)=>{let oe=!0;const X=ue=>gc(E(ue)),Y=(ue,...ge)=>{var R;const re=x(ue);try{if(Dg(U,ue)){if(!Pg(ue))throw new Error("atom not writable");const Q=re.n,ye=ge[0];Hf(ue,ye,x),z(ue),Q!==re.n&&(i.add(ue),(R=c.c)==null||R.call(c,ue),C(ue));return}else return M(ue,...ge)}finally{oe||(N(),b())}};try{return h(U,X,Y,...J)}finally{oe=!1}}),z=y[6]||(U=>{var J;const oe=x(U),X=t.get(U);if(X&&!Td(oe.v)){for(const[Y,ue]of oe.d)if(!X.d.has(Y)){const ge=x(Y);ee(Y).t.add(U),X.d.add(Y),ue!==ge.n&&(i.add(Y),(J=c.c)==null||J.call(c,Y),C(Y))}for(const Y of X.d||[])if(!oe.d.has(Y)){X.d.delete(Y);const ue=B(Y);ue==null||ue.t.delete(U)}}}),ee=y[7]||(U=>{var J;const oe=x(U);let X=t.get(U);if(!X){E(U);for(const Y of oe.d.keys())ee(Y).t.add(U);if(X={l:new Set,d:new Set(oe.d.keys()),t:new Set},t.set(U,X),(J=c.m)==null||J.call(c,U),Bf(U)){const Y=()=>{let ue=!0;const ge=(...R)=>{try{return M(U,...R)}finally{ue||(N(),b())}};try{const R=m(U,ge);R&&(X.u=()=>{ue=!0;try{R()}finally{ue=!1}})}finally{ue=!1}};a.add(Y)}}return X}),B=y[8]||(U=>{var J;const oe=x(U);let X=t.get(U);if(X&&!X.l.size&&!Array.from(X.t).some(Y=>{var ue;return(ue=t.get(Y))==null?void 0:ue.d.has(U)})){X.u&&u.add(X.u),X=void 0,t.delete(U),(J=c.u)==null||J.call(c,U);for(const Y of oe.d.keys()){const ue=B(Y);ue==null||ue.t.delete(U)}return}return X}),le=[e,t,n,i,a,u,c,f,h,p,m,x,b,N,E,C,M,z,ee,B],ce={get:U=>gc(E(U)),set:(U,...J)=>{try{return M(U,...J)}finally{N(),b()}},sub:(U,J)=>{const X=ee(U).l;return X.add(J),b(),()=>{X.delete(J),B(U),b()}}};return Object.defineProperty(ce,NA,{value:le}),ce},uy=kA,IA=TA,Eh={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1};let CA=0;function ur(e,t){const n=`atom${++CA}`,i={toString(){return(Eh?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?i.read=e:(i.init=e,i.read=OA,i.write=AA),t&&(i.write=t),i}function OA(e){return e(this)}function AA(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const DA=()=>{let e=0;const t=IA({}),n=new WeakMap,i=new WeakMap,a=uy(n,i,void 0,void 0,void 0,void 0,t,void 0,(f,h,p,...m)=>e?p(f,...m):f.write(h,p,...m)),u=new Set;return t.m.add(void 0,f=>{u.add(f);const h=n.get(f);h.m=i.get(f)}),t.u.add(void 0,f=>{u.delete(f);const h=n.get(f);delete h.m}),Object.assign(a,{dev4_get_internal_weak_map:()=>n,dev4_get_mounted_atoms:()=>u,dev4_restore_atoms:f=>{const h={read:()=>null,write:(p,m)=>{++e;try{for(const[y,x]of f)"init"in y&&m(y,x)}finally{--e}}};a.set(h)}})},PA=()=>(Eh?"production":void 0)!=="production"?DA():uy();let Rs;const RA=()=>(Rs||(Rs=PA(),(Eh?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=Rs),globalThis.__JOTAI_DEFAULT_STORE__!==Rs&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),Rs),cy={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},MA=k.createContext(void 0),ol=e=>k.useContext(MA)||RA(),ly=e=>typeof(e==null?void 0:e.then)=="function",LA=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},$A=ie.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(LA(e),e)}),zf=new WeakMap,WA=e=>{let t=zf.get(e);return t||(t=new Promise((n,i)=>{let a=e;const u=h=>p=>{a===h&&n(p)},c=h=>p=>{a===h&&i(p)},f=h=>{"onCancel"in h&&typeof h.onCancel=="function"&&h.onCancel(p=>{if((cy?"production":void 0)!=="production"&&p===h)throw new Error("[Bug] p is not updated even after cancelation");ly(p)?(zf.set(p,t),a=p,p.then(u(p),c(p)),f(p)):n(p)})};e.then(u(e),c(e)),f(e)}),zf.set(e,t)),t};function bi(e,t){const n=ol(),[[i,a,u],c]=k.useReducer(p=>{const m=n.get(e);return Object.is(p[0],m)&&p[1]===n&&p[2]===e?p:[m,n,e]},void 0,()=>[n.get(e),n,e]);let f=i;if((a!==n||u!==e)&&(c(),f=n.get(e)),k.useEffect(()=>{const p=n.sub(e,()=>{c()});return c(),p},[n,e,void 0]),k.useDebugValue(f),ly(f)){const p=WA(f);return $A(p)}return f}function ti(e,t){const n=ol();return k.useCallback((...a)=>{if((cy?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...a)},[n,e])}const Lg=e=>{const t=`${e.source_id}->${e.target_id}`;return e.type==="child"?{id:t,source:e.source_id,sourceHandle:`${e.source_id}-right`,target:e.target_id,type:"step",targetHandle:`${e.target_id}-left`}:{id:t,source:e.source_id,sourceHandle:`${e.source_id}-bottom`,target:e.target_id,targetHandle:`${e.target_id}-top`,type:"step",animated:!0}},FA=500;function jA(e){return FA}function BA(e,t,n,i){if(!t.find(u=>u.id===e))return{nodes:t,edges:n};try{const u=HA(i,t),c=new Set(u.map(h=>h.id)),f=n.filter(h=>c.has(h.source)&&c.has(h.target));return{nodes:u,edges:f}}catch(u){return console.error("[DEBUG] Error in layoutRenderTree:",u),{nodes:t,edges:n}}}function HA(e,t){const n=new Map;t.forEach(f=>n.set(f.id,f));const i=new Map,a=new Set,u=(f,h=0,p=0,m=0,y=null)=>{const x=n.get(f.id);if(!x||a.has(x.id))return;a.add(x.id);const b=jA();let N;m===0?N=y!==null?y:0:N=(y!==null?y:0)+m*110;const E={...x,position:{x:p,y:N},style:{...x.style,width:b}};i.set(E.id,E),f.children.forEach((C,M)=>{u(C,h+1,p+b+100,M,E.position.y)})};u(e);const c=[];return t.forEach(f=>{if(i.has(f.id))c.push(i.get(f.id));else{const h={...f,position:f.position||{x:0,y:0}};c.push(h)}}),c}const Ba=ur([]),Sh=ur([]),fy=ur(null),Ko=ur(null),Th=ur(null),Nd=ur(null),al=ur([]),dy=ur(null,(e,t,n)=>{const{data:i,position:a,baseZIndex:u}=n,c=Ni(i)?Br(Jo(i)):ny(i)?du(il(i)):null;c&&t(al,f=>{const h=f.findIndex(p=>p.id===c);return h>=0?f.map((p,m)=>m===h?{...p,position:a,baseZIndex:Math.max(u||0,1e3+f.length)}:p):[...f,{id:c,node:i,position:a,baseZIndex:Math.max(u||0,1e3+f.length)}]})}),KA=ur(null,(e,t,n)=>{t(al,i=>i.filter(a=>a.id!==n))}),zA=ur(null,(e,t)=>{t(al,[])}),Nh=ur(null,(e,t,n)=>{n.nodes!==void 0&&t(Ba,n.nodes),n.edges!==void 0&&t(Sh,n.edges),n.structure!==void 0&&t(Ko,n.structure),n.renderTree!==void 0&&t(Th,n.renderTree),n.rootId!==void 0&&t(fy,n.rootId)}),hy=ur(e=>{const t=e(Ba),n=e(Sh),i=e(Th),a=e(fy);if(!i){const b=t.map(Ag),N=n.map(Lg);return{nodes:b,edges:N}}const u=new Set,c=(b,N=0)=>{if(u.add(b.id),b.children.length>0)for(const E of b.children)c(E,N+1)};c(i);const h=t.filter(b=>u.has(b.id)).map(Ag),m=n.filter(b=>u.has(b.source_id)&&u.has(b.target_id)).map(Lg);if(!a)return{nodes:h,edges:m};const{nodes:y,edges:x}=BA(a,h,m,i);return{nodes:y,edges:x}});var Wc={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Wc.exports;(function(e,t){(function(){var n,i="4.17.21",a=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",f="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",p=500,m="__lodash_placeholder__",y=1,x=2,b=4,N=1,E=2,C=1,M=2,z=4,ee=8,B=16,le=32,ce=64,U=128,J=256,oe=512,X=30,Y="...",ue=800,ge=16,R=1,re=2,Q=3,ye=1/0,he=9007199254740991,W=17976931348623157e292,ae=NaN,fe=4294967295,we=fe-1,ke=fe>>>1,Me=[["ary",U],["bind",C],["bindKey",M],["curry",ee],["curryRight",B],["flip",oe],["partial",le],["partialRight",ce],["rearg",J]],Re="[object Arguments]",Be="[object Array]",Ve="[object AsyncFunction]",qe="[object Boolean]",Ee="[object Date]",nt="[object DOMException]",xt="[object Error]",Ke="[object Function]",Tt="[object GeneratorFunction]",Xe="[object Map]",rt="[object Number]",Nt="[object Null]",Je="[object Object]",He="[object Promise]",jt="[object Proxy]",Bt="[object RegExp]",bt="[object Set]",un="[object String]",Ut="[object Symbol]",cn="[object Undefined]",Jt="[object WeakMap]",Yt="[object WeakSet]",nn="[object ArrayBuffer]",Vt="[object DataView]",ln="[object Float32Array]",hn="[object Float64Array]",_t="[object Int8Array]",Ht="[object Int16Array]",qt="[object Int32Array]",Wt="[object Uint8Array]",Fe="[object Uint8ClampedArray]",Kt="[object Uint16Array]",Dt="[object Uint32Array]",pe=/\b__p \+= '';/g,ne=/\b(__p \+=) '' \+/g,Oe=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Te=/&(?:amp|lt|gt|quot|#39);/g,$e=/[&<>"']/g,Le=RegExp(Te.source),Ye=RegExp($e.source),ft=/<%-([\s\S]+?)%>/g,pt=/<%([\s\S]+?)%>/g,Et=/<%=([\s\S]+?)%>/g,Pn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Gn=/^\w*$/,Er=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,St=/[\\^$.*+?()[\]{}|]/g,Lt=RegExp(St.source),cr=/^\s+/,lr=/\s/,fr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,dr=/\{\n\/\* \[wrapped with (.+)\] \*/,ao=/,? & /,Nn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Zn=/[()=,{}\[\]\/\s]/,Rn=/\\(\\)?/g,zr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,it=/\w*$/,yt=/^[-+]0x[0-9a-f]+$/i,Pt=/^0b[01]+$/i,Xt=/^\[object .+?Constructor\]$/,vn=/^0o[0-7]+$/i,Sr=/^(?:0|[1-9]\d*)$/,Rt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xn=/($^)/,Qn=/['\n\r\u2028\u2029\\]/g,oi="\\ud800-\\udfff",Ur="\\u0300-\\u036f",Ci="\\ufe20-\\ufe2f",so="\\u20d0-\\u20ff",Oi=Ur+Ci+so,Jn="\\u2700-\\u27bf",uo="a-z\\xdf-\\xf6\\xf8-\\xff",Ai="\\xac\\xb1\\xd7\\xf7",ra="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",at="\\u2000-\\u206f",wu=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Za="A-Z\\xc0-\\xd6\\xd8-\\xde",Qa="\\ufe0e\\ufe0f",At=Ai+ra+at+wu,ai="['’]",co="["+oi+"]",si="["+At+"]",Di="["+Oi+"]",ia="\\d+",oa="["+Jn+"]",Ja="["+uo+"]",lo="[^"+oi+At+ia+Jn+uo+Za+"]",aa="\\ud83c[\\udffb-\\udfff]",Tr="(?:"+Di+"|"+aa+")",Pi="[^"+oi+"]",sa="(?:\\ud83c[\\udde6-\\uddff]){2}",es="[\\ud800-\\udbff][\\udc00-\\udfff]",dt="["+Za+"]",ua="\\u200d",xu="(?:"+Ja+"|"+lo+")",kl="(?:"+dt+"|"+lo+")",kn="(?:"+ai+"(?:d|ll|m|re|s|t|ve))?",ui="(?:"+ai+"(?:D|LL|M|RE|S|T|VE))?",fo=Tr+"?",Nr="["+Qa+"]?",bu="(?:"+ua+"(?:"+[Pi,sa,es].join("|")+")"+Nr+fo+")*",_u="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",fn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",er=Nr+fo+bu,ho="(?:"+[oa,sa,es].join("|")+")"+er,po="(?:"+[Pi+Di+"?",Di,sa,es,co].join("|")+")",ts=RegExp(ai,"g"),Yr=RegExp(Di,"g"),ns=RegExp(aa+"(?="+aa+")|"+po+er,"g"),hr=RegExp([dt+"?"+Ja+"+"+kn+"(?="+[si,dt,"$"].join("|")+")",kl+"+"+ui+"(?="+[si,dt+xu,"$"].join("|")+")",dt+"?"+xu+"+"+kn,dt+"+"+ui,fn,_u,ia,ho].join("|"),"g"),rs=RegExp("["+ua+oi+Oi+Qa+"]"),Eu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,is=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],mo=-1,It={};It[ln]=It[hn]=It[_t]=It[Ht]=It[qt]=It[Wt]=It[Fe]=It[Kt]=It[Dt]=!0,It[Re]=It[Be]=It[nn]=It[qe]=It[Vt]=It[Ee]=It[xt]=It[Ke]=It[Xe]=It[rt]=It[Je]=It[Bt]=It[bt]=It[un]=It[Jt]=!1;var Ct={};Ct[Re]=Ct[Be]=Ct[nn]=Ct[Vt]=Ct[qe]=Ct[Ee]=Ct[ln]=Ct[hn]=Ct[_t]=Ct[Ht]=Ct[qt]=Ct[Xe]=Ct[rt]=Ct[Je]=Ct[Bt]=Ct[bt]=Ct[un]=Ct[Ut]=Ct[Wt]=Ct[Fe]=Ct[Kt]=Ct[Dt]=!0,Ct[xt]=Ct[Ke]=Ct[Jt]=!1;var Il={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},go={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Cl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ol={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ca=parseFloat,la=parseInt,fa=typeof Lr=="object"&&Lr&&Lr.Object===Object&&Lr,Al=typeof self=="object"&&self&&self.Object===Object&&self,pn=fa||Al||Function("return this")(),os=t&&!t.nodeType&&t,kr=os&&!0&&e&&!e.nodeType&&e,da=kr&&kr.exports===os,ha=da&&fa.process,bn=function(){try{var I=kr&&kr.require&&kr.require("util").types;return I||ha&&ha.binding&&ha.binding("util")}catch{}}(),vo=bn&&bn.isArrayBuffer,yo=bn&&bn.isDate,as=bn&&bn.isMap,Su=bn&&bn.isRegExp,wo=bn&&bn.isSet,pa=bn&&bn.isTypedArray;function _n(I,L,O){switch(O.length){case 0:return I.call(L);case 1:return I.call(L,O[0]);case 2:return I.call(L,O[0],O[1]);case 3:return I.call(L,O[0],O[1],O[2])}return I.apply(L,O)}function ss(I,L,O,K){for(var F=-1,q=I==null?0:I.length;++F<q;){var te=I[F];L(K,te,O(te),I)}return K}function In(I,L){for(var O=-1,K=I==null?0:I.length;++O<K&&L(I[O],O,I)!==!1;);return I}function yn(I,L){for(var O=I==null?0:I.length;O--&&L(I[O],O,I)!==!1;);return I}function Ri(I,L){for(var O=-1,K=I==null?0:I.length;++O<K;)if(!L(I[O],O,I))return!1;return!0}function Bn(I,L){for(var O=-1,K=I==null?0:I.length,F=0,q=[];++O<K;){var te=I[O];L(te,O,I)&&(q[F++]=te)}return q}function xo(I,L){var O=I==null?0:I.length;return!!O&&$i(I,L,0)>-1}function Mi(I,L,O){for(var K=-1,F=I==null?0:I.length;++K<F;)if(O(L,I[K]))return!0;return!1}function Mt(I,L){for(var O=-1,K=I==null?0:I.length,F=Array(K);++O<K;)F[O]=L(I[O],O,I);return F}function Ir(I,L){for(var O=-1,K=L.length,F=I.length;++O<K;)I[F+O]=L[O];return I}function Li(I,L,O,K){var F=-1,q=I==null?0:I.length;for(K&&q&&(O=I[++F]);++F<q;)O=L(O,I[F],F,I);return O}function us(I,L,O,K){var F=I==null?0:I.length;for(K&&F&&(O=I[--F]);F--;)O=L(O,I[F],F,I);return O}function Cr(I,L){for(var O=-1,K=I==null?0:I.length;++O<K;)if(L(I[O],O,I))return!0;return!1}var cs=Eo("length");function ls(I){return I.split("")}function ma(I){return I.match(Nn)||[]}function ga(I,L,O){var K;return O(I,function(F,q,te){if(L(F,q,te))return K=q,!1}),K}function bo(I,L,O,K){for(var F=I.length,q=O+(K?1:-1);K?q--:++q<F;)if(L(I[q],q,I))return q;return-1}function $i(I,L,O){return L===L?Vr(I,L,O):bo(I,_o,O)}function fs(I,L,O,K){for(var F=O-1,q=I.length;++F<q;)if(K(I[F],L))return F;return-1}function _o(I){return I!==I}function Tu(I,L){var O=I==null?0:I.length;return O?ds(I,L)/O:ae}function Eo(I){return function(L){return L==null?n:L[I]}}function So(I){return function(L){return I==null?n:I[L]}}function Nu(I,L,O,K,F){return F(I,function(q,te,V){O=K?(K=!1,q):L(O,q,te,V)}),O}function ku(I,L){var O=I.length;for(I.sort(L);O--;)I[O]=I[O].value;return I}function ds(I,L){for(var O,K=-1,F=I.length;++K<F;){var q=L(I[K]);q!==n&&(O=O===n?q:O+q)}return O}function va(I,L){for(var O=-1,K=Array(I);++O<I;)K[O]=L(O);return K}function Iu(I,L){return Mt(L,function(O){return[O,I[O]]})}function Cu(I){return I&&I.slice(0,g(I)+1).replace(cr,"")}function Cn(I){return function(L){return I(L)}}function To(I,L){return Mt(L,function(O){return I[O]})}function Wi(I,L){return I.has(L)}function hs(I,L){for(var O=-1,K=I.length;++O<K&&$i(L,I[O],0)>-1;);return O}function Ou(I,L){for(var O=I.length;O--&&$i(L,I[O],0)>-1;);return O}function Dl(I,L){for(var O=I.length,K=0;O--;)I[O]===L&&++K;return K}var Pl=So(Il),ya=So(go);function Or(I){return"\\"+Ol[I]}function Gt(I,L){return I==null?n:I[L]}function Ar(I){return rs.test(I)}function Hn(I){return Eu.test(I)}function Rl(I){for(var L,O=[];!(L=I.next()).done;)O.push(L.value);return O}function No(I){var L=-1,O=Array(I.size);return I.forEach(function(K,F){O[++L]=[F,K]}),O}function ps(I,L){return function(O){return I(L(O))}}function On(I,L){for(var O=-1,K=I.length,F=0,q=[];++O<K;){var te=I[O];(te===L||te===m)&&(I[O]=m,q[F++]=O)}return q}function Fi(I){var L=-1,O=Array(I.size);return I.forEach(function(K){O[++L]=K}),O}function ji(I){var L=-1,O=Array(I.size);return I.forEach(function(K){O[++L]=[K,K]}),O}function Vr(I,L,O){for(var K=O-1,F=I.length;++K<F;)if(I[K]===L)return K;return-1}function Au(I,L,O){for(var K=O+1;K--;)if(I[K]===L)return K;return K}function s(I){return Ar(I)?S(I):cs(I)}function d(I){return Ar(I)?A(I):ls(I)}function g(I){for(var L=I.length;L--&&lr.test(I.charAt(L)););return L}var w=So(Cl);function S(I){for(var L=ns.lastIndex=0;ns.test(I);)++L;return L}function A(I){return I.match(ns)||[]}function $(I){return I.match(hr)||[]}var H=function I(L){L=L==null?pn:Z.defaults(pn.Object(),L,Z.pick(pn,is));var O=L.Array,K=L.Date,F=L.Error,q=L.Function,te=L.Math,V=L.Object,de=L.RegExp,ve=L.String,me=L.TypeError,xe=O.prototype,Ce=q.prototype,De=V.prototype,Ie=L["__core-js_shared__"],Ae=Ce.toString,Se=De.hasOwnProperty,Pe=0,je=function(){var r=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),tt=De.toString,ut=Ae.call(V),ct=pn._,Mn=de("^"+Ae.call(Se).replace(St,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=da?L.Buffer:n,Ft=L.Symbol,rn=L.Uint8Array,ko=et?et.allocUnsafe:n,dn=ps(V.getPrototypeOf,V),qr=V.create,wa=De.propertyIsEnumerable,Du=xe.splice,Xh=Ft?Ft.isConcatSpreadable:n,ms=Ft?Ft.iterator:n,Io=Ft?Ft.toStringTag:n,Pu=function(){try{var r=Po(V,"defineProperty");return r({},"",{}),r}catch{}}(),Tw=L.clearTimeout!==pn.clearTimeout&&L.clearTimeout,Nw=K&&K.now!==pn.Date.now&&K.now,kw=L.setTimeout!==pn.setTimeout&&L.setTimeout,Ru=te.ceil,Mu=te.floor,Ml=V.getOwnPropertySymbols,Iw=et?et.isBuffer:n,Gh=L.isFinite,Cw=xe.join,Ow=ps(V.keys,V),mn=te.max,An=te.min,Aw=K.now,Dw=L.parseInt,Zh=te.random,Pw=xe.reverse,Ll=Po(L,"DataView"),gs=Po(L,"Map"),$l=Po(L,"Promise"),xa=Po(L,"Set"),vs=Po(L,"WeakMap"),ys=Po(V,"create"),Lu=vs&&new vs,ba={},Rw=Ro(Ll),Mw=Ro(gs),Lw=Ro($l),$w=Ro(xa),Ww=Ro(vs),$u=Ft?Ft.prototype:n,ws=$u?$u.valueOf:n,Qh=$u?$u.toString:n;function D(r){if(en(r)&&!ot(r)&&!(r instanceof vt)){if(r instanceof pr)return r;if(Se.call(r,"__wrapped__"))return Jp(r)}return new pr(r)}var _a=function(){function r(){}return function(o){if(!Zt(o))return{};if(qr)return qr(o);r.prototype=o;var l=new r;return r.prototype=n,l}}();function Wu(){}function pr(r,o){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!o,this.__index__=0,this.__values__=n}D.templateSettings={escape:ft,evaluate:pt,interpolate:Et,variable:"",imports:{_:D}},D.prototype=Wu.prototype,D.prototype.constructor=D,pr.prototype=_a(Wu.prototype),pr.prototype.constructor=pr;function vt(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=fe,this.__views__=[]}function Fw(){var r=new vt(this.__wrapped__);return r.__actions__=Kn(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=Kn(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=Kn(this.__views__),r}function jw(){if(this.__filtered__){var r=new vt(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function Bw(){var r=this.__wrapped__.value(),o=this.__dir__,l=ot(r),v=o<0,T=l?r.length:0,P=Jx(0,T,this.__views__),j=P.start,G=P.end,se=G-j,be=v?G:j-1,_e=this.__iteratees__,Ne=_e.length,We=0,ze=An(se,this.__takeCount__);if(!l||!v&&T==se&&ze==se)return _p(r,this.__actions__);var Ze=[];e:for(;se--&&We<ze;){be+=o;for(var lt=-1,Qe=r[be];++lt<Ne;){var gt=_e[lt],wt=gt.iteratee,rr=gt.type,Wn=wt(Qe);if(rr==re)Qe=Wn;else if(!Wn){if(rr==R)continue e;break e}}Ze[We++]=Qe}return Ze}vt.prototype=_a(Wu.prototype),vt.prototype.constructor=vt;function Co(r){var o=-1,l=r==null?0:r.length;for(this.clear();++o<l;){var v=r[o];this.set(v[0],v[1])}}function Hw(){this.__data__=ys?ys(null):{},this.size=0}function Kw(r){var o=this.has(r)&&delete this.__data__[r];return this.size-=o?1:0,o}function zw(r){var o=this.__data__;if(ys){var l=o[r];return l===h?n:l}return Se.call(o,r)?o[r]:n}function Uw(r){var o=this.__data__;return ys?o[r]!==n:Se.call(o,r)}function Yw(r,o){var l=this.__data__;return this.size+=this.has(r)?0:1,l[r]=ys&&o===n?h:o,this}Co.prototype.clear=Hw,Co.prototype.delete=Kw,Co.prototype.get=zw,Co.prototype.has=Uw,Co.prototype.set=Yw;function ci(r){var o=-1,l=r==null?0:r.length;for(this.clear();++o<l;){var v=r[o];this.set(v[0],v[1])}}function Vw(){this.__data__=[],this.size=0}function qw(r){var o=this.__data__,l=Fu(o,r);if(l<0)return!1;var v=o.length-1;return l==v?o.pop():Du.call(o,l,1),--this.size,!0}function Xw(r){var o=this.__data__,l=Fu(o,r);return l<0?n:o[l][1]}function Gw(r){return Fu(this.__data__,r)>-1}function Zw(r,o){var l=this.__data__,v=Fu(l,r);return v<0?(++this.size,l.push([r,o])):l[v][1]=o,this}ci.prototype.clear=Vw,ci.prototype.delete=qw,ci.prototype.get=Xw,ci.prototype.has=Gw,ci.prototype.set=Zw;function li(r){var o=-1,l=r==null?0:r.length;for(this.clear();++o<l;){var v=r[o];this.set(v[0],v[1])}}function Qw(){this.size=0,this.__data__={hash:new Co,map:new(gs||ci),string:new Co}}function Jw(r){var o=Zu(this,r).delete(r);return this.size-=o?1:0,o}function ex(r){return Zu(this,r).get(r)}function tx(r){return Zu(this,r).has(r)}function nx(r,o){var l=Zu(this,r),v=l.size;return l.set(r,o),this.size+=l.size==v?0:1,this}li.prototype.clear=Qw,li.prototype.delete=Jw,li.prototype.get=ex,li.prototype.has=tx,li.prototype.set=nx;function Oo(r){var o=-1,l=r==null?0:r.length;for(this.__data__=new li;++o<l;)this.add(r[o])}function rx(r){return this.__data__.set(r,h),this}function ix(r){return this.__data__.has(r)}Oo.prototype.add=Oo.prototype.push=rx,Oo.prototype.has=ix;function Dr(r){var o=this.__data__=new ci(r);this.size=o.size}function ox(){this.__data__=new ci,this.size=0}function ax(r){var o=this.__data__,l=o.delete(r);return this.size=o.size,l}function sx(r){return this.__data__.get(r)}function ux(r){return this.__data__.has(r)}function cx(r,o){var l=this.__data__;if(l instanceof ci){var v=l.__data__;if(!gs||v.length<a-1)return v.push([r,o]),this.size=++l.size,this;l=this.__data__=new li(v)}return l.set(r,o),this.size=l.size,this}Dr.prototype.clear=ox,Dr.prototype.delete=ax,Dr.prototype.get=sx,Dr.prototype.has=ux,Dr.prototype.set=cx;function Jh(r,o){var l=ot(r),v=!l&&Mo(r),T=!l&&!v&&Ui(r),P=!l&&!v&&!T&&Na(r),j=l||v||T||P,G=j?va(r.length,ve):[],se=G.length;for(var be in r)(o||Se.call(r,be))&&!(j&&(be=="length"||T&&(be=="offset"||be=="parent")||P&&(be=="buffer"||be=="byteLength"||be=="byteOffset")||pi(be,se)))&&G.push(be);return G}function ep(r){var o=r.length;return o?r[ql(0,o-1)]:n}function lx(r,o){return Qu(Kn(r),Ao(o,0,r.length))}function fx(r){return Qu(Kn(r))}function Wl(r,o,l){(l!==n&&!Pr(r[o],l)||l===n&&!(o in r))&&fi(r,o,l)}function xs(r,o,l){var v=r[o];(!(Se.call(r,o)&&Pr(v,l))||l===n&&!(o in r))&&fi(r,o,l)}function Fu(r,o){for(var l=r.length;l--;)if(Pr(r[l][0],o))return l;return-1}function dx(r,o,l,v){return Bi(r,function(T,P,j){o(v,T,l(T),j)}),v}function tp(r,o){return r&&Gr(o,wn(o),r)}function hx(r,o){return r&&Gr(o,Un(o),r)}function fi(r,o,l){o=="__proto__"&&Pu?Pu(r,o,{configurable:!0,enumerable:!0,value:l,writable:!0}):r[o]=l}function Fl(r,o){for(var l=-1,v=o.length,T=O(v),P=r==null;++l<v;)T[l]=P?n:xf(r,o[l]);return T}function Ao(r,o,l){return r===r&&(l!==n&&(r=r<=l?r:l),o!==n&&(r=r>=o?r:o)),r}function mr(r,o,l,v,T,P){var j,G=o&y,se=o&x,be=o&b;if(l&&(j=T?l(r,v,T,P):l(r)),j!==n)return j;if(!Zt(r))return r;var _e=ot(r);if(_e){if(j=tb(r),!G)return Kn(r,j)}else{var Ne=Dn(r),We=Ne==Ke||Ne==Tt;if(Ui(r))return Tp(r,G);if(Ne==Je||Ne==Re||We&&!T){if(j=se||We?{}:zp(r),!G)return se?zx(r,hx(j,r)):Kx(r,tp(j,r))}else{if(!Ct[Ne])return T?r:{};j=nb(r,Ne,G)}}P||(P=new Dr);var ze=P.get(r);if(ze)return ze;P.set(r,j),wm(r)?r.forEach(function(Qe){j.add(mr(Qe,o,l,Qe,r,P))}):vm(r)&&r.forEach(function(Qe,gt){j.set(gt,mr(Qe,o,l,gt,r,P))});var Ze=be?se?af:of:se?Un:wn,lt=_e?n:Ze(r);return In(lt||r,function(Qe,gt){lt&&(gt=Qe,Qe=r[gt]),xs(j,gt,mr(Qe,o,l,gt,r,P))}),j}function px(r){var o=wn(r);return function(l){return np(l,r,o)}}function np(r,o,l){var v=l.length;if(r==null)return!v;for(r=V(r);v--;){var T=l[v],P=o[T],j=r[T];if(j===n&&!(T in r)||!P(j))return!1}return!0}function rp(r,o,l){if(typeof r!="function")throw new me(c);return ks(function(){r.apply(n,l)},o)}function bs(r,o,l,v){var T=-1,P=xo,j=!0,G=r.length,se=[],be=o.length;if(!G)return se;l&&(o=Mt(o,Cn(l))),v?(P=Mi,j=!1):o.length>=a&&(P=Wi,j=!1,o=new Oo(o));e:for(;++T<G;){var _e=r[T],Ne=l==null?_e:l(_e);if(_e=v||_e!==0?_e:0,j&&Ne===Ne){for(var We=be;We--;)if(o[We]===Ne)continue e;se.push(_e)}else P(o,Ne,v)||se.push(_e)}return se}var Bi=Op(Xr),ip=Op(Bl,!0);function mx(r,o){var l=!0;return Bi(r,function(v,T,P){return l=!!o(v,T,P),l}),l}function ju(r,o,l){for(var v=-1,T=r.length;++v<T;){var P=r[v],j=o(P);if(j!=null&&(G===n?j===j&&!nr(j):l(j,G)))var G=j,se=P}return se}function gx(r,o,l,v){var T=r.length;for(l=st(l),l<0&&(l=-l>T?0:T+l),v=v===n||v>T?T:st(v),v<0&&(v+=T),v=l>v?0:bm(v);l<v;)r[l++]=o;return r}function op(r,o){var l=[];return Bi(r,function(v,T,P){o(v,T,P)&&l.push(v)}),l}function En(r,o,l,v,T){var P=-1,j=r.length;for(l||(l=ib),T||(T=[]);++P<j;){var G=r[P];o>0&&l(G)?o>1?En(G,o-1,l,v,T):Ir(T,G):v||(T[T.length]=G)}return T}var jl=Ap(),ap=Ap(!0);function Xr(r,o){return r&&jl(r,o,wn)}function Bl(r,o){return r&&ap(r,o,wn)}function Bu(r,o){return Bn(o,function(l){return mi(r[l])})}function Do(r,o){o=Ki(o,r);for(var l=0,v=o.length;r!=null&&l<v;)r=r[Zr(o[l++])];return l&&l==v?r:n}function sp(r,o,l){var v=o(r);return ot(r)?v:Ir(v,l(r))}function Ln(r){return r==null?r===n?cn:Nt:Io&&Io in V(r)?Qx(r):fb(r)}function Hl(r,o){return r>o}function vx(r,o){return r!=null&&Se.call(r,o)}function yx(r,o){return r!=null&&o in V(r)}function wx(r,o,l){return r>=An(o,l)&&r<mn(o,l)}function Kl(r,o,l){for(var v=l?Mi:xo,T=r[0].length,P=r.length,j=P,G=O(P),se=1/0,be=[];j--;){var _e=r[j];j&&o&&(_e=Mt(_e,Cn(o))),se=An(_e.length,se),G[j]=!l&&(o||T>=120&&_e.length>=120)?new Oo(j&&_e):n}_e=r[0];var Ne=-1,We=G[0];e:for(;++Ne<T&&be.length<se;){var ze=_e[Ne],Ze=o?o(ze):ze;if(ze=l||ze!==0?ze:0,!(We?Wi(We,Ze):v(be,Ze,l))){for(j=P;--j;){var lt=G[j];if(!(lt?Wi(lt,Ze):v(r[j],Ze,l)))continue e}We&&We.push(Ze),be.push(ze)}}return be}function xx(r,o,l,v){return Xr(r,function(T,P,j){o(v,l(T),P,j)}),v}function _s(r,o,l){o=Ki(o,r),r=qp(r,o);var v=r==null?r:r[Zr(vr(o))];return v==null?n:_n(v,r,l)}function up(r){return en(r)&&Ln(r)==Re}function bx(r){return en(r)&&Ln(r)==nn}function _x(r){return en(r)&&Ln(r)==Ee}function Es(r,o,l,v,T){return r===o?!0:r==null||o==null||!en(r)&&!en(o)?r!==r&&o!==o:Ex(r,o,l,v,Es,T)}function Ex(r,o,l,v,T,P){var j=ot(r),G=ot(o),se=j?Be:Dn(r),be=G?Be:Dn(o);se=se==Re?Je:se,be=be==Re?Je:be;var _e=se==Je,Ne=be==Je,We=se==be;if(We&&Ui(r)){if(!Ui(o))return!1;j=!0,_e=!1}if(We&&!_e)return P||(P=new Dr),j||Na(r)?Bp(r,o,l,v,T,P):Gx(r,o,se,l,v,T,P);if(!(l&N)){var ze=_e&&Se.call(r,"__wrapped__"),Ze=Ne&&Se.call(o,"__wrapped__");if(ze||Ze){var lt=ze?r.value():r,Qe=Ze?o.value():o;return P||(P=new Dr),T(lt,Qe,l,v,P)}}return We?(P||(P=new Dr),Zx(r,o,l,v,T,P)):!1}function Sx(r){return en(r)&&Dn(r)==Xe}function zl(r,o,l,v){var T=l.length,P=T,j=!v;if(r==null)return!P;for(r=V(r);T--;){var G=l[T];if(j&&G[2]?G[1]!==r[G[0]]:!(G[0]in r))return!1}for(;++T<P;){G=l[T];var se=G[0],be=r[se],_e=G[1];if(j&&G[2]){if(be===n&&!(se in r))return!1}else{var Ne=new Dr;if(v)var We=v(be,_e,se,r,o,Ne);if(!(We===n?Es(_e,be,N|E,v,Ne):We))return!1}}return!0}function cp(r){if(!Zt(r)||ab(r))return!1;var o=mi(r)?Mn:Xt;return o.test(Ro(r))}function Tx(r){return en(r)&&Ln(r)==Bt}function Nx(r){return en(r)&&Dn(r)==bt}function kx(r){return en(r)&&ic(r.length)&&!!It[Ln(r)]}function lp(r){return typeof r=="function"?r:r==null?Yn:typeof r=="object"?ot(r)?hp(r[0],r[1]):dp(r):Dm(r)}function Ul(r){if(!Ns(r))return Ow(r);var o=[];for(var l in V(r))Se.call(r,l)&&l!="constructor"&&o.push(l);return o}function Ix(r){if(!Zt(r))return lb(r);var o=Ns(r),l=[];for(var v in r)v=="constructor"&&(o||!Se.call(r,v))||l.push(v);return l}function Yl(r,o){return r<o}function fp(r,o){var l=-1,v=zn(r)?O(r.length):[];return Bi(r,function(T,P,j){v[++l]=o(T,P,j)}),v}function dp(r){var o=uf(r);return o.length==1&&o[0][2]?Yp(o[0][0],o[0][1]):function(l){return l===r||zl(l,r,o)}}function hp(r,o){return lf(r)&&Up(o)?Yp(Zr(r),o):function(l){var v=xf(l,r);return v===n&&v===o?bf(l,r):Es(o,v,N|E)}}function Hu(r,o,l,v,T){r!==o&&jl(o,function(P,j){if(T||(T=new Dr),Zt(P))Cx(r,o,j,l,Hu,v,T);else{var G=v?v(df(r,j),P,j+"",r,o,T):n;G===n&&(G=P),Wl(r,j,G)}},Un)}function Cx(r,o,l,v,T,P,j){var G=df(r,l),se=df(o,l),be=j.get(se);if(be){Wl(r,l,be);return}var _e=P?P(G,se,l+"",r,o,j):n,Ne=_e===n;if(Ne){var We=ot(se),ze=!We&&Ui(se),Ze=!We&&!ze&&Na(se);_e=se,We||ze||Ze?ot(G)?_e=G:on(G)?_e=Kn(G):ze?(Ne=!1,_e=Tp(se,!0)):Ze?(Ne=!1,_e=Np(se,!0)):_e=[]:Is(se)||Mo(se)?(_e=G,Mo(G)?_e=_m(G):(!Zt(G)||mi(G))&&(_e=zp(se))):Ne=!1}Ne&&(j.set(se,_e),T(_e,se,v,P,j),j.delete(se)),Wl(r,l,_e)}function pp(r,o){var l=r.length;if(l)return o+=o<0?l:0,pi(o,l)?r[o]:n}function mp(r,o,l){o.length?o=Mt(o,function(P){return ot(P)?function(j){return Do(j,P.length===1?P[0]:P)}:P}):o=[Yn];var v=-1;o=Mt(o,Cn(Ge()));var T=fp(r,function(P,j,G){var se=Mt(o,function(be){return be(P)});return{criteria:se,index:++v,value:P}});return ku(T,function(P,j){return Hx(P,j,l)})}function Ox(r,o){return gp(r,o,function(l,v){return bf(r,v)})}function gp(r,o,l){for(var v=-1,T=o.length,P={};++v<T;){var j=o[v],G=Do(r,j);l(G,j)&&Ss(P,Ki(j,r),G)}return P}function Ax(r){return function(o){return Do(o,r)}}function Vl(r,o,l,v){var T=v?fs:$i,P=-1,j=o.length,G=r;for(r===o&&(o=Kn(o)),l&&(G=Mt(r,Cn(l)));++P<j;)for(var se=0,be=o[P],_e=l?l(be):be;(se=T(G,_e,se,v))>-1;)G!==r&&Du.call(G,se,1),Du.call(r,se,1);return r}function vp(r,o){for(var l=r?o.length:0,v=l-1;l--;){var T=o[l];if(l==v||T!==P){var P=T;pi(T)?Du.call(r,T,1):Zl(r,T)}}return r}function ql(r,o){return r+Mu(Zh()*(o-r+1))}function Dx(r,o,l,v){for(var T=-1,P=mn(Ru((o-r)/(l||1)),0),j=O(P);P--;)j[v?P:++T]=r,r+=l;return j}function Xl(r,o){var l="";if(!r||o<1||o>he)return l;do o%2&&(l+=r),o=Mu(o/2),o&&(r+=r);while(o);return l}function ht(r,o){return hf(Vp(r,o,Yn),r+"")}function Px(r){return ep(ka(r))}function Rx(r,o){var l=ka(r);return Qu(l,Ao(o,0,l.length))}function Ss(r,o,l,v){if(!Zt(r))return r;o=Ki(o,r);for(var T=-1,P=o.length,j=P-1,G=r;G!=null&&++T<P;){var se=Zr(o[T]),be=l;if(se==="__proto__"||se==="constructor"||se==="prototype")return r;if(T!=j){var _e=G[se];be=v?v(_e,se,G):n,be===n&&(be=Zt(_e)?_e:pi(o[T+1])?[]:{})}xs(G,se,be),G=G[se]}return r}var yp=Lu?function(r,o){return Lu.set(r,o),r}:Yn,Mx=Pu?function(r,o){return Pu(r,"toString",{configurable:!0,enumerable:!1,value:Ef(o),writable:!0})}:Yn;function Lx(r){return Qu(ka(r))}function gr(r,o,l){var v=-1,T=r.length;o<0&&(o=-o>T?0:T+o),l=l>T?T:l,l<0&&(l+=T),T=o>l?0:l-o>>>0,o>>>=0;for(var P=O(T);++v<T;)P[v]=r[v+o];return P}function $x(r,o){var l;return Bi(r,function(v,T,P){return l=o(v,T,P),!l}),!!l}function Ku(r,o,l){var v=0,T=r==null?v:r.length;if(typeof o=="number"&&o===o&&T<=ke){for(;v<T;){var P=v+T>>>1,j=r[P];j!==null&&!nr(j)&&(l?j<=o:j<o)?v=P+1:T=P}return T}return Gl(r,o,Yn,l)}function Gl(r,o,l,v){var T=0,P=r==null?0:r.length;if(P===0)return 0;o=l(o);for(var j=o!==o,G=o===null,se=nr(o),be=o===n;T<P;){var _e=Mu((T+P)/2),Ne=l(r[_e]),We=Ne!==n,ze=Ne===null,Ze=Ne===Ne,lt=nr(Ne);if(j)var Qe=v||Ze;else be?Qe=Ze&&(v||We):G?Qe=Ze&&We&&(v||!ze):se?Qe=Ze&&We&&!ze&&(v||!lt):ze||lt?Qe=!1:Qe=v?Ne<=o:Ne<o;Qe?T=_e+1:P=_e}return An(P,we)}function wp(r,o){for(var l=-1,v=r.length,T=0,P=[];++l<v;){var j=r[l],G=o?o(j):j;if(!l||!Pr(G,se)){var se=G;P[T++]=j===0?0:j}}return P}function xp(r){return typeof r=="number"?r:nr(r)?ae:+r}function tr(r){if(typeof r=="string")return r;if(ot(r))return Mt(r,tr)+"";if(nr(r))return Qh?Qh.call(r):"";var o=r+"";return o=="0"&&1/r==-ye?"-0":o}function Hi(r,o,l){var v=-1,T=xo,P=r.length,j=!0,G=[],se=G;if(l)j=!1,T=Mi;else if(P>=a){var be=o?null:qx(r);if(be)return Fi(be);j=!1,T=Wi,se=new Oo}else se=o?[]:G;e:for(;++v<P;){var _e=r[v],Ne=o?o(_e):_e;if(_e=l||_e!==0?_e:0,j&&Ne===Ne){for(var We=se.length;We--;)if(se[We]===Ne)continue e;o&&se.push(Ne),G.push(_e)}else T(se,Ne,l)||(se!==G&&se.push(Ne),G.push(_e))}return G}function Zl(r,o){return o=Ki(o,r),r=qp(r,o),r==null||delete r[Zr(vr(o))]}function bp(r,o,l,v){return Ss(r,o,l(Do(r,o)),v)}function zu(r,o,l,v){for(var T=r.length,P=v?T:-1;(v?P--:++P<T)&&o(r[P],P,r););return l?gr(r,v?0:P,v?P+1:T):gr(r,v?P+1:0,v?T:P)}function _p(r,o){var l=r;return l instanceof vt&&(l=l.value()),Li(o,function(v,T){return T.func.apply(T.thisArg,Ir([v],T.args))},l)}function Ql(r,o,l){var v=r.length;if(v<2)return v?Hi(r[0]):[];for(var T=-1,P=O(v);++T<v;)for(var j=r[T],G=-1;++G<v;)G!=T&&(P[T]=bs(P[T]||j,r[G],o,l));return Hi(En(P,1),o,l)}function Ep(r,o,l){for(var v=-1,T=r.length,P=o.length,j={};++v<T;){var G=v<P?o[v]:n;l(j,r[v],G)}return j}function Jl(r){return on(r)?r:[]}function ef(r){return typeof r=="function"?r:Yn}function Ki(r,o){return ot(r)?r:lf(r,o)?[r]:Qp(kt(r))}var Wx=ht;function zi(r,o,l){var v=r.length;return l=l===n?v:l,!o&&l>=v?r:gr(r,o,l)}var Sp=Tw||function(r){return pn.clearTimeout(r)};function Tp(r,o){if(o)return r.slice();var l=r.length,v=ko?ko(l):new r.constructor(l);return r.copy(v),v}function tf(r){var o=new r.constructor(r.byteLength);return new rn(o).set(new rn(r)),o}function Fx(r,o){var l=o?tf(r.buffer):r.buffer;return new r.constructor(l,r.byteOffset,r.byteLength)}function jx(r){var o=new r.constructor(r.source,it.exec(r));return o.lastIndex=r.lastIndex,o}function Bx(r){return ws?V(ws.call(r)):{}}function Np(r,o){var l=o?tf(r.buffer):r.buffer;return new r.constructor(l,r.byteOffset,r.length)}function kp(r,o){if(r!==o){var l=r!==n,v=r===null,T=r===r,P=nr(r),j=o!==n,G=o===null,se=o===o,be=nr(o);if(!G&&!be&&!P&&r>o||P&&j&&se&&!G&&!be||v&&j&&se||!l&&se||!T)return 1;if(!v&&!P&&!be&&r<o||be&&l&&T&&!v&&!P||G&&l&&T||!j&&T||!se)return-1}return 0}function Hx(r,o,l){for(var v=-1,T=r.criteria,P=o.criteria,j=T.length,G=l.length;++v<j;){var se=kp(T[v],P[v]);if(se){if(v>=G)return se;var be=l[v];return se*(be=="desc"?-1:1)}}return r.index-o.index}function Ip(r,o,l,v){for(var T=-1,P=r.length,j=l.length,G=-1,se=o.length,be=mn(P-j,0),_e=O(se+be),Ne=!v;++G<se;)_e[G]=o[G];for(;++T<j;)(Ne||T<P)&&(_e[l[T]]=r[T]);for(;be--;)_e[G++]=r[T++];return _e}function Cp(r,o,l,v){for(var T=-1,P=r.length,j=-1,G=l.length,se=-1,be=o.length,_e=mn(P-G,0),Ne=O(_e+be),We=!v;++T<_e;)Ne[T]=r[T];for(var ze=T;++se<be;)Ne[ze+se]=o[se];for(;++j<G;)(We||T<P)&&(Ne[ze+l[j]]=r[T++]);return Ne}function Kn(r,o){var l=-1,v=r.length;for(o||(o=O(v));++l<v;)o[l]=r[l];return o}function Gr(r,o,l,v){var T=!l;l||(l={});for(var P=-1,j=o.length;++P<j;){var G=o[P],se=v?v(l[G],r[G],G,l,r):n;se===n&&(se=r[G]),T?fi(l,G,se):xs(l,G,se)}return l}function Kx(r,o){return Gr(r,cf(r),o)}function zx(r,o){return Gr(r,Hp(r),o)}function Uu(r,o){return function(l,v){var T=ot(l)?ss:dx,P=o?o():{};return T(l,r,Ge(v,2),P)}}function Ea(r){return ht(function(o,l){var v=-1,T=l.length,P=T>1?l[T-1]:n,j=T>2?l[2]:n;for(P=r.length>3&&typeof P=="function"?(T--,P):n,j&&$n(l[0],l[1],j)&&(P=T<3?n:P,T=1),o=V(o);++v<T;){var G=l[v];G&&r(o,G,v,P)}return o})}function Op(r,o){return function(l,v){if(l==null)return l;if(!zn(l))return r(l,v);for(var T=l.length,P=o?T:-1,j=V(l);(o?P--:++P<T)&&v(j[P],P,j)!==!1;);return l}}function Ap(r){return function(o,l,v){for(var T=-1,P=V(o),j=v(o),G=j.length;G--;){var se=j[r?G:++T];if(l(P[se],se,P)===!1)break}return o}}function Ux(r,o,l){var v=o&C,T=Ts(r);function P(){var j=this&&this!==pn&&this instanceof P?T:r;return j.apply(v?l:this,arguments)}return P}function Dp(r){return function(o){o=kt(o);var l=Ar(o)?d(o):n,v=l?l[0]:o.charAt(0),T=l?zi(l,1).join(""):o.slice(1);return v[r]()+T}}function Sa(r){return function(o){return Li(Om(Cm(o).replace(ts,"")),r,"")}}function Ts(r){return function(){var o=arguments;switch(o.length){case 0:return new r;case 1:return new r(o[0]);case 2:return new r(o[0],o[1]);case 3:return new r(o[0],o[1],o[2]);case 4:return new r(o[0],o[1],o[2],o[3]);case 5:return new r(o[0],o[1],o[2],o[3],o[4]);case 6:return new r(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return new r(o[0],o[1],o[2],o[3],o[4],o[5],o[6])}var l=_a(r.prototype),v=r.apply(l,o);return Zt(v)?v:l}}function Yx(r,o,l){var v=Ts(r);function T(){for(var P=arguments.length,j=O(P),G=P,se=Ta(T);G--;)j[G]=arguments[G];var be=P<3&&j[0]!==se&&j[P-1]!==se?[]:On(j,se);if(P-=be.length,P<l)return $p(r,o,Yu,T.placeholder,n,j,be,n,n,l-P);var _e=this&&this!==pn&&this instanceof T?v:r;return _n(_e,this,j)}return T}function Pp(r){return function(o,l,v){var T=V(o);if(!zn(o)){var P=Ge(l,3);o=wn(o),l=function(G){return P(T[G],G,T)}}var j=r(o,l,v);return j>-1?T[P?o[j]:j]:n}}function Rp(r){return hi(function(o){var l=o.length,v=l,T=pr.prototype.thru;for(r&&o.reverse();v--;){var P=o[v];if(typeof P!="function")throw new me(c);if(T&&!j&&Gu(P)=="wrapper")var j=new pr([],!0)}for(v=j?v:l;++v<l;){P=o[v];var G=Gu(P),se=G=="wrapper"?sf(P):n;se&&ff(se[0])&&se[1]==(U|ee|le|J)&&!se[4].length&&se[9]==1?j=j[Gu(se[0])].apply(j,se[3]):j=P.length==1&&ff(P)?j[G]():j.thru(P)}return function(){var be=arguments,_e=be[0];if(j&&be.length==1&&ot(_e))return j.plant(_e).value();for(var Ne=0,We=l?o[Ne].apply(this,be):_e;++Ne<l;)We=o[Ne].call(this,We);return We}})}function Yu(r,o,l,v,T,P,j,G,se,be){var _e=o&U,Ne=o&C,We=o&M,ze=o&(ee|B),Ze=o&oe,lt=We?n:Ts(r);function Qe(){for(var gt=arguments.length,wt=O(gt),rr=gt;rr--;)wt[rr]=arguments[rr];if(ze)var Wn=Ta(Qe),ir=Dl(wt,Wn);if(v&&(wt=Ip(wt,v,T,ze)),P&&(wt=Cp(wt,P,j,ze)),gt-=ir,ze&&gt<be){var an=On(wt,Wn);return $p(r,o,Yu,Qe.placeholder,l,wt,an,G,se,be-gt)}var Rr=Ne?l:this,vi=We?Rr[r]:r;return gt=wt.length,G?wt=db(wt,G):Ze&&gt>1&&wt.reverse(),_e&&se<gt&&(wt.length=se),this&&this!==pn&&this instanceof Qe&&(vi=lt||Ts(vi)),vi.apply(Rr,wt)}return Qe}function Mp(r,o){return function(l,v){return xx(l,r,o(v),{})}}function Vu(r,o){return function(l,v){var T;if(l===n&&v===n)return o;if(l!==n&&(T=l),v!==n){if(T===n)return v;typeof l=="string"||typeof v=="string"?(l=tr(l),v=tr(v)):(l=xp(l),v=xp(v)),T=r(l,v)}return T}}function nf(r){return hi(function(o){return o=Mt(o,Cn(Ge())),ht(function(l){var v=this;return r(o,function(T){return _n(T,v,l)})})})}function qu(r,o){o=o===n?" ":tr(o);var l=o.length;if(l<2)return l?Xl(o,r):o;var v=Xl(o,Ru(r/s(o)));return Ar(o)?zi(d(v),0,r).join(""):v.slice(0,r)}function Vx(r,o,l,v){var T=o&C,P=Ts(r);function j(){for(var G=-1,se=arguments.length,be=-1,_e=v.length,Ne=O(_e+se),We=this&&this!==pn&&this instanceof j?P:r;++be<_e;)Ne[be]=v[be];for(;se--;)Ne[be++]=arguments[++G];return _n(We,T?l:this,Ne)}return j}function Lp(r){return function(o,l,v){return v&&typeof v!="number"&&$n(o,l,v)&&(l=v=n),o=gi(o),l===n?(l=o,o=0):l=gi(l),v=v===n?o<l?1:-1:gi(v),Dx(o,l,v,r)}}function Xu(r){return function(o,l){return typeof o=="string"&&typeof l=="string"||(o=yr(o),l=yr(l)),r(o,l)}}function $p(r,o,l,v,T,P,j,G,se,be){var _e=o&ee,Ne=_e?j:n,We=_e?n:j,ze=_e?P:n,Ze=_e?n:P;o|=_e?le:ce,o&=~(_e?ce:le),o&z||(o&=~(C|M));var lt=[r,o,T,ze,Ne,Ze,We,G,se,be],Qe=l.apply(n,lt);return ff(r)&&Xp(Qe,lt),Qe.placeholder=v,Gp(Qe,r,o)}function rf(r){var o=te[r];return function(l,v){if(l=yr(l),v=v==null?0:An(st(v),292),v&&Gh(l)){var T=(kt(l)+"e").split("e"),P=o(T[0]+"e"+(+T[1]+v));return T=(kt(P)+"e").split("e"),+(T[0]+"e"+(+T[1]-v))}return o(l)}}var qx=xa&&1/Fi(new xa([,-0]))[1]==ye?function(r){return new xa(r)}:Nf;function Wp(r){return function(o){var l=Dn(o);return l==Xe?No(o):l==bt?ji(o):Iu(o,r(o))}}function di(r,o,l,v,T,P,j,G){var se=o&M;if(!se&&typeof r!="function")throw new me(c);var be=v?v.length:0;if(be||(o&=~(le|ce),v=T=n),j=j===n?j:mn(st(j),0),G=G===n?G:st(G),be-=T?T.length:0,o&ce){var _e=v,Ne=T;v=T=n}var We=se?n:sf(r),ze=[r,o,l,v,T,_e,Ne,P,j,G];if(We&&cb(ze,We),r=ze[0],o=ze[1],l=ze[2],v=ze[3],T=ze[4],G=ze[9]=ze[9]===n?se?0:r.length:mn(ze[9]-be,0),!G&&o&(ee|B)&&(o&=~(ee|B)),!o||o==C)var Ze=Ux(r,o,l);else o==ee||o==B?Ze=Yx(r,o,G):(o==le||o==(C|le))&&!T.length?Ze=Vx(r,o,l,v):Ze=Yu.apply(n,ze);var lt=We?yp:Xp;return Gp(lt(Ze,ze),r,o)}function Fp(r,o,l,v){return r===n||Pr(r,De[l])&&!Se.call(v,l)?o:r}function jp(r,o,l,v,T,P){return Zt(r)&&Zt(o)&&(P.set(o,r),Hu(r,o,n,jp,P),P.delete(o)),r}function Xx(r){return Is(r)?n:r}function Bp(r,o,l,v,T,P){var j=l&N,G=r.length,se=o.length;if(G!=se&&!(j&&se>G))return!1;var be=P.get(r),_e=P.get(o);if(be&&_e)return be==o&&_e==r;var Ne=-1,We=!0,ze=l&E?new Oo:n;for(P.set(r,o),P.set(o,r);++Ne<G;){var Ze=r[Ne],lt=o[Ne];if(v)var Qe=j?v(lt,Ze,Ne,o,r,P):v(Ze,lt,Ne,r,o,P);if(Qe!==n){if(Qe)continue;We=!1;break}if(ze){if(!Cr(o,function(gt,wt){if(!Wi(ze,wt)&&(Ze===gt||T(Ze,gt,l,v,P)))return ze.push(wt)})){We=!1;break}}else if(!(Ze===lt||T(Ze,lt,l,v,P))){We=!1;break}}return P.delete(r),P.delete(o),We}function Gx(r,o,l,v,T,P,j){switch(l){case Vt:if(r.byteLength!=o.byteLength||r.byteOffset!=o.byteOffset)return!1;r=r.buffer,o=o.buffer;case nn:return!(r.byteLength!=o.byteLength||!P(new rn(r),new rn(o)));case qe:case Ee:case rt:return Pr(+r,+o);case xt:return r.name==o.name&&r.message==o.message;case Bt:case un:return r==o+"";case Xe:var G=No;case bt:var se=v&N;if(G||(G=Fi),r.size!=o.size&&!se)return!1;var be=j.get(r);if(be)return be==o;v|=E,j.set(r,o);var _e=Bp(G(r),G(o),v,T,P,j);return j.delete(r),_e;case Ut:if(ws)return ws.call(r)==ws.call(o)}return!1}function Zx(r,o,l,v,T,P){var j=l&N,G=of(r),se=G.length,be=of(o),_e=be.length;if(se!=_e&&!j)return!1;for(var Ne=se;Ne--;){var We=G[Ne];if(!(j?We in o:Se.call(o,We)))return!1}var ze=P.get(r),Ze=P.get(o);if(ze&&Ze)return ze==o&&Ze==r;var lt=!0;P.set(r,o),P.set(o,r);for(var Qe=j;++Ne<se;){We=G[Ne];var gt=r[We],wt=o[We];if(v)var rr=j?v(wt,gt,We,o,r,P):v(gt,wt,We,r,o,P);if(!(rr===n?gt===wt||T(gt,wt,l,v,P):rr)){lt=!1;break}Qe||(Qe=We=="constructor")}if(lt&&!Qe){var Wn=r.constructor,ir=o.constructor;Wn!=ir&&"constructor"in r&&"constructor"in o&&!(typeof Wn=="function"&&Wn instanceof Wn&&typeof ir=="function"&&ir instanceof ir)&&(lt=!1)}return P.delete(r),P.delete(o),lt}function hi(r){return hf(Vp(r,n,nm),r+"")}function of(r){return sp(r,wn,cf)}function af(r){return sp(r,Un,Hp)}var sf=Lu?function(r){return Lu.get(r)}:Nf;function Gu(r){for(var o=r.name+"",l=ba[o],v=Se.call(ba,o)?l.length:0;v--;){var T=l[v],P=T.func;if(P==null||P==r)return T.name}return o}function Ta(r){var o=Se.call(D,"placeholder")?D:r;return o.placeholder}function Ge(){var r=D.iteratee||Sf;return r=r===Sf?lp:r,arguments.length?r(arguments[0],arguments[1]):r}function Zu(r,o){var l=r.__data__;return ob(o)?l[typeof o=="string"?"string":"hash"]:l.map}function uf(r){for(var o=wn(r),l=o.length;l--;){var v=o[l],T=r[v];o[l]=[v,T,Up(T)]}return o}function Po(r,o){var l=Gt(r,o);return cp(l)?l:n}function Qx(r){var o=Se.call(r,Io),l=r[Io];try{r[Io]=n;var v=!0}catch{}var T=tt.call(r);return v&&(o?r[Io]=l:delete r[Io]),T}var cf=Ml?function(r){return r==null?[]:(r=V(r),Bn(Ml(r),function(o){return wa.call(r,o)}))}:kf,Hp=Ml?function(r){for(var o=[];r;)Ir(o,cf(r)),r=dn(r);return o}:kf,Dn=Ln;(Ll&&Dn(new Ll(new ArrayBuffer(1)))!=Vt||gs&&Dn(new gs)!=Xe||$l&&Dn($l.resolve())!=He||xa&&Dn(new xa)!=bt||vs&&Dn(new vs)!=Jt)&&(Dn=function(r){var o=Ln(r),l=o==Je?r.constructor:n,v=l?Ro(l):"";if(v)switch(v){case Rw:return Vt;case Mw:return Xe;case Lw:return He;case $w:return bt;case Ww:return Jt}return o});function Jx(r,o,l){for(var v=-1,T=l.length;++v<T;){var P=l[v],j=P.size;switch(P.type){case"drop":r+=j;break;case"dropRight":o-=j;break;case"take":o=An(o,r+j);break;case"takeRight":r=mn(r,o-j);break}}return{start:r,end:o}}function eb(r){var o=r.match(dr);return o?o[1].split(ao):[]}function Kp(r,o,l){o=Ki(o,r);for(var v=-1,T=o.length,P=!1;++v<T;){var j=Zr(o[v]);if(!(P=r!=null&&l(r,j)))break;r=r[j]}return P||++v!=T?P:(T=r==null?0:r.length,!!T&&ic(T)&&pi(j,T)&&(ot(r)||Mo(r)))}function tb(r){var o=r.length,l=new r.constructor(o);return o&&typeof r[0]=="string"&&Se.call(r,"index")&&(l.index=r.index,l.input=r.input),l}function zp(r){return typeof r.constructor=="function"&&!Ns(r)?_a(dn(r)):{}}function nb(r,o,l){var v=r.constructor;switch(o){case nn:return tf(r);case qe:case Ee:return new v(+r);case Vt:return Fx(r,l);case ln:case hn:case _t:case Ht:case qt:case Wt:case Fe:case Kt:case Dt:return Np(r,l);case Xe:return new v;case rt:case un:return new v(r);case Bt:return jx(r);case bt:return new v;case Ut:return Bx(r)}}function rb(r,o){var l=o.length;if(!l)return r;var v=l-1;return o[v]=(l>1?"& ":"")+o[v],o=o.join(l>2?", ":" "),r.replace(fr,`{
/* [wrapped with `+o+`] */
`)}function ib(r){return ot(r)||Mo(r)||!!(Xh&&r&&r[Xh])}function pi(r,o){var l=typeof r;return o=o??he,!!o&&(l=="number"||l!="symbol"&&Sr.test(r))&&r>-1&&r%1==0&&r<o}function $n(r,o,l){if(!Zt(l))return!1;var v=typeof o;return(v=="number"?zn(l)&&pi(o,l.length):v=="string"&&o in l)?Pr(l[o],r):!1}function lf(r,o){if(ot(r))return!1;var l=typeof r;return l=="number"||l=="symbol"||l=="boolean"||r==null||nr(r)?!0:Gn.test(r)||!Pn.test(r)||o!=null&&r in V(o)}function ob(r){var o=typeof r;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?r!=="__proto__":r===null}function ff(r){var o=Gu(r),l=D[o];if(typeof l!="function"||!(o in vt.prototype))return!1;if(r===l)return!0;var v=sf(l);return!!v&&r===v[0]}function ab(r){return!!je&&je in r}var sb=Ie?mi:If;function Ns(r){var o=r&&r.constructor,l=typeof o=="function"&&o.prototype||De;return r===l}function Up(r){return r===r&&!Zt(r)}function Yp(r,o){return function(l){return l==null?!1:l[r]===o&&(o!==n||r in V(l))}}function ub(r){var o=nc(r,function(v){return l.size===p&&l.clear(),v}),l=o.cache;return o}function cb(r,o){var l=r[1],v=o[1],T=l|v,P=T<(C|M|U),j=v==U&&l==ee||v==U&&l==J&&r[7].length<=o[8]||v==(U|J)&&o[7].length<=o[8]&&l==ee;if(!(P||j))return r;v&C&&(r[2]=o[2],T|=l&C?0:z);var G=o[3];if(G){var se=r[3];r[3]=se?Ip(se,G,o[4]):G,r[4]=se?On(r[3],m):o[4]}return G=o[5],G&&(se=r[5],r[5]=se?Cp(se,G,o[6]):G,r[6]=se?On(r[5],m):o[6]),G=o[7],G&&(r[7]=G),v&U&&(r[8]=r[8]==null?o[8]:An(r[8],o[8])),r[9]==null&&(r[9]=o[9]),r[0]=o[0],r[1]=T,r}function lb(r){var o=[];if(r!=null)for(var l in V(r))o.push(l);return o}function fb(r){return tt.call(r)}function Vp(r,o,l){return o=mn(o===n?r.length-1:o,0),function(){for(var v=arguments,T=-1,P=mn(v.length-o,0),j=O(P);++T<P;)j[T]=v[o+T];T=-1;for(var G=O(o+1);++T<o;)G[T]=v[T];return G[o]=l(j),_n(r,this,G)}}function qp(r,o){return o.length<2?r:Do(r,gr(o,0,-1))}function db(r,o){for(var l=r.length,v=An(o.length,l),T=Kn(r);v--;){var P=o[v];r[v]=pi(P,l)?T[P]:n}return r}function df(r,o){if(!(o==="constructor"&&typeof r[o]=="function")&&o!="__proto__")return r[o]}var Xp=Zp(yp),ks=kw||function(r,o){return pn.setTimeout(r,o)},hf=Zp(Mx);function Gp(r,o,l){var v=o+"";return hf(r,rb(v,hb(eb(v),l)))}function Zp(r){var o=0,l=0;return function(){var v=Aw(),T=ge-(v-l);if(l=v,T>0){if(++o>=ue)return arguments[0]}else o=0;return r.apply(n,arguments)}}function Qu(r,o){var l=-1,v=r.length,T=v-1;for(o=o===n?v:o;++l<o;){var P=ql(l,T),j=r[P];r[P]=r[l],r[l]=j}return r.length=o,r}var Qp=ub(function(r){var o=[];return r.charCodeAt(0)===46&&o.push(""),r.replace(Er,function(l,v,T,P){o.push(T?P.replace(Rn,"$1"):v||l)}),o});function Zr(r){if(typeof r=="string"||nr(r))return r;var o=r+"";return o=="0"&&1/r==-ye?"-0":o}function Ro(r){if(r!=null){try{return Ae.call(r)}catch{}try{return r+""}catch{}}return""}function hb(r,o){return In(Me,function(l){var v="_."+l[0];o&l[1]&&!xo(r,v)&&r.push(v)}),r.sort()}function Jp(r){if(r instanceof vt)return r.clone();var o=new pr(r.__wrapped__,r.__chain__);return o.__actions__=Kn(r.__actions__),o.__index__=r.__index__,o.__values__=r.__values__,o}function pb(r,o,l){(l?$n(r,o,l):o===n)?o=1:o=mn(st(o),0);var v=r==null?0:r.length;if(!v||o<1)return[];for(var T=0,P=0,j=O(Ru(v/o));T<v;)j[P++]=gr(r,T,T+=o);return j}function mb(r){for(var o=-1,l=r==null?0:r.length,v=0,T=[];++o<l;){var P=r[o];P&&(T[v++]=P)}return T}function gb(){var r=arguments.length;if(!r)return[];for(var o=O(r-1),l=arguments[0],v=r;v--;)o[v-1]=arguments[v];return Ir(ot(l)?Kn(l):[l],En(o,1))}var vb=ht(function(r,o){return on(r)?bs(r,En(o,1,on,!0)):[]}),yb=ht(function(r,o){var l=vr(o);return on(l)&&(l=n),on(r)?bs(r,En(o,1,on,!0),Ge(l,2)):[]}),wb=ht(function(r,o){var l=vr(o);return on(l)&&(l=n),on(r)?bs(r,En(o,1,on,!0),n,l):[]});function xb(r,o,l){var v=r==null?0:r.length;return v?(o=l||o===n?1:st(o),gr(r,o<0?0:o,v)):[]}function bb(r,o,l){var v=r==null?0:r.length;return v?(o=l||o===n?1:st(o),o=v-o,gr(r,0,o<0?0:o)):[]}function _b(r,o){return r&&r.length?zu(r,Ge(o,3),!0,!0):[]}function Eb(r,o){return r&&r.length?zu(r,Ge(o,3),!0):[]}function Sb(r,o,l,v){var T=r==null?0:r.length;return T?(l&&typeof l!="number"&&$n(r,o,l)&&(l=0,v=T),gx(r,o,l,v)):[]}function em(r,o,l){var v=r==null?0:r.length;if(!v)return-1;var T=l==null?0:st(l);return T<0&&(T=mn(v+T,0)),bo(r,Ge(o,3),T)}function tm(r,o,l){var v=r==null?0:r.length;if(!v)return-1;var T=v-1;return l!==n&&(T=st(l),T=l<0?mn(v+T,0):An(T,v-1)),bo(r,Ge(o,3),T,!0)}function nm(r){var o=r==null?0:r.length;return o?En(r,1):[]}function Tb(r){var o=r==null?0:r.length;return o?En(r,ye):[]}function Nb(r,o){var l=r==null?0:r.length;return l?(o=o===n?1:st(o),En(r,o)):[]}function kb(r){for(var o=-1,l=r==null?0:r.length,v={};++o<l;){var T=r[o];v[T[0]]=T[1]}return v}function rm(r){return r&&r.length?r[0]:n}function Ib(r,o,l){var v=r==null?0:r.length;if(!v)return-1;var T=l==null?0:st(l);return T<0&&(T=mn(v+T,0)),$i(r,o,T)}function Cb(r){var o=r==null?0:r.length;return o?gr(r,0,-1):[]}var Ob=ht(function(r){var o=Mt(r,Jl);return o.length&&o[0]===r[0]?Kl(o):[]}),Ab=ht(function(r){var o=vr(r),l=Mt(r,Jl);return o===vr(l)?o=n:l.pop(),l.length&&l[0]===r[0]?Kl(l,Ge(o,2)):[]}),Db=ht(function(r){var o=vr(r),l=Mt(r,Jl);return o=typeof o=="function"?o:n,o&&l.pop(),l.length&&l[0]===r[0]?Kl(l,n,o):[]});function Pb(r,o){return r==null?"":Cw.call(r,o)}function vr(r){var o=r==null?0:r.length;return o?r[o-1]:n}function Rb(r,o,l){var v=r==null?0:r.length;if(!v)return-1;var T=v;return l!==n&&(T=st(l),T=T<0?mn(v+T,0):An(T,v-1)),o===o?Au(r,o,T):bo(r,_o,T,!0)}function Mb(r,o){return r&&r.length?pp(r,st(o)):n}var Lb=ht(im);function im(r,o){return r&&r.length&&o&&o.length?Vl(r,o):r}function $b(r,o,l){return r&&r.length&&o&&o.length?Vl(r,o,Ge(l,2)):r}function Wb(r,o,l){return r&&r.length&&o&&o.length?Vl(r,o,n,l):r}var Fb=hi(function(r,o){var l=r==null?0:r.length,v=Fl(r,o);return vp(r,Mt(o,function(T){return pi(T,l)?+T:T}).sort(kp)),v});function jb(r,o){var l=[];if(!(r&&r.length))return l;var v=-1,T=[],P=r.length;for(o=Ge(o,3);++v<P;){var j=r[v];o(j,v,r)&&(l.push(j),T.push(v))}return vp(r,T),l}function pf(r){return r==null?r:Pw.call(r)}function Bb(r,o,l){var v=r==null?0:r.length;return v?(l&&typeof l!="number"&&$n(r,o,l)?(o=0,l=v):(o=o==null?0:st(o),l=l===n?v:st(l)),gr(r,o,l)):[]}function Hb(r,o){return Ku(r,o)}function Kb(r,o,l){return Gl(r,o,Ge(l,2))}function zb(r,o){var l=r==null?0:r.length;if(l){var v=Ku(r,o);if(v<l&&Pr(r[v],o))return v}return-1}function Ub(r,o){return Ku(r,o,!0)}function Yb(r,o,l){return Gl(r,o,Ge(l,2),!0)}function Vb(r,o){var l=r==null?0:r.length;if(l){var v=Ku(r,o,!0)-1;if(Pr(r[v],o))return v}return-1}function qb(r){return r&&r.length?wp(r):[]}function Xb(r,o){return r&&r.length?wp(r,Ge(o,2)):[]}function Gb(r){var o=r==null?0:r.length;return o?gr(r,1,o):[]}function Zb(r,o,l){return r&&r.length?(o=l||o===n?1:st(o),gr(r,0,o<0?0:o)):[]}function Qb(r,o,l){var v=r==null?0:r.length;return v?(o=l||o===n?1:st(o),o=v-o,gr(r,o<0?0:o,v)):[]}function Jb(r,o){return r&&r.length?zu(r,Ge(o,3),!1,!0):[]}function e_(r,o){return r&&r.length?zu(r,Ge(o,3)):[]}var t_=ht(function(r){return Hi(En(r,1,on,!0))}),n_=ht(function(r){var o=vr(r);return on(o)&&(o=n),Hi(En(r,1,on,!0),Ge(o,2))}),r_=ht(function(r){var o=vr(r);return o=typeof o=="function"?o:n,Hi(En(r,1,on,!0),n,o)});function i_(r){return r&&r.length?Hi(r):[]}function o_(r,o){return r&&r.length?Hi(r,Ge(o,2)):[]}function a_(r,o){return o=typeof o=="function"?o:n,r&&r.length?Hi(r,n,o):[]}function mf(r){if(!(r&&r.length))return[];var o=0;return r=Bn(r,function(l){if(on(l))return o=mn(l.length,o),!0}),va(o,function(l){return Mt(r,Eo(l))})}function om(r,o){if(!(r&&r.length))return[];var l=mf(r);return o==null?l:Mt(l,function(v){return _n(o,n,v)})}var s_=ht(function(r,o){return on(r)?bs(r,o):[]}),u_=ht(function(r){return Ql(Bn(r,on))}),c_=ht(function(r){var o=vr(r);return on(o)&&(o=n),Ql(Bn(r,on),Ge(o,2))}),l_=ht(function(r){var o=vr(r);return o=typeof o=="function"?o:n,Ql(Bn(r,on),n,o)}),f_=ht(mf);function d_(r,o){return Ep(r||[],o||[],xs)}function h_(r,o){return Ep(r||[],o||[],Ss)}var p_=ht(function(r){var o=r.length,l=o>1?r[o-1]:n;return l=typeof l=="function"?(r.pop(),l):n,om(r,l)});function am(r){var o=D(r);return o.__chain__=!0,o}function m_(r,o){return o(r),r}function Ju(r,o){return o(r)}var g_=hi(function(r){var o=r.length,l=o?r[0]:0,v=this.__wrapped__,T=function(P){return Fl(P,r)};return o>1||this.__actions__.length||!(v instanceof vt)||!pi(l)?this.thru(T):(v=v.slice(l,+l+(o?1:0)),v.__actions__.push({func:Ju,args:[T],thisArg:n}),new pr(v,this.__chain__).thru(function(P){return o&&!P.length&&P.push(n),P}))});function v_(){return am(this)}function y_(){return new pr(this.value(),this.__chain__)}function w_(){this.__values__===n&&(this.__values__=xm(this.value()));var r=this.__index__>=this.__values__.length,o=r?n:this.__values__[this.__index__++];return{done:r,value:o}}function x_(){return this}function b_(r){for(var o,l=this;l instanceof Wu;){var v=Jp(l);v.__index__=0,v.__values__=n,o?T.__wrapped__=v:o=v;var T=v;l=l.__wrapped__}return T.__wrapped__=r,o}function __(){var r=this.__wrapped__;if(r instanceof vt){var o=r;return this.__actions__.length&&(o=new vt(this)),o=o.reverse(),o.__actions__.push({func:Ju,args:[pf],thisArg:n}),new pr(o,this.__chain__)}return this.thru(pf)}function E_(){return _p(this.__wrapped__,this.__actions__)}var S_=Uu(function(r,o,l){Se.call(r,l)?++r[l]:fi(r,l,1)});function T_(r,o,l){var v=ot(r)?Ri:mx;return l&&$n(r,o,l)&&(o=n),v(r,Ge(o,3))}function N_(r,o){var l=ot(r)?Bn:op;return l(r,Ge(o,3))}var k_=Pp(em),I_=Pp(tm);function C_(r,o){return En(ec(r,o),1)}function O_(r,o){return En(ec(r,o),ye)}function A_(r,o,l){return l=l===n?1:st(l),En(ec(r,o),l)}function sm(r,o){var l=ot(r)?In:Bi;return l(r,Ge(o,3))}function um(r,o){var l=ot(r)?yn:ip;return l(r,Ge(o,3))}var D_=Uu(function(r,o,l){Se.call(r,l)?r[l].push(o):fi(r,l,[o])});function P_(r,o,l,v){r=zn(r)?r:ka(r),l=l&&!v?st(l):0;var T=r.length;return l<0&&(l=mn(T+l,0)),oc(r)?l<=T&&r.indexOf(o,l)>-1:!!T&&$i(r,o,l)>-1}var R_=ht(function(r,o,l){var v=-1,T=typeof o=="function",P=zn(r)?O(r.length):[];return Bi(r,function(j){P[++v]=T?_n(o,j,l):_s(j,o,l)}),P}),M_=Uu(function(r,o,l){fi(r,l,o)});function ec(r,o){var l=ot(r)?Mt:fp;return l(r,Ge(o,3))}function L_(r,o,l,v){return r==null?[]:(ot(o)||(o=o==null?[]:[o]),l=v?n:l,ot(l)||(l=l==null?[]:[l]),mp(r,o,l))}var $_=Uu(function(r,o,l){r[l?0:1].push(o)},function(){return[[],[]]});function W_(r,o,l){var v=ot(r)?Li:Nu,T=arguments.length<3;return v(r,Ge(o,4),l,T,Bi)}function F_(r,o,l){var v=ot(r)?us:Nu,T=arguments.length<3;return v(r,Ge(o,4),l,T,ip)}function j_(r,o){var l=ot(r)?Bn:op;return l(r,rc(Ge(o,3)))}function B_(r){var o=ot(r)?ep:Px;return o(r)}function H_(r,o,l){(l?$n(r,o,l):o===n)?o=1:o=st(o);var v=ot(r)?lx:Rx;return v(r,o)}function K_(r){var o=ot(r)?fx:Lx;return o(r)}function z_(r){if(r==null)return 0;if(zn(r))return oc(r)?s(r):r.length;var o=Dn(r);return o==Xe||o==bt?r.size:Ul(r).length}function U_(r,o,l){var v=ot(r)?Cr:$x;return l&&$n(r,o,l)&&(o=n),v(r,Ge(o,3))}var Y_=ht(function(r,o){if(r==null)return[];var l=o.length;return l>1&&$n(r,o[0],o[1])?o=[]:l>2&&$n(o[0],o[1],o[2])&&(o=[o[0]]),mp(r,En(o,1),[])}),tc=Nw||function(){return pn.Date.now()};function V_(r,o){if(typeof o!="function")throw new me(c);return r=st(r),function(){if(--r<1)return o.apply(this,arguments)}}function cm(r,o,l){return o=l?n:o,o=r&&o==null?r.length:o,di(r,U,n,n,n,n,o)}function lm(r,o){var l;if(typeof o!="function")throw new me(c);return r=st(r),function(){return--r>0&&(l=o.apply(this,arguments)),r<=1&&(o=n),l}}var gf=ht(function(r,o,l){var v=C;if(l.length){var T=On(l,Ta(gf));v|=le}return di(r,v,o,l,T)}),fm=ht(function(r,o,l){var v=C|M;if(l.length){var T=On(l,Ta(fm));v|=le}return di(o,v,r,l,T)});function dm(r,o,l){o=l?n:o;var v=di(r,ee,n,n,n,n,n,o);return v.placeholder=dm.placeholder,v}function hm(r,o,l){o=l?n:o;var v=di(r,B,n,n,n,n,n,o);return v.placeholder=hm.placeholder,v}function pm(r,o,l){var v,T,P,j,G,se,be=0,_e=!1,Ne=!1,We=!0;if(typeof r!="function")throw new me(c);o=yr(o)||0,Zt(l)&&(_e=!!l.leading,Ne="maxWait"in l,P=Ne?mn(yr(l.maxWait)||0,o):P,We="trailing"in l?!!l.trailing:We);function ze(an){var Rr=v,vi=T;return v=T=n,be=an,j=r.apply(vi,Rr),j}function Ze(an){return be=an,G=ks(gt,o),_e?ze(an):j}function lt(an){var Rr=an-se,vi=an-be,Pm=o-Rr;return Ne?An(Pm,P-vi):Pm}function Qe(an){var Rr=an-se,vi=an-be;return se===n||Rr>=o||Rr<0||Ne&&vi>=P}function gt(){var an=tc();if(Qe(an))return wt(an);G=ks(gt,lt(an))}function wt(an){return G=n,We&&v?ze(an):(v=T=n,j)}function rr(){G!==n&&Sp(G),be=0,v=se=T=G=n}function Wn(){return G===n?j:wt(tc())}function ir(){var an=tc(),Rr=Qe(an);if(v=arguments,T=this,se=an,Rr){if(G===n)return Ze(se);if(Ne)return Sp(G),G=ks(gt,o),ze(se)}return G===n&&(G=ks(gt,o)),j}return ir.cancel=rr,ir.flush=Wn,ir}var q_=ht(function(r,o){return rp(r,1,o)}),X_=ht(function(r,o,l){return rp(r,yr(o)||0,l)});function G_(r){return di(r,oe)}function nc(r,o){if(typeof r!="function"||o!=null&&typeof o!="function")throw new me(c);var l=function(){var v=arguments,T=o?o.apply(this,v):v[0],P=l.cache;if(P.has(T))return P.get(T);var j=r.apply(this,v);return l.cache=P.set(T,j)||P,j};return l.cache=new(nc.Cache||li),l}nc.Cache=li;function rc(r){if(typeof r!="function")throw new me(c);return function(){var o=arguments;switch(o.length){case 0:return!r.call(this);case 1:return!r.call(this,o[0]);case 2:return!r.call(this,o[0],o[1]);case 3:return!r.call(this,o[0],o[1],o[2])}return!r.apply(this,o)}}function Z_(r){return lm(2,r)}var Q_=Wx(function(r,o){o=o.length==1&&ot(o[0])?Mt(o[0],Cn(Ge())):Mt(En(o,1),Cn(Ge()));var l=o.length;return ht(function(v){for(var T=-1,P=An(v.length,l);++T<P;)v[T]=o[T].call(this,v[T]);return _n(r,this,v)})}),vf=ht(function(r,o){var l=On(o,Ta(vf));return di(r,le,n,o,l)}),mm=ht(function(r,o){var l=On(o,Ta(mm));return di(r,ce,n,o,l)}),J_=hi(function(r,o){return di(r,J,n,n,n,o)});function e1(r,o){if(typeof r!="function")throw new me(c);return o=o===n?o:st(o),ht(r,o)}function t1(r,o){if(typeof r!="function")throw new me(c);return o=o==null?0:mn(st(o),0),ht(function(l){var v=l[o],T=zi(l,0,o);return v&&Ir(T,v),_n(r,this,T)})}function n1(r,o,l){var v=!0,T=!0;if(typeof r!="function")throw new me(c);return Zt(l)&&(v="leading"in l?!!l.leading:v,T="trailing"in l?!!l.trailing:T),pm(r,o,{leading:v,maxWait:o,trailing:T})}function r1(r){return cm(r,1)}function i1(r,o){return vf(ef(o),r)}function o1(){if(!arguments.length)return[];var r=arguments[0];return ot(r)?r:[r]}function a1(r){return mr(r,b)}function s1(r,o){return o=typeof o=="function"?o:n,mr(r,b,o)}function u1(r){return mr(r,y|b)}function c1(r,o){return o=typeof o=="function"?o:n,mr(r,y|b,o)}function l1(r,o){return o==null||np(r,o,wn(o))}function Pr(r,o){return r===o||r!==r&&o!==o}var f1=Xu(Hl),d1=Xu(function(r,o){return r>=o}),Mo=up(function(){return arguments}())?up:function(r){return en(r)&&Se.call(r,"callee")&&!wa.call(r,"callee")},ot=O.isArray,h1=vo?Cn(vo):bx;function zn(r){return r!=null&&ic(r.length)&&!mi(r)}function on(r){return en(r)&&zn(r)}function p1(r){return r===!0||r===!1||en(r)&&Ln(r)==qe}var Ui=Iw||If,m1=yo?Cn(yo):_x;function g1(r){return en(r)&&r.nodeType===1&&!Is(r)}function v1(r){if(r==null)return!0;if(zn(r)&&(ot(r)||typeof r=="string"||typeof r.splice=="function"||Ui(r)||Na(r)||Mo(r)))return!r.length;var o=Dn(r);if(o==Xe||o==bt)return!r.size;if(Ns(r))return!Ul(r).length;for(var l in r)if(Se.call(r,l))return!1;return!0}function y1(r,o){return Es(r,o)}function w1(r,o,l){l=typeof l=="function"?l:n;var v=l?l(r,o):n;return v===n?Es(r,o,n,l):!!v}function yf(r){if(!en(r))return!1;var o=Ln(r);return o==xt||o==nt||typeof r.message=="string"&&typeof r.name=="string"&&!Is(r)}function x1(r){return typeof r=="number"&&Gh(r)}function mi(r){if(!Zt(r))return!1;var o=Ln(r);return o==Ke||o==Tt||o==Ve||o==jt}function gm(r){return typeof r=="number"&&r==st(r)}function ic(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=he}function Zt(r){var o=typeof r;return r!=null&&(o=="object"||o=="function")}function en(r){return r!=null&&typeof r=="object"}var vm=as?Cn(as):Sx;function b1(r,o){return r===o||zl(r,o,uf(o))}function _1(r,o,l){return l=typeof l=="function"?l:n,zl(r,o,uf(o),l)}function E1(r){return ym(r)&&r!=+r}function S1(r){if(sb(r))throw new F(u);return cp(r)}function T1(r){return r===null}function N1(r){return r==null}function ym(r){return typeof r=="number"||en(r)&&Ln(r)==rt}function Is(r){if(!en(r)||Ln(r)!=Je)return!1;var o=dn(r);if(o===null)return!0;var l=Se.call(o,"constructor")&&o.constructor;return typeof l=="function"&&l instanceof l&&Ae.call(l)==ut}var wf=Su?Cn(Su):Tx;function k1(r){return gm(r)&&r>=-he&&r<=he}var wm=wo?Cn(wo):Nx;function oc(r){return typeof r=="string"||!ot(r)&&en(r)&&Ln(r)==un}function nr(r){return typeof r=="symbol"||en(r)&&Ln(r)==Ut}var Na=pa?Cn(pa):kx;function I1(r){return r===n}function C1(r){return en(r)&&Dn(r)==Jt}function O1(r){return en(r)&&Ln(r)==Yt}var A1=Xu(Yl),D1=Xu(function(r,o){return r<=o});function xm(r){if(!r)return[];if(zn(r))return oc(r)?d(r):Kn(r);if(ms&&r[ms])return Rl(r[ms]());var o=Dn(r),l=o==Xe?No:o==bt?Fi:ka;return l(r)}function gi(r){if(!r)return r===0?r:0;if(r=yr(r),r===ye||r===-ye){var o=r<0?-1:1;return o*W}return r===r?r:0}function st(r){var o=gi(r),l=o%1;return o===o?l?o-l:o:0}function bm(r){return r?Ao(st(r),0,fe):0}function yr(r){if(typeof r=="number")return r;if(nr(r))return ae;if(Zt(r)){var o=typeof r.valueOf=="function"?r.valueOf():r;r=Zt(o)?o+"":o}if(typeof r!="string")return r===0?r:+r;r=Cu(r);var l=Pt.test(r);return l||vn.test(r)?la(r.slice(2),l?2:8):yt.test(r)?ae:+r}function _m(r){return Gr(r,Un(r))}function P1(r){return r?Ao(st(r),-he,he):r===0?r:0}function kt(r){return r==null?"":tr(r)}var R1=Ea(function(r,o){if(Ns(o)||zn(o)){Gr(o,wn(o),r);return}for(var l in o)Se.call(o,l)&&xs(r,l,o[l])}),Em=Ea(function(r,o){Gr(o,Un(o),r)}),ac=Ea(function(r,o,l,v){Gr(o,Un(o),r,v)}),M1=Ea(function(r,o,l,v){Gr(o,wn(o),r,v)}),L1=hi(Fl);function $1(r,o){var l=_a(r);return o==null?l:tp(l,o)}var W1=ht(function(r,o){r=V(r);var l=-1,v=o.length,T=v>2?o[2]:n;for(T&&$n(o[0],o[1],T)&&(v=1);++l<v;)for(var P=o[l],j=Un(P),G=-1,se=j.length;++G<se;){var be=j[G],_e=r[be];(_e===n||Pr(_e,De[be])&&!Se.call(r,be))&&(r[be]=P[be])}return r}),F1=ht(function(r){return r.push(n,jp),_n(Sm,n,r)});function j1(r,o){return ga(r,Ge(o,3),Xr)}function B1(r,o){return ga(r,Ge(o,3),Bl)}function H1(r,o){return r==null?r:jl(r,Ge(o,3),Un)}function K1(r,o){return r==null?r:ap(r,Ge(o,3),Un)}function z1(r,o){return r&&Xr(r,Ge(o,3))}function U1(r,o){return r&&Bl(r,Ge(o,3))}function Y1(r){return r==null?[]:Bu(r,wn(r))}function V1(r){return r==null?[]:Bu(r,Un(r))}function xf(r,o,l){var v=r==null?n:Do(r,o);return v===n?l:v}function q1(r,o){return r!=null&&Kp(r,o,vx)}function bf(r,o){return r!=null&&Kp(r,o,yx)}var X1=Mp(function(r,o,l){o!=null&&typeof o.toString!="function"&&(o=tt.call(o)),r[o]=l},Ef(Yn)),G1=Mp(function(r,o,l){o!=null&&typeof o.toString!="function"&&(o=tt.call(o)),Se.call(r,o)?r[o].push(l):r[o]=[l]},Ge),Z1=ht(_s);function wn(r){return zn(r)?Jh(r):Ul(r)}function Un(r){return zn(r)?Jh(r,!0):Ix(r)}function Q1(r,o){var l={};return o=Ge(o,3),Xr(r,function(v,T,P){fi(l,o(v,T,P),v)}),l}function J1(r,o){var l={};return o=Ge(o,3),Xr(r,function(v,T,P){fi(l,T,o(v,T,P))}),l}var eE=Ea(function(r,o,l){Hu(r,o,l)}),Sm=Ea(function(r,o,l,v){Hu(r,o,l,v)}),tE=hi(function(r,o){var l={};if(r==null)return l;var v=!1;o=Mt(o,function(P){return P=Ki(P,r),v||(v=P.length>1),P}),Gr(r,af(r),l),v&&(l=mr(l,y|x|b,Xx));for(var T=o.length;T--;)Zl(l,o[T]);return l});function nE(r,o){return Tm(r,rc(Ge(o)))}var rE=hi(function(r,o){return r==null?{}:Ox(r,o)});function Tm(r,o){if(r==null)return{};var l=Mt(af(r),function(v){return[v]});return o=Ge(o),gp(r,l,function(v,T){return o(v,T[0])})}function iE(r,o,l){o=Ki(o,r);var v=-1,T=o.length;for(T||(T=1,r=n);++v<T;){var P=r==null?n:r[Zr(o[v])];P===n&&(v=T,P=l),r=mi(P)?P.call(r):P}return r}function oE(r,o,l){return r==null?r:Ss(r,o,l)}function aE(r,o,l,v){return v=typeof v=="function"?v:n,r==null?r:Ss(r,o,l,v)}var Nm=Wp(wn),km=Wp(Un);function sE(r,o,l){var v=ot(r),T=v||Ui(r)||Na(r);if(o=Ge(o,4),l==null){var P=r&&r.constructor;T?l=v?new P:[]:Zt(r)?l=mi(P)?_a(dn(r)):{}:l={}}return(T?In:Xr)(r,function(j,G,se){return o(l,j,G,se)}),l}function uE(r,o){return r==null?!0:Zl(r,o)}function cE(r,o,l){return r==null?r:bp(r,o,ef(l))}function lE(r,o,l,v){return v=typeof v=="function"?v:n,r==null?r:bp(r,o,ef(l),v)}function ka(r){return r==null?[]:To(r,wn(r))}function fE(r){return r==null?[]:To(r,Un(r))}function dE(r,o,l){return l===n&&(l=o,o=n),l!==n&&(l=yr(l),l=l===l?l:0),o!==n&&(o=yr(o),o=o===o?o:0),Ao(yr(r),o,l)}function hE(r,o,l){return o=gi(o),l===n?(l=o,o=0):l=gi(l),r=yr(r),wx(r,o,l)}function pE(r,o,l){if(l&&typeof l!="boolean"&&$n(r,o,l)&&(o=l=n),l===n&&(typeof o=="boolean"?(l=o,o=n):typeof r=="boolean"&&(l=r,r=n)),r===n&&o===n?(r=0,o=1):(r=gi(r),o===n?(o=r,r=0):o=gi(o)),r>o){var v=r;r=o,o=v}if(l||r%1||o%1){var T=Zh();return An(r+T*(o-r+ca("1e-"+((T+"").length-1))),o)}return ql(r,o)}var mE=Sa(function(r,o,l){return o=o.toLowerCase(),r+(l?Im(o):o)});function Im(r){return _f(kt(r).toLowerCase())}function Cm(r){return r=kt(r),r&&r.replace(Rt,Pl).replace(Yr,"")}function gE(r,o,l){r=kt(r),o=tr(o);var v=r.length;l=l===n?v:Ao(st(l),0,v);var T=l;return l-=o.length,l>=0&&r.slice(l,T)==o}function vE(r){return r=kt(r),r&&Ye.test(r)?r.replace($e,ya):r}function yE(r){return r=kt(r),r&&Lt.test(r)?r.replace(St,"\\$&"):r}var wE=Sa(function(r,o,l){return r+(l?"-":"")+o.toLowerCase()}),xE=Sa(function(r,o,l){return r+(l?" ":"")+o.toLowerCase()}),bE=Dp("toLowerCase");function _E(r,o,l){r=kt(r),o=st(o);var v=o?s(r):0;if(!o||v>=o)return r;var T=(o-v)/2;return qu(Mu(T),l)+r+qu(Ru(T),l)}function EE(r,o,l){r=kt(r),o=st(o);var v=o?s(r):0;return o&&v<o?r+qu(o-v,l):r}function SE(r,o,l){r=kt(r),o=st(o);var v=o?s(r):0;return o&&v<o?qu(o-v,l)+r:r}function TE(r,o,l){return l||o==null?o=0:o&&(o=+o),Dw(kt(r).replace(cr,""),o||0)}function NE(r,o,l){return(l?$n(r,o,l):o===n)?o=1:o=st(o),Xl(kt(r),o)}function kE(){var r=arguments,o=kt(r[0]);return r.length<3?o:o.replace(r[1],r[2])}var IE=Sa(function(r,o,l){return r+(l?"_":"")+o.toLowerCase()});function CE(r,o,l){return l&&typeof l!="number"&&$n(r,o,l)&&(o=l=n),l=l===n?fe:l>>>0,l?(r=kt(r),r&&(typeof o=="string"||o!=null&&!wf(o))&&(o=tr(o),!o&&Ar(r))?zi(d(r),0,l):r.split(o,l)):[]}var OE=Sa(function(r,o,l){return r+(l?" ":"")+_f(o)});function AE(r,o,l){return r=kt(r),l=l==null?0:Ao(st(l),0,r.length),o=tr(o),r.slice(l,l+o.length)==o}function DE(r,o,l){var v=D.templateSettings;l&&$n(r,o,l)&&(o=n),r=kt(r),o=ac({},o,v,Fp);var T=ac({},o.imports,v.imports,Fp),P=wn(T),j=To(T,P),G,se,be=0,_e=o.interpolate||xn,Ne="__p += '",We=de((o.escape||xn).source+"|"+_e.source+"|"+(_e===Et?zr:xn).source+"|"+(o.evaluate||xn).source+"|$","g"),ze="//# sourceURL="+(Se.call(o,"sourceURL")?(o.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++mo+"]")+`
`;r.replace(We,function(Qe,gt,wt,rr,Wn,ir){return wt||(wt=rr),Ne+=r.slice(be,ir).replace(Qn,Or),gt&&(G=!0,Ne+=`' +
__e(`+gt+`) +
'`),Wn&&(se=!0,Ne+=`';
`+Wn+`;
__p += '`),wt&&(Ne+=`' +
((__t = (`+wt+`)) == null ? '' : __t) +
'`),be=ir+Qe.length,Qe}),Ne+=`';
`;var Ze=Se.call(o,"variable")&&o.variable;if(!Ze)Ne=`with (obj) {
`+Ne+`
}
`;else if(Zn.test(Ze))throw new F(f);Ne=(se?Ne.replace(pe,""):Ne).replace(ne,"$1").replace(Oe,"$1;"),Ne="function("+(Ze||"obj")+`) {
`+(Ze?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(G?", __e = _.escape":"")+(se?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ne+`return __p
}`;var lt=Am(function(){return q(P,ze+"return "+Ne).apply(n,j)});if(lt.source=Ne,yf(lt))throw lt;return lt}function PE(r){return kt(r).toLowerCase()}function RE(r){return kt(r).toUpperCase()}function ME(r,o,l){if(r=kt(r),r&&(l||o===n))return Cu(r);if(!r||!(o=tr(o)))return r;var v=d(r),T=d(o),P=hs(v,T),j=Ou(v,T)+1;return zi(v,P,j).join("")}function LE(r,o,l){if(r=kt(r),r&&(l||o===n))return r.slice(0,g(r)+1);if(!r||!(o=tr(o)))return r;var v=d(r),T=Ou(v,d(o))+1;return zi(v,0,T).join("")}function $E(r,o,l){if(r=kt(r),r&&(l||o===n))return r.replace(cr,"");if(!r||!(o=tr(o)))return r;var v=d(r),T=hs(v,d(o));return zi(v,T).join("")}function WE(r,o){var l=X,v=Y;if(Zt(o)){var T="separator"in o?o.separator:T;l="length"in o?st(o.length):l,v="omission"in o?tr(o.omission):v}r=kt(r);var P=r.length;if(Ar(r)){var j=d(r);P=j.length}if(l>=P)return r;var G=l-s(v);if(G<1)return v;var se=j?zi(j,0,G).join(""):r.slice(0,G);if(T===n)return se+v;if(j&&(G+=se.length-G),wf(T)){if(r.slice(G).search(T)){var be,_e=se;for(T.global||(T=de(T.source,kt(it.exec(T))+"g")),T.lastIndex=0;be=T.exec(_e);)var Ne=be.index;se=se.slice(0,Ne===n?G:Ne)}}else if(r.indexOf(tr(T),G)!=G){var We=se.lastIndexOf(T);We>-1&&(se=se.slice(0,We))}return se+v}function FE(r){return r=kt(r),r&&Le.test(r)?r.replace(Te,w):r}var jE=Sa(function(r,o,l){return r+(l?" ":"")+o.toUpperCase()}),_f=Dp("toUpperCase");function Om(r,o,l){return r=kt(r),o=l?n:o,o===n?Hn(r)?$(r):ma(r):r.match(o)||[]}var Am=ht(function(r,o){try{return _n(r,n,o)}catch(l){return yf(l)?l:new F(l)}}),BE=hi(function(r,o){return In(o,function(l){l=Zr(l),fi(r,l,gf(r[l],r))}),r});function HE(r){var o=r==null?0:r.length,l=Ge();return r=o?Mt(r,function(v){if(typeof v[1]!="function")throw new me(c);return[l(v[0]),v[1]]}):[],ht(function(v){for(var T=-1;++T<o;){var P=r[T];if(_n(P[0],this,v))return _n(P[1],this,v)}})}function KE(r){return px(mr(r,y))}function Ef(r){return function(){return r}}function zE(r,o){return r==null||r!==r?o:r}var UE=Rp(),YE=Rp(!0);function Yn(r){return r}function Sf(r){return lp(typeof r=="function"?r:mr(r,y))}function VE(r){return dp(mr(r,y))}function qE(r,o){return hp(r,mr(o,y))}var XE=ht(function(r,o){return function(l){return _s(l,r,o)}}),GE=ht(function(r,o){return function(l){return _s(r,l,o)}});function Tf(r,o,l){var v=wn(o),T=Bu(o,v);l==null&&!(Zt(o)&&(T.length||!v.length))&&(l=o,o=r,r=this,T=Bu(o,wn(o)));var P=!(Zt(l)&&"chain"in l)||!!l.chain,j=mi(r);return In(T,function(G){var se=o[G];r[G]=se,j&&(r.prototype[G]=function(){var be=this.__chain__;if(P||be){var _e=r(this.__wrapped__),Ne=_e.__actions__=Kn(this.__actions__);return Ne.push({func:se,args:arguments,thisArg:r}),_e.__chain__=be,_e}return se.apply(r,Ir([this.value()],arguments))})}),r}function ZE(){return pn._===this&&(pn._=ct),this}function Nf(){}function QE(r){return r=st(r),ht(function(o){return pp(o,r)})}var JE=nf(Mt),eS=nf(Ri),tS=nf(Cr);function Dm(r){return lf(r)?Eo(Zr(r)):Ax(r)}function nS(r){return function(o){return r==null?n:Do(r,o)}}var rS=Lp(),iS=Lp(!0);function kf(){return[]}function If(){return!1}function oS(){return{}}function aS(){return""}function sS(){return!0}function uS(r,o){if(r=st(r),r<1||r>he)return[];var l=fe,v=An(r,fe);o=Ge(o),r-=fe;for(var T=va(v,o);++l<r;)o(l);return T}function cS(r){return ot(r)?Mt(r,Zr):nr(r)?[r]:Kn(Qp(kt(r)))}function lS(r){var o=++Pe;return kt(r)+o}var fS=Vu(function(r,o){return r+o},0),dS=rf("ceil"),hS=Vu(function(r,o){return r/o},1),pS=rf("floor");function mS(r){return r&&r.length?ju(r,Yn,Hl):n}function gS(r,o){return r&&r.length?ju(r,Ge(o,2),Hl):n}function vS(r){return Tu(r,Yn)}function yS(r,o){return Tu(r,Ge(o,2))}function wS(r){return r&&r.length?ju(r,Yn,Yl):n}function xS(r,o){return r&&r.length?ju(r,Ge(o,2),Yl):n}var bS=Vu(function(r,o){return r*o},1),_S=rf("round"),ES=Vu(function(r,o){return r-o},0);function SS(r){return r&&r.length?ds(r,Yn):0}function TS(r,o){return r&&r.length?ds(r,Ge(o,2)):0}return D.after=V_,D.ary=cm,D.assign=R1,D.assignIn=Em,D.assignInWith=ac,D.assignWith=M1,D.at=L1,D.before=lm,D.bind=gf,D.bindAll=BE,D.bindKey=fm,D.castArray=o1,D.chain=am,D.chunk=pb,D.compact=mb,D.concat=gb,D.cond=HE,D.conforms=KE,D.constant=Ef,D.countBy=S_,D.create=$1,D.curry=dm,D.curryRight=hm,D.debounce=pm,D.defaults=W1,D.defaultsDeep=F1,D.defer=q_,D.delay=X_,D.difference=vb,D.differenceBy=yb,D.differenceWith=wb,D.drop=xb,D.dropRight=bb,D.dropRightWhile=_b,D.dropWhile=Eb,D.fill=Sb,D.filter=N_,D.flatMap=C_,D.flatMapDeep=O_,D.flatMapDepth=A_,D.flatten=nm,D.flattenDeep=Tb,D.flattenDepth=Nb,D.flip=G_,D.flow=UE,D.flowRight=YE,D.fromPairs=kb,D.functions=Y1,D.functionsIn=V1,D.groupBy=D_,D.initial=Cb,D.intersection=Ob,D.intersectionBy=Ab,D.intersectionWith=Db,D.invert=X1,D.invertBy=G1,D.invokeMap=R_,D.iteratee=Sf,D.keyBy=M_,D.keys=wn,D.keysIn=Un,D.map=ec,D.mapKeys=Q1,D.mapValues=J1,D.matches=VE,D.matchesProperty=qE,D.memoize=nc,D.merge=eE,D.mergeWith=Sm,D.method=XE,D.methodOf=GE,D.mixin=Tf,D.negate=rc,D.nthArg=QE,D.omit=tE,D.omitBy=nE,D.once=Z_,D.orderBy=L_,D.over=JE,D.overArgs=Q_,D.overEvery=eS,D.overSome=tS,D.partial=vf,D.partialRight=mm,D.partition=$_,D.pick=rE,D.pickBy=Tm,D.property=Dm,D.propertyOf=nS,D.pull=Lb,D.pullAll=im,D.pullAllBy=$b,D.pullAllWith=Wb,D.pullAt=Fb,D.range=rS,D.rangeRight=iS,D.rearg=J_,D.reject=j_,D.remove=jb,D.rest=e1,D.reverse=pf,D.sampleSize=H_,D.set=oE,D.setWith=aE,D.shuffle=K_,D.slice=Bb,D.sortBy=Y_,D.sortedUniq=qb,D.sortedUniqBy=Xb,D.split=CE,D.spread=t1,D.tail=Gb,D.take=Zb,D.takeRight=Qb,D.takeRightWhile=Jb,D.takeWhile=e_,D.tap=m_,D.throttle=n1,D.thru=Ju,D.toArray=xm,D.toPairs=Nm,D.toPairsIn=km,D.toPath=cS,D.toPlainObject=_m,D.transform=sE,D.unary=r1,D.union=t_,D.unionBy=n_,D.unionWith=r_,D.uniq=i_,D.uniqBy=o_,D.uniqWith=a_,D.unset=uE,D.unzip=mf,D.unzipWith=om,D.update=cE,D.updateWith=lE,D.values=ka,D.valuesIn=fE,D.without=s_,D.words=Om,D.wrap=i1,D.xor=u_,D.xorBy=c_,D.xorWith=l_,D.zip=f_,D.zipObject=d_,D.zipObjectDeep=h_,D.zipWith=p_,D.entries=Nm,D.entriesIn=km,D.extend=Em,D.extendWith=ac,Tf(D,D),D.add=fS,D.attempt=Am,D.camelCase=mE,D.capitalize=Im,D.ceil=dS,D.clamp=dE,D.clone=a1,D.cloneDeep=u1,D.cloneDeepWith=c1,D.cloneWith=s1,D.conformsTo=l1,D.deburr=Cm,D.defaultTo=zE,D.divide=hS,D.endsWith=gE,D.eq=Pr,D.escape=vE,D.escapeRegExp=yE,D.every=T_,D.find=k_,D.findIndex=em,D.findKey=j1,D.findLast=I_,D.findLastIndex=tm,D.findLastKey=B1,D.floor=pS,D.forEach=sm,D.forEachRight=um,D.forIn=H1,D.forInRight=K1,D.forOwn=z1,D.forOwnRight=U1,D.get=xf,D.gt=f1,D.gte=d1,D.has=q1,D.hasIn=bf,D.head=rm,D.identity=Yn,D.includes=P_,D.indexOf=Ib,D.inRange=hE,D.invoke=Z1,D.isArguments=Mo,D.isArray=ot,D.isArrayBuffer=h1,D.isArrayLike=zn,D.isArrayLikeObject=on,D.isBoolean=p1,D.isBuffer=Ui,D.isDate=m1,D.isElement=g1,D.isEmpty=v1,D.isEqual=y1,D.isEqualWith=w1,D.isError=yf,D.isFinite=x1,D.isFunction=mi,D.isInteger=gm,D.isLength=ic,D.isMap=vm,D.isMatch=b1,D.isMatchWith=_1,D.isNaN=E1,D.isNative=S1,D.isNil=N1,D.isNull=T1,D.isNumber=ym,D.isObject=Zt,D.isObjectLike=en,D.isPlainObject=Is,D.isRegExp=wf,D.isSafeInteger=k1,D.isSet=wm,D.isString=oc,D.isSymbol=nr,D.isTypedArray=Na,D.isUndefined=I1,D.isWeakMap=C1,D.isWeakSet=O1,D.join=Pb,D.kebabCase=wE,D.last=vr,D.lastIndexOf=Rb,D.lowerCase=xE,D.lowerFirst=bE,D.lt=A1,D.lte=D1,D.max=mS,D.maxBy=gS,D.mean=vS,D.meanBy=yS,D.min=wS,D.minBy=xS,D.stubArray=kf,D.stubFalse=If,D.stubObject=oS,D.stubString=aS,D.stubTrue=sS,D.multiply=bS,D.nth=Mb,D.noConflict=ZE,D.noop=Nf,D.now=tc,D.pad=_E,D.padEnd=EE,D.padStart=SE,D.parseInt=TE,D.random=pE,D.reduce=W_,D.reduceRight=F_,D.repeat=NE,D.replace=kE,D.result=iE,D.round=_S,D.runInContext=I,D.sample=B_,D.size=z_,D.snakeCase=IE,D.some=U_,D.sortedIndex=Hb,D.sortedIndexBy=Kb,D.sortedIndexOf=zb,D.sortedLastIndex=Ub,D.sortedLastIndexBy=Yb,D.sortedLastIndexOf=Vb,D.startCase=OE,D.startsWith=AE,D.subtract=ES,D.sum=SS,D.sumBy=TS,D.template=DE,D.times=uS,D.toFinite=gi,D.toInteger=st,D.toLength=bm,D.toLower=PE,D.toNumber=yr,D.toSafeInteger=P1,D.toString=kt,D.toUpper=RE,D.trim=ME,D.trimEnd=LE,D.trimStart=$E,D.truncate=WE,D.unescape=FE,D.uniqueId=lS,D.upperCase=jE,D.upperFirst=_f,D.each=sm,D.eachRight=um,D.first=rm,Tf(D,function(){var r={};return Xr(D,function(o,l){Se.call(D.prototype,l)||(r[l]=o)}),r}(),{chain:!1}),D.VERSION=i,In(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){D[r].placeholder=D}),In(["drop","take"],function(r,o){vt.prototype[r]=function(l){l=l===n?1:mn(st(l),0);var v=this.__filtered__&&!o?new vt(this):this.clone();return v.__filtered__?v.__takeCount__=An(l,v.__takeCount__):v.__views__.push({size:An(l,fe),type:r+(v.__dir__<0?"Right":"")}),v},vt.prototype[r+"Right"]=function(l){return this.reverse()[r](l).reverse()}}),In(["filter","map","takeWhile"],function(r,o){var l=o+1,v=l==R||l==Q;vt.prototype[r]=function(T){var P=this.clone();return P.__iteratees__.push({iteratee:Ge(T,3),type:l}),P.__filtered__=P.__filtered__||v,P}}),In(["head","last"],function(r,o){var l="take"+(o?"Right":"");vt.prototype[r]=function(){return this[l](1).value()[0]}}),In(["initial","tail"],function(r,o){var l="drop"+(o?"":"Right");vt.prototype[r]=function(){return this.__filtered__?new vt(this):this[l](1)}}),vt.prototype.compact=function(){return this.filter(Yn)},vt.prototype.find=function(r){return this.filter(r).head()},vt.prototype.findLast=function(r){return this.reverse().find(r)},vt.prototype.invokeMap=ht(function(r,o){return typeof r=="function"?new vt(this):this.map(function(l){return _s(l,r,o)})}),vt.prototype.reject=function(r){return this.filter(rc(Ge(r)))},vt.prototype.slice=function(r,o){r=st(r);var l=this;return l.__filtered__&&(r>0||o<0)?new vt(l):(r<0?l=l.takeRight(-r):r&&(l=l.drop(r)),o!==n&&(o=st(o),l=o<0?l.dropRight(-o):l.take(o-r)),l)},vt.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},vt.prototype.toArray=function(){return this.take(fe)},Xr(vt.prototype,function(r,o){var l=/^(?:filter|find|map|reject)|While$/.test(o),v=/^(?:head|last)$/.test(o),T=D[v?"take"+(o=="last"?"Right":""):o],P=v||/^find/.test(o);T&&(D.prototype[o]=function(){var j=this.__wrapped__,G=v?[1]:arguments,se=j instanceof vt,be=G[0],_e=se||ot(j),Ne=function(gt){var wt=T.apply(D,Ir([gt],G));return v&&We?wt[0]:wt};_e&&l&&typeof be=="function"&&be.length!=1&&(se=_e=!1);var We=this.__chain__,ze=!!this.__actions__.length,Ze=P&&!We,lt=se&&!ze;if(!P&&_e){j=lt?j:new vt(this);var Qe=r.apply(j,G);return Qe.__actions__.push({func:Ju,args:[Ne],thisArg:n}),new pr(Qe,We)}return Ze&&lt?r.apply(this,G):(Qe=this.thru(Ne),Ze?v?Qe.value()[0]:Qe.value():Qe)})}),In(["pop","push","shift","sort","splice","unshift"],function(r){var o=xe[r],l=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",v=/^(?:pop|shift)$/.test(r);D.prototype[r]=function(){var T=arguments;if(v&&!this.__chain__){var P=this.value();return o.apply(ot(P)?P:[],T)}return this[l](function(j){return o.apply(ot(j)?j:[],T)})}}),Xr(vt.prototype,function(r,o){var l=D[o];if(l){var v=l.name+"";Se.call(ba,v)||(ba[v]=[]),ba[v].push({name:o,func:l})}}),ba[Yu(n,M).name]=[{name:"wrapper",func:n}],vt.prototype.clone=Fw,vt.prototype.reverse=jw,vt.prototype.value=Bw,D.prototype.at=g_,D.prototype.chain=v_,D.prototype.commit=y_,D.prototype.next=w_,D.prototype.plant=b_,D.prototype.reverse=__,D.prototype.toJSON=D.prototype.valueOf=D.prototype.value=E_,D.prototype.first=D.prototype.head,ms&&(D.prototype[ms]=x_),D},Z=H();kr?((kr.exports=Z)._=Z,os._=Z):pn._=Z}).call(Lr)})(Wc,Wc.exports);var kh=Wc.exports;const Ih=(e,t)=>{const n=e.sortEventTime.localeCompare(t.sortEventTime);return n!==0?n:!e.sortEventId||!t.sortEventId?0:parseInt(e.sortEventId)-parseInt(t.sortEventId)},$g=(e,t)=>{if(!t.find(h=>Ni(h)&&kh.isEqual(Jo(h),e)))throw new Error(`Root workflow node ${e.workflowId} not found`);const i=my(t),a=py(e,t),u=YA(i),c=Tc(a,u),f=Nc(c);return{nodes:u,edges:f,virtualTree:a,renderTree:c}},py=(e,t)=>{const n=t.find(c=>Ni(c)&&kh.isEqual(Jo(c),e));if(!n)throw new Error(`Root workflow node ${e.workflowId} not found`);const i={id:Hs(n),children:[]},a=new Set;a.add(Hs(n));const u=[{nodeId:Hs(n),treeNode:i}];for(;u.length>0;){const{nodeId:c,treeNode:f}=u.shift(),p=t.filter(m=>{const y=pA(m);return y?Br(y)===c:!1}).sort(Ih);for(const m of p){const y=Hs(m);if(a.has(y))continue;a.add(y);const x={id:y,children:[]};f.children.push(x),u.push({nodeId:y,treeNode:x})}}return i},Tc=(e,t)=>{const n=new Map,i=new Map,a=new Set;t.forEach(h=>{n.set(h.id,h.type),h.type==="batch"&&i.set(h.id,h)});const u=new Map;i.forEach((h,p)=>{h.referencedBatches.forEach(m=>{const y="activityId"in m?du(m):Br(m);u.set(y,p)})});const c=new Set,f=h=>{if(a.has(h.id))return c.add(h.id),{id:h.id,children:[]};if(a.add(h.id),h.isExpanded===!1)return c.add(h.id),{id:h.id,children:[]};const p=[],m=new Map;for(const y of h.children){const x=u.get(y.id);x?(m.has(x)||m.set(x,[]),m.get(x).push(y),c.add(y.id)):p.push(f(y))}for(const[y,x]of m){const b={id:y,children:[],isBatchNode:!0};c.add(y);const N=x[0],E=h.children.findIndex(C=>C.id===N.id);E!==-1?p.splice(E,0,b):p.push(b)}return c.add(h.id),{id:h.id,children:p}};return f(e)},Nc=e=>{const t=[],n=new Set,i=f=>{n.add(f.id),f.children.forEach(h=>i(h))};i(e);const a=new Set,u=(f,h=null)=>{const p=f.children;if(p.length===0)return;const m=p[0];if(n.has(f.id)){if(n.has(m.id)){const y=`${f.id}:${m.id}:child`;a.has(y)||(a.add(y),t.push({source_id:f.id,target_id:m.id,type:"child"}))}}for(let y=0;y<p.length-1;y++){const x=p[y],b=p[y+1];if(!n.has(x.id)||!n.has(b.id))continue;const N=`${x.id}:${b.id}:sibling`;a.has(N)||(a.add(N),t.push({source_id:x.id,target_id:b.id,type:"sibling"}))}p.forEach(y=>u(y,f.id))};return u(e),t.filter(f=>n.has(f.source_id)&&n.has(f.target_id))},my=e=>{const t={};let n=[];for(const i of e){let a=i.workflowTaskCompletedEventId;if(a===void 0||a==="-1"){n.push(i);continue}t[a]||(t[a]=[]),t[a].push(i)}for(const i in t){const a=t[i];if(a.length<=5){n=n.concat(a);continue}const u=a[0],c=UA(u,a);n.push(c)}return n.sort(Ih),my.originalItems=e,n},UA=(e,t)=>{const i=[...t].sort(Ih)[0],a={...e,sortEventTime:i.sortEventTime,sortEventId:i.sortEventId||e.sortEventId||"0",workflowTaskCompletedEventId:i.workflowTaskCompletedEventId||e.workflowTaskCompletedEventId||"0"},u=Hs(e);return a.__isBatch=!0,a.__batchItems=t,a.__batchCount=t.length,a.__originalId=u,a},YA=e=>e.map(t=>iy(t));class VA{constructor(){this.endpoint="localhost:7531"}async checkHealth(){const t=`http://${this.endpoint}/health`;return(await fetch(t)).ok}async searchWorkflows(t,n){t||(t="");const i=`http://${this.endpoint}/search?namespace=${n}&query=${encodeURIComponent(t)}`,a=await fetch(i);if(!a.ok)throw new Error(`Failed to search workflows. Status: ${a.status}`);const u=await a.json();if(!u.executions)return{executions:[]};for(let c of u.executions)c.status=Og(c.status).toLowerCase().split("_").map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join("");return u}async getRootWorkflowData(t,n,i){const a=await this.getWorkflowHistoryData(t,n,i);return(await Ig(a,t,i)).filter(c=>c.type==="workflow")}async getRootWorkflowEnrichedData(t,n,i){const a=await this.getWorkflowHistoryData(t,n,i),u=await Ig(a,t,i);return await this.enrichChildWorkflows(u,t),u}async enrichChildWorkflows(t,n){var i,a,u,c;for(const f of t)if((f.type==="workflow"||f.type==="childWorkflow")&&f.status!=="COMPLETED"){const h=await this.getWorkflowData(n,f.workflowId,f.runId);if(f.status=Og(h.workflowExecutionInfo.status),f.startTime=h.workflowExecutionInfo.startTime,f.endTime=h.workflowExecutionInfo.closeTime,f.parentWorkflowId=(a=(i=h.workflowExecutionInfo)==null?void 0:i.parentExecution)==null?void 0:a.workflowId,f.parentWorkflowRunId=(c=(u=h.workflowExecutionInfo)==null?void 0:u.parentExecution)==null?void 0:c.runId,h.pendingActivities)for(const p of h.pendingActivities){const m=t.find(y=>y.type==="activity"&&y.activityId===p.activityId);m&&(m.attempts=p.attempt,m.attempts&&m.attempts>1&&(m.status="RETRYING"),m.status=="SCHEDULED"&&(m.status="PENDING"),m.lastStartedTime=p.lastStartedTime,m.lastAttemptCompleteTime=p.lastAttemptCompleteTime,m.lastWorkerIdentity=p.lastWorkerIdentity,p.lastFailure&&(m.lastFailure=JSON.stringify(p.lastFailure)))}}}async getWorkflowData(t,n,i=""){const a=`http://${this.endpoint}/workflow/data?namespace=${t}&id=${encodeURIComponent(n)}&runId=${i}`,u=await fetch(a);if(!u.ok)throw u.status===404?new Error(`workflow ${n} not found`):new Error(`Failed to fetch workflow data. Status: ${u.status}`);return await u.json()}async getWorkflowHistoryData(t,n,i){const a=`http://${this.endpoint}/workflow?id=${encodeURIComponent(n)}&namespace=${t}&runId=${i}`,u=await fetch(a);if(!u.ok)throw new Error(`Failed to fetch workflow history. Status: ${u.status}`);return await u.json()}}const sl=new VA,qA=async(e,t,n)=>(n||(n=""),await sl.getRootWorkflowEnrichedData(e,t,n)),XA=async()=>{try{return await sl.checkHealth()}catch{return!1}};async function kd(e,t,n,i=0){const a=[{id:t,runId:n,workflowTaskCompletedEventId:"-1",depth:i}],u=new Set;for(;a.length>0;){const{id:c,runId:f,workflowTaskCompletedEventId:h,depth:p}=a.shift();if(u.has(c))continue;const m=await rl(c,f);if(m&&!m.isPlaceholder){u.add(c);continue}try{const y=await qA(e,c,f);u.add(c);const x=[];for(const b of y)b.type==="workflow"?await kg({...b,workflowTaskCompletedEventId:h,isPlaceholder:!1}):b.type==="childWorkflow"?(x.push({workflowId:b.workflowId,workflowRunId:b.runId,workflowTaskCompletedEventId:b.workflowTaskCompletedEventId}),await kg({...b,type:"workflow",isPlaceholder:!0})):b.type==="activity"&&await oA(b);p>0&&x.length>0&&x.forEach(b=>{a.push({id:b.workflowId,runId:b.workflowRunId,workflowTaskCompletedEventId:b.workflowTaskCompletedEventId,depth:p-1})})}catch(y){console.error("Error processing workflow:",y)}}}const Wg=async(e,t)=>await sl.searchWorkflows(t,e),GA=async(e,t,n)=>(await sl.getRootWorkflowData(e,t,n)).filter(a=>a.type==="workflow"&&a.workflowId===t&&a.runId===n)[0];var gy=Symbol.for("immer-nothing"),Fg=Symbol.for("immer-draftable"),ar=Symbol.for("immer-state");function Wr(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ya=Object.getPrototypeOf;function Va(e){return!!e&&!!e[ar]}function Zo(e){var t;return e?vy(e)||Array.isArray(e)||!!e[Fg]||!!((t=e.constructor)!=null&&t[Fg])||cl(e)||ll(e):!1}var ZA=Object.prototype.constructor.toString();function vy(e){if(!e||typeof e!="object")return!1;const t=Ya(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===ZA}function Fc(e,t){ul(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,i)=>t(i,n,e))}function ul(e){const t=e[ar];return t?t.type_:Array.isArray(e)?1:cl(e)?2:ll(e)?3:0}function Id(e,t){return ul(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function yy(e,t,n){const i=ul(e);i===2?e.set(t,n):i===3?e.add(n):e[t]=n}function QA(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function cl(e){return e instanceof Map}function ll(e){return e instanceof Set}function $o(e){return e.copy_||e.base_}function Cd(e,t){if(cl(e))return new Map(e);if(ll(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=vy(e);if(t===!0||t==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(e);delete i[ar];let a=Reflect.ownKeys(i);for(let u=0;u<a.length;u++){const c=a[u],f=i[c];f.writable===!1&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(i[c]={configurable:!0,writable:!0,enumerable:f.enumerable,value:e[c]})}return Object.create(Ya(e),i)}else{const i=Ya(e);if(i!==null&&n)return{...e};const a=Object.create(i);return Object.assign(a,e)}}function Ch(e,t=!1){return fl(e)||Va(e)||!Zo(e)||(ul(e)>1&&(e.set=e.add=e.clear=e.delete=JA),Object.freeze(e),t&&Object.entries(e).forEach(([n,i])=>Ch(i,!0))),e}function JA(){Wr(2)}function fl(e){return Object.isFrozen(e)}var eD={};function Qo(e){const t=eD[e];return t||Wr(0,e),t}var iu;function wy(){return iu}function tD(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function jg(e,t){t&&(Qo("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Od(e){Ad(e),e.drafts_.forEach(nD),e.drafts_=null}function Ad(e){e===iu&&(iu=e.parent_)}function Bg(e){return iu=tD(iu,e)}function nD(e){const t=e[ar];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Hg(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[ar].modified_&&(Od(t),Wr(4)),Zo(e)&&(e=jc(t,e),t.parent_||Bc(t,e)),t.patches_&&Qo("Patches").generateReplacementPatches_(n[ar].base_,e,t.patches_,t.inversePatches_)):e=jc(t,n,[]),Od(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==gy?e:void 0}function jc(e,t,n){if(fl(t))return t;const i=t[ar];if(!i)return Fc(t,(a,u)=>Kg(e,i,t,a,u,n)),t;if(i.scope_!==e)return t;if(!i.modified_)return Bc(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let u=a,c=!1;i.type_===3&&(u=new Set(a),a.clear(),c=!0),Fc(u,(f,h)=>Kg(e,i,a,f,h,n,c)),Bc(e,a,!1),n&&e.patches_&&Qo("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function Kg(e,t,n,i,a,u,c){if(Va(a)){const f=u&&t&&t.type_!==3&&!Id(t.assigned_,i)?u.concat(i):void 0,h=jc(e,a,f);if(yy(n,i,h),Va(h))e.canAutoFreeze_=!1;else return}else c&&n.add(a);if(Zo(a)&&!fl(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;jc(e,a),(!t||!t.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,i)&&Bc(e,a)}}function Bc(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ch(t,n)}function rD(e,t){const n=Array.isArray(e),i={type_:n?1:0,scope_:t?t.scope_:wy(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=i,u=Oh;n&&(a=[i],u=ou);const{revoke:c,proxy:f}=Proxy.revocable(a,u);return i.draft_=f,i.revoke_=c,f}var Oh={get(e,t){if(t===ar)return e;const n=$o(e);if(!Id(n,t))return iD(e,n,t);const i=n[t];return e.finalized_||!Zo(i)?i:i===Uf(e.base_,t)?(Yf(e),e.copy_[t]=Pd(i,e)):i},has(e,t){return t in $o(e)},ownKeys(e){return Reflect.ownKeys($o(e))},set(e,t,n){const i=xy($o(e),t);if(i!=null&&i.set)return i.set.call(e.draft_,n),!0;if(!e.modified_){const a=Uf($o(e),t),u=a==null?void 0:a[ar];if(u&&u.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(QA(n,a)&&(n!==void 0||Id(e.base_,t)))return!0;Yf(e),Dd(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Uf(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Yf(e),Dd(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=$o(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:i.enumerable,value:n[t]}},defineProperty(){Wr(11)},getPrototypeOf(e){return Ya(e.base_)},setPrototypeOf(){Wr(12)}},ou={};Fc(Oh,(e,t)=>{ou[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ou.deleteProperty=function(e,t){return ou.set.call(this,e,t,void 0)};ou.set=function(e,t,n){return Oh.set.call(this,e[0],t,n,e[0])};function Uf(e,t){const n=e[ar];return(n?$o(n):e)[t]}function iD(e,t,n){var a;const i=xy(t,n);return i?"value"in i?i.value:(a=i.get)==null?void 0:a.call(e.draft_):void 0}function xy(e,t){if(!(t in e))return;let n=Ya(e);for(;n;){const i=Object.getOwnPropertyDescriptor(n,t);if(i)return i;n=Ya(n)}}function Dd(e){e.modified_||(e.modified_=!0,e.parent_&&Dd(e.parent_))}function Yf(e){e.copy_||(e.copy_=Cd(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var oD=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,i)=>{if(typeof t=="function"&&typeof n!="function"){const u=n;n=t;const c=this;return function(h=u,...p){return c.produce(h,m=>n.call(this,m,...p))}}typeof n!="function"&&Wr(6),i!==void 0&&typeof i!="function"&&Wr(7);let a;if(Zo(t)){const u=Bg(this),c=Pd(t,void 0);let f=!0;try{a=n(c),f=!1}finally{f?Od(u):Ad(u)}return jg(u,i),Hg(a,u)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===gy&&(a=void 0),this.autoFreeze_&&Ch(a,!0),i){const u=[],c=[];Qo("Patches").generateReplacementPatches_(t,a,u,c),i(u,c)}return a}else Wr(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(c,...f)=>this.produceWithPatches(c,h=>t(h,...f));let i,a;return[this.produce(t,n,(c,f)=>{i=c,a=f}),i,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Zo(e)||Wr(8),Va(e)&&(e=aD(e));const t=Bg(this),n=Pd(e,void 0);return n[ar].isManual_=!0,Ad(t),n}finishDraft(e,t){const n=e&&e[ar];(!n||!n.isManual_)&&Wr(9);const{scope_:i}=n;return jg(i,t),Hg(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const i=Qo("Patches").applyPatches_;return Va(e)?i(e,t):this.produce(e,a=>i(a,t))}};function Pd(e,t){const n=cl(e)?Qo("MapSet").proxyMap_(e,t):ll(e)?Qo("MapSet").proxySet_(e,t):rD(e,t);return(t?t.scope_:wy()).drafts_.push(n),n}function aD(e){return Va(e)||Wr(10,e),by(e)}function by(e){if(!Zo(e)||fl(e))return e;const t=e[ar];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Cd(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Cd(e,!0);return Fc(n,(i,a)=>{yy(n,i,by(a))}),t&&(t.finalized_=!1),n}var sr=new oD,Vf=sr.produce;sr.produceWithPatches.bind(sr);sr.setAutoFreeze.bind(sr);sr.setUseStrictShallowCopy.bind(sr);sr.applyPatches.bind(sr);sr.createDraft.bind(sr);sr.finishDraft.bind(sr);const Ma=(e,t)=>{if(e.id===t)return e;for(const n of e.children){const i=Ma(n,t);if(i)return i}return null},_y=(e,t)=>{for(const n of e.children)if(n.id===t)return e;for(const n of e.children){const i=_y(n,t);if(i)return i}return null};function sD(){const[e,t]=k.useState(!1),[n,i]=k.useState(!1),a=ti(Nh),u=ti(Nd),c=ol(),f=async(m,y,x)=>{try{t(!0);const b=c.get(Ko),N=c.get(Ba),E=Br({workflowId:y,workflowRunId:x});if(await kd(m,y,x,2),b){const ce=Ma(b,E);if(ce&&ce.children&&ce.children.length>0){const U=Vf(b,X=>{const Y=Ma(X,E);Y&&(Y.isExpanded=!0)}),J=Tc(U,N),oe=Nc(J);return a({structure:U,renderTree:J,edges:oe}),u(E),!0}}const C=await Ed(y,x),M={workflowId:y,workflowRunId:x};if(!C.find(ce=>Ni(ce)&&kh.isEqual(Jo(ce),M)))return console.error("[expandChildWorkflowNode] Root workflow node not found"),!1;const ee=py(M,C),B=c.get(Ko),le=c.get(Ba);if(B&&ee){const ce=C.map(ge=>{if(!(Ni(ge)&&ge.workflowId===M.workflowId&&ge.runId===M.workflowRunId))return iy(ge)}).filter(ge=>ge!==void 0),U=new Set(le.map(ge=>ge.id)),J=ce.filter(ge=>!U.has(ge.id)),oe=[...le,...J],X=Vf(B,ge=>{const R=Ma(ge,E);R?(R.children=ee.children,R.isExpanded=!0):console.error(`[expandChildWorkflowNode] Could not find node ${E} in virtual tree to update!`)}),Y=Tc(X,oe),ue=Nc(Y);return a({nodes:oe,edges:ue,structure:X,renderTree:Y}),u(E),!0}return console.error("[expandChildWorkflowNode] Could not update graph - virtual tree or subgraph missing"),!1}catch(b){return console.error("[expandChildWorkflowNode] Error expanding workflow:",b),!1}finally{t(!1)}},h=async(m,y)=>{try{i(!0);const x=c.get(Ko),b=c.get(Ba),N=Br({workflowId:m,workflowRunId:y});if(u(null),x){const E=Vf(x,z=>{const ee=Ma(z,N);ee&&(ee.isExpanded=!1)}),C=Tc(E,b),M=Nc(C);a({structure:E,renderTree:C,edges:M})}return!0}catch(x){return console.error("Failed to collapse workflow node:",x),!1}finally{i(!1)}};return{expandChildWorkflowNode:f,collapseChildWorkflowNode:h,collapseSiblingWorkflowNodes:async(m,y)=>{const x=c.get(Ko);if(!x)return{success:!0,message:"No graph structure available"};const b=Br({workflowId:m,workflowRunId:y});u(null);const N=_y(x,b);if(!N)return{success:!1,message:"Could not find parent node"};const E=[];for(const C of N.children)if(C.id!==b&&C.isExpanded){const M=ry(C.id);E.push(h(M.workflowId,M.workflowRunId))}return await Promise.all(E),{success:!0,message:"Collapsed sibling nodes"}},isExpanding:e,isCollapsing:n}}const Ey=ur(!1),uD=(e,t)=>{const n=bi(hy),i=bi(Nd),a=ti(Nd),u=bi(Ey),c=k.useCallback(()=>{if(!(!e.current||!t))if(i){const f=n.nodes.find(X=>X.id===i);if(!f)return;const h=n.nodes.filter(X=>n.edges.find(ue=>ue.source===i&&ue.target===X.id)!==void 0);if(h.length===0){e.current.setCenter(f.position.x+(f.width||150)/2,f.position.y+(f.height||40)/2,{zoom:1,duration:800});return}const p=[f,...h],m=Math.min(...p.map(X=>X.position.x)),y=Math.max(...p.map(X=>X.position.x+(X.width||150))),x=Math.min(...p.map(X=>X.position.y)),b=Math.max(...p.map(X=>X.position.y+(X.height||40))),N=y-m,E=b-x,C=50,M=N+C*2,z=E+C*2,ee=window.innerWidth*.8,B=window.innerHeight*.8,le=ee/M,ce=B/z,U=Math.min(le,ce,1);e.current.setViewport({x:-m*U+100,y:-x*U+100,zoom:Math.max(U,.4)},{duration:800})}else e.current.fitView({padding:.2,duration:800,minZoom:.4})},[e,t,n.nodes,n.edges,i]);return k.useEffect(()=>{if(t&&n.nodes.length>0&&!u){const f=setTimeout(()=>{c()},100);return()=>clearTimeout(f)}},[n.nodes.length,n.edges.length,t,c,i,u]),{fitView:c,setExpandedNodeId:a}},cD=(e,t=50)=>e?e.length<=t?e:e.slice(0,t)+"...":"",lD=e=>k.useMemo(()=>ry(e),[e]),fD=k.memo(({id:e,data:t,onSpreadBatchNodes:n,onShowNodeData:i})=>{const a=lD(t.id),u=lA(a),{expandChildWorkflowNode:c,collapseChildWorkflowNode:f,collapseSiblingWorkflowNodes:h}=sD(),[p,m]=k.useState(!1),[y,x]=k.useState(!1),b=k.useRef(!1),N=ti(Ey),E=u.value,C=ol(),M=k.useCallback(async()=>{if(!u.loading&&E){const le=C.get(Ko);let ce=t.isExpanded;if(le){const U=Ma(le,t.id);U&&(ce=U.isExpanded)}if(ce)await f(E.workflowId,E.runId);else{m(!0),N(!0),b.current=!0;const U=setTimeout(()=>{b.current&&x(!0)},100);try{await h(E.workflowId,E.runId),await new Promise(J=>setTimeout(J,50)),await c(E.namespace,E.workflowId,E.runId)}finally{clearTimeout(U),b.current=!1,m(!1),N(!1),x(!1)}}}},[u.loading,t,c,f,h,E,e,N]),z=k.useCallback(()=>{E&&(f(E.workflowId,E.runId),requestAnimationFrame(()=>{n==null||n(e)}))},[f,E,n,e]),ee=k.useCallback(le=>{E&&i(E,{x:le.clientX,y:le.clientY})},[E,i]);return k.useMemo(()=>{var le;return u.error||!E?null:_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:xr(p&&"pointer-events-none opacity-75"),children:_.jsx(xh,{id:e,onShowNodeData:ee,onBatchAction:z,onClick:M,IconComponent:_.jsx("div",{className:"bg-amber-50",children:_.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[_.jsx("rect",{x:"9",y:"3",width:"6",height:"6",rx:"1"}),_.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),_.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"}),_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3M6 15v-3h12v3"})]})}),TitleComponent:_.jsxs(_.Fragment,{children:[_.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:E.workflowType}),_.jsx("p",{className:"text-xs text-gray-500 overflow-hidden text-ellipsis",children:cD(E.workflowId)})]}),TypeLabelComponent:_.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgb(254 243 199)",color:"rgb(217 119 6)"},children:"workflow"}),status:E.status,startTime:E.startTime,endTime:E.endTime,taskQueue:(le=E.taskQueue)==null?void 0:le.name})}),y&&_.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none bg-white bg-opacity-50 z-20",children:_.jsx("div",{className:"bg-white p-3 rounded-full shadow-lg",children:_.jsx(JO,{className:"w-8 h-8 text-blue-500 animate-spin"})})})]})},[e,E,u.error,u.loading,M,z,ee,p,y])}),dD=({autoZoomEnabled:e,setAutoZoomEnabled:t,refreshWorkflowData:n,currentWorkflow:i,setIsSearchModalOpen:a})=>{k.useEffect(()=>{(async()=>{const f=await ru("autoZoomEnabled");f!==void 0&&t(f)})()},[t]);const u=async()=>{const c=!e;t(c),await Sd("autoZoomEnabled",c)};return _.jsxs("div",{className:"flex gap-2 items-center",children:[_.jsxs("button",{className:`px-3 py-1 rounded ${e?"bg-green-500 text-white":"bg-gray-200 text-gray-700"}`,onClick:u,children:["Auto Zoom ",e?"On":"Off"]}),_.jsx("button",{className:"px-3 py-1 rounded bg-blue-500 text-white hover:bg-blue-600",onClick:()=>a(!0),children:_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(Zv,{className:"h-4 w-4"}),"Search"]})})]})};function hD({id:e,data:t,onClose:n,position:i,baseZIndex:a=1e3}){const[u,c]=k.useState("io"),f=k.useRef(null),h=k.useRef(null),[p,m]=k.useState({width:600,height:600}),[y,x]=k.useState(!1),[b,N]=k.useState(!1),E=k.useRef({x:0,y:0,width:0,height:0}),[C,M]=k.useState({x:0,y:0}),[z,ee]=k.useState(null),[B,le]=k.useState(3e3);k.useEffect(()=>{t&&t!==h.current&&(c("io"),h.current=t)},[t]),k.useEffect(()=>{const W=f.current;W&&(W.style.display="none",W.scrollTop=0,W.style.display="")},[t,u]),k.useEffect(()=>{t&&i&&f.current&&(f.current.style.display="none",f.current.offsetHeight,f.current.style.display="",f.current.style.zIndex="3000")},[t,i]),k.useEffect(()=>{const W=document.createElement("div");W.style.position="fixed",document.body.appendChild(W),ee(W);const ae=document.querySelectorAll("[data-node-panel]");let fe=3e3;return ae.forEach(we=>{const ke=parseInt(window.getComputedStyle(we).zIndex);ke>fe&&(fe=ke)}),W.style.zIndex=(fe+1).toString(),le(fe+1),()=>{W&&document.body.contains(W)&&document.body.removeChild(W)}},[]),k.useEffect(()=>{z&&(z.style.zIndex=B.toString())},[B,z]);const ce=W=>{var fe;if(!W.target||!(W.target instanceof HTMLElement)||!W.target.closest("[data-drag-handle]"))return;W.preventDefault(),W.stopPropagation(),x(!0);const ae=(fe=f.current)==null?void 0:fe.getBoundingClientRect();ae&&(E.current={x:W.clientX-ae.left,y:W.clientY-ae.top,width:p.width,height:p.height}),document.body.style.userSelect="none"},U=W=>{var ae,fe;W.stopPropagation(),W.preventDefault(),N(!0),E.current={x:W.clientX,y:W.clientY,width:((ae=f.current)==null?void 0:ae.offsetWidth)||p.width,height:((fe=f.current)==null?void 0:fe.offsetHeight)||p.height},document.body.style.userSelect="none"};k.useEffect(()=>{const W=we=>{if(!(!y&&!b))if(we.preventDefault(),we.stopPropagation(),b&&f.current){const ke=we.clientX-E.current.x,Me=we.clientY-E.current.y,Re=Math.max(300,E.current.width+ke),Be=Math.max(400,E.current.height+Me);(Re!==p.width||Be!==p.height)&&m({width:Re,height:Be})}else y&&M({x:we.clientX-E.current.x-i.x,y:we.clientY-E.current.y-i.y})},ae=we=>{we.preventDefault(),we.stopPropagation(),requestAnimationFrame(()=>{x(!1),N(!1),document.body.style.userSelect=""})},fe=new AbortController;return(y||b)&&(window.addEventListener("mousemove",W,{signal:fe.signal,capture:!0}),window.addEventListener("mouseup",ae,{signal:fe.signal,capture:!0})),()=>{fe.abort()}},[y,b,i,p]);const J=()=>{if(!i)return{};const W=20,ae=window.innerWidth,fe=window.innerHeight,we=Math.min(Math.max(W,i.x+C.x),ae-p.width-W),ke=Math.min(Math.max(W,i.y+C.y),fe-p.height-W);return{left:we,top:ke}},oe=()=>{const W=document.querySelectorAll("[data-node-panel]");let ae=3e3;W.forEach(fe=>{const we=parseInt(window.getComputedStyle(fe).zIndex);we>ae&&(ae=we)}),le(ae+1)};if(!t||!i||!z)return null;const X=!!(t.lastFailure||t.failure),Y=!!(t.scheduleTime||t.startTime||t.endTime),ue=!!(t.input||t.result||t.memo&&Object.keys(t.memo).length>0||t.searchAttributes&&Object.keys(t.searchAttributes).length>0),R=t.type==="workflow"&&t.namespace&&t.workflowId?`https://cloud.temporal.io/namespaces/${t.namespace}/workflows/${t.workflowId}`:null,re=({tab:W,label:ae,disabled:fe})=>_.jsx("button",{onClick:()=>!fe&&c(W),disabled:fe,className:xr("px-4 py-2 text-sm font-medium transition-colors rounded-t-lg","focus:outline-none",fe&&"opacity-50 cursor-not-allowed",u===W?{io:"bg-blue-100 text-blue-800",error:"bg-red-100 text-red-800",time:"bg-purple-100 text-purple-800",common:"bg-green-100 text-green-800"}[W]:"text-gray-600 hover:bg-gray-100"),children:ae}),Q=()=>{var ae;const W="space-y-4 min-h-[300px]";switch(u){case"io":return _.jsxs("div",{className:W,children:[t.input&&_.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto relative",children:[_.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Input"}),_.jsx(ye,{content:JSON.stringify(JSON.parse(t.input),null,2)}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap break-all bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.input),null,2)})})]}),t.result&&_.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto relative",children:[_.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Result"}),_.jsx(ye,{content:JSON.stringify(JSON.parse(t.result),null,2)}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap break-all bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.result),null,2)})})]}),t.header&&Object.keys(t.header).length>0&&_.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto relative",children:[_.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Header"}),_.jsx(ye,{content:JSON.stringify(t.header,null,2)}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap break-all bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(t.header,null,2)})})]}),t.memo&&Object.keys(t.memo).length>0&&_.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto",children:[_.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Memo"}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(t.memo,null,2)})})]}),t.searchAttributes&&Object.keys(t.searchAttributes).length>0&&_.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto",children:[_.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Search Attributes"}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(t.searchAttributes,null,2)})})]})]});case"error":return _.jsxs("div",{className:W,children:[t.lastFailure&&_.jsxs("div",{className:"bg-red-50 p-4 rounded-lg overflow-auto relative",children:[_.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Last Failure"}),_.jsx(ye,{content:JSON.stringify(JSON.parse(t.lastFailure),null,2)}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap break-all bg-red-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.lastFailure),null,2)})})]}),t.failure&&_.jsxs("div",{className:"bg-red-50 p-4 rounded-lg overflow-auto relative",children:[_.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Failure"}),_.jsx(ye,{content:JSON.stringify(JSON.parse(t.failure),null,2)}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap break-all bg-red-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.failure),null,2)})})]})]});case"time":return _.jsxs("div",{className:W,children:[t.startTime&&t.endTime&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Duration"}),_.jsx("p",{className:"text-purple-700 text-lg font-semibold",children:wh(t.startTime,t.endTime)})]}),t.scheduleTime&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Schedule Time"}),_.jsx("p",{className:"text-purple-700",children:t.scheduleTime})]}),t.startTime&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Start Time"}),_.jsx("p",{className:"text-purple-700",children:t.startTime})]}),t.endTime&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"End Time"}),_.jsx("p",{className:"text-purple-700",children:t.endTime})]}),t.lastStartedTime&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Last Started Time"}),_.jsx("p",{className:"text-purple-700",children:t.lastStartedTime})]}),t.lastAttemptCompleteTime&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Last Attempt Complete Time"}),_.jsx("p",{className:"text-purple-700",children:t.lastAttemptCompleteTime})]}),(t.heartbeatTimeout||t.scheduleToCloseTimeout||t.scheduleToStartTimeout||t.startToCloseTimeout||t.workflowRunTimeout||t.workflowTaskTimeout)&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Timeouts"}),t.heartbeatTimeout&&_.jsxs("p",{className:"text-purple-700",children:["Heartbeat: ",t.heartbeatTimeout]}),t.scheduleToCloseTimeout&&_.jsxs("p",{className:"text-purple-700",children:["Schedule to Close: ",t.scheduleToCloseTimeout]}),t.scheduleToStartTimeout&&_.jsxs("p",{className:"text-purple-700",children:["Schedule to Start: ",t.scheduleToStartTimeout]}),t.startToCloseTimeout&&_.jsxs("p",{className:"text-purple-700",children:["Start to Close: ",t.startToCloseTimeout]}),t.workflowRunTimeout&&_.jsxs("p",{className:"text-purple-700",children:["Workflow Run: ",t.workflowRunTimeout]}),t.workflowTaskTimeout&&_.jsxs("p",{className:"text-purple-700",children:["Workflow Task: ",t.workflowTaskTimeout]})]})]});case"common":return _.jsxs("div",{className:W,children:[_.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Basic Information"}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs("p",{className:"text-green-700",children:["Type: ",t.type]}),t.activityType&&_.jsxs("p",{className:"text-green-700",children:["Activity Type: ",t.activityType]}),t.workflowType&&_.jsxs("p",{className:"text-green-700",children:["Workflow Type: ",t.workflowType]}),_.jsxs("p",{className:"text-green-700",children:["Status: ",t.status]}),t.namespace&&_.jsxs("p",{className:"text-green-700",children:["Namespace: ",t.namespace]}),t.workflowId&&_.jsxs("p",{className:"text-green-700",children:["Workflow ID: ",t.workflowId]}),(t.workflowRunId||t.runId)&&_.jsxs("p",{className:"text-green-700",children:["Run ID: ",t.workflowRunId||t.runId]}),t.activityId&&_.jsxs("p",{className:"text-green-700",children:["Activity ID: ",t.activityId]}),t.workflowTaskCompletedEventId&&_.jsxs("p",{className:"text-green-700",children:["Workflow Task Completed Event ID:"," ",t.workflowTaskCompletedEventId]})]})]}),t.taskQueue&&_.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Task Queue"}),_.jsxs("p",{className:"text-green-700",children:["Name: ",t.taskQueue.name]})]}),t.retryPolicy&&_.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Retry Policy"}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs("p",{className:"text-green-700",children:["Initial Interval: ",t.retryPolicy.initialInterval]}),_.jsxs("p",{className:"text-green-700",children:["Backoff Coefficient: ",t.retryPolicy.backoffCoefficient]}),_.jsxs("p",{className:"text-green-700",children:["Maximum Interval: ",t.retryPolicy.maximumInterval]}),_.jsxs("p",{className:"text-green-700",children:["Maximum Attempts: ",t.retryPolicy.maximumAttempts]}),((ae=t.retryPolicy.nonRetryableErrorTypes)==null?void 0:ae.length)>0&&_.jsxs("div",{children:[_.jsx("p",{className:"text-green-700",children:"Non-retryable Error Types:"}),_.jsx("ul",{className:"list-disc pl-4",children:t.retryPolicy.nonRetryableErrorTypes.map((fe,we)=>_.jsx("li",{className:"text-green-700",children:fe},we))})]})]})]}),t.attempts&&_.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Attempts"}),_.jsxs("p",{className:"text-green-700",children:["Count: ",t.attempts]})]}),t.lastWorkerIdentity&&_.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Worker"}),_.jsxs("p",{className:"text-green-700",children:["Last Identity: ",t.lastWorkerIdentity]})]}),t.workflowReusePolicy&&_.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Workflow Reuse Policy"}),_.jsx("p",{className:"text-green-700",children:t.workflowReusePolicy})]})]})}},ye=({content:W})=>{const ae=()=>{navigator.clipboard.writeText(W)};return _.jsx("button",{onClick:ae,className:"absolute top-4 right-4 p-1.5 rounded bg-white/80 hover:bg-white border border-gray-200 transition-colors",title:"Copy to clipboard",children:_.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-600",children:[_.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),_.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})},he=_.jsxs("div",{ref:f,"data-node-panel":!0,"data-base-z-index":a,className:"fixed bg-white rounded-lg shadow-xl border border-gray-200 overflow-hidden",style:{...J(),width:p.width,height:p.height,zIndex:B,visibility:"visible",opacity:1,pointerEvents:"auto"},onClick:W=>{W.preventDefault(),W.stopPropagation(),oe()},onMouseDown:W=>{W.preventDefault(),W.stopPropagation(),W.target instanceof HTMLElement&&W.target.closest("[data-drag-handle]")&&ce(W)},children:[_.jsx("button",{onClick:W=>{W.preventDefault(),W.stopPropagation(),n()},className:"absolute top-2 right-2 p-1.5 hover:bg-gray-100 rounded-full transition-colors z-50",title:"Close panel",children:_.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-500",children:[_.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),_.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),_.jsx("div",{className:"flex absolute top-0 left-0 right-0 h-4 cursor-move","data-drag-handle":!0,onMouseDown:ce,children:_.jsx("div",{className:"mx-auto p-1.5 select-none",children:_.jsxs("svg",{width:"20",height:"10",viewBox:"0 0 20 4",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-gray-400 pointer-events-none",children:[_.jsx("circle",{cx:"2",cy:"2",r:"1",fill:"currentColor"}),_.jsx("circle",{cx:"10",cy:"2",r:"1",fill:"currentColor"}),_.jsx("circle",{cx:"18",cy:"2",r:"1",fill:"currentColor"})]})})}),(R||t.type==="activity")&&_.jsxs("div",{className:xr("px-4 py-2 bg-gray-50 border-b",t.type==="activity"&&"pt-6"),children:[_.jsxs("div",{className:"flex items-center justify-between mb-2 pr-8",children:[_.jsx("div",{className:"flex items-center gap-2",children:R&&_.jsxs(_.Fragment,{children:[_.jsxs("svg",{className:"w-4 h-4 text-gray-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[_.jsx("rect",{x:"9",y:"3",width:"6",height:"6",rx:"1"}),_.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),_.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"}),_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3M6 15v-3h12v3"})]}),_.jsx("a",{href:R,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",onClick:W=>{W.stopPropagation(),window.open(R,"_blank","noopener,noreferrer")},children:"View in Temporal"})]})}),_.jsxs("div",{className:"flex flex-col items-end",children:[_.jsx("span",{className:"text-xs text-gray-500",children:t.namespace}),t.taskQueue&&_.jsx("span",{className:"text-xs text-gray-500",children:t.taskQueue.name})]})]}),_.jsxs("div",{className:"flex flex-col gap-1",children:[t.workflowType&&_.jsxs("span",{className:"text-xs text-gray-500",children:[_.jsx("span",{className:"font-bold",children:"Type:"})," ",_.jsx("span",{className:"font-bold",children:t.workflowType})]}),t.type==="activity"&&t.activityType&&_.jsxs("span",{className:"text-xs text-gray-500",children:[_.jsx("span",{className:"font-bold",children:"Type:"})," ",_.jsx("span",{className:"font-bold",children:t.activityType})]}),t.workflowId&&t.type!=="activity"&&_.jsx("span",{className:"text-xs text-gray-500 select-all font-mono",children:t.workflowId})]})]}),_.jsxs("div",{className:"border-b flex gap-1 px-2 pt-2 bg-gray-50",children:[_.jsx(re,{tab:"io",label:"Input/Output",disabled:!ue}),_.jsx(re,{tab:"error",label:"Error",disabled:!X}),_.jsx(re,{tab:"time",label:"Time",disabled:!Y}),_.jsx(re,{tab:"common",label:"Common"})]}),_.jsx("div",{className:"overflow-y-auto",style:{height:"calc(100% - 116px)"},children:_.jsx("div",{className:"p-4",children:Q()})}),_.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-se-resize",onMouseDown:U,style:{background:"linear-gradient(135deg, transparent 50%, #CBD5E1 50%)"}})]});return th.createPortal(he,z)}var pD=Object.defineProperty,mD=(e,t,n)=>t in e?pD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qf=(e,t,n)=>(mD(e,typeof t!="symbol"?t+"":t,n),n);let gD=class{constructor(){qf(this,"current",this.detect()),qf(this,"handoffState","pending"),qf(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Vo=new gD;function dl(e){return Vo.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function hl(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function ro(){let e=[],t={addEventListener(n,i,a,u){return n.addEventListener(i,a,u),t.add(()=>n.removeEventListener(i,a,u))},requestAnimationFrame(...n){let i=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(i))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let i=setTimeout(...n);return t.add(()=>clearTimeout(i))},microTask(...n){let i={current:!0};return hl(()=>{i.current&&n[0]()}),t.add(()=>{i.current=!1})},style(n,i,a){let u=n.style.getPropertyValue(i);return Object.assign(n.style,{[i]:a}),this.add(()=>{Object.assign(n.style,{[i]:u})})},group(n){let i=ro();return n(i),this.add(()=>i.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let i=e.indexOf(n);if(i>=0)for(let a of e.splice(i,1))a()}},dispose(){for(let n of e.splice(0))n()}};return t}function Ah(){let[e]=k.useState(ro);return k.useEffect(()=>()=>e.dispose(),[e]),e}let jn=(e,t)=>{Vo.isServer?k.useEffect(e,t):k.useLayoutEffect(e,t)};function ea(e){let t=k.useRef(e);return jn(()=>{t.current=e},[e]),t}let Qt=function(e){let t=ea(e);return ie.useCallback((...n)=>t.current(...n),[t])},vD=k.createContext(void 0);function yD(){return k.useContext(vD)}function Rd(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function to(e,t,...n){if(e in t){let a=t[e];return typeof a=="function"?a(...n):a}let i=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,to),i}var Hc=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Hc||{}),Ji=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Ji||{});function _r(){let e=xD();return k.useCallback(t=>wD({mergeRefs:e,...t}),[e])}function wD({ourProps:e,theirProps:t,slot:n,defaultTag:i,features:a,visible:u=!0,name:c,mergeRefs:f}){f=f??bD;let h=Sy(t,e);if(u)return vc(h,n,i,c,f);let p=a??0;if(p&2){let{static:m=!1,...y}=h;if(m)return vc(y,n,i,c,f)}if(p&1){let{unmount:m=!0,...y}=h;return to(m?0:1,{0(){return null},1(){return vc({...y,hidden:!0,style:{display:"none"}},n,i,c,f)}})}return vc(h,n,i,c,f)}function vc(e,t={},n,i,a){let{as:u=n,children:c,refName:f="ref",...h}=Xf(e,["unmount","static"]),p=e.ref!==void 0?{[f]:e.ref}:{},m=typeof c=="function"?c(t):c;"className"in h&&h.className&&typeof h.className=="function"&&(h.className=h.className(t)),h["aria-labelledby"]&&h["aria-labelledby"]===h.id&&(h["aria-labelledby"]=void 0);let y={};if(t){let x=!1,b=[];for(let[N,E]of Object.entries(t))typeof E=="boolean"&&(x=!0),E===!0&&b.push(N.replace(/([A-Z])/g,C=>`-${C.toLowerCase()}`));if(x){y["data-headlessui-state"]=b.join(" ");for(let N of b)y[`data-${N}`]=""}}if(u===k.Fragment&&(Object.keys(Wo(h)).length>0||Object.keys(Wo(y)).length>0))if(!k.isValidElement(m)||Array.isArray(m)&&m.length>1){if(Object.keys(Wo(h)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${i} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Wo(h)).concat(Object.keys(Wo(y))).map(x=>`  - ${x}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(x=>`  - ${x}`).join(`
`)].join(`
`))}else{let x=m.props,b=x==null?void 0:x.className,N=typeof b=="function"?(...M)=>Rd(b(...M),h.className):Rd(b,h.className),E=N?{className:N}:{},C=Sy(m.props,Wo(Xf(h,["ref"])));for(let M in y)M in C&&delete y[M];return k.cloneElement(m,Object.assign({},C,y,p,{ref:a(_D(m),p.ref)},E))}return k.createElement(u,Object.assign({},Xf(h,["ref"]),u!==k.Fragment&&p,u!==k.Fragment&&y),m)}function xD(){let e=k.useRef([]),t=k.useCallback(n=>{for(let i of e.current)i!=null&&(typeof i=="function"?i(n):i.current=n)},[]);return(...n)=>{if(!n.every(i=>i==null))return e.current=n,t}}function bD(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function Sy(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let i of e)for(let a in i)a.startsWith("on")&&typeof i[a]=="function"?(n[a]!=null||(n[a]=[]),n[a].push(i[a])):t[a]=i[a];if(t.disabled||t["aria-disabled"])for(let i in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(i)&&(n[i]=[a=>{var u;return(u=a==null?void 0:a.preventDefault)==null?void 0:u.call(a)}]);for(let i in n)Object.assign(t,{[i](a,...u){let c=n[i];for(let f of c){if((a instanceof Event||(a==null?void 0:a.nativeEvent)instanceof Event)&&a.defaultPrevented)return;f(a,...u)}}});return t}function Xn(e){var t;return Object.assign(k.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Wo(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Xf(e,t=[]){let n=Object.assign({},e);for(let i of t)i in n&&delete n[i];return n}function _D(e){return ie.version.split(".")[0]>="19"?e.props.ref:e.ref}let ED="span";var Kc=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Kc||{});function SD(e,t){var n;let{features:i=1,...a}=e,u={ref:t,"aria-hidden":(i&2)===2?!0:(n=a["aria-hidden"])!=null?n:void 0,hidden:(i&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(i&4)===4&&(i&2)!==2&&{display:"none"}}};return _r()({ourProps:u,theirProps:a,slot:{},defaultTag:ED,name:"Hidden"})}let Md=Xn(SD),Ty=Symbol();function TD(e,t=!0){return Object.assign(e,{[Ty]:t})}function ii(...e){let t=k.useRef(e);k.useEffect(()=>{t.current=e},[e]);let n=Qt(i=>{for(let a of t.current)a!=null&&(typeof a=="function"?a(i):a.current=i)});return e.every(i=>i==null||(i==null?void 0:i[Ty]))?void 0:n}let Dh=k.createContext(null);Dh.displayName="DescriptionContext";function Ny(){let e=k.useContext(Dh);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Ny),t}return e}function ND(){let[e,t]=k.useState([]);return[e.length>0?e.join(" "):void 0,k.useMemo(()=>function(n){let i=Qt(u=>(t(c=>[...c,u]),()=>t(c=>{let f=c.slice(),h=f.indexOf(u);return h!==-1&&f.splice(h,1),f}))),a=k.useMemo(()=>({register:i,slot:n.slot,name:n.name,props:n.props,value:n.value}),[i,n.slot,n.name,n.props,n.value]);return ie.createElement(Dh.Provider,{value:a},n.children)},[t])]}let kD="p";function ID(e,t){let n=k.useId(),i=yD(),{id:a=`headlessui-description-${n}`,...u}=e,c=Ny(),f=ii(t);jn(()=>c.register(a),[a,c.register]);let h=i||!1,p=k.useMemo(()=>({...c.slot,disabled:h}),[c.slot,h]),m={ref:f,...c.props,id:a};return _r()({ourProps:m,theirProps:u,slot:p,defaultTag:kD,name:c.name||"Description"})}let CD=Xn(ID),OD=Object.assign(CD,{});var ky=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(ky||{});let AD=k.createContext(()=>{});function DD({value:e,children:t}){return ie.createElement(AD.Provider,{value:e},t)}let PD=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};function Iy(e,t){let n=e(),i=new Set;return{getSnapshot(){return n},subscribe(a){return i.add(a),()=>i.delete(a)},dispatch(a,...u){let c=t[a].call(n,...u);c&&(n=c,i.forEach(f=>f()))}}}function Cy(e){return k.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}let RD=new PD(()=>Iy(()=>[],{ADD(e){return this.includes(e)?this:[...this,e]},REMOVE(e){let t=this.indexOf(e);if(t===-1)return this;let n=this.slice();return n.splice(t,1),n}}));function qa(e,t){let n=RD.get(t),i=k.useId(),a=Cy(n);if(jn(()=>{if(e)return n.dispatch("ADD",i),()=>n.dispatch("REMOVE",i)},[n,e]),!e)return!1;let u=a.indexOf(i),c=a.length;return u===-1&&(u=c,c+=1),u===c-1}let Ld=new Map,Ys=new Map;function zg(e){var t;let n=(t=Ys.get(e))!=null?t:0;return Ys.set(e,n+1),n!==0?()=>Ug(e):(Ld.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Ug(e))}function Ug(e){var t;let n=(t=Ys.get(e))!=null?t:1;if(n===1?Ys.delete(e):Ys.set(e,n-1),n!==1)return;let i=Ld.get(e);i&&(i["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",i["aria-hidden"]),e.inert=i.inert,Ld.delete(e))}function MD(e,{allowed:t,disallowed:n}={}){let i=qa(e,"inert-others");jn(()=>{var a,u;if(!i)return;let c=ro();for(let h of(a=n==null?void 0:n())!=null?a:[])h&&c.add(zg(h));let f=(u=t==null?void 0:t())!=null?u:[];for(let h of f){if(!h)continue;let p=dl(h);if(!p)continue;let m=h.parentElement;for(;m&&m!==p.body;){for(let y of m.children)f.some(x=>y.contains(x))||c.add(zg(y));m=m.parentElement}}return c.dispose},[i,t,n])}function LD(e,t,n){let i=ea(a=>{let u=a.getBoundingClientRect();u.x===0&&u.y===0&&u.width===0&&u.height===0&&n()});k.useEffect(()=>{if(!e)return;let a=t===null?null:t instanceof HTMLElement?t:t.current;if(!a)return;let u=ro();if(typeof ResizeObserver<"u"){let c=new ResizeObserver(()=>i.current(a));c.observe(a),u.add(()=>c.disconnect())}if(typeof IntersectionObserver<"u"){let c=new IntersectionObserver(()=>i.current(a));c.observe(a),u.add(()=>c.disconnect())}return()=>u.dispose()},[t,i,e])}let zc=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),$D=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var wi=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(wi||{}),$d=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))($d||{}),WD=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(WD||{});function FD(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(zc)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function jD(e=document.body){return e==null?[]:Array.from(e.querySelectorAll($D)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Oy=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Oy||{});function BD(e,t=0){var n;return e===((n=dl(e))==null?void 0:n.body)?!1:to(t,{0(){return e.matches(zc)},1(){let i=e;for(;i!==null;){if(i.matches(zc))return!0;i=i.parentElement}return!1}})}var HD=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(HD||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Ei(e){e==null||e.focus({preventScroll:!0})}let KD=["textarea","input"].join(",");function zD(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,KD))!=null?n:!1}function UD(e,t=n=>n){return e.slice().sort((n,i)=>{let a=t(n),u=t(i);if(a===null||u===null)return 0;let c=a.compareDocumentPosition(u);return c&Node.DOCUMENT_POSITION_FOLLOWING?-1:c&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Vs(e,t,{sorted:n=!0,relativeTo:i=null,skipElements:a=[]}={}){let u=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,c=Array.isArray(e)?n?UD(e):e:t&64?jD(e):FD(e);a.length>0&&c.length>1&&(c=c.filter(b=>!a.some(N=>N!=null&&"current"in N?(N==null?void 0:N.current)===b:N===b))),i=i??u.activeElement;let f=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),h=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,c.indexOf(i))-1;if(t&4)return Math.max(0,c.indexOf(i))+1;if(t&8)return c.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),p=t&32?{preventScroll:!0}:{},m=0,y=c.length,x;do{if(m>=y||m+y<=0)return 0;let b=h+m;if(t&16)b=(b+y)%y;else{if(b<0)return 3;if(b>=y)return 1}x=c[b],x==null||x.focus(p),m+=f}while(x!==u.activeElement);return t&6&&zD(x)&&x.select(),2}function Ay(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function YD(){return/Android/gi.test(window.navigator.userAgent)}function VD(){return Ay()||YD()}function Ms(e,t,n,i){let a=ea(n);k.useEffect(()=>{if(!e)return;function u(c){a.current(c)}return document.addEventListener(t,u,i),()=>document.removeEventListener(t,u,i)},[e,t,i])}function Dy(e,t,n,i){let a=ea(n);k.useEffect(()=>{if(!e)return;function u(c){a.current(c)}return window.addEventListener(t,u,i),()=>window.removeEventListener(t,u,i)},[e,t,i])}const Yg=30;function qD(e,t,n){let i=qa(e,"outside-click"),a=ea(n),u=k.useCallback(function(h,p){if(h.defaultPrevented)return;let m=p(h);if(m===null||!m.getRootNode().contains(m)||!m.isConnected)return;let y=function x(b){return typeof b=="function"?x(b()):Array.isArray(b)||b instanceof Set?b:[b]}(t);for(let x of y)if(x!==null&&(x.contains(m)||h.composed&&h.composedPath().includes(x)))return;return!BD(m,Oy.Loose)&&m.tabIndex!==-1&&h.preventDefault(),a.current(h,m)},[a,t]),c=k.useRef(null);Ms(i,"pointerdown",h=>{var p,m;c.current=((m=(p=h.composedPath)==null?void 0:p.call(h))==null?void 0:m[0])||h.target},!0),Ms(i,"mousedown",h=>{var p,m;c.current=((m=(p=h.composedPath)==null?void 0:p.call(h))==null?void 0:m[0])||h.target},!0),Ms(i,"click",h=>{VD()||c.current&&(u(h,()=>c.current),c.current=null)},!0);let f=k.useRef({x:0,y:0});Ms(i,"touchstart",h=>{f.current.x=h.touches[0].clientX,f.current.y=h.touches[0].clientY},!0),Ms(i,"touchend",h=>{let p={x:h.changedTouches[0].clientX,y:h.changedTouches[0].clientY};if(!(Math.abs(p.x-f.current.x)>=Yg||Math.abs(p.y-f.current.y)>=Yg))return u(h,()=>h.target instanceof HTMLElement?h.target:null)},!0),Dy(i,"blur",h=>u(h,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function hu(...e){return k.useMemo(()=>dl(...e),[...e])}function Py(e,t,n,i){let a=ea(n);k.useEffect(()=>{e=e??window;function u(c){a.current(c)}return e.addEventListener(t,u,i),()=>e.removeEventListener(t,u,i)},[e,t,i])}function XD(){let e;return{before({doc:t}){var n;let i=t.documentElement,a=(n=t.defaultView)!=null?n:window;e=Math.max(0,a.innerWidth-i.clientWidth)},after({doc:t,d:n}){let i=t.documentElement,a=Math.max(0,i.clientWidth-i.offsetWidth),u=Math.max(0,e-a);n.style(i,"paddingRight",`${u}px`)}}}function GD(){return Ay()?{before({doc:e,d:t,meta:n}){function i(a){return n.containers.flatMap(u=>u()).some(u=>u.contains(a))}t.microTask(()=>{var a;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let f=ro();f.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>f.dispose()))}let u=(a=window.scrollY)!=null?a:window.pageYOffset,c=null;t.addEventListener(e,"click",f=>{if(f.target instanceof HTMLElement)try{let h=f.target.closest("a");if(!h)return;let{hash:p}=new URL(h.href),m=e.querySelector(p);m&&!i(m)&&(c=m)}catch{}},!0),t.addEventListener(e,"touchstart",f=>{if(f.target instanceof HTMLElement)if(i(f.target)){let h=f.target;for(;h.parentElement&&i(h.parentElement);)h=h.parentElement;t.style(h,"overscrollBehavior","contain")}else t.style(f.target,"touchAction","none")}),t.addEventListener(e,"touchmove",f=>{if(f.target instanceof HTMLElement){if(f.target.tagName==="INPUT")return;if(i(f.target)){let h=f.target;for(;h.parentElement&&h.dataset.headlessuiPortal!==""&&!(h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth);)h=h.parentElement;h.dataset.headlessuiPortal===""&&f.preventDefault()}else f.preventDefault()}},{passive:!1}),t.add(()=>{var f;let h=(f=window.scrollY)!=null?f:window.pageYOffset;u!==h&&window.scrollTo(0,u),c&&c.isConnected&&(c.scrollIntoView({block:"nearest"}),c=null)})})}}:{}}function ZD(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function QD(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let zo=Iy(()=>new Map,{PUSH(e,t){var n;let i=(n=this.get(e))!=null?n:{doc:e,count:0,d:ro(),meta:new Set};return i.count++,i.meta.add(t),this.set(e,i),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let i={doc:e,d:t,meta:QD(n)},a=[GD(),XD(),ZD()];a.forEach(({before:u})=>u==null?void 0:u(i)),a.forEach(({after:u})=>u==null?void 0:u(i))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});zo.subscribe(()=>{let e=zo.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let i=t.get(n.doc)==="hidden",a=n.count!==0;(a&&!i||!a&&i)&&zo.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&zo.dispatch("TEARDOWN",n)}});function JD(e,t,n=()=>({containers:[]})){let i=Cy(zo),a=t?i.get(t):void 0,u=a?a.count>0:!1;return jn(()=>{if(!(!t||!e))return zo.dispatch("PUSH",t,n),()=>zo.dispatch("POP",t,n)},[e,t]),u}function e2(e,t,n=()=>[document.body]){let i=qa(e,"scroll-lock");JD(i,t,a=>{var u;return{containers:[...(u=a.containers)!=null?u:[],n]}})}function t2(e=0){let[t,n]=k.useState(e),i=k.useCallback(h=>n(h),[t]),a=k.useCallback(h=>n(p=>p|h),[t]),u=k.useCallback(h=>(t&h)===h,[t]),c=k.useCallback(h=>n(p=>p&~h),[n]),f=k.useCallback(h=>n(p=>p^h),[n]);return{flags:t,setFlag:i,addFlag:a,hasFlag:u,removeFlag:c,toggleFlag:f}}var n2={},Vg,qg;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((Vg=process==null?void 0:n2)==null?void 0:Vg.NODE_ENV)==="test"&&typeof((qg=Element==null?void 0:Element.prototype)==null?void 0:qg.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var r2=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(r2||{});function i2(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function o2(e,t,n,i){let[a,u]=k.useState(n),{hasFlag:c,addFlag:f,removeFlag:h}=t2(e&&a?3:0),p=k.useRef(!1),m=k.useRef(!1),y=Ah();return jn(()=>{var x;if(e){if(n&&u(!0),!t){n&&f(3);return}return(x=i==null?void 0:i.start)==null||x.call(i,n),a2(t,{inFlight:p,prepare(){m.current?m.current=!1:m.current=p.current,p.current=!0,!m.current&&(n?(f(3),h(4)):(f(4),h(2)))},run(){m.current?n?(h(3),f(4)):(h(4),f(3)):n?h(1):f(1)},done(){var b;m.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(p.current=!1,h(7),n||u(!1),(b=i==null?void 0:i.end)==null||b.call(i,n))}})}},[e,n,t,y]),e?[a,{closed:c(1),enter:c(2),leave:c(4),transition:c(2)||c(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function a2(e,{prepare:t,run:n,done:i,inFlight:a}){let u=ro();return u2(e,{prepare:t,inFlight:a}),u.nextFrame(()=>{n(),u.requestAnimationFrame(()=>{u.add(s2(e,i))})}),u.dispose}function s2(e,t){var n,i;let a=ro();if(!e)return a.dispose;let u=!1;a.add(()=>{u=!0});let c=(i=(n=e.getAnimations)==null?void 0:n.call(e).filter(f=>f instanceof CSSTransition))!=null?i:[];return c.length===0?(t(),a.dispose):(Promise.allSettled(c.map(f=>f.finished)).then(()=>{u||t()}),a.dispose)}function u2(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let i=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=i}function Ph(e,t){let n=k.useRef([]),i=Qt(e);k.useEffect(()=>{let a=[...n.current];for(let[u,c]of t.entries())if(n.current[u]!==c){let f=i(t,a);return n.current=t,f}},[i,...t])}let pl=k.createContext(null);pl.displayName="OpenClosedContext";var Fr=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Fr||{});function ml(){return k.useContext(pl)}function c2({value:e,children:t}){return ie.createElement(pl.Provider,{value:e},t)}function l2({children:e}){return ie.createElement(pl.Provider,{value:null},e)}function f2(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Zi=[];f2(()=>{function e(t){if(!(t.target instanceof HTMLElement)||t.target===document.body||Zi[0]===t.target)return;let n=t.target;n=n.closest(zc),Zi.unshift(n??t.target),Zi=Zi.filter(i=>i!=null&&i.isConnected),Zi.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function Ry(e){let t=Qt(e),n=k.useRef(!1);k.useEffect(()=>(n.current=!1,()=>{n.current=!0,hl(()=>{n.current&&t()})}),[t])}function d2(){let e=typeof document>"u";return"useSyncExternalStore"in Rm?(t=>t.useSyncExternalStore)(Rm)(()=>()=>{},()=>!1,()=>!e):!1}function pu(){let e=d2(),[t,n]=k.useState(Vo.isHandoffComplete);return t&&Vo.isHandoffComplete===!1&&n(!1),k.useEffect(()=>{t!==!0&&n(!0)},[t]),k.useEffect(()=>Vo.handoff(),[]),e?!1:t}let My=k.createContext(!1);function h2(){return k.useContext(My)}function Xg(e){return ie.createElement(My.Provider,{value:e.force},e.children)}function p2(e){let t=h2(),n=k.useContext($y),i=hu(e),[a,u]=k.useState(()=>{var c;if(!t&&n!==null)return(c=n.current)!=null?c:null;if(Vo.isServer)return null;let f=i==null?void 0:i.getElementById("headlessui-portal-root");if(f)return f;if(i===null)return null;let h=i.createElement("div");return h.setAttribute("id","headlessui-portal-root"),i.body.appendChild(h)});return k.useEffect(()=>{a!==null&&(i!=null&&i.body.contains(a)||i==null||i.body.appendChild(a))},[a,i]),k.useEffect(()=>{t||n!==null&&u(n.current)},[n,u,t]),a}let Ly=k.Fragment,m2=Xn(function(e,t){let n=e,i=k.useRef(null),a=ii(TD(y=>{i.current=y}),t),u=hu(i),c=p2(i),[f]=k.useState(()=>{var y;return Vo.isServer?null:(y=u==null?void 0:u.createElement("div"))!=null?y:null}),h=k.useContext(Wd),p=pu();jn(()=>{!c||!f||c.contains(f)||(f.setAttribute("data-headlessui-portal",""),c.appendChild(f))},[c,f]),jn(()=>{if(f&&h)return h.register(f)},[h,f]),Ry(()=>{var y;!c||!f||(f instanceof Node&&c.contains(f)&&c.removeChild(f),c.childNodes.length<=0&&((y=c.parentElement)==null||y.removeChild(c)))});let m=_r();return p?!c||!f?null:th.createPortal(m({ourProps:{ref:a},theirProps:n,slot:{},defaultTag:Ly,name:"Portal"}),f):null});function g2(e,t){let n=ii(t),{enabled:i=!0,...a}=e,u=_r();return i?ie.createElement(m2,{...a,ref:n}):u({ourProps:{ref:n},theirProps:a,slot:{},defaultTag:Ly,name:"Portal"})}let v2=k.Fragment,$y=k.createContext(null);function y2(e,t){let{target:n,...i}=e,a={ref:ii(t)},u=_r();return ie.createElement($y.Provider,{value:n},u({ourProps:a,theirProps:i,defaultTag:v2,name:"Popover.Group"}))}let Wd=k.createContext(null);function w2(){let e=k.useContext(Wd),t=k.useRef([]),n=Qt(u=>(t.current.push(u),e&&e.register(u),()=>i(u))),i=Qt(u=>{let c=t.current.indexOf(u);c!==-1&&t.current.splice(c,1),e&&e.unregister(u)}),a=k.useMemo(()=>({register:n,unregister:i,portals:t}),[n,i,t]);return[t,k.useMemo(()=>function({children:u}){return ie.createElement(Wd.Provider,{value:a},u)},[a])]}let x2=Xn(g2),Wy=Xn(y2),b2=Object.assign(x2,{Group:Wy});function _2(e,t=typeof document<"u"?document.defaultView:null,n){let i=qa(e,"escape");Py(t,"keydown",a=>{i&&(a.defaultPrevented||a.key===ky.Escape&&n(a))})}function E2(){var e;let[t]=k.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,i]=k.useState((e=t==null?void 0:t.matches)!=null?e:!1);return jn(()=>{if(!t)return;function a(u){i(u.matches)}return t.addEventListener("change",a),()=>t.removeEventListener("change",a)},[t]),n}function S2({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let i=hu(n),a=Qt(()=>{var u,c;let f=[];for(let h of e)h!==null&&(h instanceof HTMLElement?f.push(h):"current"in h&&h.current instanceof HTMLElement&&f.push(h.current));if(t!=null&&t.current)for(let h of t.current)f.push(h);for(let h of(u=i==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?u:[])h!==document.body&&h!==document.head&&h instanceof HTMLElement&&h.id!=="headlessui-portal-root"&&(n&&(h.contains(n)||h.contains((c=n==null?void 0:n.getRootNode())==null?void 0:c.host))||f.some(p=>h.contains(p))||f.push(h));return f});return{resolveContainers:a,contains:Qt(u=>a().some(c=>c.contains(u)))}}let Fy=k.createContext(null);function Gg({children:e,node:t}){let[n,i]=k.useState(null),a=jy(t??n);return ie.createElement(Fy.Provider,{value:a},e,a===null&&ie.createElement(Md,{features:Kc.Hidden,ref:u=>{var c,f;if(u){for(let h of(f=(c=dl(u))==null?void 0:c.querySelectorAll("html > *, body > *"))!=null?f:[])if(h!==document.body&&h!==document.head&&h instanceof HTMLElement&&h!=null&&h.contains(u)){i(h);break}}}}))}function jy(e=null){var t;return(t=k.useContext(Fy))!=null?t:e}function Rh(){let e=k.useRef(!1);return jn(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Ks=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ks||{});function T2(){let e=k.useRef(0);return Dy(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function By(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let N2="div";var jo=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(jo||{});function k2(e,t){let n=k.useRef(null),i=ii(n,t),{initialFocus:a,initialFocusFallback:u,containers:c,features:f=15,...h}=e;pu()||(f=0);let p=hu(n);A2(f,{ownerDocument:p});let m=D2(f,{ownerDocument:p,container:n,initialFocus:a,initialFocusFallback:u});P2(f,{ownerDocument:p,container:n,containers:c,previousActiveElement:m});let y=T2(),x=Qt(z=>{let ee=n.current;ee&&(B=>B())(()=>{to(y.current,{[Ks.Forwards]:()=>{Vs(ee,wi.First,{skipElements:[z.relatedTarget,u]})},[Ks.Backwards]:()=>{Vs(ee,wi.Last,{skipElements:[z.relatedTarget,u]})}})})}),b=qa(!!(f&2),"focus-trap#tab-lock"),N=Ah(),E=k.useRef(!1),C={ref:i,onKeyDown(z){z.key=="Tab"&&(E.current=!0,N.requestAnimationFrame(()=>{E.current=!1}))},onBlur(z){if(!(f&4))return;let ee=By(c);n.current instanceof HTMLElement&&ee.add(n.current);let B=z.relatedTarget;B instanceof HTMLElement&&B.dataset.headlessuiFocusGuard!=="true"&&(Hy(ee,B)||(E.current?Vs(n.current,to(y.current,{[Ks.Forwards]:()=>wi.Next,[Ks.Backwards]:()=>wi.Previous})|wi.WrapAround,{relativeTo:z.target}):z.target instanceof HTMLElement&&Ei(z.target)))}},M=_r();return ie.createElement(ie.Fragment,null,b&&ie.createElement(Md,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:x,features:Kc.Focusable}),M({ourProps:C,theirProps:h,defaultTag:N2,name:"FocusTrap"}),b&&ie.createElement(Md,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:x,features:Kc.Focusable}))}let I2=Xn(k2),C2=Object.assign(I2,{features:jo});function O2(e=!0){let t=k.useRef(Zi.slice());return Ph(([n],[i])=>{i===!0&&n===!1&&hl(()=>{t.current.splice(0)}),i===!1&&n===!0&&(t.current=Zi.slice())},[e,Zi,t]),Qt(()=>{var n;return(n=t.current.find(i=>i!=null&&i.isConnected))!=null?n:null})}function A2(e,{ownerDocument:t}){let n=!!(e&8),i=O2(n);Ph(()=>{n||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&Ei(i())},[n]),Ry(()=>{n&&Ei(i())})}function D2(e,{ownerDocument:t,container:n,initialFocus:i,initialFocusFallback:a}){let u=k.useRef(null),c=qa(!!(e&1),"focus-trap#initial-focus"),f=Rh();return Ph(()=>{if(e===0)return;if(!c){a!=null&&a.current&&Ei(a.current);return}let h=n.current;h&&hl(()=>{if(!f.current)return;let p=t==null?void 0:t.activeElement;if(i!=null&&i.current){if((i==null?void 0:i.current)===p){u.current=p;return}}else if(h.contains(p)){u.current=p;return}if(i!=null&&i.current)Ei(i.current);else{if(e&16){if(Vs(h,wi.First|wi.AutoFocus)!==$d.Error)return}else if(Vs(h,wi.First)!==$d.Error)return;if(a!=null&&a.current&&(Ei(a.current),(t==null?void 0:t.activeElement)===a.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}u.current=t==null?void 0:t.activeElement})},[a,c,e]),u}function P2(e,{ownerDocument:t,container:n,containers:i,previousActiveElement:a}){let u=Rh(),c=!!(e&4);Py(t==null?void 0:t.defaultView,"focus",f=>{if(!c||!u.current)return;let h=By(i);n.current instanceof HTMLElement&&h.add(n.current);let p=a.current;if(!p)return;let m=f.target;m&&m instanceof HTMLElement?Hy(h,m)?(a.current=m,Ei(m)):(f.preventDefault(),f.stopPropagation(),Ei(p)):Ei(a.current)},!0)}function Hy(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function Ky(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:Uy)!==k.Fragment||ie.Children.count(e.children)===1}let gl=k.createContext(null);gl.displayName="TransitionContext";var R2=(e=>(e.Visible="visible",e.Hidden="hidden",e))(R2||{});function M2(){let e=k.useContext(gl);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function L2(){let e=k.useContext(vl);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let vl=k.createContext(null);vl.displayName="NestingContext";function yl(e){return"children"in e?yl(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function zy(e,t){let n=ea(e),i=k.useRef([]),a=Rh(),u=Ah(),c=Qt((b,N=Ji.Hidden)=>{let E=i.current.findIndex(({el:C})=>C===b);E!==-1&&(to(N,{[Ji.Unmount](){i.current.splice(E,1)},[Ji.Hidden](){i.current[E].state="hidden"}}),u.microTask(()=>{var C;!yl(i)&&a.current&&((C=n.current)==null||C.call(n))}))}),f=Qt(b=>{let N=i.current.find(({el:E})=>E===b);return N?N.state!=="visible"&&(N.state="visible"):i.current.push({el:b,state:"visible"}),()=>c(b,Ji.Unmount)}),h=k.useRef([]),p=k.useRef(Promise.resolve()),m=k.useRef({enter:[],leave:[]}),y=Qt((b,N,E)=>{h.current.splice(0),t&&(t.chains.current[N]=t.chains.current[N].filter(([C])=>C!==b)),t==null||t.chains.current[N].push([b,new Promise(C=>{h.current.push(C)})]),t==null||t.chains.current[N].push([b,new Promise(C=>{Promise.all(m.current[N].map(([M,z])=>z)).then(()=>C())})]),N==="enter"?p.current=p.current.then(()=>t==null?void 0:t.wait.current).then(()=>E(N)):E(N)}),x=Qt((b,N,E)=>{Promise.all(m.current[N].splice(0).map(([C,M])=>M)).then(()=>{var C;(C=h.current.shift())==null||C()}).then(()=>E(N))});return k.useMemo(()=>({children:i,register:f,unregister:c,onStart:y,onStop:x,wait:p,chains:m}),[f,c,i,y,x,m,p])}let Uy=k.Fragment,Yy=Hc.RenderStrategy;function $2(e,t){var n,i;let{transition:a=!0,beforeEnter:u,afterEnter:c,beforeLeave:f,afterLeave:h,enter:p,enterFrom:m,enterTo:y,entered:x,leave:b,leaveFrom:N,leaveTo:E,...C}=e,[M,z]=k.useState(null),ee=k.useRef(null),B=Ky(e),le=ii(...B?[ee,t,z]:t===null?[]:[t]),ce=(n=C.unmount)==null||n?Ji.Unmount:Ji.Hidden,{show:U,appear:J,initial:oe}=M2(),[X,Y]=k.useState(U?"visible":"hidden"),ue=L2(),{register:ge,unregister:R}=ue;jn(()=>ge(ee),[ge,ee]),jn(()=>{if(ce===Ji.Hidden&&ee.current){if(U&&X!=="visible"){Y("visible");return}return to(X,{hidden:()=>R(ee),visible:()=>ge(ee)})}},[X,ee,ge,R,U,ce]);let re=pu();jn(()=>{if(B&&re&&X==="visible"&&ee.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[ee,X,re,B]);let Q=oe&&!J,ye=J&&U&&oe,he=k.useRef(!1),W=zy(()=>{he.current||(Y("hidden"),R(ee))},ue),ae=Qt(Ve=>{he.current=!0;let qe=Ve?"enter":"leave";W.onStart(ee,qe,Ee=>{Ee==="enter"?u==null||u():Ee==="leave"&&(f==null||f())})}),fe=Qt(Ve=>{let qe=Ve?"enter":"leave";he.current=!1,W.onStop(ee,qe,Ee=>{Ee==="enter"?c==null||c():Ee==="leave"&&(h==null||h())}),qe==="leave"&&!yl(W)&&(Y("hidden"),R(ee))});k.useEffect(()=>{B&&a||(ae(U),fe(U))},[U,B,a]);let we=!(!a||!B||!re||Q),[,ke]=o2(we,M,U,{start:ae,end:fe}),Me=Wo({ref:le,className:((i=Rd(C.className,ye&&p,ye&&m,ke.enter&&p,ke.enter&&ke.closed&&m,ke.enter&&!ke.closed&&y,ke.leave&&b,ke.leave&&!ke.closed&&N,ke.leave&&ke.closed&&E,!ke.transition&&U&&x))==null?void 0:i.trim())||void 0,...i2(ke)}),Re=0;X==="visible"&&(Re|=Fr.Open),X==="hidden"&&(Re|=Fr.Closed),ke.enter&&(Re|=Fr.Opening),ke.leave&&(Re|=Fr.Closing);let Be=_r();return ie.createElement(vl.Provider,{value:W},ie.createElement(c2,{value:Re},Be({ourProps:Me,theirProps:C,defaultTag:Uy,features:Yy,visible:X==="visible",name:"Transition.Child"})))}function W2(e,t){let{show:n,appear:i=!1,unmount:a=!0,...u}=e,c=k.useRef(null),f=Ky(e),h=ii(...f?[c,t]:t===null?[]:[t]);pu();let p=ml();if(n===void 0&&p!==null&&(n=(p&Fr.Open)===Fr.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[m,y]=k.useState(n?"visible":"hidden"),x=zy(()=>{n||y("hidden")}),[b,N]=k.useState(!0),E=k.useRef([n]);jn(()=>{b!==!1&&E.current[E.current.length-1]!==n&&(E.current.push(n),N(!1))},[E,n]);let C=k.useMemo(()=>({show:n,appear:i,initial:b}),[n,i,b]);jn(()=>{n?y("visible"):!yl(x)&&c.current!==null&&y("hidden")},[n,x]);let M={unmount:a},z=Qt(()=>{var le;b&&N(!1),(le=e.beforeEnter)==null||le.call(e)}),ee=Qt(()=>{var le;b&&N(!1),(le=e.beforeLeave)==null||le.call(e)}),B=_r();return ie.createElement(vl.Provider,{value:x},ie.createElement(gl.Provider,{value:C},B({ourProps:{...M,as:k.Fragment,children:ie.createElement(Vy,{ref:h,...M,...u,beforeEnter:z,beforeLeave:ee})},theirProps:{},defaultTag:k.Fragment,features:Yy,visible:m==="visible",name:"Transition"})))}function F2(e,t){let n=k.useContext(gl)!==null,i=ml()!==null;return ie.createElement(ie.Fragment,null,!n&&i?ie.createElement(Fd,{ref:t,...e}):ie.createElement(Vy,{ref:t,...e}))}let Fd=Xn(W2),Vy=Xn($2),Mh=Xn(F2),j2=Object.assign(Fd,{Child:Mh,Root:Fd});var B2=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(B2||{}),H2=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(H2||{});let K2={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Lh=k.createContext(null);Lh.displayName="DialogContext";function wl(e){let t=k.useContext(Lh);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,wl),n}return t}function z2(e,t){return to(t.type,K2,e,t)}let Zg=Xn(function(e,t){let n=k.useId(),{id:i=`headlessui-dialog-${n}`,open:a,onClose:u,initialFocus:c,role:f="dialog",autoFocus:h=!0,__demoMode:p=!1,unmount:m=!1,...y}=e,x=k.useRef(!1);f=function(){return f==="dialog"||f==="alertdialog"?f:(x.current||(x.current=!0,console.warn(`Invalid role [${f}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let b=ml();a===void 0&&b!==null&&(a=(b&Fr.Open)===Fr.Open);let N=k.useRef(null),E=ii(N,t),C=hu(N),M=a?0:1,[z,ee]=k.useReducer(z2,{titleId:null,descriptionId:null,panelRef:k.createRef()}),B=Qt(()=>u(!1)),le=Qt(fe=>ee({type:0,id:fe})),ce=pu()?M===0:!1,[U,J]=w2(),oe={get current(){var fe;return(fe=z.panelRef.current)!=null?fe:N.current}},X=jy(),{resolveContainers:Y}=S2({mainTreeNode:X,portals:U,defaultContainers:[oe]}),ue=b!==null?(b&Fr.Closing)===Fr.Closing:!1;MD(p||ue?!1:ce,{allowed:Qt(()=>{var fe,we;return[(we=(fe=N.current)==null?void 0:fe.closest("[data-headlessui-portal]"))!=null?we:null]}),disallowed:Qt(()=>{var fe;return[(fe=X==null?void 0:X.closest("body > *:not(#headlessui-portal-root)"))!=null?fe:null]})}),qD(ce,Y,fe=>{fe.preventDefault(),B()}),_2(ce,C==null?void 0:C.defaultView,fe=>{fe.preventDefault(),fe.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),B()}),e2(p||ue?!1:ce,C,Y),LD(ce,N,B);let[ge,R]=ND(),re=k.useMemo(()=>[{dialogState:M,close:B,setTitleId:le,unmount:m},z],[M,z,B,le,m]),Q=k.useMemo(()=>({open:M===0}),[M]),ye={ref:E,id:i,role:f,tabIndex:-1,"aria-modal":p?void 0:M===0?!0:void 0,"aria-labelledby":z.titleId,"aria-describedby":ge,unmount:m},he=!E2(),W=jo.None;ce&&!p&&(W|=jo.RestoreFocus,W|=jo.TabLock,h&&(W|=jo.AutoFocus),he&&(W|=jo.InitialFocus));let ae=_r();return ie.createElement(l2,null,ie.createElement(Xg,{force:!0},ie.createElement(b2,null,ie.createElement(Lh.Provider,{value:re},ie.createElement(Wy,{target:N},ie.createElement(Xg,{force:!1},ie.createElement(R,{slot:Q},ie.createElement(J,null,ie.createElement(C2,{initialFocus:c,initialFocusFallback:N,containers:Y,features:W},ie.createElement(DD,{value:B},ae({ourProps:ye,theirProps:y,slot:Q,defaultTag:U2,features:Y2,visible:M===0,name:"Dialog"})))))))))))}),U2="div",Y2=Hc.RenderStrategy|Hc.Static;function V2(e,t){let{transition:n=!1,open:i,...a}=e,u=ml(),c=e.hasOwnProperty("open")||u!==null,f=e.hasOwnProperty("onClose");if(!c&&!f)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!c)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!f)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!u&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(i!==void 0||n)&&!a.static?ie.createElement(Gg,null,ie.createElement(j2,{show:i,transition:n,unmount:a.unmount},ie.createElement(Zg,{ref:t,...a}))):ie.createElement(Gg,null,ie.createElement(Zg,{ref:t,open:i,...a}))}let q2="div";function X2(e,t){let n=k.useId(),{id:i=`headlessui-dialog-panel-${n}`,transition:a=!1,...u}=e,[{dialogState:c,unmount:f},h]=wl("Dialog.Panel"),p=ii(t,h.panelRef),m=k.useMemo(()=>({open:c===0}),[c]),y=Qt(C=>{C.stopPropagation()}),x={ref:p,id:i,onClick:y},b=a?Mh:k.Fragment,N=a?{unmount:f}:{},E=_r();return ie.createElement(b,{...N},E({ourProps:x,theirProps:u,slot:m,defaultTag:q2,name:"Dialog.Panel"}))}let G2="div";function Z2(e,t){let{transition:n=!1,...i}=e,[{dialogState:a,unmount:u}]=wl("Dialog.Backdrop"),c=k.useMemo(()=>({open:a===0}),[a]),f={ref:t,"aria-hidden":!0},h=n?Mh:k.Fragment,p=n?{unmount:u}:{},m=_r();return ie.createElement(h,{...p},m({ourProps:f,theirProps:i,slot:c,defaultTag:G2,name:"Dialog.Backdrop"}))}let Q2="h2";function J2(e,t){let n=k.useId(),{id:i=`headlessui-dialog-title-${n}`,...a}=e,[{dialogState:u,setTitleId:c}]=wl("Dialog.Title"),f=ii(t);k.useEffect(()=>(c(i),()=>c(null)),[i,c]);let h=k.useMemo(()=>({open:u===0}),[u]),p={ref:f,id:i};return _r()({ourProps:p,theirProps:a,slot:h,defaultTag:Q2,name:"Dialog.Title"})}let eP=Xn(V2),$h=Xn(X2);Xn(Z2);let tP=Xn(J2),qy=Object.assign(eP,{Panel:$h,Title:tP,Description:OD});const Qr=[{id:"WorkflowType",label:"WorkflowType",type:"text"},{id:"WorkflowId",label:"WorkflowId",type:"text"},{id:"RunId",label:"RunId",type:"text"},{id:"ExecutionStatus",label:"Status",type:"status"},{id:"StartTime",label:"StartTime",type:"datetime"},{id:"CloseTime",label:"CloseTime",type:"datetime"},{id:"TaskQueue",label:"TaskQueue",type:"text"}],Qg=[{id:"equals",label:"=",alternatives:["equals","is"],searchOperator:"="},{id:"notEquals",label:"!=",alternatives:["not equals","is not"],searchOperator:"!="},{id:"starts_with",label:"starts with",alternatives:["startswith","start"],searchOperator:"starts_with"},{id:"isNull",label:"is null",alternatives:["null"],searchOperator:"is null"},{id:"isNotNull",label:"is not null",alternatives:["not null"],searchOperator:"is not null"},{id:"greaterThan",label:">",alternatives:["after","greater than"],searchOperator:">"},{id:"lessThan",label:"<",alternatives:["before","less than"],searchOperator:"<"},{id:"between",label:"between",alternatives:[],searchOperator:"between"}],Gf=[{value:"Completed",color:"text-green-700 bg-green-50"},{value:"Running",color:"text-blue-700 bg-blue-50"},{value:"TimedOut",color:"text-orange-700 bg-orange-50"},{value:"Failed",color:"text-red-700 bg-red-50"},{value:"Canceled",color:"text-gray-700 bg-gray-50"},{value:"Terminated",color:"text-yellow-700 bg-yellow-50"},{value:"Continued as New",color:"text-pink-700 bg-pink-50"}],yc=[{id:"equals",label:"=",alternatives:["==","is","="]},{id:"between",label:"between",alternatives:["between"]},{id:"greater",label:">",alternatives:["gt",">"]},{id:"greaterOrEqual",label:">=",alternatives:["gte",">="]},{id:"less",label:"<",alternatives:["lt","<"]},{id:"lessOrEqual",label:"<=",alternatives:["lte","<="]}],Xy=6048e5,nP=864e5,Jg=Symbol.for("constructDateFrom");function no(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&Jg in e?e[Jg](t):e instanceof Date?new e.constructor(t):new Date(t)}function Kr(e,t){return no(t||e,e)}let rP={};function xl(){return rP}function au(e,t){var f,h,p,m;const n=xl(),i=(t==null?void 0:t.weekStartsOn)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??n.weekStartsOn??((m=(p=n.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??0,a=Kr(e,t==null?void 0:t.in),u=a.getDay(),c=(u<i?7:0)+u-i;return a.setDate(a.getDate()-c),a.setHours(0,0,0,0),a}function Uc(e,t){return au(e,{...t,weekStartsOn:1})}function Gy(e,t){const n=Kr(e,t==null?void 0:t.in),i=n.getFullYear(),a=no(n,0);a.setFullYear(i+1,0,4),a.setHours(0,0,0,0);const u=Uc(a),c=no(n,0);c.setFullYear(i,0,4),c.setHours(0,0,0,0);const f=Uc(c);return n.getTime()>=u.getTime()?i+1:n.getTime()>=f.getTime()?i:i-1}function e0(e){const t=Kr(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function iP(e,...t){const n=no.bind(null,t.find(i=>typeof i=="object"));return t.map(n)}function t0(e,t){const n=Kr(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function oP(e,t,n){const[i,a]=iP(n==null?void 0:n.in,e,t),u=t0(i),c=t0(a),f=+u-e0(u),h=+c-e0(c);return Math.round((f-h)/nP)}function aP(e,t){const n=Gy(e,t),i=no(e,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),Uc(i)}function sP(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function uP(e){return!(!sP(e)&&typeof e!="number"||isNaN(+Kr(e)))}function cP(e,t){const n=Kr(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const lP={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},fP=(e,t,n)=>{let i;const a=lP[e];return typeof a=="string"?i=a:t===1?i=a.one:i=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function Zf(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const dP={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},hP={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},pP={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},mP={date:Zf({formats:dP,defaultWidth:"full"}),time:Zf({formats:hP,defaultWidth:"full"}),dateTime:Zf({formats:pP,defaultWidth:"full"})},gP={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},vP=(e,t,n,i)=>gP[e];function Ls(e){return(t,n)=>{const i=n!=null&&n.context?String(n.context):"standalone";let a;if(i==="formatting"&&e.formattingValues){const c=e.defaultFormattingWidth||e.defaultWidth,f=n!=null&&n.width?String(n.width):c;a=e.formattingValues[f]||e.formattingValues[c]}else{const c=e.defaultWidth,f=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[f]||e.values[c]}const u=e.argumentCallback?e.argumentCallback(t):t;return a[u]}}const yP={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},wP={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},xP={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},bP={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},_P={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},EP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},SP=(e,t)=>{const n=Number(e),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},TP={ordinalNumber:SP,era:Ls({values:yP,defaultWidth:"wide"}),quarter:Ls({values:wP,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ls({values:xP,defaultWidth:"wide"}),day:Ls({values:bP,defaultWidth:"wide"}),dayPeriod:Ls({values:_P,defaultWidth:"wide",formattingValues:EP,defaultFormattingWidth:"wide"})};function $s(e){return(t,n={})=>{const i=n.width,a=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],u=t.match(a);if(!u)return null;const c=u[0],f=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],h=Array.isArray(f)?kP(f,y=>y.test(c)):NP(f,y=>y.test(c));let p;p=e.valueCallback?e.valueCallback(h):h,p=n.valueCallback?n.valueCallback(p):p;const m=t.slice(c.length);return{value:p,rest:m}}}function NP(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function kP(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function IP(e){return(t,n={})=>{const i=t.match(e.matchPattern);if(!i)return null;const a=i[0],u=t.match(e.parsePattern);if(!u)return null;let c=e.valueCallback?e.valueCallback(u[0]):u[0];c=n.valueCallback?n.valueCallback(c):c;const f=t.slice(a.length);return{value:c,rest:f}}}const CP=/^(\d+)(th|st|nd|rd)?/i,OP=/\d+/i,AP={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},DP={any:[/^b/i,/^(a|c)/i]},PP={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},RP={any:[/1/i,/2/i,/3/i,/4/i]},MP={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},LP={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},$P={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},WP={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},FP={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},jP={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},BP={ordinalNumber:IP({matchPattern:CP,parsePattern:OP,valueCallback:e=>parseInt(e,10)}),era:$s({matchPatterns:AP,defaultMatchWidth:"wide",parsePatterns:DP,defaultParseWidth:"any"}),quarter:$s({matchPatterns:PP,defaultMatchWidth:"wide",parsePatterns:RP,defaultParseWidth:"any",valueCallback:e=>e+1}),month:$s({matchPatterns:MP,defaultMatchWidth:"wide",parsePatterns:LP,defaultParseWidth:"any"}),day:$s({matchPatterns:$P,defaultMatchWidth:"wide",parsePatterns:WP,defaultParseWidth:"any"}),dayPeriod:$s({matchPatterns:FP,defaultMatchWidth:"any",parsePatterns:jP,defaultParseWidth:"any"})},HP={code:"en-US",formatDistance:fP,formatLong:mP,formatRelative:vP,localize:TP,match:BP,options:{weekStartsOn:0,firstWeekContainsDate:1}};function KP(e,t){const n=Kr(e,t==null?void 0:t.in);return oP(n,cP(n))+1}function zP(e,t){const n=Kr(e,t==null?void 0:t.in),i=+Uc(n)-+aP(n);return Math.round(i/Xy)+1}function Zy(e,t){var m,y,x,b;const n=Kr(e,t==null?void 0:t.in),i=n.getFullYear(),a=xl(),u=(t==null?void 0:t.firstWeekContainsDate)??((y=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??a.firstWeekContainsDate??((b=(x=a.locale)==null?void 0:x.options)==null?void 0:b.firstWeekContainsDate)??1,c=no((t==null?void 0:t.in)||e,0);c.setFullYear(i+1,0,u),c.setHours(0,0,0,0);const f=au(c,t),h=no((t==null?void 0:t.in)||e,0);h.setFullYear(i,0,u),h.setHours(0,0,0,0);const p=au(h,t);return+n>=+f?i+1:+n>=+p?i:i-1}function UP(e,t){var f,h,p,m;const n=xl(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(p=n.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,a=Zy(e,t),u=no((t==null?void 0:t.in)||e,0);return u.setFullYear(a,0,i),u.setHours(0,0,0,0),au(u,t)}function YP(e,t){const n=Kr(e,t==null?void 0:t.in),i=+au(n,t)-+UP(n,t);return Math.round(i/Xy)+1}function Ot(e,t){const n=e<0?"-":"",i=Math.abs(e).toString().padStart(t,"0");return n+i}const Vi={y(e,t){const n=e.getFullYear(),i=n>0?n:1-n;return Ot(t==="yy"?i%100:i,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Ot(n+1,2)},d(e,t){return Ot(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Ot(e.getHours()%12||12,t.length)},H(e,t){return Ot(e.getHours(),t.length)},m(e,t){return Ot(e.getMinutes(),t.length)},s(e,t){return Ot(e.getSeconds(),t.length)},S(e,t){const n=t.length,i=e.getMilliseconds(),a=Math.trunc(i*Math.pow(10,n-3));return Ot(a,t.length)}},Da={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},n0={G:function(e,t,n){const i=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const i=e.getFullYear(),a=i>0?i:1-i;return n.ordinalNumber(a,{unit:"year"})}return Vi.y(e,t)},Y:function(e,t,n,i){const a=Zy(e,i),u=a>0?a:1-a;if(t==="YY"){const c=u%100;return Ot(c,2)}return t==="Yo"?n.ordinalNumber(u,{unit:"year"}):Ot(u,t.length)},R:function(e,t){const n=Gy(e);return Ot(n,t.length)},u:function(e,t){const n=e.getFullYear();return Ot(n,t.length)},Q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return Ot(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return Ot(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,n){const i=e.getMonth();switch(t){case"M":case"MM":return Vi.M(e,t);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,n){const i=e.getMonth();switch(t){case"L":return String(i+1);case"LL":return Ot(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,n,i){const a=YP(e,i);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):Ot(a,t.length)},I:function(e,t,n){const i=zP(e);return t==="Io"?n.ordinalNumber(i,{unit:"week"}):Ot(i,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Vi.d(e,t)},D:function(e,t,n){const i=KP(e);return t==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):Ot(i,t.length)},E:function(e,t,n){const i=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,n,i){const a=e.getDay(),u=(a-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(u);case"ee":return Ot(u,2);case"eo":return n.ordinalNumber(u,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,i){const a=e.getDay(),u=(a-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(u);case"cc":return Ot(u,t.length);case"co":return n.ordinalNumber(u,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const i=e.getDay(),a=i===0?7:i;switch(t){case"i":return String(a);case"ii":return Ot(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const i=e.getHours();let a;switch(i===12?a=Da.noon:i===0?a=Da.midnight:a=i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const i=e.getHours();let a;switch(i>=17?a=Da.evening:i>=12?a=Da.afternoon:i>=4?a=Da.morning:a=Da.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let i=e.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return Vi.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Vi.H(e,t)},K:function(e,t,n){const i=e.getHours()%12;return t==="Ko"?n.ordinalNumber(i,{unit:"hour"}):Ot(i,t.length)},k:function(e,t,n){let i=e.getHours();return i===0&&(i=24),t==="ko"?n.ordinalNumber(i,{unit:"hour"}):Ot(i,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Vi.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Vi.s(e,t)},S:function(e,t){return Vi.S(e,t)},X:function(e,t,n){const i=e.getTimezoneOffset();if(i===0)return"Z";switch(t){case"X":return i0(i);case"XXXX":case"XX":return Fo(i);case"XXXXX":case"XXX":default:return Fo(i,":")}},x:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"x":return i0(i);case"xxxx":case"xx":return Fo(i);case"xxxxx":case"xxx":default:return Fo(i,":")}},O:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+r0(i,":");case"OOOO":default:return"GMT"+Fo(i,":")}},z:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+r0(i,":");case"zzzz":default:return"GMT"+Fo(i,":")}},t:function(e,t,n){const i=Math.trunc(+e/1e3);return Ot(i,t.length)},T:function(e,t,n){return Ot(+e,t.length)}};function r0(e,t=""){const n=e>0?"-":"+",i=Math.abs(e),a=Math.trunc(i/60),u=i%60;return u===0?n+String(a):n+String(a)+t+Ot(u,2)}function i0(e,t){return e%60===0?(e>0?"-":"+")+Ot(Math.abs(e)/60,2):Fo(e,t)}function Fo(e,t=""){const n=e>0?"-":"+",i=Math.abs(e),a=Ot(Math.trunc(i/60),2),u=Ot(i%60,2);return n+a+t+u}const o0=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Qy=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},VP=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],i=n[1],a=n[2];if(!a)return o0(e,t);let u;switch(i){case"P":u=t.dateTime({width:"short"});break;case"PP":u=t.dateTime({width:"medium"});break;case"PPP":u=t.dateTime({width:"long"});break;case"PPPP":default:u=t.dateTime({width:"full"});break}return u.replace("{{date}}",o0(i,t)).replace("{{time}}",Qy(a,t))},qP={p:Qy,P:VP},XP=/^D+$/,GP=/^Y+$/,ZP=["D","DD","YY","YYYY"];function QP(e){return XP.test(e)}function JP(e){return GP.test(e)}function eR(e,t,n){const i=tR(e,t,n);if(console.warn(i),ZP.includes(e))throw new RangeError(i)}function tR(e,t,n){const i=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const nR=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,rR=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,iR=/^'([^]*?)'?$/,oR=/''/g,aR=/[a-zA-Z]/;function Fn(e,t,n){var m,y,x,b;const i=xl(),a=i.locale??HP,u=i.firstWeekContainsDate??((y=(m=i.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??1,c=i.weekStartsOn??((b=(x=i.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)??0,f=Kr(e,n==null?void 0:n.in);if(!uP(f))throw new RangeError("Invalid time value");let h=t.match(rR).map(N=>{const E=N[0];if(E==="p"||E==="P"){const C=qP[E];return C(N,a.formatLong)}return N}).join("").match(nR).map(N=>{if(N==="''")return{isToken:!1,value:"'"};const E=N[0];if(E==="'")return{isToken:!1,value:sR(N)};if(n0[E])return{isToken:!0,value:N};if(E.match(aR))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return{isToken:!1,value:N}});a.localize.preprocessor&&(h=a.localize.preprocessor(f,h));const p={firstWeekContainsDate:u,weekStartsOn:c,locale:a};return h.map(N=>{if(!N.isToken)return N.value;const E=N.value;(JP(E)||QP(E))&&eR(E,t,String(e));const C=n0[E[0]];return C(f,E,a.localize,p)}).join("")}function sR(e){const t=e.match(iR);return t?t[1].replace(oR,"'"):e}const uR=(e,t,n,i)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;const a=Object.getOwnPropertyDescriptor(e,n),u=Object.getOwnPropertyDescriptor(t,n);!cR(a,u)&&i||Object.defineProperty(e,n,u)},cR=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},lR=(e,t)=>{const n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)},fR=(e,t)=>`/* Wrapped ${e}*/
${t}`,dR=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),hR=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),pR=(e,t,n)=>{const i=n===""?"":`with ${n.trim()}() `,a=fR.bind(null,i,t.toString());Object.defineProperty(a,"name",hR),Object.defineProperty(e,"toString",{...dR,value:a})},mR=(e,t,{ignoreNonConfigurable:n=!1}={})=>{const{name:i}=e;for(const a of Reflect.ownKeys(t))uR(e,t,a,n);return lR(e,t),pR(e,t,i),e};var gR=mR,jd={exports:{}},vR=()=>{const e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e};(function(e,t){var n=Lr&&Lr.__awaiter||function(c,f,h,p){return new(h||(h=Promise))(function(m,y){function x(E){try{N(p.next(E))}catch(C){y(C)}}function b(E){try{N(p.throw(E))}catch(C){y(C)}}function N(E){E.done?m(E.value):new h(function(C){C(E.value)}).then(x,b)}N((p=p.apply(c,f||[])).next())})},i=Lr&&Lr.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(vR);function u(c,f="maxAge"){let h,p,m;const y=()=>n(this,void 0,void 0,function*(){if(h!==void 0)return;const N=E=>n(this,void 0,void 0,function*(){m=a.default();const C=E[1][f]-Date.now();if(C<=0){c.delete(E[0]),m.resolve();return}return h=E[0],p=setTimeout(()=>{c.delete(E[0]),m&&m.resolve()},C),typeof p.unref=="function"&&p.unref(),m.promise});try{for(const E of c)yield N(E)}catch{}h=void 0}),x=()=>{h=void 0,p!==void 0&&(clearTimeout(p),p=void 0),m!==void 0&&(m.reject(void 0),m=void 0)},b=c.set.bind(c);return c.set=(N,E)=>{c.has(N)&&c.delete(N);const C=b(N,E);return h&&h===N&&x(),y(),C},y(),c}t.default=u,e.exports=u,e.exports.default=u})(jd,jd.exports);var yR=jd.exports;const wR=gR,xR=yR,Qf=new WeakMap,Jy=new WeakMap,Yc=(e,{cacheKey:t,cache:n=new Map,maxAge:i}={})=>{typeof i=="number"&&xR(n);const a=function(...u){const c=t?t(u):u[0],f=n.get(c);if(f)return f.data;const h=e.apply(this,u);return n.set(c,{data:h,maxAge:i?Date.now()+i:Number.POSITIVE_INFINITY}),h};return wR(a,e,{ignoreNonConfigurable:!0}),Jy.set(a,n),a};Yc.decorator=(e={})=>(t,n,i)=>{const a=t[n];if(typeof a!="function")throw new TypeError("The decorated value must be a function");delete i.value,delete i.writable,i.get=function(){if(!Qf.has(this)){const u=Yc(a,e);return Qf.set(this,u),u}return Qf.get(this)}};Yc.clear=e=>{const t=Jy.get(e);if(!t)throw new TypeError("Can't clear a function that was not memoized!");if(typeof t.clear!="function")throw new TypeError("The cache Map can't be cleared!");t.clear()};var bR=Yc;const ew=nh(bR);function _R(e){return typeof e=="string"}function ER(e,t,n){return n.indexOf(e)===t}function SR(e){return e.toLowerCase()===e}function a0(e){return e.indexOf(",")===-1?e:e.split(",")}function Bd(e){if(!e)return e;if(e==="C"||e==="posix"||e==="POSIX")return"en-US";if(e.indexOf(".")!==-1){var t=e.split(".")[0],n=t===void 0?"":t;return Bd(n)}if(e.indexOf("@")!==-1){var i=e.split("@")[0],n=i===void 0?"":i;return Bd(n)}if(e.indexOf("-")===-1||!SR(e))return e;var a=e.split("-"),u=a[0],c=a[1],f=c===void 0?"":c;return"".concat(u,"-").concat(f.toUpperCase())}function TR(e){var t=e===void 0?{}:e,n=t.useFallbackLocale,i=n===void 0?!0:n,a=t.fallbackLocale,u=a===void 0?"en-US":a,c=[];if(typeof navigator<"u"){for(var f=navigator.languages||[],h=[],p=0,m=f;p<m.length;p++){var y=m[p];h=h.concat(a0(y))}var x=navigator.language,b=x&&a0(x);c=c.concat(h,b)}return i&&c.push(u),c.filter(_R).map(Bd).filter(ER)}var NR=ew(TR,{cacheKey:JSON.stringify});function kR(e){return NR(e)[0]||null}var tw=ew(kR,{cacheKey:JSON.stringify});function Ii(e,t,n){return function(a,u){u===void 0&&(u=n);var c=e(a)+u;return t(c)}}function mu(e){return function(n){return new Date(e(n).getTime()-1)}}function gu(e,t){return function(i){return[e(i),t(i)]}}function zt(e){if(e instanceof Date)return e.getFullYear();if(typeof e=="number")return e;var t=parseInt(e,10);if(typeof e=="string"&&!isNaN(t))return t;throw new Error("Failed to get year from date: ".concat(e,"."))}function io(e){if(e instanceof Date)return e.getMonth();throw new Error("Failed to get month from date: ".concat(e,"."))}function bl(e){if(e instanceof Date)return e.getDate();throw new Error("Failed to get year from date: ".concat(e,"."))}function Xa(e){var t=zt(e),n=t+(-t+1)%100,i=new Date;return i.setFullYear(n,0,1),i.setHours(0,0,0,0),i}var IR=Ii(zt,Xa,-100),nw=Ii(zt,Xa,100),Wh=mu(nw),CR=Ii(zt,Wh,-100),rw=gu(Xa,Wh);function oo(e){var t=zt(e),n=t+(-t+1)%10,i=new Date;return i.setFullYear(n,0,1),i.setHours(0,0,0,0),i}var iw=Ii(zt,oo,-10),Fh=Ii(zt,oo,10),_l=mu(Fh),ow=Ii(zt,_l,-10),aw=gu(oo,_l);function Ga(e){var t=zt(e),n=new Date;return n.setFullYear(t,0,1),n.setHours(0,0,0,0),n}var sw=Ii(zt,Ga,-1),jh=Ii(zt,Ga,1),El=mu(jh),uw=Ii(zt,El,-1),OR=gu(Ga,El);function Bh(e,t){return function(i,a){a===void 0&&(a=t);var u=zt(i),c=io(i)+a,f=new Date;return f.setFullYear(u,c,1),f.setHours(0,0,0,0),e(f)}}function ta(e){var t=zt(e),n=io(e),i=new Date;return i.setFullYear(t,n,1),i.setHours(0,0,0,0),i}var cw=Bh(ta,-1),Hh=Bh(ta,1),vu=mu(Hh),lw=Bh(vu,-1),AR=gu(ta,vu);function DR(e,t){return function(i,a){a===void 0&&(a=t);var u=zt(i),c=io(i),f=bl(i)+a,h=new Date;return h.setFullYear(u,c,f),h.setHours(0,0,0,0),e(h)}}function yu(e){var t=zt(e),n=io(e),i=bl(e),a=new Date;return a.setFullYear(t,n,i),a.setHours(0,0,0,0),a}var PR=DR(yu,1),Kh=mu(PR),RR=gu(yu,Kh);function fw(e){return bl(vu(e))}var Sn={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},MR={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},zh=[0,1,2,3,4,5,6],Jf=new Map;function LR(e){return function(n,i){var a=n||tw();Jf.has(a)||Jf.set(a,new Map);var u=Jf.get(a);return u.has(e)||u.set(e,new Intl.DateTimeFormat(a||void 0,e).format),u.get(e)(i)}}function $R(e){var t=new Date(e);return new Date(t.setHours(12))}function na(e){return function(t,n){return LR(e)(t,$R(n))}}var WR={day:"numeric"},FR={day:"numeric",month:"long",year:"numeric"},jR={month:"long"},BR={month:"long",year:"numeric"},HR={weekday:"short"},KR={weekday:"long"},zR={year:"numeric"},UR=na(WR),YR=na(FR),VR=na(jR),dw=na(BR),qR=na(HR),XR=na(KR),Sl=na(zR),GR=zh[0],ZR=zh[5],s0=zh[6];function su(e,t){t===void 0&&(t=Sn.ISO_8601);var n=e.getDay();switch(t){case Sn.ISO_8601:return(n+6)%7;case Sn.ISLAMIC:return(n+1)%7;case Sn.HEBREW:case Sn.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function QR(e){var t=Xa(e);return zt(t)}function JR(e){var t=oo(e);return zt(t)}function Hd(e,t){t===void 0&&(t=Sn.ISO_8601);var n=zt(e),i=io(e),a=e.getDate()-su(e,t);return new Date(n,i,a)}function eM(e,t){t===void 0&&(t=Sn.ISO_8601);var n=t===Sn.GREGORY?Sn.GREGORY:Sn.ISO_8601,i=Hd(e,t),a=zt(e)+1,u,c;do u=new Date(a,0,n===Sn.ISO_8601?4:1),c=Hd(u,t),a-=1;while(e<c);return Math.round((i.getTime()-c.getTime())/(864e5*7))+1}function qo(e,t){switch(e){case"century":return Xa(t);case"decade":return oo(t);case"year":return Ga(t);case"month":return ta(t);case"day":return yu(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function tM(e,t){switch(e){case"century":return IR(t);case"decade":return iw(t);case"year":return sw(t);case"month":return cw(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function hw(e,t){switch(e){case"century":return nw(t);case"decade":return Fh(t);case"year":return jh(t);case"month":return Hh(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function nM(e,t){switch(e){case"decade":return iw(t,-100);case"year":return sw(t,-10);case"month":return cw(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function rM(e,t){switch(e){case"decade":return Fh(t,100);case"year":return jh(t,10);case"month":return Hh(t,12);default:throw new Error("Invalid rangeType: ".concat(e))}}function pw(e,t){switch(e){case"century":return Wh(t);case"decade":return _l(t);case"year":return El(t);case"month":return vu(t);case"day":return Kh(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function iM(e,t){switch(e){case"century":return CR(t);case"decade":return ow(t);case"year":return uw(t);case"month":return lw(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function oM(e,t){switch(e){case"decade":return ow(t,-100);case"year":return uw(t,-10);case"month":return lw(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function u0(e,t){switch(e){case"century":return rw(t);case"decade":return aw(t);case"year":return OR(t);case"month":return AR(t);case"day":return RR(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function aM(e,t,n){var i=[t,n].sort(function(a,u){return a.getTime()-u.getTime()});return[qo(e,i[0]),pw(e,i[1])]}function mw(e,t,n){return n.map(function(i){return(t||Sl)(e,i)}).join(" – ")}function sM(e,t,n){return mw(e,t,rw(n))}function gw(e,t,n){return mw(e,t,aw(n))}function uM(e){return e.getDay()===new Date().getDay()}function vw(e,t){t===void 0&&(t=Sn.ISO_8601);var n=e.getDay();switch(t){case Sn.ISLAMIC:case Sn.HEBREW:return n===ZR||n===s0;case Sn.ISO_8601:case Sn.GREGORY:return n===s0||n===GR;default:throw new Error("Unsupported calendar type.")}}var Jr="react-calendar__navigation";function cM(e){var t=e.activeStartDate,n=e.drillUp,i=e.formatMonthYear,a=i===void 0?dw:i,u=e.formatYear,c=u===void 0?Sl:u,f=e.locale,h=e.maxDate,p=e.minDate,m=e.navigationAriaLabel,y=m===void 0?"":m,x=e.navigationAriaLive,b=e.navigationLabel,N=e.next2AriaLabel,E=N===void 0?"":N,C=e.next2Label,M=C===void 0?"»":C,z=e.nextAriaLabel,ee=z===void 0?"":z,B=e.nextLabel,le=B===void 0?"›":B,ce=e.prev2AriaLabel,U=ce===void 0?"":ce,J=e.prev2Label,oe=J===void 0?"«":J,X=e.prevAriaLabel,Y=X===void 0?"":X,ue=e.prevLabel,ge=ue===void 0?"‹":ue,R=e.setActiveStartDate,re=e.showDoubleView,Q=e.view,ye=e.views,he=ye.indexOf(Q)>0,W=Q!=="century",ae=tM(Q,t),fe=W?nM(Q,t):void 0,we=hw(Q,t),ke=W?rM(Q,t):void 0,Me=function(){if(ae.getFullYear()<0)return!0;var Xe=iM(Q,t);return p&&p>=Xe}(),Re=W&&function(){if(fe.getFullYear()<0)return!0;var Xe=oM(Q,t);return p&&p>=Xe}(),Be=h&&h<we,Ve=W&&h&&h<ke;function qe(){R(ae,"prev")}function Ee(){R(fe,"prev2")}function nt(){R(we,"next")}function xt(){R(ke,"next2")}function Ke(Xe){var rt=function(){switch(Q){case"century":return sM(f,c,Xe);case"decade":return gw(f,c,Xe);case"year":return c(f,Xe);case"month":return a(f,Xe);default:throw new Error("Invalid view: ".concat(Q,"."))}}();return b?b({date:Xe,label:rt,locale:f||tw()||void 0,view:Q}):rt}function Tt(){var Xe="".concat(Jr,"__label");return _.jsxs("button",{"aria-label":y,"aria-live":x,className:Xe,disabled:!he,onClick:n,style:{flexGrow:1},type:"button",children:[_.jsx("span",{className:"".concat(Xe,"__labelText ").concat(Xe,"__labelText--from"),children:Ke(t)}),re?_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"".concat(Xe,"__divider"),children:" – "}),_.jsx("span",{className:"".concat(Xe,"__labelText ").concat(Xe,"__labelText--to"),children:Ke(we)})]}):null]})}return _.jsxs("div",{className:Jr,children:[oe!==null&&W?_.jsx("button",{"aria-label":U,className:"".concat(Jr,"__arrow ").concat(Jr,"__prev2-button"),disabled:Re,onClick:Ee,type:"button",children:oe}):null,ge!==null&&_.jsx("button",{"aria-label":Y,className:"".concat(Jr,"__arrow ").concat(Jr,"__prev-button"),disabled:Me,onClick:qe,type:"button",children:ge}),Tt(),le!==null&&_.jsx("button",{"aria-label":ee,className:"".concat(Jr,"__arrow ").concat(Jr,"__next-button"),disabled:Be,onClick:nt,type:"button",children:le}),M!==null&&W?_.jsx("button",{"aria-label":E,className:"".concat(Jr,"__arrow ").concat(Jr,"__next2-button"),disabled:Ve,onClick:xt,type:"button",children:M}):null]})}var La=function(){return La=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},La.apply(this,arguments)},lM=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function c0(e){return"".concat(e,"%")}function Uh(e){var t=e.children,n=e.className,i=e.count,a=e.direction,u=e.offset,c=e.style,f=e.wrap,h=lM(e,["children","className","count","direction","offset","style","wrap"]);return _.jsx("div",La({className:n,style:La({display:"flex",flexDirection:a,flexWrap:f?"wrap":"nowrap"},c)},h,{children:k.Children.map(t,function(p,m){var y=u&&m===0?c0(100*u/i):null;return k.cloneElement(p,La(La({},p.props),{style:{flexBasis:c0(100/i),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:y,marginInlineStart:y,marginInlineEnd:0}}))})}))}function fM(e,t,n){return t&&t>e?t:n&&n<e?n:e}function uu(e,t){return t[0]<=e&&t[1]>=e}function dM(e,t){return e[0]<=t[0]&&e[1]>=t[1]}function yw(e,t){return uu(e[0],t)||uu(e[1],t)}function l0(e,t,n){var i=yw(t,e),a=[];if(i){a.push(n);var u=uu(e[0],t),c=uu(e[1],t);u&&a.push("".concat(n,"Start")),c&&a.push("".concat(n,"End")),u&&c&&a.push("".concat(n,"BothEnds"))}return a}function hM(e){return Array.isArray(e)?e[0]!==null&&e[1]!==null:e!==null}function pM(e){if(!e)throw new Error("args is required");var t=e.value,n=e.date,i=e.hover,a="react-calendar__tile",u=[a];if(!n)return u;var c=new Date,f=function(){if(Array.isArray(n))return n;var b=e.dateType;if(!b)throw new Error("dateType is required when date is not an array of two dates");return u0(b,n)}();if(uu(c,f)&&u.push("".concat(a,"--now")),!t||!hM(t))return u;var h=function(){if(Array.isArray(t))return t;var b=e.valueType;if(!b)throw new Error("valueType is required when value is not an array of two dates");return u0(b,t)}();dM(h,f)?u.push("".concat(a,"--active")):yw(h,f)&&u.push("".concat(a,"--hasActive"));var p=l0(h,f,"".concat(a,"--range"));u.push.apply(u,p);var m=Array.isArray(t)?t:[t];if(i&&m.length===1){var y=i>h[0]?[h[0],i]:[i,h[0]],x=l0(y,f,"".concat(a,"--hover"));u.push.apply(u,x)}return u}function Tl(e){for(var t=e.className,n=e.count,i=n===void 0?3:n,a=e.dateTransform,u=e.dateType,c=e.end,f=e.hover,h=e.offset,p=e.renderTile,m=e.start,y=e.step,x=y===void 0?1:y,b=e.value,N=e.valueType,E=[],C=m;C<=c;C+=x){var M=a(C);E.push(p({classes:pM({date:M,dateType:u,hover:f,value:b,valueType:N}),date:M}))}return _.jsx(Uh,{className:t,count:i,offset:h,wrap:!0,children:E})}function Nl(e){var t=e.activeStartDate,n=e.children,i=e.classes,a=e.date,u=e.formatAbbr,c=e.locale,f=e.maxDate,h=e.maxDateTransform,p=e.minDate,m=e.minDateTransform,y=e.onClick,x=e.onMouseOver,b=e.style,N=e.tileClassName,E=e.tileContent,C=e.tileDisabled,M=e.view,z=k.useMemo(function(){var B={activeStartDate:t,date:a,view:M};return typeof N=="function"?N(B):N},[t,a,N,M]),ee=k.useMemo(function(){var B={activeStartDate:t,date:a,view:M};return typeof E=="function"?E(B):E},[t,a,E,M]);return _.jsxs("button",{className:xr(i,z),disabled:p&&m(p)>a||f&&h(f)<a||(C==null?void 0:C({activeStartDate:t,date:a,view:M})),onClick:y?function(B){return y(a,B)}:void 0,onFocus:x?function(){return x(a)}:void 0,onMouseOver:x?function(){return x(a)}:void 0,style:b,type:"button",children:[u?_.jsx("abbr",{"aria-label":u(c,a),children:n}):n,ee]})}var Kd=function(){return Kd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Kd.apply(this,arguments)},mM=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},f0="react-calendar__century-view__decades__decade";function gM(e){var t=e.classes,n=t===void 0?[]:t,i=e.currentCentury,a=e.formatYear,u=a===void 0?Sl:a,c=mM(e,["classes","currentCentury","formatYear"]),f=c.date,h=c.locale,p=[];return n&&p.push.apply(p,n),p.push(f0),Xa(f).getFullYear()!==i&&p.push("".concat(f0,"--neighboringCentury")),_.jsx(Nl,Kd({},c,{classes:p,maxDateTransform:_l,minDateTransform:oo,view:"century",children:gw(h,u,f)}))}var zd=function(){return zd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},zd.apply(this,arguments)},d0=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function vM(e){var t=e.activeStartDate,n=e.hover,i=e.showNeighboringCentury,a=e.value,u=e.valueType,c=d0(e,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),f=QR(t),h=f+(i?119:99);return _.jsx(Tl,{className:"react-calendar__century-view__decades",dateTransform:oo,dateType:"decade",end:h,hover:n,renderTile:function(p){var m=p.date,y=d0(p,["date"]);return _.jsx(gM,zd({},c,y,{activeStartDate:t,currentCentury:f,date:m}),m.getTime())},start:f,step:10,value:a,valueType:u})}var Ud=function(){return Ud=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Ud.apply(this,arguments)};function yM(e){function t(){return _.jsx(vM,Ud({},e))}return _.jsx("div",{className:"react-calendar__century-view",children:t()})}var Yd=function(){return Yd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Yd.apply(this,arguments)},wM=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},h0="react-calendar__decade-view__years__year";function xM(e){var t=e.classes,n=t===void 0?[]:t,i=e.currentDecade,a=e.formatYear,u=a===void 0?Sl:a,c=wM(e,["classes","currentDecade","formatYear"]),f=c.date,h=c.locale,p=[];return n&&p.push.apply(p,n),p.push(h0),oo(f).getFullYear()!==i&&p.push("".concat(h0,"--neighboringDecade")),_.jsx(Nl,Yd({},c,{classes:p,maxDateTransform:El,minDateTransform:Ga,view:"decade",children:u(h,f)}))}var Vd=function(){return Vd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Vd.apply(this,arguments)},p0=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function bM(e){var t=e.activeStartDate,n=e.hover,i=e.showNeighboringDecade,a=e.value,u=e.valueType,c=p0(e,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),f=JR(t),h=f+(i?11:9);return _.jsx(Tl,{className:"react-calendar__decade-view__years",dateTransform:Ga,dateType:"year",end:h,hover:n,renderTile:function(p){var m=p.date,y=p0(p,["date"]);return _.jsx(xM,Vd({},c,y,{activeStartDate:t,currentDecade:f,date:m}),m.getTime())},start:f,value:a,valueType:u})}var qd=function(){return qd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},qd.apply(this,arguments)};function _M(e){function t(){return _.jsx(bM,qd({},e))}return _.jsx("div",{className:"react-calendar__decade-view",children:t()})}var Xd=function(){return Xd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Xd.apply(this,arguments)},EM=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},m0=function(e,t,n){if(n||arguments.length===2)for(var i=0,a=t.length,u;i<a;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||Array.prototype.slice.call(t))},SM="react-calendar__year-view__months__month";function TM(e){var t=e.classes,n=t===void 0?[]:t,i=e.formatMonth,a=i===void 0?VR:i,u=e.formatMonthYear,c=u===void 0?dw:u,f=EM(e,["classes","formatMonth","formatMonthYear"]),h=f.date,p=f.locale;return _.jsx(Nl,Xd({},f,{classes:m0(m0([],n,!0),[SM],!1),formatAbbr:c,maxDateTransform:vu,minDateTransform:ta,view:"year",children:a(p,h)}))}var Gd=function(){return Gd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Gd.apply(this,arguments)},g0=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function NM(e){var t=e.activeStartDate,n=e.hover,i=e.value,a=e.valueType,u=g0(e,["activeStartDate","hover","value","valueType"]),c=0,f=11,h=zt(t);return _.jsx(Tl,{className:"react-calendar__year-view__months",dateTransform:function(p){var m=new Date;return m.setFullYear(h,p,1),ta(m)},dateType:"month",end:f,hover:n,renderTile:function(p){var m=p.date,y=g0(p,["date"]);return _.jsx(TM,Gd({},u,y,{activeStartDate:t,date:m}),m.getTime())},start:c,value:i,valueType:a})}var Zd=function(){return Zd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Zd.apply(this,arguments)};function kM(e){function t(){return _.jsx(NM,Zd({},e))}return _.jsx("div",{className:"react-calendar__year-view",children:t()})}var Qd=function(){return Qd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Qd.apply(this,arguments)},IM=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},ed="react-calendar__month-view__days__day";function CM(e){var t=e.calendarType,n=e.classes,i=n===void 0?[]:n,a=e.currentMonthIndex,u=e.formatDay,c=u===void 0?UR:u,f=e.formatLongDate,h=f===void 0?YR:f,p=IM(e,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),m=p.date,y=p.locale,x=[];return i&&x.push.apply(x,i),x.push(ed),vw(m,t)&&x.push("".concat(ed,"--weekend")),m.getMonth()!==a&&x.push("".concat(ed,"--neighboringMonth")),_.jsx(Nl,Qd({},p,{classes:x,formatAbbr:h,maxDateTransform:Kh,minDateTransform:yu,view:"month",children:c(y,m)}))}var Jd=function(){return Jd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Jd.apply(this,arguments)},v0=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function OM(e){var t=e.activeStartDate,n=e.calendarType,i=e.hover,a=e.showFixedNumberOfWeeks,u=e.showNeighboringMonth,c=e.value,f=e.valueType,h=v0(e,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),p=zt(t),m=io(t),y=a||u,x=su(t,n),b=y?0:x,N=(y?-x:0)+1,E=function(){if(a)return N+6*7-1;var C=fw(t);if(u){var M=new Date;M.setFullYear(p,m,C),M.setHours(0,0,0,0);var z=7-su(M,n)-1;return C+z}return C}();return _.jsx(Tl,{className:"react-calendar__month-view__days",count:7,dateTransform:function(C){var M=new Date;return M.setFullYear(p,m,C),yu(M)},dateType:"day",hover:i,end:E,renderTile:function(C){var M=C.date,z=v0(C,["date"]);return _.jsx(CM,Jd({},h,z,{activeStartDate:t,calendarType:n,currentMonthIndex:m,date:M}),M.getTime())},offset:b,start:N,value:c,valueType:f})}var ww="react-calendar__month-view__weekdays",td="".concat(ww,"__weekday");function AM(e){for(var t=e.calendarType,n=e.formatShortWeekday,i=n===void 0?qR:n,a=e.formatWeekday,u=a===void 0?XR:a,c=e.locale,f=e.onMouseLeave,h=new Date,p=ta(h),m=zt(p),y=io(p),x=[],b=1;b<=7;b+=1){var N=new Date(m,y,b-su(p,t)),E=u(c,N);x.push(_.jsx("div",{className:xr(td,uM(N)&&"".concat(td,"--current"),vw(N,t)&&"".concat(td,"--weekend")),children:_.jsx("abbr",{"aria-label":E,title:E,children:i(c,N).replace(".","")})},b))}return _.jsx(Uh,{className:ww,count:7,onFocus:f,onMouseOver:f,children:x})}var Vc=function(){return Vc=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Vc.apply(this,arguments)},y0=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},w0="react-calendar__tile";function DM(e){var t=e.onClickWeekNumber,n=e.weekNumber,i=_.jsx("span",{children:n});if(t){var a=e.date,u=e.onClickWeekNumber,c=e.weekNumber,f=y0(e,["date","onClickWeekNumber","weekNumber"]);return _.jsx("button",Vc({},f,{className:w0,onClick:function(h){return u(c,a,h)},type:"button",children:i}))}else{e.date,e.onClickWeekNumber,e.weekNumber;var f=y0(e,["date","onClickWeekNumber","weekNumber"]);return _.jsx("div",Vc({},f,{className:w0,children:i}))}}function PM(e){var t=e.activeStartDate,n=e.calendarType,i=e.onClickWeekNumber,a=e.onMouseLeave,u=e.showFixedNumberOfWeeks,c=function(){if(u)return 6;var p=fw(t),m=su(t,n),y=p-(7-m);return 1+Math.ceil(y/7)}(),f=function(){for(var p=zt(t),m=io(t),y=bl(t),x=[],b=0;b<c;b+=1)x.push(Hd(new Date(p,m,y+b*7),n));return x}(),h=f.map(function(p){return eM(p,n)});return _.jsx(Uh,{className:"react-calendar__month-view__weekNumbers",count:c,direction:"column",onFocus:a,onMouseOver:a,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:h.map(function(p,m){var y=f[m];if(!y)throw new Error("date is not defined");return _.jsx(DM,{date:y,onClickWeekNumber:i,weekNumber:p},p)})})}var eh=function(){return eh=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},eh.apply(this,arguments)},RM=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function MM(e){if(e)for(var t=0,n=Object.entries(MR);t<n.length;t++){var i=n[t],a=i[0],u=i[1];if(u.includes(e))return a}return Sn.ISO_8601}function LM(e){var t=e.activeStartDate,n=e.locale,i=e.onMouseLeave,a=e.showFixedNumberOfWeeks,u=e.calendarType,c=u===void 0?MM(n):u,f=e.formatShortWeekday,h=e.formatWeekday,p=e.onClickWeekNumber,m=e.showWeekNumbers,y=RM(e,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function x(){return _.jsx(AM,{calendarType:c,formatShortWeekday:f,formatWeekday:h,locale:n,onMouseLeave:i})}function b(){return m?_.jsx(PM,{activeStartDate:t,calendarType:c,onClickWeekNumber:p,onMouseLeave:i,showFixedNumberOfWeeks:a}):null}function N(){return _.jsx(OM,eh({calendarType:c},y))}var E="react-calendar__month-view";return _.jsx("div",{className:xr(E,m?"".concat(E,"--weekNumbers"):""),children:_.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[b(),_.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[x(),N()]})]})})}var $a=function(){return $a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},$a.apply(this,arguments)},wc="react-calendar",kc=["century","decade","year","month"],$M=["decade","year","month","day"],Yh=new Date;Yh.setFullYear(1,0,1);Yh.setHours(0,0,0,0);var WM=new Date(864e13);function zs(e){return e instanceof Date?e:new Date(e)}function xw(e,t){return kc.slice(kc.indexOf(e),kc.indexOf(t)+1)}function FM(e,t,n){var i=xw(t,n);return i.indexOf(e)!==-1}function Vh(e,t,n){return e&&FM(e,t,n)?e:n}function bw(e){var t=kc.indexOf(e);return $M[t]}function jM(e,t){var n=Array.isArray(e)?e[t]:e;if(!n)return null;var i=zs(n);if(Number.isNaN(i.getTime()))throw new Error("Invalid date: ".concat(e));return i}function _w(e,t){var n=e.value,i=e.minDate,a=e.maxDate,u=e.maxDetail,c=jM(n,t);if(!c)return null;var f=bw(u),h=function(){switch(t){case 0:return qo(f,c);case 1:return pw(f,c);default:throw new Error("Invalid index value: ".concat(t))}}();return fM(h,i,a)}var qh=function(e){return _w(e,0)},Ew=function(e){return _w(e,1)},BM=function(e){return[qh,Ew].map(function(t){return t(e)})};function Sw(e){var t=e.maxDate,n=e.maxDetail,i=e.minDate,a=e.minDetail,u=e.value,c=e.view,f=Vh(c,a,n),h=qh({value:u,minDate:i,maxDate:t,maxDetail:n})||new Date;return qo(f,h)}function HM(e){var t=e.activeStartDate,n=e.defaultActiveStartDate,i=e.defaultValue,a=e.defaultView,u=e.maxDate,c=e.maxDetail,f=e.minDate,h=e.minDetail,p=e.value,m=e.view,y=Vh(m,h,c),x=t||n;return x?qo(y,x):Sw({maxDate:u,maxDetail:c,minDate:f,minDetail:h,value:p||i,view:m||a})}function nd(e){return e&&(!Array.isArray(e)||e.length===1)}function xc(e,t){return e instanceof Date&&t instanceof Date&&e.getTime()===t.getTime()}var rd=k.forwardRef(function(t,n){var i=t.activeStartDate,a=t.allowPartialRange,u=t.calendarType,c=t.className,f=t.defaultActiveStartDate,h=t.defaultValue,p=t.defaultView,m=t.formatDay,y=t.formatLongDate,x=t.formatMonth,b=t.formatMonthYear,N=t.formatShortWeekday,E=t.formatWeekday,C=t.formatYear,M=t.goToRangeStartOnSelect,z=M===void 0?!0:M,ee=t.inputRef,B=t.locale,le=t.maxDate,ce=le===void 0?WM:le,U=t.maxDetail,J=U===void 0?"month":U,oe=t.minDate,X=oe===void 0?Yh:oe,Y=t.minDetail,ue=Y===void 0?"century":Y,ge=t.navigationAriaLabel,R=t.navigationAriaLive,re=t.navigationLabel,Q=t.next2AriaLabel,ye=t.next2Label,he=t.nextAriaLabel,W=t.nextLabel,ae=t.onActiveStartDateChange,fe=t.onChange,we=t.onClickDay,ke=t.onClickDecade,Me=t.onClickMonth,Re=t.onClickWeekNumber,Be=t.onClickYear,Ve=t.onDrillDown,qe=t.onDrillUp,Ee=t.onViewChange,nt=t.prev2AriaLabel,xt=t.prev2Label,Ke=t.prevAriaLabel,Tt=t.prevLabel,Xe=t.returnValue,rt=Xe===void 0?"start":Xe,Nt=t.selectRange,Je=t.showDoubleView,He=t.showFixedNumberOfWeeks,jt=t.showNavigation,Bt=jt===void 0?!0:jt,bt=t.showNeighboringCentury,un=t.showNeighboringDecade,Ut=t.showNeighboringMonth,cn=Ut===void 0?!0:Ut,Jt=t.showWeekNumbers,Yt=t.tileClassName,nn=t.tileContent,Vt=t.tileDisabled,ln=t.value,hn=t.view,_t=k.useState(f),Ht=_t[0],qt=_t[1],Wt=k.useState(null),Fe=Wt[0],Kt=Wt[1],Dt=k.useState(Array.isArray(h)?h.map(function(it){return it!==null?zs(it):null}):h!=null?zs(h):null),pe=Dt[0],ne=Dt[1],Oe=k.useState(p),Te=Oe[0],$e=Oe[1],Le=i||Ht||HM({activeStartDate:i,defaultActiveStartDate:f,defaultValue:h,defaultView:p,maxDate:ce,maxDetail:J,minDate:X,minDetail:ue,value:ln,view:hn}),Ye=function(){var it=function(){return Nt&&nd(pe)?pe:ln!==void 0?ln:pe}();return it?Array.isArray(it)?it.map(function(yt){return yt!==null?zs(yt):null}):it!==null?zs(it):null:null}(),ft=bw(J),pt=Vh(hn||Te,ue,J),Et=xw(ue,J),Pn=Nt?Fe:null,Gn=Et.indexOf(pt)<Et.length-1,Er=Et.indexOf(pt)>0,St=k.useCallback(function(it){var yt=function(){switch(rt){case"start":return qh;case"end":return Ew;case"range":return BM;default:throw new Error("Invalid returnValue.")}}();return yt({maxDate:ce,maxDetail:J,minDate:X,value:it})},[ce,J,X,rt]),Lt=k.useCallback(function(it,yt){qt(it);var Pt={action:yt,activeStartDate:it,value:Ye,view:pt};ae&&!xc(Le,it)&&ae(Pt)},[Le,ae,Ye,pt]),cr=k.useCallback(function(it,yt){var Pt=function(){switch(pt){case"century":return ke;case"decade":return Be;case"year":return Me;case"month":return we;default:throw new Error("Invalid view: ".concat(pt,"."))}}();Pt&&Pt(it,yt)},[we,ke,Me,Be,pt]),lr=k.useCallback(function(it,yt){if(Gn){cr(it,yt);var Pt=Et[Et.indexOf(pt)+1];if(!Pt)throw new Error("Attempted to drill down from the lowest view.");qt(it),$e(Pt);var Xt={action:"drillDown",activeStartDate:it,value:Ye,view:Pt};ae&&!xc(Le,it)&&ae(Xt),Ee&&pt!==Pt&&Ee(Xt),Ve&&Ve(Xt)}},[Le,Gn,ae,cr,Ve,Ee,Ye,pt,Et]),fr=k.useCallback(function(){if(Er){var it=Et[Et.indexOf(pt)-1];if(!it)throw new Error("Attempted to drill up from the highest view.");var yt=qo(it,Le);qt(yt),$e(it);var Pt={action:"drillUp",activeStartDate:yt,value:Ye,view:it};ae&&!xc(Le,yt)&&ae(Pt),Ee&&pt!==it&&Ee(Pt),qe&&qe(Pt)}},[Le,Er,ae,qe,Ee,Ye,pt,Et]),dr=k.useCallback(function(it,yt){var Pt=Ye;cr(it,yt);var Xt=Nt&&!nd(Pt),vn;if(Nt)if(Xt)vn=qo(ft,it);else{if(!Pt)throw new Error("previousValue is required");if(Array.isArray(Pt))throw new Error("previousValue must not be an array");vn=aM(ft,Pt,it)}else vn=St(it);var Sr=!Nt||Xt||z?Sw({maxDate:ce,maxDetail:J,minDate:X,minDetail:ue,value:vn,view:pt}):null;yt.persist(),qt(Sr),ne(vn);var Rt={action:"onChange",activeStartDate:Sr,value:vn,view:pt};if(ae&&!xc(Le,Sr)&&ae(Rt),fe)if(Nt){var xn=nd(vn);if(!xn)fe(vn||null,yt);else if(a){if(Array.isArray(vn))throw new Error("value must not be an array");fe([vn||null,null],yt)}}else fe(vn||null,yt)},[Le,a,St,z,ce,J,X,ue,ae,fe,cr,Nt,Ye,ft,pt]);function ao(it){Kt(it)}function Nn(){Kt(null)}k.useImperativeHandle(n,function(){return{activeStartDate:Le,drillDown:lr,drillUp:fr,onChange:dr,setActiveStartDate:Lt,value:Ye,view:pt}},[Le,lr,fr,dr,Lt,Ye,pt]);function Zn(it){var yt=it?hw(pt,Le):qo(pt,Le),Pt=Gn?lr:dr,Xt={activeStartDate:yt,hover:Pn,locale:B,maxDate:ce,minDate:X,onClick:Pt,onMouseOver:Nt?ao:void 0,tileClassName:Yt,tileContent:nn,tileDisabled:Vt,value:Ye,valueType:ft};switch(pt){case"century":return _.jsx(yM,$a({formatYear:C,showNeighboringCentury:bt},Xt));case"decade":return _.jsx(_M,$a({formatYear:C,showNeighboringDecade:un},Xt));case"year":return _.jsx(kM,$a({formatMonth:x,formatMonthYear:b},Xt));case"month":return _.jsx(LM,$a({calendarType:u,formatDay:m,formatLongDate:y,formatShortWeekday:N,formatWeekday:E,onClickWeekNumber:Re,onMouseLeave:Nt?Nn:void 0,showFixedNumberOfWeeks:typeof He<"u"?He:Je,showNeighboringMonth:cn,showWeekNumbers:Jt},Xt));default:throw new Error("Invalid view: ".concat(pt,"."))}}function Rn(){return Bt?_.jsx(cM,{activeStartDate:Le,drillUp:fr,formatMonthYear:b,formatYear:C,locale:B,maxDate:ce,minDate:X,navigationAriaLabel:ge,navigationAriaLive:R,navigationLabel:re,next2AriaLabel:Q,next2Label:ye,nextAriaLabel:he,nextLabel:W,prev2AriaLabel:nt,prev2Label:xt,prevAriaLabel:Ke,prevLabel:Tt,setActiveStartDate:Lt,showDoubleView:Je,view:pt,views:Et}):null}var zr=Array.isArray(Ye)?Ye:[Ye];return _.jsxs("div",{className:xr(wc,Nt&&zr.length===1&&"".concat(wc,"--selectRange"),Je&&"".concat(wc,"--doubleView"),c),ref:ee,children:[Rn(),_.jsxs("div",{className:"".concat(wc,"__viewContainer"),onBlur:Nt?Nn:void 0,onMouseLeave:Nt?Nn:void 0,children:[Zn(),Je?Zn(!0):null]})]})});function KM({onSelect:e,onClose:t,showTime:n=!0,isBetweenMode:i=!1}){const[a,u]=k.useState(new Date),[c,f]=k.useState(new Date),[h,p]=k.useState(Fn(new Date,"HH")),[m,y]=k.useState(Fn(new Date,"mm")),[x,b]=k.useState(Fn(new Date,"ss")),[N,E]=k.useState(Fn(new Date,"HH")),[C,M]=k.useState(Fn(new Date,"mm")),[z,ee]=k.useState(Fn(new Date,"ss")),[B,le]=k.useState(!1),[ce,U]=k.useState(!1),J=k.useRef(null);k.useEffect(()=>{function Y(ue){J.current&&!J.current.contains(ue.target)&&t()}return document.addEventListener("mousedown",Y),()=>document.removeEventListener("mousedown",Y)},[t]),k.useEffect(()=>{function Y(ue){ue.key==="Enter"&&(ue.preventDefault(),ue.stopPropagation(),oe(),t())}return document.addEventListener("keydown",Y),()=>document.removeEventListener("keydown",Y)},[a,c,h,m,x,N,C,z,i,t]);const oe=()=>{if(i){const Y=new Date(a);Y.setHours(parseInt(h),parseInt(m),parseInt(x));const ue=new Date(c);ue.setHours(parseInt(N),parseInt(C),parseInt(z)),e({start:Y,end:ue})}else{const Y=new Date(a);Y.setHours(parseInt(h),parseInt(m),parseInt(x)),e({start:Y})}t()},X=({label:Y,hours:ue,minutes:ge,seconds:R,setHours:re,setMinutes:Q,setSeconds:ye})=>_.jsxs("div",{className:"flex flex-col gap-2",children:[_.jsx("div",{className:"text-sm font-medium text-gray-700",children:Y}),_.jsxs("div",{className:"flex justify-between items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("input",{type:"number",min:"0",max:"23",value:ue,onChange:he=>re(he.target.value.padStart(2,"0")),className:"w-16 px-3 py-2 bg-white border rounded-md text-center text-lg font-medium text-gray-700"}),_.jsx("span",{className:"text-gray-500 text-sm",children:"hrs"})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("input",{type:"number",min:"0",max:"59",value:ge,onChange:he=>Q(he.target.value.padStart(2,"0")),className:"w-16 px-3 py-2 bg-white border rounded-md text-center text-lg font-medium text-gray-700"}),_.jsx("span",{className:"text-gray-500 text-sm",children:"min"})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("input",{type:"number",min:"0",max:"59",value:R,onChange:he=>ye(he.target.value.padStart(2,"0")),className:"w-16 px-3 py-2 bg-white border rounded-md text-center text-lg font-medium text-gray-700"}),_.jsx("span",{className:"text-gray-500 text-sm",children:"sec"})]})]})]});return _.jsxs("div",{ref:J,className:"bg-white rounded-lg shadow-xl p-4 w-[400px]",style:{marginTop:"0.5rem"},children:[_.jsxs("div",{className:"flex items-center justify-between mb-4 border-b pb-2",children:[_.jsx("h3",{className:"text-lg font-medium text-gray-700",children:i?"Select Date Range":"Select Date"}),_.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:"✕"})]}),i?_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsxs("button",{onClick:()=>le(!B),className:"flex items-center gap-2 hover:bg-gray-50 px-2 py-1 rounded-md",children:[_.jsx("span",{className:"text-gray-600",children:"📅"}),_.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Start: ",Fn(a,"EEE MMM dd yyyy")]})]}),B&&_.jsx(rd,{onChange:Y=>{u(Y),le(!1)},value:a,className:"border-0 mt-2"}),n&&_.jsx(X,{label:"Start Time",hours:h,minutes:m,seconds:x,setHours:p,setMinutes:y,setSeconds:b})]}),_.jsxs("div",{children:[_.jsxs("button",{onClick:()=>U(!ce),className:"flex items-center gap-2 hover:bg-gray-50 px-2 py-1 rounded-md",children:[_.jsx("span",{className:"text-gray-600",children:"📅"}),_.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["End: ",Fn(c,"EEE MMM dd yyyy")]})]}),ce&&_.jsx(rd,{onChange:Y=>{f(Y),U(!1)},value:c,className:"border-0 mt-2"}),n&&_.jsx(X,{label:"End Time",hours:N,minutes:C,seconds:z,setHours:E,setMinutes:M,setSeconds:ee})]})]}):_.jsxs(_.Fragment,{children:[_.jsxs("button",{onClick:()=>le(!B),className:"flex items-center gap-2 hover:bg-gray-50 px-2 py-1 rounded-md mb-4",children:[_.jsx("span",{className:"text-gray-600",children:"📅"}),_.jsx("span",{className:"text-lg font-medium text-gray-700",children:Fn(a,"EEE MMM dd yyyy")})]}),B&&_.jsx("div",{className:"mb-4",children:_.jsx(rd,{onChange:Y=>{u(Y),le(!1)},value:a,className:"border-0"})}),n&&_.jsx(X,{label:"Time",hours:h,minutes:m,seconds:x,setHours:p,setMinutes:y,setSeconds:b})]}),_.jsx("button",{onClick:oe,className:"w-full mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Apply"})]})}function zM({isOpen:e,onClose:t}){const[n,i]=k.useState([]),[a,u]=k.useState(""),[c,f]=k.useState([]),[h,p]=k.useState("");k.useEffect(()=>{e&&(async()=>{const C=await ru("namespaces"),M=await ru("searchParameters");C&&i(C),M&&f(M)})()},[e]);const m=async()=>{await Sd("namespaces",n),await Sd("searchParameters",c),t()},y=()=>{a&&!n.includes(a)&&(i([...n,a]),u(""))},x=E=>{i(n.filter((C,M)=>M!==E))},b=()=>{const E=h.split(",").map(C=>C.trim()).filter(C=>C&&!c.includes(C));E.length&&(f([...c,...E]),p(""))},N=E=>{f(c.filter((C,M)=>M!==E))};return e?_.jsxs(qy,{open:e,onClose:t,className:"relative z-[2000]",children:[_.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),_.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:_.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:_.jsxs($h,{className:"w-[600px] transform overflow-hidden rounded-lg bg-white text-left align-middle shadow-xl transition-all",children:[_.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[_.jsx("h2",{className:"text-xl font-semibold",children:"Search Settings"}),_.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full","aria-label":"Close",children:_.jsx(Us,{size:20})})]}),_.jsxs("div",{className:"p-6 overflow-y-auto",children:[_.jsxs("div",{className:"mb-6",children:[_.jsx("h3",{className:"text-lg font-medium mb-2",children:"Namespaces"}),_.jsxs("div",{className:"flex gap-2 mb-2",children:[_.jsx("input",{type:"text",value:a,onChange:E=>u(E.target.value),onKeyDown:E=>E.key==="Enter"&&y(),placeholder:"Add namespace...",className:"flex-1 p-2 border rounded"}),_.jsx("button",{onClick:y,className:"p-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:_.jsx(Tg,{size:20})})]}),_.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((E,C)=>_.jsxs("div",{className:"bg-gray-100 px-3 py-1 rounded-full flex items-center gap-2",children:[_.jsx("span",{children:E}),_.jsx("button",{onClick:()=>x(C),className:"hover:text-red-500",children:_.jsx(Us,{size:16})})]},C))})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-lg font-medium mb-2",children:"Search Parameters"}),_.jsxs("div",{className:"flex gap-2 mb-2",children:[_.jsx("input",{type:"text",value:h,onChange:E=>p(E.target.value),onKeyDown:E=>E.key==="Enter"&&b(),placeholder:"Add parameters (comma-separated)...",className:"flex-1 p-2 border rounded"}),_.jsx("button",{onClick:b,className:"p-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:_.jsx(Tg,{size:20})})]}),_.jsx("div",{className:"flex flex-wrap gap-2",children:c.map((E,C)=>_.jsxs("div",{className:"bg-gray-100 px-3 py-1 rounded-full flex items-center gap-2",children:[_.jsx("span",{children:E}),_.jsx("button",{onClick:()=>N(C),className:"hover:text-red-500",children:_.jsx(Us,{size:16})})]},C))})]})]}),_.jsxs("div",{className:"p-4 border-t flex justify-end gap-2",children:[_.jsx("button",{onClick:t,className:"px-4 py-2 border rounded hover:bg-gray-50",children:"Cancel"}),_.jsx("button",{onClick:m,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Save"})]})]})})})]}):null}function UM({isOpen:e,onClose:t,onTemporalModalSubmit:n,onShowNodeData:i}){const[a,u]=k.useState(""),[c,f]=k.useState([]),[h,p]=k.useState([]),[m,y]=k.useState(!1),[x,b]=k.useState(-1),[N,E]=k.useState(!1),[C,M]=k.useState(!1),z=ie.useRef(null),[ee,B]=k.useState(null),[le,ce]=k.useState(null),U=k.useRef(null),[J,oe]=k.useState(!1),[X,Y]=k.useState([]),[ue,ge]=k.useState([]),[R,re]=k.useState(""),[Q,ye]=k.useState([]),[he,W]=k.useState(1),[ae,fe]=k.useState(1),[we,ke]=k.useState([{id:"status",label:"Status",width:120},{id:"taskQueue",label:"Task Queue",width:150},{id:"workflowType",label:"Workflow Type",width:180},{id:"execution",label:"Workflow ID",width:200},{id:"execution",label:"Run ID",width:200},{id:"duration",label:"Duration",width:180},{id:"startTime",label:"Start Time",width:180},{id:"closeTime",label:"Close Time",width:180}]),[Me,Re]=k.useState(!1),[Be,Ve]=k.useState(!1),[qe,Ee]=k.useState(!1),nt=ti(dy),xt=async()=>{const pe=await ru("searchParameters");if(pe){const ne=pe.map(Oe=>({id:Oe,label:Oe,type:"text"}));Y(ne)}},Ke=async()=>{const pe=await ru("namespaces")||[];ge(pe),!R&&pe.length>0&&re(pe[0])};k.useEffect(()=>{e&&xt()},[e]),k.useEffect(()=>{Ke()},[e]),k.useEffect(()=>{(async()=>{if(e&&R){const ne=bt();Re(!0);try{const Oe=await Wg(R,ne);ye(Oe.executions||[]),fe(Math.min(Math.ceil(Oe.executions.length/100),10)),W(1)}catch(Oe){console.error("Error executing initial search:",Oe)}finally{Re(!1)}}})()},[e,R]),k.useEffect(()=>{if(qe){const pe=()=>{document.querySelectorAll('[data-workflow-loaded="true"]').length>0?(Ee(!1),t()):setTimeout(pe,500)};setTimeout(pe,1e3)}},[qe,t]);const Tt=pe=>{if(pe.type==="datetime")return yc.map(Oe=>({text:`${pe.label} ${Oe.label}`,disabled:!1}));if(pe.type==="status"){const Oe=c.filter(Te=>Te.field==="ExecutionStatus").map(Te=>Te.value);return Gf.filter(Te=>!Oe.includes(Te.value)).map(Te=>({text:`${pe.label} = '${Te.value}'`,displayText:Te.value,disabled:!1,color:Te.color}))}return Qg.filter(Oe=>["equals","notEquals","starts_with"].includes(Oe.id)).map(Oe=>({text:`${pe.label} ${Oe.label}`,disabled:!1}))},Xe=()=>c.filter(pe=>pe.field==="ExecutionStatus").flatMap(pe=>{const ne=pe.raw.match(/Status\s*=\s*'([^']+)'/gi);return ne?ne.map(Oe=>{const Te=Oe.match(/Status\s*=\s*['"]([^'"]+)['"]/i);return(Te==null?void 0:Te[1])??""}):[]}),rt=pe=>{const ne=pe.toLowerCase().trim();if(ne.startsWith("status")){const $e=Xe();return Gf.filter(Le=>!$e.includes(Le.value)).map(Le=>{var Ye;return{text:`Status = '${Le.value}'`,fullText:c.some(ft=>ft.field==="ExecutionStatus")?`${(Ye=c.find(ft=>ft.field==="ExecutionStatus"))==null?void 0:Ye.raw} OR Status = '${Le.value}'`:`Status = '${Le.value}'`,displayText:Le.value,disabled:!1,color:Le.color}})}if(N)return[];const Oe=[...Qr,...X],Te=new Set(c.map($e=>$e.field));return Oe.filter($e=>$e.label.toLowerCase().includes(ne)).map($e=>({text:$e.label,disabled:$e.type!=="status"&&Te.has($e.id)}))},Nt=pe=>{const ne=pe.target.value;if(u(ne),ne.endsWith(" ")){const Te=ne.trim().split(/\s+/);if(Te.length===2){const[$e,Le]=Te,Ye=Qr.find(ft=>$e.toLowerCase()===ft.label.toLowerCase());if(Ye)if(Ye.type==="datetime")yc.some(pt=>pt.label===Le||pt.alternatives.includes(Le))&&(ce(Ye.label),Yt());else{const ft=Tt(Ye);p(ft),b(0);return}}}const Oe=ne.trim().split(/\s+/);if(Oe.length===2){const[Te,$e]=Oe,Le=Qr.find(Ye=>Te.toLowerCase()===Ye.label.toLowerCase());if(Le){const Ye=Tt(Le).filter(ft=>ft.text.toLowerCase().includes($e.toLowerCase()));if(Ye.length>0){p(Ye),b(0);return}}}if((!ne.trim()||ne.trim().toLowerCase()==="status")&&M(!1),!C||ne.trim().toLowerCase()==="status"){b(-1);const Te=rt(ne);p(Te),Te.length>0&&b(0)}},Je=pe=>pe.match(/^Status\s*=\s*['"][^'"]+['"](\s+OR\s+Status\s*=\s*['"][^'"]+['"])*$/i)?{field:"ExecutionStatus",operator:"equals",value:pe,raw:pe,isValid:!0}:null,He=pe=>{if(!m){if(pe.key==="Backspace"&&a.length<=1&&M(!1),h.length>0&&!C&&(pe.key==="ArrowDown"?(pe.preventDefault(),b(ne=>ne<h.length-1?ne+1:ne)):pe.key==="ArrowUp"?(pe.preventDefault(),b(ne=>ne>0?ne-1:0)):pe.key==="Enter"&&x>=0&&(pe.preventDefault(),Ut(h[x]))),pe.key==="Enter"||pe.key==="Tab"){pe.preventDefault();const ne=a.trim();if(ne.length===0&&c.length>0){Bt();return}if(ne.toLowerCase().startsWith("status")){const Oe=Je(ne);Oe&&(f(Te=>[...Te.filter($e=>$e.field!=="ExecutionStatus"),Oe]),u(""),M(!1),p([]))}else{const Oe=cn(ne);Oe&&Oe.isValid&&(f(Te=>[...Te,Oe]),u(""),M(!1),p([]))}}else if(pe.key==="Backspace"&&a.trim()===""&&c.length>0){pe.preventDefault();const ne=c[c.length-1];ne.field==="ExecutionStatus"?(f(c.filter(Oe=>Oe.field!=="ExecutionStatus")),u(ne.raw),M(!0),p([])):un(c.length-1)}if(pe.key===" "){const ne=a.trim().split(/\s+/),Oe=ne[0],Te=Qr.find($e=>Oe.toLowerCase()===$e.label.toLowerCase()&&$e.type==="datetime");if(Te&&(ce(Te.label),ne.length===2)){const $e=ne[1];yc.some(Ye=>Ye.label===$e||Ye.alternatives.includes($e))&&Yt()}}}},jt=pe=>{const[ne,Oe]=a.trim().split(/\s+/);if(Qr.find($e=>ne.toLowerCase()===$e.label.toLowerCase())&&Oe){let $e;if(Oe.toLowerCase()==="between"&&pe.start&&pe.end){const Le=Fn(pe.start,"yyyy-MM-dd HH:mm:ss"),Ye=Fn(pe.end,"yyyy-MM-dd HH:mm:ss"),ft=`${ne} between '${Le}' and '${Ye}'`;$e=cn(ft)}else if(pe.start){const Le=Fn(pe.start,"yyyy-MM-dd HH:mm:ss"),Ye=`${ne} ${Oe} '${Le}'`;$e=cn(Ye)}$e&&(f(Le=>[...Le,$e]),u(""),y(!1),ce(null),p([]),b(-1))}},Bt=async()=>{const pe=bt();console.log("searchQuery",pe),Re(!0);try{const ne=await Wg(R,pe);ye(ne.executions||[]),fe(Math.min(Math.ceil(ne.executions.length/100),10)),W(1)}catch(ne){console.error("Error executing search:",ne)}finally{Re(!1)}},bt=()=>{const pe=[];return c.forEach(ne=>{if(ne.field==="ExecutionStatus"){const Oe=ne.raw.split(/\s+OR\s+/).map(Te=>{const $e=Te.match(/Status\s*=\s*['"]([^'"]+)['"]/i);return $e?`\`ExecutionStatus\`="${$e[1]}"`:null}).filter(Boolean);Oe.length>0&&pe.push(`(${Oe.join(" OR ")})`)}else if(ne.operator==="between"&&ne.value){const[Oe,Te]=ne.value.split(" and ");pe.push(`\`${ne.field}\` BETWEEN "${Oe}" AND "${Te}"`)}else pe.push(`\`${ne.field}\` ${ne.operator} "${ne.value}"`)}),pe.length===0?"":pe.join(" AND ")},un=pe=>{var Te;const ne=c[pe],Oe=Qr.find($e=>$e.id===ne.field);if((Oe==null?void 0:Oe.type)==="datetime"){f(c.filter(($e,Le)=>Le!==pe));return}if(ne.field==="ExecutionStatus"){const $e=c.filter(Le=>Le.field!=="ExecutionStatus");f($e),u(ne.raw),M(!0),p([])}else f(c.filter(($e,Le)=>Le!==pe)),u(ne.raw);E(!1),(Te=U.current)==null||Te.focus()},Ut=pe=>{var ne;if(!pe.disabled){if(pe.color){const Oe=c.filter(Le=>Le.field==="ExecutionStatus"),Te=c.filter(Le=>Le.field!=="ExecutionStatus");let $e;if(Oe.length>0){const Le=`${Oe[0].raw} OR Status = '${pe.displayText}'`;$e=Je(Le)}else $e=Je(`Status = '${pe.displayText}'`);if($e){const Le=c.findIndex(ft=>ft.field==="ExecutionStatus"),Ye=[...Te];Le>=0?Ye.splice(Le,0,$e):Ye.push($e),f(Ye)}u(""),p([]),M(!1)}else{const Oe=pe.text.split(/\s+/);if(u(pe.text+" "),Oe.length===2){const[Te,$e]=Oe,Le=Qr.find(ft=>Te.toLowerCase()===ft.label.toLowerCase()&&ft.type==="datetime"),Ye=yc.some(ft=>ft.label===$e||ft.alternatives.includes($e));Le&&Ye&&(ce(Le.label),requestAnimationFrame(()=>{Yt()}))}else{const Te=Qr.find($e=>$e.label===pe.text);p(Te?Tt(Te):[]),b(0),E(!1),y(!1)}}(ne=U.current)==null||ne.focus()}},cn=pe=>{if(!pe.trim())return null;const ne=/^([a-zA-Z]+)\s*(=|!=|>|>=|<|<=|between|starts\s*with)\s*['"]([^'"]+)['"](?:\s+and\s+['"]([^'"]+)['"])?$/,Oe=pe.match(ne);if(!Oe)return{field:"",operator:"",value:null,raw:pe,isValid:!1};let[,Te,$e,Le,Ye]=Oe;const ft=Qr.find(Et=>Te.toLowerCase()===Et.label.toLowerCase()),pt=Qg.find(Et=>Et.label===$e||Et.alternatives.includes($e.toLowerCase())||Et.searchOperator===$e);if(!pt)return{field:"",operator:"",value:null,raw:pe,isValid:!1};if((ft==null?void 0:ft.type)==="datetime"){const Et=new Date(Le);Le=Fn(Et,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),Ye=Ye?Fn(new Date(Ye),"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"):""}return{field:ft?ft.id:Te,operator:pt.searchOperator,value:Ye?`${Le} and ${Ye}`:Le,raw:pe,isValid:!0}},Jt=pe=>pe.isValid?pe.field==="ExecutionStatus"||[...Qr,...X].some(Oe=>Oe.id.toLowerCase()===pe.field.toLowerCase())?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";ie.useEffect(()=>{z.current&&z.current.scrollIntoView({block:"nearest"})},[x]);const Yt=()=>{var Oe;if(!U.current)return;const pe=(Oe=U.current)==null?void 0:Oe.getBoundingClientRect(),ne=document.querySelector('[role="dialog"]');if(pe&&ne){const Te=ne.getBoundingClientRect(),$e=(Te.width-400)/2;B({x:$e,y:pe.bottom-Te.top+5}),y(!0)}},nn=async()=>{oe(!1),await xt(),await Ke()},Vt=pe=>{pe.stopPropagation(),oe(!0)},ln=()=>{p([]),b(-1)},hn=pe=>{p([]),b(-1)},_t=(pe,ne)=>{ke(Oe=>{const Te=[...Oe];return Te[pe]={...Te[pe],width:ne},Te})},Ht=pe=>{const ne=Gf.find(Oe=>Oe.value.toLowerCase()===pe.toLowerCase());return(ne==null?void 0:ne.color)||"gray"},qt=pe=>Fn(new Date(pe),"yyyy-MM-dd HH:mm:ss"),Wt=async(pe,ne)=>{ne.stopPropagation();try{const Oe=await GA(R,pe.execution.workflowId,pe.execution.runId),Te={x:Math.min(ne.clientX,window.innerWidth-600),y:Math.min(ne.clientY,window.innerHeight-400)};i?i(Oe,Te,3e3):nt({data:Oe,position:Te,baseZIndex:3e3})}catch(Oe){console.error("Error fetching workflow details:",Oe)}},Fe=(pe,ne,Oe)=>{const Te=new URL(window.location.href);Te.searchParams.set("id",pe),Te.searchParams.set("namespace",ne),Te.searchParams.set("runID",Oe),window.history.pushState({},"",Te.toString())},Kt=()=>{const pe=(he-1)*100,ne=pe+100,Oe=Q.slice(pe,ne);return _.jsxs("div",{className:"flex flex-col h-full",children:[_.jsx("div",{className:"flex-none px-4 py-3 border-b bg-gray-50 z-[50]",children:_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",pe+1,"-",Math.min(ne,Q.length)," of"," ",Q.length," results"]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("button",{onClick:()=>W(Te=>Math.max(1,Te-1)),disabled:he===1,className:"p-1.5 rounded hover:bg-gray-200 disabled:opacity-50 disabled:hover:bg-transparent transition-colors",children:_.jsx(GO,{size:16})}),_.jsxs("span",{className:"text-sm font-medium",children:[he," / ",ae]}),_.jsx("button",{onClick:()=>W(Te=>Math.min(ae,Te+1)),disabled:he===ae,className:"p-1.5 rounded hover:bg-gray-200 disabled:opacity-50 disabled:hover:bg-transparent transition-colors",children:_.jsx(ZO,{size:16})})]})]})}),_.jsx("div",{className:"flex-1 overflow-auto",children:_.jsx("div",{className:"inline-block min-w-full align-middle",children:_.jsx("div",{className:"relative",children:_.jsxs("table",{className:"min-w-full border-collapse",children:[_.jsx("thead",{children:_.jsxs("tr",{children:[_.jsx("th",{className:"sticky top-0 border-b border-gray-200 bg-gray-50 z-10",style:{width:50},children:_.jsx("div",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"})}),we.map((Te,$e)=>_.jsxs("th",{className:"sticky top-0 border-b border-gray-200 bg-gray-50 z-10",style:{width:Te.width},children:[_.jsx("div",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:Te.label}),_.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1 cursor-col-resize hover:bg-blue-500 group",onMouseDown:Le=>{const Ye=Le.pageX,ft=Te.width,pt=Pn=>{const Gn=Pn.pageX-Ye;_t($e,Math.max(100,ft+Gn))},Et=()=>{document.removeEventListener("mousemove",pt),document.removeEventListener("mouseup",Et)};document.addEventListener("mousemove",pt),document.addEventListener("mouseup",Et)},children:_.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-px bg-gray-200 group-hover:bg-blue-500"})})]},`${Te.id}-${$e}`))]})}),_.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:Oe.map(Te=>_.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[_.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-left",children:_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{onClick:$e=>{$e.stopPropagation(),Ee(!0),n({workflowId:Te.execution.workflowId,namespace:R,runId:Te.execution.runId}).then(()=>{Ee(!1),Fe(Te.execution.workflowId,R,Te.execution.runId),t()}).catch(Le=>{console.error("Error loading workflow:",Le),Ee(!1)})},className:"p-1 hover:bg-gray-200 rounded-full transition-colors",title:"View workflow details",children:_.jsx(Zv,{size:16,className:"text-gray-600"})}),_.jsx("button",{onClick:$e=>Wt(Te,$e),className:"p-1 hover:bg-gray-200 rounded-full transition-colors",title:"Quick view",children:_.jsx(QO,{size:16,className:"text-gray-600"})})]})}),_.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-left",children:_.jsx("div",{className:`inline-flex items-center gap-2 px-2.5 py-1 rounded-full text-xs font-medium
                          ${Ht(Te.status)}`,children:Te.status})}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:Te.taskQueue}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:Te.type.name}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium text-left",children:Te.execution.workflowId}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 font-mono text-left",children:Te.execution.runId}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:wh(Te.startTime,Te.closeTime||new Date().toISOString())||"—"}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:qt(Te.startTime)}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:Te.closeTime?qt(Te.closeTime):"—"})]},`${Te.execution.workflowId}-${Te.execution.runId}`))})]})})})})]})},Dt=_.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[_.jsx("span",{className:"text-gray-700 font-medium",children:"Namespace:"}),_.jsxs("div",{className:"relative",children:[_.jsxs("button",{onClick:()=>Ve(!Be),className:"w-64 p-2 border rounded-lg bg-white flex items-center justify-between",children:[_.jsx("span",{children:R}),_.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${Be?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),Be&&_.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-lg shadow-lg",children:ue.map(pe=>_.jsx("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-100 first:rounded-t-lg last:rounded-b-lg",onClick:()=>{re(pe),Ve(!1)},children:pe},pe))})]})]});return e?_.jsxs(_.Fragment,{children:[_.jsxs(qy,{open:e,onClose:pe=>{var ne;if(pe===!1&&((ne=document.activeElement)==null?void 0:ne.tagName)==="BODY"){t();return}},className:"relative z-[50]",children:[_.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true",onClick:pe=>{pe.preventDefault(),pe.stopPropagation()},onMouseDown:pe=>{const ne=document.querySelector("[data-node-panel]");if(ne&&(ne===pe.target||ne.contains(pe.target))){pe.preventDefault(),pe.stopPropagation();return}},onMouseUp:pe=>{const ne=document.querySelector("[data-node-panel]");if(ne&&(ne===pe.target||ne.contains(pe.target))){pe.preventDefault(),pe.stopPropagation();return}pe.preventDefault(),pe.stopPropagation()}}),qe&&_.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:_.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl flex items-center gap-4",children:[_.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-blue-500 border-t-transparent"}),_.jsx("span",{className:"text-gray-700",children:"Loading workflow..."})]})}),_.jsx("div",{className:"fixed inset-0",onClick:hn,children:_.jsx("div",{className:"flex min-h-full items-start justify-center p-4 text-center",children:_.jsxs($h,{className:"bg-white rounded-xl w-full max-w-[120rem] h-[90vh] flex flex-col shadow-2xl relative",onClick:pe=>pe.stopPropagation(),children:[_.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 transition-colors z-50","aria-label":"Close modal",children:_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-500",children:[_.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),_.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),_.jsxs("div",{className:"p-6 flex-none border-b relative",children:[Dt,_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Search settings",onClick:Vt,children:_.jsx(tA,{size:20,className:"text-gray-600"})}),_.jsxs("div",{className:"flex-1",children:[_.jsxs("div",{className:"flex flex-wrap gap-2 items-center p-2 border rounded-lg bg-gray-50 min-h-[40px]",children:[c.map((pe,ne)=>_.jsxs("div",{className:`px-2 py-1 rounded-md ${Jt(pe)} flex items-center gap-1 group`,children:[_.jsx("span",{onClick:()=>un(ne),className:"flex-1 cursor-pointer",children:pe.raw}),_.jsx("button",{onClick:Oe=>{Oe.stopPropagation(),f(Te=>Te.filter(($e,Le)=>Le!==ne))},className:"text-current opacity-50 hover:opacity-100 transition-opacity","aria-label":"Remove token",children:_.jsx(Us,{size:14})})]},ne)),_.jsx("input",{ref:U,type:"text",value:a,onChange:Nt,onClick:ln,onKeyDown:He,className:"flex-1 min-w-[200px] bg-transparent outline-none",placeholder:c.length>0?"Add another filter...":"Type to search. For example, WorkflowType = 'MyWorkflowType'"})]}),h.length>0&&_.jsx("div",{className:"absolute mt-1 w-1/2 max-h-60 overflow-auto rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[60]",children:h.map((pe,ne)=>_.jsx("button",{ref:ne===x?z:null,className:`relative cursor-default select-none py-2 pl-3 pr-9 w-full text-left transition-colors ${pe.disabled?"text-gray-400":"text-gray-900"} ${ne===x||pe.disabled?"bg-gray-50":"bg-white hover:bg-gray-50"}`,onClick:()=>!pe.disabled&&Ut(pe),disabled:pe.disabled,children:_.jsx("span",{className:`inline-block truncate ${pe.color?YM(pe.color,!1):""}`,children:pe.displayText||pe.text})},ne))})]}),_.jsx("button",{onClick:Bt,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Search"})]})]}),_.jsx("div",{className:"flex-1 overflow-y-auto",children:Me?_.jsx("div",{className:"flex items-center justify-center h-full",children:_.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-blue-500"})}):Q.length>0?Kt():_.jsx("div",{className:"p-6 text-center text-gray-500",children:"No results to display. Try searching for workflows above."})}),m&&ee&&_.jsx("div",{className:"absolute z-[999]",style:{top:"100px"},children:_.jsx(KM,{onSelect:jt,onClose:()=>{y(!1),B(null)},position:ee,showTime:!0,isBetweenMode:a.toLowerCase().includes("between")})})]})})})]}),_.jsx(zM,{isOpen:J,onClose:nn})]}):null}const YM=(e,t)=>!e||t?"":`px-2 py-0.5 rounded ${e}`,VM=e=>k.useMemo(()=>yA(e),[e]);function qM({id:e,onShowNodeData:t,onSpreadBatchNodes:n}){const i=VM(e),u=fA(i).value;if(!u)return null;const c=()=>{n==null||n(e)},f=h=>{h.stopPropagation(),t(u,{x:h.clientX,y:h.clientY})};return _.jsx(xh,{id:e,onShowNodeData:f,onBatchAction:c,IconComponent:_.jsx("div",{className:"bg-fuchsia-50",children:_.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:_.jsx("path",{d:"M5 12L12 5L19 12L12 19L5 12Z"})})}),TitleComponent:_.jsx("div",{className:"flex items-center h-[2.5rem]",children:_.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:u.activityType})}),TypeLabelComponent:_.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgb(253 244 255)",color:"rgb(192 38 211)"},children:"activity"}),status:u.status,startTime:u.startTime,endTime:u.endTime,taskQueue:u.taskQueue.name})}function XM(){const e=ti(Nh),t=bi(Ko),n=bi(Th),i=bi(Ba),a=bi(Sh),u=async h=>{try{const p=i.find(J=>J.id===h&&J.type==="batch");if(!p){console.error("No batch node found to expand or node is not a batch node");return}const m=p;if(!m.referencedBatches||m.referencedBatches.length===0){console.error("Batch node has no referenced items to expand");return}if(!t||!n){console.error("Missing graph structure data");return}const y=[],x=[...m.referencedBatches].sort((J,oe)=>{var ge,R;const X=(ge=m.__batchItems)==null?void 0:ge.find(re=>"workflowId"in J&&"workflowId"in re&&re.workflowId===J.workflowId||"activityId"in J&&"activityId"in re&&re.activityId===J.activityId),Y=(R=m.__batchItems)==null?void 0:R.find(re=>"workflowId"in oe&&"workflowId"in re&&re.workflowId===oe.workflowId||"activityId"in oe&&"activityId"in re&&re.activityId===oe.activityId);if(!X||!Y)return 0;const ue=(X.sortEventTime||"").localeCompare(Y.sortEventTime||"");return ue!==0?ue:parseInt(X.sortEventId||"0")-parseInt(Y.sortEventId||"0")}).map((J,oe)=>{const X="workflowId"in J&&"workflowRunId"in J&&!("activityId"in J);let Y;return X?(Y=Br(J),Y===n.id&&(Y=`${Y}$$batch_item_${oe}`),y.push(Y),{id:Y,type:"workflow",isExpanded:!1}):(Y=du(J),Y===n.id&&(Y=`${Y}$$batch_item_${oe}`),y.push(Y),{id:Y,type:"activity"})});if(x.length===0){console.warn("No nodes to add after expanding batch");return}const b=x.map(J=>({id:J.id,children:[],isBatchNode:!1})),N=f(n,h,b),E=N.id,C=x.filter(J=>J.id===E);C.length>0&&(console.error(`ERROR: ${C.length} batch items have the same ID as the parent workflow: ${E}`),C.forEach((J,oe)=>{const X=J.id;J.id=`${J.id}$$batch_item_${oe}`,console.log(`Fixed conflicting ID: ${X} -> ${J.id}`)}));const M=i.filter(J=>J.id!==h),z=a.filter(J=>J.target_id===h),ee=a.filter(J=>J.source_id===h),B=[];x.length>0&&z.forEach(J=>{x.forEach(oe=>{B.push({source_id:J.source_id,target_id:oe.id,type:J.type})})}),x.length>0&&ee.forEach(J=>{x.forEach(oe=>{B.push({source_id:oe.id,target_id:J.target_id,type:J.type})})});const le=a.filter(J=>J.source_id!==h&&J.target_id!==h),ce=[...M,...x],U=[...le,...B];c(N,ce),e({renderTree:N,nodes:ce,edges:U})}catch(p){console.error("Error expanding batch node:",p)}},c=(h,p)=>{const m=new Set(p.map(b=>b.id)),y=[],x=b=>{m.has(b.id)||y.push(b.id),b.children.forEach(x)};x(h),y.length>0&&console.error("Missing nodes in nodes list that exist in render tree:",y)},f=(h,p,m)=>{let y=!1;const x=new Map;for(const M of m)x.set(M.id,(x.get(M.id)||0)+1);const b=Array.from(x.entries()).filter(([M,z])=>z>1).map(([M,z])=>`${M} (${z} times)`);b.length>0&&console.error(`ERROR: Found duplicate IDs in expanded nodes: ${b.join(", ")}`);const N=M=>({id:M.id,children:M.children.map(z=>N(z)),isBatchNode:M.isBatchNode}),E=N(h),C=M=>{if(M.id===p){y=!0,console.log(`Found batch node ${p} to expand`);return}for(let z=0;z<M.children.length;z++){const ee=M.children[z];if(ee.id===p){if(y=!0,m.length>0){if(M.children[z]=m[0],m.length>1){const B=m.slice(1);M.children.splice(z+1,0,...B)}}else M.children.splice(z,1),z--;return}C(ee)}};return C(E),y||console.error(`Batch node ${p} was not found in the render tree!`),E};return{onSpreadBatchNodes:u}}const GM=e=>k.useMemo(()=>{const t=new Date().toISOString();return{startTime:t,endTime:t,status:"Batched"}},[e]);function ZM({id:e,data:t}){const{referencedBatches:n}=t,i=n.length,{startTime:a,endTime:u,status:c}=GM(n),{onSpreadBatchNodes:f}=XM(),h=k.useCallback(()=>{f==null||f(e)},[f,e]),p=k.useMemo(()=>{const m=n.some(x=>"workflowRunId"in x&&"workflowId"in x&&!("activityId"in x)),y=n.some(x=>"activityId"in x);return m&&y?"mixed":m?"workflow":"activity"},[n]);return _.jsx(xh,{id:e,onBatchAction:h,IconComponent:_.jsx("div",{className:"bg-blue-50",children:_.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})}),TitleComponent:_.jsxs("div",{className:"flex flex-col",children:[_.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:p==="workflow"?"Batched Workflows":p==="activity"?"Batched Activities":"Batched Items"}),_.jsxs("p",{className:"text-xs text-gray-500",children:["Contains ",i," ",p==="mixed"?"items":p+(i>1?"s":"")]})]}),TypeLabelComponent:_.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgb(219 234 254)",color:"rgb(29 78 216)"},children:"batch"}),status:c,startTime:a,endTime:u,taskQueue:"",isLoading:!1,count:i})}const QM=()=>{const[e,t]=k.useState(!0),n=k.useRef(null),i=k.useRef(!0),a=k.useCallback((p,m,y,x=.75,b=800)=>{!p||!i.current||p.setCenter(m,y,{zoom:x,duration:b})},[]),u=k.useCallback(p=>{!p||!i.current||p.fitView({padding:.2,duration:800,minZoom:.4})},[]),c=k.useCallback(p=>{n.current=p},[]),f=k.useCallback(()=>{!n.current||!i.current||n.current.fitView({padding:.2,duration:800,minZoom:.4})},[]),h=k.useCallback(p=>{i.current=p,t(p)},[]);return{autoZoomEnabled:e,setAutoZoomEnabled:h,handleZoom:a,fitView:u,onInit:c,onGraphLoad:f}};function JM(){const[e,t]=ie.useState(!1),n=k.useRef(null),i=.4,{autoZoomEnabled:a,setAutoZoomEnabled:u,onInit:c}=QM(),{fitView:f}=uD(n,a),h=k.useCallback(()=>{a&&f()},[a,f]),p=k.useCallback(m=>{n.current=m,c(m)},[c]);return{isRootLoaded:e,flowInstance:n,MIN_ZOOM:i,autoZoomEnabled:a,setAutoZoomEnabled:u,onInit:p,fitView:h}}function eL({onBeforeSubmit:e,onAfterSubmit:t}){const[n,i]=k.useState(!1),[a,u]=k.useState(!1),c=ti(Nh),f=async(m,y)=>{const x=await ey(m,y);for(const N of x)await f(N.workflowId,y);const b=await Jv(m,y);for(const N of b)await sA(m,N.activityId,y);await iA(m,y)};return{isTemporalModalOpen:n,setIsTemporalModalOpen:i,onTemporalModalSubmit:async m=>{if(e&&e(),!await XA())throw new Error("The server is not running. Please start the server and try again.");await kd(m.namespace,m.workflowId,m.runId,2);const x={workflowId:m.workflowId,workflowRunId:m.runId},b=await Ed(m.workflowId,m.runId),{nodes:N,edges:E,virtualTree:C,renderTree:M}=$g(x,b),z=Br(x);c({nodes:N,edges:E,structure:C,renderTree:M,rootId:z}),t&&t()},refreshWorkflowData:async(m,y)=>{try{u(!0);const x=await rl(m,y);if(!x){console.error("Workflow not found for refresh");return}await f(m,y);const b=await kd(x.namespace,m,y,2),N={workflowId:m,workflowRunId:y},E=await Ed(m,y),{nodes:C,edges:M,virtualTree:z,renderTree:ee}=$g(N,E),B=Br(N);c({nodes:C,edges:M,structure:z,renderTree:ee,rootId:B}),t&&t()}catch(x){console.error("Error refreshing workflow data:",x)}finally{u(!1)}},isRefreshing:a}}const tL=e=>t=>_.jsx(fD,{...t,onShowNodeData:e}),nL=e=>t=>_.jsx(qM,{...t,onShowNodeData:e}),rL=()=>e=>_.jsx(ZM,{...e});let id=null;function iL(){const{MIN_ZOOM:e,autoZoomEnabled:t,setAutoZoomEnabled:n,onInit:i,fitView:a}=JM(),{onTemporalModalSubmit:u,refreshWorkflowData:c,setIsTemporalModalOpen:f}=eL({onBeforeSubmit:()=>{ce()},onAfterSubmit:()=>{t&&setTimeout(()=>{a()},100)}}),[h,p]=ie.useState(null),[m,y]=ie.useState(!1),[x,b]=k.useState(!0),[N,E]=k.useState(!1),C=ie.useRef(!1),{nodes:M,edges:z}=bi(hy),ee=bi(al),B=ti(dy),le=ti(KA),ce=ti(zA),U=k.useCallback((Y,ue,ge)=>{B({data:Y,position:ue,baseZIndex:ge})},[B]),J=k.useCallback(Y=>{le(Y)},[le]),oe=k.useMemo(()=>{if(!id){const Y=tL(U),ue=nL(U),ge=rL();id={workflowNode:Y,activityNode:ue,batchNode:ge}}return id},[U]),X=k.useCallback(Y=>{i(Y),t&&setTimeout(()=>{a()},100)},[i,t,a]);return ie.useEffect(()=>{const Y=new URLSearchParams(window.location.search),ue=decodeURIComponent(Y.get("id")||""),ge=Y.get("namespace"),R=Y.get("runID");p(null),(async()=>{if(!C.current)if(C.current=!0,ue&&ge&&R){y(!0);try{await u({workflowId:ue,namespace:ge,runId:R})}catch(Q){console.error("Error loading workflow from URL params:",Q),p(Q instanceof Error?Q.message:"An error occurred while loading the workflow")}finally{y(!1)}}else y(!1)})()},[]),_.jsxs("div",{className:"w-screen h-screen flex flex-col bg-gray-50",children:[m&&_.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:_.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-xl flex items-center space-x-3",children:[_.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),_.jsx("div",{className:"text-gray-700",children:"Loading workflow data..."})]})}),h&&_.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[_.jsx("strong",{className:"font-bold",children:"Error: "}),_.jsx("span",{className:"block sm:inline",children:h}),_.jsxs("button",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",onClick:()=>p(null),children:[_.jsx("span",{className:"sr-only",children:"Dismiss"}),_.jsx(Us,{className:"h-5 w-5"})]})]}),_.jsx("div",{className:"flex-grow h-full",children:_.jsxs(Uv,{nodes:M,edges:z,nodeTypes:oe,onInit:X,minZoom:e,maxZoom:2,fitView:!1,fitViewOptions:{padding:.2,minZoom:e},attributionPosition:"bottom-left",className:"bg-gray-50",onNodesChange:Y=>{console.debug(`Nodes changed: ${Y.length} changes`)},nodesDraggable:!1,edgesUpdatable:!1,nodeExtent:[[-1/0,-1/0],[1/0,1/0]],defaultViewport:{x:0,y:0,zoom:1},proOptions:{hideAttribution:!0},children:[_.jsx(VO,{}),_.jsx(jO,{}),_.jsx(Js,{position:"bottom-right",className:"flex items-center gap-2 bg-transparent z-10 mb-2 mr-2",children:_.jsxs("button",{onClick:()=>b(!x),className:"bg-blue-500 px-3 py-1 rounded-lg shadow-lg hover:bg-blue-600 text-white transition-colors",children:[x?"Hide":"Show"," Minimap"]})}),x&&_.jsx(DO,{zoomable:!0,pannable:!0,className:"bg-white rounded-lg shadow-lg",style:{backgroundColor:"white",width:300,height:200},maskColor:"rgba(0, 0, 0, 0.1)",nodeColor:"#aaa",nodeStrokeWidth:3,nodeBorderRadius:2}),_.jsx(Js,{position:"top-right",className:"flex items-center gap-2 bg-transparent",children:_.jsx("div",{className:"bg-white p-2 rounded-lg shadow-lg",children:_.jsx(dD,{autoZoomEnabled:t,setAutoZoomEnabled:n,refreshWorkflowData:c,isSearchModalOpen:N,setIsSearchModalOpen:E,setIsTemporalModalOpen:f,currentWorkflow:null})})})]})}),ee.map(Y=>_.jsx(hD,{id:Y.id,data:Y.node,position:Y.position,onClose:()=>J(Y.id),baseZIndex:Y.baseZIndex},Y.id)),_.jsx(UM,{isOpen:N,onClose:()=>E(!1),onTemporalModalSubmit:u,onShowNodeData:U})]})}_0(document.getElementById("root")).render(_.jsx(k.StrictMode,{children:_.jsx(iL,{})}));
