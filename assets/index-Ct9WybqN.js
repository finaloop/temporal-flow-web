import{r as b,a as Tu,g as Qs,R as B,c as Mr,t as rl}from"./vendor-DBEsKlBz.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var Du={exports:{}},Ya={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ah=b,$h=Symbol.for("react.element"),Rh=Symbol.for("react.fragment"),Lh=Object.prototype.hasOwnProperty,Fh=Ah.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Wh={key:!0,ref:!0,__self:!0,__source:!0};function Ou(e,t,n){var r,o={},i=null,s=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)Lh.call(t,r)&&!Wh.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:$h,type:e,key:i,ref:s,props:o,_owner:Fh.current}}Ya.Fragment=Rh;Ya.jsx=Ou;Ya.jsxs=Ou;Du.exports=Ya;var g=Du.exports,ju,ol=Tu;ju=ol.createRoot,ol.hydrateRoot;function kt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=kt(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Pu={exports:{}},Mu={},Iu={exports:{}},Au={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wr=b;function Bh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Hh=typeof Object.is=="function"?Object.is:Bh,zh=Wr.useState,Yh=Wr.useEffect,Vh=Wr.useLayoutEffect,qh=Wr.useDebugValue;function Kh(e,t){var n=t(),r=zh({inst:{value:n,getSnapshot:t}}),o=r[0].inst,i=r[1];return Vh(function(){o.value=n,o.getSnapshot=t,Fi(o)&&i({inst:o})},[e,n,t]),Yh(function(){return Fi(o)&&i({inst:o}),e(function(){Fi(o)&&i({inst:o})})},[e]),qh(n),n}function Fi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Hh(e,n)}catch{return!0}}function Uh(e,t){return t()}var Xh=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Uh:Kh;Au.useSyncExternalStore=Wr.useSyncExternalStore!==void 0?Wr.useSyncExternalStore:Xh;Iu.exports=Au;var Gh=Iu.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Va=b,Zh=Gh;function Qh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Jh=typeof Object.is=="function"?Object.is:Qh,em=Zh.useSyncExternalStore,tm=Va.useRef,nm=Va.useEffect,rm=Va.useMemo,om=Va.useDebugValue;Mu.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var i=tm(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=rm(function(){function u(w){if(!f){if(f=!0,h=w,w=r(w),o!==void 0&&s.hasValue){var S=s.value;if(o(S,w))return p=S}return p=w}if(S=p,Jh(h,w))return S;var _=r(w);return o!==void 0&&o(S,_)?S:(h=w,p=_)}var f=!1,h,p,y=n===void 0?null:n;return[function(){return u(t())},y===null?void 0:function(){return u(y())}]},[t,n,r,o]);var l=em(e,i[0],i[1]);return nm(function(){s.hasValue=!0,s.value=l},[l]),om(l),l};Pu.exports=Mu;var am=Pu.exports;const im=Qs(am),sm={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},al=e=>{let t;const n=new Set,r=(h,p)=>{const y=typeof h=="function"?h(t):h;if(!Object.is(y,t)){const w=t;t=p??(typeof y!="object"||y===null)?y:Object.assign({},t,y),n.forEach(S=>S(t,w))}},o=()=>t,u={setState:r,getState:o,getInitialState:()=>f,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(sm?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},f=t=e(r,o,u);return u},cm=e=>e?al(e):al,{useDebugValue:lm}=B,{useSyncExternalStoreWithSelector:um}=im,dm=e=>e;function $u(e,t=dm,n){const r=um(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return lm(r),r}const il=(e,t)=>{const n=cm(e),r=(o,i=t)=>$u(n,o,i);return Object.assign(r,n),r},fm=(e,t)=>e?il(e,t):il;function St(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var hm={value:()=>{}};function qa(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ka(n)}function ka(e){this._=e}function mm(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ka.prototype=qa.prototype={constructor:ka,on:function(e,t){var n=this._,r=mm(e+"",n),o,i=-1,s=r.length;if(arguments.length<2){for(;++i<s;)if((o=(e=r[i]).type)&&(o=pm(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(o=(e=r[i]).type)n[o]=sl(n[o],e.name,t);else if(t==null)for(o in n)n[o]=sl(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ka(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};function pm(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function sl(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=hm,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var ss="http://www.w3.org/1999/xhtml";const cl={svg:"http://www.w3.org/2000/svg",xhtml:ss,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ka(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),cl.hasOwnProperty(t)?{space:cl[t],local:e}:e}function gm(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ss&&t.documentElement.namespaceURI===ss?t.createElement(e):t.createElementNS(n,e)}}function ym(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ru(e){var t=Ka(e);return(t.local?ym:gm)(t)}function vm(){}function Js(e){return e==null?vm:function(){return this.querySelector(e)}}function wm(e){typeof e!="function"&&(e=Js(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,l=r[o]=new Array(s),u,f,h=0;h<s;++h)(u=i[h])&&(f=e.call(u,u.__data__,h,i))&&("__data__"in u&&(f.__data__=u.__data__),l[h]=f);return new Vt(r,this._parents)}function bm(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function xm(){return[]}function Lu(e){return e==null?xm:function(){return this.querySelectorAll(e)}}function Sm(e){return function(){return bm(e.apply(this,arguments))}}function _m(e){typeof e=="function"?e=Sm(e):e=Lu(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var s=t[i],l=s.length,u,f=0;f<l;++f)(u=s[f])&&(r.push(e.call(u,u.__data__,f,s)),o.push(u));return new Vt(r,o)}function Fu(e){return function(){return this.matches(e)}}function Wu(e){return function(t){return t.matches(e)}}var km=Array.prototype.find;function Em(e){return function(){return km.call(this.children,e)}}function Nm(){return this.firstElementChild}function Cm(e){return this.select(e==null?Nm:Em(typeof e=="function"?e:Wu(e)))}var Tm=Array.prototype.filter;function Dm(){return Array.from(this.children)}function Om(e){return function(){return Tm.call(this.children,e)}}function jm(e){return this.selectAll(e==null?Dm:Om(typeof e=="function"?e:Wu(e)))}function Pm(e){typeof e!="function"&&(e=Fu(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,l=r[o]=[],u,f=0;f<s;++f)(u=i[f])&&e.call(u,u.__data__,f,i)&&l.push(u);return new Vt(r,this._parents)}function Bu(e){return new Array(e.length)}function Mm(){return new Vt(this._enter||this._groups.map(Bu),this._parents)}function Da(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Da.prototype={constructor:Da,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Im(e){return function(){return e}}function Am(e,t,n,r,o,i){for(var s=0,l,u=t.length,f=i.length;s<f;++s)(l=t[s])?(l.__data__=i[s],r[s]=l):n[s]=new Da(e,i[s]);for(;s<u;++s)(l=t[s])&&(o[s]=l)}function $m(e,t,n,r,o,i,s){var l,u,f=new Map,h=t.length,p=i.length,y=new Array(h),w;for(l=0;l<h;++l)(u=t[l])&&(y[l]=w=s.call(u,u.__data__,l,t)+"",f.has(w)?o[l]=u:f.set(w,u));for(l=0;l<p;++l)w=s.call(e,i[l],l,i)+"",(u=f.get(w))?(r[l]=u,u.__data__=i[l],f.delete(w)):n[l]=new Da(e,i[l]);for(l=0;l<h;++l)(u=t[l])&&f.get(y[l])===u&&(o[l]=u)}function Rm(e){return e.__data__}function Lm(e,t){if(!arguments.length)return Array.from(this,Rm);var n=t?$m:Am,r=this._parents,o=this._groups;typeof e!="function"&&(e=Im(e));for(var i=o.length,s=new Array(i),l=new Array(i),u=new Array(i),f=0;f<i;++f){var h=r[f],p=o[f],y=p.length,w=Fm(e.call(h,h&&h.__data__,f,r)),S=w.length,_=l[f]=new Array(S),N=s[f]=new Array(S),C=u[f]=new Array(y);n(h,p,_,N,C,w,t);for(var R=0,I=0,T,U;R<S;++R)if(T=_[R]){for(R>=I&&(I=R+1);!(U=N[I])&&++I<S;);T._next=U||null}}return s=new Vt(s,r),s._enter=l,s._exit=u,s}function Fm(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Wm(){return new Vt(this._exit||this._groups.map(Bu),this._parents)}function Bm(e,t,n){var r=this.enter(),o=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function Hm(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,s=Math.min(o,i),l=new Array(o),u=0;u<s;++u)for(var f=n[u],h=r[u],p=f.length,y=l[u]=new Array(p),w,S=0;S<p;++S)(w=f[S]||h[S])&&(y[S]=w);for(;u<o;++u)l[u]=n[u];return new Vt(l,this._parents)}function zm(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,i=r[o],s;--o>=0;)(s=r[o])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function Ym(e){e||(e=Vm);function t(p,y){return p&&y?e(p.__data__,y.__data__):!p-!y}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var s=n[i],l=s.length,u=o[i]=new Array(l),f,h=0;h<l;++h)(f=s[h])&&(u[h]=f);u.sort(t)}return new Vt(o,this._parents).order()}function Vm(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function qm(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Km(){return Array.from(this)}function Um(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var s=r[o];if(s)return s}return null}function Xm(){let e=0;for(const t of this)++e;return e}function Gm(){return!this.node()}function Zm(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],i=0,s=o.length,l;i<s;++i)(l=o[i])&&e.call(l,l.__data__,i,o);return this}function Qm(e){return function(){this.removeAttribute(e)}}function Jm(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ep(e,t){return function(){this.setAttribute(e,t)}}function tp(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function np(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function rp(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function op(e,t){var n=Ka(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Jm:Qm:typeof t=="function"?n.local?rp:np:n.local?tp:ep)(n,t))}function Hu(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ap(e){return function(){this.style.removeProperty(e)}}function ip(e,t,n){return function(){this.style.setProperty(e,t,n)}}function sp(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function cp(e,t,n){return arguments.length>1?this.each((t==null?ap:typeof t=="function"?sp:ip)(e,t,n??"")):Br(this.node(),e)}function Br(e,t){return e.style.getPropertyValue(t)||Hu(e).getComputedStyle(e,null).getPropertyValue(t)}function lp(e){return function(){delete this[e]}}function up(e,t){return function(){this[e]=t}}function dp(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function fp(e,t){return arguments.length>1?this.each((t==null?lp:typeof t=="function"?dp:up)(e,t)):this.node()[e]}function zu(e){return e.trim().split(/^|\s+/)}function ec(e){return e.classList||new Yu(e)}function Yu(e){this._node=e,this._names=zu(e.getAttribute("class")||"")}Yu.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Vu(e,t){for(var n=ec(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function qu(e,t){for(var n=ec(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function hp(e){return function(){Vu(this,e)}}function mp(e){return function(){qu(this,e)}}function pp(e,t){return function(){(t.apply(this,arguments)?Vu:qu)(this,e)}}function gp(e,t){var n=zu(e+"");if(arguments.length<2){for(var r=ec(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?pp:t?hp:mp)(n,t))}function yp(){this.textContent=""}function vp(e){return function(){this.textContent=e}}function wp(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function bp(e){return arguments.length?this.each(e==null?yp:(typeof e=="function"?wp:vp)(e)):this.node().textContent}function xp(){this.innerHTML=""}function Sp(e){return function(){this.innerHTML=e}}function _p(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function kp(e){return arguments.length?this.each(e==null?xp:(typeof e=="function"?_p:Sp)(e)):this.node().innerHTML}function Ep(){this.nextSibling&&this.parentNode.appendChild(this)}function Np(){return this.each(Ep)}function Cp(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Tp(){return this.each(Cp)}function Dp(e){var t=typeof e=="function"?e:Ru(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Op(){return null}function jp(e,t){var n=typeof e=="function"?e:Ru(e),r=t==null?Op:typeof t=="function"?t:Js(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Pp(){var e=this.parentNode;e&&e.removeChild(this)}function Mp(){return this.each(Pp)}function Ip(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ap(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function $p(e){return this.select(e?Ap:Ip)}function Rp(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Lp(e){return function(t){e.call(this,t,this.__data__)}}function Fp(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Wp(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,i;n<o;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function Bp(e,t,n){return function(){var r=this.__on,o,i=Lp(t);if(r){for(var s=0,l=r.length;s<l;++s)if((o=r[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=t;return}}this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function Hp(e,t,n){var r=Fp(e+""),o,i=r.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,f=l.length,h;u<f;++u)for(o=0,h=l[u];o<i;++o)if((s=r[o]).type===h.type&&s.name===h.name)return h.value}return}for(l=t?Bp:Wp,o=0;o<i;++o)this.each(l(r[o],t,n));return this}function Ku(e,t,n){var r=Hu(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function zp(e,t){return function(){return Ku(this,e,t)}}function Yp(e,t){return function(){return Ku(this,e,t.apply(this,arguments))}}function Vp(e,t){return this.each((typeof t=="function"?Yp:zp)(e,t))}function*qp(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length,s;o<i;++o)(s=r[o])&&(yield s)}var Uu=[null];function Vt(e,t){this._groups=e,this._parents=t}function Io(){return new Vt([[document.documentElement]],Uu)}function Kp(){return this}Vt.prototype=Io.prototype={constructor:Vt,select:wm,selectAll:_m,selectChild:Cm,selectChildren:jm,filter:Pm,data:Lm,enter:Mm,exit:Wm,join:Bm,merge:Hm,selection:Kp,order:zm,sort:Ym,call:qm,nodes:Km,node:Um,size:Xm,empty:Gm,each:Zm,attr:op,style:cp,property:fp,classed:gp,text:bp,html:kp,raise:Np,lower:Tp,append:Dp,insert:jp,remove:Mp,clone:$p,datum:Rp,on:Hp,dispatch:Vp,[Symbol.iterator]:qp};function Ut(e){return typeof e=="string"?new Vt([[document.querySelector(e)]],[document.documentElement]):new Vt([[e]],Uu)}function Up(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Jt(e,t){if(e=Up(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const Xp={passive:!1},xo={capture:!0,passive:!1};function Wi(e){e.stopImmediatePropagation()}function Rr(e){e.preventDefault(),e.stopImmediatePropagation()}function Xu(e){var t=e.document.documentElement,n=Ut(e).on("dragstart.drag",Rr,xo);"onselectstart"in t?n.on("selectstart.drag",Rr,xo):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Gu(e,t){var n=e.document.documentElement,r=Ut(e).on("dragstart.drag",null);t&&(r.on("click.drag",Rr,xo),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ua=e=>()=>e;function cs(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:s,y:l,dx:u,dy:f,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:h}})}cs.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Gp(e){return!e.ctrlKey&&!e.button}function Zp(){return this.parentNode}function Qp(e,t){return t??{x:e.x,y:e.y}}function Jp(){return navigator.maxTouchPoints||"ontouchstart"in this}function eg(){var e=Gp,t=Zp,n=Qp,r=Jp,o={},i=qa("start","drag","end"),s=0,l,u,f,h,p=0;function y(T){T.on("mousedown.drag",w).filter(r).on("touchstart.drag",N).on("touchmove.drag",C,Xp).on("touchend.drag touchcancel.drag",R).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(T,U){if(!(h||!e.call(this,T,U))){var q=I(this,t.call(this,T,U),T,U,"mouse");q&&(Ut(T.view).on("mousemove.drag",S,xo).on("mouseup.drag",_,xo),Xu(T.view),Wi(T),f=!1,l=T.clientX,u=T.clientY,q("start",T))}}function S(T){if(Rr(T),!f){var U=T.clientX-l,q=T.clientY-u;f=U*U+q*q>p}o.mouse("drag",T)}function _(T){Ut(T.view).on("mousemove.drag mouseup.drag",null),Gu(T.view,f),Rr(T),o.mouse("end",T)}function N(T,U){if(e.call(this,T,U)){var q=T.changedTouches,V=t.call(this,T,U),J=q.length,X,ee;for(X=0;X<J;++X)(ee=I(this,V,T,U,q[X].identifier,q[X]))&&(Wi(T),ee("start",T,q[X]))}}function C(T){var U=T.changedTouches,q=U.length,V,J;for(V=0;V<q;++V)(J=o[U[V].identifier])&&(Rr(T),J("drag",T,U[V]))}function R(T){var U=T.changedTouches,q=U.length,V,J;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),V=0;V<q;++V)(J=o[U[V].identifier])&&(Wi(T),J("end",T,U[V]))}function I(T,U,q,V,J,X){var ee=i.copy(),K=Jt(X||q,U),re,se,k;if((k=n.call(T,new cs("beforestart",{sourceEvent:q,target:y,identifier:J,active:s,x:K[0],y:K[1],dx:0,dy:0,dispatch:ee}),V))!=null)return re=k.x-K[0]||0,se=k.y-K[1]||0,function M(j,G,ae){var P=K,Q;switch(j){case"start":o[J]=M,Q=s++;break;case"end":delete o[J],--s;case"drag":K=Jt(ae||G,U),Q=s;break}ee.call(j,T,new cs(j,{sourceEvent:G,subject:k,target:y,identifier:J,active:Q,x:K[0]+re,y:K[1]+se,dx:K[0]-P[0],dy:K[1]-P[1],dispatch:ee}),V)}}return y.filter=function(T){return arguments.length?(e=typeof T=="function"?T:ua(!!T),y):e},y.container=function(T){return arguments.length?(t=typeof T=="function"?T:ua(T),y):t},y.subject=function(T){return arguments.length?(n=typeof T=="function"?T:ua(T),y):n},y.touchable=function(T){return arguments.length?(r=typeof T=="function"?T:ua(!!T),y):r},y.on=function(){var T=i.on.apply(i,arguments);return T===i?y:T},y.clickDistance=function(T){return arguments.length?(p=(T=+T)*T,y):Math.sqrt(p)},y}function tc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Zu(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ao(){}var So=.7,Oa=1/So,Lr="\\s*([+-]?\\d+)\\s*",_o="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",mn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tg=/^#([0-9a-f]{3,8})$/,ng=new RegExp(`^rgb\\(${Lr},${Lr},${Lr}\\)$`),rg=new RegExp(`^rgb\\(${mn},${mn},${mn}\\)$`),og=new RegExp(`^rgba\\(${Lr},${Lr},${Lr},${_o}\\)$`),ag=new RegExp(`^rgba\\(${mn},${mn},${mn},${_o}\\)$`),ig=new RegExp(`^hsl\\(${_o},${mn},${mn}\\)$`),sg=new RegExp(`^hsla\\(${_o},${mn},${mn},${_o}\\)$`),ll={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};tc(Ao,ko,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ul,formatHex:ul,formatHex8:cg,formatHsl:lg,formatRgb:dl,toString:dl});function ul(){return this.rgb().formatHex()}function cg(){return this.rgb().formatHex8()}function lg(){return Qu(this).formatHsl()}function dl(){return this.rgb().formatRgb()}function ko(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=tg.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?fl(t):n===3?new Ft(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?da(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?da(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ng.exec(e))?new Ft(t[1],t[2],t[3],1):(t=rg.exec(e))?new Ft(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=og.exec(e))?da(t[1],t[2],t[3],t[4]):(t=ag.exec(e))?da(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ig.exec(e))?pl(t[1],t[2]/100,t[3]/100,1):(t=sg.exec(e))?pl(t[1],t[2]/100,t[3]/100,t[4]):ll.hasOwnProperty(e)?fl(ll[e]):e==="transparent"?new Ft(NaN,NaN,NaN,0):null}function fl(e){return new Ft(e>>16&255,e>>8&255,e&255,1)}function da(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ft(e,t,n,r)}function ug(e){return e instanceof Ao||(e=ko(e)),e?(e=e.rgb(),new Ft(e.r,e.g,e.b,e.opacity)):new Ft}function ls(e,t,n,r){return arguments.length===1?ug(e):new Ft(e,t,n,r??1)}function Ft(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}tc(Ft,ls,Zu(Ao,{brighter(e){return e=e==null?Oa:Math.pow(Oa,e),new Ft(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?So:Math.pow(So,e),new Ft(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ft(hr(this.r),hr(this.g),hr(this.b),ja(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hl,formatHex:hl,formatHex8:dg,formatRgb:ml,toString:ml}));function hl(){return`#${ur(this.r)}${ur(this.g)}${ur(this.b)}`}function dg(){return`#${ur(this.r)}${ur(this.g)}${ur(this.b)}${ur((isNaN(this.opacity)?1:this.opacity)*255)}`}function ml(){const e=ja(this.opacity);return`${e===1?"rgb(":"rgba("}${hr(this.r)}, ${hr(this.g)}, ${hr(this.b)}${e===1?")":`, ${e})`}`}function ja(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function hr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ur(e){return e=hr(e),(e<16?"0":"")+e.toString(16)}function pl(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new en(e,t,n,r)}function Qu(e){if(e instanceof en)return new en(e.h,e.s,e.l,e.opacity);if(e instanceof Ao||(e=ko(e)),!e)return new en;if(e instanceof en)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),s=NaN,l=i-o,u=(i+o)/2;return l?(t===i?s=(n-r)/l+(n<r)*6:n===i?s=(r-t)/l+2:s=(t-n)/l+4,l/=u<.5?i+o:2-i-o,s*=60):l=u>0&&u<1?0:s,new en(s,l,u,e.opacity)}function fg(e,t,n,r){return arguments.length===1?Qu(e):new en(e,t,n,r??1)}function en(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}tc(en,fg,Zu(Ao,{brighter(e){return e=e==null?Oa:Math.pow(Oa,e),new en(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?So:Math.pow(So,e),new en(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Ft(Bi(e>=240?e-240:e+120,o,r),Bi(e,o,r),Bi(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new en(gl(this.h),fa(this.s),fa(this.l),ja(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ja(this.opacity);return`${e===1?"hsl(":"hsla("}${gl(this.h)}, ${fa(this.s)*100}%, ${fa(this.l)*100}%${e===1?")":`, ${e})`}`}}));function gl(e){return e=(e||0)%360,e<0?e+360:e}function fa(e){return Math.max(0,Math.min(1,e||0))}function Bi(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ju=e=>()=>e;function hg(e,t){return function(n){return e+n*t}}function mg(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function pg(e){return(e=+e)==1?ed:function(t,n){return n-t?mg(t,n,e):Ju(isNaN(t)?n:t)}}function ed(e,t){var n=t-e;return n?hg(e,n):Ju(isNaN(e)?t:e)}const yl=function e(t){var n=pg(t);function r(o,i){var s=n((o=ls(o)).r,(i=ls(i)).r),l=n(o.g,i.g),u=n(o.b,i.b),f=ed(o.opacity,i.opacity);return function(h){return o.r=s(h),o.g=l(h),o.b=u(h),o.opacity=f(h),o+""}}return r.gamma=e,r}(1);function Vn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var us=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hi=new RegExp(us.source,"g");function gg(e){return function(){return e}}function yg(e){return function(t){return e(t)+""}}function vg(e,t){var n=us.lastIndex=Hi.lastIndex=0,r,o,i,s=-1,l=[],u=[];for(e=e+"",t=t+"";(r=us.exec(e))&&(o=Hi.exec(t));)(i=o.index)>n&&(i=t.slice(n,i),l[s]?l[s]+=i:l[++s]=i),(r=r[0])===(o=o[0])?l[s]?l[s]+=o:l[++s]=o:(l[++s]=null,u.push({i:s,x:Vn(r,o)})),n=Hi.lastIndex;return n<t.length&&(i=t.slice(n),l[s]?l[s]+=i:l[++s]=i),l.length<2?u[0]?yg(u[0].x):gg(t):(t=u.length,function(f){for(var h=0,p;h<t;++h)l[(p=u[h]).i]=p.x(f);return l.join("")})}var vl=180/Math.PI,ds={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function td(e,t,n,r,o,i){var s,l,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),e*r<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*vl,skewX:Math.atan(u)*vl,scaleX:s,scaleY:l}}var ha;function wg(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ds:td(t.a,t.b,t.c,t.d,t.e,t.f)}function bg(e){return e==null||(ha||(ha=document.createElementNS("http://www.w3.org/2000/svg","g")),ha.setAttribute("transform",e),!(e=ha.transform.baseVal.consolidate()))?ds:(e=e.matrix,td(e.a,e.b,e.c,e.d,e.e,e.f))}function nd(e,t,n,r){function o(f){return f.length?f.pop()+" ":""}function i(f,h,p,y,w,S){if(f!==p||h!==y){var _=w.push("translate(",null,t,null,n);S.push({i:_-4,x:Vn(f,p)},{i:_-2,x:Vn(h,y)})}else(p||y)&&w.push("translate("+p+t+y+n)}function s(f,h,p,y){f!==h?(f-h>180?h+=360:h-f>180&&(f+=360),y.push({i:p.push(o(p)+"rotate(",null,r)-2,x:Vn(f,h)})):h&&p.push(o(p)+"rotate("+h+r)}function l(f,h,p,y){f!==h?y.push({i:p.push(o(p)+"skewX(",null,r)-2,x:Vn(f,h)}):h&&p.push(o(p)+"skewX("+h+r)}function u(f,h,p,y,w,S){if(f!==p||h!==y){var _=w.push(o(w)+"scale(",null,",",null,")");S.push({i:_-4,x:Vn(f,p)},{i:_-2,x:Vn(h,y)})}else(p!==1||y!==1)&&w.push(o(w)+"scale("+p+","+y+")")}return function(f,h){var p=[],y=[];return f=e(f),h=e(h),i(f.translateX,f.translateY,h.translateX,h.translateY,p,y),s(f.rotate,h.rotate,p,y),l(f.skewX,h.skewX,p,y),u(f.scaleX,f.scaleY,h.scaleX,h.scaleY,p,y),f=h=null,function(w){for(var S=-1,_=y.length,N;++S<_;)p[(N=y[S]).i]=N.x(w);return p.join("")}}}var xg=nd(wg,"px, ","px)","deg)"),Sg=nd(bg,", ",")",")"),_g=1e-12;function wl(e){return((e=Math.exp(e))+1/e)/2}function kg(e){return((e=Math.exp(e))-1/e)/2}function Eg(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ng=function e(t,n,r){function o(i,s){var l=i[0],u=i[1],f=i[2],h=s[0],p=s[1],y=s[2],w=h-l,S=p-u,_=w*w+S*S,N,C;if(_<_g)C=Math.log(y/f)/t,N=function(V){return[l+V*w,u+V*S,f*Math.exp(t*V*C)]};else{var R=Math.sqrt(_),I=(y*y-f*f+r*_)/(2*f*n*R),T=(y*y-f*f-r*_)/(2*y*n*R),U=Math.log(Math.sqrt(I*I+1)-I),q=Math.log(Math.sqrt(T*T+1)-T);C=(q-U)/t,N=function(V){var J=V*C,X=wl(U),ee=f/(n*R)*(X*Eg(t*J+U)-kg(U));return[l+ee*w,u+ee*S,f*X/wl(t*J+U)]}}return N.duration=C*1e3*t/Math.SQRT2,N}return o.rho=function(i){var s=Math.max(.001,+i),l=s*s,u=l*l;return e(s,l,u)},o}(Math.SQRT2,2,4);var Hr=0,mo=0,ao=0,rd=1e3,Pa,po,Ma=0,vr=0,Ua=0,Eo=typeof performance=="object"&&performance.now?performance:Date,od=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function nc(){return vr||(od(Cg),vr=Eo.now()+Ua)}function Cg(){vr=0}function Ia(){this._call=this._time=this._next=null}Ia.prototype=ad.prototype={constructor:Ia,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?nc():+n)+(t==null?0:+t),!this._next&&po!==this&&(po?po._next=this:Pa=this,po=this),this._call=e,this._time=n,fs()},stop:function(){this._call&&(this._call=null,this._time=1/0,fs())}};function ad(e,t,n){var r=new Ia;return r.restart(e,t,n),r}function Tg(){nc(),++Hr;for(var e=Pa,t;e;)(t=vr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Hr}function bl(){vr=(Ma=Eo.now())+Ua,Hr=mo=0;try{Tg()}finally{Hr=0,Og(),vr=0}}function Dg(){var e=Eo.now(),t=e-Ma;t>rd&&(Ua-=t,Ma=e)}function Og(){for(var e,t=Pa,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Pa=n);po=e,fs(r)}function fs(e){if(!Hr){mo&&(mo=clearTimeout(mo));var t=e-vr;t>24?(e<1/0&&(mo=setTimeout(bl,e-Eo.now()-Ua)),ao&&(ao=clearInterval(ao))):(ao||(Ma=Eo.now(),ao=setInterval(Dg,rd)),Hr=1,od(bl))}}function xl(e,t,n){var r=new Ia;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var jg=qa("start","end","cancel","interrupt"),Pg=[],id=0,Sl=1,hs=2,Ea=3,_l=4,ms=5,Na=6;function Xa(e,t,n,r,o,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Mg(e,n,{name:t,index:r,group:o,on:jg,tween:Pg,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:id})}function rc(e,t){var n=rn(e,t);if(n.state>id)throw new Error("too late; already scheduled");return n}function pn(e,t){var n=rn(e,t);if(n.state>Ea)throw new Error("too late; already running");return n}function rn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Mg(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=ad(i,0,n.time);function i(f){n.state=Sl,n.timer.restart(s,n.delay,n.time),n.delay<=f&&s(f-n.delay)}function s(f){var h,p,y,w;if(n.state!==Sl)return u();for(h in r)if(w=r[h],w.name===n.name){if(w.state===Ea)return xl(s);w.state===_l?(w.state=Na,w.timer.stop(),w.on.call("interrupt",e,e.__data__,w.index,w.group),delete r[h]):+h<t&&(w.state=Na,w.timer.stop(),w.on.call("cancel",e,e.__data__,w.index,w.group),delete r[h])}if(xl(function(){n.state===Ea&&(n.state=_l,n.timer.restart(l,n.delay,n.time),l(f))}),n.state=hs,n.on.call("start",e,e.__data__,n.index,n.group),n.state===hs){for(n.state=Ea,o=new Array(y=n.tween.length),h=0,p=-1;h<y;++h)(w=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(o[++p]=w);o.length=p+1}}function l(f){for(var h=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(u),n.state=ms,1),p=-1,y=o.length;++p<y;)o[p].call(e,h);n.state===ms&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Na,n.timer.stop(),delete r[t];for(var f in r)return;delete e.__transition}}function Ca(e,t){var n=e.__transition,r,o,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){i=!1;continue}o=r.state>hs&&r.state<ms,r.state=Na,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}i&&delete e.__transition}}function Ig(e){return this.each(function(){Ca(this,e)})}function Ag(e,t){var n,r;return function(){var o=pn(this,e),i=o.tween;if(i!==n){r=n=i;for(var s=0,l=r.length;s<l;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}o.tween=r}}function $g(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=pn(this,e),s=i.tween;if(s!==r){o=(r=s).slice();for(var l={name:t,value:n},u=0,f=o.length;u<f;++u)if(o[u].name===t){o[u]=l;break}u===f&&o.push(l)}i.tween=o}}function Rg(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=rn(this.node(),n).tween,o=0,i=r.length,s;o<i;++o)if((s=r[o]).name===e)return s.value;return null}return this.each((t==null?Ag:$g)(n,e,t))}function oc(e,t,n){var r=e._id;return e.each(function(){var o=pn(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return rn(o,r).value[t]}}function sd(e,t){var n;return(typeof t=="number"?Vn:t instanceof ko?yl:(n=ko(t))?(t=n,yl):vg)(e,t)}function Lg(e){return function(){this.removeAttribute(e)}}function Fg(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Wg(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttribute(e);return s===o?null:s===r?i:i=t(r=s,n)}}function Bg(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===r?i:i=t(r=s,n)}}function Hg(e,t,n){var r,o,i;return function(){var s,l=n(this),u;return l==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=l+"",s===u?null:s===r&&u===o?i:(o=u,i=t(r=s,l)))}}function zg(e,t,n){var r,o,i;return function(){var s,l=n(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=l+"",s===u?null:s===r&&u===o?i:(o=u,i=t(r=s,l)))}}function Yg(e,t){var n=Ka(e),r=n==="transform"?Sg:sd;return this.attrTween(e,typeof t=="function"?(n.local?zg:Hg)(n,r,oc(this,"attr."+e,t)):t==null?(n.local?Fg:Lg)(n):(n.local?Bg:Wg)(n,r,t))}function Vg(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function qg(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Kg(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&qg(e,i)),n}return o._value=t,o}function Ug(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Vg(e,i)),n}return o._value=t,o}function Xg(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Ka(e);return this.tween(n,(r.local?Kg:Ug)(r,t))}function Gg(e,t){return function(){rc(this,e).delay=+t.apply(this,arguments)}}function Zg(e,t){return t=+t,function(){rc(this,e).delay=t}}function Qg(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Gg:Zg)(t,e)):rn(this.node(),t).delay}function Jg(e,t){return function(){pn(this,e).duration=+t.apply(this,arguments)}}function ey(e,t){return t=+t,function(){pn(this,e).duration=t}}function ty(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Jg:ey)(t,e)):rn(this.node(),t).duration}function ny(e,t){if(typeof t!="function")throw new Error;return function(){pn(this,e).ease=t}}function ry(e){var t=this._id;return arguments.length?this.each(ny(t,e)):rn(this.node(),t).ease}function oy(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;pn(this,e).ease=n}}function ay(e){if(typeof e!="function")throw new Error;return this.each(oy(this._id,e))}function iy(e){typeof e!="function"&&(e=Fu(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,l=r[o]=[],u,f=0;f<s;++f)(u=i[f])&&e.call(u,u.__data__,f,i)&&l.push(u);return new On(r,this._parents,this._name,this._id)}function sy(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),s=new Array(r),l=0;l<i;++l)for(var u=t[l],f=n[l],h=u.length,p=s[l]=new Array(h),y,w=0;w<h;++w)(y=u[w]||f[w])&&(p[w]=y);for(;l<r;++l)s[l]=t[l];return new On(s,this._parents,this._name,this._id)}function cy(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function ly(e,t,n){var r,o,i=cy(t)?rc:pn;return function(){var s=i(this,e),l=s.on;l!==r&&(o=(r=l).copy()).on(t,n),s.on=o}}function uy(e,t){var n=this._id;return arguments.length<2?rn(this.node(),n).on.on(e):this.each(ly(n,e,t))}function dy(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function fy(){return this.on("end.remove",dy(this._id))}function hy(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Js(e));for(var r=this._groups,o=r.length,i=new Array(o),s=0;s<o;++s)for(var l=r[s],u=l.length,f=i[s]=new Array(u),h,p,y=0;y<u;++y)(h=l[y])&&(p=e.call(h,h.__data__,y,l))&&("__data__"in h&&(p.__data__=h.__data__),f[y]=p,Xa(f[y],t,n,y,f,rn(h,n)));return new On(i,this._parents,t,n)}function my(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Lu(e));for(var r=this._groups,o=r.length,i=[],s=[],l=0;l<o;++l)for(var u=r[l],f=u.length,h,p=0;p<f;++p)if(h=u[p]){for(var y=e.call(h,h.__data__,p,u),w,S=rn(h,n),_=0,N=y.length;_<N;++_)(w=y[_])&&Xa(w,t,n,_,y,S);i.push(y),s.push(h)}return new On(i,s,t,n)}var py=Io.prototype.constructor;function gy(){return new py(this._groups,this._parents)}function yy(e,t){var n,r,o;return function(){var i=Br(this,e),s=(this.style.removeProperty(e),Br(this,e));return i===s?null:i===n&&s===r?o:o=t(n=i,r=s)}}function cd(e){return function(){this.style.removeProperty(e)}}function vy(e,t,n){var r,o=n+"",i;return function(){var s=Br(this,e);return s===o?null:s===r?i:i=t(r=s,n)}}function wy(e,t,n){var r,o,i;return function(){var s=Br(this,e),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),Br(this,e))),s===u?null:s===r&&u===o?i:(o=u,i=t(r=s,l))}}function by(e,t){var n,r,o,i="style."+t,s="end."+i,l;return function(){var u=pn(this,e),f=u.on,h=u.value[i]==null?l||(l=cd(t)):void 0;(f!==n||o!==h)&&(r=(n=f).copy()).on(s,o=h),u.on=r}}function xy(e,t,n){var r=(e+="")=="transform"?xg:sd;return t==null?this.styleTween(e,yy(e,r)).on("end.style."+e,cd(e)):typeof t=="function"?this.styleTween(e,wy(e,r,oc(this,"style."+e,t))).each(by(this._id,e)):this.styleTween(e,vy(e,r,t),n).on("end.style."+e,null)}function Sy(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function _y(e,t,n){var r,o;function i(){var s=t.apply(this,arguments);return s!==o&&(r=(o=s)&&Sy(e,s,n)),r}return i._value=t,i}function ky(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,_y(e,t,n??""))}function Ey(e){return function(){this.textContent=e}}function Ny(e){return function(){var t=e(this);this.textContent=t??""}}function Cy(e){return this.tween("text",typeof e=="function"?Ny(oc(this,"text",e)):Ey(e==null?"":e+""))}function Ty(e){return function(t){this.textContent=e.call(this,t)}}function Dy(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&Ty(o)),t}return r._value=e,r}function Oy(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Dy(e))}function jy(){for(var e=this._name,t=this._id,n=ld(),r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],l=s.length,u,f=0;f<l;++f)if(u=s[f]){var h=rn(u,t);Xa(u,e,n,f,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new On(r,this._parents,e,n)}function Py(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,s){var l={value:s},u={value:function(){--o===0&&i()}};n.each(function(){var f=pn(this,r),h=f.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),f.on=t}),o===0&&i()})}var My=0;function On(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function ld(){return++My}var kn=Io.prototype;On.prototype={constructor:On,select:hy,selectAll:my,selectChild:kn.selectChild,selectChildren:kn.selectChildren,filter:iy,merge:sy,selection:gy,transition:jy,call:kn.call,nodes:kn.nodes,node:kn.node,size:kn.size,empty:kn.empty,each:kn.each,on:uy,attr:Yg,attrTween:Xg,style:xy,styleTween:ky,text:Cy,textTween:Oy,remove:fy,tween:Rg,delay:Qg,duration:ty,ease:ry,easeVarying:ay,end:Py,[Symbol.iterator]:kn[Symbol.iterator]};function Iy(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Ay={time:null,delay:0,duration:250,ease:Iy};function $y(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Ry(e){var t,n;e instanceof On?(t=e._id,e=e._name):(t=ld(),(n=Ay).time=nc(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],l=s.length,u,f=0;f<l;++f)(u=s[f])&&Xa(u,e,t,f,s,n||$y(u,t));return new On(r,this._parents,e,t)}Io.prototype.interrupt=Ig;Io.prototype.transition=Ry;const ma=e=>()=>e;function Ly(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Cn(e,t,n){this.k=e,this.x=t,this.y=n}Cn.prototype={constructor:Cn,scale:function(e){return e===1?this:new Cn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Cn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Tn=new Cn(1,0,0);Cn.prototype;function zi(e){e.stopImmediatePropagation()}function io(e){e.preventDefault(),e.stopImmediatePropagation()}function Fy(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Wy(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function kl(){return this.__zoom||Tn}function By(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Hy(){return navigator.maxTouchPoints||"ontouchstart"in this}function zy(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function ud(){var e=Fy,t=Wy,n=zy,r=By,o=Hy,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],l=250,u=Ng,f=qa("start","zoom","end"),h,p,y,w=500,S=150,_=0,N=10;function C(k){k.property("__zoom",kl).on("wheel.zoom",J,{passive:!1}).on("mousedown.zoom",X).on("dblclick.zoom",ee).filter(o).on("touchstart.zoom",K).on("touchmove.zoom",re).on("touchend.zoom touchcancel.zoom",se).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}C.transform=function(k,M,j,G){var ae=k.selection?k.selection():k;ae.property("__zoom",kl),k!==ae?U(k,M,j,G):ae.interrupt().each(function(){q(this,arguments).event(G).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},C.scaleBy=function(k,M,j,G){C.scaleTo(k,function(){var ae=this.__zoom.k,P=typeof M=="function"?M.apply(this,arguments):M;return ae*P},j,G)},C.scaleTo=function(k,M,j,G){C.transform(k,function(){var ae=t.apply(this,arguments),P=this.__zoom,Q=j==null?T(ae):typeof j=="function"?j.apply(this,arguments):j,oe=P.invert(Q),ie=typeof M=="function"?M.apply(this,arguments):M;return n(I(R(P,ie),Q,oe),ae,s)},j,G)},C.translateBy=function(k,M,j,G){C.transform(k,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof j=="function"?j.apply(this,arguments):j),t.apply(this,arguments),s)},null,G)},C.translateTo=function(k,M,j,G,ae){C.transform(k,function(){var P=t.apply(this,arguments),Q=this.__zoom,oe=G==null?T(P):typeof G=="function"?G.apply(this,arguments):G;return n(Tn.translate(oe[0],oe[1]).scale(Q.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof j=="function"?-j.apply(this,arguments):-j),P,s)},G,ae)};function R(k,M){return M=Math.max(i[0],Math.min(i[1],M)),M===k.k?k:new Cn(M,k.x,k.y)}function I(k,M,j){var G=M[0]-j[0]*k.k,ae=M[1]-j[1]*k.k;return G===k.x&&ae===k.y?k:new Cn(k.k,G,ae)}function T(k){return[(+k[0][0]+ +k[1][0])/2,(+k[0][1]+ +k[1][1])/2]}function U(k,M,j,G){k.on("start.zoom",function(){q(this,arguments).event(G).start()}).on("interrupt.zoom end.zoom",function(){q(this,arguments).event(G).end()}).tween("zoom",function(){var ae=this,P=arguments,Q=q(ae,P).event(G),oe=t.apply(ae,P),ie=j==null?T(oe):typeof j=="function"?j.apply(ae,P):j,de=Math.max(oe[1][0]-oe[0][0],oe[1][1]-oe[0][1]),ye=ae.__zoom,_e=typeof M=="function"?M.apply(ae,P):M,De=u(ye.invert(ie).concat(de/ye.k),_e.invert(ie).concat(de/_e.k));return function(Oe){if(Oe===1)Oe=_e;else{var Ie=De(Oe),fe=de/Ie[2];Oe=new Cn(fe,ie[0]-Ie[0]*fe,ie[1]-Ie[1]*fe)}Q.zoom(null,Oe)}})}function q(k,M,j){return!j&&k.__zooming||new V(k,M)}function V(k,M){this.that=k,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(k,M),this.taps=0}V.prototype={event:function(k){return k&&(this.sourceEvent=k),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(k,M){return this.mouse&&k!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&k!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&k!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(k){var M=Ut(this.that).datum();f.call(k,this.that,new Ly(k,{sourceEvent:this.sourceEvent,target:C,type:k,transform:this.that.__zoom,dispatch:f}),M)}};function J(k,...M){if(!e.apply(this,arguments))return;var j=q(this,M).event(k),G=this.__zoom,ae=Math.max(i[0],Math.min(i[1],G.k*Math.pow(2,r.apply(this,arguments)))),P=Jt(k);if(j.wheel)(j.mouse[0][0]!==P[0]||j.mouse[0][1]!==P[1])&&(j.mouse[1]=G.invert(j.mouse[0]=P)),clearTimeout(j.wheel);else{if(G.k===ae)return;j.mouse=[P,G.invert(P)],Ca(this),j.start()}io(k),j.wheel=setTimeout(Q,S),j.zoom("mouse",n(I(R(G,ae),j.mouse[0],j.mouse[1]),j.extent,s));function Q(){j.wheel=null,j.end()}}function X(k,...M){if(y||!e.apply(this,arguments))return;var j=k.currentTarget,G=q(this,M,!0).event(k),ae=Ut(k.view).on("mousemove.zoom",ie,!0).on("mouseup.zoom",de,!0),P=Jt(k,j),Q=k.clientX,oe=k.clientY;Xu(k.view),zi(k),G.mouse=[P,this.__zoom.invert(P)],Ca(this),G.start();function ie(ye){if(io(ye),!G.moved){var _e=ye.clientX-Q,De=ye.clientY-oe;G.moved=_e*_e+De*De>_}G.event(ye).zoom("mouse",n(I(G.that.__zoom,G.mouse[0]=Jt(ye,j),G.mouse[1]),G.extent,s))}function de(ye){ae.on("mousemove.zoom mouseup.zoom",null),Gu(ye.view,G.moved),io(ye),G.event(ye).end()}}function ee(k,...M){if(e.apply(this,arguments)){var j=this.__zoom,G=Jt(k.changedTouches?k.changedTouches[0]:k,this),ae=j.invert(G),P=j.k*(k.shiftKey?.5:2),Q=n(I(R(j,P),G,ae),t.apply(this,M),s);io(k),l>0?Ut(this).transition().duration(l).call(U,Q,G,k):Ut(this).call(C.transform,Q,G,k)}}function K(k,...M){if(e.apply(this,arguments)){var j=k.touches,G=j.length,ae=q(this,M,k.changedTouches.length===G).event(k),P,Q,oe,ie;for(zi(k),Q=0;Q<G;++Q)oe=j[Q],ie=Jt(oe,this),ie=[ie,this.__zoom.invert(ie),oe.identifier],ae.touch0?!ae.touch1&&ae.touch0[2]!==ie[2]&&(ae.touch1=ie,ae.taps=0):(ae.touch0=ie,P=!0,ae.taps=1+!!h);h&&(h=clearTimeout(h)),P&&(ae.taps<2&&(p=ie[0],h=setTimeout(function(){h=null},w)),Ca(this),ae.start())}}function re(k,...M){if(this.__zooming){var j=q(this,M).event(k),G=k.changedTouches,ae=G.length,P,Q,oe,ie;for(io(k),P=0;P<ae;++P)Q=G[P],oe=Jt(Q,this),j.touch0&&j.touch0[2]===Q.identifier?j.touch0[0]=oe:j.touch1&&j.touch1[2]===Q.identifier&&(j.touch1[0]=oe);if(Q=j.that.__zoom,j.touch1){var de=j.touch0[0],ye=j.touch0[1],_e=j.touch1[0],De=j.touch1[1],Oe=(Oe=_e[0]-de[0])*Oe+(Oe=_e[1]-de[1])*Oe,Ie=(Ie=De[0]-ye[0])*Ie+(Ie=De[1]-ye[1])*Ie;Q=R(Q,Math.sqrt(Oe/Ie)),oe=[(de[0]+_e[0])/2,(de[1]+_e[1])/2],ie=[(ye[0]+De[0])/2,(ye[1]+De[1])/2]}else if(j.touch0)oe=j.touch0[0],ie=j.touch0[1];else return;j.zoom("touch",n(I(Q,oe,ie),j.extent,s))}}function se(k,...M){if(this.__zooming){var j=q(this,M).event(k),G=k.changedTouches,ae=G.length,P,Q;for(zi(k),y&&clearTimeout(y),y=setTimeout(function(){y=null},w),P=0;P<ae;++P)Q=G[P],j.touch0&&j.touch0[2]===Q.identifier?delete j.touch0:j.touch1&&j.touch1[2]===Q.identifier&&delete j.touch1;if(j.touch1&&!j.touch0&&(j.touch0=j.touch1,delete j.touch1),j.touch0)j.touch0[1]=this.__zoom.invert(j.touch0[0]);else if(j.end(),j.taps===2&&(Q=Jt(Q,this),Math.hypot(p[0]-Q[0],p[1]-Q[1])<N)){var oe=Ut(this).on("dblclick.zoom");oe&&oe.apply(this,arguments)}}}return C.wheelDelta=function(k){return arguments.length?(r=typeof k=="function"?k:ma(+k),C):r},C.filter=function(k){return arguments.length?(e=typeof k=="function"?k:ma(!!k),C):e},C.touchable=function(k){return arguments.length?(o=typeof k=="function"?k:ma(!!k),C):o},C.extent=function(k){return arguments.length?(t=typeof k=="function"?k:ma([[+k[0][0],+k[0][1]],[+k[1][0],+k[1][1]]]),C):t},C.scaleExtent=function(k){return arguments.length?(i[0]=+k[0],i[1]=+k[1],C):[i[0],i[1]]},C.translateExtent=function(k){return arguments.length?(s[0][0]=+k[0][0],s[1][0]=+k[1][0],s[0][1]=+k[0][1],s[1][1]=+k[1][1],C):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},C.constrain=function(k){return arguments.length?(n=k,C):n},C.duration=function(k){return arguments.length?(l=+k,C):l},C.interpolate=function(k){return arguments.length?(u=k,C):u},C.on=function(){var k=f.on.apply(f,arguments);return k===f?C:k},C.clickDistance=function(k){return arguments.length?(_=(k=+k)*k,C):Math.sqrt(_)},C.tapDistance=function(k){return arguments.length?(N=+k,C):N},C}const Ga=b.createContext(null),Yy=Ga.Provider,jn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},dd=jn.error001();function tt(e,t){const n=b.useContext(Ga);if(n===null)throw new Error(dd);return $u(n,e,t)}const wt=()=>{const e=b.useContext(Ga);if(e===null)throw new Error(dd);return b.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Vy=e=>e.userSelectionActive?"none":"all";function No({position:e,children:t,className:n,style:r,...o}){const i=tt(Vy),s=`${e}`.split("-");return B.createElement("div",{className:kt(["react-flow__panel",n,...s]),style:{...r,pointerEvents:i},...o},t)}function qy({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:B.createElement(No,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},B.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Ky=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:i={},labelBgPadding:s=[2,4],labelBgBorderRadius:l=2,children:u,className:f,...h})=>{const p=b.useRef(null),[y,w]=b.useState({x:0,y:0,width:0,height:0}),S=kt(["react-flow__edge-textwrapper",f]);return b.useEffect(()=>{if(p.current){const _=p.current.getBBox();w({x:_.x,y:_.y,width:_.width,height:_.height})}},[n]),typeof n>"u"||!n?null:B.createElement("g",{transform:`translate(${e-y.width/2} ${t-y.height/2})`,className:S,visibility:y.width?"visible":"hidden",...h},o&&B.createElement("rect",{width:y.width+2*s[0],x:-s[0],y:-s[1],height:y.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:l,ry:l}),B.createElement("text",{className:"react-flow__edge-text",y:y.height/2,dy:"0.3em",ref:p,style:r},n),u)};var Uy=b.memo(Ky);const ac=e=>({width:e.offsetWidth,height:e.offsetHeight}),zr=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ic=(e={x:0,y:0},t)=>({x:zr(e.x,t[0][0],t[1][0]),y:zr(e.y,t[0][1],t[1][1])}),El=(e,t,n)=>e<t?zr(Math.abs(e-t),1,50)/50:e>n?-zr(Math.abs(e-n),1,50)/50:0,fd=(e,t)=>{const n=El(e.x,35,t.width-35)*20,r=El(e.y,35,t.height-35)*20;return[n,r]},hd=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},md=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Co=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),pd=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Nl=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Xy=(e,t)=>pd(md(Co(e),Co(t))),ps=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Gy=e=>Xt(e.width)&&Xt(e.height)&&Xt(e.x)&&Xt(e.y),Xt=e=>!isNaN(e)&&isFinite(e),dt=Symbol.for("internals"),gd=["Enter"," ","Escape"],Zy=(e,t)=>{},Qy=e=>"nativeEvent"in e;function gs(e){var o,i;const t=Qy(e)?e.nativeEvent:e,n=((i=(o=t.composedPath)==null?void 0:o.call(t))==null?void 0:i[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const yd=e=>"clientX"in e,Zn=(e,t)=>{var i,s;const n=yd(e),r=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,o=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},Aa=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},$o=({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:y,interactionWidth:w=20})=>B.createElement(B.Fragment,null,B.createElement("path",{id:e,style:h,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:p,markerStart:y}),w&&B.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:w,className:"react-flow__edge-interaction"}),o&&Xt(n)&&Xt(r)?B.createElement(Uy,{x:n,y:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f}):null);$o.displayName="BaseEdge";function so(e,t,n){return n===void 0?n:r=>{const o=t().edges.find(i=>i.id===e);o&&n(r,{...o})}}function vd({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,i=n<e?n+o:n-o,s=Math.abs(r-t)/2,l=r<t?r+s:r-s;return[i,l,o,s]}function wd({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:s,targetControlY:l}){const u=e*.125+o*.375+s*.375+n*.125,f=t*.125+i*.375+l*.375+r*.125,h=Math.abs(u-e),p=Math.abs(f-t);return[u,f,h,p]}var wr;(function(e){e.Strict="strict",e.Loose="loose"})(wr||(wr={}));var dr;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(dr||(dr={}));var To;(function(e){e.Partial="partial",e.Full="full"})(To||(To={}));var Kn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Kn||(Kn={}));var $a;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})($a||($a={}));var je;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(je||(je={}));function Cl({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===je.Left||e===je.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function bd({sourceX:e,sourceY:t,sourcePosition:n=je.Bottom,targetX:r,targetY:o,targetPosition:i=je.Top}){const[s,l]=Cl({pos:n,x1:e,y1:t,x2:r,y2:o}),[u,f]=Cl({pos:i,x1:r,y1:o,x2:e,y2:t}),[h,p,y,w]=wd({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:l,targetControlX:u,targetControlY:f});return[`M${e},${t} C${s},${l} ${u},${f} ${r},${o}`,h,p,y,w]}const sc=b.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=je.Bottom,targetPosition:i=je.Top,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:y,markerEnd:w,markerStart:S,interactionWidth:_})=>{const[N,C,R]=bd({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:i});return B.createElement($o,{path:N,labelX:C,labelY:R,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:y,markerEnd:w,markerStart:S,interactionWidth:_})});sc.displayName="SimpleBezierEdge";const Tl={[je.Left]:{x:-1,y:0},[je.Right]:{x:1,y:0},[je.Top]:{x:0,y:-1},[je.Bottom]:{x:0,y:1}},Jy=({source:e,sourcePosition:t=je.Bottom,target:n})=>t===je.Left||t===je.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Dl=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function e0({source:e,sourcePosition:t=je.Bottom,target:n,targetPosition:r=je.Top,center:o,offset:i}){const s=Tl[t],l=Tl[r],u={x:e.x+s.x*i,y:e.y+s.y*i},f={x:n.x+l.x*i,y:n.y+l.y*i},h=Jy({source:u,sourcePosition:t,target:f}),p=h.x!==0?"x":"y",y=h[p];let w=[],S,_;const N={x:0,y:0},C={x:0,y:0},[R,I,T,U]=vd({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[p]*l[p]===-1){S=o.x??R,_=o.y??I;const V=[{x:S,y:u.y},{x:S,y:f.y}],J=[{x:u.x,y:_},{x:f.x,y:_}];s[p]===y?w=p==="x"?V:J:w=p==="x"?J:V}else{const V=[{x:u.x,y:f.y}],J=[{x:f.x,y:u.y}];if(p==="x"?w=s.x===y?J:V:w=s.y===y?V:J,t===r){const se=Math.abs(e[p]-n[p]);if(se<=i){const k=Math.min(i-1,i-se);s[p]===y?N[p]=(u[p]>e[p]?-1:1)*k:C[p]=(f[p]>n[p]?-1:1)*k}}if(t!==r){const se=p==="x"?"y":"x",k=s[p]===l[se],M=u[se]>f[se],j=u[se]<f[se];(s[p]===1&&(!k&&M||k&&j)||s[p]!==1&&(!k&&j||k&&M))&&(w=p==="x"?V:J)}const X={x:u.x+N.x,y:u.y+N.y},ee={x:f.x+C.x,y:f.y+C.y},K=Math.max(Math.abs(X.x-w[0].x),Math.abs(ee.x-w[0].x)),re=Math.max(Math.abs(X.y-w[0].y),Math.abs(ee.y-w[0].y));K>=re?(S=(X.x+ee.x)/2,_=w[0].y):(S=w[0].x,_=(X.y+ee.y)/2)}return[[e,{x:u.x+N.x,y:u.y+N.y},...w,{x:f.x+C.x,y:f.y+C.y},n],S,_,T,U]}function t0(e,t,n,r){const o=Math.min(Dl(e,t)/2,Dl(t,n)/2,r),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){const f=e.x<n.x?-1:1,h=e.y<n.y?1:-1;return`L ${i+o*f},${s}Q ${i},${s} ${i},${s+o*h}`}const l=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${i},${s+o*u}Q ${i},${s} ${i+o*l},${s}`}function ys({sourceX:e,sourceY:t,sourcePosition:n=je.Bottom,targetX:r,targetY:o,targetPosition:i=je.Top,borderRadius:s=5,centerX:l,centerY:u,offset:f=20}){const[h,p,y,w,S]=e0({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:l,y:u},offset:f});return[h.reduce((N,C,R)=>{let I="";return R>0&&R<h.length-1?I=t0(h[R-1],C,h[R+1],s):I=`${R===0?"M":"L"}${C.x} ${C.y}`,N+=I,N},""),p,y,w,S]}const Za=b.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:h,sourcePosition:p=je.Bottom,targetPosition:y=je.Top,markerEnd:w,markerStart:S,pathOptions:_,interactionWidth:N})=>{const[C,R,I]=ys({sourceX:e,sourceY:t,sourcePosition:p,targetX:n,targetY:r,targetPosition:y,borderRadius:_==null?void 0:_.borderRadius,offset:_==null?void 0:_.offset});return B.createElement($o,{path:C,labelX:R,labelY:I,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:h,markerEnd:w,markerStart:S,interactionWidth:N})});Za.displayName="SmoothStepEdge";const cc=b.memo(e=>{var t;return B.createElement(Za,{...e,pathOptions:b.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});cc.displayName="StepEdge";function n0({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,i,s,l]=vd({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,i,s,l]}const lc=b.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:y,interactionWidth:w})=>{const[S,_,N]=n0({sourceX:e,sourceY:t,targetX:n,targetY:r});return B.createElement($o,{path:S,labelX:_,labelY:N,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:y,interactionWidth:w})});lc.displayName="StraightEdge";function pa(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ol({pos:e,x1:t,y1:n,x2:r,y2:o,c:i}){switch(e){case je.Left:return[t-pa(t-r,i),n];case je.Right:return[t+pa(r-t,i),n];case je.Top:return[t,n-pa(n-o,i)];case je.Bottom:return[t,n+pa(o-n,i)]}}function xd({sourceX:e,sourceY:t,sourcePosition:n=je.Bottom,targetX:r,targetY:o,targetPosition:i=je.Top,curvature:s=.25}){const[l,u]=Ol({pos:n,x1:e,y1:t,x2:r,y2:o,c:s}),[f,h]=Ol({pos:i,x1:r,y1:o,x2:e,y2:t,c:s}),[p,y,w,S]=wd({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:l,sourceControlY:u,targetControlX:f,targetControlY:h});return[`M${e},${t} C${l},${u} ${f},${h} ${r},${o}`,p,y,w,S]}const Ra=b.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=je.Bottom,targetPosition:i=je.Top,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:y,markerEnd:w,markerStart:S,pathOptions:_,interactionWidth:N})=>{const[C,R,I]=xd({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:i,curvature:_==null?void 0:_.curvature});return B.createElement($o,{path:C,labelX:R,labelY:I,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:y,markerEnd:w,markerStart:S,interactionWidth:N})});Ra.displayName="BezierEdge";const uc=b.createContext(null),r0=uc.Provider;uc.Consumer;const o0=()=>b.useContext(uc),a0=e=>"id"in e&&"source"in e&&"target"in e,i0=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,vs=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,s0=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),c0=(e,t)=>{if(!e.source||!e.target)return t;let n;return a0(e)?n={...e}:n={...e,id:i0(e)},s0(n,t)?t:t.concat(n)},ws=({x:e,y:t},[n,r,o],i,[s,l])=>{const u={x:(e-n)/o,y:(t-r)/o};return i?{x:s*Math.round(u.x/s),y:l*Math.round(u.y/l)}:u},Sd=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),mr=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],o={x:e.position.x-n,y:e.position.y-r};return{...o,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:o}},Qa=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const{x:i,y:s}=mr(o,t).positionAbsolute;return md(r,Co({x:i,y:s,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return pd(n)},_d=(e,t,[n,r,o]=[0,0,1],i=!1,s=!1,l=[0,0])=>{const u={x:(t.x-n)/o,y:(t.y-r)/o,width:t.width/o,height:t.height/o},f=[];return e.forEach(h=>{const{width:p,height:y,selectable:w=!0,hidden:S=!1}=h;if(s&&!w||S)return!1;const{positionAbsolute:_}=mr(h,l),N={x:_.x,y:_.y,width:p||0,height:y||0},C=ps(u,N),R=typeof p>"u"||typeof y>"u"||p===null||y===null,I=i&&C>0,T=(p||0)*(y||0);(R||I||C>=T||h.dragging)&&f.push(h)}),f},kd=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},Ed=(e,t,n,r,o,i=.1)=>{const s=t/(e.width*(1+i)),l=n/(e.height*(1+i)),u=Math.min(s,l),f=zr(u,r,o),h=e.x+e.width/2,p=e.y+e.height/2,y=t/2-h*f,w=n/2-p*f;return{x:y,y:w,zoom:f}},ir=(e,t=0)=>e.transition().duration(t);function jl(e,t,n,r){return(t[n]||[]).reduce((o,i)=>{var s,l;return`${e.id}-${i.id}-${n}`!==r&&o.push({id:i.id||null,type:n,nodeId:e.id,x:(((s=e.positionAbsolute)==null?void 0:s.x)??0)+i.x+i.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+i.y+i.height/2}),o},[])}function l0(e,t,n,r,o,i){const{x:s,y:l}=Zn(e),f=t.elementsFromPoint(s,l).find(S=>S.classList.contains("react-flow__handle"));if(f){const S=f.getAttribute("data-nodeid");if(S){const _=dc(void 0,f),N=f.getAttribute("data-handleid"),C=i({nodeId:S,id:N,type:_});if(C){const R=o.find(I=>I.nodeId===S&&I.type===_&&I.id===N);return{handle:{id:N,type:_,nodeId:S,x:(R==null?void 0:R.x)||n.x,y:(R==null?void 0:R.y)||n.y},validHandleResult:C}}}}let h=[],p=1/0;if(o.forEach(S=>{const _=Math.sqrt((S.x-n.x)**2+(S.y-n.y)**2);if(_<=r){const N=i(S);_<=p&&(_<p?h=[{handle:S,validHandleResult:N}]:_===p&&h.push({handle:S,validHandleResult:N}),p=_)}}),!h.length)return{handle:null,validHandleResult:Nd()};if(h.length===1)return h[0];const y=h.some(({validHandleResult:S})=>S.isValid),w=h.some(({handle:S})=>S.type==="target");return h.find(({handle:S,validHandleResult:_})=>w?S.type==="target":y?_.isValid:!0)||h[0]}const u0={source:null,target:null,sourceHandle:null,targetHandle:null},Nd=()=>({handleDomNode:null,isValid:!1,connection:u0,endHandle:null});function Cd(e,t,n,r,o,i,s){const l=o==="target",u=s.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),f={...Nd(),handleDomNode:u};if(u){const h=dc(void 0,u),p=u.getAttribute("data-nodeid"),y=u.getAttribute("data-handleid"),w=u.classList.contains("connectable"),S=u.classList.contains("connectableend"),_={source:l?p:n,sourceHandle:l?y:r,target:l?n:p,targetHandle:l?r:y};f.connection=_,w&&S&&(t===wr.Strict?l&&h==="source"||!l&&h==="target":p!==n||y!==r)&&(f.endHandle={nodeId:p,handleId:y,type:h},f.isValid=i(_))}return f}function d0({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((o,i)=>{if(i[dt]){const{handleBounds:s}=i[dt];let l=[],u=[];s&&(l=jl(i,s,"source",`${t}-${n}-${r}`),u=jl(i,s,"target",`${t}-${n}-${r}`)),o.push(...l,...u)}return o},[])}function dc(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Yi(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function f0(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Td({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:o,getState:i,setState:s,isValidConnection:l,edgeUpdaterType:u,onReconnectEnd:f}){const h=hd(e.target),{connectionMode:p,domNode:y,autoPanOnConnect:w,connectionRadius:S,onConnectStart:_,panBy:N,getNodes:C,cancelConnection:R}=i();let I=0,T;const{x:U,y:q}=Zn(e),V=h==null?void 0:h.elementFromPoint(U,q),J=dc(u,V),X=y==null?void 0:y.getBoundingClientRect();if(!X||!J)return;let ee,K=Zn(e,X),re=!1,se=null,k=!1,M=null;const j=d0({nodes:C(),nodeId:n,handleId:t,handleType:J}),G=()=>{if(!w)return;const[Q,oe]=fd(K,X);N({x:Q,y:oe}),I=requestAnimationFrame(G)};s({connectionPosition:K,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:J,connectionStartHandle:{nodeId:n,handleId:t,type:J},connectionEndHandle:null}),_==null||_(e,{nodeId:n,handleId:t,handleType:J});function ae(Q){const{transform:oe}=i();K=Zn(Q,X);const{handle:ie,validHandleResult:de}=l0(Q,h,ws(K,oe,!1,[1,1]),S,j,ye=>Cd(ye,p,n,t,o?"target":"source",l,h));if(T=ie,re||(G(),re=!0),M=de.handleDomNode,se=de.connection,k=de.isValid,s({connectionPosition:T&&k?Sd({x:T.x,y:T.y},oe):K,connectionStatus:f0(!!T,k),connectionEndHandle:de.endHandle}),!T&&!k&&!M)return Yi(ee);se.source!==se.target&&M&&(Yi(ee),ee=M,M.classList.add("connecting","react-flow__handle-connecting"),M.classList.toggle("valid",k),M.classList.toggle("react-flow__handle-valid",k))}function P(Q){var oe,ie;(T||M)&&se&&k&&(r==null||r(se)),(ie=(oe=i()).onConnectEnd)==null||ie.call(oe,Q),u&&(f==null||f(Q)),Yi(ee),R(),cancelAnimationFrame(I),re=!1,k=!1,se=null,M=null,h.removeEventListener("mousemove",ae),h.removeEventListener("mouseup",P),h.removeEventListener("touchmove",ae),h.removeEventListener("touchend",P)}h.addEventListener("mousemove",ae),h.addEventListener("mouseup",P),h.addEventListener("touchmove",ae),h.addEventListener("touchend",P)}const Pl=()=>!0,h0=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),m0=(e,t,n)=>r=>{const{connectionStartHandle:o,connectionEndHandle:i,connectionClickStartHandle:s}=r;return{connecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n||(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n}},Dd=b.forwardRef(({type:e="source",position:t=je.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:i=!0,id:s,onConnect:l,children:u,className:f,onMouseDown:h,onTouchStart:p,...y},w)=>{var X,ee;const S=s||null,_=e==="target",N=wt(),C=o0(),{connectOnClick:R,noPanClassName:I}=tt(h0,St),{connecting:T,clickConnecting:U}=tt(m0(C,S,e),St);C||(ee=(X=N.getState()).onError)==null||ee.call(X,"010",jn.error010());const q=K=>{const{defaultEdgeOptions:re,onConnect:se,hasDefaultEdges:k}=N.getState(),M={...re,...K};if(k){const{edges:j,setEdges:G}=N.getState();G(c0(M,j))}se==null||se(M),l==null||l(M)},V=K=>{if(!C)return;const re=yd(K);o&&(re&&K.button===0||!re)&&Td({event:K,handleId:S,nodeId:C,onConnect:q,isTarget:_,getState:N.getState,setState:N.setState,isValidConnection:n||N.getState().isValidConnection||Pl}),re?h==null||h(K):p==null||p(K)},J=K=>{const{onClickConnectStart:re,onClickConnectEnd:se,connectionClickStartHandle:k,connectionMode:M,isValidConnection:j}=N.getState();if(!C||!k&&!o)return;if(!k){re==null||re(K,{nodeId:C,handleId:S,handleType:e}),N.setState({connectionClickStartHandle:{nodeId:C,type:e,handleId:S}});return}const G=hd(K.target),ae=n||j||Pl,{connection:P,isValid:Q}=Cd({nodeId:C,id:S,type:e},M,k.nodeId,k.handleId||null,k.type,ae,G);Q&&q(P),se==null||se(K),N.setState({connectionClickStartHandle:null})};return B.createElement("div",{"data-handleid":S,"data-nodeid":C,"data-handlepos":t,"data-id":`${C}-${S}-${e}`,className:kt(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",I,f,{source:!_,target:_,connectable:r,connectablestart:o,connectableend:i,connecting:U,connectionindicator:r&&(o&&!T||i&&T)}]),onMouseDown:V,onTouchStart:V,onClick:R?J:void 0,ref:w,...y},u)});Dd.displayName="Handle";var Xn=b.memo(Dd);const Od=({data:e,isConnectable:t,targetPosition:n=je.Top,sourcePosition:r=je.Bottom})=>B.createElement(B.Fragment,null,B.createElement(Xn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,B.createElement(Xn,{type:"source",position:r,isConnectable:t}));Od.displayName="DefaultNode";var bs=b.memo(Od);const jd=({data:e,isConnectable:t,sourcePosition:n=je.Bottom})=>B.createElement(B.Fragment,null,e==null?void 0:e.label,B.createElement(Xn,{type:"source",position:n,isConnectable:t}));jd.displayName="InputNode";var Pd=b.memo(jd);const Md=({data:e,isConnectable:t,targetPosition:n=je.Top})=>B.createElement(B.Fragment,null,B.createElement(Xn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);Md.displayName="OutputNode";var Id=b.memo(Md);const fc=()=>null;fc.displayName="GroupNode";const p0=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),ga=e=>e.id;function g0(e,t){return St(e.selectedNodes.map(ga),t.selectedNodes.map(ga))&&St(e.selectedEdges.map(ga),t.selectedEdges.map(ga))}const Ad=b.memo(({onSelectionChange:e})=>{const t=wt(),{selectedNodes:n,selectedEdges:r}=tt(p0,g0);return b.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChange.forEach(i=>i(o))},[n,r,e]),null});Ad.displayName="SelectionListener";const y0=e=>!!e.onSelectionChange;function v0({onSelectionChange:e}){const t=tt(y0);return e||t?B.createElement(Ad,{onSelectionChange:e}):null}const w0=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Tr(e,t){b.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Ve(e,t,n){b.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const b0=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:i,onConnectEnd:s,onClickConnectStart:l,onClickConnectEnd:u,nodesDraggable:f,nodesConnectable:h,nodesFocusable:p,edgesFocusable:y,edgesUpdatable:w,elevateNodesOnSelect:S,minZoom:_,maxZoom:N,nodeExtent:C,onNodesChange:R,onEdgesChange:I,elementsSelectable:T,connectionMode:U,snapGrid:q,snapToGrid:V,translateExtent:J,connectOnClick:X,defaultEdgeOptions:ee,fitView:K,fitViewOptions:re,onNodesDelete:se,onEdgesDelete:k,onNodeDrag:M,onNodeDragStart:j,onNodeDragStop:G,onSelectionDrag:ae,onSelectionDragStart:P,onSelectionDragStop:Q,noPanClassName:oe,nodeOrigin:ie,rfId:de,autoPanOnConnect:ye,autoPanOnNodeDrag:_e,onError:De,connectionRadius:Oe,isValidConnection:Ie,nodeDragThreshold:fe})=>{const{setNodes:Re,setEdges:Ze,setDefaultNodesAndEdges:Pe,setMinZoom:Qe,setMaxZoom:Le,setTranslateExtent:Be,setNodeExtent:Ue,reset:He}=tt(w0,St),Te=wt();return b.useEffect(()=>{const ut=r==null?void 0:r.map(yt=>({...yt,...ee}));return Pe(n,ut),()=>{He()}},[]),Ve("defaultEdgeOptions",ee,Te.setState),Ve("connectionMode",U,Te.setState),Ve("onConnect",o,Te.setState),Ve("onConnectStart",i,Te.setState),Ve("onConnectEnd",s,Te.setState),Ve("onClickConnectStart",l,Te.setState),Ve("onClickConnectEnd",u,Te.setState),Ve("nodesDraggable",f,Te.setState),Ve("nodesConnectable",h,Te.setState),Ve("nodesFocusable",p,Te.setState),Ve("edgesFocusable",y,Te.setState),Ve("edgesUpdatable",w,Te.setState),Ve("elementsSelectable",T,Te.setState),Ve("elevateNodesOnSelect",S,Te.setState),Ve("snapToGrid",V,Te.setState),Ve("snapGrid",q,Te.setState),Ve("onNodesChange",R,Te.setState),Ve("onEdgesChange",I,Te.setState),Ve("connectOnClick",X,Te.setState),Ve("fitViewOnInit",K,Te.setState),Ve("fitViewOnInitOptions",re,Te.setState),Ve("onNodesDelete",se,Te.setState),Ve("onEdgesDelete",k,Te.setState),Ve("onNodeDrag",M,Te.setState),Ve("onNodeDragStart",j,Te.setState),Ve("onNodeDragStop",G,Te.setState),Ve("onSelectionDrag",ae,Te.setState),Ve("onSelectionDragStart",P,Te.setState),Ve("onSelectionDragStop",Q,Te.setState),Ve("noPanClassName",oe,Te.setState),Ve("nodeOrigin",ie,Te.setState),Ve("rfId",de,Te.setState),Ve("autoPanOnConnect",ye,Te.setState),Ve("autoPanOnNodeDrag",_e,Te.setState),Ve("onError",De,Te.setState),Ve("connectionRadius",Oe,Te.setState),Ve("isValidConnection",Ie,Te.setState),Ve("nodeDragThreshold",fe,Te.setState),Tr(e,Re),Tr(t,Ze),Tr(_,Qe),Tr(N,Le),Tr(J,Be),Tr(C,Ue),null},Ml={display:"none"},x0={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},$d="react-flow__node-desc",Rd="react-flow__edge-desc",S0="react-flow__aria-live",_0=e=>e.ariaLiveMessage;function k0({rfId:e}){const t=tt(_0);return B.createElement("div",{id:`${S0}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:x0},t)}function E0({rfId:e,disableKeyboardA11y:t}){return B.createElement(B.Fragment,null,B.createElement("div",{id:`${$d}-${e}`,style:Ml},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),B.createElement("div",{id:`${Rd}-${e}`,style:Ml},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&B.createElement(k0,{rfId:e}))}var Do=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=b.useState(!1),o=b.useRef(!1),i=b.useRef(new Set([])),[s,l]=b.useMemo(()=>{if(e!==null){const f=(Array.isArray(e)?e:[e]).filter(p=>typeof p=="string").map(p=>p.split("+")),h=f.reduce((p,y)=>p.concat(...y),[]);return[f,h]}return[[],[]]},[e]);return b.useEffect(()=>{const u=typeof document<"u"?document:null,f=(t==null?void 0:t.target)||u;if(e!==null){const h=w=>{if(o.current=w.ctrlKey||w.metaKey||w.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&gs(w))return!1;const _=Al(w.code,l);i.current.add(w[_]),Il(s,i.current,!1)&&(w.preventDefault(),r(!0))},p=w=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&gs(w))return!1;const _=Al(w.code,l);Il(s,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(w[_]),w.key==="Meta"&&i.current.clear(),o.current=!1},y=()=>{i.current.clear(),r(!1)};return f==null||f.addEventListener("keydown",h),f==null||f.addEventListener("keyup",p),window.addEventListener("blur",y),()=>{f==null||f.removeEventListener("keydown",h),f==null||f.removeEventListener("keyup",p),window.removeEventListener("blur",y)}}},[e,r]),n};function Il(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function Al(e,t){return t.includes(e)?"code":"key"}function Ld(e,t,n,r){var l,u;const o=e.parentNode||e.parentId;if(!o)return n;const i=t.get(o),s=mr(i,r);return Ld(i,t,{x:(n.x??0)+s.x,y:(n.y??0)+s.y,z:(((l=i[dt])==null?void 0:l.z)??0)>(n.z??0)?((u=i[dt])==null?void 0:u.z)??0:n.z??0},r)}function Fd(e,t,n){e.forEach(r=>{var i;const o=r.parentNode||r.parentId;if(o&&!e.has(o))throw new Error(`Parent node ${o} not found`);if(o||n!=null&&n[r.id]){const{x:s,y:l,z:u}=Ld(r,e,{...r.position,z:((i=r[dt])==null?void 0:i.z)??0},t);r.positionAbsolute={x:s,y:l},r[dt].z=u,n!=null&&n[r.id]&&(r[dt].isParent=!0)}})}function Vi(e,t,n,r){const o=new Map,i={},s=r?1e3:0;return e.forEach(l=>{var w;const u=(Xt(l.zIndex)?l.zIndex:0)+(l.selected?s:0),f=t.get(l.id),h={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},p=l.parentNode||l.parentId;p&&(i[p]=!0);const y=(f==null?void 0:f.type)&&(f==null?void 0:f.type)!==l.type;Object.defineProperty(h,dt,{enumerable:!1,value:{handleBounds:y||(w=f==null?void 0:f[dt])==null?void 0:w.handleBounds,z:u}}),o.set(l.id,h)}),Fd(o,n,i),o}function Wd(e,t={}){const{getNodes:n,width:r,height:o,minZoom:i,maxZoom:s,d3Zoom:l,d3Selection:u,fitViewOnInitDone:f,fitViewOnInit:h,nodeOrigin:p}=e(),y=t.initial&&!f&&h;if(l&&u&&(y||!t.initial)){const S=n().filter(N=>{var R;const C=t.includeHiddenNodes?N.width&&N.height:!N.hidden;return(R=t.nodes)!=null&&R.length?C&&t.nodes.some(I=>I.id===N.id):C}),_=S.every(N=>N.width&&N.height);if(S.length>0&&_){const N=Qa(S,p),{x:C,y:R,zoom:I}=Ed(N,r,o,t.minZoom??i,t.maxZoom??s,t.padding??.1),T=Tn.translate(C,R).scale(I);return typeof t.duration=="number"&&t.duration>0?l.transform(ir(u,t.duration),T):l.transform(u,T),!0}}return!1}function N0(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[dt]:r[dt],selected:n.selected})}),new Map(t)}function C0(e,t){return t.map(n=>{const r=e.find(o=>o.id===n.id);return r&&(n.selected=r.selected),n})}function ya({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:o,edges:i,onNodesChange:s,onEdgesChange:l,hasDefaultNodes:u,hasDefaultEdges:f}=n();e!=null&&e.length&&(u&&r({nodeInternals:N0(e,o)}),s==null||s(e)),t!=null&&t.length&&(f&&r({edges:C0(t,i)}),l==null||l(t))}const Dr=()=>{},T0={zoomIn:Dr,zoomOut:Dr,zoomTo:Dr,getZoom:()=>1,setViewport:Dr,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Dr,fitBounds:Dr,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},D0=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),O0=()=>{const e=wt(),{d3Zoom:t,d3Selection:n}=tt(D0,St);return b.useMemo(()=>n&&t?{zoomIn:o=>t.scaleBy(ir(n,o==null?void 0:o.duration),1.2),zoomOut:o=>t.scaleBy(ir(n,o==null?void 0:o.duration),1/1.2),zoomTo:(o,i)=>t.scaleTo(ir(n,i==null?void 0:i.duration),o),getZoom:()=>e.getState().transform[2],setViewport:(o,i)=>{const[s,l,u]=e.getState().transform,f=Tn.translate(o.x??s,o.y??l).scale(o.zoom??u);t.transform(ir(n,i==null?void 0:i.duration),f)},getViewport:()=>{const[o,i,s]=e.getState().transform;return{x:o,y:i,zoom:s}},fitView:o=>Wd(e.getState,o),setCenter:(o,i,s)=>{const{width:l,height:u,maxZoom:f}=e.getState(),h=typeof(s==null?void 0:s.zoom)<"u"?s.zoom:f,p=l/2-o*h,y=u/2-i*h,w=Tn.translate(p,y).scale(h);t.transform(ir(n,s==null?void 0:s.duration),w)},fitBounds:(o,i)=>{const{width:s,height:l,minZoom:u,maxZoom:f}=e.getState(),{x:h,y:p,zoom:y}=Ed(o,s,l,u,f,(i==null?void 0:i.padding)??.1),w=Tn.translate(h,p).scale(y);t.transform(ir(n,i==null?void 0:i.duration),w)},project:o=>{const{transform:i,snapToGrid:s,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),ws(o,i,s,l)},screenToFlowPosition:o=>{const{transform:i,snapToGrid:s,snapGrid:l,domNode:u}=e.getState();if(!u)return o;const{x:f,y:h}=u.getBoundingClientRect(),p={x:o.x-f,y:o.y-h};return ws(p,i,s,l)},flowToScreenPosition:o=>{const{transform:i,domNode:s}=e.getState();if(!s)return o;const{x:l,y:u}=s.getBoundingClientRect(),f=Sd(o,i);return{x:f.x+l,y:f.y+u}},viewportInitialized:!0}:T0,[t,n])};function hc(){const e=O0(),t=wt(),n=b.useCallback(()=>t.getState().getNodes().map(_=>({..._})),[]),r=b.useCallback(_=>t.getState().nodeInternals.get(_),[]),o=b.useCallback(()=>{const{edges:_=[]}=t.getState();return _.map(N=>({...N}))},[]),i=b.useCallback(_=>{const{edges:N=[]}=t.getState();return N.find(C=>C.id===_)},[]),s=b.useCallback(_=>{const{getNodes:N,setNodes:C,hasDefaultNodes:R,onNodesChange:I}=t.getState(),T=N(),U=typeof _=="function"?_(T):_;if(R)C(U);else if(I){const q=U.length===0?T.map(V=>({type:"remove",id:V.id})):U.map(V=>({item:V,type:"reset"}));I(q)}},[]),l=b.useCallback(_=>{const{edges:N=[],setEdges:C,hasDefaultEdges:R,onEdgesChange:I}=t.getState(),T=typeof _=="function"?_(N):_;if(R)C(T);else if(I){const U=T.length===0?N.map(q=>({type:"remove",id:q.id})):T.map(q=>({item:q,type:"reset"}));I(U)}},[]),u=b.useCallback(_=>{const N=Array.isArray(_)?_:[_],{getNodes:C,setNodes:R,hasDefaultNodes:I,onNodesChange:T}=t.getState();if(I){const q=[...C(),...N];R(q)}else if(T){const U=N.map(q=>({item:q,type:"add"}));T(U)}},[]),f=b.useCallback(_=>{const N=Array.isArray(_)?_:[_],{edges:C=[],setEdges:R,hasDefaultEdges:I,onEdgesChange:T}=t.getState();if(I)R([...C,...N]);else if(T){const U=N.map(q=>({item:q,type:"add"}));T(U)}},[]),h=b.useCallback(()=>{const{getNodes:_,edges:N=[],transform:C}=t.getState(),[R,I,T]=C;return{nodes:_().map(U=>({...U})),edges:N.map(U=>({...U})),viewport:{x:R,y:I,zoom:T}}},[]),p=b.useCallback(({nodes:_,edges:N})=>{const{nodeInternals:C,getNodes:R,edges:I,hasDefaultNodes:T,hasDefaultEdges:U,onNodesDelete:q,onEdgesDelete:V,onNodesChange:J,onEdgesChange:X}=t.getState(),ee=(_||[]).map(M=>M.id),K=(N||[]).map(M=>M.id),re=R().reduce((M,j)=>{const G=j.parentNode||j.parentId,ae=!ee.includes(j.id)&&G&&M.find(Q=>Q.id===G);return(typeof j.deletable=="boolean"?j.deletable:!0)&&(ee.includes(j.id)||ae)&&M.push(j),M},[]),se=I.filter(M=>typeof M.deletable=="boolean"?M.deletable:!0),k=se.filter(M=>K.includes(M.id));if(re||k){const M=kd(re,se),j=[...k,...M],G=j.reduce((ae,P)=>(ae.includes(P.id)||ae.push(P.id),ae),[]);if((U||T)&&(U&&t.setState({edges:I.filter(ae=>!G.includes(ae.id))}),T&&(re.forEach(ae=>{C.delete(ae.id)}),t.setState({nodeInternals:new Map(C)}))),G.length>0&&(V==null||V(j),X&&X(G.map(ae=>({id:ae,type:"remove"})))),re.length>0&&(q==null||q(re),J)){const ae=re.map(P=>({id:P.id,type:"remove"}));J(ae)}}},[]),y=b.useCallback(_=>{const N=Gy(_),C=N?null:t.getState().nodeInternals.get(_.id);return!N&&!C?[null,null,N]:[N?_:Nl(C),C,N]},[]),w=b.useCallback((_,N=!0,C)=>{const[R,I,T]=y(_);return R?(C||t.getState().getNodes()).filter(U=>{if(!T&&(U.id===I.id||!U.positionAbsolute))return!1;const q=Nl(U),V=ps(q,R);return N&&V>0||V>=R.width*R.height}):[]},[]),S=b.useCallback((_,N,C=!0)=>{const[R]=y(_);if(!R)return!1;const I=ps(R,N);return C&&I>0||I>=R.width*R.height},[]);return b.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:o,getEdge:i,setNodes:s,setEdges:l,addNodes:u,addEdges:f,toObject:h,deleteElements:p,getIntersectingNodes:w,isNodeIntersecting:S}),[e,n,r,o,i,s,l,u,f,h,p,w,S])}const j0={actInsideInputWithModifier:!1};var P0=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=wt(),{deleteElements:r}=hc(),o=Do(e,j0),i=Do(t);b.useEffect(()=>{if(o){const{edges:s,getNodes:l}=n.getState(),u=l().filter(h=>h.selected),f=s.filter(h=>h.selected);r({nodes:u,edges:f}),n.setState({nodesSelectionActive:!1})}},[o]),b.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])};function M0(e){const t=wt();b.useEffect(()=>{let n;const r=()=>{var i,s;if(!e.current)return;const o=ac(e.current);(o.height===0||o.width===0)&&((s=(i=t.getState()).onError)==null||s.call(i,"004",jn.error004())),t.setState({width:o.width||500,height:o.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const mc={position:"absolute",width:"100%",height:"100%",top:0,left:0},I0=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,va=e=>({x:e.x,y:e.y,zoom:e.k}),Or=(e,t)=>e.target.closest(`.${t}`),$l=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Rl=e=>{const t=e.ctrlKey&&Aa()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},A0=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),$0=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:o=!0,zoomOnPinch:i=!0,panOnScroll:s=!1,panOnScrollSpeed:l=.5,panOnScrollMode:u=dr.Free,zoomOnDoubleClick:f=!0,elementsSelectable:h,panOnDrag:p=!0,defaultViewport:y,translateExtent:w,minZoom:S,maxZoom:_,zoomActivationKeyCode:N,preventScrolling:C=!0,children:R,noWheelClassName:I,noPanClassName:T})=>{const U=b.useRef(),q=wt(),V=b.useRef(!1),J=b.useRef(!1),X=b.useRef(null),ee=b.useRef({x:0,y:0,zoom:0}),{d3Zoom:K,d3Selection:re,d3ZoomHandler:se,userSelectionActive:k}=tt(A0,St),M=Do(N),j=b.useRef(0),G=b.useRef(!1),ae=b.useRef();return M0(X),b.useEffect(()=>{if(X.current){const P=X.current.getBoundingClientRect(),Q=ud().scaleExtent([S,_]).translateExtent(w),oe=Ut(X.current).call(Q),ie=Tn.translate(y.x,y.y).scale(zr(y.zoom,S,_)),de=[[0,0],[P.width,P.height]],ye=Q.constrain()(ie,de,w);Q.transform(oe,ye),Q.wheelDelta(Rl),q.setState({d3Zoom:Q,d3Selection:oe,d3ZoomHandler:oe.on("wheel.zoom"),transform:[ye.x,ye.y,ye.k],domNode:X.current.closest(".react-flow")})}},[]),b.useEffect(()=>{re&&K&&(s&&!M&&!k?re.on("wheel.zoom",P=>{if(Or(P,I))return!1;P.preventDefault(),P.stopImmediatePropagation();const Q=re.property("__zoom").k||1;if(P.ctrlKey&&i){const Ie=Jt(P),fe=Rl(P),Re=Q*Math.pow(2,fe);K.scaleTo(re,Re,Ie,P);return}const oe=P.deltaMode===1?20:1;let ie=u===dr.Vertical?0:P.deltaX*oe,de=u===dr.Horizontal?0:P.deltaY*oe;!Aa()&&P.shiftKey&&u!==dr.Vertical&&(ie=P.deltaY*oe,de=0),K.translateBy(re,-(ie/Q)*l,-(de/Q)*l,{internal:!0});const ye=va(re.property("__zoom")),{onViewportChangeStart:_e,onViewportChange:De,onViewportChangeEnd:Oe}=q.getState();clearTimeout(ae.current),G.current||(G.current=!0,t==null||t(P,ye),_e==null||_e(ye)),G.current&&(e==null||e(P,ye),De==null||De(ye),ae.current=setTimeout(()=>{n==null||n(P,ye),Oe==null||Oe(ye),G.current=!1},150))},{passive:!1}):typeof se<"u"&&re.on("wheel.zoom",function(P,Q){if(!C&&P.type==="wheel"&&!P.ctrlKey||Or(P,I))return null;P.preventDefault(),se.call(this,P,Q)},{passive:!1}))},[k,s,u,re,K,se,M,i,C,I,t,e,n]),b.useEffect(()=>{K&&K.on("start",P=>{var ie,de;if(!P.sourceEvent||P.sourceEvent.internal)return null;j.current=(ie=P.sourceEvent)==null?void 0:ie.button;const{onViewportChangeStart:Q}=q.getState(),oe=va(P.transform);V.current=!0,ee.current=oe,((de=P.sourceEvent)==null?void 0:de.type)==="mousedown"&&q.setState({paneDragging:!0}),Q==null||Q(oe),t==null||t(P.sourceEvent,oe)})},[K,t]),b.useEffect(()=>{K&&(k&&!V.current?K.on("zoom",null):k||K.on("zoom",P=>{var oe;const{onViewportChange:Q}=q.getState();if(q.setState({transform:[P.transform.x,P.transform.y,P.transform.k]}),J.current=!!(r&&$l(p,j.current??0)),(e||Q)&&!((oe=P.sourceEvent)!=null&&oe.internal)){const ie=va(P.transform);Q==null||Q(ie),e==null||e(P.sourceEvent,ie)}}))},[k,K,e,p,r]),b.useEffect(()=>{K&&K.on("end",P=>{if(!P.sourceEvent||P.sourceEvent.internal)return null;const{onViewportChangeEnd:Q}=q.getState();if(V.current=!1,q.setState({paneDragging:!1}),r&&$l(p,j.current??0)&&!J.current&&r(P.sourceEvent),J.current=!1,(n||Q)&&I0(ee.current,P.transform)){const oe=va(P.transform);ee.current=oe,clearTimeout(U.current),U.current=setTimeout(()=>{Q==null||Q(oe),n==null||n(P.sourceEvent,oe)},s?150:0)}})},[K,s,p,n,r]),b.useEffect(()=>{K&&K.filter(P=>{const Q=M||o,oe=i&&P.ctrlKey;if((p===!0||Array.isArray(p)&&p.includes(1))&&P.button===1&&P.type==="mousedown"&&(Or(P,"react-flow__node")||Or(P,"react-flow__edge")))return!0;if(!p&&!Q&&!s&&!f&&!i||k||!f&&P.type==="dblclick"||Or(P,I)&&P.type==="wheel"||Or(P,T)&&(P.type!=="wheel"||s&&P.type==="wheel"&&!M)||!i&&P.ctrlKey&&P.type==="wheel"||!Q&&!s&&!oe&&P.type==="wheel"||!p&&(P.type==="mousedown"||P.type==="touchstart")||Array.isArray(p)&&!p.includes(P.button)&&P.type==="mousedown")return!1;const ie=Array.isArray(p)&&p.includes(P.button)||!P.button||P.button<=1;return(!P.ctrlKey||P.type==="wheel")&&ie})},[k,K,o,i,s,f,p,h,M]),B.createElement("div",{className:"react-flow__renderer",ref:X,style:mc},R)},R0=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function L0(){const{userSelectionActive:e,userSelectionRect:t}=tt(R0,St);return e&&t?B.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Ll(e,t){const n=t.parentNode||t.parentId,r=e.find(o=>o.id===n);if(r){const o=t.position.x+t.width-r.width,i=t.position.y+t.height-r.height;if(o>0||i>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,o>0&&(r.style.width+=o),i>0&&(r.style.height+=i),t.position.x<0){const s=Math.abs(t.position.x);r.position.x=r.position.x-s,r.style.width+=s,t.position.x=0}if(t.position.y<0){const s=Math.abs(t.position.y);r.position.y=r.position.y-s,r.style.height+=s,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function F0(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,o)=>{const i=e.filter(l=>l.id===o.id);if(i.length===0)return r.push(o),r;const s={...o};for(const l of i)if(l)switch(l.type){case"select":{s.selected=l.selected;break}case"position":{typeof l.position<"u"&&(s.position=l.position),typeof l.positionAbsolute<"u"&&(s.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(s.dragging=l.dragging),s.expandParent&&Ll(r,s);break}case"dimensions":{typeof l.dimensions<"u"&&(s.width=l.dimensions.width,s.height=l.dimensions.height),typeof l.updateStyle<"u"&&(s.style={...s.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(s.resizing=l.resizing),s.expandParent&&Ll(r,s);break}case"remove":return r}return r.push(s),r},n)}function Bd(e,t){return F0(e,t)}const qn=(e,t)=>({id:e,type:"select",selected:t});function Ir(e,t){return e.reduce((n,r)=>{const o=t.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(qn(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(qn(r.id,!1))),n},[])}const qi=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},W0=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Hd=b.memo(({isSelecting:e,selectionMode:t=To.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:o,onPaneClick:i,onPaneContextMenu:s,onPaneScroll:l,onPaneMouseEnter:u,onPaneMouseMove:f,onPaneMouseLeave:h,children:p})=>{const y=b.useRef(null),w=wt(),S=b.useRef(0),_=b.useRef(0),N=b.useRef(),{userSelectionActive:C,elementsSelectable:R,dragging:I}=tt(W0,St),T=()=>{w.setState({userSelectionActive:!1,userSelectionRect:null}),S.current=0,_.current=0},U=se=>{i==null||i(se),w.getState().resetSelectedElements(),w.setState({nodesSelectionActive:!1})},q=se=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){se.preventDefault();return}s==null||s(se)},V=l?se=>l(se):void 0,J=se=>{const{resetSelectedElements:k,domNode:M}=w.getState();if(N.current=M==null?void 0:M.getBoundingClientRect(),!R||!e||se.button!==0||se.target!==y.current||!N.current)return;const{x:j,y:G}=Zn(se,N.current);k(),w.setState({userSelectionRect:{width:0,height:0,startX:j,startY:G,x:j,y:G}}),r==null||r(se)},X=se=>{const{userSelectionRect:k,nodeInternals:M,edges:j,transform:G,onNodesChange:ae,onEdgesChange:P,nodeOrigin:Q,getNodes:oe}=w.getState();if(!e||!N.current||!k)return;w.setState({userSelectionActive:!0,nodesSelectionActive:!1});const ie=Zn(se,N.current),de=k.startX??0,ye=k.startY??0,_e={...k,x:ie.x<de?ie.x:de,y:ie.y<ye?ie.y:ye,width:Math.abs(ie.x-de),height:Math.abs(ie.y-ye)},De=oe(),Oe=_d(M,_e,G,t===To.Partial,!0,Q),Ie=kd(Oe,j).map(Re=>Re.id),fe=Oe.map(Re=>Re.id);if(S.current!==fe.length){S.current=fe.length;const Re=Ir(De,fe);Re.length&&(ae==null||ae(Re))}if(_.current!==Ie.length){_.current=Ie.length;const Re=Ir(j,Ie);Re.length&&(P==null||P(Re))}w.setState({userSelectionRect:_e})},ee=se=>{if(se.button!==0)return;const{userSelectionRect:k}=w.getState();!C&&k&&se.target===y.current&&(U==null||U(se)),w.setState({nodesSelectionActive:S.current>0}),T(),o==null||o(se)},K=se=>{C&&(w.setState({nodesSelectionActive:S.current>0}),o==null||o(se)),T()},re=R&&(e||C);return B.createElement("div",{className:kt(["react-flow__pane",{dragging:I,selection:e}]),onClick:re?void 0:qi(U,y),onContextMenu:qi(q,y),onWheel:qi(V,y),onMouseEnter:re?void 0:u,onMouseDown:re?J:void 0,onMouseMove:re?X:f,onMouseUp:re?ee:void 0,onMouseLeave:re?K:h,ref:y,style:mc},p,B.createElement(L0,null))});Hd.displayName="Pane";function zd(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:zd(r,t):!1}function Fl(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function B0(e,t,n,r){return Array.from(e.values()).filter(o=>(o.selected||o.id===r)&&(!o.parentNode||o.parentId||!zd(o,e))&&(o.draggable||t&&typeof o.draggable>"u")).map(o=>{var i,s;return{id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((i=o.positionAbsolute)==null?void 0:i.x)??0),y:n.y-(((s=o.positionAbsolute)==null?void 0:s.y)??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode||o.parentId,parentId:o.parentNode||o.parentId,width:o.width,height:o.height,expandParent:o.expandParent}})}function H0(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Yd(e,t,n,r,o=[0,0],i){const s=H0(e,e.extent||r);let l=s;const u=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(u&&e.width&&e.height){const p=n.get(u),{x:y,y:w}=mr(p,o).positionAbsolute;l=p&&Xt(y)&&Xt(w)&&Xt(p.width)&&Xt(p.height)?[[y+e.width*o[0],w+e.height*o[1]],[y+p.width-e.width+e.width*o[0],w+p.height-e.height+e.height*o[1]]]:l}else i==null||i("005",jn.error005()),l=s;else if(e.extent&&u&&e.extent!=="parent"){const p=n.get(u),{x:y,y:w}=mr(p,o).positionAbsolute;l=[[e.extent[0][0]+y,e.extent[0][1]+w],[e.extent[1][0]+y,e.extent[1][1]+w]]}let f={x:0,y:0};if(u){const p=n.get(u);f=mr(p,o).positionAbsolute}const h=l&&l!=="parent"?ic(t,l):t;return{position:{x:h.x-f.x,y:h.y-f.y},positionAbsolute:h}}function Ki({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[e?r.find(o=>o.id===e):r[0],r]}const Wl=(e,t,n,r)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return null;const i=Array.from(o),s=t.getBoundingClientRect(),l={x:s.width*r[0],y:s.height*r[1]};return i.map(u=>{const f=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),position:u.getAttribute("data-handlepos"),x:(f.left-s.left-l.x)/n,y:(f.top-s.top-l.y)/n,...ac(u)}})};function co(e,t,n){return n===void 0?n:r=>{const o=t().nodeInternals.get(e);o&&n(r,{...o})}}function xs({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:i,multiSelectionActive:s,nodeInternals:l,onError:u}=t.getState(),f=l.get(e);if(!f){u==null||u("012",jn.error012(e));return}t.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&s)&&(i({nodes:[f],edges:[]}),requestAnimationFrame(()=>{var h;return(h=r==null?void 0:r.current)==null?void 0:h.blur()})):o([e])}function z0(){const e=wt();return b.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:o,snapToGrid:i}=e.getState(),s=n.touches?n.touches[0].clientX:n.clientX,l=n.touches?n.touches[0].clientY:n.clientY,u={x:(s-r[0])/r[2],y:(l-r[1])/r[2]};return{xSnapped:i?o[0]*Math.round(u.x/o[0]):u.x,ySnapped:i?o[1]*Math.round(u.y/o[1]):u.y,...u}},[])}function Ui(e){return(t,n,r)=>e==null?void 0:e(t,r)}function Vd({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:i,selectNodesOnDrag:s}){const l=wt(),[u,f]=b.useState(!1),h=b.useRef([]),p=b.useRef({x:null,y:null}),y=b.useRef(0),w=b.useRef(null),S=b.useRef({x:0,y:0}),_=b.useRef(null),N=b.useRef(!1),C=b.useRef(!1),R=b.useRef(!1),I=z0();return b.useEffect(()=>{if(e!=null&&e.current){const T=Ut(e.current),U=({x:J,y:X})=>{const{nodeInternals:ee,onNodeDrag:K,onSelectionDrag:re,updateNodePositions:se,nodeExtent:k,snapGrid:M,snapToGrid:j,nodeOrigin:G,onError:ae}=l.getState();p.current={x:J,y:X};let P=!1,Q={x:0,y:0,x2:0,y2:0};if(h.current.length>1&&k){const ie=Qa(h.current,G);Q=Co(ie)}if(h.current=h.current.map(ie=>{const de={x:J-ie.distance.x,y:X-ie.distance.y};j&&(de.x=M[0]*Math.round(de.x/M[0]),de.y=M[1]*Math.round(de.y/M[1]));const ye=[[k[0][0],k[0][1]],[k[1][0],k[1][1]]];h.current.length>1&&k&&!ie.extent&&(ye[0][0]=ie.positionAbsolute.x-Q.x+k[0][0],ye[1][0]=ie.positionAbsolute.x+(ie.width??0)-Q.x2+k[1][0],ye[0][1]=ie.positionAbsolute.y-Q.y+k[0][1],ye[1][1]=ie.positionAbsolute.y+(ie.height??0)-Q.y2+k[1][1]);const _e=Yd(ie,de,ee,ye,G,ae);return P=P||ie.position.x!==_e.position.x||ie.position.y!==_e.position.y,ie.position=_e.position,ie.positionAbsolute=_e.positionAbsolute,ie}),!P)return;se(h.current,!0,!0),f(!0);const oe=o?K:Ui(re);if(oe&&_.current){const[ie,de]=Ki({nodeId:o,dragItems:h.current,nodeInternals:ee});oe(_.current,ie,de)}},q=()=>{if(!w.current)return;const[J,X]=fd(S.current,w.current);if(J!==0||X!==0){const{transform:ee,panBy:K}=l.getState();p.current.x=(p.current.x??0)-J/ee[2],p.current.y=(p.current.y??0)-X/ee[2],K({x:J,y:X})&&U(p.current)}y.current=requestAnimationFrame(q)},V=J=>{var G;const{nodeInternals:X,multiSelectionActive:ee,nodesDraggable:K,unselectNodesAndEdges:re,onNodeDragStart:se,onSelectionDragStart:k}=l.getState();C.current=!0;const M=o?se:Ui(k);(!s||!i)&&!ee&&o&&((G=X.get(o))!=null&&G.selected||re()),o&&i&&s&&xs({id:o,store:l,nodeRef:e});const j=I(J);if(p.current=j,h.current=B0(X,K,j,o),M&&h.current){const[ae,P]=Ki({nodeId:o,dragItems:h.current,nodeInternals:X});M(J.sourceEvent,ae,P)}};if(t)T.on(".drag",null);else{const J=eg().on("start",X=>{const{domNode:ee,nodeDragThreshold:K}=l.getState();K===0&&V(X),R.current=!1;const re=I(X);p.current=re,w.current=(ee==null?void 0:ee.getBoundingClientRect())||null,S.current=Zn(X.sourceEvent,w.current)}).on("drag",X=>{var se,k;const ee=I(X),{autoPanOnNodeDrag:K,nodeDragThreshold:re}=l.getState();if(X.sourceEvent.type==="touchmove"&&X.sourceEvent.touches.length>1&&(R.current=!0),!R.current){if(!N.current&&C.current&&K&&(N.current=!0,q()),!C.current){const M=ee.xSnapped-(((se=p==null?void 0:p.current)==null?void 0:se.x)??0),j=ee.ySnapped-(((k=p==null?void 0:p.current)==null?void 0:k.y)??0);Math.sqrt(M*M+j*j)>re&&V(X)}(p.current.x!==ee.xSnapped||p.current.y!==ee.ySnapped)&&h.current&&C.current&&(_.current=X.sourceEvent,S.current=Zn(X.sourceEvent,w.current),U(ee))}}).on("end",X=>{if(!(!C.current||R.current)&&(f(!1),N.current=!1,C.current=!1,cancelAnimationFrame(y.current),h.current)){const{updateNodePositions:ee,nodeInternals:K,onNodeDragStop:re,onSelectionDragStop:se}=l.getState(),k=o?re:Ui(se);if(ee(h.current,!1,!1),k){const[M,j]=Ki({nodeId:o,dragItems:h.current,nodeInternals:K});k(X.sourceEvent,M,j)}}}).filter(X=>{const ee=X.target;return!X.button&&(!n||!Fl(ee,`.${n}`,e))&&(!r||Fl(ee,r,e))});return T.call(J),()=>{T.on(".drag",null)}}}},[e,t,n,r,i,l,o,s,I]),u}function qd(){const e=wt();return b.useCallback(n=>{const{nodeInternals:r,nodeExtent:o,updateNodePositions:i,getNodes:s,snapToGrid:l,snapGrid:u,onError:f,nodesDraggable:h}=e.getState(),p=s().filter(R=>R.selected&&(R.draggable||h&&typeof R.draggable>"u")),y=l?u[0]:5,w=l?u[1]:5,S=n.isShiftPressed?4:1,_=n.x*y*S,N=n.y*w*S,C=p.map(R=>{if(R.positionAbsolute){const I={x:R.positionAbsolute.x+_,y:R.positionAbsolute.y+N};l&&(I.x=u[0]*Math.round(I.x/u[0]),I.y=u[1]*Math.round(I.y/u[1]));const{positionAbsolute:T,position:U}=Yd(R,I,r,o,void 0,f);R.position=U,R.positionAbsolute=T}return R});i(C,!0,!1)},[])}const Fr={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var lo=e=>{const t=({id:n,type:r,data:o,xPos:i,yPos:s,xPosOrigin:l,yPosOrigin:u,selected:f,onClick:h,onMouseEnter:p,onMouseMove:y,onMouseLeave:w,onContextMenu:S,onDoubleClick:_,style:N,className:C,isDraggable:R,isSelectable:I,isConnectable:T,isFocusable:U,selectNodesOnDrag:q,sourcePosition:V,targetPosition:J,hidden:X,resizeObserver:ee,dragHandle:K,zIndex:re,isParent:se,noDragClassName:k,noPanClassName:M,initialized:j,disableKeyboardA11y:G,ariaLabel:ae,rfId:P,hasHandleBounds:Q})=>{const oe=wt(),ie=b.useRef(null),de=b.useRef(null),ye=b.useRef(V),_e=b.useRef(J),De=b.useRef(r),Oe=I||R||h||p||y||w,Ie=qd(),fe=co(n,oe.getState,p),Re=co(n,oe.getState,y),Ze=co(n,oe.getState,w),Pe=co(n,oe.getState,S),Qe=co(n,oe.getState,_),Le=He=>{const{nodeDragThreshold:Te}=oe.getState();if(I&&(!q||!R||Te>0)&&xs({id:n,store:oe,nodeRef:ie}),h){const ut=oe.getState().nodeInternals.get(n);ut&&h(He,{...ut})}},Be=He=>{if(!gs(He)&&!G)if(gd.includes(He.key)&&I){const Te=He.key==="Escape";xs({id:n,store:oe,unselect:Te,nodeRef:ie})}else R&&f&&Object.prototype.hasOwnProperty.call(Fr,He.key)&&(oe.setState({ariaLiveMessage:`Moved selected node ${He.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~s}`}),Ie({x:Fr[He.key].x,y:Fr[He.key].y,isShiftPressed:He.shiftKey}))};b.useEffect(()=>()=>{de.current&&(ee==null||ee.unobserve(de.current),de.current=null)},[]),b.useEffect(()=>{if(ie.current&&!X){const He=ie.current;(!j||!Q||de.current!==He)&&(de.current&&(ee==null||ee.unobserve(de.current)),ee==null||ee.observe(He),de.current=He)}},[X,j,Q]),b.useEffect(()=>{const He=De.current!==r,Te=ye.current!==V,ut=_e.current!==J;ie.current&&(He||Te||ut)&&(He&&(De.current=r),Te&&(ye.current=V),ut&&(_e.current=J),oe.getState().updateNodeDimensions([{id:n,nodeElement:ie.current,forceUpdate:!0}]))},[n,r,V,J]);const Ue=Vd({nodeRef:ie,disabled:X||!R,noDragClassName:k,handleSelector:K,nodeId:n,isSelectable:I,selectNodesOnDrag:q});return X?null:B.createElement("div",{className:kt(["react-flow__node",`react-flow__node-${r}`,{[M]:R},C,{selected:f,selectable:I,parent:se,dragging:Ue}]),ref:ie,style:{zIndex:re,transform:`translate(${l}px,${u}px)`,pointerEvents:Oe?"all":"none",visibility:j?"visible":"hidden",...N},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:fe,onMouseMove:Re,onMouseLeave:Ze,onContextMenu:Pe,onClick:Le,onDoubleClick:Qe,onKeyDown:U?Be:void 0,tabIndex:U?0:void 0,role:U?"button":void 0,"aria-describedby":G?void 0:`${$d}-${P}`,"aria-label":ae},B.createElement(r0,{value:n},B.createElement(e,{id:n,data:o,type:r,xPos:i,yPos:s,selected:f,isConnectable:T,sourcePosition:V,targetPosition:J,dragging:Ue,dragHandle:K,zIndex:re})))};return t.displayName="NodeWrapper",b.memo(t)};const Y0=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Qa(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function V0({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=wt(),{width:o,height:i,x:s,y:l,transformString:u,userSelectionActive:f}=tt(Y0,St),h=qd(),p=b.useRef(null);if(b.useEffect(()=>{var S;n||(S=p.current)==null||S.focus({preventScroll:!0})},[n]),Vd({nodeRef:p}),f||!o||!i)return null;const y=e?S=>{const _=r.getState().getNodes().filter(N=>N.selected);e(S,_)}:void 0,w=S=>{Object.prototype.hasOwnProperty.call(Fr,S.key)&&h({x:Fr[S.key].x,y:Fr[S.key].y,isShiftPressed:S.shiftKey})};return B.createElement("div",{className:kt(["react-flow__nodesselection","react-flow__container",t]),style:{transform:u}},B.createElement("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:y,tabIndex:n?void 0:-1,onKeyDown:n?void 0:w,style:{width:o,height:i,top:l,left:s}}))}var q0=b.memo(V0);const K0=e=>e.nodesSelectionActive,Kd=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,deleteKeyCode:l,onMove:u,onMoveStart:f,onMoveEnd:h,selectionKeyCode:p,selectionOnDrag:y,selectionMode:w,onSelectionStart:S,onSelectionEnd:_,multiSelectionKeyCode:N,panActivationKeyCode:C,zoomActivationKeyCode:R,elementsSelectable:I,zoomOnScroll:T,zoomOnPinch:U,panOnScroll:q,panOnScrollSpeed:V,panOnScrollMode:J,zoomOnDoubleClick:X,panOnDrag:ee,defaultViewport:K,translateExtent:re,minZoom:se,maxZoom:k,preventScrolling:M,onSelectionContextMenu:j,noWheelClassName:G,noPanClassName:ae,disableKeyboardA11y:P})=>{const Q=tt(K0),oe=Do(p),ie=Do(C),de=ie||ee,ye=ie||q,_e=oe||y&&de!==!0;return P0({deleteKeyCode:l,multiSelectionKeyCode:N}),B.createElement($0,{onMove:u,onMoveStart:f,onMoveEnd:h,onPaneContextMenu:i,elementsSelectable:I,zoomOnScroll:T,zoomOnPinch:U,panOnScroll:ye,panOnScrollSpeed:V,panOnScrollMode:J,zoomOnDoubleClick:X,panOnDrag:!oe&&de,defaultViewport:K,translateExtent:re,minZoom:se,maxZoom:k,zoomActivationKeyCode:R,preventScrolling:M,noWheelClassName:G,noPanClassName:ae},B.createElement(Hd,{onSelectionStart:S,onSelectionEnd:_,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:de,isSelecting:!!_e,selectionMode:w},e,Q&&B.createElement(q0,{onSelectionContextMenu:j,noPanClassName:ae,disableKeyboardA11y:P})))};Kd.displayName="FlowRenderer";var U0=b.memo(Kd);function X0(e){return tt(b.useCallback(n=>e?_d(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function G0(e){const t={input:lo(e.input||Pd),default:lo(e.default||bs),output:lo(e.output||Id),group:lo(e.group||fc)},n={},r=Object.keys(e).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,i)=>(o[i]=lo(e[i]||bs),o),n);return{...t,...r}}const Z0=({x:e,y:t,width:n,height:r,origin:o})=>!n||!r?{x:e,y:t}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-r*o[1]},Q0=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Ud=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,updateNodeDimensions:i,onError:s}=tt(Q0,St),l=X0(e.onlyRenderVisibleElements),u=b.useRef(),f=b.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const h=new ResizeObserver(p=>{const y=p.map(w=>({id:w.target.getAttribute("data-id"),nodeElement:w.target,forceUpdate:!0}));i(y)});return u.current=h,h},[]);return b.useEffect(()=>()=>{var h;(h=u==null?void 0:u.current)==null||h.disconnect()},[]),B.createElement("div",{className:"react-flow__nodes",style:mc},l.map(h=>{var U,q,V;let p=h.type||"default";e.nodeTypes[p]||(s==null||s("003",jn.error003(p)),p="default");const y=e.nodeTypes[p]||e.nodeTypes.default,w=!!(h.draggable||t&&typeof h.draggable>"u"),S=!!(h.selectable||o&&typeof h.selectable>"u"),_=!!(h.connectable||n&&typeof h.connectable>"u"),N=!!(h.focusable||r&&typeof h.focusable>"u"),C=e.nodeExtent?ic(h.positionAbsolute,e.nodeExtent):h.positionAbsolute,R=(C==null?void 0:C.x)??0,I=(C==null?void 0:C.y)??0,T=Z0({x:R,y:I,width:h.width??0,height:h.height??0,origin:e.nodeOrigin});return B.createElement(y,{key:h.id,id:h.id,className:h.className,style:h.style,type:p,data:h.data,sourcePosition:h.sourcePosition||je.Bottom,targetPosition:h.targetPosition||je.Top,hidden:h.hidden,xPos:R,yPos:I,xPosOrigin:T.x,yPosOrigin:T.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!h.selected,isDraggable:w,isSelectable:S,isConnectable:_,isFocusable:N,resizeObserver:f,dragHandle:h.dragHandle,zIndex:((U=h[dt])==null?void 0:U.z)??0,isParent:!!((q=h[dt])!=null&&q.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!h.width&&!!h.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:h.ariaLabel,hasHandleBounds:!!((V=h[dt])!=null&&V.handleBounds)})}))};Ud.displayName="NodeRenderer";var J0=b.memo(Ud);const ev=(e,t,n)=>n===je.Left?e-t:n===je.Right?e+t:e,tv=(e,t,n)=>n===je.Top?e-t:n===je.Bottom?e+t:e,Bl="react-flow__edgeupdater",Hl=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:i,onMouseOut:s,type:l})=>B.createElement("circle",{onMouseDown:o,onMouseEnter:i,onMouseOut:s,className:kt([Bl,`${Bl}-${l}`]),cx:ev(t,r,e),cy:tv(n,r,e),r,stroke:"transparent",fill:"transparent"}),nv=()=>!0;var jr=e=>{const t=({id:n,className:r,type:o,data:i,onClick:s,onEdgeDoubleClick:l,selected:u,animated:f,label:h,labelStyle:p,labelShowBg:y,labelBgStyle:w,labelBgPadding:S,labelBgBorderRadius:_,style:N,source:C,target:R,sourceX:I,sourceY:T,targetX:U,targetY:q,sourcePosition:V,targetPosition:J,elementsSelectable:X,hidden:ee,sourceHandleId:K,targetHandleId:re,onContextMenu:se,onMouseEnter:k,onMouseMove:M,onMouseLeave:j,reconnectRadius:G,onReconnect:ae,onReconnectStart:P,onReconnectEnd:Q,markerEnd:oe,markerStart:ie,rfId:de,ariaLabel:ye,isFocusable:_e,isReconnectable:De,pathOptions:Oe,interactionWidth:Ie,disableKeyboardA11y:fe})=>{const Re=b.useRef(null),[Ze,Pe]=b.useState(!1),[Qe,Le]=b.useState(!1),Be=wt(),Ue=b.useMemo(()=>`url('#${vs(ie,de)}')`,[ie,de]),He=b.useMemo(()=>`url('#${vs(oe,de)}')`,[oe,de]);if(ee)return null;const Te=ue=>{var Je;const{edges:me,addSelectedEdges:Ee,unselectNodesAndEdges:Ne,multiSelectionActive:he}=Be.getState(),Me=me.find(nt=>nt.id===n);Me&&(X&&(Be.setState({nodesSelectionActive:!1}),Me.selected&&he?(Ne({nodes:[],edges:[Me]}),(Je=Re.current)==null||Je.blur()):Ee([n])),s&&s(ue,Me))},ut=so(n,Be.getState,l),yt=so(n,Be.getState,se),mt=so(n,Be.getState,k),Bt=so(n,Be.getState,M),bt=so(n,Be.getState,j),Et=(ue,me)=>{if(ue.button!==0)return;const{edges:Ee,isValidConnection:Ne}=Be.getState(),he=me?R:C,Me=(me?re:K)||null,Je=me?"target":"source",nt=Ne||nv,be=me,$t=Ee.find(rt=>rt.id===n);Le(!0),P==null||P(ue,$t,Je);const In=rt=>{Le(!1),Q==null||Q(rt,$t,Je)};Td({event:ue,handleId:Me,nodeId:he,onConnect:rt=>ae==null?void 0:ae($t,rt),isTarget:be,getState:Be.getState,setState:Be.setState,isValidConnection:nt,edgeUpdaterType:Je,onReconnectEnd:In})},Nt=ue=>Et(ue,!0),pt=ue=>Et(ue,!1),Pt=()=>Pe(!0),Ct=()=>Pe(!1),ce=!X&&!s,ve=ue=>{var me;if(!fe&&gd.includes(ue.key)&&X){const{unselectNodesAndEdges:Ee,addSelectedEdges:Ne,edges:he}=Be.getState();ue.key==="Escape"?((me=Re.current)==null||me.blur(),Ee({edges:[he.find(Je=>Je.id===n)]})):Ne([n])}};return B.createElement("g",{className:kt(["react-flow__edge",`react-flow__edge-${o}`,r,{selected:u,animated:f,inactive:ce,updating:Ze}]),onClick:Te,onDoubleClick:ut,onContextMenu:yt,onMouseEnter:mt,onMouseMove:Bt,onMouseLeave:bt,onKeyDown:_e?ve:void 0,tabIndex:_e?0:void 0,role:_e?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":ye===null?void 0:ye||`Edge from ${C} to ${R}`,"aria-describedby":_e?`${Rd}-${de}`:void 0,ref:Re},!Qe&&B.createElement(e,{id:n,source:C,target:R,selected:u,animated:f,label:h,labelStyle:p,labelShowBg:y,labelBgStyle:w,labelBgPadding:S,labelBgBorderRadius:_,data:i,style:N,sourceX:I,sourceY:T,targetX:U,targetY:q,sourcePosition:V,targetPosition:J,sourceHandleId:K,targetHandleId:re,markerStart:Ue,markerEnd:He,pathOptions:Oe,interactionWidth:Ie}),De&&B.createElement(B.Fragment,null,(De==="source"||De===!0)&&B.createElement(Hl,{position:V,centerX:I,centerY:T,radius:G,onMouseDown:Nt,onMouseEnter:Pt,onMouseOut:Ct,type:"source"}),(De==="target"||De===!0)&&B.createElement(Hl,{position:J,centerX:U,centerY:q,radius:G,onMouseDown:pt,onMouseEnter:Pt,onMouseOut:Ct,type:"target"})))};return t.displayName="EdgeWrapper",b.memo(t)};function rv(e){const t={default:jr(e.default||Ra),straight:jr(e.bezier||lc),step:jr(e.step||cc),smoothstep:jr(e.step||Za),simplebezier:jr(e.simplebezier||sc)},n={},r=Object.keys(e).filter(o=>!["default","bezier"].includes(o)).reduce((o,i)=>(o[i]=jr(e[i]||Ra),o),n);return{...t,...r}}function zl(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,o=((n==null?void 0:n.y)||0)+t.y,i=(n==null?void 0:n.width)||t.width,s=(n==null?void 0:n.height)||t.height;switch(e){case je.Top:return{x:r+i/2,y:o};case je.Right:return{x:r+i,y:o+s/2};case je.Bottom:return{x:r+i/2,y:o+s};case je.Left:return{x:r,y:o+s/2}}}function Yl(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const ov=(e,t,n,r,o,i)=>{const s=zl(n,e,t),l=zl(i,r,o);return{sourceX:s.x,sourceY:s.y,targetX:l.x,targetY:l.y}};function av({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:i,width:s,height:l,transform:u}){const f={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+i)};f.x===f.x2&&(f.x2+=1),f.y===f.y2&&(f.y2+=1);const h=Co({x:(0-u[0])/u[2],y:(0-u[1])/u[2],width:s/u[2],height:l/u[2]}),p=Math.max(0,Math.min(h.x2,f.x2)-Math.max(h.x,f.x)),y=Math.max(0,Math.min(h.y2,f.y2)-Math.max(h.y,f.y));return Math.ceil(p*y)>0}function Vl(e){var r,o,i,s,l;const t=((r=e==null?void 0:e[dt])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)<"u"&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.y)<"u";return[{x:((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const iv=[{level:0,isMaxLevel:!0,edges:[]}];function sv(e,t,n=!1){let r=-1;const o=e.reduce((s,l)=>{var h,p;const u=Xt(l.zIndex);let f=u?l.zIndex:0;if(n){const y=t.get(l.target),w=t.get(l.source),S=l.selected||(y==null?void 0:y.selected)||(w==null?void 0:w.selected),_=Math.max(((h=w==null?void 0:w[dt])==null?void 0:h.z)||0,((p=y==null?void 0:y[dt])==null?void 0:p.z)||0,1e3);f=(u?l.zIndex:0)+(S?_:0)}return s[f]?s[f].push(l):s[f]=[l],r=f>r?f:r,s},{}),i=Object.entries(o).map(([s,l])=>{const u=+s;return{edges:l,level:u,isMaxLevel:u===r}});return i.length===0?iv:i}function cv(e,t,n){const r=tt(b.useCallback(o=>e?o.edges.filter(i=>{const s=t.get(i.source),l=t.get(i.target);return(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&av({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:l.width,targetHeight:l.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[e,t]));return sv(r,t,n)}const lv=({color:e="none",strokeWidth:t=1})=>B.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),uv=({color:e="none",strokeWidth:t=1})=>B.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),ql={[$a.Arrow]:lv,[$a.ArrowClosed]:uv};function dv(e){const t=wt();return b.useMemo(()=>{var o,i;return Object.prototype.hasOwnProperty.call(ql,e)?ql[e]:((i=(o=t.getState()).onError)==null||i.call(o,"009",jn.error009(e)),null)},[e])}const fv=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:l="auto-start-reverse"})=>{const u=dv(t);return u?B.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:l,refX:"0",refY:"0"},B.createElement(u,{color:n,strokeWidth:s})):null},hv=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((o,i)=>([i.markerStart,i.markerEnd].forEach(s=>{if(s&&typeof s=="object"){const l=vs(s,t);r.includes(l)||(o.push({id:l,color:s.color||e,...s}),r.push(l))}}),o),[]).sort((o,i)=>o.id.localeCompare(i.id))},Xd=({defaultColor:e,rfId:t})=>{const n=tt(b.useCallback(hv({defaultColor:e,rfId:t}),[e,t]),(r,o)=>!(r.length!==o.length||r.some((i,s)=>i.id!==o[s].id)));return B.createElement("defs",null,n.map(r=>B.createElement(fv,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};Xd.displayName="MarkerDefinitions";var mv=b.memo(Xd);const pv=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Gd=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:o,noPanClassName:i,onEdgeContextMenu:s,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:f,onEdgeClick:h,onEdgeDoubleClick:p,onReconnect:y,onReconnectStart:w,onReconnectEnd:S,reconnectRadius:_,children:N,disableKeyboardA11y:C})=>{const{edgesFocusable:R,edgesUpdatable:I,elementsSelectable:T,width:U,height:q,connectionMode:V,nodeInternals:J,onError:X}=tt(pv,St),ee=cv(t,J,n);return U?B.createElement(B.Fragment,null,ee.map(({level:K,edges:re,isMaxLevel:se})=>B.createElement("svg",{key:K,style:{zIndex:K},width:U,height:q,className:"react-flow__edges react-flow__container"},se&&B.createElement(mv,{defaultColor:e,rfId:r}),B.createElement("g",null,re.map(k=>{const[M,j,G]=Vl(J.get(k.source)),[ae,P,Q]=Vl(J.get(k.target));if(!G||!Q)return null;let oe=k.type||"default";o[oe]||(X==null||X("011",jn.error011(oe)),oe="default");const ie=o[oe]||o.default,de=V===wr.Strict?P.target:(P.target??[]).concat(P.source??[]),ye=Yl(j.source,k.sourceHandle),_e=Yl(de,k.targetHandle),De=(ye==null?void 0:ye.position)||je.Bottom,Oe=(_e==null?void 0:_e.position)||je.Top,Ie=!!(k.focusable||R&&typeof k.focusable>"u"),fe=k.reconnectable||k.updatable,Re=typeof y<"u"&&(fe||I&&typeof fe>"u");if(!ye||!_e)return X==null||X("008",jn.error008(ye,k)),null;const{sourceX:Ze,sourceY:Pe,targetX:Qe,targetY:Le}=ov(M,ye,De,ae,_e,Oe);return B.createElement(ie,{key:k.id,id:k.id,className:kt([k.className,i]),type:oe,data:k.data,selected:!!k.selected,animated:!!k.animated,hidden:!!k.hidden,label:k.label,labelStyle:k.labelStyle,labelShowBg:k.labelShowBg,labelBgStyle:k.labelBgStyle,labelBgPadding:k.labelBgPadding,labelBgBorderRadius:k.labelBgBorderRadius,style:k.style,source:k.source,target:k.target,sourceHandleId:k.sourceHandle,targetHandleId:k.targetHandle,markerEnd:k.markerEnd,markerStart:k.markerStart,sourceX:Ze,sourceY:Pe,targetX:Qe,targetY:Le,sourcePosition:De,targetPosition:Oe,elementsSelectable:T,onContextMenu:s,onMouseEnter:l,onMouseMove:u,onMouseLeave:f,onClick:h,onEdgeDoubleClick:p,onReconnect:y,onReconnectStart:w,onReconnectEnd:S,reconnectRadius:_,rfId:r,ariaLabel:k.ariaLabel,isFocusable:Ie,isReconnectable:Re,pathOptions:"pathOptions"in k?k.pathOptions:void 0,interactionWidth:k.interactionWidth,disableKeyboardA11y:C})})))),N):null};Gd.displayName="EdgeRenderer";var gv=b.memo(Gd);const yv=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function vv({children:e}){const t=tt(yv);return B.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function wv(e){const t=hc(),n=b.useRef(!1);b.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const bv={[je.Left]:je.Right,[je.Right]:je.Left,[je.Top]:je.Bottom,[je.Bottom]:je.Top},Zd=({nodeId:e,handleType:t,style:n,type:r=Kn.Bezier,CustomComponent:o,connectionStatus:i})=>{var q,V,J;const{fromNode:s,handleId:l,toX:u,toY:f,connectionMode:h}=tt(b.useCallback(X=>({fromNode:X.nodeInternals.get(e),handleId:X.connectionHandleId,toX:(X.connectionPosition.x-X.transform[0])/X.transform[2],toY:(X.connectionPosition.y-X.transform[1])/X.transform[2],connectionMode:X.connectionMode}),[e]),St),p=(q=s==null?void 0:s[dt])==null?void 0:q.handleBounds;let y=p==null?void 0:p[t];if(h===wr.Loose&&(y=y||(p==null?void 0:p[t==="source"?"target":"source"])),!s||!y)return null;const w=l?y.find(X=>X.id===l):y[0],S=w?w.x+w.width/2:(s.width??0)/2,_=w?w.y+w.height/2:s.height??0,N=(((V=s.positionAbsolute)==null?void 0:V.x)??0)+S,C=(((J=s.positionAbsolute)==null?void 0:J.y)??0)+_,R=w==null?void 0:w.position,I=R?bv[R]:null;if(!R||!I)return null;if(o)return B.createElement(o,{connectionLineType:r,connectionLineStyle:n,fromNode:s,fromHandle:w,fromX:N,fromY:C,toX:u,toY:f,fromPosition:R,toPosition:I,connectionStatus:i});let T="";const U={sourceX:N,sourceY:C,sourcePosition:R,targetX:u,targetY:f,targetPosition:I};return r===Kn.Bezier?[T]=xd(U):r===Kn.Step?[T]=ys({...U,borderRadius:0}):r===Kn.SmoothStep?[T]=ys(U):r===Kn.SimpleBezier?[T]=bd(U):T=`M${N},${C} ${u},${f}`,B.createElement("path",{d:T,fill:"none",className:"react-flow__connection-path",style:n})};Zd.displayName="ConnectionLine";const xv=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Sv({containerStyle:e,style:t,type:n,component:r}){const{nodeId:o,handleType:i,nodesConnectable:s,width:l,height:u,connectionStatus:f}=tt(xv,St);return!(o&&i&&l&&s)?null:B.createElement("svg",{style:e,width:l,height:u,className:"react-flow__edges react-flow__connectionline react-flow__container"},B.createElement("g",{className:kt(["react-flow__connection",f])},B.createElement(Zd,{nodeId:o,handleType:i,style:t,type:n,CustomComponent:r,connectionStatus:f})))}function Kl(e,t){return b.useRef(null),wt(),b.useMemo(()=>t(e),[e])}const Qd=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:i,onNodeClick:s,onEdgeClick:l,onNodeDoubleClick:u,onEdgeDoubleClick:f,onNodeMouseEnter:h,onNodeMouseMove:p,onNodeMouseLeave:y,onNodeContextMenu:w,onSelectionContextMenu:S,onSelectionStart:_,onSelectionEnd:N,connectionLineType:C,connectionLineStyle:R,connectionLineComponent:I,connectionLineContainerStyle:T,selectionKeyCode:U,selectionOnDrag:q,selectionMode:V,multiSelectionKeyCode:J,panActivationKeyCode:X,zoomActivationKeyCode:ee,deleteKeyCode:K,onlyRenderVisibleElements:re,elementsSelectable:se,selectNodesOnDrag:k,defaultViewport:M,translateExtent:j,minZoom:G,maxZoom:ae,preventScrolling:P,defaultMarkerColor:Q,zoomOnScroll:oe,zoomOnPinch:ie,panOnScroll:de,panOnScrollSpeed:ye,panOnScrollMode:_e,zoomOnDoubleClick:De,panOnDrag:Oe,onPaneClick:Ie,onPaneMouseEnter:fe,onPaneMouseMove:Re,onPaneMouseLeave:Ze,onPaneScroll:Pe,onPaneContextMenu:Qe,onEdgeContextMenu:Le,onEdgeMouseEnter:Be,onEdgeMouseMove:Ue,onEdgeMouseLeave:He,onReconnect:Te,onReconnectStart:ut,onReconnectEnd:yt,reconnectRadius:mt,noDragClassName:Bt,noWheelClassName:bt,noPanClassName:Et,elevateEdgesOnSelect:Nt,disableKeyboardA11y:pt,nodeOrigin:Pt,nodeExtent:Ct,rfId:ce})=>{const ve=Kl(e,G0),ue=Kl(t,rv);return wv(i),B.createElement(U0,{onPaneClick:Ie,onPaneMouseEnter:fe,onPaneMouseMove:Re,onPaneMouseLeave:Ze,onPaneContextMenu:Qe,onPaneScroll:Pe,deleteKeyCode:K,selectionKeyCode:U,selectionOnDrag:q,selectionMode:V,onSelectionStart:_,onSelectionEnd:N,multiSelectionKeyCode:J,panActivationKeyCode:X,zoomActivationKeyCode:ee,elementsSelectable:se,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:oe,zoomOnPinch:ie,zoomOnDoubleClick:De,panOnScroll:de,panOnScrollSpeed:ye,panOnScrollMode:_e,panOnDrag:Oe,defaultViewport:M,translateExtent:j,minZoom:G,maxZoom:ae,onSelectionContextMenu:S,preventScrolling:P,noDragClassName:Bt,noWheelClassName:bt,noPanClassName:Et,disableKeyboardA11y:pt},B.createElement(vv,null,B.createElement(gv,{edgeTypes:ue,onEdgeClick:l,onEdgeDoubleClick:f,onlyRenderVisibleElements:re,onEdgeContextMenu:Le,onEdgeMouseEnter:Be,onEdgeMouseMove:Ue,onEdgeMouseLeave:He,onReconnect:Te,onReconnectStart:ut,onReconnectEnd:yt,reconnectRadius:mt,defaultMarkerColor:Q,noPanClassName:Et,elevateEdgesOnSelect:!!Nt,disableKeyboardA11y:pt,rfId:ce},B.createElement(Sv,{style:R,type:C,component:I,containerStyle:T})),B.createElement("div",{className:"react-flow__edgelabel-renderer"}),B.createElement(J0,{nodeTypes:ve,onNodeClick:s,onNodeDoubleClick:u,onNodeMouseEnter:h,onNodeMouseMove:p,onNodeMouseLeave:y,onNodeContextMenu:w,selectNodesOnDrag:k,onlyRenderVisibleElements:re,noPanClassName:Et,noDragClassName:Bt,disableKeyboardA11y:pt,nodeOrigin:Pt,nodeExtent:Ct,rfId:ce})))};Qd.displayName="GraphView";var _v=b.memo(Qd);const Ss=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Hn={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Ss,nodeExtent:Ss,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:wr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Zy,isValidConnection:void 0},kv=()=>fm((e,t)=>({...Hn,setNodes:n=>{const{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:i}=t();e({nodeInternals:Vi(n,r,o,i)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(o=>({...r,...o}))})},setDefaultNodesAndEdges:(n,r)=>{const o=typeof n<"u",i=typeof r<"u",s=o?Vi(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:s,edges:i?r:[],hasDefaultNodes:o,hasDefaultEdges:i})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:i,fitViewOnInitDone:s,fitViewOnInitOptions:l,domNode:u,nodeOrigin:f}=t(),h=u==null?void 0:u.querySelector(".react-flow__viewport");if(!h)return;const p=window.getComputedStyle(h),{m22:y}=new window.DOMMatrixReadOnly(p.transform),w=n.reduce((_,N)=>{const C=o.get(N.id);if(C!=null&&C.hidden)o.set(C.id,{...C,[dt]:{...C[dt],handleBounds:void 0}});else if(C){const R=ac(N.nodeElement);!!(R.width&&R.height&&(C.width!==R.width||C.height!==R.height||N.forceUpdate))&&(o.set(C.id,{...C,[dt]:{...C[dt],handleBounds:{source:Wl(".source",N.nodeElement,y,f),target:Wl(".target",N.nodeElement,y,f)}},...R}),_.push({id:C.id,type:"dimensions",dimensions:R}))}return _},[]);Fd(o,f);const S=s||i&&!s&&Wd(t,{initial:!0,...l});e({nodeInternals:new Map(o),fitViewOnInitDone:S}),(w==null?void 0:w.length)>0&&(r==null||r(w))},updateNodePositions:(n,r=!0,o=!1)=>{const{triggerNodeChanges:i}=t(),s=n.map(l=>{const u={id:l.id,type:"position",dragging:o};return r&&(u.positionAbsolute=l.positionAbsolute,u.position=l.position),u});i(s)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:o,hasDefaultNodes:i,nodeOrigin:s,getNodes:l,elevateNodesOnSelect:u}=t();if(n!=null&&n.length){if(i){const f=Bd(n,l()),h=Vi(f,o,s,u);e({nodeInternals:h})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:o,getNodes:i}=t();let s,l=null;r?s=n.map(u=>qn(u,!0)):(s=Ir(i(),n),l=Ir(o,[])),ya({changedNodes:s,changedEdges:l,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,getNodes:i}=t();let s,l=null;r?s=n.map(u=>qn(u,!0)):(s=Ir(o,n),l=Ir(i(),[])),ya({changedNodes:l,changedEdges:s,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:o,getNodes:i}=t(),s=n||i(),l=r||o,u=s.map(h=>(h.selected=!1,qn(h.id,!1))),f=l.map(h=>qn(h.id,!1));ya({changedNodes:u,changedEdges:f,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=t();r==null||r.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=t();r==null||r.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),i=r().filter(l=>l.selected).map(l=>qn(l.id,!1)),s=n.filter(l=>l.selected).map(l=>qn(l.id,!1));ya({changedNodes:i,changedEdges:s,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(o=>{o.positionAbsolute=ic(o.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:o,height:i,d3Zoom:s,d3Selection:l,translateExtent:u}=t();if(!s||!l||!n.x&&!n.y)return!1;const f=Tn.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),h=[[0,0],[o,i]],p=s==null?void 0:s.constrain()(f,h,u);return s.transform(l,p),r[0]!==p.x||r[1]!==p.y||r[2]!==p.k},cancelConnection:()=>e({connectionNodeId:Hn.connectionNodeId,connectionHandleId:Hn.connectionHandleId,connectionHandleType:Hn.connectionHandleType,connectionStatus:Hn.connectionStatus,connectionStartHandle:Hn.connectionStartHandle,connectionEndHandle:Hn.connectionEndHandle}),reset:()=>e({...Hn})}),Object.is),Jd=({children:e})=>{const t=b.useRef(null);return t.current||(t.current=kv()),B.createElement(Yy,{value:t.current},e)};Jd.displayName="ReactFlowProvider";const ef=({children:e})=>b.useContext(Ga)?B.createElement(B.Fragment,null,e):B.createElement(Jd,null,e);ef.displayName="ReactFlowWrapper";const Ev={input:Pd,default:bs,output:Id,group:fc},Nv={default:Ra,straight:lc,step:cc,smoothstep:Za,simplebezier:sc},Cv=[0,0],Tv=[15,15],Dv={x:0,y:0,zoom:1},Ov={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},tf=b.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:i=Ev,edgeTypes:s=Nv,onNodeClick:l,onEdgeClick:u,onInit:f,onMove:h,onMoveStart:p,onMoveEnd:y,onConnect:w,onConnectStart:S,onConnectEnd:_,onClickConnectStart:N,onClickConnectEnd:C,onNodeMouseEnter:R,onNodeMouseMove:I,onNodeMouseLeave:T,onNodeContextMenu:U,onNodeDoubleClick:q,onNodeDragStart:V,onNodeDrag:J,onNodeDragStop:X,onNodesDelete:ee,onEdgesDelete:K,onSelectionChange:re,onSelectionDragStart:se,onSelectionDrag:k,onSelectionDragStop:M,onSelectionContextMenu:j,onSelectionStart:G,onSelectionEnd:ae,connectionMode:P=wr.Strict,connectionLineType:Q=Kn.Bezier,connectionLineStyle:oe,connectionLineComponent:ie,connectionLineContainerStyle:de,deleteKeyCode:ye="Backspace",selectionKeyCode:_e="Shift",selectionOnDrag:De=!1,selectionMode:Oe=To.Full,panActivationKeyCode:Ie="Space",multiSelectionKeyCode:fe=Aa()?"Meta":"Control",zoomActivationKeyCode:Re=Aa()?"Meta":"Control",snapToGrid:Ze=!1,snapGrid:Pe=Tv,onlyRenderVisibleElements:Qe=!1,selectNodesOnDrag:Le=!0,nodesDraggable:Be,nodesConnectable:Ue,nodesFocusable:He,nodeOrigin:Te=Cv,edgesFocusable:ut,edgesUpdatable:yt,elementsSelectable:mt,defaultViewport:Bt=Dv,minZoom:bt=.5,maxZoom:Et=2,translateExtent:Nt=Ss,preventScrolling:pt=!0,nodeExtent:Pt,defaultMarkerColor:Ct="#b1b1b7",zoomOnScroll:ce=!0,zoomOnPinch:ve=!0,panOnScroll:ue=!1,panOnScrollSpeed:me=.5,panOnScrollMode:Ee=dr.Free,zoomOnDoubleClick:Ne=!0,panOnDrag:he=!0,onPaneClick:Me,onPaneMouseEnter:Je,onPaneMouseMove:nt,onPaneMouseLeave:be,onPaneScroll:$t,onPaneContextMenu:In,children:vn,onEdgeContextMenu:rt,onEdgeDoubleClick:gt,onEdgeMouseEnter:An,onEdgeMouseMove:et,onEdgeMouseLeave:vt,onEdgeUpdate:an,onEdgeUpdateStart:wn,onEdgeUpdateEnd:bn,onReconnect:Xe,onReconnectStart:st,onReconnectEnd:$n,reconnectRadius:sn=10,edgeUpdaterRadius:cn=10,onNodesChange:ln,onEdgesChange:Kr,noDragClassName:Rt="nodrag",noWheelClassName:Zt="nowheel",noPanClassName:Ht="nopan",fitView:Rn=!1,fitViewOptions:Fe,connectOnClick:qe=!0,attributionPosition:ot,proOptions:ft,defaultEdgeOptions:Tt,elevateNodesOnSelect:xn=!0,elevateEdgesOnSelect:at=!1,disableKeyboardA11y:qt=!1,autoPanOnConnect:Qt=!0,autoPanOnNodeDrag:Vo=!0,connectionRadius:Ln=20,isValidConnection:_r,onError:Ur,style:Xr,id:un,nodeDragThreshold:qo,...kr},Ko)=>{const We=un||"1";return B.createElement("div",{...kr,style:{...Xr,...Ov},ref:Ko,className:kt(["react-flow",o]),"data-testid":"rf__wrapper",id:un},B.createElement(ef,null,B.createElement(_v,{onInit:f,onMove:h,onMoveStart:p,onMoveEnd:y,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:R,onNodeMouseMove:I,onNodeMouseLeave:T,onNodeContextMenu:U,onNodeDoubleClick:q,nodeTypes:i,edgeTypes:s,connectionLineType:Q,connectionLineStyle:oe,connectionLineComponent:ie,connectionLineContainerStyle:de,selectionKeyCode:_e,selectionOnDrag:De,selectionMode:Oe,deleteKeyCode:ye,multiSelectionKeyCode:fe,panActivationKeyCode:Ie,zoomActivationKeyCode:Re,onlyRenderVisibleElements:Qe,selectNodesOnDrag:Le,defaultViewport:Bt,translateExtent:Nt,minZoom:bt,maxZoom:Et,preventScrolling:pt,zoomOnScroll:ce,zoomOnPinch:ve,zoomOnDoubleClick:Ne,panOnScroll:ue,panOnScrollSpeed:me,panOnScrollMode:Ee,panOnDrag:he,onPaneClick:Me,onPaneMouseEnter:Je,onPaneMouseMove:nt,onPaneMouseLeave:be,onPaneScroll:$t,onPaneContextMenu:In,onSelectionContextMenu:j,onSelectionStart:G,onSelectionEnd:ae,onEdgeContextMenu:rt,onEdgeDoubleClick:gt,onEdgeMouseEnter:An,onEdgeMouseMove:et,onEdgeMouseLeave:vt,onReconnect:Xe??an,onReconnectStart:st??wn,onReconnectEnd:$n??bn,reconnectRadius:sn??cn,defaultMarkerColor:Ct,noDragClassName:Rt,noWheelClassName:Zt,noPanClassName:Ht,elevateEdgesOnSelect:at,rfId:We,disableKeyboardA11y:qt,nodeOrigin:Te,nodeExtent:Pt}),B.createElement(b0,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:w,onConnectStart:S,onConnectEnd:_,onClickConnectStart:N,onClickConnectEnd:C,nodesDraggable:Be,nodesConnectable:Ue,nodesFocusable:He,edgesFocusable:ut,edgesUpdatable:yt,elementsSelectable:mt,elevateNodesOnSelect:xn,minZoom:bt,maxZoom:Et,nodeExtent:Pt,onNodesChange:ln,onEdgesChange:Kr,snapToGrid:Ze,snapGrid:Pe,connectionMode:P,translateExtent:Nt,connectOnClick:qe,defaultEdgeOptions:Tt,fitView:Rn,fitViewOptions:Fe,onNodesDelete:ee,onEdgesDelete:K,onNodeDragStart:V,onNodeDrag:J,onNodeDragStop:X,onSelectionDrag:k,onSelectionDragStart:se,onSelectionDragStop:M,noPanClassName:Ht,nodeOrigin:Te,rfId:We,autoPanOnConnect:Qt,autoPanOnNodeDrag:Vo,onError:Ur,connectionRadius:Ln,isValidConnection:_r,nodeDragThreshold:qo}),B.createElement(v0,{onSelectionChange:re}),vn,B.createElement(qy,{proOptions:ft,position:ot}),B.createElement(E0,{rfId:We,disableKeyboardA11y:qt})))});tf.displayName="ReactFlow";const nf=({id:e,x:t,y:n,width:r,height:o,style:i,color:s,strokeColor:l,strokeWidth:u,className:f,borderRadius:h,shapeRendering:p,onClick:y,selected:w})=>{const{background:S,backgroundColor:_}=i||{},N=s||S||_;return B.createElement("rect",{className:kt(["react-flow__minimap-node",{selected:w},f]),x:t,y:n,rx:h,ry:h,width:r,height:o,fill:N,stroke:l,strokeWidth:u,shapeRendering:p,onClick:y?C=>y(C,e):void 0})};nf.displayName="MiniMapNode";var jv=b.memo(nf);const Pv=e=>e.nodeOrigin,Mv=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),Xi=e=>e instanceof Function?e:()=>e;function Iv({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o=2,nodeComponent:i=jv,onClick:s}){const l=tt(Mv,St),u=tt(Pv),f=Xi(t),h=Xi(e),p=Xi(n),y=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return B.createElement(B.Fragment,null,l.map(w=>{const{x:S,y:_}=mr(w,u).positionAbsolute;return B.createElement(i,{key:w.id,x:S,y:_,width:w.width,height:w.height,style:w.style,selected:w.selected,className:p(w),color:f(w),borderRadius:r,strokeColor:h(w),strokeWidth:o,shapeRendering:y,onClick:s,id:w.id})}))}var Av=b.memo(Iv);const $v=200,Rv=150,Lv=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?Xy(Qa(t,e.nodeOrigin),n):n,rfId:e.rfId}},Fv="react-flow__minimap-desc";function rf({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:s=2,nodeComponent:l,maskColor:u="rgb(240, 240, 240, 0.6)",maskStrokeColor:f="none",maskStrokeWidth:h=1,position:p="bottom-right",onClick:y,onNodeClick:w,pannable:S=!1,zoomable:_=!1,ariaLabel:N="React Flow mini map",inversePan:C=!1,zoomStep:R=10,offsetScale:I=5}){const T=wt(),U=b.useRef(null),{boundingRect:q,viewBB:V,rfId:J}=tt(Lv,St),X=(e==null?void 0:e.width)??$v,ee=(e==null?void 0:e.height)??Rv,K=q.width/X,re=q.height/ee,se=Math.max(K,re),k=se*X,M=se*ee,j=I*se,G=q.x-(k-q.width)/2-j,ae=q.y-(M-q.height)/2-j,P=k+j*2,Q=M+j*2,oe=`${Fv}-${J}`,ie=b.useRef(0);ie.current=se,b.useEffect(()=>{if(U.current){const _e=Ut(U.current),De=fe=>{const{transform:Re,d3Selection:Ze,d3Zoom:Pe}=T.getState();if(fe.sourceEvent.type!=="wheel"||!Ze||!Pe)return;const Qe=-fe.sourceEvent.deltaY*(fe.sourceEvent.deltaMode===1?.05:fe.sourceEvent.deltaMode?1:.002)*R,Le=Re[2]*Math.pow(2,Qe);Pe.scaleTo(Ze,Le)},Oe=fe=>{const{transform:Re,d3Selection:Ze,d3Zoom:Pe,translateExtent:Qe,width:Le,height:Be}=T.getState();if(fe.sourceEvent.type!=="mousemove"||!Ze||!Pe)return;const Ue=ie.current*Math.max(1,Re[2])*(C?-1:1),He={x:Re[0]-fe.sourceEvent.movementX*Ue,y:Re[1]-fe.sourceEvent.movementY*Ue},Te=[[0,0],[Le,Be]],ut=Tn.translate(He.x,He.y).scale(Re[2]),yt=Pe.constrain()(ut,Te,Qe);Pe.transform(Ze,yt)},Ie=ud().on("zoom",S?Oe:null).on("zoom.wheel",_?De:null);return _e.call(Ie),()=>{_e.on("zoom",null)}}},[S,_,C,R]);const de=y?_e=>{const De=Jt(_e);y(_e,{x:De[0],y:De[1]})}:void 0,ye=w?(_e,De)=>{const Oe=T.getState().nodeInternals.get(De);w(_e,Oe)}:void 0;return B.createElement(No,{position:p,style:e,className:kt(["react-flow__minimap",t]),"data-testid":"rf__minimap"},B.createElement("svg",{width:X,height:ee,viewBox:`${G} ${ae} ${P} ${Q}`,role:"img","aria-labelledby":oe,ref:U,onClick:de},N&&B.createElement("title",{id:oe},N),B.createElement(Av,{onClick:ye,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:o,nodeStrokeWidth:s,nodeComponent:l}),B.createElement("path",{className:"react-flow__minimap-mask",d:`M${G-j},${ae-j}h${P+j*2}v${Q+j*2}h${-P-j*2}z
        M${V.x},${V.y}h${V.width}v${V.height}h${-V.width}z`,fill:u,fillRule:"evenodd",stroke:f,strokeWidth:h,pointerEvents:"none"})))}rf.displayName="MiniMap";var Wv=b.memo(rf);function Bv(){return B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},B.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Hv(){return B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},B.createElement("path",{d:"M0 0h32v4.2H0z"}))}function zv(){return B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},B.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Yv(){return B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},B.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Vv(){return B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},B.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const go=({children:e,className:t,...n})=>B.createElement("button",{type:"button",className:kt(["react-flow__controls-button",t]),...n},e);go.displayName="ControlButton";const qv=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),of=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:i,onZoomOut:s,onFitView:l,onInteractiveChange:u,className:f,children:h,position:p="bottom-left"})=>{const y=wt(),[w,S]=b.useState(!1),{isInteractive:_,minZoomReached:N,maxZoomReached:C}=tt(qv,St),{zoomIn:R,zoomOut:I,fitView:T}=hc();if(b.useEffect(()=>{S(!0)},[]),!w)return null;const U=()=>{R(),i==null||i()},q=()=>{I(),s==null||s()},V=()=>{T(o),l==null||l()},J=()=>{y.setState({nodesDraggable:!_,nodesConnectable:!_,elementsSelectable:!_}),u==null||u(!_)};return B.createElement(No,{className:kt(["react-flow__controls",f]),position:p,style:e,"data-testid":"rf__controls"},t&&B.createElement(B.Fragment,null,B.createElement(go,{onClick:U,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:C},B.createElement(Bv,null)),B.createElement(go,{onClick:q,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:N},B.createElement(Hv,null))),n&&B.createElement(go,{className:"react-flow__controls-fitview",onClick:V,title:"fit view","aria-label":"fit view"},B.createElement(zv,null)),r&&B.createElement(go,{className:"react-flow__controls-interactive",onClick:J,title:"toggle interactivity","aria-label":"toggle interactivity"},_?B.createElement(Vv,null):B.createElement(Yv,null)),h)};of.displayName="Controls";var Kv=b.memo(of),nn;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(nn||(nn={}));function Uv({color:e,dimensions:t,lineWidth:n}){return B.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Xv({color:e,radius:t}){return B.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const Gv={[nn.Dots]:"#91919a",[nn.Lines]:"#eee",[nn.Cross]:"#e2e2e2"},Zv={[nn.Dots]:1,[nn.Lines]:1,[nn.Cross]:6},Qv=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function af({id:e,variant:t=nn.Dots,gap:n=20,size:r,lineWidth:o=1,offset:i=2,color:s,style:l,className:u}){const f=b.useRef(null),{transform:h,patternId:p}=tt(Qv,St),y=s||Gv[t],w=r||Zv[t],S=t===nn.Dots,_=t===nn.Cross,N=Array.isArray(n)?n:[n,n],C=[N[0]*h[2]||1,N[1]*h[2]||1],R=w*h[2],I=_?[R,R]:C,T=S?[R/i,R/i]:[I[0]/i,I[1]/i];return B.createElement("svg",{className:kt(["react-flow__background",u]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:f,"data-testid":"rf__background"},B.createElement("pattern",{id:p+e,x:h[0]%C[0],y:h[1]%C[1],width:C[0],height:C[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${T[0]},-${T[1]})`},S?B.createElement(Xv,{color:y,radius:R/i}):B.createElement(Uv,{dimensions:I,color:y,lineWidth:o})),B.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${p+e})`}))}af.displayName="Background";var Jv=b.memo(af);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ew={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Pn=(e,t)=>{const n=b.forwardRef(({color:r="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:l="",children:u,...f},h)=>b.createElement("svg",{ref:h,...ew,width:o,height:o,stroke:r,strokeWidth:s?Number(i)*24/Number(o):i,className:["lucide",`lucide-${tw(e)}`,l].join(" "),...f},[...t.map(([p,y])=>b.createElement(p,y)),...Array.isArray(u)?u:[u]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=Pn("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=Pn("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=Pn("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=Pn("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=Pn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=Pn("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=Pn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=Pn("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=Pn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function sf(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=sf(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Lt(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=sf(e))&&(r&&(r+=" "),r+=t);return r}const cf=(e,t)=>{if(!e||!t)return null;const n=new Date(e),o=new Date(t).getTime()-n.getTime(),i=Math.floor(o/1e3),s=Math.floor(i/60),l=Math.floor(s/60),u=[];return l>0&&u.push(`${l}h`),s%60>0&&u.push(`${s%60}m`),i%60>0&&u.push(`${i%60}s`),o%1e3>0&&u.push(`${o%1e3}ms`),u.join(" ")},Gi=e=>{var t;switch((t=e.status)==null?void 0:t.toLowerCase()){case"completed":return"border-green-500";case"running":return"border-blue-500";case"retrying":return"border-orange-600";case"pending":return"border-purple-600";case"terminated":return"border-yellow-500";case"failed":return"border-red-600";default:return"border-gray-500"}},lw=(e,t=50)=>e?e.length<=t?e:e.slice(0,t)+"...":"",uw=e=>{switch(e==null?void 0:e.toLowerCase()){case"completed":return"text-green-600 bg-green-50";case"retrying":return"text-orange-700 bg-orange-100";case"running":return"text-blue-600 bg-blue-50";case"pending":return"text-purple-700 bg-purple-100";case"terminated":return"text-yellow-600 bg-yellow-50";case"failed":return"text-red-700 bg-red-100";default:return"text-gray-600 bg-gray-50"}};function dw({id:e,data:t,expandChildWorkflowNode:n,collapseChildWorkflowNode:r,onShowNodeData:o,onSpreadBatchNodes:i}){var h;const s=t.type==="workflow"||t.type==="childWorkflow",l=t.count&&t.count>1,u=`${e}-${t.type}-${t.workflowId||""}-${t.runId||""}`,f=async()=>{t.count===1&&s&&!t.isLoading&&(t.isExpanded?await r(e,t.runId):await n(e,t.runId))};return g.jsxs("div",{className:"relative min-w-[450px]",children:[g.jsx(Xn,{type:"source",position:je.Right,id:`${e}-right`,style:{top:"50%",transform:"translateY(-50%)"}}),g.jsx(Xn,{type:"target",position:je.Left,id:`${e}-left`,style:{top:"50%",transform:"translateY(-50%)"}}),g.jsx(Xn,{type:"source",position:je.Bottom,id:`${e}-bottom`,style:{left:"25px"}}),g.jsx(Xn,{type:"target",position:je.Top,id:`${e}-top`,style:{left:"25px"}}),g.jsxs("div",{className:"relative",children:[l&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:Lt("absolute rounded-xl shadow-lg border-2 transition-all duration-300",Gi(t),"opacity-40"),style:{top:"-8px",left:"-8px",width:"100%",height:"100%",pointerEvents:"none"},children:g.jsx("div",{className:"p-4 bg-white rounded-xl"})}),g.jsx("div",{className:Lt("absolute rounded-xl shadow-lg border-2 transition-all duration-300",Gi(t),"opacity-70"),style:{top:"-4px",left:"-4px",width:"100%",height:"100%",pointerEvents:"none"},children:g.jsx("div",{className:"p-4 bg-white rounded-xl"})})]}),g.jsx("div",{className:Lt("rounded-xl shadow-lg border-2 transition-all duration-300 relative",Gi(t),t.isLoading&&"opacity-75"),children:g.jsxs("div",{className:Lt("p-4 relative bg-white rounded-xl",s&&!t.isLoading&&!l&&"cursor-pointer",t.isLoading&&"pointer-events-none"),onClick:f,children:[g.jsxs("div",{className:"absolute -top-2.5 -right-2.5 flex gap-1",children:[l&&g.jsx("div",{onClick:p=>{p.stopPropagation(),r(e,t.runId),i==null||i(e)},className:"w-6 h-6 flex items-center justify-center bg-blue-500 hover:bg-blue-600 rounded-full text-white shadow-lg z-10 cursor-pointer",children:g.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4.5a6.5 6.5 0 1 0 4.135 11.286l3.572 3.572a1 1 0 0 0 1.414-1.414l-3.572-3.572A6.5 6.5 0 0 0 11 4.5z"})})}),!l&&g.jsx("div",{onClick:p=>{p.stopPropagation();const y=p.currentTarget.closest(".relative");if(y){const w=y.getBoundingClientRect();o(t,{x:w.left+w.width/2,y:w.top})}},className:"w-6 h-6 flex items-center justify-center bg-gray-500 hover:bg-gray-600 rounded-full text-white shadow-lg z-10 cursor-pointer",children:g.jsx(aw,{className:"w-3 h-3"})})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:Lt("w-8 h-8 rounded flex items-center justify-center flex-shrink-0",s?"bg-amber-50":"bg-fuchsia-50"),children:s?g.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("rect",{x:"9",y:"3",width:"6",height:"6",rx:"1"}),g.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),g.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3M6 15v-3h12v3"})]}):g.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:g.jsx("path",{d:"M5 12L12 5L19 12L12 19L5 12Z"})})}),g.jsxs("div",{className:Lt("min-w-0",s?"":"flex items-center h-[2.5rem]"),children:[g.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:t.title}),s&&g.jsx("p",{className:"text-xs text-gray-500 overflow-hidden text-ellipsis",children:lw(e)})]})]}),g.jsxs("div",{className:"absolute -top-3 left-3 flex gap-2",children:[g.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:s?"rgb(254 243 199)":"rgb(253 244 255)",color:s?"rgb(217 119 6)":"rgb(192 38 211)"},children:s?"workflow":"activity"}),g.jsx("div",{className:Lt("px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",uw(t.status)),children:((h=t.status)==null?void 0:h.toLowerCase())||"unknown"}),l&&g.jsxs("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgba(224, 242, 254, 0.9)",color:"#0369a1"},children:["batch: ",t.count]}),t.startTime&&t.endTime&&g.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgba(236, 254, 255, 0.9)",color:"#0891b2"},children:cf(t.startTime,t.endTime)})]}),t.taskQueue&&g.jsx("div",{className:"absolute -bottom-2.5 right-2",children:g.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm",style:{backgroundColor:"rgba(240, 253, 244, 0.9)",color:"#166534",fontSize:"0.7rem"},children:t.taskQueue?t.taskQueue.name:""})}),t.isLoading&&g.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-50 flex items-center justify-center z-20",children:g.jsx("div",{className:"bg-white p-2 rounded-full shadow-lg",children:g.jsx(ow,{className:"w-5 h-5 text-blue-500 animate-spin"})})})]})})]})]},u)}function fw({nodes:e,onFocusChange:t,selectedWorkflow:n,onReset:r,onClose:o}){const[i,s]=b.useState(288),l=b.useRef(null),u=b.useRef(null),f=b.useRef(!1),h=e.filter(w=>w.data.type==="workflow"||w.data.type==="childWorkflow"),p=w=>{t(n===w?null:w)};b.useEffect(()=>{const w=_=>{if(!f.current||!u.current)return;const N=_.clientX-u.current.getBoundingClientRect().left;N>200&&N<600&&s(N)},S=()=>{f.current&&(f.current=!1,document.body.style.cursor="default")};return window.addEventListener("mousemove",w),window.addEventListener("mouseup",S),()=>{window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",S)}},[]);const y=w=>{w.preventDefault(),f.current=!0,document.body.style.cursor="col-resize"};return g.jsxs("div",{ref:u,className:"absolute left-0 top-0 bottom-0 bg-white shadow-lg border-r z-10",style:{width:`${i}px`},children:[g.jsxs("div",{className:"p-4 border-b flex items-center justify-between bg-gray-50",children:[g.jsx("h3",{className:"font-semibold text-gray-800",children:"Focus Workflow"}),g.jsx("button",{onClick:o,className:"p-1 hover:bg-gray-200 rounded-full transition-colors",children:g.jsx(pr,{className:"w-5 h-5 text-gray-600"})})]}),g.jsxs("div",{className:"p-4 overflow-y-auto",children:[g.jsx("button",{onClick:r,className:"w-full mb-4 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md transition-colors",children:"Reset View"}),g.jsx("div",{className:"space-y-2",children:h.map(w=>g.jsx("button",{onClick:()=>p(w.id),className:Lt("w-full px-3 py-2 text-left rounded-md transition-colors","text-sm",n===w.id?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-50"),children:w.data.title},w.id))})]}),g.jsx("div",{ref:l,onMouseDown:y,className:"w-1 cursor-col-resize hover:bg-gray-300 absolute top-0 right-0 bottom-0"})]})}var lf={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Mr,function(){var n=function(a,c){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(d[v]=m[v])})(a,c)},r=function(){return(r=Object.assign||function(a){for(var c,d=1,m=arguments.length;d<m;d++)for(var v in c=arguments[d])Object.prototype.hasOwnProperty.call(c,v)&&(a[v]=c[v]);return a}).apply(this,arguments)};function o(a,c,d){for(var m,v=0,x=c.length;v<x;v++)!m&&v in c||((m=m||Array.prototype.slice.call(c,0,v))[v]=c[v]);return a.concat(m||Array.prototype.slice.call(c))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Mr,s=Object.keys,l=Array.isArray;function u(a,c){return typeof c!="object"||s(c).forEach(function(d){a[d]=c[d]}),a}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var f=Object.getPrototypeOf,h={}.hasOwnProperty;function p(a,c){return h.call(a,c)}function y(a,c){typeof c=="function"&&(c=c(f(a))),(typeof Reflect>"u"?s:Reflect.ownKeys)(c).forEach(function(d){S(a,d,c[d])})}var w=Object.defineProperty;function S(a,c,d,m){w(a,c,u(d&&p(d,"get")&&typeof d.get=="function"?{get:d.get,set:d.set,configurable:!0}:{value:d,configurable:!0,writable:!0},m))}function _(a){return{from:function(c){return a.prototype=Object.create(c.prototype),S(a.prototype,"constructor",a),{extend:y.bind(null,a.prototype)}}}}var N=Object.getOwnPropertyDescriptor,C=[].slice;function R(a,c,d){return C.call(a,c,d)}function I(a,c){return c(a)}function T(a){if(!a)throw new Error("Assertion Failed")}function U(a){i.setImmediate?setImmediate(a):setTimeout(a,0)}function q(a,c){if(typeof c=="string"&&p(a,c))return a[c];if(!c)return a;if(typeof c!="string"){for(var d=[],m=0,v=c.length;m<v;++m){var x=q(a,c[m]);d.push(x)}return d}var E=c.indexOf(".");if(E!==-1){var D=a[c.substr(0,E)];return D==null?void 0:q(D,c.substr(E+1))}}function V(a,c,d){if(a&&c!==void 0&&!("isFrozen"in Object&&Object.isFrozen(a)))if(typeof c!="string"&&"length"in c){T(typeof d!="string"&&"length"in d);for(var m=0,v=c.length;m<v;++m)V(a,c[m],d[m])}else{var x,E,D=c.indexOf(".");D!==-1?(x=c.substr(0,D),(E=c.substr(D+1))===""?d===void 0?l(a)&&!isNaN(parseInt(x))?a.splice(x,1):delete a[x]:a[x]=d:V(D=!(D=a[x])||!p(a,x)?a[x]={}:D,E,d)):d===void 0?l(a)&&!isNaN(parseInt(c))?a.splice(c,1):delete a[c]:a[c]=d}}function J(a){var c,d={};for(c in a)p(a,c)&&(d[c]=a[c]);return d}var X=[].concat;function ee(a){return X.apply([],a)}var Sn="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ee([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(c){return c+a+"Array"})}))).filter(function(a){return i[a]}),K=new Set(Sn.map(function(a){return i[a]})),re=null;function se(a){return re=new WeakMap,a=function c(d){if(!d||typeof d!="object")return d;var m=re.get(d);if(m)return m;if(l(d)){m=[],re.set(d,m);for(var v=0,x=d.length;v<x;++v)m.push(c(d[v]))}else if(K.has(d.constructor))m=d;else{var E,D=f(d);for(E in m=D===Object.prototype?{}:Object.create(D),re.set(d,m),d)p(d,E)&&(m[E]=c(d[E]))}return m}(a),re=null,a}var k={}.toString;function M(a){return k.call(a).slice(8,-1)}var j=typeof Symbol<"u"?Symbol.iterator:"@@iterator",G=typeof j=="symbol"?function(a){var c;return a!=null&&(c=a[j])&&c.apply(a)}:function(){return null};function ae(a,c){return c=a.indexOf(c),0<=c&&a.splice(c,1),0<=c}var P={};function Q(a){var c,d,m,v;if(arguments.length===1){if(l(a))return a.slice();if(this===P&&typeof a=="string")return[a];if(v=G(a)){for(d=[];!(m=v.next()).done;)d.push(m.value);return d}if(a==null)return[a];if(typeof(c=a.length)!="number")return[a];for(d=new Array(c);c--;)d[c]=a[c];return d}for(c=arguments.length,d=new Array(c);c--;)d[c]=arguments[c];return d}var oe=typeof Symbol<"u"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Nt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Kt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Nt),ie={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function de(a,c){this.name=a,this.message=c}function ye(a,c){return a+". Errors: "+Object.keys(c).map(function(d){return c[d].toString()}).filter(function(d,m,v){return v.indexOf(d)===m}).join(`
`)}function _e(a,c,d,m){this.failures=c,this.failedKeys=m,this.successCount=d,this.message=ye(a,c)}function De(a,c){this.name="BulkError",this.failures=Object.keys(c).map(function(d){return c[d]}),this.failuresByPos=c,this.message=ye(a,this.failures)}_(de).from(Error).extend({toString:function(){return this.name+": "+this.message}}),_(_e).from(de),_(De).from(de);var Oe=Kt.reduce(function(a,c){return a[c]=c+"Error",a},{}),Ie=de,fe=Kt.reduce(function(a,c){var d=c+"Error";function m(v,x){this.name=d,v?typeof v=="string"?(this.message="".concat(v).concat(x?`
 `+x:""),this.inner=x||null):typeof v=="object"&&(this.message="".concat(v.name," ").concat(v.message),this.inner=v):(this.message=ie[c]||d,this.inner=null)}return _(m).from(Ie),a[c]=m,a},{});fe.Syntax=SyntaxError,fe.Type=TypeError,fe.Range=RangeError;var Re=Nt.reduce(function(a,c){return a[c+"Error"]=fe[c],a},{}),Ze=Kt.reduce(function(a,c){return["Syntax","Type","Range"].indexOf(c)===-1&&(a[c+"Error"]=fe[c]),a},{});function Pe(){}function Qe(a){return a}function Le(a,c){return a==null||a===Qe?c:function(d){return c(a(d))}}function Be(a,c){return function(){a.apply(this,arguments),c.apply(this,arguments)}}function Ue(a,c){return a===Pe?c:function(){var d=a.apply(this,arguments);d!==void 0&&(arguments[0]=d);var m=this.onsuccess,v=this.onerror;this.onsuccess=null,this.onerror=null;var x=c.apply(this,arguments);return m&&(this.onsuccess=this.onsuccess?Be(m,this.onsuccess):m),v&&(this.onerror=this.onerror?Be(v,this.onerror):v),x!==void 0?x:d}}function He(a,c){return a===Pe?c:function(){a.apply(this,arguments);var d=this.onsuccess,m=this.onerror;this.onsuccess=this.onerror=null,c.apply(this,arguments),d&&(this.onsuccess=this.onsuccess?Be(d,this.onsuccess):d),m&&(this.onerror=this.onerror?Be(m,this.onerror):m)}}function Te(a,c){return a===Pe?c:function(d){var m=a.apply(this,arguments);u(d,m);var v=this.onsuccess,x=this.onerror;return this.onsuccess=null,this.onerror=null,d=c.apply(this,arguments),v&&(this.onsuccess=this.onsuccess?Be(v,this.onsuccess):v),x&&(this.onerror=this.onerror?Be(x,this.onerror):x),m===void 0?d===void 0?void 0:d:u(m,d)}}function ut(a,c){return a===Pe?c:function(){return c.apply(this,arguments)!==!1&&a.apply(this,arguments)}}function yt(a,c){return a===Pe?c:function(){var d=a.apply(this,arguments);if(d&&typeof d.then=="function"){for(var m=this,v=arguments.length,x=new Array(v);v--;)x[v]=arguments[v];return d.then(function(){return c.apply(m,x)})}return c.apply(this,arguments)}}Ze.ModifyError=_e,Ze.DexieError=de,Ze.BulkError=De;var mt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Bt(a){mt=a}var bt={},Et=100,Sn=typeof Promise>"u"?[]:function(){var a=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[a,f(a),a];var c=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[c,f(c),a]}(),Nt=Sn[0],Kt=Sn[1],Sn=Sn[2],Kt=Kt&&Kt.then,pt=Nt&&Nt.constructor,Pt=!!Sn,Ct=function(a,c){Me.push([a,c]),ve&&(queueMicrotask(et),ve=!1)},ce=!0,ve=!0,ue=[],me=[],Ee=Qe,Ne={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Pe,pgp:!1,env:{},finalize:Pe},he=Ne,Me=[],Je=0,nt=[];function be(a){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var c=this._PSD=he;if(typeof a!="function"){if(a!==bt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&vn(this,this._value))}this._state=null,this._value=null,++c.ref,function d(m,v){try{v(function(x){if(m._state===null){if(x===m)throw new TypeError("A promise cannot be resolved with itself.");var E=m._lib&&vt();x&&typeof x.then=="function"?d(m,function(D,A){x instanceof be?x._then(D,A):x.then(D,A)}):(m._state=!0,m._value=x,rt(m)),E&&an()}},vn.bind(null,m))}catch(x){vn(m,x)}}(this,a)}var $t={get:function(){var a=he,c=ln;function d(m,v){var x=this,E=!a.global&&(a!==he||c!==ln),D=E&&!Ht(),A=new be(function(L,H){gt(x,new In(Tt(m,a,E,D),Tt(v,a,E,D),L,H,a))});return this._consoleTask&&(A._consoleTask=this._consoleTask),A}return d.prototype=bt,d},set:function(a){S(this,"then",a&&a.prototype===bt?$t:{get:function(){return a},set:$t.set})}};function In(a,c,d,m,v){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof c=="function"?c:null,this.resolve=d,this.reject=m,this.psd=v}function vn(a,c){var d,m;me.push(c),a._state===null&&(d=a._lib&&vt(),c=Ee(c),a._state=!1,a._value=c,m=a,ue.some(function(v){return v._value===m._value})||ue.push(m),rt(a),d&&an())}function rt(a){var c=a._listeners;a._listeners=[];for(var d=0,m=c.length;d<m;++d)gt(a,c[d]);var v=a._PSD;--v.ref||v.finalize(),Je===0&&(++Je,Ct(function(){--Je==0&&wn()},[]))}function gt(a,c){if(a._state!==null){var d=a._state?c.onFulfilled:c.onRejected;if(d===null)return(a._state?c.resolve:c.reject)(a._value);++c.psd.ref,++Je,Ct(An,[d,a,c])}else a._listeners.push(c)}function An(a,c,d){try{var m,v=c._value;!c._state&&me.length&&(me=[]),m=mt&&c._consoleTask?c._consoleTask.run(function(){return a(v)}):a(v),c._state||me.indexOf(v)!==-1||function(x){for(var E=ue.length;E;)if(ue[--E]._value===x._value)return ue.splice(E,1)}(c),d.resolve(m)}catch(x){d.reject(x)}finally{--Je==0&&wn(),--d.psd.ref||d.psd.finalize()}}function et(){ft(Ne,function(){vt()&&an()})}function vt(){var a=ce;return ve=ce=!1,a}function an(){var a,c,d;do for(;0<Me.length;)for(a=Me,Me=[],d=a.length,c=0;c<d;++c){var m=a[c];m[0].apply(null,m[1])}while(0<Me.length);ve=ce=!0}function wn(){var a=ue;ue=[],a.forEach(function(m){m._PSD.onunhandled.call(null,m._value,m)});for(var c=nt.slice(0),d=c.length;d;)c[--d]()}function bn(a){return new be(bt,!1,a)}function Xe(a,c){var d=he;return function(){var m=vt(),v=he;try{return qe(d,!0),a.apply(this,arguments)}catch(x){c&&c(x)}finally{qe(v,!1),m&&an()}}}y(be.prototype,{then:$t,_then:function(a,c){gt(this,new In(null,null,a,c,he))},catch:function(a){if(arguments.length===1)return this.then(null,a);var c=a,d=arguments[1];return typeof c=="function"?this.then(null,function(m){return(m instanceof c?d:bn)(m)}):this.then(null,function(m){return(m&&m.name===c?d:bn)(m)})},finally:function(a){return this.then(function(c){return be.resolve(a()).then(function(){return c})},function(c){return be.resolve(a()).then(function(){return bn(c)})})},timeout:function(a,c){var d=this;return a<1/0?new be(function(m,v){var x=setTimeout(function(){return v(new fe.Timeout(c))},a);d.then(m,v).finally(clearTimeout.bind(null,x))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&S(be.prototype,Symbol.toStringTag,"Dexie.Promise"),Ne.env=ot(),y(be,{all:function(){var a=Q.apply(null,arguments).map(Rn);return new be(function(c,d){a.length===0&&c([]);var m=a.length;a.forEach(function(v,x){return be.resolve(v).then(function(E){a[x]=E,--m||c(a)},d)})})},resolve:function(a){return a instanceof be?a:a&&typeof a.then=="function"?new be(function(c,d){a.then(c,d)}):new be(bt,!0,a)},reject:bn,race:function(){var a=Q.apply(null,arguments).map(Rn);return new be(function(c,d){a.map(function(m){return be.resolve(m).then(c,d)})})},PSD:{get:function(){return he},set:function(a){return he=a}},totalEchoes:{get:function(){return ln}},newPSD:Rt,usePSD:ft,scheduler:{get:function(){return Ct},set:function(a){Ct=a}},rejectionMapper:{get:function(){return Ee},set:function(a){Ee=a}},follow:function(a,c){return new be(function(d,m){return Rt(function(v,x){var E=he;E.unhandleds=[],E.onunhandled=x,E.finalize=Be(function(){var D,A=this;D=function(){A.unhandleds.length===0?v():x(A.unhandleds[0])},nt.push(function L(){D(),nt.splice(nt.indexOf(L),1)}),++Je,Ct(function(){--Je==0&&wn()},[])},E.finalize),a()},c,d,m)})}}),pt&&(pt.allSettled&&S(be,"allSettled",function(){var a=Q.apply(null,arguments).map(Rn);return new be(function(c){a.length===0&&c([]);var d=a.length,m=new Array(d);a.forEach(function(v,x){return be.resolve(v).then(function(E){return m[x]={status:"fulfilled",value:E}},function(E){return m[x]={status:"rejected",reason:E}}).then(function(){return--d||c(m)})})})}),pt.any&&typeof AggregateError<"u"&&S(be,"any",function(){var a=Q.apply(null,arguments).map(Rn);return new be(function(c,d){a.length===0&&d(new AggregateError([]));var m=a.length,v=new Array(m);a.forEach(function(x,E){return be.resolve(x).then(function(D){return c(D)},function(D){v[E]=D,--m||d(new AggregateError(v))})})})}),pt.withResolvers&&(be.withResolvers=pt.withResolvers));var st={awaits:0,echoes:0,id:0},$n=0,sn=[],cn=0,ln=0,Kr=0;function Rt(a,c,d,m){var v=he,x=Object.create(v);return x.parent=v,x.ref=0,x.global=!1,x.id=++Kr,Ne.env,x.env=Pt?{Promise:be,PromiseProp:{value:be,configurable:!0,writable:!0},all:be.all,race:be.race,allSettled:be.allSettled,any:be.any,resolve:be.resolve,reject:be.reject}:{},c&&u(x,c),++v.ref,x.finalize=function(){--this.parent.ref||this.parent.finalize()},m=ft(x,a,d,m),x.ref===0&&x.finalize(),m}function Zt(){return st.id||(st.id=++$n),++st.awaits,st.echoes+=Et,st.id}function Ht(){return!!st.awaits&&(--st.awaits==0&&(st.id=0),st.echoes=st.awaits*Et,!0)}function Rn(a){return st.echoes&&a&&a.constructor===pt?(Zt(),a.then(function(c){return Ht(),c},function(c){return Ht(),at(c)})):a}function Fe(){var a=sn[sn.length-1];sn.pop(),qe(a,!1)}function qe(a,c){var d,m=he;(c?!st.echoes||cn++&&a===he:!cn||--cn&&a===he)||queueMicrotask(c?(function(v){++ln,st.echoes&&--st.echoes!=0||(st.echoes=st.awaits=st.id=0),sn.push(he),qe(v,!0)}).bind(null,a):Fe),a!==he&&(he=a,m===Ne&&(Ne.env=ot()),Pt&&(d=Ne.env.Promise,c=a.env,(m.global||a.global)&&(Object.defineProperty(i,"Promise",c.PromiseProp),d.all=c.all,d.race=c.race,d.resolve=c.resolve,d.reject=c.reject,c.allSettled&&(d.allSettled=c.allSettled),c.any&&(d.any=c.any))))}function ot(){var a=i.Promise;return Pt?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject}:{}}function ft(a,c,d,m,v){var x=he;try{return qe(a,!0),c(d,m,v)}finally{qe(x,!1)}}function Tt(a,c,d,m){return typeof a!="function"?a:function(){var v=he;d&&Zt(),qe(c,!0);try{return a.apply(this,arguments)}finally{qe(v,!1),m&&queueMicrotask(Ht)}}}function xn(a){Promise===pt&&st.echoes===0?cn===0?a():enqueueNativeMicroTask(a):setTimeout(a,0)}(""+Kt).indexOf("[native code]")===-1&&(Zt=Ht=Pe);var at=be.reject,qt="￿",Qt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Vo="String expected.",Ln=[],_r="__dbnames",Ur="readonly",Xr="readwrite";function un(a,c){return a?c?function(){return a.apply(this,arguments)&&c.apply(this,arguments)}:a:c}var qo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function kr(a){return typeof a!="string"||/\./.test(a)?function(c){return c}:function(c){return c[a]===void 0&&a in c&&delete(c=se(c))[a],c}}function Ko(){throw fe.Type()}function We(a,c){try{var d=Mc(a),m=Mc(c);if(d!==m)return d==="Array"?1:m==="Array"?-1:d==="binary"?1:m==="binary"?-1:d==="string"?1:m==="string"?-1:d==="Date"?1:m!=="Date"?NaN:-1;switch(d){case"number":case"Date":case"string":return c<a?1:a<c?-1:0;case"binary":return function(v,x){for(var E=v.length,D=x.length,A=E<D?E:D,L=0;L<A;++L)if(v[L]!==x[L])return v[L]<x[L]?-1:1;return E===D?0:E<D?-1:1}(Ic(a),Ic(c));case"Array":return function(v,x){for(var E=v.length,D=x.length,A=E<D?E:D,L=0;L<A;++L){var H=We(v[L],x[L]);if(H!==0)return H}return E===D?0:E<D?-1:1}(a,c)}}catch{}return NaN}function Mc(a){var c=typeof a;return c!="object"?c:ArrayBuffer.isView(a)?"binary":(a=M(a),a==="ArrayBuffer"?"binary":a)}function Ic(a){return a instanceof Uint8Array?a:ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var Ac=(it.prototype._trans=function(a,c,d){var m=this._tx||he.trans,v=this.name,x=mt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(a==="readonly"?"read":"write"," ").concat(this.name));function E(L,H,O){if(!O.schema[v])throw new fe.NotFound("Table "+v+" not part of transaction");return c(O.idbtrans,O)}var D=vt();try{var A=m&&m.db._novip===this.db._novip?m===he.trans?m._promise(a,E,d):Rt(function(){return m._promise(a,E,d)},{trans:m,transless:he.transless||he}):function L(H,O,Y,$){if(H.idbdb&&(H._state.openComplete||he.letThrough||H._vip)){var W=H._createTransaction(O,Y,H._dbSchema);try{W.create(),H._state.PR1398_maxLoop=3}catch(z){return z.name===Oe.InvalidState&&H.isOpen()&&0<--H._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),H.close({disableAutoOpen:!1}),H.open().then(function(){return L(H,O,Y,$)})):at(z)}return W._promise(O,function(z,F){return Rt(function(){return he.trans=W,$(z,F,W)})}).then(function(z){if(O==="readwrite")try{W.idbtrans.commit()}catch{}return O==="readonly"?z:W._completion.then(function(){return z})})}if(H._state.openComplete)return at(new fe.DatabaseClosed(H._state.dbOpenError));if(!H._state.isBeingOpened){if(!H._state.autoOpen)return at(new fe.DatabaseClosed);H.open().catch(Pe)}return H._state.dbReadyPromise.then(function(){return L(H,O,Y,$)})}(this.db,a,[this.name],E);return x&&(A._consoleTask=x,A=A.catch(function(L){return console.trace(L),at(L)})),A}finally{D&&an()}},it.prototype.get=function(a,c){var d=this;return a&&a.constructor===Object?this.where(a).first(c):a==null?at(new fe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(m){return d.core.get({trans:m,key:a}).then(function(v){return d.hook.reading.fire(v)})}).then(c)},it.prototype.where=function(a){if(typeof a=="string")return new this.db.WhereClause(this,a);if(l(a))return new this.db.WhereClause(this,"[".concat(a.join("+"),"]"));var c=s(a);if(c.length===1)return this.where(c[0]).equals(a[c[0]]);var d=this.schema.indexes.concat(this.schema.primKey).filter(function(D){if(D.compound&&c.every(function(L){return 0<=D.keyPath.indexOf(L)})){for(var A=0;A<c.length;++A)if(c.indexOf(D.keyPath[A])===-1)return!1;return!0}return!1}).sort(function(D,A){return D.keyPath.length-A.keyPath.length})[0];if(d&&this.db._maxKey!==qt){var x=d.keyPath.slice(0,c.length);return this.where(x).equals(x.map(function(A){return a[A]}))}!d&&mt&&console.warn("The query ".concat(JSON.stringify(a)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(c.join("+"),"]"));var m=this.schema.idxByName;function v(D,A){return We(D,A)===0}var E=c.reduce(function(O,A){var L=O[0],H=O[1],O=m[A],Y=a[A];return[L||O,L||!O?un(H,O&&O.multi?function($){return $=q($,A),l($)&&$.some(function(W){return v(Y,W)})}:function($){return v(Y,q($,A))}):H]},[null,null]),x=E[0],E=E[1];return x?this.where(x.name).equals(a[x.keyPath]).filter(E):d?this.filter(E):this.where(c).equals("")},it.prototype.filter=function(a){return this.toCollection().and(a)},it.prototype.count=function(a){return this.toCollection().count(a)},it.prototype.offset=function(a){return this.toCollection().offset(a)},it.prototype.limit=function(a){return this.toCollection().limit(a)},it.prototype.each=function(a){return this.toCollection().each(a)},it.prototype.toArray=function(a){return this.toCollection().toArray(a)},it.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},it.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,l(a)?"[".concat(a.join("+"),"]"):a))},it.prototype.reverse=function(){return this.toCollection().reverse()},it.prototype.mapToClass=function(a){var c,d=this.db,m=this.name;function v(){return c!==null&&c.apply(this,arguments)||this}(this.schema.mappedClass=a).prototype instanceof Ko&&(function(A,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function H(){this.constructor=A}n(A,L),A.prototype=L===null?Object.create(L):(H.prototype=L.prototype,new H)}(v,c=a),Object.defineProperty(v.prototype,"db",{get:function(){return d},enumerable:!1,configurable:!0}),v.prototype.table=function(){return m},a=v);for(var x=new Set,E=a.prototype;E;E=f(E))Object.getOwnPropertyNames(E).forEach(function(A){return x.add(A)});function D(A){if(!A)return A;var L,H=Object.create(a.prototype);for(L in A)if(!x.has(L))try{H[L]=A[L]}catch{}return H}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=D,this.hook("reading",D),a},it.prototype.defineClass=function(){return this.mapToClass(function(a){u(this,a)})},it.prototype.add=function(a,c){var d=this,m=this.schema.primKey,v=m.auto,x=m.keyPath,E=a;return x&&v&&(E=kr(x)(a)),this._trans("readwrite",function(D){return d.core.mutate({trans:D,type:"add",keys:c!=null?[c]:null,values:[E]})}).then(function(D){return D.numFailures?be.reject(D.failures[0]):D.lastResult}).then(function(D){if(x)try{V(a,x,D)}catch{}return D})},it.prototype.update=function(a,c){return typeof a!="object"||l(a)?this.where(":id").equals(a).modify(c):(a=q(a,this.schema.primKey.keyPath),a===void 0?at(new fe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(a).modify(c))},it.prototype.put=function(a,c){var d=this,m=this.schema.primKey,v=m.auto,x=m.keyPath,E=a;return x&&v&&(E=kr(x)(a)),this._trans("readwrite",function(D){return d.core.mutate({trans:D,type:"put",values:[E],keys:c!=null?[c]:null})}).then(function(D){return D.numFailures?be.reject(D.failures[0]):D.lastResult}).then(function(D){if(x)try{V(a,x,D)}catch{}return D})},it.prototype.delete=function(a){var c=this;return this._trans("readwrite",function(d){return c.core.mutate({trans:d,type:"delete",keys:[a]})}).then(function(d){return d.numFailures?be.reject(d.failures[0]):void 0})},it.prototype.clear=function(){var a=this;return this._trans("readwrite",function(c){return a.core.mutate({trans:c,type:"deleteRange",range:qo})}).then(function(c){return c.numFailures?be.reject(c.failures[0]):void 0})},it.prototype.bulkGet=function(a){var c=this;return this._trans("readonly",function(d){return c.core.getMany({keys:a,trans:d}).then(function(m){return m.map(function(v){return c.hook.reading.fire(v)})})})},it.prototype.bulkAdd=function(a,c,d){var m=this,v=Array.isArray(c)?c:void 0,x=(d=d||(v?void 0:c))?d.allKeys:void 0;return this._trans("readwrite",function(E){var L=m.schema.primKey,D=L.auto,L=L.keyPath;if(L&&v)throw new fe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(v&&v.length!==a.length)throw new fe.InvalidArgument("Arguments objects and keys must have the same length");var A=a.length,L=L&&D?a.map(kr(L)):a;return m.core.mutate({trans:E,type:"add",keys:v,values:L,wantResults:x}).then(function(W){var O=W.numFailures,Y=W.results,$=W.lastResult,W=W.failures;if(O===0)return x?Y:$;throw new De("".concat(m.name,".bulkAdd(): ").concat(O," of ").concat(A," operations failed"),W)})})},it.prototype.bulkPut=function(a,c,d){var m=this,v=Array.isArray(c)?c:void 0,x=(d=d||(v?void 0:c))?d.allKeys:void 0;return this._trans("readwrite",function(E){var L=m.schema.primKey,D=L.auto,L=L.keyPath;if(L&&v)throw new fe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(v&&v.length!==a.length)throw new fe.InvalidArgument("Arguments objects and keys must have the same length");var A=a.length,L=L&&D?a.map(kr(L)):a;return m.core.mutate({trans:E,type:"put",keys:v,values:L,wantResults:x}).then(function(W){var O=W.numFailures,Y=W.results,$=W.lastResult,W=W.failures;if(O===0)return x?Y:$;throw new De("".concat(m.name,".bulkPut(): ").concat(O," of ").concat(A," operations failed"),W)})})},it.prototype.bulkUpdate=function(a){var c=this,d=this.core,m=a.map(function(E){return E.key}),v=a.map(function(E){return E.changes}),x=[];return this._trans("readwrite",function(E){return d.getMany({trans:E,keys:m,cache:"clone"}).then(function(D){var A=[],L=[];a.forEach(function(O,Y){var $=O.key,W=O.changes,z=D[Y];if(z){for(var F=0,Z=Object.keys(W);F<Z.length;F++){var te=Z[F],ne=W[te];if(te===c.schema.primKey.keyPath){if(We(ne,$)!==0)throw new fe.Constraint("Cannot update primary key in bulkUpdate()")}else V(z,te,ne)}x.push(Y),A.push($),L.push(z)}});var H=A.length;return d.mutate({trans:E,type:"put",keys:A,values:L,updates:{keys:m,changeSpecs:v}}).then(function(O){var Y=O.numFailures,$=O.failures;if(Y===0)return H;for(var W=0,z=Object.keys($);W<z.length;W++){var F,Z=z[W],te=x[Number(Z)];te!=null&&(F=$[Z],delete $[Z],$[te]=F)}throw new De("".concat(c.name,".bulkUpdate(): ").concat(Y," of ").concat(H," operations failed"),$)})})})},it.prototype.bulkDelete=function(a){var c=this,d=a.length;return this._trans("readwrite",function(m){return c.core.mutate({trans:m,type:"delete",keys:a})}).then(function(E){var v=E.numFailures,x=E.lastResult,E=E.failures;if(v===0)return x;throw new De("".concat(c.name,".bulkDelete(): ").concat(v," of ").concat(d," operations failed"),E)})},it);function it(){}function Gr(a){function c(E,D){if(D){for(var A=arguments.length,L=new Array(A-1);--A;)L[A-1]=arguments[A];return d[E].subscribe.apply(null,L),a}if(typeof E=="string")return d[E]}var d={};c.addEventType=x;for(var m=1,v=arguments.length;m<v;++m)x(arguments[m]);return c;function x(E,D,A){if(typeof E!="object"){var L;D=D||ut;var H={subscribers:[],fire:A=A||Pe,subscribe:function(O){H.subscribers.indexOf(O)===-1&&(H.subscribers.push(O),H.fire=D(H.fire,O))},unsubscribe:function(O){H.subscribers=H.subscribers.filter(function(Y){return Y!==O}),H.fire=H.subscribers.reduce(D,A)}};return d[E]=c[E]=H}s(L=E).forEach(function(O){var Y=L[O];if(l(Y))x(O,L[O][0],L[O][1]);else{if(Y!=="asap")throw new fe.InvalidArgument("Invalid event config");var $=x(O,Qe,function(){for(var W=arguments.length,z=new Array(W);W--;)z[W]=arguments[W];$.subscribers.forEach(function(F){U(function(){F.apply(null,z)})})})}})}}function Zr(a,c){return _(c).from({prototype:a}),c}function Er(a,c){return!(a.filter||a.algorithm||a.or)&&(c?a.justLimit:!a.replayFilter)}function mi(a,c){a.filter=un(a.filter,c)}function pi(a,c,d){var m=a.replayFilter;a.replayFilter=m?function(){return un(m(),c())}:c,a.justLimit=d&&!m}function Uo(a,c){if(a.isPrimKey)return c.primaryKey;var d=c.getIndexByKeyPath(a.index);if(!d)throw new fe.Schema("KeyPath "+a.index+" on object store "+c.name+" is not indexed");return d}function $c(a,c,d){var m=Uo(a,c.schema);return c.openCursor({trans:d,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:m,range:a.range}})}function Xo(a,c,d,m){var v=a.replayFilter?un(a.filter,a.replayFilter()):a.filter;if(a.or){var x={},E=function(D,A,L){var H,O;v&&!v(A,L,function(Y){return A.stop(Y)},function(Y){return A.fail(Y)})||((O=""+(H=A.primaryKey))=="[object ArrayBuffer]"&&(O=""+new Uint8Array(H)),p(x,O)||(x[O]=!0,c(D,A,L)))};return Promise.all([a.or._iterate(E,d),Rc($c(a,m,d),a.algorithm,E,!a.keysOnly&&a.valueMapper)])}return Rc($c(a,m,d),un(a.algorithm,v),c,!a.keysOnly&&a.valueMapper)}function Rc(a,c,d,m){var v=Xe(m?function(x,E,D){return d(m(x),E,D)}:d);return a.then(function(x){if(x)return x.start(function(){var E=function(){return x.continue()};c&&!c(x,function(D){return E=D},function(D){x.stop(D),E=Pe},function(D){x.fail(D),E=Pe})||v(x.value,x,function(D){return E=D}),E()})})}var Sn=Symbol(),Qr=(Lc.prototype.execute=function(a){if(this.add!==void 0){var c=this.add;if(l(c))return o(o([],l(a)?a:[],!0),c).sort();if(typeof c=="number")return(Number(a)||0)+c;if(typeof c=="bigint")try{return BigInt(a)+c}catch{return BigInt(0)+c}throw new TypeError("Invalid term ".concat(c))}if(this.remove!==void 0){var d=this.remove;if(l(d))return l(a)?a.filter(function(m){return!d.includes(m)}).sort():[];if(typeof d=="number")return Number(a)-d;if(typeof d=="bigint")try{return BigInt(a)-d}catch{return BigInt(0)-d}throw new TypeError("Invalid subtrahend ".concat(d))}return c=(c=this.replacePrefix)===null||c===void 0?void 0:c[0],c&&typeof a=="string"&&a.startsWith(c)?this.replacePrefix[1]+a.substring(c.length):a},Lc);function Lc(a){Object.assign(this,a)}var ph=(Ke.prototype._read=function(a,c){var d=this._ctx;return d.error?d.table._trans(null,at.bind(null,d.error)):d.table._trans("readonly",a).then(c)},Ke.prototype._write=function(a){var c=this._ctx;return c.error?c.table._trans(null,at.bind(null,c.error)):c.table._trans("readwrite",a,"locked")},Ke.prototype._addAlgorithm=function(a){var c=this._ctx;c.algorithm=un(c.algorithm,a)},Ke.prototype._iterate=function(a,c){return Xo(this._ctx,a,c,this._ctx.table.core)},Ke.prototype.clone=function(a){var c=Object.create(this.constructor.prototype),d=Object.create(this._ctx);return a&&u(d,a),c._ctx=d,c},Ke.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ke.prototype.each=function(a){var c=this._ctx;return this._read(function(d){return Xo(c,a,d,c.table.core)})},Ke.prototype.count=function(a){var c=this;return this._read(function(d){var m=c._ctx,v=m.table.core;if(Er(m,!0))return v.count({trans:d,query:{index:Uo(m,v.schema),range:m.range}}).then(function(E){return Math.min(E,m.limit)});var x=0;return Xo(m,function(){return++x,!1},d,v).then(function(){return x})}).then(a)},Ke.prototype.sortBy=function(a,c){var d=a.split(".").reverse(),m=d[0],v=d.length-1;function x(A,L){return L?x(A[d[L]],L-1):A[m]}var E=this._ctx.dir==="next"?1:-1;function D(A,L){return We(x(A,v),x(L,v))*E}return this.toArray(function(A){return A.sort(D)}).then(c)},Ke.prototype.toArray=function(a){var c=this;return this._read(function(d){var m=c._ctx;if(m.dir==="next"&&Er(m,!0)&&0<m.limit){var v=m.valueMapper,x=Uo(m,m.table.core.schema);return m.table.core.query({trans:d,limit:m.limit,values:!0,query:{index:x,range:m.range}}).then(function(D){return D=D.result,v?D.map(v):D})}var E=[];return Xo(m,function(D){return E.push(D)},d,m.table.core).then(function(){return E})},a)},Ke.prototype.offset=function(a){var c=this._ctx;return a<=0||(c.offset+=a,Er(c)?pi(c,function(){var d=a;return function(m,v){return d===0||(d===1?--d:v(function(){m.advance(d),d=0}),!1)}}):pi(c,function(){var d=a;return function(){return--d<0}})),this},Ke.prototype.limit=function(a){return this._ctx.limit=Math.min(this._ctx.limit,a),pi(this._ctx,function(){var c=a;return function(d,m,v){return--c<=0&&m(v),0<=c}},!0),this},Ke.prototype.until=function(a,c){return mi(this._ctx,function(d,m,v){return!a(d.value)||(m(v),c)}),this},Ke.prototype.first=function(a){return this.limit(1).toArray(function(c){return c[0]}).then(a)},Ke.prototype.last=function(a){return this.reverse().first(a)},Ke.prototype.filter=function(a){var c;return mi(this._ctx,function(d){return a(d.value)}),(c=this._ctx).isMatch=un(c.isMatch,a),this},Ke.prototype.and=function(a){return this.filter(a)},Ke.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)},Ke.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ke.prototype.desc=function(){return this.reverse()},Ke.prototype.eachKey=function(a){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(d,m){a(m.key,m)})},Ke.prototype.eachUniqueKey=function(a){return this._ctx.unique="unique",this.eachKey(a)},Ke.prototype.eachPrimaryKey=function(a){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(d,m){a(m.primaryKey,m)})},Ke.prototype.keys=function(a){var c=this._ctx;c.keysOnly=!c.isMatch;var d=[];return this.each(function(m,v){d.push(v.key)}).then(function(){return d}).then(a)},Ke.prototype.primaryKeys=function(a){var c=this._ctx;if(c.dir==="next"&&Er(c,!0)&&0<c.limit)return this._read(function(m){var v=Uo(c,c.table.core.schema);return c.table.core.query({trans:m,values:!1,limit:c.limit,query:{index:v,range:c.range}})}).then(function(m){return m.result}).then(a);c.keysOnly=!c.isMatch;var d=[];return this.each(function(m,v){d.push(v.primaryKey)}).then(function(){return d}).then(a)},Ke.prototype.uniqueKeys=function(a){return this._ctx.unique="unique",this.keys(a)},Ke.prototype.firstKey=function(a){return this.limit(1).keys(function(c){return c[0]}).then(a)},Ke.prototype.lastKey=function(a){return this.reverse().firstKey(a)},Ke.prototype.distinct=function(){var a=this._ctx,a=a.index&&a.table.schema.idxByName[a.index];if(!a||!a.multi)return this;var c={};return mi(this._ctx,function(v){var m=v.primaryKey.toString(),v=p(c,m);return c[m]=!0,!v}),this},Ke.prototype.modify=function(a){var c=this,d=this._ctx;return this._write(function(m){var v,x,E;E=typeof a=="function"?a:(v=s(a),x=v.length,function(F){for(var Z=!1,te=0;te<x;++te){var ne=v[te],le=a[ne],pe=q(F,ne);le instanceof Qr?(V(F,ne,le.execute(pe)),Z=!0):pe!==le&&(V(F,ne,le),Z=!0)}return Z});var D=d.table.core,O=D.schema.primaryKey,A=O.outbound,L=O.extractKey,H=200,O=c.db._options.modifyChunkSize;O&&(H=typeof O=="object"?O[D.name]||O["*"]||200:O);function Y(F,ne){var te=ne.failures,ne=ne.numFailures;W+=F-ne;for(var le=0,pe=s(te);le<pe.length;le++){var Se=pe[le];$.push(te[Se])}}var $=[],W=0,z=[];return c.clone().primaryKeys().then(function(F){function Z(ne){var le=Math.min(H,F.length-ne);return D.getMany({trans:m,keys:F.slice(ne,ne+le),cache:"immutable"}).then(function(pe){for(var Se=[],ge=[],we=A?[]:null,ke=[],xe=0;xe<le;++xe){var Ce=pe[xe],$e={value:se(Ce),primKey:F[ne+xe]};E.call($e,$e.value,$e)!==!1&&($e.value==null?ke.push(F[ne+xe]):A||We(L(Ce),L($e.value))===0?(ge.push($e.value),A&&we.push(F[ne+xe])):(ke.push(F[ne+xe]),Se.push($e.value)))}return Promise.resolve(0<Se.length&&D.mutate({trans:m,type:"add",values:Se}).then(function(ze){for(var Ye in ze.failures)ke.splice(parseInt(Ye),1);Y(Se.length,ze)})).then(function(){return(0<ge.length||te&&typeof a=="object")&&D.mutate({trans:m,type:"put",keys:we,values:ge,criteria:te,changeSpec:typeof a!="function"&&a,isAdditionalChunk:0<ne}).then(function(ze){return Y(ge.length,ze)})}).then(function(){return(0<ke.length||te&&a===gi)&&D.mutate({trans:m,type:"delete",keys:ke,criteria:te,isAdditionalChunk:0<ne}).then(function(ze){return Y(ke.length,ze)})}).then(function(){return F.length>ne+le&&Z(ne+H)})})}var te=Er(d)&&d.limit===1/0&&(typeof a!="function"||a===gi)&&{index:d.index,range:d.range};return Z(0).then(function(){if(0<$.length)throw new _e("Error modifying one or more objects",$,W,z);return F.length})})})},Ke.prototype.delete=function(){var a=this._ctx,c=a.range;return Er(a)&&(a.isPrimKey||c.type===3)?this._write(function(d){var m=a.table.core.schema.primaryKey,v=c;return a.table.core.count({trans:d,query:{index:m,range:v}}).then(function(x){return a.table.core.mutate({trans:d,type:"deleteRange",range:v}).then(function(E){var D=E.failures;if(E.lastResult,E.results,E=E.numFailures,E)throw new _e("Could not delete some values",Object.keys(D).map(function(A){return D[A]}),x-E);return x-E})})}):this.modify(gi)},Ke);function Ke(){}var gi=function(a,c){return c.value=null};function gh(a,c){return a<c?-1:a===c?0:1}function yh(a,c){return c<a?-1:a===c?0:1}function zt(a,c,d){return a=a instanceof Wc?new a.Collection(a):a,a._ctx.error=new(d||TypeError)(c),a}function Nr(a){return new a.Collection(a,function(){return Fc("")}).limit(0)}function Go(a,c,d,m){var v,x,E,D,A,L,H,O=d.length;if(!d.every(function(W){return typeof W=="string"}))return zt(a,Vo);function Y(W){v=W==="next"?function(F){return F.toUpperCase()}:function(F){return F.toLowerCase()},x=W==="next"?function(F){return F.toLowerCase()}:function(F){return F.toUpperCase()},E=W==="next"?gh:yh;var z=d.map(function(F){return{lower:x(F),upper:v(F)}}).sort(function(F,Z){return E(F.lower,Z.lower)});D=z.map(function(F){return F.upper}),A=z.map(function(F){return F.lower}),H=(L=W)==="next"?"":m}Y("next"),a=new a.Collection(a,function(){return Fn(D[0],A[O-1]+m)}),a._ondirectionchange=function(W){Y(W)};var $=0;return a._addAlgorithm(function(W,z,F){var Z=W.key;if(typeof Z!="string")return!1;var te=x(Z);if(c(te,A,$))return!0;for(var ne=null,le=$;le<O;++le){var pe=function(Se,ge,we,ke,xe,Ce){for(var $e=Math.min(Se.length,ke.length),ze=-1,Ye=0;Ye<$e;++Ye){var Yt=ge[Ye];if(Yt!==ke[Ye])return xe(Se[Ye],we[Ye])<0?Se.substr(0,Ye)+we[Ye]+we.substr(Ye+1):xe(Se[Ye],ke[Ye])<0?Se.substr(0,Ye)+ke[Ye]+we.substr(Ye+1):0<=ze?Se.substr(0,ze)+ge[ze]+we.substr(ze+1):null;xe(Se[Ye],Yt)<0&&(ze=Ye)}return $e<ke.length&&Ce==="next"?Se+we.substr(Se.length):$e<Se.length&&Ce==="prev"?Se.substr(0,we.length):ze<0?null:Se.substr(0,ze)+ke[ze]+we.substr(ze+1)}(Z,te,D[le],A[le],E,L);pe===null&&ne===null?$=le+1:(ne===null||0<E(ne,pe))&&(ne=pe)}return z(ne!==null?function(){W.continue(ne+H)}:F),!1}),a}function Fn(a,c,d,m){return{type:2,lower:a,upper:c,lowerOpen:d,upperOpen:m}}function Fc(a){return{type:1,lower:a,upper:a}}var Wc=(Object.defineProperty(xt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),xt.prototype.between=function(a,c,d,m){d=d!==!1,m=m===!0;try{return 0<this._cmp(a,c)||this._cmp(a,c)===0&&(d||m)&&(!d||!m)?Nr(this):new this.Collection(this,function(){return Fn(a,c,!d,!m)})}catch{return zt(this,Qt)}},xt.prototype.equals=function(a){return a==null?zt(this,Qt):new this.Collection(this,function(){return Fc(a)})},xt.prototype.above=function(a){return a==null?zt(this,Qt):new this.Collection(this,function(){return Fn(a,void 0,!0)})},xt.prototype.aboveOrEqual=function(a){return a==null?zt(this,Qt):new this.Collection(this,function(){return Fn(a,void 0,!1)})},xt.prototype.below=function(a){return a==null?zt(this,Qt):new this.Collection(this,function(){return Fn(void 0,a,!1,!0)})},xt.prototype.belowOrEqual=function(a){return a==null?zt(this,Qt):new this.Collection(this,function(){return Fn(void 0,a)})},xt.prototype.startsWith=function(a){return typeof a!="string"?zt(this,Vo):this.between(a,a+qt,!0,!0)},xt.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):Go(this,function(c,d){return c.indexOf(d[0])===0},[a],qt)},xt.prototype.equalsIgnoreCase=function(a){return Go(this,function(c,d){return c===d[0]},[a],"")},xt.prototype.anyOfIgnoreCase=function(){var a=Q.apply(P,arguments);return a.length===0?Nr(this):Go(this,function(c,d){return d.indexOf(c)!==-1},a,"")},xt.prototype.startsWithAnyOfIgnoreCase=function(){var a=Q.apply(P,arguments);return a.length===0?Nr(this):Go(this,function(c,d){return d.some(function(m){return c.indexOf(m)===0})},a,qt)},xt.prototype.anyOf=function(){var a=this,c=Q.apply(P,arguments),d=this._cmp;try{c.sort(d)}catch{return zt(this,Qt)}if(c.length===0)return Nr(this);var m=new this.Collection(this,function(){return Fn(c[0],c[c.length-1])});m._ondirectionchange=function(x){d=x==="next"?a._ascending:a._descending,c.sort(d)};var v=0;return m._addAlgorithm(function(x,E,D){for(var A=x.key;0<d(A,c[v]);)if(++v===c.length)return E(D),!1;return d(A,c[v])===0||(E(function(){x.continue(c[v])}),!1)}),m},xt.prototype.notEqual=function(a){return this.inAnyRange([[-1/0,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},xt.prototype.noneOf=function(){var a=Q.apply(P,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch{return zt(this,Qt)}var c=a.reduce(function(d,m){return d?d.concat([[d[d.length-1][1],m]]):[[-1/0,m]]},null);return c.push([a[a.length-1],this.db._maxKey]),this.inAnyRange(c,{includeLowers:!1,includeUppers:!1})},xt.prototype.inAnyRange=function(Z,c){var d=this,m=this._cmp,v=this._ascending,x=this._descending,E=this._min,D=this._max;if(Z.length===0)return Nr(this);if(!Z.every(function(te){return te[0]!==void 0&&te[1]!==void 0&&v(te[0],te[1])<=0}))return zt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",fe.InvalidArgument);var A=!c||c.includeLowers!==!1,L=c&&c.includeUppers===!0,H,O=v;function Y(te,ne){return O(te[0],ne[0])}try{(H=Z.reduce(function(te,ne){for(var le=0,pe=te.length;le<pe;++le){var Se=te[le];if(m(ne[0],Se[1])<0&&0<m(ne[1],Se[0])){Se[0]=E(Se[0],ne[0]),Se[1]=D(Se[1],ne[1]);break}}return le===pe&&te.push(ne),te},[])).sort(Y)}catch{return zt(this,Qt)}var $=0,W=L?function(te){return 0<v(te,H[$][1])}:function(te){return 0<=v(te,H[$][1])},z=A?function(te){return 0<x(te,H[$][0])}:function(te){return 0<=x(te,H[$][0])},F=W,Z=new this.Collection(this,function(){return Fn(H[0][0],H[H.length-1][1],!A,!L)});return Z._ondirectionchange=function(te){O=te==="next"?(F=W,v):(F=z,x),H.sort(Y)},Z._addAlgorithm(function(te,ne,le){for(var pe,Se=te.key;F(Se);)if(++$===H.length)return ne(le),!1;return!W(pe=Se)&&!z(pe)||(d._cmp(Se,H[$][1])===0||d._cmp(Se,H[$][0])===0||ne(function(){O===v?te.continue(H[$][0]):te.continue(H[$][1])}),!1)}),Z},xt.prototype.startsWithAnyOf=function(){var a=Q.apply(P,arguments);return a.every(function(c){return typeof c=="string"})?a.length===0?Nr(this):this.inAnyRange(a.map(function(c){return[c,c+qt]})):zt(this,"startsWithAnyOf() only works with strings")},xt);function xt(){}function dn(a){return Xe(function(c){return Jr(c),a(c.target.error),!1})}function Jr(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var eo="storagemutated",yi="x-storagemutated-1",Wn=Gr(null,eo),vh=(fn.prototype._lock=function(){return T(!he.global),++this._reculock,this._reculock!==1||he.global||(he.lockOwnerFor=this),this},fn.prototype._unlock=function(){if(T(!he.global),--this._reculock==0)for(he.global||(he.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var a=this._blockedFuncs.shift();try{ft(a[1],a[0])}catch{}}return this},fn.prototype._locked=function(){return this._reculock&&he.lockOwnerFor!==this},fn.prototype.create=function(a){var c=this;if(!this.mode)return this;var d=this.db.idbdb,m=this.db._state.dbOpenError;if(T(!this.idbtrans),!a&&!d)switch(m&&m.name){case"DatabaseClosedError":throw new fe.DatabaseClosed(m);case"MissingAPIError":throw new fe.MissingAPI(m.message,m);default:throw new fe.OpenFailed(m)}if(!this.active)throw new fe.TransactionInactive;return T(this._completion._state===null),(a=this.idbtrans=a||(this.db.core||d).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Xe(function(v){Jr(v),c._reject(a.error)}),a.onabort=Xe(function(v){Jr(v),c.active&&c._reject(new fe.Abort(a.error)),c.active=!1,c.on("abort").fire(v)}),a.oncomplete=Xe(function(){c.active=!1,c._resolve(),"mutatedParts"in a&&Wn.storagemutated.fire(a.mutatedParts)}),this},fn.prototype._promise=function(a,c,d){var m=this;if(a==="readwrite"&&this.mode!=="readwrite")return at(new fe.ReadOnly("Transaction is readonly"));if(!this.active)return at(new fe.TransactionInactive);if(this._locked())return new be(function(x,E){m._blockedFuncs.push([function(){m._promise(a,c,d).then(x,E)},he])});if(d)return Rt(function(){var x=new be(function(E,D){m._lock();var A=c(E,D,m);A&&A.then&&A.then(E,D)});return x.finally(function(){return m._unlock()}),x._lib=!0,x});var v=new be(function(x,E){var D=c(x,E,m);D&&D.then&&D.then(x,E)});return v._lib=!0,v},fn.prototype._root=function(){return this.parent?this.parent._root():this},fn.prototype.waitFor=function(a){var c,d=this._root(),m=be.resolve(a);d._waitingFor?d._waitingFor=d._waitingFor.then(function(){return m}):(d._waitingFor=m,d._waitingQueue=[],c=d.idbtrans.objectStore(d.storeNames[0]),function x(){for(++d._spinCount;d._waitingQueue.length;)d._waitingQueue.shift()();d._waitingFor&&(c.get(-1/0).onsuccess=x)}());var v=d._waitingFor;return new be(function(x,E){m.then(function(D){return d._waitingQueue.push(Xe(x.bind(null,D)))},function(D){return d._waitingQueue.push(Xe(E.bind(null,D)))}).finally(function(){d._waitingFor===v&&(d._waitingFor=null)})})},fn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new fe.Abort))},fn.prototype.table=function(a){var c=this._memoizedTables||(this._memoizedTables={});if(p(c,a))return c[a];var d=this.schema[a];if(!d)throw new fe.NotFound("Table "+a+" not part of transaction");return d=new this.db.Table(a,d,this),d.core=this.db.core.table(a),c[a]=d},fn);function fn(){}function vi(a,c,d,m,v,x,E){return{name:a,keyPath:c,unique:d,multi:m,auto:v,compound:x,src:(d&&!E?"&":"")+(m?"*":"")+(v?"++":"")+Bc(c)}}function Bc(a){return typeof a=="string"?a:a?"["+[].join.call(a,"+")+"]":""}function wi(a,c,d){return{name:a,primKey:c,indexes:d,mappedClass:null,idxByName:(m=function(v){return[v.name,v]},d.reduce(function(v,x,E){return E=m(x,E),E&&(v[E[0]]=E[1]),v},{}))};var m}var to=function(a){try{return a.only([[]]),to=function(){return[[]]},[[]]}catch{return to=function(){return qt},qt}};function bi(a){return a==null?function(){}:typeof a=="string"?(c=a).split(".").length===1?function(d){return d[c]}:function(d){return q(d,c)}:function(d){return q(d,a)};var c}function Hc(a){return[].slice.call(a)}var wh=0;function no(a){return a==null?":id":typeof a=="string"?a:"[".concat(a.join("+"),"]")}function bh(a,c,A){function m(F){if(F.type===3)return null;if(F.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var $=F.lower,W=F.upper,z=F.lowerOpen,F=F.upperOpen;return $===void 0?W===void 0?null:c.upperBound(W,!!F):W===void 0?c.lowerBound($,!!z):c.bound($,W,!!z,!!F)}function v(Y){var $,W=Y.name;return{name:W,schema:Y,mutate:function(z){var F=z.trans,Z=z.type,te=z.keys,ne=z.values,le=z.range;return new Promise(function(pe,Se){pe=Xe(pe);var ge=F.objectStore(W),we=ge.keyPath==null,ke=Z==="put"||Z==="add";if(!ke&&Z!=="delete"&&Z!=="deleteRange")throw new Error("Invalid operation type: "+Z);var xe,Ce=(te||ne||{length:1}).length;if(te&&ne&&te.length!==ne.length)throw new Error("Given keys array must have same length as given values array.");if(Ce===0)return pe({numFailures:0,failures:{},results:[],lastResult:void 0});function $e(Mt){++Yt,Jr(Mt)}var ze=[],Ye=[],Yt=0;if(Z==="deleteRange"){if(le.type===4)return pe({numFailures:Yt,failures:Ye,results:[],lastResult:void 0});le.type===3?ze.push(xe=ge.clear()):ze.push(xe=ge.delete(m(le)))}else{var we=ke?we?[ne,te]:[ne,null]:[te,null],Ae=we[0],Ot=we[1];if(ke)for(var jt=0;jt<Ce;++jt)ze.push(xe=Ot&&Ot[jt]!==void 0?ge[Z](Ae[jt],Ot[jt]):ge[Z](Ae[jt])),xe.onerror=$e;else for(jt=0;jt<Ce;++jt)ze.push(xe=ge[Z](Ae[jt])),xe.onerror=$e}function la(Mt){Mt=Mt.target.result,ze.forEach(function(ar,Li){return ar.error!=null&&(Ye[Li]=ar.error)}),pe({numFailures:Yt,failures:Ye,results:Z==="delete"?te:ze.map(function(ar){return ar.result}),lastResult:Mt})}xe.onerror=function(Mt){$e(Mt),la(Mt)},xe.onsuccess=la})},getMany:function(z){var F=z.trans,Z=z.keys;return new Promise(function(te,ne){te=Xe(te);for(var le,pe=F.objectStore(W),Se=Z.length,ge=new Array(Se),we=0,ke=0,xe=function(ze){ze=ze.target,ge[ze._pos]=ze.result,++ke===we&&te(ge)},Ce=dn(ne),$e=0;$e<Se;++$e)Z[$e]!=null&&((le=pe.get(Z[$e]))._pos=$e,le.onsuccess=xe,le.onerror=Ce,++we);we===0&&te(ge)})},get:function(z){var F=z.trans,Z=z.key;return new Promise(function(te,ne){te=Xe(te);var le=F.objectStore(W).get(Z);le.onsuccess=function(pe){return te(pe.target.result)},le.onerror=dn(ne)})},query:($=L,function(z){return new Promise(function(F,Z){F=Xe(F);var te,ne,le,we=z.trans,pe=z.values,Se=z.limit,xe=z.query,ge=Se===1/0?void 0:Se,ke=xe.index,xe=xe.range,we=we.objectStore(W),ke=ke.isPrimaryKey?we:we.index(ke.name),xe=m(xe);if(Se===0)return F({result:[]});$?((ge=pe?ke.getAll(xe,ge):ke.getAllKeys(xe,ge)).onsuccess=function(Ce){return F({result:Ce.target.result})},ge.onerror=dn(Z)):(te=0,ne=!pe&&"openKeyCursor"in ke?ke.openKeyCursor(xe):ke.openCursor(xe),le=[],ne.onsuccess=function(Ce){var $e=ne.result;return $e?(le.push(pe?$e.value:$e.primaryKey),++te===Se?F({result:le}):void $e.continue()):F({result:le})},ne.onerror=dn(Z))})}),openCursor:function(z){var F=z.trans,Z=z.values,te=z.query,ne=z.reverse,le=z.unique;return new Promise(function(pe,Se){pe=Xe(pe);var ke=te.index,ge=te.range,we=F.objectStore(W),we=ke.isPrimaryKey?we:we.index(ke.name),ke=ne?le?"prevunique":"prev":le?"nextunique":"next",xe=!Z&&"openKeyCursor"in we?we.openKeyCursor(m(ge),ke):we.openCursor(m(ge),ke);xe.onerror=dn(Se),xe.onsuccess=Xe(function(Ce){var $e,ze,Ye,Yt,Ae=xe.result;Ae?(Ae.___id=++wh,Ae.done=!1,$e=Ae.continue.bind(Ae),ze=(ze=Ae.continuePrimaryKey)&&ze.bind(Ae),Ye=Ae.advance.bind(Ae),Yt=function(){throw new Error("Cursor not stopped")},Ae.trans=F,Ae.stop=Ae.continue=Ae.continuePrimaryKey=Ae.advance=function(){throw new Error("Cursor not started")},Ae.fail=Xe(Se),Ae.next=function(){var Ot=this,jt=1;return this.start(function(){return jt--?Ot.continue():Ot.stop()}).then(function(){return Ot})},Ae.start=function(Ot){function jt(){if(xe.result)try{Ot()}catch(Mt){Ae.fail(Mt)}else Ae.done=!0,Ae.start=function(){throw new Error("Cursor behind last entry")},Ae.stop()}var la=new Promise(function(Mt,ar){Mt=Xe(Mt),xe.onerror=dn(ar),Ae.fail=ar,Ae.stop=function(Li){Ae.stop=Ae.continue=Ae.continuePrimaryKey=Ae.advance=Yt,Mt(Li)}});return xe.onsuccess=Xe(function(Mt){xe.onsuccess=jt,jt()}),Ae.continue=$e,Ae.continuePrimaryKey=ze,Ae.advance=Ye,jt(),la},pe(Ae)):pe(null)},Se)})},count:function(z){var F=z.query,Z=z.trans,te=F.index,ne=F.range;return new Promise(function(le,pe){var Se=Z.objectStore(W),ge=te.isPrimaryKey?Se:Se.index(te.name),Se=m(ne),ge=Se?ge.count(Se):ge.count();ge.onsuccess=Xe(function(we){return le(we.target.result)}),ge.onerror=dn(pe)})}}}var x,E,D,H=(E=A,D=Hc((x=a).objectStoreNames),{schema:{name:x.name,tables:D.map(function(Y){return E.objectStore(Y)}).map(function(Y){var $=Y.keyPath,F=Y.autoIncrement,W=l($),z={},F={name:Y.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:$==null,compound:W,keyPath:$,autoIncrement:F,unique:!0,extractKey:bi($)},indexes:Hc(Y.indexNames).map(function(Z){return Y.index(Z)}).map(function(le){var te=le.name,ne=le.unique,pe=le.multiEntry,le=le.keyPath,pe={name:te,compound:l(le),keyPath:le,unique:ne,multiEntry:pe,extractKey:bi(le)};return z[no(le)]=pe}),getIndexByKeyPath:function(Z){return z[no(Z)]}};return z[":id"]=F.primaryKey,$!=null&&(z[no($)]=F.primaryKey),F})},hasGetAll:0<D.length&&"getAll"in E.objectStore(D[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),A=H.schema,L=H.hasGetAll,H=A.tables.map(v),O={};return H.forEach(function(Y){return O[Y.name]=Y}),{stack:"dbcore",transaction:a.transaction.bind(a),table:function(Y){if(!O[Y])throw new Error("Table '".concat(Y,"' not found"));return O[Y]},MIN_KEY:-1/0,MAX_KEY:to(c),schema:A}}function xh(a,c,d,m){var v=d.IDBKeyRange;return d.indexedDB,{dbcore:(m=bh(c,v,m),a.dbcore.reduce(function(x,E){return E=E.create,r(r({},x),E(x))},m))}}function Zo(a,m){var d=m.db,m=xh(a._middlewares,d,a._deps,m);a.core=m.dbcore,a.tables.forEach(function(v){var x=v.name;a.core.schema.tables.some(function(E){return E.name===x})&&(v.core=a.core.table(x),a[x]instanceof a.Table&&(a[x].core=v.core))})}function Qo(a,c,d,m){d.forEach(function(v){var x=m[v];c.forEach(function(E){var D=function A(L,H){return N(L,H)||(L=f(L))&&A(L,H)}(E,v);(!D||"value"in D&&D.value===void 0)&&(E===a.Transaction.prototype||E instanceof a.Transaction?S(E,v,{get:function(){return this.table(v)},set:function(A){w(this,v,{value:A,writable:!0,configurable:!0,enumerable:!0})}}):E[v]=new a.Table(v,x))})})}function xi(a,c){c.forEach(function(d){for(var m in d)d[m]instanceof a.Table&&delete d[m]})}function Sh(a,c){return a._cfg.version-c._cfg.version}function _h(a,c,d,m){var v=a._dbSchema;d.objectStoreNames.contains("$meta")&&!v.$meta&&(v.$meta=wi("$meta",Yc("")[0],[]),a._storeNames.push("$meta"));var x=a._createTransaction("readwrite",a._storeNames,v);x.create(d),x._completion.catch(m);var E=x._reject.bind(x),D=he.transless||he;Rt(function(){return he.trans=x,he.transless=D,c!==0?(Zo(a,d),L=c,((A=x).storeNames.includes("$meta")?A.table("$meta").get("version").then(function(H){return H??L}):be.resolve(L)).then(function(H){return Y=H,$=x,W=d,z=[],H=(O=a)._versions,F=O._dbSchema=ea(0,O.idbdb,W),(H=H.filter(function(Z){return Z._cfg.version>=Y})).length!==0?(H.forEach(function(Z){z.push(function(){var te=F,ne=Z._cfg.dbschema;ta(O,te,W),ta(O,ne,W),F=O._dbSchema=ne;var le=Si(te,ne);le.add.forEach(function(ke){_i(W,ke[0],ke[1].primKey,ke[1].indexes)}),le.change.forEach(function(ke){if(ke.recreate)throw new fe.Upgrade("Not yet support for changing primary key");var xe=W.objectStore(ke.name);ke.add.forEach(function(Ce){return Jo(xe,Ce)}),ke.change.forEach(function(Ce){xe.deleteIndex(Ce.name),Jo(xe,Ce)}),ke.del.forEach(function(Ce){return xe.deleteIndex(Ce)})});var pe=Z._cfg.contentUpgrade;if(pe&&Z._cfg.version>Y){Zo(O,W),$._memoizedTables={};var Se=J(ne);le.del.forEach(function(ke){Se[ke]=te[ke]}),xi(O,[O.Transaction.prototype]),Qo(O,[O.Transaction.prototype],s(Se),Se),$.schema=Se;var ge,we=oe(pe);return we&&Zt(),le=be.follow(function(){var ke;(ge=pe($))&&we&&(ke=Ht.bind(null,null),ge.then(ke,ke))}),ge&&typeof ge.then=="function"?be.resolve(ge):le.then(function(){return ge})}}),z.push(function(te){var ne,le,pe=Z._cfg.dbschema;ne=pe,le=te,[].slice.call(le.db.objectStoreNames).forEach(function(Se){return ne[Se]==null&&le.db.deleteObjectStore(Se)}),xi(O,[O.Transaction.prototype]),Qo(O,[O.Transaction.prototype],O._storeNames,O._dbSchema),$.schema=O._dbSchema}),z.push(function(te){O.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(O.idbdb.version/10)===Z._cfg.version?(O.idbdb.deleteObjectStore("$meta"),delete O._dbSchema.$meta,O._storeNames=O._storeNames.filter(function(ne){return ne!=="$meta"})):te.objectStore("$meta").put(Z._cfg.version,"version"))})}),function Z(){return z.length?be.resolve(z.shift()($.idbtrans)).then(Z):be.resolve()}().then(function(){zc(F,W)})):be.resolve();var O,Y,$,W,z,F}).catch(E)):(s(v).forEach(function(H){_i(d,H,v[H].primKey,v[H].indexes)}),Zo(a,d),void be.follow(function(){return a.on.populate.fire(x)}).catch(E));var A,L})}function kh(a,c){zc(a._dbSchema,c),c.db.version%10!=0||c.objectStoreNames.contains("$meta")||c.db.createObjectStore("$meta").add(Math.ceil(c.db.version/10-1),"version");var d=ea(0,a.idbdb,c);ta(a,a._dbSchema,c);for(var m=0,v=Si(d,a._dbSchema).change;m<v.length;m++){var x=function(E){if(E.change.length||E.recreate)return console.warn("Unable to patch indexes of table ".concat(E.name," because it has changes on the type of index or primary key.")),{value:void 0};var D=c.objectStore(E.name);E.add.forEach(function(A){mt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(E.name,".").concat(A.src)),Jo(D,A)})}(v[m]);if(typeof x=="object")return x.value}}function Si(a,c){var d,m={del:[],add:[],change:[]};for(d in a)c[d]||m.del.push(d);for(d in c){var v=a[d],x=c[d];if(v){var E={name:d,def:x,recreate:!1,del:[],add:[],change:[]};if(""+(v.primKey.keyPath||"")!=""+(x.primKey.keyPath||"")||v.primKey.auto!==x.primKey.auto)E.recreate=!0,m.change.push(E);else{var D=v.idxByName,A=x.idxByName,L=void 0;for(L in D)A[L]||E.del.push(L);for(L in A){var H=D[L],O=A[L];H?H.src!==O.src&&E.change.push(O):E.add.push(O)}(0<E.del.length||0<E.add.length||0<E.change.length)&&m.change.push(E)}}else m.add.push([d,x])}return m}function _i(a,c,d,m){var v=a.db.createObjectStore(c,d.keyPath?{keyPath:d.keyPath,autoIncrement:d.auto}:{autoIncrement:d.auto});return m.forEach(function(x){return Jo(v,x)}),v}function zc(a,c){s(a).forEach(function(d){c.db.objectStoreNames.contains(d)||(mt&&console.debug("Dexie: Creating missing table",d),_i(c,d,a[d].primKey,a[d].indexes))})}function Jo(a,c){a.createIndex(c.name,c.keyPath,{unique:c.unique,multiEntry:c.multi})}function ea(a,c,d){var m={};return R(c.objectStoreNames,0).forEach(function(v){for(var x=d.objectStore(v),E=vi(Bc(L=x.keyPath),L||"",!0,!1,!!x.autoIncrement,L&&typeof L!="string",!0),D=[],A=0;A<x.indexNames.length;++A){var H=x.index(x.indexNames[A]),L=H.keyPath,H=vi(H.name,L,!!H.unique,!!H.multiEntry,!1,L&&typeof L!="string",!1);D.push(H)}m[v]=wi(v,E,D)}),m}function ta(a,c,d){for(var m=d.db.objectStoreNames,v=0;v<m.length;++v){var x=m[v],E=d.objectStore(x);a._hasGetAll="getAll"in E;for(var D=0;D<E.indexNames.length;++D){var A=E.indexNames[D],L=E.index(A).keyPath,H=typeof L=="string"?L:"["+R(L).join("+")+"]";!c[x]||(L=c[x].idxByName[H])&&(L.name=A,delete c[x].idxByName[H],c[x].idxByName[A]=L)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function Yc(a){return a.split(",").map(function(c,d){var m=(c=c.trim()).replace(/([&*]|\+\+)/g,""),v=/^\[/.test(m)?m.match(/^\[(.*)\]$/)[1].split("+"):m;return vi(m,v||null,/\&/.test(c),/\*/.test(c),/\+\+/.test(c),l(v),d===0)})}var Eh=(na.prototype._parseStoresSpec=function(a,c){s(a).forEach(function(d){if(a[d]!==null){var m=Yc(a[d]),v=m.shift();if(v.unique=!0,v.multi)throw new fe.Schema("Primary key cannot be multi-valued");m.forEach(function(x){if(x.auto)throw new fe.Schema("Only primary key can be marked as autoIncrement (++)");if(!x.keyPath)throw new fe.Schema("Index must have a name and cannot be an empty string")}),c[d]=wi(d,v,m)}})},na.prototype.stores=function(d){var c=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,d):d;var d=c._versions,m={},v={};return d.forEach(function(x){u(m,x._cfg.storesSource),v=x._cfg.dbschema={},x._parseStoresSpec(m,v)}),c._dbSchema=v,xi(c,[c._allTables,c,c.Transaction.prototype]),Qo(c,[c._allTables,c,c.Transaction.prototype,this._cfg.tables],s(v),v),c._storeNames=s(v),this},na.prototype.upgrade=function(a){return this._cfg.contentUpgrade=yt(this._cfg.contentUpgrade||Pe,a),this},na);function na(){}function ki(a,c){var d=a._dbNamesDB;return d||(d=a._dbNamesDB=new _n(_r,{addons:[],indexedDB:a,IDBKeyRange:c})).version(1).stores({dbnames:"name"}),d.table("dbnames")}function Ei(a){return a&&typeof a.databases=="function"}function Ni(a){return Rt(function(){return he.letThrough=!0,a()})}function Ci(a){return!("from"in a)}var Dt=function(a,c){if(!this){var d=new Dt;return a&&"d"in a&&u(d,a),d}u(this,arguments.length?{d:1,from:a,to:1<arguments.length?c:a}:{d:0})};function ro(a,c,d){var m=We(c,d);if(!isNaN(m)){if(0<m)throw RangeError();if(Ci(a))return u(a,{from:c,to:d,d:1});var v=a.l,m=a.r;if(We(d,a.from)<0)return v?ro(v,c,d):a.l={from:c,to:d,d:1,l:null,r:null},qc(a);if(0<We(c,a.to))return m?ro(m,c,d):a.r={from:c,to:d,d:1,l:null,r:null},qc(a);We(c,a.from)<0&&(a.from=c,a.l=null,a.d=m?m.d+1:1),0<We(d,a.to)&&(a.to=d,a.r=null,a.d=a.l?a.l.d+1:1),d=!a.r,v&&!a.l&&oo(a,v),m&&d&&oo(a,m)}}function oo(a,c){Ci(c)||function d(m,A){var x=A.from,E=A.to,D=A.l,A=A.r;ro(m,x,E),D&&d(m,D),A&&d(m,A)}(a,c)}function Vc(a,c){var d=ra(c),m=d.next();if(m.done)return!1;for(var v=m.value,x=ra(a),E=x.next(v.from),D=E.value;!m.done&&!E.done;){if(We(D.from,v.to)<=0&&0<=We(D.to,v.from))return!0;We(v.from,D.from)<0?v=(m=d.next(D.from)).value:D=(E=x.next(v.from)).value}return!1}function ra(a){var c=Ci(a)?null:{s:0,n:a};return{next:function(d){for(var m=0<arguments.length;c;)switch(c.s){case 0:if(c.s=1,m)for(;c.n.l&&We(d,c.n.from)<0;)c={up:c,n:c.n.l,s:1};else for(;c.n.l;)c={up:c,n:c.n.l,s:1};case 1:if(c.s=2,!m||We(d,c.n.to)<=0)return{value:c.n,done:!1};case 2:if(c.n.r){c.s=3,c={up:c,n:c.n.r,s:0};continue}case 3:c=c.up}return{done:!0}}}}function qc(a){var c,d,m=(((c=a.r)===null||c===void 0?void 0:c.d)||0)-(((d=a.l)===null||d===void 0?void 0:d.d)||0),v=1<m?"r":m<-1?"l":"";v&&(c=v=="r"?"l":"r",d=r({},a),m=a[v],a.from=m.from,a.to=m.to,a[v]=m[v],d[v]=m[c],(a[c]=d).d=Kc(d)),a.d=Kc(a)}function Kc(d){var c=d.r,d=d.l;return(c?d?Math.max(c.d,d.d):c.d:d?d.d:0)+1}function oa(a,c){return s(c).forEach(function(d){a[d]?oo(a[d],c[d]):a[d]=function m(v){var x,E,D={};for(x in v)p(v,x)&&(E=v[x],D[x]=!E||typeof E!="object"||K.has(E.constructor)?E:m(E));return D}(c[d])}),a}function Ti(a,c){return a.all||c.all||Object.keys(a).some(function(d){return c[d]&&Vc(c[d],a[d])})}y(Dt.prototype,((Kt={add:function(a){return oo(this,a),this},addKey:function(a){return ro(this,a,a),this},addKeys:function(a){var c=this;return a.forEach(function(d){return ro(c,d,d)}),this},hasKey:function(a){var c=ra(this).next(a).value;return c&&We(c.from,a)<=0&&0<=We(c.to,a)}})[j]=function(){return ra(this)},Kt));var rr={},Di={},Oi=!1;function aa(a){oa(Di,a),Oi||(Oi=!0,setTimeout(function(){Oi=!1,ji(Di,!(Di={}))},0))}function ji(a,c){c===void 0&&(c=!1);var d=new Set;if(a.all)for(var m=0,v=Object.values(rr);m<v.length;m++)Uc(E=v[m],a,d,c);else for(var x in a){var E,D=/^idb\:\/\/(.*)\/(.*)\//.exec(x);D&&(x=D[1],D=D[2],(E=rr["idb://".concat(x,"/").concat(D)])&&Uc(E,a,d,c))}d.forEach(function(A){return A()})}function Uc(a,c,d,m){for(var v=[],x=0,E=Object.entries(a.queries.query);x<E.length;x++){for(var D=E[x],A=D[0],L=[],H=0,O=D[1];H<O.length;H++){var Y=O[H];Ti(c,Y.obsSet)?Y.subscribers.forEach(function(F){return d.add(F)}):m&&L.push(Y)}m&&v.push([A,L])}if(m)for(var $=0,W=v;$<W.length;$++){var z=W[$],A=z[0],L=z[1];a.queries.query[A]=L}}function Nh(a){var c=a._state,d=a._deps.indexedDB;if(c.isBeingOpened||a.idbdb)return c.dbReadyPromise.then(function(){return c.dbOpenError?at(c.dbOpenError):a});c.isBeingOpened=!0,c.dbOpenError=null,c.openComplete=!1;var m=c.openCanceller,v=Math.round(10*a.verno),x=!1;function E(){if(c.openCanceller!==m)throw new fe.DatabaseClosed("db.open() was cancelled")}function D(){return new be(function(Y,$){if(E(),!d)throw new fe.MissingAPI;var W=a.name,z=c.autoSchema||!v?d.open(W):d.open(W,v);if(!z)throw new fe.MissingAPI;z.onerror=dn($),z.onblocked=Xe(a._fireOnBlocked),z.onupgradeneeded=Xe(function(F){var Z;H=z.transaction,c.autoSchema&&!a._options.allowEmptyDB?(z.onerror=Jr,H.abort(),z.result.close(),(Z=d.deleteDatabase(W)).onsuccess=Z.onerror=Xe(function(){$(new fe.NoSuchDatabase("Database ".concat(W," doesnt exist")))})):(H.onerror=dn($),F=F.oldVersion>Math.pow(2,62)?0:F.oldVersion,O=F<1,a.idbdb=z.result,x&&kh(a,H),_h(a,F/10,H,$))},$),z.onsuccess=Xe(function(){H=null;var F,Z,te,ne,le,pe=a.idbdb=z.result,Se=R(pe.objectStoreNames);if(0<Se.length)try{var ge=pe.transaction((ne=Se).length===1?ne[0]:ne,"readonly");if(c.autoSchema)Z=pe,te=ge,(F=a).verno=Z.version/10,te=F._dbSchema=ea(0,Z,te),F._storeNames=R(Z.objectStoreNames,0),Qo(F,[F._allTables],s(te),te);else if(ta(a,a._dbSchema,ge),((le=Si(ea(0,(le=a).idbdb,ge),le._dbSchema)).add.length||le.change.some(function(we){return we.add.length||we.change.length}))&&!x)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),pe.close(),v=pe.version+1,x=!0,Y(D());Zo(a,ge)}catch{}Ln.push(a),pe.onversionchange=Xe(function(we){c.vcFired=!0,a.on("versionchange").fire(we)}),pe.onclose=Xe(function(we){a.on("close").fire(we)}),O&&(le=a._deps,ge=W,pe=le.indexedDB,le=le.IDBKeyRange,Ei(pe)||ge===_r||ki(pe,le).put({name:ge}).catch(Pe)),Y()},$)}).catch(function(Y){switch(Y==null?void 0:Y.name){case"UnknownError":if(0<c.PR1398_maxLoop)return c.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),D();break;case"VersionError":if(0<v)return v=0,D()}return be.reject(Y)})}var A,L=c.dbReadyResolve,H=null,O=!1;return be.race([m,(typeof navigator>"u"?be.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Y){function $(){return indexedDB.databases().finally(Y)}A=setInterval($,100),$()}).finally(function(){return clearInterval(A)}):Promise.resolve()).then(D)]).then(function(){return E(),c.onReadyBeingFired=[],be.resolve(Ni(function(){return a.on.ready.fire(a.vip)})).then(function Y(){if(0<c.onReadyBeingFired.length){var $=c.onReadyBeingFired.reduce(yt,Pe);return c.onReadyBeingFired=[],be.resolve(Ni(function(){return $(a.vip)})).then(Y)}})}).finally(function(){c.openCanceller===m&&(c.onReadyBeingFired=null,c.isBeingOpened=!1)}).catch(function(Y){c.dbOpenError=Y;try{H&&H.abort()}catch{}return m===c.openCanceller&&a._close(),at(Y)}).finally(function(){c.openComplete=!0,L()}).then(function(){var Y;return O&&(Y={},a.tables.forEach(function($){$.schema.indexes.forEach(function(W){W.name&&(Y["idb://".concat(a.name,"/").concat($.name,"/").concat(W.name)]=new Dt(-1/0,[[[]]]))}),Y["idb://".concat(a.name,"/").concat($.name,"/")]=Y["idb://".concat(a.name,"/").concat($.name,"/:dels")]=new Dt(-1/0,[[[]]])}),Wn(eo).fire(Y),ji(Y,!0)),a})}function Pi(a){function c(x){return a.next(x)}var d=v(c),m=v(function(x){return a.throw(x)});function v(x){return function(A){var D=x(A),A=D.value;return D.done?A:A&&typeof A.then=="function"?A.then(d,m):l(A)?Promise.all(A).then(d,m):d(A)}}return v(c)()}function ia(a,c,d){for(var m=l(a)?a.slice():[a],v=0;v<d;++v)m.push(c);return m}var Ch={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(a){return r(r({},a),{table:function(c){var d=a.table(c),m=d.schema,v={},x=[];function E(O,Y,$){var W=no(O),z=v[W]=v[W]||[],F=O==null?0:typeof O=="string"?1:O.length,Z=0<Y,Z=r(r({},$),{name:Z?"".concat(W,"(virtual-from:").concat($.name,")"):$.name,lowLevelIndex:$,isVirtual:Z,keyTail:Y,keyLength:F,extractKey:bi(O),unique:!Z&&$.unique});return z.push(Z),Z.isPrimaryKey||x.push(Z),1<F&&E(F===2?O[0]:O.slice(0,F-1),Y+1,$),z.sort(function(te,ne){return te.keyTail-ne.keyTail}),Z}c=E(m.primaryKey.keyPath,0,m.primaryKey),v[":id"]=[c];for(var D=0,A=m.indexes;D<A.length;D++){var L=A[D];E(L.keyPath,0,L)}function H(O){var Y,$=O.query.index;return $.isVirtual?r(r({},O),{query:{index:$.lowLevelIndex,range:(Y=O.query.range,$=$.keyTail,{type:Y.type===1?2:Y.type,lower:ia(Y.lower,Y.lowerOpen?a.MAX_KEY:a.MIN_KEY,$),lowerOpen:!0,upper:ia(Y.upper,Y.upperOpen?a.MIN_KEY:a.MAX_KEY,$),upperOpen:!0})}}):O}return r(r({},d),{schema:r(r({},m),{primaryKey:c,indexes:x,getIndexByKeyPath:function(O){return(O=v[no(O)])&&O[0]}}),count:function(O){return d.count(H(O))},query:function(O){return d.query(H(O))},openCursor:function(O){var Y=O.query.index,$=Y.keyTail,W=Y.isVirtual,z=Y.keyLength;return W?d.openCursor(H(O)).then(function(Z){return Z&&F(Z)}):d.openCursor(O);function F(Z){return Object.create(Z,{continue:{value:function(te){te!=null?Z.continue(ia(te,O.reverse?a.MAX_KEY:a.MIN_KEY,$)):O.unique?Z.continue(Z.key.slice(0,z).concat(O.reverse?a.MIN_KEY:a.MAX_KEY,$)):Z.continue()}},continuePrimaryKey:{value:function(te,ne){Z.continuePrimaryKey(ia(te,a.MAX_KEY,$),ne)}},primaryKey:{get:function(){return Z.primaryKey}},key:{get:function(){var te=Z.key;return z===1?te[0]:te.slice(0,z)}},value:{get:function(){return Z.value}}})}}})}})}};function Mi(a,c,d,m){return d=d||{},m=m||"",s(a).forEach(function(v){var x,E,D;p(c,v)?(x=a[v],E=c[v],typeof x=="object"&&typeof E=="object"&&x&&E?(D=M(x))!==M(E)?d[m+v]=c[v]:D==="Object"?Mi(x,E,d,m+v+"."):x!==E&&(d[m+v]=c[v]):x!==E&&(d[m+v]=c[v])):d[m+v]=void 0}),s(c).forEach(function(v){p(a,v)||(d[m+v]=c[v])}),d}function Ii(a,c){return c.type==="delete"?c.keys:c.keys||c.values.map(a.extractKey)}var Th={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return r(r({},a),{table:function(c){var d=a.table(c),m=d.schema.primaryKey;return r(r({},d),{mutate:function(v){var x=he.trans,E=x.table(c).hook,D=E.deleting,A=E.creating,L=E.updating;switch(v.type){case"add":if(A.fire===Pe)break;return x._promise("readwrite",function(){return H(v)},!0);case"put":if(A.fire===Pe&&L.fire===Pe)break;return x._promise("readwrite",function(){return H(v)},!0);case"delete":if(D.fire===Pe)break;return x._promise("readwrite",function(){return H(v)},!0);case"deleteRange":if(D.fire===Pe)break;return x._promise("readwrite",function(){return function O(Y,$,W){return d.query({trans:Y,values:!1,query:{index:m,range:$},limit:W}).then(function(z){var F=z.result;return H({type:"delete",keys:F,trans:Y}).then(function(Z){return 0<Z.numFailures?Promise.reject(Z.failures[0]):F.length<W?{failures:[],numFailures:0,lastResult:void 0}:O(Y,r(r({},$),{lower:F[F.length-1],lowerOpen:!0}),W)})})}(v.trans,v.range,1e4)},!0)}return d.mutate(v);function H(O){var Y,$,W,z=he.trans,F=O.keys||Ii(m,O);if(!F)throw new Error("Keys missing");return(O=O.type==="add"||O.type==="put"?r(r({},O),{keys:F}):r({},O)).type!=="delete"&&(O.values=o([],O.values)),O.keys&&(O.keys=o([],O.keys)),Y=d,W=F,(($=O).type==="add"?Promise.resolve([]):Y.getMany({trans:$.trans,keys:W,cache:"immutable"})).then(function(Z){var te=F.map(function(ne,le){var pe,Se,ge,we=Z[le],ke={onerror:null,onsuccess:null};return O.type==="delete"?D.fire.call(ke,ne,we,z):O.type==="add"||we===void 0?(pe=A.fire.call(ke,ne,O.values[le],z),ne==null&&pe!=null&&(O.keys[le]=ne=pe,m.outbound||V(O.values[le],m.keyPath,ne))):(pe=Mi(we,O.values[le]),(Se=L.fire.call(ke,pe,ne,we,z))&&(ge=O.values[le],Object.keys(Se).forEach(function(xe){p(ge,xe)?ge[xe]=Se[xe]:V(ge,xe,Se[xe])}))),ke});return d.mutate(O).then(function(ne){for(var le=ne.failures,pe=ne.results,Se=ne.numFailures,ne=ne.lastResult,ge=0;ge<F.length;++ge){var we=(pe||F)[ge],ke=te[ge];we==null?ke.onerror&&ke.onerror(le[ge]):ke.onsuccess&&ke.onsuccess(O.type==="put"&&Z[ge]?O.values[ge]:we)}return{failures:le,results:pe,numFailures:Se,lastResult:ne}}).catch(function(ne){return te.forEach(function(le){return le.onerror&&le.onerror(ne)}),Promise.reject(ne)})})}}})}})}};function Xc(a,c,d){try{if(!c||c.keys.length<a.length)return null;for(var m=[],v=0,x=0;v<c.keys.length&&x<a.length;++v)We(c.keys[v],a[x])===0&&(m.push(d?se(c.values[v]):c.values[v]),++x);return m.length===a.length?m:null}catch{return null}}var Dh={stack:"dbcore",level:-1,create:function(a){return{table:function(c){var d=a.table(c);return r(r({},d),{getMany:function(m){if(!m.cache)return d.getMany(m);var v=Xc(m.keys,m.trans._cache,m.cache==="clone");return v?be.resolve(v):d.getMany(m).then(function(x){return m.trans._cache={keys:m.keys,values:m.cache==="clone"?se(x):x},x})},mutate:function(m){return m.type!=="add"&&(m.trans._cache=null),d.mutate(m)}})}}}};function Gc(a,c){return a.trans.mode==="readonly"&&!!a.subscr&&!a.trans.explicit&&a.trans.db._options.cache!=="disabled"&&!c.schema.primaryKey.outbound}function Zc(a,c){switch(a){case"query":return c.values&&!c.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Oh={stack:"dbcore",level:0,name:"Observability",create:function(a){var c=a.schema.name,d=new Dt(a.MIN_KEY,a.MAX_KEY);return r(r({},a),{transaction:function(m,v,x){if(he.subscr&&v!=="readonly")throw new fe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(he.querier));return a.transaction(m,v,x)},table:function(m){var v=a.table(m),x=v.schema,E=x.primaryKey,O=x.indexes,D=E.extractKey,A=E.outbound,L=E.autoIncrement&&O.filter(function($){return $.compound&&$.keyPath.includes(E.keyPath)}),H=r(r({},v),{mutate:function($){function W(xe){return xe="idb://".concat(c,"/").concat(m,"/").concat(xe),ne[xe]||(ne[xe]=new Dt)}var z,F,Z,te=$.trans,ne=$.mutatedParts||($.mutatedParts={}),le=W(""),pe=W(":dels"),Se=$.type,ke=$.type==="deleteRange"?[$.range]:$.type==="delete"?[$.keys]:$.values.length<50?[Ii(E,$).filter(function(xe){return xe}),$.values]:[],ge=ke[0],we=ke[1],ke=$.trans._cache;return l(ge)?(le.addKeys(ge),(ke=Se==="delete"||ge.length===we.length?Xc(ge,ke):null)||pe.addKeys(ge),(ke||we)&&(z=W,F=ke,Z=we,x.indexes.forEach(function(xe){var Ce=z(xe.name||"");function $e(Ye){return Ye!=null?xe.extractKey(Ye):null}function ze(Ye){return xe.multiEntry&&l(Ye)?Ye.forEach(function(Yt){return Ce.addKey(Yt)}):Ce.addKey(Ye)}(F||Z).forEach(function(Ye,Ot){var Ae=F&&$e(F[Ot]),Ot=Z&&$e(Z[Ot]);We(Ae,Ot)!==0&&(Ae!=null&&ze(Ae),Ot!=null&&ze(Ot))})}))):ge?(we={from:(we=ge.lower)!==null&&we!==void 0?we:a.MIN_KEY,to:(we=ge.upper)!==null&&we!==void 0?we:a.MAX_KEY},pe.add(we),le.add(we)):(le.add(d),pe.add(d),x.indexes.forEach(function(xe){return W(xe.name).add(d)})),v.mutate($).then(function(xe){return!ge||$.type!=="add"&&$.type!=="put"||(le.addKeys(xe.results),L&&L.forEach(function(Ce){for(var $e=$.values.map(function(Ae){return Ce.extractKey(Ae)}),ze=Ce.keyPath.findIndex(function(Ae){return Ae===E.keyPath}),Ye=0,Yt=xe.results.length;Ye<Yt;++Ye)$e[Ye][ze]=xe.results[Ye];W(Ce.name).addKeys($e)})),te.mutatedParts=oa(te.mutatedParts||{},ne),xe})}}),O=function(W){var z=W.query,W=z.index,z=z.range;return[W,new Dt((W=z.lower)!==null&&W!==void 0?W:a.MIN_KEY,(z=z.upper)!==null&&z!==void 0?z:a.MAX_KEY)]},Y={get:function($){return[E,new Dt($.key)]},getMany:function($){return[E,new Dt().addKeys($.keys)]},count:O,query:O,openCursor:O};return s(Y).forEach(function($){H[$]=function(W){var z=he.subscr,F=!!z,Z=Gc(he,v)&&Zc($,W)?W.obsSet={}:z;if(F){var te=function(we){return we="idb://".concat(c,"/").concat(m,"/").concat(we),Z[we]||(Z[we]=new Dt)},ne=te(""),le=te(":dels"),z=Y[$](W),F=z[0],z=z[1];if(($==="query"&&F.isPrimaryKey&&!W.values?le:te(F.name||"")).add(z),!F.isPrimaryKey){if($!=="count"){var pe=$==="query"&&A&&W.values&&v.query(r(r({},W),{values:!1}));return v[$].apply(this,arguments).then(function(we){if($==="query"){if(A&&W.values)return pe.then(function($e){return $e=$e.result,ne.addKeys($e),we});var ke=W.values?we.result.map(D):we.result;(W.values?ne:le).addKeys(ke)}else if($==="openCursor"){var xe=we,Ce=W.values;return xe&&Object.create(xe,{key:{get:function(){return le.addKey(xe.primaryKey),xe.key}},primaryKey:{get:function(){var $e=xe.primaryKey;return le.addKey($e),$e}},value:{get:function(){return Ce&&ne.addKey(xe.primaryKey),xe.value}}})}return we})}le.add(d)}}return v[$].apply(this,arguments)}}),H}})}};function Qc(a,c,d){if(d.numFailures===0)return c;if(c.type==="deleteRange")return null;var m=c.keys?c.keys.length:"values"in c&&c.values?c.values.length:1;return d.numFailures===m?null:(c=r({},c),l(c.keys)&&(c.keys=c.keys.filter(function(v,x){return!(x in d.failures)})),"values"in c&&l(c.values)&&(c.values=c.values.filter(function(v,x){return!(x in d.failures)})),c)}function Ai(a,c){return d=a,((m=c).lower===void 0||(m.lowerOpen?0<We(d,m.lower):0<=We(d,m.lower)))&&(a=a,(c=c).upper===void 0||(c.upperOpen?We(a,c.upper)<0:We(a,c.upper)<=0));var d,m}function Jc(a,c,Y,m,v,x){if(!Y||Y.length===0)return a;var E=c.query.index,D=E.multiEntry,A=c.query.range,L=m.schema.primaryKey.extractKey,H=E.extractKey,O=(E.lowLevelIndex||E).extractKey,Y=Y.reduce(function($,W){var z=$,F=[];if(W.type==="add"||W.type==="put")for(var Z=new Dt,te=W.values.length-1;0<=te;--te){var ne,le=W.values[te],pe=L(le);Z.hasKey(pe)||(ne=H(le),(D&&l(ne)?ne.some(function(xe){return Ai(xe,A)}):Ai(ne,A))&&(Z.addKey(pe),F.push(le)))}switch(W.type){case"add":var Se=new Dt().addKeys(c.values?$.map(function(Ce){return L(Ce)}):$),z=$.concat(c.values?F.filter(function(Ce){return Ce=L(Ce),!Se.hasKey(Ce)&&(Se.addKey(Ce),!0)}):F.map(function(Ce){return L(Ce)}).filter(function(Ce){return!Se.hasKey(Ce)&&(Se.addKey(Ce),!0)}));break;case"put":var ge=new Dt().addKeys(W.values.map(function(Ce){return L(Ce)}));z=$.filter(function(Ce){return!ge.hasKey(c.values?L(Ce):Ce)}).concat(c.values?F:F.map(function(Ce){return L(Ce)}));break;case"delete":var we=new Dt().addKeys(W.keys);z=$.filter(function(Ce){return!we.hasKey(c.values?L(Ce):Ce)});break;case"deleteRange":var ke=W.range;z=$.filter(function(Ce){return!Ai(L(Ce),ke)})}return z},a);return Y===a?a:(Y.sort(function($,W){return We(O($),O(W))||We(L($),L(W))}),c.limit&&c.limit<1/0&&(Y.length>c.limit?Y.length=c.limit:a.length===c.limit&&Y.length<c.limit&&(v.dirty=!0)),x?Object.freeze(Y):Y)}function el(a,c){return We(a.lower,c.lower)===0&&We(a.upper,c.upper)===0&&!!a.lowerOpen==!!c.lowerOpen&&!!a.upperOpen==!!c.upperOpen}function jh(a,c){return function(d,m,v,x){if(d===void 0)return m!==void 0?-1:0;if(m===void 0)return 1;if((m=We(d,m))===0){if(v&&x)return 0;if(v)return 1;if(x)return-1}return m}(a.lower,c.lower,a.lowerOpen,c.lowerOpen)<=0&&0<=function(d,m,v,x){if(d===void 0)return m!==void 0?1:0;if(m===void 0)return-1;if((m=We(d,m))===0){if(v&&x)return 0;if(v)return-1;if(x)return 1}return m}(a.upper,c.upper,a.upperOpen,c.upperOpen)}function Ph(a,c,d,m){a.subscribers.add(d),m.addEventListener("abort",function(){var v,x;a.subscribers.delete(d),a.subscribers.size===0&&(v=a,x=c,setTimeout(function(){v.subscribers.size===0&&ae(x,v)},3e3))})}var Mh={stack:"dbcore",level:0,name:"Cache",create:function(a){var c=a.schema.name;return r(r({},a),{transaction:function(d,m,v){var x,E,D=a.transaction(d,m,v);return m==="readwrite"&&(E=(x=new AbortController).signal,v=function(A){return function(){if(x.abort(),m==="readwrite"){for(var L=new Set,H=0,O=d;H<O.length;H++){var Y=O[H],$=rr["idb://".concat(c,"/").concat(Y)];if($){var W=a.table(Y),z=$.optimisticOps.filter(function(Ce){return Ce.trans===D});if(D._explicit&&A&&D.mutatedParts)for(var F=0,Z=Object.values($.queries.query);F<Z.length;F++)for(var te=0,ne=(Se=Z[F]).slice();te<ne.length;te++)Ti((ge=ne[te]).obsSet,D.mutatedParts)&&(ae(Se,ge),ge.subscribers.forEach(function(Ce){return L.add(Ce)}));else if(0<z.length){$.optimisticOps=$.optimisticOps.filter(function(Ce){return Ce.trans!==D});for(var le=0,pe=Object.values($.queries.query);le<pe.length;le++)for(var Se,ge,we,ke=0,xe=(Se=pe[le]).slice();ke<xe.length;ke++)(ge=xe[ke]).res!=null&&D.mutatedParts&&(A&&!ge.dirty?(we=Object.isFrozen(ge.res),we=Jc(ge.res,ge.req,z,W,ge,we),ge.dirty?(ae(Se,ge),ge.subscribers.forEach(function(Ce){return L.add(Ce)})):we!==ge.res&&(ge.res=we,ge.promise=be.resolve({result:we}))):(ge.dirty&&ae(Se,ge),ge.subscribers.forEach(function(Ce){return L.add(Ce)})))}}}L.forEach(function(Ce){return Ce()})}}},D.addEventListener("abort",v(!1),{signal:E}),D.addEventListener("error",v(!1),{signal:E}),D.addEventListener("complete",v(!0),{signal:E})),D},table:function(d){var m=a.table(d),v=m.schema.primaryKey;return r(r({},m),{mutate:function(x){var E=he.trans;if(v.outbound||E.db._options.cache==="disabled"||E.explicit||E.idbtrans.mode!=="readwrite")return m.mutate(x);var D=rr["idb://".concat(c,"/").concat(d)];return D?(E=m.mutate(x),x.type!=="add"&&x.type!=="put"||!(50<=x.values.length||Ii(v,x).some(function(A){return A==null}))?(D.optimisticOps.push(x),x.mutatedParts&&aa(x.mutatedParts),E.then(function(A){0<A.numFailures&&(ae(D.optimisticOps,x),(A=Qc(0,x,A))&&D.optimisticOps.push(A),x.mutatedParts&&aa(x.mutatedParts))}),E.catch(function(){ae(D.optimisticOps,x),x.mutatedParts&&aa(x.mutatedParts)})):E.then(function(A){var L=Qc(0,r(r({},x),{values:x.values.map(function(H,O){var Y;return A.failures[O]?H:(H=(Y=v.keyPath)!==null&&Y!==void 0&&Y.includes(".")?se(H):r({},H),V(H,v.keyPath,A.results[O]),H)})}),A);D.optimisticOps.push(L),queueMicrotask(function(){return x.mutatedParts&&aa(x.mutatedParts)})}),E):m.mutate(x)},query:function(x){if(!Gc(he,m)||!Zc("query",x))return m.query(x);var E=((L=he.trans)===null||L===void 0?void 0:L.db._options.cache)==="immutable",O=he,D=O.requery,A=O.signal,L=function(W,z,F,Z){var te=rr["idb://".concat(W,"/").concat(z)];if(!te)return[];if(!(z=te.queries[F]))return[null,!1,te,null];var ne=z[(Z.query?Z.query.index.name:null)||""];if(!ne)return[null,!1,te,null];switch(F){case"query":var le=ne.find(function(pe){return pe.req.limit===Z.limit&&pe.req.values===Z.values&&el(pe.req.query.range,Z.query.range)});return le?[le,!0,te,ne]:[ne.find(function(pe){return("limit"in pe.req?pe.req.limit:1/0)>=Z.limit&&(!Z.values||pe.req.values)&&jh(pe.req.query.range,Z.query.range)}),!1,te,ne];case"count":return le=ne.find(function(pe){return el(pe.req.query.range,Z.query.range)}),[le,!!le,te,ne]}}(c,d,"query",x),H=L[0],O=L[1],Y=L[2],$=L[3];return H&&O?H.obsSet=x.obsSet:(O=m.query(x).then(function(W){var z=W.result;if(H&&(H.res=z),E){for(var F=0,Z=z.length;F<Z;++F)Object.freeze(z[F]);Object.freeze(z)}else W.result=se(z);return W}).catch(function(W){return $&&H&&ae($,H),Promise.reject(W)}),H={obsSet:x.obsSet,promise:O,subscribers:new Set,type:"query",req:x,dirty:!1},$?$.push(H):($=[H],(Y=Y||(rr["idb://".concat(c,"/").concat(d)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[x.query.index.name||""]=$)),Ph(H,$,D,A),H.promise.then(function(W){return{result:Jc(W.result,x,Y==null?void 0:Y.optimisticOps,m,H,E)}})}})}})}};function sa(a,c){return new Proxy(a,{get:function(d,m,v){return m==="db"?c:Reflect.get(d,m,v)}})}var _n=(ht.prototype.version=function(a){if(isNaN(a)||a<.1)throw new fe.Type("Given version is not a positive number");if(a=Math.round(10*a)/10,this.idbdb||this._state.isBeingOpened)throw new fe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var c=this._versions,d=c.filter(function(m){return m._cfg.version===a})[0];return d||(d=new this.Version(a),c.push(d),c.sort(Sh),d.stores({}),this._state.autoSchema=!1,d)},ht.prototype._whenReady=function(a){var c=this;return this.idbdb&&(this._state.openComplete||he.letThrough||this._vip)?a():new be(function(d,m){if(c._state.openComplete)return m(new fe.DatabaseClosed(c._state.dbOpenError));if(!c._state.isBeingOpened){if(!c._state.autoOpen)return void m(new fe.DatabaseClosed);c.open().catch(Pe)}c._state.dbReadyPromise.then(d,m)}).then(a)},ht.prototype.use=function(a){var c=a.stack,d=a.create,m=a.level,v=a.name;return v&&this.unuse({stack:c,name:v}),a=this._middlewares[c]||(this._middlewares[c]=[]),a.push({stack:c,create:d,level:m??10,name:v}),a.sort(function(x,E){return x.level-E.level}),this},ht.prototype.unuse=function(a){var c=a.stack,d=a.name,m=a.create;return c&&this._middlewares[c]&&(this._middlewares[c]=this._middlewares[c].filter(function(v){return m?v.create!==m:!!d&&v.name!==d})),this},ht.prototype.open=function(){var a=this;return ft(Ne,function(){return Nh(a)})},ht.prototype._close=function(){var a=this._state,c=Ln.indexOf(this);if(0<=c&&Ln.splice(c,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}a.isBeingOpened||(a.dbReadyPromise=new be(function(d){a.dbReadyResolve=d}),a.openCanceller=new be(function(d,m){a.cancelOpen=m}))},ht.prototype.close=function(d){var c=(d===void 0?{disableAutoOpen:!0}:d).disableAutoOpen,d=this._state;c?(d.isBeingOpened&&d.cancelOpen(new fe.DatabaseClosed),this._close(),d.autoOpen=!1,d.dbOpenError=new fe.DatabaseClosed):(this._close(),d.autoOpen=this._options.autoOpen||d.isBeingOpened,d.openComplete=!1,d.dbOpenError=null)},ht.prototype.delete=function(a){var c=this;a===void 0&&(a={disableAutoOpen:!0});var d=0<arguments.length&&typeof arguments[0]!="object",m=this._state;return new be(function(v,x){function E(){c.close(a);var D=c._deps.indexedDB.deleteDatabase(c.name);D.onsuccess=Xe(function(){var A,L,H;A=c._deps,L=c.name,H=A.indexedDB,A=A.IDBKeyRange,Ei(H)||L===_r||ki(H,A).delete(L).catch(Pe),v()}),D.onerror=dn(x),D.onblocked=c._fireOnBlocked}if(d)throw new fe.InvalidArgument("Invalid closeOptions argument to db.delete()");m.isBeingOpened?m.dbReadyPromise.then(E):E()})},ht.prototype.backendDB=function(){return this.idbdb},ht.prototype.isOpen=function(){return this.idbdb!==null},ht.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"},ht.prototype.hasFailed=function(){return this._state.dbOpenError!==null},ht.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(ht.prototype,"tables",{get:function(){var a=this;return s(this._allTables).map(function(c){return a._allTables[c]})},enumerable:!1,configurable:!0}),ht.prototype.transaction=function(){var a=(function(c,d,m){var v=arguments.length;if(v<2)throw new fe.InvalidArgument("Too few arguments");for(var x=new Array(v-1);--v;)x[v-1]=arguments[v];return m=x.pop(),[c,ee(x),m]}).apply(this,arguments);return this._transaction.apply(this,a)},ht.prototype._transaction=function(a,c,d){var m=this,v=he.trans;v&&v.db===this&&a.indexOf("!")===-1||(v=null);var x,E,D=a.indexOf("?")!==-1;a=a.replace("!","").replace("?","");try{if(E=c.map(function(L){if(L=L instanceof m.Table?L.name:L,typeof L!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return L}),a=="r"||a===Ur)x=Ur;else{if(a!="rw"&&a!=Xr)throw new fe.InvalidArgument("Invalid transaction mode: "+a);x=Xr}if(v){if(v.mode===Ur&&x===Xr){if(!D)throw new fe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");v=null}v&&E.forEach(function(L){if(v&&v.storeNames.indexOf(L)===-1){if(!D)throw new fe.SubTransaction("Table "+L+" not included in parent transaction.");v=null}}),D&&v&&!v.active&&(v=null)}}catch(L){return v?v._promise(null,function(H,O){O(L)}):at(L)}var A=(function L(H,O,Y,$,W){return be.resolve().then(function(){var z=he.transless||he,F=H._createTransaction(O,Y,H._dbSchema,$);if(F.explicit=!0,z={trans:F,transless:z},$)F.idbtrans=$.idbtrans;else try{F.create(),F.idbtrans._explicit=!0,H._state.PR1398_maxLoop=3}catch(ne){return ne.name===Oe.InvalidState&&H.isOpen()&&0<--H._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),H.close({disableAutoOpen:!1}),H.open().then(function(){return L(H,O,Y,null,W)})):at(ne)}var Z,te=oe(W);return te&&Zt(),z=be.follow(function(){var ne;(Z=W.call(F,F))&&(te?(ne=Ht.bind(null,null),Z.then(ne,ne)):typeof Z.next=="function"&&typeof Z.throw=="function"&&(Z=Pi(Z)))},z),(Z&&typeof Z.then=="function"?be.resolve(Z).then(function(ne){return F.active?ne:at(new fe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):z.then(function(){return Z})).then(function(ne){return $&&F._resolve(),F._completion.then(function(){return ne})}).catch(function(ne){return F._reject(ne),at(ne)})})}).bind(null,this,x,E,v,d);return v?v._promise(x,A,"lock"):he.trans?ft(he.transless,function(){return m._whenReady(A)}):this._whenReady(A)},ht.prototype.table=function(a){if(!p(this._allTables,a))throw new fe.InvalidTable("Table ".concat(a," does not exist"));return this._allTables[a]},ht);function ht(a,c){var d=this;this._middlewares={},this.verno=0;var m=ht.dependencies;this._options=c=r({addons:ht.addons,autoOpen:!0,indexedDB:m.indexedDB,IDBKeyRange:m.IDBKeyRange,cache:"cloned"},c),this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange},m=c.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var v,x,E,D,A,L={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Pe,dbReadyPromise:null,cancelOpen:Pe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:c.autoOpen};L.dbReadyPromise=new be(function(O){L.dbReadyResolve=O}),L.openCanceller=new be(function(O,Y){L.cancelOpen=Y}),this._state=L,this.name=a,this.on=Gr(this,"populate","blocked","versionchange","close",{ready:[yt,Pe]}),this.on.ready.subscribe=I(this.on.ready.subscribe,function(O){return function(Y,$){ht.vip(function(){var W,z=d._state;z.openComplete?(z.dbOpenError||be.resolve().then(Y),$&&O(Y)):z.onReadyBeingFired?(z.onReadyBeingFired.push(Y),$&&O(Y)):(O(Y),W=d,$||O(function F(){W.on.ready.unsubscribe(Y),W.on.ready.unsubscribe(F)}))})}}),this.Collection=(v=this,Zr(ph.prototype,function(Z,F){this.db=v;var $=qo,W=null;if(F)try{$=F()}catch(te){W=te}var z=Z._ctx,F=z.table,Z=F.hook.reading.fire;this._ctx={table:F,index:z.index,isPrimKey:!z.index||F.schema.primKey.keyPath&&z.index===F.schema.primKey.name,range:$,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:W,or:z.or,valueMapper:Z!==Qe?Z:null}})),this.Table=(x=this,Zr(Ac.prototype,function(O,Y,$){this.db=x,this._tx=$,this.name=O,this.schema=Y,this.hook=x._allTables[O]?x._allTables[O].hook:Gr(null,{creating:[Ue,Pe],reading:[Le,Qe],updating:[Te,Pe],deleting:[He,Pe]})})),this.Transaction=(E=this,Zr(vh.prototype,function(O,Y,$,W,z){var F=this;this.db=E,this.mode=O,this.storeNames=Y,this.schema=$,this.chromeTransactionDurability=W,this.idbtrans=null,this.on=Gr(this,"complete","error","abort"),this.parent=z||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new be(function(Z,te){F._resolve=Z,F._reject=te}),this._completion.then(function(){F.active=!1,F.on.complete.fire()},function(Z){var te=F.active;return F.active=!1,F.on.error.fire(Z),F.parent?F.parent._reject(Z):te&&F.idbtrans&&F.idbtrans.abort(),at(Z)})})),this.Version=(D=this,Zr(Eh.prototype,function(O){this.db=D,this._cfg={version:O,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(A=this,Zr(Wc.prototype,function(O,Y,$){if(this.db=A,this._ctx={table:O,index:Y===":id"?null:Y,or:$},this._cmp=this._ascending=We,this._descending=function(W,z){return We(z,W)},this._max=function(W,z){return 0<We(W,z)?W:z},this._min=function(W,z){return We(W,z)<0?W:z},this._IDBKeyRange=A._deps.IDBKeyRange,!this._IDBKeyRange)throw new fe.MissingAPI})),this.on("versionchange",function(O){0<O.newVersion?console.warn("Another connection wants to upgrade database '".concat(d.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(d.name,"'. Closing db now to resume the delete request.")),d.close({disableAutoOpen:!1})}),this.on("blocked",function(O){!O.newVersion||O.newVersion<O.oldVersion?console.warn("Dexie.delete('".concat(d.name,"') was blocked")):console.warn("Upgrade '".concat(d.name,"' blocked by other connection holding version ").concat(O.oldVersion/10))}),this._maxKey=to(c.IDBKeyRange),this._createTransaction=function(O,Y,$,W){return new d.Transaction(O,Y,$,d._options.chromeTransactionDurability,W)},this._fireOnBlocked=function(O){d.on("blocked").fire(O),Ln.filter(function(Y){return Y.name===d.name&&Y!==d&&!Y._state.vcFired}).map(function(Y){return Y.on("versionchange").fire(O)})},this.use(Dh),this.use(Mh),this.use(Oh),this.use(Ch),this.use(Th);var H=new Proxy(this,{get:function(O,Y,$){if(Y==="_vip")return!0;if(Y==="table")return function(z){return sa(d.table(z),H)};var W=Reflect.get(O,Y,$);return W instanceof Ac?sa(W,H):Y==="tables"?W.map(function(z){return sa(z,H)}):Y==="_createTransaction"?function(){return sa(W.apply(this,arguments),H)}:W}});this.vip=H,m.forEach(function(O){return O(d)})}var ca,Kt=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ih=($i.prototype.subscribe=function(a,c,d){return this._subscribe(a&&typeof a!="function"?a:{next:a,error:c,complete:d})},$i.prototype[Kt]=function(){return this},$i);function $i(a){this._subscribe=a}try{ca={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{ca={indexedDB:null,IDBKeyRange:null}}function tl(a){var c,d=!1,m=new Ih(function(v){var x=oe(a),E,D=!1,A={},L={},H={get closed(){return D},unsubscribe:function(){D||(D=!0,E&&E.abort(),O&&Wn.storagemutated.unsubscribe($))}};v.start&&v.start(H);var O=!1,Y=function(){return xn(W)},$=function(z){oa(A,z),Ti(L,A)&&Y()},W=function(){var z,F,Z;!D&&ca.indexedDB&&(A={},z={},E&&E.abort(),E=new AbortController,Z=function(te){var ne=vt();try{x&&Zt();var le=Rt(a,te);return le=x?le.finally(Ht):le}finally{ne&&an()}}(F={subscr:z,signal:E.signal,requery:Y,querier:a,trans:null}),Promise.resolve(Z).then(function(te){d=!0,c=te,D||F.signal.aborted||(A={},function(ne){for(var le in ne)if(p(ne,le))return;return 1}(L=z)||O||(Wn(eo,$),O=!0),xn(function(){return!D&&v.next&&v.next(te)}))},function(te){d=!1,["DatabaseClosedError","AbortError"].includes(te==null?void 0:te.name)||D||xn(function(){D||v.error&&v.error(te)})}))};return setTimeout(Y,0),H});return m.hasValue=function(){return d},m.getValue=function(){return c},m}var or=_n;function Ri(a){var c=Bn;try{Bn=!0,Wn.storagemutated.fire(a),ji(a,!0)}finally{Bn=c}}y(or,r(r({},Ze),{delete:function(a){return new or(a,{addons:[]}).delete()},exists:function(a){return new or(a,{addons:[]}).open().then(function(c){return c.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return c=or.dependencies,d=c.indexedDB,c=c.IDBKeyRange,(Ei(d)?Promise.resolve(d.databases()).then(function(m){return m.map(function(v){return v.name}).filter(function(v){return v!==_r})}):ki(d,c).toCollection().primaryKeys()).then(a)}catch{return at(new fe.MissingAPI)}var c,d},defineClass:function(){return function(a){u(this,a)}},ignoreTransaction:function(a){return he.trans?ft(he.transless,a):a()},vip:Ni,async:function(a){return function(){try{var c=Pi(a.apply(this,arguments));return c&&typeof c.then=="function"?c:be.resolve(c)}catch(d){return at(d)}}},spawn:function(a,c,d){try{var m=Pi(a.apply(d,c||[]));return m&&typeof m.then=="function"?m:be.resolve(m)}catch(v){return at(v)}},currentTransaction:{get:function(){return he.trans||null}},waitFor:function(a,c){return c=be.resolve(typeof a=="function"?or.ignoreTransaction(a):a).timeout(c||6e4),he.trans?he.trans.waitFor(c):c},Promise:be,debug:{get:function(){return mt},set:function(a){Bt(a)}},derive:_,extend:u,props:y,override:I,Events:Gr,on:Wn,liveQuery:tl,extendObservabilitySet:oa,getByKeyPath:q,setByKeyPath:V,delByKeyPath:function(a,c){typeof c=="string"?V(a,c,void 0):"length"in c&&[].map.call(c,function(d){V(a,d,void 0)})},shallowClone:J,deepClone:se,getObjectDiff:Mi,cmp:We,asap:U,minKey:-1/0,addons:[],connections:Ln,errnames:Oe,dependencies:ca,cache:rr,semVer:"4.0.10",version:"4.0.10".split(".").map(function(a){return parseInt(a)}).reduce(function(a,c,d){return a+c/Math.pow(10,2*d)})})),or.maxKey=to(or.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Wn(eo,function(a){Bn||(a=new CustomEvent(yi,{detail:a}),Bn=!0,dispatchEvent(a),Bn=!1)}),addEventListener(yi,function(a){a=a.detail,Bn||Ri(a)}));var Cr,Bn=!1,nl=function(){};return typeof BroadcastChannel<"u"&&((nl=function(){(Cr=new BroadcastChannel(yi)).onmessage=function(a){return a.data&&Ri(a.data)}})(),typeof Cr.unref=="function"&&Cr.unref(),Wn(eo,function(a){Bn||Cr.postMessage(a)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(a){if(!_n.disableBfCache&&a.persisted){mt&&console.debug("Dexie: handling persisted pagehide"),Cr!=null&&Cr.close();for(var c=0,d=Ln;c<d.length;c++)d[c].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(a){!_n.disableBfCache&&a.persisted&&(mt&&console.debug("Dexie: handling persisted pageshow"),nl(),Ri({all:new Dt(-1/0,[[]])}))})),be.rejectionMapper=function(a,c){return!a||a instanceof de||a instanceof TypeError||a instanceof SyntaxError||!a.name||!Re[a.name]?a:(c=new Re[a.name](c||a.message,a),"stack"in a&&S(c,"stack",{get:function(){return this.inner.stack}}),c)},Bt(mt),r(_n,Object.freeze({__proto__:null,Dexie:_n,liveQuery:tl,Entity:Ko,cmp:We,PropModSymbol:Sn,PropModification:Qr,replacePrefix:function(a,c){return new Qr({replacePrefix:[a,c]})},add:function(a){return new Qr({add:a})},remove:function(a){return new Qr({remove:a})},default:_n,RangeSet:Dt,mergeRanges:oo,rangesOverlap:Vc}),{default:_n}),_n})})(lf);var hw=lf.exports;const _s=Qs(hw),Xl=Symbol.for("Dexie"),ks=globalThis[Xl]||(globalThis[Xl]=_s);if(_s.semVer!==ks.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${_s.semVer} and ${ks.semVer}`);class mw extends ks{constructor(){super("TemporalDB"),this.version(3).stores({workflows:"[workflowId+runId],[parentWorkflowId+parentWorkflowRunId], parentWorkflowId, parentWorkflowRunId",activities:"[activityId+workflowId+workflowRunId],[workflowId+workflowRunId], workflowId, workflowRunId",settings:"id"})}}const gn=new mw;async function Es(e){try{await gn.workflows.put(e),console.debug("Workflow added successfully:",e)}catch(t){console.error("Failed to add workflow:",t,e)}}async function Ro(e,t){if(t)try{const n=await gn.workflows.get({workflowId:e,runId:t});return console.debug("Retrieved Workflow:",n),n}catch(n){console.error("Failed to retrieve workflow:",n);return}}async function pw(e,t){try{await gn.workflows.where({workflowId:e,runId:t}).delete(),console.debug(`Deleted Workflow with ID: ${e}`)}catch(n){console.error("Failed to delete workflow:",n)}}async function uf(e){try{await gn.activities.put(e),console.debug("Activity added successfully:",e)}catch(t){console.error("Failed to add activity:",t,e)}}async function gw(e,t,n){try{const r=await gn.activities.get({activityId:t,workflowId:e,workflowRunId:n});return console.debug("Retrieved Activity:",r),r}catch(r){console.error("Failed to retrieve activity:",r);return}}async function yw(e,t,n){try{await gn.activities.where({activityId:t,workflowId:e,workflowRunId:n}).delete(),console.debug(`Deleted Activity with ID: ${t}`)}catch(r){console.error("Failed to delete activity:",r)}}async function df(e,t){try{return await gn.activities.where(["workflowId","workflowRunId"]).equals([e,t]).toArray()}catch(n){return console.error("Failed to retrieve activities by workflowId:",n),[]}}async function pc(e,t){try{return await gn.workflows.where(["parentWorkflowId","parentWorkflowRunId"]).equals([e,t]).toArray()}catch(n){return console.error("Failed to retrieve child workflows:",n),[]}}async function vw(e,t,n){if(!e)return[];const r=[];for(const o of e)if(o.type==="workflow"||o.type==="childWorkflow"){const i=await Ro(o.id,o.workflowRunId);i&&r.push(i)}else if(o.type==="activity"){const i=await gw(t,o.id,n);i&&r.push(i)}return r}async function Oo(e){try{const t=await gn.settings.get(e);return t==null?void 0:t.value}catch(t){console.error("Failed to retrieve setting:",t);return}}async function Ns(e,t){try{await gn.settings.put({id:e,value:t}),console.debug(`Setting ${e} updated successfully:`,t)}catch(n){console.error("Failed to update setting:",n)}}const zn={name:"default-queue",kind:"TASK_QUEUE_KIND_NORMAL"},ww=()=>{const e="demo-order-processing-wf-001",t=new Date().toISOString(),n=new Date(Date.parse(t)+6e4).toISOString(),r=new Date(Date.parse(t)+12e4).toISOString(),o=new Date(Date.parse(t)+18e4).toISOString(),i="1",s="2",l="3",u={orderId:"ORD-001",customer:{id:"CUST-123",name:"John Doe",email:"john.doe@example.com"},items:[{id:"ITEM-1",name:"Gaming Laptop",price:1299.99,quantity:1},{id:"ITEM-2",name:"Wireless Mouse",price:49.99,quantity:2}],totalAmount:1399.97,shippingAddress:{street:"123 Tech Lane",city:"San Francisco",state:"CA",zipCode:"94105"}},f=[{type:"workflow",workflowId:e,workflowType:"OrderProcessingWorkflow",status:"RUNNING",startTime:t,endTime:void 0,taskQueue:zn,input:JSON.stringify(u),workflowTaskCompletedEventId:i,memo:{description:"Process customer order with validation and fulfillment",priority:"HIGH"}},{type:"childWorkflow",workflowId:"demo-fulfillment-wf-001",workflowType:"OrderFulfillmentWorkflow",parentWorkflowId:e,status:"RUNNING",startTime:t,endTime:void 0,taskQueue:zn,workflowTaskCompletedEventId:s,input:JSON.stringify({orderId:u.orderId,items:u.items,shippingAddress:u.shippingAddress,warehouseId:"WH-SF-001"})},...Array(5).fill(null).map((p,y)=>({type:"childWorkflow",workflowId:`demo-shipping-wf-00${y+1}`,workflowType:"ShippingWorkflow",parentWorkflowId:"demo-fulfillment-wf-001",status:"RUNNING",startTime:t,endTime:void 0,taskQueue:zn,workflowTaskCompletedEventId:l,input:JSON.stringify({packageId:`PKG-00${y+1}`,orderId:u.orderId,item:u.items[y%2],shippingAddress:u.shippingAddress,carrier:"FastShip",trackingPrefix:"FS"})}))],h=[{type:"activity",activityId:"validate-order-001",activityType:"ValidateOrderActivity",workflowId:e,status:"COMPLETED",startTime:t,endTime:n,taskQueue:zn,input:JSON.stringify({orderId:u.orderId,customerId:u.customer.id,items:u.items,totalAmount:u.totalAmount}),result:JSON.stringify({isValid:!0,validatedAt:t,checks:{inventory:!0,pricing:!0,customerStatus:"ACTIVE",fraudCheck:{passed:!0,score:.95,reasons:["Valid customer history","Normal order pattern"]}}}),workflowTaskCompletedEventId:i},{type:"activity",activityId:"process-payment-001",activityType:"ProcessPaymentActivity",workflowId:e,status:"COMPLETED",startTime:n,endTime:r,taskQueue:zn,input:JSON.stringify({orderId:u.orderId,amount:u.totalAmount,customerId:u.customer.id,paymentMethod:{type:"CREDIT_CARD",last4:"4242",brand:"Visa",expiryMonth:12,expiryYear:2025}}),result:JSON.stringify({transactionId:"TX-789012",status:"APPROVED",processedAt:n,paymentDetails:{authorizationCode:"AUTH123",avsResult:"Y",cvvResult:"M",processorResponse:"Approved"}}),workflowTaskCompletedEventId:i},{type:"activity",activityId:"inventory-check-001",activityType:"CheckInventoryActivity",workflowId:"demo-fulfillment-wf-001",status:"COMPLETED",startTime:r,endTime:o,taskQueue:zn,input:JSON.stringify({warehouseId:"WH-SF-001",items:u.items,reservationDuration:"30m"}),result:JSON.stringify({available:!0,itemsAvailability:u.items.map(p=>({itemId:p.id,available:!0,quantity:p.quantity,location:"Zone-A12",binNumber:"BIN-456",reservationId:`RES-${p.id}`,expiresAt:new Date(Date.parse(o)+18e5).toISOString()}))}),workflowTaskCompletedEventId:s},{type:"activity",activityId:"prepare-shipment-001",activityType:"PrepareShipmentActivity",workflowId:"demo-fulfillment-wf-001",status:"FAILED",startTime:o,endTime:new Date(Date.parse(o)+3e4).toISOString(),taskQueue:zn,input:JSON.stringify({orderId:u.orderId,items:u.items,warehouseId:"WH-SF-001",packagingType:"STANDARD",packagingRequirements:{type:"BOX_MEDIUM",reinforced:!0,materials:["bubble_wrap","foam_padding"]}}),result:JSON.stringify({error:"PACKAGING_MATERIAL_UNAVAILABLE",message:"Required packaging material out of stock",details:{missingMaterials:["foam_padding"],availableAlternatives:["air_pillows"],nextRestockScheduled:new Date(Date.parse(t)+864e5).toISOString()},timestamp:o,errorCode:"PKG_001",severity:"MEDIUM"}),workflowTaskCompletedEventId:s},...Array(5).fill(null).map((p,y)=>({type:"activity",activityId:`process-shipping-00${y+1}`,activityType:"ProcessShippingActivity",workflowId:`demo-shipping-wf-00${y+1}`,status:"RUNNING",startTime:new Date(Date.parse(o)+y*1e4).toISOString(),endTime:void 0,taskQueue:zn,input:JSON.stringify({packageId:`PKG-00${y+1}`,orderId:u.orderId,carrier:"FastShip",service:"NEXT_DAY",dimensions:{length:15,width:10,height:5,weight:2.5,unit:"IMPERIAL"},shippingAddress:u.shippingAddress,item:u.items[y%2],specialInstructions:"Handle with care",insurance:{required:!0,value:u.items[y%2].price}}),workflowTaskCompletedEventId:l}))];return{workflows:f,activities:h}},bw=async()=>{const e="demo-order-processing-wf-001";try{const{workflows:t,activities:n}=ww();for(const r of t)await Es(r);for(const r of n)await uf(r);return console.log("Demo data stored successfully"),e}catch(t){return console.error("Error storing demo data:",t),""}};var xw=Object.defineProperty,Sw=(e,t,n)=>t in e?xw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zi=(e,t,n)=>(Sw(e,typeof t!="symbol"?t+"":t,n),n);let _w=class{constructor(){Zi(this,"current",this.detect()),Zi(this,"handoffState","pending"),Zi(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},gr=new _w;function Ja(e){return gr.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function ei(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function er(){let e=[],t={addEventListener(n,r,o,i){return n.addEventListener(r,o,i),t.add(()=>n.removeEventListener(r,o,i))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return ei(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,o){let i=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:o}),this.add(()=>{Object.assign(n.style,{[r]:i})})},group(n){let r=er();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let o of e.splice(r,1))o()}},dispose(){for(let n of e.splice(0))n()}};return t}function gc(){let[e]=b.useState(er);return b.useEffect(()=>()=>e.dispose(),[e]),e}let At=(e,t)=>{gr.isServer?b.useEffect(e,t):b.useLayoutEffect(e,t)};function br(e){let t=b.useRef(e);return At(()=>{t.current=e},[e]),t}let lt=function(e){let t=br(e);return B.useCallback((...n)=>t.current(...n),[t])},kw=b.createContext(void 0);function Ew(){return b.useContext(kw)}function Cs(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Qn(e,t,...n){if(e in t){let o=t[e];return typeof o=="function"?o(...n):o}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(o=>`"${o}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Qn),r}var La=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(La||{}),Gn=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Gn||{});function Gt(){let e=Cw();return b.useCallback(t=>Nw({mergeRefs:e,...t}),[e])}function Nw({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:o,visible:i=!0,name:s,mergeRefs:l}){l=l??Tw;let u=ff(t,e);if(i)return wa(u,n,r,s,l);let f=o??0;if(f&2){let{static:h=!1,...p}=u;if(h)return wa(p,n,r,s,l)}if(f&1){let{unmount:h=!0,...p}=u;return Qn(h?0:1,{0(){return null},1(){return wa({...p,hidden:!0,style:{display:"none"}},n,r,s,l)}})}return wa(u,n,r,s,l)}function wa(e,t={},n,r,o){let{as:i=n,children:s,refName:l="ref",...u}=Qi(e,["unmount","static"]),f=e.ref!==void 0?{[l]:e.ref}:{},h=typeof s=="function"?s(t):s;"className"in u&&u.className&&typeof u.className=="function"&&(u.className=u.className(t)),u["aria-labelledby"]&&u["aria-labelledby"]===u.id&&(u["aria-labelledby"]=void 0);let p={};if(t){let y=!1,w=[];for(let[S,_]of Object.entries(t))typeof _=="boolean"&&(y=!0),_===!0&&w.push(S.replace(/([A-Z])/g,N=>`-${N.toLowerCase()}`));if(y){p["data-headlessui-state"]=w.join(" ");for(let S of w)p[`data-${S}`]=""}}if(i===b.Fragment&&(Object.keys(sr(u)).length>0||Object.keys(sr(p)).length>0))if(!b.isValidElement(h)||Array.isArray(h)&&h.length>1){if(Object.keys(sr(u)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(sr(u)).concat(Object.keys(sr(p))).map(y=>`  - ${y}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(y=>`  - ${y}`).join(`
`)].join(`
`))}else{let y=h.props,w=y==null?void 0:y.className,S=typeof w=="function"?(...C)=>Cs(w(...C),u.className):Cs(w,u.className),_=S?{className:S}:{},N=ff(h.props,sr(Qi(u,["ref"])));for(let C in p)C in N&&delete p[C];return b.cloneElement(h,Object.assign({},N,p,f,{ref:o(Dw(h),f.ref)},_))}return b.createElement(i,Object.assign({},Qi(u,["ref"]),i!==b.Fragment&&f,i!==b.Fragment&&p),h)}function Cw(){let e=b.useRef([]),t=b.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function Tw(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function ff(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let o in r)o.startsWith("on")&&typeof r[o]=="function"?(n[o]!=null||(n[o]=[]),n[o].push(r[o])):t[o]=r[o];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[o=>{var i;return(i=o==null?void 0:o.preventDefault)==null?void 0:i.call(o)}]);for(let r in n)Object.assign(t,{[r](o,...i){let s=n[r];for(let l of s){if((o instanceof Event||(o==null?void 0:o.nativeEvent)instanceof Event)&&o.defaultPrevented)return;l(o,...i)}}});return t}function Wt(e){var t;return Object.assign(b.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function sr(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Qi(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function Dw(e){return B.version.split(".")[0]>="19"?e.props.ref:e.ref}let Ow="span";var Fa=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Fa||{});function jw(e,t){var n;let{features:r=1,...o}=e,i={ref:t,"aria-hidden":(r&2)===2?!0:(n=o["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Gt()({ourProps:i,theirProps:o,slot:{},defaultTag:Ow,name:"Hidden"})}let Ts=Wt(jw),hf=Symbol();function Pw(e,t=!0){return Object.assign(e,{[hf]:t})}function yn(...e){let t=b.useRef(e);b.useEffect(()=>{t.current=e},[e]);let n=lt(r=>{for(let o of t.current)o!=null&&(typeof o=="function"?o(r):o.current=r)});return e.every(r=>r==null||(r==null?void 0:r[hf]))?void 0:n}let yc=b.createContext(null);yc.displayName="DescriptionContext";function mf(){let e=b.useContext(yc);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,mf),t}return e}function Mw(){let[e,t]=b.useState([]);return[e.length>0?e.join(" "):void 0,b.useMemo(()=>function(n){let r=lt(i=>(t(s=>[...s,i]),()=>t(s=>{let l=s.slice(),u=l.indexOf(i);return u!==-1&&l.splice(u,1),l}))),o=b.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return B.createElement(yc.Provider,{value:o},n.children)},[t])]}let Iw="p";function Aw(e,t){let n=b.useId(),r=Ew(),{id:o=`headlessui-description-${n}`,...i}=e,s=mf(),l=yn(t);At(()=>s.register(o),[o,s.register]);let u=r||!1,f=b.useMemo(()=>({...s.slot,disabled:u}),[s.slot,u]),h={ref:l,...s.props,id:o};return Gt()({ourProps:h,theirProps:i,slot:f,defaultTag:Iw,name:s.name||"Description"})}let $w=Wt(Aw),Rw=Object.assign($w,{});var pf=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(pf||{});let Lw=b.createContext(()=>{});function Fw({value:e,children:t}){return B.createElement(Lw.Provider,{value:e},t)}let Ww=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};function gf(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(o){return r.add(o),()=>r.delete(o)},dispatch(o,...i){let s=t[o].call(n,...i);s&&(n=s,r.forEach(l=>l()))}}}function yf(e){return b.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}let Bw=new Ww(()=>gf(()=>[],{ADD(e){return this.includes(e)?this:[...this,e]},REMOVE(e){let t=this.indexOf(e);if(t===-1)return this;let n=this.slice();return n.splice(t,1),n}}));function Yr(e,t){let n=Bw.get(t),r=b.useId(),o=yf(n);if(At(()=>{if(e)return n.dispatch("ADD",r),()=>n.dispatch("REMOVE",r)},[n,e]),!e)return!1;let i=o.indexOf(r),s=o.length;return i===-1&&(i=s,s+=1),i===s-1}let Ds=new Map,wo=new Map;function Gl(e){var t;let n=(t=wo.get(e))!=null?t:0;return wo.set(e,n+1),n!==0?()=>Zl(e):(Ds.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Zl(e))}function Zl(e){var t;let n=(t=wo.get(e))!=null?t:1;if(n===1?wo.delete(e):wo.set(e,n-1),n!==1)return;let r=Ds.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,Ds.delete(e))}function Hw(e,{allowed:t,disallowed:n}={}){let r=Yr(e,"inert-others");At(()=>{var o,i;if(!r)return;let s=er();for(let u of(o=n==null?void 0:n())!=null?o:[])u&&s.add(Gl(u));let l=(i=t==null?void 0:t())!=null?i:[];for(let u of l){if(!u)continue;let f=Ja(u);if(!f)continue;let h=u.parentElement;for(;h&&h!==f.body;){for(let p of h.children)l.some(y=>p.contains(y))||s.add(Gl(p));h=h.parentElement}}return s.dispose},[r,t,n])}function zw(e,t,n){let r=br(o=>{let i=o.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&n()});b.useEffect(()=>{if(!e)return;let o=t===null?null:t instanceof HTMLElement?t:t.current;if(!o)return;let i=er();if(typeof ResizeObserver<"u"){let s=new ResizeObserver(()=>r.current(o));s.observe(o),i.add(()=>s.disconnect())}if(typeof IntersectionObserver<"u"){let s=new IntersectionObserver(()=>r.current(o));s.observe(o),i.add(()=>s.disconnect())}return()=>i.dispose()},[t,r,e])}let Wa=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),Yw=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Nn=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(Nn||{}),Os=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Os||{}),Vw=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Vw||{});function qw(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Wa)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function Kw(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Yw)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var vf=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(vf||{});function Uw(e,t=0){var n;return e===((n=Ja(e))==null?void 0:n.body)?!1:Qn(t,{0(){return e.matches(Wa)},1(){let r=e;for(;r!==null;){if(r.matches(Wa))return!0;r=r.parentElement}return!1}})}var Xw=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Xw||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Dn(e){e==null||e.focus({preventScroll:!0})}let Gw=["textarea","input"].join(",");function Zw(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,Gw))!=null?n:!1}function Qw(e,t=n=>n){return e.slice().sort((n,r)=>{let o=t(n),i=t(r);if(o===null||i===null)return 0;let s=o.compareDocumentPosition(i);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function bo(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:o=[]}={}){let i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,s=Array.isArray(e)?n?Qw(e):e:t&64?Kw(e):qw(e);o.length>0&&s.length>1&&(s=s.filter(w=>!o.some(S=>S!=null&&"current"in S?(S==null?void 0:S.current)===w:S===w))),r=r??i.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,s.indexOf(r))-1;if(t&4)return Math.max(0,s.indexOf(r))+1;if(t&8)return s.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=t&32?{preventScroll:!0}:{},h=0,p=s.length,y;do{if(h>=p||h+p<=0)return 0;let w=u+h;if(t&16)w=(w+p)%p;else{if(w<0)return 3;if(w>=p)return 1}y=s[w],y==null||y.focus(f),h+=l}while(y!==i.activeElement);return t&6&&Zw(y)&&y.select(),2}function wf(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Jw(){return/Android/gi.test(window.navigator.userAgent)}function eb(){return wf()||Jw()}function uo(e,t,n,r){let o=br(n);b.useEffect(()=>{if(!e)return;function i(s){o.current(s)}return document.addEventListener(t,i,r),()=>document.removeEventListener(t,i,r)},[e,t,r])}function bf(e,t,n,r){let o=br(n);b.useEffect(()=>{if(!e)return;function i(s){o.current(s)}return window.addEventListener(t,i,r),()=>window.removeEventListener(t,i,r)},[e,t,r])}const Ql=30;function tb(e,t,n){let r=Yr(e,"outside-click"),o=br(n),i=b.useCallback(function(u,f){if(u.defaultPrevented)return;let h=f(u);if(h===null||!h.getRootNode().contains(h)||!h.isConnected)return;let p=function y(w){return typeof w=="function"?y(w()):Array.isArray(w)||w instanceof Set?w:[w]}(t);for(let y of p)if(y!==null&&(y.contains(h)||u.composed&&u.composedPath().includes(y)))return;return!Uw(h,vf.Loose)&&h.tabIndex!==-1&&u.preventDefault(),o.current(u,h)},[o,t]),s=b.useRef(null);uo(r,"pointerdown",u=>{var f,h;s.current=((h=(f=u.composedPath)==null?void 0:f.call(u))==null?void 0:h[0])||u.target},!0),uo(r,"mousedown",u=>{var f,h;s.current=((h=(f=u.composedPath)==null?void 0:f.call(u))==null?void 0:h[0])||u.target},!0),uo(r,"click",u=>{eb()||s.current&&(i(u,()=>s.current),s.current=null)},!0);let l=b.useRef({x:0,y:0});uo(r,"touchstart",u=>{l.current.x=u.touches[0].clientX,l.current.y=u.touches[0].clientY},!0),uo(r,"touchend",u=>{let f={x:u.changedTouches[0].clientX,y:u.changedTouches[0].clientY};if(!(Math.abs(f.x-l.current.x)>=Ql||Math.abs(f.y-l.current.y)>=Ql))return i(u,()=>u.target instanceof HTMLElement?u.target:null)},!0),bf(r,"blur",u=>i(u,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Lo(...e){return b.useMemo(()=>Ja(...e),[...e])}function xf(e,t,n,r){let o=br(n);b.useEffect(()=>{e=e??window;function i(s){o.current(s)}return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)},[e,t,r])}function nb(){let e;return{before({doc:t}){var n;let r=t.documentElement,o=(n=t.defaultView)!=null?n:window;e=Math.max(0,o.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,o=Math.max(0,r.clientWidth-r.offsetWidth),i=Math.max(0,e-o);n.style(r,"paddingRight",`${i}px`)}}}function rb(){return wf()?{before({doc:e,d:t,meta:n}){function r(o){return n.containers.flatMap(i=>i()).some(i=>i.contains(o))}t.microTask(()=>{var o;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=er();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let i=(o=window.scrollY)!=null?o:window.pageYOffset,s=null;t.addEventListener(e,"click",l=>{if(l.target instanceof HTMLElement)try{let u=l.target.closest("a");if(!u)return;let{hash:f}=new URL(u.href),h=e.querySelector(f);h&&!r(h)&&(s=h)}catch{}},!0),t.addEventListener(e,"touchstart",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let u=l.target;for(;u.parentElement&&r(u.parentElement);)u=u.parentElement;t.style(u,"overscrollBehavior","contain")}else t.style(l.target,"touchAction","none")}),t.addEventListener(e,"touchmove",l=>{if(l.target instanceof HTMLElement){if(l.target.tagName==="INPUT")return;if(r(l.target)){let u=l.target;for(;u.parentElement&&u.dataset.headlessuiPortal!==""&&!(u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth);)u=u.parentElement;u.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()}},{passive:!1}),t.add(()=>{var l;let u=(l=window.scrollY)!=null?l:window.pageYOffset;i!==u&&window.scrollTo(0,i),s&&s.isConnected&&(s.scrollIntoView({block:"nearest"}),s=null)})})}}:{}}function ob(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function ab(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let fr=gf(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:er(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:ab(n)},o=[rb(),nb(),ob()];o.forEach(({before:i})=>i==null?void 0:i(r)),o.forEach(({after:i})=>i==null?void 0:i(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});fr.subscribe(()=>{let e=fr.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",o=n.count!==0;(o&&!r||!o&&r)&&fr.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&fr.dispatch("TEARDOWN",n)}});function ib(e,t,n=()=>({containers:[]})){let r=yf(fr),o=t?r.get(t):void 0,i=o?o.count>0:!1;return At(()=>{if(!(!t||!e))return fr.dispatch("PUSH",t,n),()=>fr.dispatch("POP",t,n)},[e,t]),i}function sb(e,t,n=()=>[document.body]){let r=Yr(e,"scroll-lock");ib(r,t,o=>{var i;return{containers:[...(i=o.containers)!=null?i:[],n]}})}function cb(e=0){let[t,n]=b.useState(e),r=b.useCallback(u=>n(u),[t]),o=b.useCallback(u=>n(f=>f|u),[t]),i=b.useCallback(u=>(t&u)===u,[t]),s=b.useCallback(u=>n(f=>f&~u),[n]),l=b.useCallback(u=>n(f=>f^u),[n]);return{flags:t,setFlag:r,addFlag:o,hasFlag:i,removeFlag:s,toggleFlag:l}}var lb={},Jl,eu;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((Jl=process==null?void 0:lb)==null?void 0:Jl.NODE_ENV)==="test"&&typeof((eu=Element==null?void 0:Element.prototype)==null?void 0:eu.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var ub=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(ub||{});function db(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function fb(e,t,n,r){let[o,i]=b.useState(n),{hasFlag:s,addFlag:l,removeFlag:u}=cb(e&&o?3:0),f=b.useRef(!1),h=b.useRef(!1),p=gc();return At(()=>{var y;if(e){if(n&&i(!0),!t){n&&l(3);return}return(y=r==null?void 0:r.start)==null||y.call(r,n),hb(t,{inFlight:f,prepare(){h.current?h.current=!1:h.current=f.current,f.current=!0,!h.current&&(n?(l(3),u(4)):(l(4),u(2)))},run(){h.current?n?(u(3),l(4)):(u(4),l(3)):n?u(1):l(1)},done(){var w;h.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(f.current=!1,u(7),n||i(!1),(w=r==null?void 0:r.end)==null||w.call(r,n))}})}},[e,n,t,p]),e?[o,{closed:s(1),enter:s(2),leave:s(4),transition:s(2)||s(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function hb(e,{prepare:t,run:n,done:r,inFlight:o}){let i=er();return pb(e,{prepare:t,inFlight:o}),i.nextFrame(()=>{n(),i.requestAnimationFrame(()=>{i.add(mb(e,r))})}),i.dispose}function mb(e,t){var n,r;let o=er();if(!e)return o.dispose;let i=!1;o.add(()=>{i=!0});let s=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(l=>l instanceof CSSTransition))!=null?r:[];return s.length===0?(t(),o.dispose):(Promise.allSettled(s.map(l=>l.finished)).then(()=>{i||t()}),o.dispose)}function pb(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function vc(e,t){let n=b.useRef([]),r=lt(e);b.useEffect(()=>{let o=[...n.current];for(let[i,s]of t.entries())if(n.current[i]!==s){let l=r(t,o);return n.current=t,l}},[r,...t])}let ti=b.createContext(null);ti.displayName="OpenClosedContext";var tn=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(tn||{});function ni(){return b.useContext(ti)}function gb({value:e,children:t}){return B.createElement(ti.Provider,{value:e},t)}function yb({children:e}){return B.createElement(ti.Provider,{value:null},e)}function vb(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Un=[];vb(()=>{function e(t){if(!(t.target instanceof HTMLElement)||t.target===document.body||Un[0]===t.target)return;let n=t.target;n=n.closest(Wa),Un.unshift(n??t.target),Un=Un.filter(r=>r!=null&&r.isConnected),Un.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function Sf(e){let t=lt(e),n=b.useRef(!1);b.useEffect(()=>(n.current=!1,()=>{n.current=!0,ei(()=>{n.current&&t()})}),[t])}function wb(){let e=typeof document>"u";return"useSyncExternalStore"in rl?(t=>t.useSyncExternalStore)(rl)(()=>()=>{},()=>!1,()=>!e):!1}function Fo(){let e=wb(),[t,n]=b.useState(gr.isHandoffComplete);return t&&gr.isHandoffComplete===!1&&n(!1),b.useEffect(()=>{t!==!0&&n(!0)},[t]),b.useEffect(()=>gr.handoff(),[]),e?!1:t}let _f=b.createContext(!1);function bb(){return b.useContext(_f)}function tu(e){return B.createElement(_f.Provider,{value:e.force},e.children)}function xb(e){let t=bb(),n=b.useContext(Ef),r=Lo(e),[o,i]=b.useState(()=>{var s;if(!t&&n!==null)return(s=n.current)!=null?s:null;if(gr.isServer)return null;let l=r==null?void 0:r.getElementById("headlessui-portal-root");if(l)return l;if(r===null)return null;let u=r.createElement("div");return u.setAttribute("id","headlessui-portal-root"),r.body.appendChild(u)});return b.useEffect(()=>{o!==null&&(r!=null&&r.body.contains(o)||r==null||r.body.appendChild(o))},[o,r]),b.useEffect(()=>{t||n!==null&&i(n.current)},[n,i,t]),o}let kf=b.Fragment,Sb=Wt(function(e,t){let n=e,r=b.useRef(null),o=yn(Pw(p=>{r.current=p}),t),i=Lo(r),s=xb(r),[l]=b.useState(()=>{var p;return gr.isServer?null:(p=i==null?void 0:i.createElement("div"))!=null?p:null}),u=b.useContext(js),f=Fo();At(()=>{!s||!l||s.contains(l)||(l.setAttribute("data-headlessui-portal",""),s.appendChild(l))},[s,l]),At(()=>{if(l&&u)return u.register(l)},[u,l]),Sf(()=>{var p;!s||!l||(l instanceof Node&&s.contains(l)&&s.removeChild(l),s.childNodes.length<=0&&((p=s.parentElement)==null||p.removeChild(s)))});let h=Gt();return f?!s||!l?null:Tu.createPortal(h({ourProps:{ref:o},theirProps:n,slot:{},defaultTag:kf,name:"Portal"}),l):null});function _b(e,t){let n=yn(t),{enabled:r=!0,...o}=e,i=Gt();return r?B.createElement(Sb,{...o,ref:n}):i({ourProps:{ref:n},theirProps:o,slot:{},defaultTag:kf,name:"Portal"})}let kb=b.Fragment,Ef=b.createContext(null);function Eb(e,t){let{target:n,...r}=e,o={ref:yn(t)},i=Gt();return B.createElement(Ef.Provider,{value:n},i({ourProps:o,theirProps:r,defaultTag:kb,name:"Popover.Group"}))}let js=b.createContext(null);function Nb(){let e=b.useContext(js),t=b.useRef([]),n=lt(i=>(t.current.push(i),e&&e.register(i),()=>r(i))),r=lt(i=>{let s=t.current.indexOf(i);s!==-1&&t.current.splice(s,1),e&&e.unregister(i)}),o=b.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,b.useMemo(()=>function({children:i}){return B.createElement(js.Provider,{value:o},i)},[o])]}let Cb=Wt(_b),Nf=Wt(Eb),Tb=Object.assign(Cb,{Group:Nf});function Db(e,t=typeof document<"u"?document.defaultView:null,n){let r=Yr(e,"escape");xf(t,"keydown",o=>{r&&(o.defaultPrevented||o.key===pf.Escape&&n(o))})}function Ob(){var e;let[t]=b.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=b.useState((e=t==null?void 0:t.matches)!=null?e:!1);return At(()=>{if(!t)return;function o(i){r(i.matches)}return t.addEventListener("change",o),()=>t.removeEventListener("change",o)},[t]),n}function jb({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=Lo(n),o=lt(()=>{var i,s;let l=[];for(let u of e)u!==null&&(u instanceof HTMLElement?l.push(u):"current"in u&&u.current instanceof HTMLElement&&l.push(u.current));if(t!=null&&t.current)for(let u of t.current)l.push(u);for(let u of(i=r==null?void 0:r.querySelectorAll("html > *, body > *"))!=null?i:[])u!==document.body&&u!==document.head&&u instanceof HTMLElement&&u.id!=="headlessui-portal-root"&&(n&&(u.contains(n)||u.contains((s=n==null?void 0:n.getRootNode())==null?void 0:s.host))||l.some(f=>u.contains(f))||l.push(u));return l});return{resolveContainers:o,contains:lt(i=>o().some(s=>s.contains(i)))}}let Cf=b.createContext(null);function nu({children:e,node:t}){let[n,r]=b.useState(null),o=Tf(t??n);return B.createElement(Cf.Provider,{value:o},e,o===null&&B.createElement(Ts,{features:Fa.Hidden,ref:i=>{var s,l;if(i){for(let u of(l=(s=Ja(i))==null?void 0:s.querySelectorAll("html > *, body > *"))!=null?l:[])if(u!==document.body&&u!==document.head&&u instanceof HTMLElement&&u!=null&&u.contains(i)){r(u);break}}}}))}function Tf(e=null){var t;return(t=b.useContext(Cf))!=null?t:e}function wc(){let e=b.useRef(!1);return At(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var yo=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(yo||{});function Pb(){let e=b.useRef(0);return bf(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function Df(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let Mb="div";var lr=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(lr||{});function Ib(e,t){let n=b.useRef(null),r=yn(n,t),{initialFocus:o,initialFocusFallback:i,containers:s,features:l=15,...u}=e;Fo()||(l=0);let f=Lo(n);Lb(l,{ownerDocument:f});let h=Fb(l,{ownerDocument:f,container:n,initialFocus:o,initialFocusFallback:i});Wb(l,{ownerDocument:f,container:n,containers:s,previousActiveElement:h});let p=Pb(),y=lt(R=>{let I=n.current;I&&(T=>T())(()=>{Qn(p.current,{[yo.Forwards]:()=>{bo(I,Nn.First,{skipElements:[R.relatedTarget,i]})},[yo.Backwards]:()=>{bo(I,Nn.Last,{skipElements:[R.relatedTarget,i]})}})})}),w=Yr(!!(l&2),"focus-trap#tab-lock"),S=gc(),_=b.useRef(!1),N={ref:r,onKeyDown(R){R.key=="Tab"&&(_.current=!0,S.requestAnimationFrame(()=>{_.current=!1}))},onBlur(R){if(!(l&4))return;let I=Df(s);n.current instanceof HTMLElement&&I.add(n.current);let T=R.relatedTarget;T instanceof HTMLElement&&T.dataset.headlessuiFocusGuard!=="true"&&(Of(I,T)||(_.current?bo(n.current,Qn(p.current,{[yo.Forwards]:()=>Nn.Next,[yo.Backwards]:()=>Nn.Previous})|Nn.WrapAround,{relativeTo:R.target}):R.target instanceof HTMLElement&&Dn(R.target)))}},C=Gt();return B.createElement(B.Fragment,null,w&&B.createElement(Ts,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:y,features:Fa.Focusable}),C({ourProps:N,theirProps:u,defaultTag:Mb,name:"FocusTrap"}),w&&B.createElement(Ts,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:y,features:Fa.Focusable}))}let Ab=Wt(Ib),$b=Object.assign(Ab,{features:lr});function Rb(e=!0){let t=b.useRef(Un.slice());return vc(([n],[r])=>{r===!0&&n===!1&&ei(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Un.slice())},[e,Un,t]),lt(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function Lb(e,{ownerDocument:t}){let n=!!(e&8),r=Rb(n);vc(()=>{n||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&Dn(r())},[n]),Sf(()=>{n&&Dn(r())})}function Fb(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:o}){let i=b.useRef(null),s=Yr(!!(e&1),"focus-trap#initial-focus"),l=wc();return vc(()=>{if(e===0)return;if(!s){o!=null&&o.current&&Dn(o.current);return}let u=n.current;u&&ei(()=>{if(!l.current)return;let f=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===f){i.current=f;return}}else if(u.contains(f)){i.current=f;return}if(r!=null&&r.current)Dn(r.current);else{if(e&16){if(bo(u,Nn.First|Nn.AutoFocus)!==Os.Error)return}else if(bo(u,Nn.First)!==Os.Error)return;if(o!=null&&o.current&&(Dn(o.current),(t==null?void 0:t.activeElement)===o.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t==null?void 0:t.activeElement})},[o,s,e]),i}function Wb(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:o}){let i=wc(),s=!!(e&4);xf(t==null?void 0:t.defaultView,"focus",l=>{if(!s||!i.current)return;let u=Df(r);n.current instanceof HTMLElement&&u.add(n.current);let f=o.current;if(!f)return;let h=l.target;h&&h instanceof HTMLElement?Of(u,h)?(o.current=h,Dn(h)):(l.preventDefault(),l.stopPropagation(),Dn(f)):Dn(o.current)},!0)}function Of(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function jf(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:Mf)!==b.Fragment||B.Children.count(e.children)===1}let ri=b.createContext(null);ri.displayName="TransitionContext";var Bb=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Bb||{});function Hb(){let e=b.useContext(ri);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function zb(){let e=b.useContext(oi);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let oi=b.createContext(null);oi.displayName="NestingContext";function ai(e){return"children"in e?ai(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function Pf(e,t){let n=br(e),r=b.useRef([]),o=wc(),i=gc(),s=lt((w,S=Gn.Hidden)=>{let _=r.current.findIndex(({el:N})=>N===w);_!==-1&&(Qn(S,{[Gn.Unmount](){r.current.splice(_,1)},[Gn.Hidden](){r.current[_].state="hidden"}}),i.microTask(()=>{var N;!ai(r)&&o.current&&((N=n.current)==null||N.call(n))}))}),l=lt(w=>{let S=r.current.find(({el:_})=>_===w);return S?S.state!=="visible"&&(S.state="visible"):r.current.push({el:w,state:"visible"}),()=>s(w,Gn.Unmount)}),u=b.useRef([]),f=b.useRef(Promise.resolve()),h=b.useRef({enter:[],leave:[]}),p=lt((w,S,_)=>{u.current.splice(0),t&&(t.chains.current[S]=t.chains.current[S].filter(([N])=>N!==w)),t==null||t.chains.current[S].push([w,new Promise(N=>{u.current.push(N)})]),t==null||t.chains.current[S].push([w,new Promise(N=>{Promise.all(h.current[S].map(([C,R])=>R)).then(()=>N())})]),S==="enter"?f.current=f.current.then(()=>t==null?void 0:t.wait.current).then(()=>_(S)):_(S)}),y=lt((w,S,_)=>{Promise.all(h.current[S].splice(0).map(([N,C])=>C)).then(()=>{var N;(N=u.current.shift())==null||N()}).then(()=>_(S))});return b.useMemo(()=>({children:r,register:l,unregister:s,onStart:p,onStop:y,wait:f,chains:h}),[l,s,r,p,y,h,f])}let Mf=b.Fragment,If=La.RenderStrategy;function Yb(e,t){var n,r;let{transition:o=!0,beforeEnter:i,afterEnter:s,beforeLeave:l,afterLeave:u,enter:f,enterFrom:h,enterTo:p,entered:y,leave:w,leaveFrom:S,leaveTo:_,...N}=e,[C,R]=b.useState(null),I=b.useRef(null),T=jf(e),U=yn(...T?[I,t,R]:t===null?[]:[t]),q=(n=N.unmount)==null||n?Gn.Unmount:Gn.Hidden,{show:V,appear:J,initial:X}=Hb(),[ee,K]=b.useState(V?"visible":"hidden"),re=zb(),{register:se,unregister:k}=re;At(()=>se(I),[se,I]),At(()=>{if(q===Gn.Hidden&&I.current){if(V&&ee!=="visible"){K("visible");return}return Qn(ee,{hidden:()=>k(I),visible:()=>se(I)})}},[ee,I,se,k,V,q]);let M=Fo();At(()=>{if(T&&M&&ee==="visible"&&I.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[I,ee,M,T]);let j=X&&!J,G=J&&V&&X,ae=b.useRef(!1),P=Pf(()=>{ae.current||(K("hidden"),k(I))},re),Q=lt(Oe=>{ae.current=!0;let Ie=Oe?"enter":"leave";P.onStart(I,Ie,fe=>{fe==="enter"?i==null||i():fe==="leave"&&(l==null||l())})}),oe=lt(Oe=>{let Ie=Oe?"enter":"leave";ae.current=!1,P.onStop(I,Ie,fe=>{fe==="enter"?s==null||s():fe==="leave"&&(u==null||u())}),Ie==="leave"&&!ai(P)&&(K("hidden"),k(I))});b.useEffect(()=>{T&&o||(Q(V),oe(V))},[V,T,o]);let ie=!(!o||!T||!M||j),[,de]=fb(ie,C,V,{start:Q,end:oe}),ye=sr({ref:U,className:((r=Cs(N.className,G&&f,G&&h,de.enter&&f,de.enter&&de.closed&&h,de.enter&&!de.closed&&p,de.leave&&w,de.leave&&!de.closed&&S,de.leave&&de.closed&&_,!de.transition&&V&&y))==null?void 0:r.trim())||void 0,...db(de)}),_e=0;ee==="visible"&&(_e|=tn.Open),ee==="hidden"&&(_e|=tn.Closed),de.enter&&(_e|=tn.Opening),de.leave&&(_e|=tn.Closing);let De=Gt();return B.createElement(oi.Provider,{value:P},B.createElement(gb,{value:_e},De({ourProps:ye,theirProps:N,defaultTag:Mf,features:If,visible:ee==="visible",name:"Transition.Child"})))}function Vb(e,t){let{show:n,appear:r=!1,unmount:o=!0,...i}=e,s=b.useRef(null),l=jf(e),u=yn(...l?[s,t]:t===null?[]:[t]);Fo();let f=ni();if(n===void 0&&f!==null&&(n=(f&tn.Open)===tn.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[h,p]=b.useState(n?"visible":"hidden"),y=Pf(()=>{n||p("hidden")}),[w,S]=b.useState(!0),_=b.useRef([n]);At(()=>{w!==!1&&_.current[_.current.length-1]!==n&&(_.current.push(n),S(!1))},[_,n]);let N=b.useMemo(()=>({show:n,appear:r,initial:w}),[n,r,w]);At(()=>{n?p("visible"):!ai(y)&&s.current!==null&&p("hidden")},[n,y]);let C={unmount:o},R=lt(()=>{var U;w&&S(!1),(U=e.beforeEnter)==null||U.call(e)}),I=lt(()=>{var U;w&&S(!1),(U=e.beforeLeave)==null||U.call(e)}),T=Gt();return B.createElement(oi.Provider,{value:y},B.createElement(ri.Provider,{value:N},T({ourProps:{...C,as:b.Fragment,children:B.createElement(Af,{ref:u,...C,...i,beforeEnter:R,beforeLeave:I})},theirProps:{},defaultTag:b.Fragment,features:If,visible:h==="visible",name:"Transition"})))}function qb(e,t){let n=b.useContext(ri)!==null,r=ni()!==null;return B.createElement(B.Fragment,null,!n&&r?B.createElement(Ps,{ref:t,...e}):B.createElement(Af,{ref:t,...e}))}let Ps=Wt(Vb),Af=Wt(Yb),bc=Wt(qb),Kb=Object.assign(Ps,{Child:bc,Root:Ps});var Ub=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ub||{}),Xb=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(Xb||{});let Gb={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},xc=b.createContext(null);xc.displayName="DialogContext";function ii(e){let t=b.useContext(xc);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ii),n}return t}function Zb(e,t){return Qn(t.type,Gb,e,t)}let ru=Wt(function(e,t){let n=b.useId(),{id:r=`headlessui-dialog-${n}`,open:o,onClose:i,initialFocus:s,role:l="dialog",autoFocus:u=!0,__demoMode:f=!1,unmount:h=!1,...p}=e,y=b.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(y.current||(y.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let w=ni();o===void 0&&w!==null&&(o=(w&tn.Open)===tn.Open);let S=b.useRef(null),_=yn(S,t),N=Lo(S),C=o?0:1,[R,I]=b.useReducer(Zb,{titleId:null,descriptionId:null,panelRef:b.createRef()}),T=lt(()=>i(!1)),U=lt(oe=>I({type:0,id:oe})),q=Fo()?C===0:!1,[V,J]=Nb(),X={get current(){var oe;return(oe=R.panelRef.current)!=null?oe:S.current}},ee=Tf(),{resolveContainers:K}=jb({mainTreeNode:ee,portals:V,defaultContainers:[X]}),re=w!==null?(w&tn.Closing)===tn.Closing:!1;Hw(f||re?!1:q,{allowed:lt(()=>{var oe,ie;return[(ie=(oe=S.current)==null?void 0:oe.closest("[data-headlessui-portal]"))!=null?ie:null]}),disallowed:lt(()=>{var oe;return[(oe=ee==null?void 0:ee.closest("body > *:not(#headlessui-portal-root)"))!=null?oe:null]})}),tb(q,K,oe=>{oe.preventDefault(),T()}),Db(q,N==null?void 0:N.defaultView,oe=>{oe.preventDefault(),oe.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),T()}),sb(f||re?!1:q,N,K),zw(q,S,T);let[se,k]=Mw(),M=b.useMemo(()=>[{dialogState:C,close:T,setTitleId:U,unmount:h},R],[C,R,T,U,h]),j=b.useMemo(()=>({open:C===0}),[C]),G={ref:_,id:r,role:l,tabIndex:-1,"aria-modal":f?void 0:C===0?!0:void 0,"aria-labelledby":R.titleId,"aria-describedby":se,unmount:h},ae=!Ob(),P=lr.None;q&&!f&&(P|=lr.RestoreFocus,P|=lr.TabLock,u&&(P|=lr.AutoFocus),ae&&(P|=lr.InitialFocus));let Q=Gt();return B.createElement(yb,null,B.createElement(tu,{force:!0},B.createElement(Tb,null,B.createElement(xc.Provider,{value:M},B.createElement(Nf,{target:S},B.createElement(tu,{force:!1},B.createElement(k,{slot:j},B.createElement(J,null,B.createElement($b,{initialFocus:s,initialFocusFallback:S,containers:K,features:P},B.createElement(Fw,{value:T},Q({ourProps:G,theirProps:p,slot:j,defaultTag:Qb,features:Jb,visible:C===0,name:"Dialog"})))))))))))}),Qb="div",Jb=La.RenderStrategy|La.Static;function ex(e,t){let{transition:n=!1,open:r,...o}=e,i=ni(),s=e.hasOwnProperty("open")||i!==null,l=e.hasOwnProperty("onClose");if(!s&&!l)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!s)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!l)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!o.static?B.createElement(nu,null,B.createElement(Kb,{show:r,transition:n,unmount:o.unmount},B.createElement(ru,{ref:t,...o}))):B.createElement(nu,null,B.createElement(ru,{ref:t,open:r,...o}))}let tx="div";function nx(e,t){let n=b.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:o=!1,...i}=e,[{dialogState:s,unmount:l},u]=ii("Dialog.Panel"),f=yn(t,u.panelRef),h=b.useMemo(()=>({open:s===0}),[s]),p=lt(N=>{N.stopPropagation()}),y={ref:f,id:r,onClick:p},w=o?bc:b.Fragment,S=o?{unmount:l}:{},_=Gt();return B.createElement(w,{...S},_({ourProps:y,theirProps:i,slot:h,defaultTag:tx,name:"Dialog.Panel"}))}let rx="div";function ox(e,t){let{transition:n=!1,...r}=e,[{dialogState:o,unmount:i}]=ii("Dialog.Backdrop"),s=b.useMemo(()=>({open:o===0}),[o]),l={ref:t,"aria-hidden":!0},u=n?bc:b.Fragment,f=n?{unmount:i}:{},h=Gt();return B.createElement(u,{...f},h({ourProps:l,theirProps:r,slot:s,defaultTag:rx,name:"Dialog.Backdrop"}))}let ax="h2";function ix(e,t){let n=b.useId(),{id:r=`headlessui-dialog-title-${n}`,...o}=e,[{dialogState:i,setTitleId:s}]=ii("Dialog.Title"),l=yn(t);b.useEffect(()=>(s(r),()=>s(null)),[r,s]);let u=b.useMemo(()=>({open:i===0}),[i]),f={ref:l,id:r};return Gt()({ourProps:f,theirProps:o,slot:u,defaultTag:ax,name:"Dialog.Title"})}let sx=Wt(ex),$f=Wt(nx);Wt(ox);let cx=Wt(ix),Ms=Object.assign(sx,{Panel:$f,Title:cx,Description:Rw});const En=[{id:"WorkflowType",label:"WorkflowType",type:"text"},{id:"WorkflowId",label:"WorkflowId",type:"text"},{id:"RunId",label:"RunId",type:"text"},{id:"ExecutionStatus",label:"Status",type:"status"},{id:"StartTime",label:"StartTime",type:"datetime"},{id:"CloseTime",label:"CloseTime",type:"datetime"},{id:"TaskQueue",label:"TaskQueue",type:"text"}],ou=[{id:"equals",label:"=",alternatives:["equals","is"],searchOperator:"="},{id:"notEquals",label:"!=",alternatives:["not equals","is not"],searchOperator:"!="},{id:"starts_with",label:"starts with",alternatives:["startswith","start"],searchOperator:"starts_with"},{id:"isNull",label:"is null",alternatives:["null"],searchOperator:"is null"},{id:"isNotNull",label:"is not null",alternatives:["not null"],searchOperator:"is not null"},{id:"greaterThan",label:">",alternatives:["after","greater than"],searchOperator:">"},{id:"lessThan",label:"<",alternatives:["before","less than"],searchOperator:"<"},{id:"between",label:"between",alternatives:[],searchOperator:"between"}],Ji=[{value:"Completed",color:"text-green-700 bg-green-50"},{value:"Running",color:"text-blue-700 bg-blue-50"},{value:"TimedOut",color:"text-orange-700 bg-orange-50"},{value:"Failed",color:"text-red-700 bg-red-50"},{value:"Canceled",color:"text-gray-700 bg-gray-50"},{value:"Terminated",color:"text-yellow-700 bg-yellow-50"},{value:"Continued as New",color:"text-pink-700 bg-pink-50"}],ba=[{id:"equals",label:"=",alternatives:["==","is","="]},{id:"between",label:"between",alternatives:["between"]},{id:"greater",label:">",alternatives:["gt",">"]},{id:"greaterOrEqual",label:">=",alternatives:["gte",">="]},{id:"less",label:"<",alternatives:["lt","<"]},{id:"lessOrEqual",label:"<=",alternatives:["lte","<="]}],Rf=6048e5,lx=864e5,au=Symbol.for("constructDateFrom");function Jn(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&au in e?e[au](t):e instanceof Date?new e.constructor(t):new Date(t)}function on(e,t){return Jn(t||e,e)}let ux={};function si(){return ux}function jo(e,t){var l,u,f,h;const n=si(),r=(t==null?void 0:t.weekStartsOn)??((u=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??0,o=on(e,t==null?void 0:t.in),i=o.getDay(),s=(i<r?7:0)+i-r;return o.setDate(o.getDate()-s),o.setHours(0,0,0,0),o}function Ba(e,t){return jo(e,{...t,weekStartsOn:1})}function Lf(e,t){const n=on(e,t==null?void 0:t.in),r=n.getFullYear(),o=Jn(n,0);o.setFullYear(r+1,0,4),o.setHours(0,0,0,0);const i=Ba(o),s=Jn(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const l=Ba(s);return n.getTime()>=i.getTime()?r+1:n.getTime()>=l.getTime()?r:r-1}function iu(e){const t=on(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function dx(e,...t){const n=Jn.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function su(e,t){const n=on(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function fx(e,t,n){const[r,o]=dx(n==null?void 0:n.in,e,t),i=su(r),s=su(o),l=+i-iu(i),u=+s-iu(s);return Math.round((l-u)/lx)}function hx(e,t){const n=Lf(e,t),r=Jn(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Ba(r)}function mx(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function px(e){return!(!mx(e)&&typeof e!="number"||isNaN(+on(e)))}function gx(e,t){const n=on(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const yx={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},vx=(e,t,n)=>{let r;const o=yx[e];return typeof o=="string"?r=o:t===1?r=o.one:r=o.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function es(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const wx={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},bx={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},xx={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Sx={date:es({formats:wx,defaultWidth:"full"}),time:es({formats:bx,defaultWidth:"full"}),dateTime:es({formats:xx,defaultWidth:"full"})},_x={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},kx=(e,t,n,r)=>_x[e];function fo(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let o;if(r==="formatting"&&e.formattingValues){const s=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):s;o=e.formattingValues[l]||e.formattingValues[s]}else{const s=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;o=e.values[l]||e.values[s]}const i=e.argumentCallback?e.argumentCallback(t):t;return o[i]}}const Ex={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Nx={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Cx={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Tx={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Dx={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ox={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},jx=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Px={ordinalNumber:jx,era:fo({values:Ex,defaultWidth:"wide"}),quarter:fo({values:Nx,defaultWidth:"wide",argumentCallback:e=>e-1}),month:fo({values:Cx,defaultWidth:"wide"}),day:fo({values:Tx,defaultWidth:"wide"}),dayPeriod:fo({values:Dx,defaultWidth:"wide",formattingValues:Ox,defaultFormattingWidth:"wide"})};function ho(e){return(t,n={})=>{const r=n.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(o);if(!i)return null;const s=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(l)?Ix(l,p=>p.test(s)):Mx(l,p=>p.test(s));let f;f=e.valueCallback?e.valueCallback(u):u,f=n.valueCallback?n.valueCallback(f):f;const h=t.slice(s.length);return{value:f,rest:h}}}function Mx(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Ix(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Ax(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const o=r[0],i=t.match(e.parsePattern);if(!i)return null;let s=e.valueCallback?e.valueCallback(i[0]):i[0];s=n.valueCallback?n.valueCallback(s):s;const l=t.slice(o.length);return{value:s,rest:l}}}const $x=/^(\d+)(th|st|nd|rd)?/i,Rx=/\d+/i,Lx={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Fx={any:[/^b/i,/^(a|c)/i]},Wx={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Bx={any:[/1/i,/2/i,/3/i,/4/i]},Hx={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},zx={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Yx={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Vx={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},qx={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Kx={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ux={ordinalNumber:Ax({matchPattern:$x,parsePattern:Rx,valueCallback:e=>parseInt(e,10)}),era:ho({matchPatterns:Lx,defaultMatchWidth:"wide",parsePatterns:Fx,defaultParseWidth:"any"}),quarter:ho({matchPatterns:Wx,defaultMatchWidth:"wide",parsePatterns:Bx,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ho({matchPatterns:Hx,defaultMatchWidth:"wide",parsePatterns:zx,defaultParseWidth:"any"}),day:ho({matchPatterns:Yx,defaultMatchWidth:"wide",parsePatterns:Vx,defaultParseWidth:"any"}),dayPeriod:ho({matchPatterns:qx,defaultMatchWidth:"any",parsePatterns:Kx,defaultParseWidth:"any"})},Xx={code:"en-US",formatDistance:vx,formatLong:Sx,formatRelative:kx,localize:Px,match:Ux,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Gx(e,t){const n=on(e,t==null?void 0:t.in);return fx(n,gx(n))+1}function Zx(e,t){const n=on(e,t==null?void 0:t.in),r=+Ba(n)-+hx(n);return Math.round(r/Rf)+1}function Ff(e,t){var h,p,y,w;const n=on(e,t==null?void 0:t.in),r=n.getFullYear(),o=si(),i=(t==null?void 0:t.firstWeekContainsDate)??((p=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??o.firstWeekContainsDate??((w=(y=o.locale)==null?void 0:y.options)==null?void 0:w.firstWeekContainsDate)??1,s=Jn((t==null?void 0:t.in)||e,0);s.setFullYear(r+1,0,i),s.setHours(0,0,0,0);const l=jo(s,t),u=Jn((t==null?void 0:t.in)||e,0);u.setFullYear(r,0,i),u.setHours(0,0,0,0);const f=jo(u,t);return+n>=+l?r+1:+n>=+f?r:r-1}function Qx(e,t){var l,u,f,h;const n=si(),r=(t==null?void 0:t.firstWeekContainsDate)??((u=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,o=Ff(e,t),i=Jn((t==null?void 0:t.in)||e,0);return i.setFullYear(o,0,r),i.setHours(0,0,0,0),jo(i,t)}function Jx(e,t){const n=on(e,t==null?void 0:t.in),r=+jo(n,t)-+Qx(n,t);return Math.round(r/Rf)+1}function Ge(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Yn={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Ge(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Ge(n+1,2)},d(e,t){return Ge(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Ge(e.getHours()%12||12,t.length)},H(e,t){return Ge(e.getHours(),t.length)},m(e,t){return Ge(e.getMinutes(),t.length)},s(e,t){return Ge(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),o=Math.trunc(r*Math.pow(10,n-3));return Ge(o,t.length)}},Pr={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},cu={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return Yn.y(e,t)},Y:function(e,t,n,r){const o=Ff(e,r),i=o>0?o:1-o;if(t==="YY"){const s=i%100;return Ge(s,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):Ge(i,t.length)},R:function(e,t){const n=Lf(e);return Ge(n,t.length)},u:function(e,t){const n=e.getFullYear();return Ge(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Ge(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Ge(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Yn.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Ge(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const o=Jx(e,r);return t==="wo"?n.ordinalNumber(o,{unit:"week"}):Ge(o,t.length)},I:function(e,t,n){const r=Zx(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Ge(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Yn.d(e,t)},D:function(e,t,n){const r=Gx(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ge(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const o=e.getDay(),i=(o-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Ge(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const o=e.getDay(),i=(o-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Ge(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),o=r===0?7:r;switch(t){case"i":return String(o);case"ii":return Ge(o,t.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const o=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let o;switch(r===12?o=Pr.noon:r===0?o=Pr.midnight:o=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let o;switch(r>=17?o=Pr.evening:r>=12?o=Pr.afternoon:r>=4?o=Pr.morning:o=Pr.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Yn.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Yn.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ge(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ge(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Yn.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Yn.s(e,t)},S:function(e,t){return Yn.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return uu(r);case"XXXX":case"XX":return cr(r);case"XXXXX":case"XXX":default:return cr(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return uu(r);case"xxxx":case"xx":return cr(r);case"xxxxx":case"xxx":default:return cr(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+lu(r,":");case"OOOO":default:return"GMT"+cr(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+lu(r,":");case"zzzz":default:return"GMT"+cr(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return Ge(r,t.length)},T:function(e,t,n){return Ge(+e,t.length)}};function lu(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),o=Math.trunc(r/60),i=r%60;return i===0?n+String(o):n+String(o)+t+Ge(i,2)}function uu(e,t){return e%60===0?(e>0?"-":"+")+Ge(Math.abs(e)/60,2):cr(e,t)}function cr(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),o=Ge(Math.trunc(r/60),2),i=Ge(r%60,2);return n+o+t+i}const du=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Wf=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},e1=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],o=n[2];if(!o)return du(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",du(r,t)).replace("{{time}}",Wf(o,t))},t1={p:Wf,P:e1},n1=/^D+$/,r1=/^Y+$/,o1=["D","DD","YY","YYYY"];function a1(e){return n1.test(e)}function i1(e){return r1.test(e)}function s1(e,t,n){const r=c1(e,t,n);if(console.warn(r),o1.includes(e))throw new RangeError(r)}function c1(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const l1=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,u1=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,d1=/^'([^]*?)'?$/,f1=/''/g,h1=/[a-zA-Z]/;function It(e,t,n){var h,p,y,w;const r=si(),o=r.locale??Xx,i=r.firstWeekContainsDate??((p=(h=r.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,s=r.weekStartsOn??((w=(y=r.locale)==null?void 0:y.options)==null?void 0:w.weekStartsOn)??0,l=on(e,n==null?void 0:n.in);if(!px(l))throw new RangeError("Invalid time value");let u=t.match(u1).map(S=>{const _=S[0];if(_==="p"||_==="P"){const N=t1[_];return N(S,o.formatLong)}return S}).join("").match(l1).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const _=S[0];if(_==="'")return{isToken:!1,value:m1(S)};if(cu[_])return{isToken:!0,value:S};if(_.match(h1))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:S}});o.localize.preprocessor&&(u=o.localize.preprocessor(l,u));const f={firstWeekContainsDate:i,weekStartsOn:s,locale:o};return u.map(S=>{if(!S.isToken)return S.value;const _=S.value;(i1(_)||a1(_))&&s1(_,t,String(e));const N=cu[_[0]];return N(l,_,o.localize,f)}).join("")}function m1(e){const t=e.match(d1);return t?t[1].replace(f1,"'"):e}const p1=(e,t,n,r)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;const o=Object.getOwnPropertyDescriptor(e,n),i=Object.getOwnPropertyDescriptor(t,n);!g1(o,i)&&r||Object.defineProperty(e,n,i)},g1=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},y1=(e,t)=>{const n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)},v1=(e,t)=>`/* Wrapped ${e}*/
${t}`,w1=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),b1=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),x1=(e,t,n)=>{const r=n===""?"":`with ${n.trim()}() `,o=v1.bind(null,r,t.toString());Object.defineProperty(o,"name",b1),Object.defineProperty(e,"toString",{...w1,value:o})},S1=(e,t,{ignoreNonConfigurable:n=!1}={})=>{const{name:r}=e;for(const o of Reflect.ownKeys(t))p1(e,t,o,n);return y1(e,t),x1(e,t,r),e};var _1=S1,Is={exports:{}},k1=()=>{const e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e};(function(e,t){var n=Mr&&Mr.__awaiter||function(s,l,u,f){return new(u||(u=Promise))(function(h,p){function y(_){try{S(f.next(_))}catch(N){p(N)}}function w(_){try{S(f.throw(_))}catch(N){p(N)}}function S(_){_.done?h(_.value):new u(function(N){N(_.value)}).then(y,w)}S((f=f.apply(s,l||[])).next())})},r=Mr&&Mr.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(k1);function i(s,l="maxAge"){let u,f,h;const p=()=>n(this,void 0,void 0,function*(){if(u!==void 0)return;const S=_=>n(this,void 0,void 0,function*(){h=o.default();const N=_[1][l]-Date.now();if(N<=0){s.delete(_[0]),h.resolve();return}return u=_[0],f=setTimeout(()=>{s.delete(_[0]),h&&h.resolve()},N),typeof f.unref=="function"&&f.unref(),h.promise});try{for(const _ of s)yield S(_)}catch{}u=void 0}),y=()=>{u=void 0,f!==void 0&&(clearTimeout(f),f=void 0),h!==void 0&&(h.reject(void 0),h=void 0)},w=s.set.bind(s);return s.set=(S,_)=>{s.has(S)&&s.delete(S);const N=w(S,_);return u&&u===S&&y(),p(),N},p(),s}t.default=i,e.exports=i,e.exports.default=i})(Is,Is.exports);var E1=Is.exports;const N1=_1,C1=E1,ts=new WeakMap,Bf=new WeakMap,Ha=(e,{cacheKey:t,cache:n=new Map,maxAge:r}={})=>{typeof r=="number"&&C1(n);const o=function(...i){const s=t?t(i):i[0],l=n.get(s);if(l)return l.data;const u=e.apply(this,i);return n.set(s,{data:u,maxAge:r?Date.now()+r:Number.POSITIVE_INFINITY}),u};return N1(o,e,{ignoreNonConfigurable:!0}),Bf.set(o,n),o};Ha.decorator=(e={})=>(t,n,r)=>{const o=t[n];if(typeof o!="function")throw new TypeError("The decorated value must be a function");delete r.value,delete r.writable,r.get=function(){if(!ts.has(this)){const i=Ha(o,e);return ts.set(this,i),i}return ts.get(this)}};Ha.clear=e=>{const t=Bf.get(e);if(!t)throw new TypeError("Can't clear a function that was not memoized!");if(typeof t.clear!="function")throw new TypeError("The cache Map can't be cleared!");t.clear()};var T1=Ha;const Hf=Qs(T1);function D1(e){return typeof e=="string"}function O1(e,t,n){return n.indexOf(e)===t}function j1(e){return e.toLowerCase()===e}function fu(e){return e.indexOf(",")===-1?e:e.split(",")}function As(e){if(!e)return e;if(e==="C"||e==="posix"||e==="POSIX")return"en-US";if(e.indexOf(".")!==-1){var t=e.split(".")[0],n=t===void 0?"":t;return As(n)}if(e.indexOf("@")!==-1){var r=e.split("@")[0],n=r===void 0?"":r;return As(n)}if(e.indexOf("-")===-1||!j1(e))return e;var o=e.split("-"),i=o[0],s=o[1],l=s===void 0?"":s;return"".concat(i,"-").concat(l.toUpperCase())}function P1(e){var t=e===void 0?{}:e,n=t.useFallbackLocale,r=n===void 0?!0:n,o=t.fallbackLocale,i=o===void 0?"en-US":o,s=[];if(typeof navigator<"u"){for(var l=navigator.languages||[],u=[],f=0,h=l;f<h.length;f++){var p=h[f];u=u.concat(fu(p))}var y=navigator.language,w=y&&fu(y);s=s.concat(u,w)}return r&&s.push(i),s.filter(D1).map(As).filter(O1)}var M1=Hf(P1,{cacheKey:JSON.stringify});function I1(e){return M1(e)[0]||null}var zf=Hf(I1,{cacheKey:JSON.stringify});function Mn(e,t,n){return function(o,i){i===void 0&&(i=n);var s=e(o)+i;return t(s)}}function Wo(e){return function(n){return new Date(e(n).getTime()-1)}}function Bo(e,t){return function(r){return[e(r),t(r)]}}function ct(e){if(e instanceof Date)return e.getFullYear();if(typeof e=="number")return e;var t=parseInt(e,10);if(typeof e=="string"&&!isNaN(t))return t;throw new Error("Failed to get year from date: ".concat(e,"."))}function tr(e){if(e instanceof Date)return e.getMonth();throw new Error("Failed to get month from date: ".concat(e,"."))}function ci(e){if(e instanceof Date)return e.getDate();throw new Error("Failed to get year from date: ".concat(e,"."))}function Vr(e){var t=ct(e),n=t+(-t+1)%100,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var A1=Mn(ct,Vr,-100),Yf=Mn(ct,Vr,100),Sc=Wo(Yf),$1=Mn(ct,Sc,-100),Vf=Bo(Vr,Sc);function nr(e){var t=ct(e),n=t+(-t+1)%10,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var qf=Mn(ct,nr,-10),_c=Mn(ct,nr,10),li=Wo(_c),Kf=Mn(ct,li,-10),Uf=Bo(nr,li);function qr(e){var t=ct(e),n=new Date;return n.setFullYear(t,0,1),n.setHours(0,0,0,0),n}var Xf=Mn(ct,qr,-1),kc=Mn(ct,qr,1),ui=Wo(kc),Gf=Mn(ct,ui,-1),R1=Bo(qr,ui);function Ec(e,t){return function(r,o){o===void 0&&(o=t);var i=ct(r),s=tr(r)+o,l=new Date;return l.setFullYear(i,s,1),l.setHours(0,0,0,0),e(l)}}function xr(e){var t=ct(e),n=tr(e),r=new Date;return r.setFullYear(t,n,1),r.setHours(0,0,0,0),r}var Zf=Ec(xr,-1),Nc=Ec(xr,1),Ho=Wo(Nc),Qf=Ec(Ho,-1),L1=Bo(xr,Ho);function F1(e,t){return function(r,o){o===void 0&&(o=t);var i=ct(r),s=tr(r),l=ci(r)+o,u=new Date;return u.setFullYear(i,s,l),u.setHours(0,0,0,0),e(u)}}function zo(e){var t=ct(e),n=tr(e),r=ci(e),o=new Date;return o.setFullYear(t,n,r),o.setHours(0,0,0,0),o}var W1=F1(zo,1),Cc=Wo(W1),B1=Bo(zo,Cc);function Jf(e){return ci(Ho(e))}var _t={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},H1={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},Tc=[0,1,2,3,4,5,6],ns=new Map;function z1(e){return function(n,r){var o=n||zf();ns.has(o)||ns.set(o,new Map);var i=ns.get(o);return i.has(e)||i.set(e,new Intl.DateTimeFormat(o||void 0,e).format),i.get(e)(r)}}function Y1(e){var t=new Date(e);return new Date(t.setHours(12))}function Sr(e){return function(t,n){return z1(e)(t,Y1(n))}}var V1={day:"numeric"},q1={day:"numeric",month:"long",year:"numeric"},K1={month:"long"},U1={month:"long",year:"numeric"},X1={weekday:"short"},G1={weekday:"long"},Z1={year:"numeric"},Q1=Sr(V1),J1=Sr(q1),eS=Sr(K1),eh=Sr(U1),tS=Sr(X1),nS=Sr(G1),di=Sr(Z1),rS=Tc[0],oS=Tc[5],hu=Tc[6];function Po(e,t){t===void 0&&(t=_t.ISO_8601);var n=e.getDay();switch(t){case _t.ISO_8601:return(n+6)%7;case _t.ISLAMIC:return(n+1)%7;case _t.HEBREW:case _t.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function aS(e){var t=Vr(e);return ct(t)}function iS(e){var t=nr(e);return ct(t)}function $s(e,t){t===void 0&&(t=_t.ISO_8601);var n=ct(e),r=tr(e),o=e.getDate()-Po(e,t);return new Date(n,r,o)}function sS(e,t){t===void 0&&(t=_t.ISO_8601);var n=t===_t.GREGORY?_t.GREGORY:_t.ISO_8601,r=$s(e,t),o=ct(e)+1,i,s;do i=new Date(o,0,n===_t.ISO_8601?4:1),s=$s(i,t),o-=1;while(e<s);return Math.round((r.getTime()-s.getTime())/(864e5*7))+1}function yr(e,t){switch(e){case"century":return Vr(t);case"decade":return nr(t);case"year":return qr(t);case"month":return xr(t);case"day":return zo(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function cS(e,t){switch(e){case"century":return A1(t);case"decade":return qf(t);case"year":return Xf(t);case"month":return Zf(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function th(e,t){switch(e){case"century":return Yf(t);case"decade":return _c(t);case"year":return kc(t);case"month":return Nc(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function lS(e,t){switch(e){case"decade":return qf(t,-100);case"year":return Xf(t,-10);case"month":return Zf(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function uS(e,t){switch(e){case"decade":return _c(t,100);case"year":return kc(t,10);case"month":return Nc(t,12);default:throw new Error("Invalid rangeType: ".concat(e))}}function nh(e,t){switch(e){case"century":return Sc(t);case"decade":return li(t);case"year":return ui(t);case"month":return Ho(t);case"day":return Cc(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function dS(e,t){switch(e){case"century":return $1(t);case"decade":return Kf(t);case"year":return Gf(t);case"month":return Qf(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function fS(e,t){switch(e){case"decade":return Kf(t,-100);case"year":return Gf(t,-10);case"month":return Qf(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function mu(e,t){switch(e){case"century":return Vf(t);case"decade":return Uf(t);case"year":return R1(t);case"month":return L1(t);case"day":return B1(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function hS(e,t,n){var r=[t,n].sort(function(o,i){return o.getTime()-i.getTime()});return[yr(e,r[0]),nh(e,r[1])]}function rh(e,t,n){return n.map(function(r){return(t||di)(e,r)}).join(" – ")}function mS(e,t,n){return rh(e,t,Vf(n))}function oh(e,t,n){return rh(e,t,Uf(n))}function pS(e){return e.getDay()===new Date().getDay()}function ah(e,t){t===void 0&&(t=_t.ISO_8601);var n=e.getDay();switch(t){case _t.ISLAMIC:case _t.HEBREW:return n===oS||n===hu;case _t.ISO_8601:case _t.GREGORY:return n===hu||n===rS;default:throw new Error("Unsupported calendar type.")}}var hn="react-calendar__navigation";function gS(e){var t=e.activeStartDate,n=e.drillUp,r=e.formatMonthYear,o=r===void 0?eh:r,i=e.formatYear,s=i===void 0?di:i,l=e.locale,u=e.maxDate,f=e.minDate,h=e.navigationAriaLabel,p=h===void 0?"":h,y=e.navigationAriaLive,w=e.navigationLabel,S=e.next2AriaLabel,_=S===void 0?"":S,N=e.next2Label,C=N===void 0?"»":N,R=e.nextAriaLabel,I=R===void 0?"":R,T=e.nextLabel,U=T===void 0?"›":T,q=e.prev2AriaLabel,V=q===void 0?"":q,J=e.prev2Label,X=J===void 0?"«":J,ee=e.prevAriaLabel,K=ee===void 0?"":ee,re=e.prevLabel,se=re===void 0?"‹":re,k=e.setActiveStartDate,M=e.showDoubleView,j=e.view,G=e.views,ae=G.indexOf(j)>0,P=j!=="century",Q=cS(j,t),oe=P?lS(j,t):void 0,ie=th(j,t),de=P?uS(j,t):void 0,ye=function(){if(Q.getFullYear()<0)return!0;var Le=dS(j,t);return f&&f>=Le}(),_e=P&&function(){if(oe.getFullYear()<0)return!0;var Le=fS(j,t);return f&&f>=Le}(),De=u&&u<ie,Oe=P&&u&&u<de;function Ie(){k(Q,"prev")}function fe(){k(oe,"prev2")}function Re(){k(ie,"next")}function Ze(){k(de,"next2")}function Pe(Le){var Be=function(){switch(j){case"century":return mS(l,s,Le);case"decade":return oh(l,s,Le);case"year":return s(l,Le);case"month":return o(l,Le);default:throw new Error("Invalid view: ".concat(j,"."))}}();return w?w({date:Le,label:Be,locale:l||zf()||void 0,view:j}):Be}function Qe(){var Le="".concat(hn,"__label");return g.jsxs("button",{"aria-label":p,"aria-live":y,className:Le,disabled:!ae,onClick:n,style:{flexGrow:1},type:"button",children:[g.jsx("span",{className:"".concat(Le,"__labelText ").concat(Le,"__labelText--from"),children:Pe(t)}),M?g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"".concat(Le,"__divider"),children:" – "}),g.jsx("span",{className:"".concat(Le,"__labelText ").concat(Le,"__labelText--to"),children:Pe(ie)})]}):null]})}return g.jsxs("div",{className:hn,children:[X!==null&&P?g.jsx("button",{"aria-label":V,className:"".concat(hn,"__arrow ").concat(hn,"__prev2-button"),disabled:_e,onClick:fe,type:"button",children:X}):null,se!==null&&g.jsx("button",{"aria-label":K,className:"".concat(hn,"__arrow ").concat(hn,"__prev-button"),disabled:ye,onClick:Ie,type:"button",children:se}),Qe(),U!==null&&g.jsx("button",{"aria-label":I,className:"".concat(hn,"__arrow ").concat(hn,"__next-button"),disabled:De,onClick:Re,type:"button",children:U}),C!==null&&P?g.jsx("button",{"aria-label":_,className:"".concat(hn,"__arrow ").concat(hn,"__next2-button"),disabled:Oe,onClick:Ze,type:"button",children:C}):null]})}var Ar=function(){return Ar=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ar.apply(this,arguments)},yS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function pu(e){return"".concat(e,"%")}function Dc(e){var t=e.children,n=e.className,r=e.count,o=e.direction,i=e.offset,s=e.style,l=e.wrap,u=yS(e,["children","className","count","direction","offset","style","wrap"]);return g.jsx("div",Ar({className:n,style:Ar({display:"flex",flexDirection:o,flexWrap:l?"wrap":"nowrap"},s)},u,{children:b.Children.map(t,function(f,h){var p=i&&h===0?pu(100*i/r):null;return b.cloneElement(f,Ar(Ar({},f.props),{style:{flexBasis:pu(100/r),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:p,marginInlineStart:p,marginInlineEnd:0}}))})}))}function vS(e,t,n){return t&&t>e?t:n&&n<e?n:e}function Mo(e,t){return t[0]<=e&&t[1]>=e}function wS(e,t){return e[0]<=t[0]&&e[1]>=t[1]}function ih(e,t){return Mo(e[0],t)||Mo(e[1],t)}function gu(e,t,n){var r=ih(t,e),o=[];if(r){o.push(n);var i=Mo(e[0],t),s=Mo(e[1],t);i&&o.push("".concat(n,"Start")),s&&o.push("".concat(n,"End")),i&&s&&o.push("".concat(n,"BothEnds"))}return o}function bS(e){return Array.isArray(e)?e[0]!==null&&e[1]!==null:e!==null}function xS(e){if(!e)throw new Error("args is required");var t=e.value,n=e.date,r=e.hover,o="react-calendar__tile",i=[o];if(!n)return i;var s=new Date,l=function(){if(Array.isArray(n))return n;var w=e.dateType;if(!w)throw new Error("dateType is required when date is not an array of two dates");return mu(w,n)}();if(Mo(s,l)&&i.push("".concat(o,"--now")),!t||!bS(t))return i;var u=function(){if(Array.isArray(t))return t;var w=e.valueType;if(!w)throw new Error("valueType is required when value is not an array of two dates");return mu(w,t)}();wS(u,l)?i.push("".concat(o,"--active")):ih(u,l)&&i.push("".concat(o,"--hasActive"));var f=gu(u,l,"".concat(o,"--range"));i.push.apply(i,f);var h=Array.isArray(t)?t:[t];if(r&&h.length===1){var p=r>u[0]?[u[0],r]:[r,u[0]],y=gu(p,l,"".concat(o,"--hover"));i.push.apply(i,y)}return i}function fi(e){for(var t=e.className,n=e.count,r=n===void 0?3:n,o=e.dateTransform,i=e.dateType,s=e.end,l=e.hover,u=e.offset,f=e.renderTile,h=e.start,p=e.step,y=p===void 0?1:p,w=e.value,S=e.valueType,_=[],N=h;N<=s;N+=y){var C=o(N);_.push(f({classes:xS({date:C,dateType:i,hover:l,value:w,valueType:S}),date:C}))}return g.jsx(Dc,{className:t,count:r,offset:u,wrap:!0,children:_})}function hi(e){var t=e.activeStartDate,n=e.children,r=e.classes,o=e.date,i=e.formatAbbr,s=e.locale,l=e.maxDate,u=e.maxDateTransform,f=e.minDate,h=e.minDateTransform,p=e.onClick,y=e.onMouseOver,w=e.style,S=e.tileClassName,_=e.tileContent,N=e.tileDisabled,C=e.view,R=b.useMemo(function(){var T={activeStartDate:t,date:o,view:C};return typeof S=="function"?S(T):S},[t,o,S,C]),I=b.useMemo(function(){var T={activeStartDate:t,date:o,view:C};return typeof _=="function"?_(T):_},[t,o,_,C]);return g.jsxs("button",{className:Lt(r,R),disabled:f&&h(f)>o||l&&u(l)<o||(N==null?void 0:N({activeStartDate:t,date:o,view:C})),onClick:p?function(T){return p(o,T)}:void 0,onFocus:y?function(){return y(o)}:void 0,onMouseOver:y?function(){return y(o)}:void 0,style:w,type:"button",children:[i?g.jsx("abbr",{"aria-label":i(s,o),children:n}):n,I]})}var Rs=function(){return Rs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Rs.apply(this,arguments)},SS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},yu="react-calendar__century-view__decades__decade";function _S(e){var t=e.classes,n=t===void 0?[]:t,r=e.currentCentury,o=e.formatYear,i=o===void 0?di:o,s=SS(e,["classes","currentCentury","formatYear"]),l=s.date,u=s.locale,f=[];return n&&f.push.apply(f,n),f.push(yu),Vr(l).getFullYear()!==r&&f.push("".concat(yu,"--neighboringCentury")),g.jsx(hi,Rs({},s,{classes:f,maxDateTransform:li,minDateTransform:nr,view:"century",children:oh(u,i,l)}))}var Ls=function(){return Ls=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ls.apply(this,arguments)},vu=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function kS(e){var t=e.activeStartDate,n=e.hover,r=e.showNeighboringCentury,o=e.value,i=e.valueType,s=vu(e,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),l=aS(t),u=l+(r?119:99);return g.jsx(fi,{className:"react-calendar__century-view__decades",dateTransform:nr,dateType:"decade",end:u,hover:n,renderTile:function(f){var h=f.date,p=vu(f,["date"]);return g.jsx(_S,Ls({},s,p,{activeStartDate:t,currentCentury:l,date:h}),h.getTime())},start:l,step:10,value:o,valueType:i})}var Fs=function(){return Fs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Fs.apply(this,arguments)};function ES(e){function t(){return g.jsx(kS,Fs({},e))}return g.jsx("div",{className:"react-calendar__century-view",children:t()})}var Ws=function(){return Ws=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ws.apply(this,arguments)},NS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},wu="react-calendar__decade-view__years__year";function CS(e){var t=e.classes,n=t===void 0?[]:t,r=e.currentDecade,o=e.formatYear,i=o===void 0?di:o,s=NS(e,["classes","currentDecade","formatYear"]),l=s.date,u=s.locale,f=[];return n&&f.push.apply(f,n),f.push(wu),nr(l).getFullYear()!==r&&f.push("".concat(wu,"--neighboringDecade")),g.jsx(hi,Ws({},s,{classes:f,maxDateTransform:ui,minDateTransform:qr,view:"decade",children:i(u,l)}))}var Bs=function(){return Bs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Bs.apply(this,arguments)},bu=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function TS(e){var t=e.activeStartDate,n=e.hover,r=e.showNeighboringDecade,o=e.value,i=e.valueType,s=bu(e,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),l=iS(t),u=l+(r?11:9);return g.jsx(fi,{className:"react-calendar__decade-view__years",dateTransform:qr,dateType:"year",end:u,hover:n,renderTile:function(f){var h=f.date,p=bu(f,["date"]);return g.jsx(CS,Bs({},s,p,{activeStartDate:t,currentDecade:l,date:h}),h.getTime())},start:l,value:o,valueType:i})}var Hs=function(){return Hs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Hs.apply(this,arguments)};function DS(e){function t(){return g.jsx(TS,Hs({},e))}return g.jsx("div",{className:"react-calendar__decade-view",children:t()})}var zs=function(){return zs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},zs.apply(this,arguments)},OS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},xu=function(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},jS="react-calendar__year-view__months__month";function PS(e){var t=e.classes,n=t===void 0?[]:t,r=e.formatMonth,o=r===void 0?eS:r,i=e.formatMonthYear,s=i===void 0?eh:i,l=OS(e,["classes","formatMonth","formatMonthYear"]),u=l.date,f=l.locale;return g.jsx(hi,zs({},l,{classes:xu(xu([],n,!0),[jS],!1),formatAbbr:s,maxDateTransform:Ho,minDateTransform:xr,view:"year",children:o(f,u)}))}var Ys=function(){return Ys=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ys.apply(this,arguments)},Su=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function MS(e){var t=e.activeStartDate,n=e.hover,r=e.value,o=e.valueType,i=Su(e,["activeStartDate","hover","value","valueType"]),s=0,l=11,u=ct(t);return g.jsx(fi,{className:"react-calendar__year-view__months",dateTransform:function(f){var h=new Date;return h.setFullYear(u,f,1),xr(h)},dateType:"month",end:l,hover:n,renderTile:function(f){var h=f.date,p=Su(f,["date"]);return g.jsx(PS,Ys({},i,p,{activeStartDate:t,date:h}),h.getTime())},start:s,value:r,valueType:o})}var Vs=function(){return Vs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Vs.apply(this,arguments)};function IS(e){function t(){return g.jsx(MS,Vs({},e))}return g.jsx("div",{className:"react-calendar__year-view",children:t()})}var qs=function(){return qs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},qs.apply(this,arguments)},AS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},rs="react-calendar__month-view__days__day";function $S(e){var t=e.calendarType,n=e.classes,r=n===void 0?[]:n,o=e.currentMonthIndex,i=e.formatDay,s=i===void 0?Q1:i,l=e.formatLongDate,u=l===void 0?J1:l,f=AS(e,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),h=f.date,p=f.locale,y=[];return r&&y.push.apply(y,r),y.push(rs),ah(h,t)&&y.push("".concat(rs,"--weekend")),h.getMonth()!==o&&y.push("".concat(rs,"--neighboringMonth")),g.jsx(hi,qs({},f,{classes:y,formatAbbr:u,maxDateTransform:Cc,minDateTransform:zo,view:"month",children:s(p,h)}))}var Ks=function(){return Ks=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ks.apply(this,arguments)},_u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function RS(e){var t=e.activeStartDate,n=e.calendarType,r=e.hover,o=e.showFixedNumberOfWeeks,i=e.showNeighboringMonth,s=e.value,l=e.valueType,u=_u(e,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),f=ct(t),h=tr(t),p=o||i,y=Po(t,n),w=p?0:y,S=(p?-y:0)+1,_=function(){if(o)return S+6*7-1;var N=Jf(t);if(i){var C=new Date;C.setFullYear(f,h,N),C.setHours(0,0,0,0);var R=7-Po(C,n)-1;return N+R}return N}();return g.jsx(fi,{className:"react-calendar__month-view__days",count:7,dateTransform:function(N){var C=new Date;return C.setFullYear(f,h,N),zo(C)},dateType:"day",hover:r,end:_,renderTile:function(N){var C=N.date,R=_u(N,["date"]);return g.jsx($S,Ks({},u,R,{activeStartDate:t,calendarType:n,currentMonthIndex:h,date:C}),C.getTime())},offset:w,start:S,value:s,valueType:l})}var sh="react-calendar__month-view__weekdays",os="".concat(sh,"__weekday");function LS(e){for(var t=e.calendarType,n=e.formatShortWeekday,r=n===void 0?tS:n,o=e.formatWeekday,i=o===void 0?nS:o,s=e.locale,l=e.onMouseLeave,u=new Date,f=xr(u),h=ct(f),p=tr(f),y=[],w=1;w<=7;w+=1){var S=new Date(h,p,w-Po(f,t)),_=i(s,S);y.push(g.jsx("div",{className:Lt(os,pS(S)&&"".concat(os,"--current"),ah(S,t)&&"".concat(os,"--weekend")),children:g.jsx("abbr",{"aria-label":_,title:_,children:r(s,S).replace(".","")})},w))}return g.jsx(Dc,{className:sh,count:7,onFocus:l,onMouseOver:l,children:y})}var za=function(){return za=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},za.apply(this,arguments)},ku=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},Eu="react-calendar__tile";function FS(e){var t=e.onClickWeekNumber,n=e.weekNumber,r=g.jsx("span",{children:n});if(t){var o=e.date,i=e.onClickWeekNumber,s=e.weekNumber,l=ku(e,["date","onClickWeekNumber","weekNumber"]);return g.jsx("button",za({},l,{className:Eu,onClick:function(u){return i(s,o,u)},type:"button",children:r}))}else{e.date,e.onClickWeekNumber,e.weekNumber;var l=ku(e,["date","onClickWeekNumber","weekNumber"]);return g.jsx("div",za({},l,{className:Eu,children:r}))}}function WS(e){var t=e.activeStartDate,n=e.calendarType,r=e.onClickWeekNumber,o=e.onMouseLeave,i=e.showFixedNumberOfWeeks,s=function(){if(i)return 6;var f=Jf(t),h=Po(t,n),p=f-(7-h);return 1+Math.ceil(p/7)}(),l=function(){for(var f=ct(t),h=tr(t),p=ci(t),y=[],w=0;w<s;w+=1)y.push($s(new Date(f,h,p+w*7),n));return y}(),u=l.map(function(f){return sS(f,n)});return g.jsx(Dc,{className:"react-calendar__month-view__weekNumbers",count:s,direction:"column",onFocus:o,onMouseOver:o,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:u.map(function(f,h){var p=l[h];if(!p)throw new Error("date is not defined");return g.jsx(FS,{date:p,onClickWeekNumber:r,weekNumber:f},f)})})}var Us=function(){return Us=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Us.apply(this,arguments)},BS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function HS(e){if(e)for(var t=0,n=Object.entries(H1);t<n.length;t++){var r=n[t],o=r[0],i=r[1];if(i.includes(e))return o}return _t.ISO_8601}function zS(e){var t=e.activeStartDate,n=e.locale,r=e.onMouseLeave,o=e.showFixedNumberOfWeeks,i=e.calendarType,s=i===void 0?HS(n):i,l=e.formatShortWeekday,u=e.formatWeekday,f=e.onClickWeekNumber,h=e.showWeekNumbers,p=BS(e,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function y(){return g.jsx(LS,{calendarType:s,formatShortWeekday:l,formatWeekday:u,locale:n,onMouseLeave:r})}function w(){return h?g.jsx(WS,{activeStartDate:t,calendarType:s,onClickWeekNumber:f,onMouseLeave:r,showFixedNumberOfWeeks:o}):null}function S(){return g.jsx(RS,Us({calendarType:s},p))}var _="react-calendar__month-view";return g.jsx("div",{className:Lt(_,h?"".concat(_,"--weekNumbers"):""),children:g.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[w(),g.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[y(),S()]})]})})}var $r=function(){return $r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},$r.apply(this,arguments)},xa="react-calendar",Ta=["century","decade","year","month"],YS=["decade","year","month","day"],Oc=new Date;Oc.setFullYear(1,0,1);Oc.setHours(0,0,0,0);var VS=new Date(864e13);function vo(e){return e instanceof Date?e:new Date(e)}function ch(e,t){return Ta.slice(Ta.indexOf(e),Ta.indexOf(t)+1)}function qS(e,t,n){var r=ch(t,n);return r.indexOf(e)!==-1}function jc(e,t,n){return e&&qS(e,t,n)?e:n}function lh(e){var t=Ta.indexOf(e);return YS[t]}function KS(e,t){var n=Array.isArray(e)?e[t]:e;if(!n)return null;var r=vo(n);if(Number.isNaN(r.getTime()))throw new Error("Invalid date: ".concat(e));return r}function uh(e,t){var n=e.value,r=e.minDate,o=e.maxDate,i=e.maxDetail,s=KS(n,t);if(!s)return null;var l=lh(i),u=function(){switch(t){case 0:return yr(l,s);case 1:return nh(l,s);default:throw new Error("Invalid index value: ".concat(t))}}();return vS(u,r,o)}var Pc=function(e){return uh(e,0)},dh=function(e){return uh(e,1)},US=function(e){return[Pc,dh].map(function(t){return t(e)})};function fh(e){var t=e.maxDate,n=e.maxDetail,r=e.minDate,o=e.minDetail,i=e.value,s=e.view,l=jc(s,o,n),u=Pc({value:i,minDate:r,maxDate:t,maxDetail:n})||new Date;return yr(l,u)}function XS(e){var t=e.activeStartDate,n=e.defaultActiveStartDate,r=e.defaultValue,o=e.defaultView,i=e.maxDate,s=e.maxDetail,l=e.minDate,u=e.minDetail,f=e.value,h=e.view,p=jc(h,u,s),y=t||n;return y?yr(p,y):fh({maxDate:i,maxDetail:s,minDate:l,minDetail:u,value:f||r,view:h||o})}function as(e){return e&&(!Array.isArray(e)||e.length===1)}function Sa(e,t){return e instanceof Date&&t instanceof Date&&e.getTime()===t.getTime()}var is=b.forwardRef(function(t,n){var r=t.activeStartDate,o=t.allowPartialRange,i=t.calendarType,s=t.className,l=t.defaultActiveStartDate,u=t.defaultValue,f=t.defaultView,h=t.formatDay,p=t.formatLongDate,y=t.formatMonth,w=t.formatMonthYear,S=t.formatShortWeekday,_=t.formatWeekday,N=t.formatYear,C=t.goToRangeStartOnSelect,R=C===void 0?!0:C,I=t.inputRef,T=t.locale,U=t.maxDate,q=U===void 0?VS:U,V=t.maxDetail,J=V===void 0?"month":V,X=t.minDate,ee=X===void 0?Oc:X,K=t.minDetail,re=K===void 0?"century":K,se=t.navigationAriaLabel,k=t.navigationAriaLive,M=t.navigationLabel,j=t.next2AriaLabel,G=t.next2Label,ae=t.nextAriaLabel,P=t.nextLabel,Q=t.onActiveStartDateChange,oe=t.onChange,ie=t.onClickDay,de=t.onClickDecade,ye=t.onClickMonth,_e=t.onClickWeekNumber,De=t.onClickYear,Oe=t.onDrillDown,Ie=t.onDrillUp,fe=t.onViewChange,Re=t.prev2AriaLabel,Ze=t.prev2Label,Pe=t.prevAriaLabel,Qe=t.prevLabel,Le=t.returnValue,Be=Le===void 0?"start":Le,Ue=t.selectRange,He=t.showDoubleView,Te=t.showFixedNumberOfWeeks,ut=t.showNavigation,yt=ut===void 0?!0:ut,mt=t.showNeighboringCentury,Bt=t.showNeighboringDecade,bt=t.showNeighboringMonth,Et=bt===void 0?!0:bt,Nt=t.showWeekNumbers,pt=t.tileClassName,Pt=t.tileContent,Ct=t.tileDisabled,ce=t.value,ve=t.view,ue=b.useState(l),me=ue[0],Ee=ue[1],Ne=b.useState(null),he=Ne[0],Me=Ne[1],Je=b.useState(Array.isArray(u)?u.map(function(Fe){return Fe!==null?vo(Fe):null}):u!=null?vo(u):null),nt=Je[0],be=Je[1],$t=b.useState(f),In=$t[0],vn=$t[1],rt=r||me||XS({activeStartDate:r,defaultActiveStartDate:l,defaultValue:u,defaultView:f,maxDate:q,maxDetail:J,minDate:ee,minDetail:re,value:ce,view:ve}),gt=function(){var Fe=function(){return Ue&&as(nt)?nt:ce!==void 0?ce:nt}();return Fe?Array.isArray(Fe)?Fe.map(function(qe){return qe!==null?vo(qe):null}):Fe!==null?vo(Fe):null:null}(),An=lh(J),et=jc(ve||In,re,J),vt=ch(re,J),an=Ue?he:null,wn=vt.indexOf(et)<vt.length-1,bn=vt.indexOf(et)>0,Xe=b.useCallback(function(Fe){var qe=function(){switch(Be){case"start":return Pc;case"end":return dh;case"range":return US;default:throw new Error("Invalid returnValue.")}}();return qe({maxDate:q,maxDetail:J,minDate:ee,value:Fe})},[q,J,ee,Be]),st=b.useCallback(function(Fe,qe){Ee(Fe);var ot={action:qe,activeStartDate:Fe,value:gt,view:et};Q&&!Sa(rt,Fe)&&Q(ot)},[rt,Q,gt,et]),$n=b.useCallback(function(Fe,qe){var ot=function(){switch(et){case"century":return de;case"decade":return De;case"year":return ye;case"month":return ie;default:throw new Error("Invalid view: ".concat(et,"."))}}();ot&&ot(Fe,qe)},[ie,de,ye,De,et]),sn=b.useCallback(function(Fe,qe){if(wn){$n(Fe,qe);var ot=vt[vt.indexOf(et)+1];if(!ot)throw new Error("Attempted to drill down from the lowest view.");Ee(Fe),vn(ot);var ft={action:"drillDown",activeStartDate:Fe,value:gt,view:ot};Q&&!Sa(rt,Fe)&&Q(ft),fe&&et!==ot&&fe(ft),Oe&&Oe(ft)}},[rt,wn,Q,$n,Oe,fe,gt,et,vt]),cn=b.useCallback(function(){if(bn){var Fe=vt[vt.indexOf(et)-1];if(!Fe)throw new Error("Attempted to drill up from the highest view.");var qe=yr(Fe,rt);Ee(qe),vn(Fe);var ot={action:"drillUp",activeStartDate:qe,value:gt,view:Fe};Q&&!Sa(rt,qe)&&Q(ot),fe&&et!==Fe&&fe(ot),Ie&&Ie(ot)}},[rt,bn,Q,Ie,fe,gt,et,vt]),ln=b.useCallback(function(Fe,qe){var ot=gt;$n(Fe,qe);var ft=Ue&&!as(ot),Tt;if(Ue)if(ft)Tt=yr(An,Fe);else{if(!ot)throw new Error("previousValue is required");if(Array.isArray(ot))throw new Error("previousValue must not be an array");Tt=hS(An,ot,Fe)}else Tt=Xe(Fe);var xn=!Ue||ft||R?fh({maxDate:q,maxDetail:J,minDate:ee,minDetail:re,value:Tt,view:et}):null;qe.persist(),Ee(xn),be(Tt);var at={action:"onChange",activeStartDate:xn,value:Tt,view:et};if(Q&&!Sa(rt,xn)&&Q(at),oe)if(Ue){var qt=as(Tt);if(!qt)oe(Tt||null,qe);else if(o){if(Array.isArray(Tt))throw new Error("value must not be an array");oe([Tt||null,null],qe)}}else oe(Tt||null,qe)},[rt,o,Xe,R,q,J,ee,re,Q,oe,$n,Ue,gt,An,et]);function Kr(Fe){Me(Fe)}function Rt(){Me(null)}b.useImperativeHandle(n,function(){return{activeStartDate:rt,drillDown:sn,drillUp:cn,onChange:ln,setActiveStartDate:st,value:gt,view:et}},[rt,sn,cn,ln,st,gt,et]);function Zt(Fe){var qe=Fe?th(et,rt):yr(et,rt),ot=wn?sn:ln,ft={activeStartDate:qe,hover:an,locale:T,maxDate:q,minDate:ee,onClick:ot,onMouseOver:Ue?Kr:void 0,tileClassName:pt,tileContent:Pt,tileDisabled:Ct,value:gt,valueType:An};switch(et){case"century":return g.jsx(ES,$r({formatYear:N,showNeighboringCentury:mt},ft));case"decade":return g.jsx(DS,$r({formatYear:N,showNeighboringDecade:Bt},ft));case"year":return g.jsx(IS,$r({formatMonth:y,formatMonthYear:w},ft));case"month":return g.jsx(zS,$r({calendarType:i,formatDay:h,formatLongDate:p,formatShortWeekday:S,formatWeekday:_,onClickWeekNumber:_e,onMouseLeave:Ue?Rt:void 0,showFixedNumberOfWeeks:typeof Te<"u"?Te:He,showNeighboringMonth:Et,showWeekNumbers:Nt},ft));default:throw new Error("Invalid view: ".concat(et,"."))}}function Ht(){return yt?g.jsx(gS,{activeStartDate:rt,drillUp:cn,formatMonthYear:w,formatYear:N,locale:T,maxDate:q,minDate:ee,navigationAriaLabel:se,navigationAriaLive:k,navigationLabel:M,next2AriaLabel:j,next2Label:G,nextAriaLabel:ae,nextLabel:P,prev2AriaLabel:Re,prev2Label:Ze,prevAriaLabel:Pe,prevLabel:Qe,setActiveStartDate:st,showDoubleView:He,view:et,views:vt}):null}var Rn=Array.isArray(gt)?gt:[gt];return g.jsxs("div",{className:Lt(xa,Ue&&Rn.length===1&&"".concat(xa,"--selectRange"),He&&"".concat(xa,"--doubleView"),s),ref:I,children:[Ht(),g.jsxs("div",{className:"".concat(xa,"__viewContainer"),onBlur:Ue?Rt:void 0,onMouseLeave:Ue?Rt:void 0,children:[Zt(),He?Zt(!0):null]})]})});function GS({onSelect:e,onClose:t,showTime:n=!0,isBetweenMode:r=!1}){const[o,i]=b.useState(new Date),[s,l]=b.useState(new Date),[u,f]=b.useState(It(new Date,"HH")),[h,p]=b.useState(It(new Date,"mm")),[y,w]=b.useState(It(new Date,"ss")),[S,_]=b.useState(It(new Date,"HH")),[N,C]=b.useState(It(new Date,"mm")),[R,I]=b.useState(It(new Date,"ss")),[T,U]=b.useState(!1),[q,V]=b.useState(!1),J=b.useRef(null);b.useEffect(()=>{function K(re){J.current&&!J.current.contains(re.target)&&t()}return document.addEventListener("mousedown",K),()=>document.removeEventListener("mousedown",K)},[t]),b.useEffect(()=>{function K(re){re.key==="Enter"&&(re.preventDefault(),re.stopPropagation(),X(),t())}return document.addEventListener("keydown",K),()=>document.removeEventListener("keydown",K)},[o,s,u,h,y,S,N,R,r,t]);const X=()=>{if(r){const K=new Date(o);K.setHours(parseInt(u),parseInt(h),parseInt(y));const re=new Date(s);re.setHours(parseInt(S),parseInt(N),parseInt(R)),e({start:K,end:re})}else{const K=new Date(o);K.setHours(parseInt(u),parseInt(h),parseInt(y)),e({start:K})}t()},ee=({label:K,hours:re,minutes:se,seconds:k,setHours:M,setMinutes:j,setSeconds:G})=>g.jsxs("div",{className:"flex flex-col gap-2",children:[g.jsx("div",{className:"text-sm font-medium text-gray-700",children:K}),g.jsxs("div",{className:"flex justify-between items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"number",min:"0",max:"23",value:re,onChange:ae=>M(ae.target.value.padStart(2,"0")),className:"w-16 px-3 py-2 bg-white border rounded-md text-center text-lg font-medium text-gray-700"}),g.jsx("span",{className:"text-gray-500 text-sm",children:"hrs"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"number",min:"0",max:"59",value:se,onChange:ae=>j(ae.target.value.padStart(2,"0")),className:"w-16 px-3 py-2 bg-white border rounded-md text-center text-lg font-medium text-gray-700"}),g.jsx("span",{className:"text-gray-500 text-sm",children:"min"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"number",min:"0",max:"59",value:k,onChange:ae=>G(ae.target.value.padStart(2,"0")),className:"w-16 px-3 py-2 bg-white border rounded-md text-center text-lg font-medium text-gray-700"}),g.jsx("span",{className:"text-gray-500 text-sm",children:"sec"})]})]})]});return g.jsxs("div",{ref:J,className:"bg-white rounded-lg shadow-xl p-4 w-[400px]",style:{marginTop:"0.5rem"},children:[g.jsxs("div",{className:"flex items-center justify-between mb-4 border-b pb-2",children:[g.jsx("h3",{className:"text-lg font-medium text-gray-700",children:r?"Select Date Range":"Select Date"}),g.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:"✕"})]}),r?g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsxs("button",{onClick:()=>U(!T),className:"flex items-center gap-2 hover:bg-gray-50 px-2 py-1 rounded-md",children:[g.jsx("span",{className:"text-gray-600",children:"📅"}),g.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Start: ",It(o,"EEE MMM dd yyyy")]})]}),T&&g.jsx(is,{onChange:K=>{i(K),U(!1)},value:o,className:"border-0 mt-2"}),n&&g.jsx(ee,{label:"Start Time",hours:u,minutes:h,seconds:y,setHours:f,setMinutes:p,setSeconds:w})]}),g.jsxs("div",{children:[g.jsxs("button",{onClick:()=>V(!q),className:"flex items-center gap-2 hover:bg-gray-50 px-2 py-1 rounded-md",children:[g.jsx("span",{className:"text-gray-600",children:"📅"}),g.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["End: ",It(s,"EEE MMM dd yyyy")]})]}),q&&g.jsx(is,{onChange:K=>{l(K),V(!1)},value:s,className:"border-0 mt-2"}),n&&g.jsx(ee,{label:"End Time",hours:S,minutes:N,seconds:R,setHours:_,setMinutes:C,setSeconds:I})]})]}):g.jsxs(g.Fragment,{children:[g.jsxs("button",{onClick:()=>U(!T),className:"flex items-center gap-2 hover:bg-gray-50 px-2 py-1 rounded-md mb-4",children:[g.jsx("span",{className:"text-gray-600",children:"📅"}),g.jsx("span",{className:"text-lg font-medium text-gray-700",children:It(o,"EEE MMM dd yyyy")})]}),T&&g.jsx("div",{className:"mb-4",children:g.jsx(is,{onChange:K=>{i(K),U(!1)},value:o,className:"border-0"})}),n&&g.jsx(ee,{label:"Time",hours:u,minutes:h,seconds:y,setHours:f,setMinutes:p,setSeconds:w})]}),g.jsx("button",{onClick:X,className:"w-full mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Apply"})]})}function ZS({isOpen:e,onClose:t}){const[n,r]=b.useState([]),[o,i]=b.useState(""),[s,l]=b.useState([]),[u,f]=b.useState("");b.useEffect(()=>{e&&(async()=>{const N=await Oo("namespaces"),C=await Oo("searchParameters");N&&r(N),C&&l(C)})()},[e]);const h=async()=>{await Ns("namespaces",n),await Ns("searchParameters",s),t()},p=()=>{o&&!n.includes(o)&&(r([...n,o]),i(""))},y=_=>{r(n.filter((N,C)=>C!==_))},w=()=>{const _=u.split(",").map(N=>N.trim()).filter(N=>N&&!s.includes(N));_.length&&(l([...s,..._]),f(""))},S=_=>{l(s.filter((N,C)=>C!==_))};return e?g.jsxs(Ms,{open:e,onClose:t,className:"relative z-[100]",children:[g.jsx("div",{className:"fixed inset-0","aria-hidden":"true"}),g.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:g.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:g.jsxs(Ms.Panel,{className:"w-[600px] transform overflow-hidden rounded-lg bg-white text-left align-middle shadow-xl transition-all",children:[g.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[g.jsx("h2",{className:"text-xl font-semibold",children:"Search Settings"}),g.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full","aria-label":"Close",children:g.jsx(pr,{size:20})})]}),g.jsxs("div",{className:"p-6 overflow-y-auto",children:[g.jsxs("div",{className:"mb-6",children:[g.jsx("h3",{className:"text-lg font-medium mb-2",children:"Namespaces"}),g.jsxs("div",{className:"flex gap-2 mb-2",children:[g.jsx("input",{type:"text",value:o,onChange:_=>i(_.target.value),onKeyPress:_=>_.key==="Enter"&&p(),placeholder:"Add namespace...",className:"flex-1 p-2 border rounded"}),g.jsx("button",{onClick:p,className:"p-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:g.jsx(Ul,{size:20})})]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((_,N)=>g.jsxs("div",{className:"bg-gray-100 px-3 py-1 rounded-full flex items-center gap-2",children:[g.jsx("span",{children:_}),g.jsx("button",{onClick:()=>y(N),className:"hover:text-red-500",children:g.jsx(pr,{size:16})})]},N))})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-medium mb-2",children:"Search Parameters"}),g.jsxs("div",{className:"flex gap-2 mb-2",children:[g.jsx("input",{type:"text",value:u,onChange:_=>f(_.target.value),onKeyPress:_=>_.key==="Enter"&&w(),placeholder:"Add parameters (comma-separated)...",className:"flex-1 p-2 border rounded"}),g.jsx("button",{onClick:w,className:"p-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:g.jsx(Ul,{size:20})})]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:s.map((_,N)=>g.jsxs("div",{className:"bg-gray-100 px-3 py-1 rounded-full flex items-center gap-2",children:[g.jsx("span",{children:_}),g.jsx("button",{onClick:()=>S(N),className:"hover:text-red-500",children:g.jsx(pr,{size:16})})]},N))})]})]}),g.jsxs("div",{className:"p-4 border-t flex justify-end gap-2",children:[g.jsx("button",{onClick:t,className:"px-4 py-2 border rounded hover:bg-gray-50",children:"Cancel"}),g.jsx("button",{onClick:h,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Save"})]})]})})})]}):null}const QS=async(e,t,n)=>{n||(n="");const r=await fetch(`http://localhost:7531/workflow?namespace=${e}&id=${t}&runId=${n}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()},JS=async()=>{try{return(await fetch("http://localhost:7531/health",{method:"GET"})).status===200}catch{return!1}},Yo=new Set,hh=e=>{Yo.add(e),window.dispatchEvent(new CustomEvent("workflow-loading-change",{detail:{workflowId:e,isLoading:!0}}))},mh=e=>{Yo.delete(e),window.dispatchEvent(new CustomEvent("workflow-loading-change",{detail:{workflowId:e,isLoading:!1}}))};function e_(e){return Yo.has(e)}async function Xs(e,t,n,r=0){if(Yo.has(t))return n;const o=[{id:t,runId:n,workflowTaskCompletedEventId:"-1",depth:r}],i=new Set;for(;o.length>0;){const{id:s,runId:l,workflowTaskCompletedEventId:u,depth:f}=o.shift();if(i.has(s))continue;const h=await Ro(s,l);if(h&&!h.isPlaceholder){i.add(s);continue}hh(s);try{const p=await QS(e,s,l);i.add(s);const y=[];for(const w of p)w.type==="workflow"?await Es({...w,workflowTaskCompletedEventId:u,isPlaceholder:!1}):w.type==="childWorkflow"?(y.push({workflowId:w.workflowId,workflowRunId:w.runId,workflowTaskCompletedEventId:w.workflowTaskCompletedEventId}),await Es({...w,type:"workflow",isPlaceholder:!0})):w.type==="activity"&&await uf(w);f>0&&y.length>0&&y.forEach(w=>{o.push({id:w.workflowId,runId:w.workflowRunId,workflowTaskCompletedEventId:w.workflowTaskCompletedEventId,depth:f-1})})}catch(p){console.error("Error processing workflow:",p)}finally{mh(s)}}return n}async function t_(e,t,n){try{hh(t);const r=await pc(t,n),o=[];for(const s of r){const l=s.workflowId;if(Yo.has(l))continue;const u=await Ro(l,n);u&&!u.isPlaceholder||o.push(s)}const i=o.map(async s=>{try{await Xs(e,s.workflowId,s.runId,1)}catch(l){console.error("Error loading workflow:",l)}});await Promise.all(i)}catch(r){console.error("Error checking child workflow data:",r)}finally{mh(t)}}const n_=async(e,t)=>{const n=await fetch(`http://localhost:7531/search?namespace=${e}&query=${encodeURIComponent(t)}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return n.json()};function r_({isOpen:e,onClose:t}){const[n,r]=b.useState(""),[o,i]=b.useState([]),[s,l]=b.useState([]),[u,f]=b.useState(!1),[h,p]=b.useState(-1),[y,w]=b.useState(!1),[S,_]=b.useState(!1),N=B.useRef(null),[C,R]=b.useState(null),[I,T]=b.useState(null),U=b.useRef(null),[q,V]=b.useState(!1),[J,X]=b.useState([]),[ee,K]=b.useState([]),[re,se]=b.useState(""),[k,M]=b.useState([]),[j,G]=b.useState(1),[ae,P]=b.useState(1),[Q,oe]=b.useState([{id:"status",label:"Status",width:120},{id:"taskQueue",label:"Task Queue",width:150},{id:"workflowType",label:"Workflow Type",width:180},{id:"execution",label:"Workflow ID",width:200},{id:"execution",label:"Run ID",width:200},{id:"startTime",label:"Start Time",width:180},{id:"closeTime",label:"Close Time",width:180}]),[ie,de]=b.useState(!1),[ye,_e]=b.useState(!1),De=async()=>{const ce=await Oo("searchParameters");if(ce){const ve=ce.map(ue=>({id:ue,label:ue,type:"text"}));X(ve)}},Oe=async()=>{const ce=await Oo("namespaces")||[];K(ce),!re&&ce.length>0&&se(ce[0])};b.useEffect(()=>{e&&De()},[e]),b.useEffect(()=>{Oe()},[e]);const Ie=ce=>{if(ce.type==="datetime")return ba.map(ue=>({text:`${ce.label} ${ue.label}`,disabled:!1}));if(ce.type==="status"){const ue=o.filter(me=>me.field==="ExecutionStatus").map(me=>me.value);return Ji.filter(me=>!ue.includes(me.value)).map(me=>({text:`${ce.label} = '${me.value}'`,displayText:me.value,disabled:!1,color:me.color}))}return ou.filter(ue=>["equals","notEquals","starts_with"].includes(ue.id)).map(ue=>({text:`${ce.label} ${ue.label}`,disabled:!1}))},fe=()=>o.filter(ce=>ce.field==="ExecutionStatus").flatMap(ce=>{const ve=ce.raw.match(/Status\s*=\s*'([^']+)'/gi);return ve?ve.map(ue=>{const me=ue.match(/Status\s*=\s*['"]([^'"]+)['"]/i);return(me==null?void 0:me[1])??""}):[]}),Re=ce=>{const ve=ce.toLowerCase().trim();if(ve.startsWith("status")){const Ee=fe();return Ji.filter(Ne=>!Ee.includes(Ne.value)).map(Ne=>{var he;return{text:`Status = '${Ne.value}'`,fullText:o.some(Me=>Me.field==="ExecutionStatus")?`${(he=o.find(Me=>Me.field==="ExecutionStatus"))==null?void 0:he.raw} OR Status = '${Ne.value}'`:`Status = '${Ne.value}'`,displayText:Ne.value,disabled:!1,color:Ne.color}})}if(y)return[];const ue=[...En,...J],me=new Set(o.map(Ee=>Ee.field));return ue.filter(Ee=>Ee.label.toLowerCase().includes(ve)).map(Ee=>({text:Ee.label,disabled:Ee.type!=="status"&&me.has(Ee.id)}))},Ze=ce=>{const ve=ce.target.value;if(r(ve),ve.endsWith(" ")){const ue=ve.trim().split(/\s+/);if(ue.length===2){const[me,Ee]=ue,Ne=En.find(Me=>me.toLowerCase()===Me.label.toLowerCase()&&Me.type==="datetime"),he=ba.some(Me=>Me.label===Ee||Me.alternatives.includes(Ee));Ne&&he&&(T(Ne.label),yt())}}if((!ve.trim()||ve.trim().toLowerCase()==="status")&&_(!1),!S||ve.trim().toLowerCase()==="status"){p(-1);const ue=Re(ve);l(ue),ue.length>0&&p(0)}},Pe=ce=>ce.match(/^Status\s*=\s*['"][^'"]+['"](\s+OR\s+Status\s*=\s*['"][^'"]+['"])*$/i)?{field:"ExecutionStatus",operator:"equals",value:ce,raw:ce,isValid:!0}:null,Qe=ce=>{if(!u){if(ce.key==="Backspace"&&n.length<=1&&_(!1),s.length>0&&!S&&(ce.key==="ArrowDown"?(ce.preventDefault(),p(ve=>ve<s.length-1?ve+1:ve)):ce.key==="ArrowUp"?(ce.preventDefault(),p(ve=>ve>0?ve-1:0)):ce.key==="Enter"&&h>=0&&(ce.preventDefault(),He(s[h]))),ce.key==="Enter"||ce.key==="Tab"){ce.preventDefault();const ve=n.trim();if(ve.length===0&&o.length>0){Be();return}if(ve.toLowerCase().startsWith("status")){const ue=Pe(ve);ue&&(i(me=>[...me.filter(Ee=>Ee.field!=="ExecutionStatus"),ue]),r(""),_(!1),l([]))}else{const ue=Te(ve);ue&&ue.isValid&&(i(me=>[...me,ue]),r(""),_(!1),l([]))}}else if(ce.key==="Backspace"&&n.trim()===""&&o.length>0){ce.preventDefault();const ve=o[o.length-1];ve.field==="ExecutionStatus"?(i(o.filter(ue=>ue.field!=="ExecutionStatus")),r(ve.raw),_(!0),l([])):Ue(o.length-1)}if(ce.key===" "){const ve=n.trim().split(/\s+/),ue=ve[0],me=En.find(Ee=>ue.toLowerCase()===Ee.label.toLowerCase()&&Ee.type==="datetime");if(me&&(T(me.label),ve.length===2)){const Ee=ve[1];ba.some(he=>he.label===Ee||he.alternatives.includes(Ee))&&yt()}}}},Le=ce=>{const[ve,ue]=n.trim().split(/\s+/);if(En.find(Ee=>ve.toLowerCase()===Ee.label.toLowerCase())&&ue){let Ee;if(ue.toLowerCase()==="between"&&ce.start&&ce.end){const Ne=It(ce.start,"yyyy-MM-dd HH:mm:ss"),he=It(ce.end,"yyyy-MM-dd HH:mm:ss"),Me=`${ve} between '${Ne}' and '${he}'`;Ee=Te(Me)}else if(ce.start){const Ne=It(ce.start,"yyyy-MM-dd HH:mm:ss"),he=`${ve} ${ue} '${Ne}'`;Ee=Te(he)}Ee&&(i(Ne=>[...Ne,Ee]),r(""),f(!1),T(null),l([]),p(-1))}},Be=async()=>{const ce=[];o.forEach(ue=>{if(ue.field==="ExecutionStatus"){const me=ue.raw.split(/\s+OR\s+/).map(Ee=>{const Ne=Ee.match(/Status\s*=\s*['"]([^'"]+)['"]/i);return Ne?`\`ExecutionStatus\`="${Ne[1]}"`:null}).filter(Boolean);me.length>0&&ce.push(`(${me.join(" OR ")})`)}else if(ue.operator==="between"&&ue.value){const[me,Ee]=ue.value.split(" and ");ce.push(`\`${ue.field}\` BETWEEN "${me}" AND "${Ee}"`)}else ce.push(`\`${ue.field}\` ${ue.operator} "${ue.value}"`)});const ve=ce.join(" AND ");console.log("searchQuery",ve),de(!0);try{const ue=await n_(re,ve);M(ue.executions||[]),P(Math.min(Math.ceil(ue.executions.length/100),10)),G(1)}catch(ue){console.error("Error executing search:",ue)}finally{de(!1)}},Ue=ce=>{var me;const ve=o[ce],ue=En.find(Ee=>Ee.id===ve.field);if((ue==null?void 0:ue.type)==="datetime"){i(o.filter((Ee,Ne)=>Ne!==ce));return}if(ve.field==="ExecutionStatus"){const Ee=o.filter(Ne=>Ne.field!=="ExecutionStatus");i(Ee),r(ve.raw),_(!0),l([])}else i(o.filter((Ee,Ne)=>Ne!==ce)),r(ve.raw);w(!1),(me=U.current)==null||me.focus()},He=ce=>{var ve;if(!ce.disabled){if(ce.color){const ue=o.filter(Ne=>Ne.field==="ExecutionStatus"),me=o.filter(Ne=>Ne.field!=="ExecutionStatus");let Ee;if(ue.length>0){const Ne=`${ue[0].raw} OR Status = '${ce.displayText}'`;Ee=Pe(Ne)}else Ee=Pe(`Status = '${ce.displayText}'`);if(Ee){const Ne=o.findIndex(Me=>Me.field==="ExecutionStatus"),he=[...me];Ne>=0?he.splice(Ne,0,Ee):he.push(Ee),i(he)}r(""),l([]),_(!1)}else{const ue=ce.text.split(/\s+/);if(r(ce.text+" "),ue.length===2){const[me,Ee]=ue,Ne=En.find(Me=>me.toLowerCase()===Me.label.toLowerCase()&&Me.type==="datetime"),he=ba.some(Me=>Me.label===Ee||Me.alternatives.includes(Ee));Ne&&he&&(T(Ne.label),requestAnimationFrame(()=>{yt()}))}else{const me=En.find(Ee=>Ee.label===ce.text);l(me?Ie(me):[]),p(0),w(!1),f(!1)}}(ve=U.current)==null||ve.focus()}},Te=ce=>{if(!ce.trim())return null;const ve=/^([a-zA-Z]+)\s*(=|!=|>|>=|<|<=|between|starts\s*with)\s*['"]([^'"]+)['"](?:\s+and\s+['"]([^'"]+)['"])?$/,ue=ce.match(ve);if(!ue)return{field:"",operator:"",value:null,raw:ce,isValid:!1};let[,me,Ee,Ne,he]=ue;const Me=En.find(nt=>me.toLowerCase()===nt.label.toLowerCase()),Je=ou.find(nt=>nt.label===Ee||nt.alternatives.includes(Ee.toLowerCase())||nt.searchOperator===Ee);if(!Je)return{field:"",operator:"",value:null,raw:ce,isValid:!1};if((Me==null?void 0:Me.type)==="datetime"){const nt=new Date(Ne);Ne=It(nt,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),he=he?It(new Date(he),"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"):""}return{field:Me?Me.id:me,operator:Je.searchOperator,value:he?`${Ne} and ${he}`:Ne,raw:ce,isValid:!0}},ut=ce=>ce.isValid?ce.field==="ExecutionStatus"||[...En,...J].some(ue=>ue.id.toLowerCase()===ce.field.toLowerCase())?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";B.useEffect(()=>{N.current&&N.current.scrollIntoView({block:"nearest"})},[h]);const yt=()=>{var ue;if(!U.current)return;const ce=(ue=U.current)==null?void 0:ue.getBoundingClientRect(),ve=document.querySelector('[role="dialog"]');if(ce&&ve){const me=ve.getBoundingClientRect(),Ee=(me.width-400)/2;R({x:Ee,y:ce.bottom-me.top+5}),f(!0)}},mt=async()=>{V(!1),await De(),await Oe()},Bt=()=>{l([]),p(-1)},bt=()=>{l([]),p(-1)},Et=(ce,ve)=>{oe(ue=>{const me=[...ue];return me[ce]={...me[ce],width:ve},me})},Nt=ce=>{const ve=Ji.find(ue=>ue.value.toLowerCase()===ce.toLowerCase());return(ve==null?void 0:ve.color)||"gray"},pt=ce=>It(new Date(ce),"yyyy-MM-dd HH:mm:ss"),Pt=()=>{const ce=(j-1)*100,ve=ce+100,ue=k.slice(ce,ve);return g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsx("div",{className:"flex-none px-4 py-3 border-b bg-gray-50 z-[50]",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",ce+1,"-",Math.min(ve,k.length)," of"," ",k.length," results"]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:()=>G(me=>Math.max(1,me-1)),disabled:j===1,className:"p-1.5 rounded hover:bg-gray-200 disabled:opacity-50 disabled:hover:bg-transparent transition-colors",children:g.jsx(nw,{size:16})}),g.jsxs("span",{className:"text-sm font-medium",children:[j," / ",ae]}),g.jsx("button",{onClick:()=>G(me=>Math.min(ae,me+1)),disabled:j===ae,className:"p-1.5 rounded hover:bg-gray-200 disabled:opacity-50 disabled:hover:bg-transparent transition-colors",children:g.jsx(rw,{size:16})})]})]})}),g.jsx("div",{className:"flex-1 overflow-auto",children:g.jsx("div",{className:"inline-block min-w-full align-middle",children:g.jsx("div",{className:"relative",children:g.jsxs("table",{className:"min-w-full border-collapse",children:[g.jsx("thead",{children:g.jsx("tr",{children:Q.map((me,Ee)=>g.jsxs("th",{className:"sticky top-0 border-b border-gray-200 bg-gray-50 z-10",style:{width:me.width},children:[g.jsx("div",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:me.label}),g.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1 cursor-col-resize hover:bg-blue-500 group",onMouseDown:Ne=>{const he=Ne.pageX,Me=me.width,Je=be=>{const $t=be.pageX-he;Et(Ee,Math.max(100,Me+$t))},nt=()=>{document.removeEventListener("mousemove",Je),document.removeEventListener("mouseup",nt)};document.addEventListener("mousemove",Je),document.addEventListener("mouseup",nt)},children:g.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-px bg-gray-200 group-hover:bg-blue-500"})})]},`${me.id}-${Ee}`))})}),g.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:ue.map(me=>g.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[g.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-left",children:g.jsx("div",{className:`inline-flex items-center gap-2 px-2.5 py-1 rounded-full text-xs font-medium
                          ${Nt(me.status)}`,children:me.status})}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:me.taskQueue}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:me.type.name}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium text-left",children:me.execution.workflowId}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 font-mono text-left",children:me.execution.runId}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:pt(me.startTime)}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:me.closeTime?pt(me.closeTime):"—"})]},`${me.execution.workflowId}-${me.execution.runId}`))})]})})})})]})},Ct=g.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[g.jsx("span",{className:"text-gray-700 font-medium",children:"Namespace:"}),g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>_e(!ye),className:"w-64 p-2 border rounded-lg bg-white flex items-center justify-between",children:[g.jsx("span",{children:re}),g.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${ye?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),ye&&g.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-lg shadow-lg",children:ee.map(ce=>g.jsx("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-100 first:rounded-t-lg last:rounded-b-lg",onClick:()=>{se(ce),_e(!1)},children:ce},ce))})]})]});return e?g.jsxs(g.Fragment,{children:[g.jsxs(Ms,{open:e,onClose:t,className:"relative z-50",children:[g.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true",onClick:bt}),g.jsx("div",{className:"fixed inset-0",onClick:bt,children:g.jsx("div",{className:"flex min-h-full items-start justify-center p-4 text-center",children:g.jsxs($f,{className:"bg-white rounded-xl w-full max-w-[95rem] h-[90vh] flex flex-col shadow-2xl relative",onClick:ce=>ce.stopPropagation(),children:[g.jsxs("div",{className:"p-6 flex-none border-b relative",children:[Ct,g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Search settings",onClick:()=>V(!0),children:g.jsx(cw,{size:20,className:"text-gray-600"})}),g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex flex-wrap gap-2 items-center p-2 border rounded-lg bg-gray-50 min-h-[40px]",children:[o.map((ce,ve)=>g.jsxs("div",{className:`px-2 py-1 rounded-md ${ut(ce)} flex items-center gap-1 group`,children:[g.jsx("span",{onClick:()=>Ue(ve),className:"flex-1 cursor-pointer",children:ce.raw}),g.jsx("button",{onClick:ue=>{ue.stopPropagation(),i(me=>me.filter((Ee,Ne)=>Ne!==ve))},className:"text-current opacity-50 hover:opacity-100 transition-opacity","aria-label":"Remove token",children:g.jsx(pr,{size:14})})]},ve)),g.jsx("input",{ref:U,type:"text",value:n,onChange:Ze,onClick:Bt,onKeyDown:Qe,className:"flex-1 min-w-[200px] bg-transparent outline-none",placeholder:o.length>0?"Add another filter...":"Type to search..."})]}),s.length>0&&g.jsx("div",{className:"absolute mt-1 w-1/2 max-h-60 overflow-auto rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[60]",children:s.map((ce,ve)=>g.jsx("button",{ref:ve===h?N:null,className:`relative cursor-default select-none py-2 pl-3 pr-9 w-full text-left transition-colors ${ce.disabled?"text-gray-400":"text-gray-900"} ${ve===h||ce.disabled?"bg-gray-50":"bg-white hover:bg-gray-50"}`,onClick:()=>!ce.disabled&&He(ce),disabled:ce.disabled,children:g.jsx("span",{className:`inline-block truncate ${ce.color?o_(ce.color,!1):""}`,children:ce.displayText||ce.text})},ve))})]}),g.jsx("button",{onClick:Be,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Search"})]})]}),g.jsx("div",{className:"flex-1 overflow-y-auto",children:ie?g.jsx("div",{className:"flex items-center justify-center h-full",children:g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-blue-500"})}):k.length>0?Pt():g.jsx("div",{className:"p-6 text-center text-gray-500",children:"No results to display. Try searching for workflows above."})}),u&&C&&g.jsx("div",{className:"absolute z-[999]",style:{top:"100px"},children:g.jsx(GS,{onSelect:Le,onClose:()=>{f(!1),R(null)},position:C,showTime:!0,isBetweenMode:n.toLowerCase().includes("between")})})]})})})]}),q&&g.jsx(ZS,{isOpen:q,onClose:mt})]}):null}const o_=(e,t)=>!e||t?"":`px-2 py-0.5 rounded ${e}`,a_=({showFocus:e,setShowFocus:t,autoZoomEnabled:n,setAutoZoomEnabled:r,setIsTemporalModalOpen:o,refreshWorkflowData:i,isRefreshing:s=!1,currentWorkflowId:l,onTemporalRootWorkflowDataCollected:u,setIsSearchModalOpen:f,isSearchModalOpen:h})=>{b.useEffect(()=>{(async()=>{const _=await Oo("autoZoomEnabled");_!==void 0&&r(_)})()},[r]);const p=async()=>{const S=!n;r(S),await Ns("autoZoomEnabled",S)},y=()=>{if(console.log("Refreshing root workflow",l),!i){console.log("No refresh function provided");return}if(!l){console.log("No workflow ID provided");return}i(l)},w=async()=>{const S=await bw();S&&await u(S)};return g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsx("button",{onClick:y,className:"p-2",title:"Refresh workflow data from Temporal",children:g.jsx(iw,{className:"h-4 w-4"})}),g.jsx("button",{className:"px-3 py-1 rounded bg-green-500 text-white hover:bg-green-600",onClick:()=>o(!0),children:"Temporal"}),g.jsxs("button",{className:`px-3 py-1 rounded ${n?"bg-green-500 text-white":"bg-gray-200 text-gray-700"}`,onClick:p,children:["Auto Zoom ",n?"On":"Off"]}),g.jsxs("button",{className:"px-3 py-1 rounded bg-gray-200 text-gray-700 hover:bg-gray-300",onClick:()=>t(!e),children:[e?"Hide":"Show"," Focus"]}),g.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 text-gray-700 hover:bg-gray-300",onClick:w,children:"Demo"}),g.jsx("button",{className:"px-3 py-1 rounded bg-blue-500 text-white hover:bg-blue-600",onClick:()=>f(!0),children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(sw,{className:"h-4 w-4"}),"Search"]})}),g.jsx(r_,{isOpen:h,onClose:()=>f(!1)})]})};function i_({id:e,data:t,onClose:n,position:r}){const[o,i]=b.useState("io"),s=b.useRef(null),l=b.useRef(null),[u,f]=b.useState({width:600,height:600}),[h,p]=b.useState(!1),[y,w]=b.useState(!1),S=b.useRef({x:0,y:0,width:0,height:0}),[_,N]=b.useState({x:0,y:0}),[C,R]=b.useState(100);b.useEffect(()=>{t&&t!==l.current&&(i("io"),l.current=t)},[t]),b.useEffect(()=>{const M=s.current;M&&(M.style.display="none",M.scrollTop=0,M.offsetHeight,M.style.display="")},[t,o]),b.useEffect(()=>{R(M=>Math.max(M,100))},[]);const I=M=>{var G;if(!M.target||!(M.target instanceof HTMLElement)||!M.target.closest("[data-drag-handle]"))return;M.preventDefault(),p(!0);const j=(G=s.current)==null?void 0:G.getBoundingClientRect();j&&(S.current={x:M.clientX-j.left,y:M.clientY-j.top,width:u.width,height:u.height}),document.body.style.userSelect="none"},T=M=>{var j,G;M.stopPropagation(),M.preventDefault(),w(!0),S.current={x:M.clientX,y:M.clientY,width:((j=s.current)==null?void 0:j.offsetWidth)||u.width,height:((G=s.current)==null?void 0:G.offsetHeight)||u.height},document.body.style.userSelect="none"};b.useEffect(()=>{const M=G=>{if(!(!h&&!y))if(y&&s.current){const ae=G.clientX-S.current.x,P=G.clientY-S.current.y,Q=Math.max(300,S.current.width+ae),oe=Math.max(400,S.current.height+P);(Q!==u.width||oe!==u.height)&&f({width:Q,height:oe})}else h&&N({x:G.clientX-S.current.x-r.x,y:G.clientY-S.current.y-r.y})},j=()=>{p(!1),w(!1),document.body.style.userSelect=""};return(h||y)&&(window.addEventListener("mousemove",M),window.addEventListener("mouseup",j)),()=>{window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",j)}},[h,y,r]);const U=()=>{if(!r)return{};const M=20,j=window.innerWidth,G=window.innerHeight;let ae=Math.min(Math.max(M,r.x+_.x),j-u.width-M),P=Math.min(Math.max(M,r.y+_.y),G-u.height-M);return{left:ae,top:P}},q=()=>{const M=document.querySelectorAll("[data-node-panel]"),j=Array.from(M).reduce((G,ae)=>{const P=parseInt(window.getComputedStyle(ae).zIndex)||0;return Math.max(G,P)},100);R(j+1)};if(!t||!r)return null;const V=!!(t.lastFailure||t.failure),J=!!(t.scheduleTime||t.startTime||t.endTime),X=!!(t.input||t.result||t.memo&&Object.keys(t.memo).length>0||t.searchAttributes&&Object.keys(t.searchAttributes).length>0),K=(t.type==="workflow"||t.type==="childWorkflow")&&t.namespace&&t.workflowId?`https://cloud.temporal.io/namespaces/${t.namespace}/workflows/${t.workflowId}`:null,re=({tab:M,label:j,disabled:G})=>g.jsx("button",{onClick:()=>!G&&i(M),disabled:G,className:Lt("px-4 py-2 text-sm font-medium transition-colors rounded-t-lg","focus:outline-none",G&&"opacity-50 cursor-not-allowed",o===M?{io:"bg-blue-100 text-blue-800",error:"bg-red-100 text-red-800",time:"bg-purple-100 text-purple-800",common:"bg-green-100 text-green-800"}[M]:"text-gray-600 hover:bg-gray-100"),children:j}),se=()=>{var j;const M="space-y-4 min-h-[300px]";switch(o){case"io":return g.jsxs("div",{className:M,children:[t.input&&g.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto relative",children:[g.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Input"}),g.jsx(k,{content:JSON.stringify(JSON.parse(t.input),null,2)}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap break-all bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.input),null,2)})})]}),t.result&&g.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto relative",children:[g.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Result"}),g.jsx(k,{content:JSON.stringify(JSON.parse(t.result),null,2)}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap break-all bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.result),null,2)})})]}),t.header&&Object.keys(t.header).length>0&&g.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto relative",children:[g.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Header"}),g.jsx(k,{content:JSON.stringify(t.header,null,2)}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap break-all bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(t.header,null,2)})})]}),t.memo&&Object.keys(t.memo).length>0&&g.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto",children:[g.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Memo"}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(t.memo,null,2)})})]}),t.searchAttributes&&Object.keys(t.searchAttributes).length>0&&g.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto",children:[g.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Search Attributes"}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(t.searchAttributes,null,2)})})]})]});case"error":return g.jsxs("div",{className:M,children:[t.lastFailure&&g.jsxs("div",{className:"bg-red-50 p-4 rounded-lg overflow-auto relative",children:[g.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Last Failure"}),g.jsx(k,{content:JSON.stringify(JSON.parse(t.lastFailure),null,2)}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap break-all bg-red-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.lastFailure),null,2)})})]}),t.failure&&g.jsxs("div",{className:"bg-red-50 p-4 rounded-lg overflow-auto relative",children:[g.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Failure"}),g.jsx(k,{content:JSON.stringify(JSON.parse(t.failure),null,2)}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap break-all bg-red-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.failure),null,2)})})]})]});case"time":return g.jsxs("div",{className:M,children:[t.startTime&&t.endTime&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Duration"}),g.jsx("p",{className:"text-purple-700 text-lg font-semibold",children:cf(t.startTime,t.endTime)})]}),t.scheduleTime&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Schedule Time"}),g.jsx("p",{className:"text-purple-700",children:t.scheduleTime})]}),t.startTime&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Start Time"}),g.jsx("p",{className:"text-purple-700",children:t.startTime})]}),t.endTime&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"End Time"}),g.jsx("p",{className:"text-purple-700",children:t.endTime})]}),t.lastStartedTime&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Last Started Time"}),g.jsx("p",{className:"text-purple-700",children:t.lastStartedTime})]}),t.lastAttemptCompleteTime&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Last Attempt Complete Time"}),g.jsx("p",{className:"text-purple-700",children:t.lastAttemptCompleteTime})]}),(t.heartbeatTimeout||t.scheduleToCloseTimeout||t.scheduleToStartTimeout||t.startToCloseTimeout||t.workflowRunTimeout||t.workflowTaskTimeout)&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Timeouts"}),t.heartbeatTimeout&&g.jsxs("p",{className:"text-purple-700",children:["Heartbeat: ",t.heartbeatTimeout]}),t.scheduleToCloseTimeout&&g.jsxs("p",{className:"text-purple-700",children:["Schedule to Close: ",t.scheduleToCloseTimeout]}),t.scheduleToStartTimeout&&g.jsxs("p",{className:"text-purple-700",children:["Schedule to Start: ",t.scheduleToStartTimeout]}),t.startToCloseTimeout&&g.jsxs("p",{className:"text-purple-700",children:["Start to Close: ",t.startToCloseTimeout]}),t.workflowRunTimeout&&g.jsxs("p",{className:"text-purple-700",children:["Workflow Run: ",t.workflowRunTimeout]}),t.workflowTaskTimeout&&g.jsxs("p",{className:"text-purple-700",children:["Workflow Task: ",t.workflowTaskTimeout]})]})]});case"common":return g.jsxs("div",{className:M,children:[g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Basic Information"}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("p",{className:"text-green-700",children:["Type: ",t.type]}),t.activityType&&g.jsxs("p",{className:"text-green-700",children:["Activity Type: ",t.activityType]}),t.workflowType&&g.jsxs("p",{className:"text-green-700",children:["Workflow Type: ",t.workflowType]}),g.jsxs("p",{className:"text-green-700",children:["Status: ",t.status]}),t.namespace&&g.jsxs("p",{className:"text-green-700",children:["Namespace: ",t.namespace]}),t.workflowId&&g.jsxs("p",{className:"text-green-700",children:["Workflow ID: ",t.workflowId]}),(t.workflowRunId||t.runId)&&g.jsxs("p",{className:"text-green-700",children:["Run ID: ",t.workflowRunId||t.runId]}),t.activityId&&g.jsxs("p",{className:"text-green-700",children:["Activity ID: ",t.activityId]}),t.workflowTaskCompletedEventId&&g.jsxs("p",{className:"text-green-700",children:["Workflow Task Completed Event ID:"," ",t.workflowTaskCompletedEventId]})]})]}),t.taskQueue&&g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Task Queue"}),g.jsxs("p",{className:"text-green-700",children:["Name: ",t.taskQueue.name]})]}),t.retryPolicy&&g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Retry Policy"}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("p",{className:"text-green-700",children:["Initial Interval: ",t.retryPolicy.initialInterval]}),g.jsxs("p",{className:"text-green-700",children:["Backoff Coefficient: ",t.retryPolicy.backoffCoefficient]}),g.jsxs("p",{className:"text-green-700",children:["Maximum Interval: ",t.retryPolicy.maximumInterval]}),g.jsxs("p",{className:"text-green-700",children:["Maximum Attempts: ",t.retryPolicy.maximumAttempts]}),((j=t.retryPolicy.nonRetryableErrorTypes)==null?void 0:j.length)>0&&g.jsxs("div",{children:[g.jsx("p",{className:"text-green-700",children:"Non-retryable Error Types:"}),g.jsx("ul",{className:"list-disc pl-4",children:t.retryPolicy.nonRetryableErrorTypes.map((G,ae)=>g.jsx("li",{className:"text-green-700",children:G},ae))})]})]})]}),t.attempts&&g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Attempts"}),g.jsxs("p",{className:"text-green-700",children:["Count: ",t.attempts]})]}),t.lastWorkerIdentity&&g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Worker"}),g.jsxs("p",{className:"text-green-700",children:["Last Identity: ",t.lastWorkerIdentity]})]}),t.workflowReusePolicy&&g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Workflow Reuse Policy"}),g.jsx("p",{className:"text-green-700",children:t.workflowReusePolicy})]})]})}},k=({content:M})=>{const j=()=>{navigator.clipboard.writeText(M)};return g.jsx("button",{onClick:j,className:"absolute top-4 right-4 p-1.5 rounded bg-white/80 hover:bg-white border border-gray-200 transition-colors",title:"Copy to clipboard",children:g.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-600",children:[g.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),g.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})};return g.jsxs("div",{ref:s,"data-node-panel":!0,className:"fixed bg-white rounded-lg shadow-xl border border-gray-200 overflow-hidden",style:{...U(),width:u.width,height:u.height,zIndex:C},onClick:q,children:[g.jsx("button",{onClick:M=>{M.stopPropagation(),n(e)},className:"absolute top-2 right-2 p-1.5 hover:bg-gray-100 rounded-full transition-colors z-50",title:"Close panel",children:g.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-500",children:[g.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),g.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),g.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 p-1.5 cursor-move select-none","data-drag-handle":!0,onMouseDown:I,children:g.jsxs("svg",{width:"20",height:"10",viewBox:"0 0 20 4",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-gray-400 pointer-events-none",children:[g.jsx("circle",{cx:"2",cy:"2",r:"1",fill:"currentColor"}),g.jsx("circle",{cx:"10",cy:"2",r:"1",fill:"currentColor"}),g.jsx("circle",{cx:"18",cy:"2",r:"1",fill:"currentColor"})]})}),(K||t.type==="activity")&&g.jsxs("div",{className:Lt("px-4 py-2 bg-gray-50 border-b",t.type==="activity"&&"pt-6"),children:[g.jsxs("div",{className:"flex items-center justify-between mb-2 pr-8",children:[g.jsx("div",{className:"flex items-center gap-2",children:K&&g.jsxs(g.Fragment,{children:[g.jsxs("svg",{className:"w-4 h-4 text-gray-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("rect",{x:"9",y:"3",width:"6",height:"6",rx:"1"}),g.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),g.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3M6 15v-3h12v3"})]}),g.jsx("a",{href:K,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View in Temporal"})]})}),g.jsxs("div",{className:"flex flex-col items-end",children:[g.jsx("span",{className:"text-xs text-gray-500",children:t.namespace}),t.taskQueue&&g.jsx("span",{className:"text-xs text-gray-500",children:t.taskQueue.name})]})]}),g.jsxs("div",{className:"flex flex-col gap-1",children:[t.workflowType&&g.jsxs("span",{className:"text-xs text-gray-500",children:[g.jsx("span",{className:"font-bold",children:"Type:"})," ",g.jsx("span",{className:"font-bold",children:t.workflowType})]}),t.type==="activity"&&t.activityType&&g.jsxs("span",{className:"text-xs text-gray-500",children:[g.jsx("span",{className:"font-bold",children:"Type:"})," ",g.jsx("span",{className:"font-bold",children:t.activityType})]}),t.workflowId&&t.type!=="activity"&&g.jsx("span",{className:"text-xs text-gray-500 select-all font-mono",children:t.workflowId})]})]}),g.jsxs("div",{className:"border-b flex gap-1 px-2 pt-2 bg-gray-50",children:[g.jsx(re,{tab:"io",label:"Input/Output",disabled:!X}),g.jsx(re,{tab:"error",label:"Error",disabled:!V}),g.jsx(re,{tab:"time",label:"Time",disabled:!J}),g.jsx(re,{tab:"common",label:"Common"})]}),g.jsx("div",{className:"overflow-y-auto",style:{height:"calc(100% - 116px)"},children:g.jsx("div",{className:"p-4",children:se()})}),g.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-se-resize",onMouseDown:T,style:{background:"linear-gradient(135deg, transparent 50%, #CBD5E1 50%)"}})]})}const _a=500,Gs=200,Nu=8,s_=80;function Zs(e){var l,u,f;const t=((l=e.data)==null?void 0:l.title)||"",n=e.id||"",r=n.length>40?n.slice(0,37)+"...":n,o=t.length*Nu,i=r.length*(Nu*.8),s=Math.max(o,i)+s_;return((u=e.data)==null?void 0:u.type)==="workflow"||((f=e.data)==null?void 0:f.type)==="childWorkflow",Math.max(Math.min(Math.max(s,_a*.75),_a),Gs)}function c_(e,t=800,n=100){const r=Zs(e),o=(t-r)/2-n;return e.position={x:o,y:0},e.style={...e.style,width:r},e}function Cu(e,t,n,r,o=200,i=40){var p,y;const s=[...e],l=[...t],u=s.find(w=>w.id===n);if(!u)return console.warn(`Parent node ${n} not found for layout.`),{nodes:s,edges:l};(p=u.style)!=null&&p.width||(u.style={...u.style,width:Zs(u)});const f=u.position.x+(((y=u.style)==null?void 0:y.width)||Gs);let h=u.position.y;return r.sort((w,S)=>{const _=w.data.sortEventTime.localeCompare(S.data.sortEventTime);return _!==0?_:w.data.sortEventId-S.data.sortEventId}),r.forEach((w,S)=>{const _=Zs(w);if(w.style={...w.style,width:_},w.position={x:f+o,y:h},s.push(w),S===0)l.push({id:`${n}->${w.id}`,source:n,sourceHandle:`${n}-right`,target:w.id,targetHandle:`${w.id}-left`});else{const N=r[S-1];l.push({id:`${N.id}->${w.id}`,source:N.id,sourceHandle:`${N.id}-bottom`,target:w.id,targetHandle:`${w.id}-top`,type:"step",animated:!0})}h+=(w.height||80)+i}),{nodes:s,edges:l}}function l_(e,t,n,r,o=100){const i=e.filter(S=>S.id!==n),s=[...t],l=e.find(S=>S.id===n);if(!l)return{nodes:i,edges:s};const u=t.find(S=>S.target===n),f=t.find(S=>S.source===n),h=u==null?void 0:u.source,p=f==null?void 0:f.target,y=r.map((S,_)=>{var N;return{...S,position:{x:l.position.x,y:l.position.y+(_+1)*o},style:{...S.style,width:(N=l.style)==null?void 0:N.width}}}),w=[];if(y.forEach((S,_)=>{_>0&&w.push({id:`${y[_-1].id}->${S.id}`,source:y[_-1].id,target:S.id,sourceHandle:`${y[_-1].id}-bottom`,targetHandle:`${S.id}-top`,type:"step",animated:!0})}),h&&u){w.unshift({id:`${h}->${y[0].id}`,source:h,target:y[0].id,sourceHandle:u.sourceHandle,targetHandle:`${y[0].id}-top`,type:"step",animated:!0});const S=s.findIndex(_=>_.id===u.id);S!==-1&&s.splice(S,1)}if(p&&f){w.push({id:`${y[y.length-1].id}->${p}`,source:y[y.length-1].id,target:p,sourceHandle:`${y[y.length-1].id}-bottom`,targetHandle:f.targetHandle,type:"step",animated:!0});const S=s.findIndex(_=>_.id===f.id);S!==-1&&s.splice(S,1)}return i.push(...y),s.push(...w),{nodes:i,edges:s}}const u_=async e=>{var n,r;const t={nodes:[],edges:[]};for(const o of e)if(o.type==="activity")t.nodes.push({id:`${o.activityId}-${o.workflowId}`,position:{x:0,y:0},type:"workflowNode",data:{...o,title:o.activityType,description:"",type:"activity",count:1,parentNodeId:o.workflowId,workflowTaskCompletedEventId:o.workflowTaskCompletedEventId,payload:(n=o.payload)==null?void 0:n.map(i=>i.data?atob(i.data):void 0)}});else if(o.type==="workflow"||o.type==="childWorkflow"){const i={...o,title:o.workflowType,description:"",type:o.type,count:1,workflowTaskCompletedEventId:o.workflowTaskCompletedEventId,parentNodeId:o.parentWorkflowId,groupComponentIds:[],payload:(r=o.payload)==null?void 0:r.map(s=>s.data?atob(s.data):void 0)};t.nodes.push({id:o.workflowId,position:{x:0,y:0},type:"workflowNode",data:i})}else throw new Error("Invalid item type "+o.type);return d_(t),t};function d_(e){const t={};for(const o of e.nodes){const i=o.data;let s=f_(i);const l=i.title,u=`${s}::${l}`;t[u]||(t[u]={batchKey:s,title:l,nodes:[]}),t[u].nodes.push(o)}const n=[],r=4;for(const o in t){const i=t[o],{nodes:s}=i;if(s.length<r){n.push(...s);continue}const l=s.length;let u=null;for(const y of s){const w=y.data,S=w.startTime??w.scheduleTime;S&&(u===null||S<u)&&(u=S)}const f=s[0],h=f.data,p={...f,position:{...f.position},data:{...h,count:l,batchKey:i.batchKey,groupComponentIds:i.nodes.map(y=>({type:y.data.type,id:y.data.type==="activity"?y.data.activityId:y.data.workflowId,workflowRunId:y.data.workflowRunId||y.data.runId})),nonCompletedStatusExists:i.nodes.some(y=>y.data.status!=="COMPLETED")}};p._earliestTime=u,n.push(p)}n.sort((o,i)=>{const s=o._earliestTime,l=i._earliestTime;return!s&&!l?0:s?l?s.localeCompare(l):-1:1});for(const o of n)delete o._earliestTime;e.nodes=n}function f_(e){return!e.workflowTaskCompletedEventId&&e.type==="workflow"?e.workflowId:parseInt(e.workflowTaskCompletedEventId,10).toString().padStart(10,"0")}const h_=()=>{const[e,t]=b.useState(!0),n=b.useRef(null),r=b.useRef(!0),o=b.useCallback((f,h,p,y=.75,w=800)=>{!f||!r.current||f.setCenter(h,p,{zoom:y,duration:w})},[]),i=b.useCallback(f=>{!f||!r.current||f.fitView({padding:.2,duration:800,minZoom:.4})},[]),s=b.useCallback(f=>{n.current=f},[]),l=b.useCallback(()=>{!n.current||!r.current||n.current.fitView({padding:.2,duration:800,minZoom:.4})},[]),u=b.useCallback(f=>{r.current=f,t(f)},[]);return{autoZoomEnabled:e,setAutoZoomEnabled:u,handleZoom:o,fitView:i,onInit:s,onGraphLoad:l}};function m_(){const[e,t]=b.useState({nodes:[],edges:[],rootWorkflowId:void 0}),[n,r]=B.useState(!1),o=b.useRef(e),i=b.useRef(null),s=.4,{autoZoomEnabled:l,setAutoZoomEnabled:u,handleZoom:f,fitView:h,onInit:p,onGraphLoad:y}=h_();b.useEffect(()=>{o.current=e},[e]);const w=async(I,T)=>{const U=await C(I,T),q=U.nodes.find(K=>K.id===I);if(!q){console.error(`Root node ${I} not found in graph data.`);return}const V=U.nodes.filter(K=>K.id!==I);q.data.isExpanded=!0;const J=c_(q),{nodes:X,edges:ee}=Cu([J],[],I,V,150,20);t({nodes:X,edges:ee,rootWorkflowId:I}),r(!0),setTimeout(y,100)},S=b.useCallback(async(I,T)=>{const{nodes:U,edges:q}=await N(I);return new Promise(V=>{t(J=>{const X=J.nodes.filter(re=>!U.includes(re.id)).map(re=>re.id===I?{...re,data:{...re.data,isExpanded:!1}}:re),ee=J.edges.filter(re=>!q.includes(re.id)),K={nodes:X,edges:ee};return o.current=K,V(K),K})})},[]),_=b.useCallback(async(I,T)=>{try{const U=o.current,q=U.nodes.find(X=>X.id===I);if(!q)return;const V=U.nodes.filter(X=>X.data.type==="workflow"&&X.data.parentWorkflowId===q.data.parentWorkflowId&&X.data.workflowId!==I&&!q.data.groupComponentIds.some(ee=>ee.id===X.id)&&X.data.isExpanded);for(const X of V)await S(X.id,X.data.workflowRunId);const J=await C(I,T);t(X=>{const ee=J.nodes.filter(P=>P.id!==I).map(P=>({...P,data:{...P.data,parentNodeId:I}})),K=X.nodes.map(P=>P.id===I?{...P,data:{...P.data,isExpanded:!0}}:P),{nodes:re,edges:se}=Cu(K,X.edges,I,ee),k=J.edges.map(P=>({...P,id:`${P.id}-${Date.now()}`})),j={nodes:re.map(P=>P.id===I?{...P,data:{...P.data,isLoading:!1}}:P),edges:[...se,...k]};o.current=j;const G=re.find(P=>P.id===I),ae=re.filter(P=>P.data.parentNodeId===I);return G&&setTimeout(()=>{const P=ae.reduce((oe,ie)=>Math.max(oe,ie.position.x),G.position.x),Q=(G.position.x+P)/2;f(i.current,Q,G.position.y)},50),j})}catch(U){console.error("Error expanding child workflow:",U)}},[f,S]),N=async(I,T)=>{const U=o.current.nodes.find(ee=>ee.id===I);if(!U)return console.error(`Root node ${I} not found in graph data.`),{nodes:[],edges:[]};const q=new Set,V=new Set,J=new Set,X=ee=>{J.has(ee)||(J.add(ee),ee!==I&&q.add(ee),o.current.edges.forEach(K=>{var re;if(K.source===ee){const se=o.current.nodes.find(k=>k.id===K.target);if(!se){console.error(`Target node ${K.target} not found in graph data.`);return}(se.data.parentNodeId===I&&!((re=U.data.groupComponentIds)!=null&&re.some(k=>k.id===se.id))||q.has(se.data.parentNodeId))&&(V.add(K.id),X(K.target))}}))};return X(I),{nodes:Array.from(q),edges:Array.from(V)}},C=async(I,T)=>{const U=await Ro(I,T);if(!U)return console.error(`Workflow ${I} not found`),{nodes:[],edges:[]};const q=await df(I,T),V=await pc(I,T),J=[U,...q,...V];J.sort((K,re)=>{const se=K.taskId?parseInt(K.taskId):0,k=re.taskId?parseInt(re.taskId):0;return se-k});const X=await u_(J),ee=V.map(async K=>{try{await t_(K.namespace,K.workflowId,K.runId)}catch(re){console.error(`Error loading child workflow data for ${K.workflowId}:`,re)}});return X.nodes=X.nodes.map(K=>({...K,data:{...K.data,isLoading:e_(K.id)}})),Promise.all(ee).catch(K=>console.error("Error loading child workflows:",K)),X},R=b.useCallback(async I=>{try{const T=o.current.nodes.find(V=>V.id===I);if(!T||!T.data.count)return;const q=(await vw(T.data.groupComponentIds,T.data.workflowId,T.data.workflowRunId||T.data.runId)).map(V=>({id:V.type==="activity"?`${V.activityId}-${V.workflowId}`:V.workflowId,type:"workflowNode",data:{...V,parentWorkflowId:T.data.parentWorkflowId,type:T.data.type,title:V.activityType||V.workflowType,workflowId:V.workflowId,count:1,groupComponentIds:[]},position:{x:0,y:0}}));q.sort((V,J)=>{const X=V.data.taskId||"",ee=J.data.taskId||"";return X.localeCompare(ee)}),t(V=>{const J=new Set,X=M=>{V.edges.forEach(j=>{j.source===M&&(J.add(j.target),X(j.target))})};X(I);const ee=q.length*100;T.data.count=1;const{nodes:K,edges:re}=l_(V.nodes,V.edges,I,q),k={nodes:K.map(M=>J.has(M.id)?{...M,position:{...M.position,y:M.position.y+ee+100}}:M),edges:re};return o.current=k,setTimeout(()=>{f(i.current,T.position.x,T.position.y)},100),k})}catch(T){console.error("Error spreading batch nodes:",T)}},[f]);return b.useEffect(()=>{const I=({detail:{workflowId:T,isLoading:U}})=>{t(q=>{const V=q.nodes.map(J=>J.id===T?{...J,data:{...J.data,isLoading:U}}:J);return{...q,nodes:V}})};return window.addEventListener("workflow-loading-change",I),()=>window.removeEventListener("workflow-loading-change",I)},[]),{graphData:e,setGraphData:t,onTemporalRootWorkflowDataCollected:w,expandChildWorkflowNode:_,collapseChildWorkflowNode:S,isRootLoaded:n,flowInstance:i,MIN_ZOOM:s,onSpreadBatchNodes:R,autoZoomEnabled:l,setAutoZoomEnabled:u,onInit:p}}const p_=(e,t)=>{const n=new Set,r=o=>{n.add(o),e.edges.forEach(i=>{i.source===o&&!n.has(i.target)&&r(i.target)})};return t.forEach(r),Array.from(n)};function g_(e,t){const[n,r]=b.useState(!1),[o,i]=b.useState(null),s=b.useRef(null),l=.4,u=b.useCallback(y=>new Set(p_(e,[y])),[e]),f=b.useCallback(y=>{if(!s.current||!y)return;const w=e.nodes.filter(J=>J.position.x>=y.position.x);if(w.length===0){s.current.setCenter(y.position.x,y.position.y,{zoom:1,duration:800});return}const S=w.reduce((J,X)=>({minX:Math.min(J.minX,X.position.x||0),minY:Math.min(J.minY,X.position.y||0),maxX:Math.max(J.maxX,X.position.x||0),maxY:Math.max(J.maxY,X.position.y||0)}),{minX:y.position.x||0,minY:y.position.y||0,maxX:y.position.x||0,maxY:y.position.y||0});if(Object.values(S).some(isNaN)){console.warn("Invalid bounds detected, falling back to selected node"),s.current.setCenter(y.position.x,y.position.y,{zoom:1,duration:800});return}const _=(S.minX+S.maxX)/2,N=(S.minY+S.maxY)/2,C=100,R=Math.max(S.maxX-S.minX+C*2,100),I=Math.max(S.maxY-S.minY+C*2,100),T=s.current.getViewport(),U=T.width||1e3,q=T.height||800;let V=Math.min(U/R,q/I);V=Math.max(l,Math.min(isNaN(V)?1:V,1.5)),s.current.setCenter(isNaN(_)?y.position.x:_,isNaN(N)?y.position.y:N,{zoom:V,duration:800})},[e.nodes]),h=b.useCallback(y=>{if(i(y),!y){t(_=>({..._,nodes:_.nodes.map(N=>({...N,style:{...N.style,opacity:1}}))})),s.current&&s.current.fitView({padding:.2,minZoom:l,duration:800});return}const w=u(y),S=e.nodes.find(_=>_.id===y);t(_=>({..._,nodes:_.nodes.map(N=>({...N,style:{...N.style,opacity:w.has(N.id)?1:.2}}))})),s.current&&S&&setTimeout(()=>{f(S)},50)},[e,t,u,f]),p=b.useCallback(()=>{i(null),t(y=>({...y,nodes:y.nodes.map(w=>({...w,style:{...w.style,opacity:1}}))})),s.current&&s.current.fitView({padding:.2,minZoom:l,duration:800})},[t]);return{showFocus:n,setShowFocus:r,selectedFocusedWorkflow:o,handleFocusChange:h,handleFocusReset:p,flowInstance:s}}function y_({onTemporalRootWorkflowDataCollected:e}){const[t,n]=b.useState(!1),[r,o]=b.useState(!1),i=async(u,f)=>{const h=await pc(u,f);for(const y of h)await i(y.workflowId,f);const p=await df(u,f);for(const y of p)await yw(u,y.activityId,f);await pw(u,f)};return{isTemporalModalOpen:t,setIsTemporalModalOpen:n,onTemporalModalSubmit:async u=>{if(!await JS())throw new Error("The server is not running. Please start the server and try again.");const h=await Xs(u.namespace,u.workflowId,u.runId,2);n(!1),await e(u.workflowId,h)},refreshWorkflowData:async(u,f)=>{try{o(!0);const h=await Ro(u,f);if(!h){console.error("Workflow not found for refresh");return}await i(u,f);const p=await Xs(h.namespace,u,f,2);await e(u,p)}catch(h){console.error("Error refreshing workflow data:",h)}finally{o(!1)}},isRefreshing:r}}function v_({isOpen:e,onClose:t,onSubmit:n}){const[r,o]=b.useState({namespace:"",workflowId:""}),[i,s]=b.useState(!1),[l,u]=b.useState(null);if(!e)return null;const f=async h=>{h.preventDefault(),s(!0),u(null);try{await n(r),t()}catch(p){u(p instanceof Error?p.message:"An error occurred while fetching workflow data")}finally{s(!1)}};return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[g.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[g.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Temporal Workflow Data"}),g.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:g.jsx(pr,{className:"w-5 h-5 text-gray-500"})})]}),g.jsxs("form",{onSubmit:f,className:"p-4 space-y-4",children:[l&&g.jsx("div",{className:"p-3 bg-red-100 text-red-700 rounded-md text-sm",children:l}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Namespace"}),g.jsx("input",{type:"text",value:r.namespace,onChange:h=>o(p=>({...p,namespace:h.target.value})),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:i})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Workflow ID"}),g.jsx("input",{type:"text",value:r.workflowId,onChange:h=>o(p=>({...p,workflowId:h.target.value})),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:i})]}),g.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t mt-4",children:[g.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",disabled:i,children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-500 rounded-md hover:bg-blue-600 transition-colors disabled:bg-blue-300",disabled:i,children:i?"Loading...":"Get Data"})]})]})]})})}function w_(){const{graphData:e,setGraphData:t,onTemporalRootWorkflowDataCollected:n,expandChildWorkflowNode:r,collapseChildWorkflowNode:o,isRootLoaded:i,flowInstance:s,MIN_ZOOM:l,onSpreadBatchNodes:u,autoZoomEnabled:f,setAutoZoomEnabled:h,onInit:p}=m_(),{showFocus:y,setShowFocus:w,selectedFocusedWorkflow:S,handleFocusChange:_,handleFocusReset:N,flowInstance:C}=g_(e,t),{isTemporalModalOpen:R,setIsTemporalModalOpen:I,onTemporalModalSubmit:T,refreshWorkflowData:U,isRefreshing:q}=y_({onTemporalRootWorkflowDataCollected:n}),[V,J]=B.useState(null),[X,ee]=B.useState(!1),[K,re]=b.useState(!0),[se,k]=b.useState(!1),M=B.useRef(!1),[j,G]=b.useState([]),ae=(ie,de)=>{const ye=ie.type==="activity"?ie.activityId:ie.workflowId;ye&&G(_e=>_e.find(Oe=>Oe.id===ye)?_e:[..._e,{id:ye,node:ie,position:de}])},P=ie=>{G(de=>de.filter(ye=>ye.id!==ie))},Q=b.useMemo(()=>({workflowNode:ie=>g.jsx(dw,{...ie,expandChildWorkflowNode:r,collapseChildWorkflowNode:o,onSpreadBatchNodes:u,onShowNodeData:ae})}),[i]),oe=B.useCallback(ie=>{t(de=>({...de,nodes:Bd(ie,de.nodes)}))},[t]);return B.useEffect(()=>{const ie=new URLSearchParams(window.location.search),de=decodeURIComponent(ie.get("id")||""),ye=ie.get("namespace"),_e=ie.get("runID");J(null),(async()=>{if(!M.current)if(M.current=!0,de&&ye&&_e){ee(!0);try{await T({workflowId:de,namespace:ye,runId:_e})}catch(Oe){console.error("Error loading workflow from URL params:",Oe),J(Oe instanceof Error?Oe.message:"An error occurred while loading the workflow")}finally{ee(!1)}}else J("Invalid URL parameters"),ee(!1)})()},[]),g.jsxs("div",{className:"w-screen h-screen flex flex-col bg-gray-50",children:[X&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-xl flex items-center space-x-3",children:[g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),g.jsx("div",{className:"text-gray-700",children:"Loading workflow data..."})]})}),V&&g.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[g.jsx("strong",{className:"font-bold",children:"Error: "}),g.jsx("span",{className:"block sm:inline",children:V}),g.jsxs("button",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",onClick:()=>J(null),children:[g.jsx("span",{className:"sr-only",children:"Dismiss"}),g.jsx(pr,{className:"h-5 w-5"})]})]}),g.jsx("div",{className:"flex-grow h-full",children:g.jsxs(tf,{nodes:e.nodes,edges:e.edges,onNodesChange:oe,nodeTypes:Q,fitView:!1,minZoom:l,className:"bg-gray-50",onInit:ie=>{s.current=ie,C.current=ie,p(ie)},nodesDraggable:!1,edgesUpdatable:!1,children:[g.jsx(Jv,{}),g.jsx(Kv,{}),g.jsx(No,{position:"bottom-right",className:"flex items-center gap-2 bg-transparent z-10 mb-2 mr-2",children:g.jsxs("button",{onClick:()=>re(!K),className:"bg-blue-500 px-3 py-1 rounded-lg shadow-lg hover:bg-blue-600 text-white transition-colors",children:[K?"Hide":"Show"," Minimap"]})}),K&&g.jsx(Wv,{zoomable:!0,pannable:!0,className:"bg-white rounded-lg shadow-lg",style:{backgroundColor:"white",width:300,height:200},maskColor:"rgba(0, 0, 0, 0.1)",nodeColor:"#aaa",nodeStrokeWidth:3,nodeBorderRadius:2}),g.jsx(No,{position:"top-right",className:"flex items-center gap-2 bg-transparent",children:g.jsx("div",{className:"bg-white p-2 rounded-lg shadow-lg",children:g.jsx(a_,{showFocus:y,setShowFocus:w,autoZoomEnabled:f,setAutoZoomEnabled:h,setIsTemporalModalOpen:I,refreshWorkflowData:U,currentWorkflowId:e.rootWorkflowId,isRefreshing:q,onTemporalRootWorkflowDataCollected:n,isSearchModalOpen:se,setIsSearchModalOpen:k})})})]})}),j.map(ie=>g.jsx(i_,{id:ie.id,data:ie.node,position:ie.position,onClose:P},ie.id)),y&&g.jsx(fw,{nodes:e.nodes,onFocusChange:_,selectedWorkflow:S,onReset:N,onClose:()=>w(!1)}),g.jsx(v_,{isOpen:R,onClose:()=>I(!1),onSubmit:T})]})}ju(document.getElementById("root")).render(g.jsx(b.StrictMode,{children:g.jsx(w_,{})}));
