import{r as b,a as Ou,g as Qs,R as W,c as Ir,t as ol}from"./vendor-DBEsKlBz.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var ju={exports:{}},Ya={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lh=b,Fh=Symbol.for("react.element"),Wh=Symbol.for("react.fragment"),Bh=Object.prototype.hasOwnProperty,Hh=Lh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zh={key:!0,ref:!0,__self:!0,__source:!0};function Pu(e,t,n){var r,o={},i=null,s=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)Bh.call(t,r)&&!zh.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:Fh,type:e,key:i,ref:s,props:o,_owner:Hh.current}}Ya.Fragment=Wh;Ya.jsx=Pu;Ya.jsxs=Pu;ju.exports=Ya;var g=ju.exports,Iu,al=Ou;Iu=al.createRoot,al.hydrateRoot;function _t(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=_t(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Mu={exports:{}},Au={},$u={exports:{}},Ru={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wr=b;function Yh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vh=typeof Object.is=="function"?Object.is:Yh,qh=Wr.useState,Kh=Wr.useEffect,Uh=Wr.useLayoutEffect,Xh=Wr.useDebugValue;function Gh(e,t){var n=t(),r=qh({inst:{value:n,getSnapshot:t}}),o=r[0].inst,i=r[1];return Uh(function(){o.value=n,o.getSnapshot=t,Fi(o)&&i({inst:o})},[e,n,t]),Kh(function(){return Fi(o)&&i({inst:o}),e(function(){Fi(o)&&i({inst:o})})},[e]),Xh(n),n}function Fi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Vh(e,n)}catch{return!0}}function Zh(e,t){return t()}var Qh=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Zh:Gh;Ru.useSyncExternalStore=Wr.useSyncExternalStore!==void 0?Wr.useSyncExternalStore:Qh;$u.exports=Ru;var Jh=$u.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Va=b,em=Jh;function tm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nm=typeof Object.is=="function"?Object.is:tm,rm=em.useSyncExternalStore,om=Va.useRef,am=Va.useEffect,im=Va.useMemo,sm=Va.useDebugValue;Au.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var i=om(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=im(function(){function u(y){if(!d){if(d=!0,h=y,y=r(y),o!==void 0&&s.hasValue){var k=s.value;if(o(k,y))return p=k}return p=y}if(k=p,nm(h,y))return k;var S=r(y);return o!==void 0&&o(k,S)?k:(h=y,p=S)}var d=!1,h,p,v=n===void 0?null:n;return[function(){return u(t())},v===null?void 0:function(){return u(v())}]},[t,n,r,o]);var l=rm(e,i[0],i[1]);return am(function(){s.hasValue=!0,s.value=l},[l]),sm(l),l};Mu.exports=Au;var cm=Mu.exports;const lm=Qs(cm),um={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},il=e=>{let t;const n=new Set,r=(h,p)=>{const v=typeof h=="function"?h(t):h;if(!Object.is(v,t)){const y=t;t=p??(typeof v!="object"||v===null)?v:Object.assign({},t,v),n.forEach(k=>k(t,y))}},o=()=>t,u={setState:r,getState:o,getInitialState:()=>d,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(um?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(r,o,u);return u},dm=e=>e?il(e):il,{useDebugValue:fm}=W,{useSyncExternalStoreWithSelector:hm}=lm,mm=e=>e;function Lu(e,t=mm,n){const r=hm(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return fm(r),r}const sl=(e,t)=>{const n=dm(e),r=(o,i=t)=>Lu(n,o,i);return Object.assign(r,n),r},pm=(e,t)=>e?sl(e,t):sl;function St(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var gm={value:()=>{}};function qa(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ea(n)}function Ea(e){this._=e}function ym(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ea.prototype=qa.prototype={constructor:Ea,on:function(e,t){var n=this._,r=ym(e+"",n),o,i=-1,s=r.length;if(arguments.length<2){for(;++i<s;)if((o=(e=r[i]).type)&&(o=vm(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(o=(e=r[i]).type)n[o]=cl(n[o],e.name,t);else if(t==null)for(o in n)n[o]=cl(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ea(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};function vm(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function cl(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=gm,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var ss="http://www.w3.org/1999/xhtml";const ll={svg:"http://www.w3.org/2000/svg",xhtml:ss,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ka(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ll.hasOwnProperty(t)?{space:ll[t],local:e}:e}function wm(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ss&&t.documentElement.namespaceURI===ss?t.createElement(e):t.createElementNS(n,e)}}function bm(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Fu(e){var t=Ka(e);return(t.local?bm:wm)(t)}function xm(){}function Js(e){return e==null?xm:function(){return this.querySelector(e)}}function Sm(e){typeof e!="function"&&(e=Js(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,l=r[o]=new Array(s),u,d,h=0;h<s;++h)(u=i[h])&&(d=e.call(u,u.__data__,h,i))&&("__data__"in u&&(d.__data__=u.__data__),l[h]=d);return new Kt(r,this._parents)}function km(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Em(){return[]}function Wu(e){return e==null?Em:function(){return this.querySelectorAll(e)}}function _m(e){return function(){return km(e.apply(this,arguments))}}function Nm(e){typeof e=="function"?e=_m(e):e=Wu(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var s=t[i],l=s.length,u,d=0;d<l;++d)(u=s[d])&&(r.push(e.call(u,u.__data__,d,s)),o.push(u));return new Kt(r,o)}function Bu(e){return function(){return this.matches(e)}}function Hu(e){return function(t){return t.matches(e)}}var Tm=Array.prototype.find;function Cm(e){return function(){return Tm.call(this.children,e)}}function Dm(){return this.firstElementChild}function Om(e){return this.select(e==null?Dm:Cm(typeof e=="function"?e:Hu(e)))}var jm=Array.prototype.filter;function Pm(){return Array.from(this.children)}function Im(e){return function(){return jm.call(this.children,e)}}function Mm(e){return this.selectAll(e==null?Pm:Im(typeof e=="function"?e:Hu(e)))}function Am(e){typeof e!="function"&&(e=Bu(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,l=r[o]=[],u,d=0;d<s;++d)(u=i[d])&&e.call(u,u.__data__,d,i)&&l.push(u);return new Kt(r,this._parents)}function zu(e){return new Array(e.length)}function $m(){return new Kt(this._enter||this._groups.map(zu),this._parents)}function Da(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Da.prototype={constructor:Da,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Rm(e){return function(){return e}}function Lm(e,t,n,r,o,i){for(var s=0,l,u=t.length,d=i.length;s<d;++s)(l=t[s])?(l.__data__=i[s],r[s]=l):n[s]=new Da(e,i[s]);for(;s<u;++s)(l=t[s])&&(o[s]=l)}function Fm(e,t,n,r,o,i,s){var l,u,d=new Map,h=t.length,p=i.length,v=new Array(h),y;for(l=0;l<h;++l)(u=t[l])&&(v[l]=y=s.call(u,u.__data__,l,t)+"",d.has(y)?o[l]=u:d.set(y,u));for(l=0;l<p;++l)y=s.call(e,i[l],l,i)+"",(u=d.get(y))?(r[l]=u,u.__data__=i[l],d.delete(y)):n[l]=new Da(e,i[l]);for(l=0;l<h;++l)(u=t[l])&&d.get(v[l])===u&&(o[l]=u)}function Wm(e){return e.__data__}function Bm(e,t){if(!arguments.length)return Array.from(this,Wm);var n=t?Fm:Lm,r=this._parents,o=this._groups;typeof e!="function"&&(e=Rm(e));for(var i=o.length,s=new Array(i),l=new Array(i),u=new Array(i),d=0;d<i;++d){var h=r[d],p=o[d],v=p.length,y=Hm(e.call(h,h&&h.__data__,d,r)),k=y.length,S=l[d]=new Array(k),N=s[d]=new Array(k),T=u[d]=new Array(v);n(h,p,S,N,T,y,t);for(var $=0,I=0,C,X;$<k;++$)if(C=S[$]){for($>=I&&(I=$+1);!(X=N[I])&&++I<k;);C._next=X||null}}return s=new Kt(s,r),s._enter=l,s._exit=u,s}function Hm(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zm(){return new Kt(this._exit||this._groups.map(zu),this._parents)}function Ym(e,t,n){var r=this.enter(),o=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function Vm(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,s=Math.min(o,i),l=new Array(o),u=0;u<s;++u)for(var d=n[u],h=r[u],p=d.length,v=l[u]=new Array(p),y,k=0;k<p;++k)(y=d[k]||h[k])&&(v[k]=y);for(;u<o;++u)l[u]=n[u];return new Kt(l,this._parents)}function qm(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,i=r[o],s;--o>=0;)(s=r[o])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function Km(e){e||(e=Um);function t(p,v){return p&&v?e(p.__data__,v.__data__):!p-!v}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var s=n[i],l=s.length,u=o[i]=new Array(l),d,h=0;h<l;++h)(d=s[h])&&(u[h]=d);u.sort(t)}return new Kt(o,this._parents).order()}function Um(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Xm(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Gm(){return Array.from(this)}function Zm(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var s=r[o];if(s)return s}return null}function Qm(){let e=0;for(const t of this)++e;return e}function Jm(){return!this.node()}function ep(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],i=0,s=o.length,l;i<s;++i)(l=o[i])&&e.call(l,l.__data__,i,o);return this}function tp(e){return function(){this.removeAttribute(e)}}function np(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rp(e,t){return function(){this.setAttribute(e,t)}}function op(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ap(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ip(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function sp(e,t){var n=Ka(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?np:tp:typeof t=="function"?n.local?ip:ap:n.local?op:rp)(n,t))}function Yu(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function cp(e){return function(){this.style.removeProperty(e)}}function lp(e,t,n){return function(){this.style.setProperty(e,t,n)}}function up(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function dp(e,t,n){return arguments.length>1?this.each((t==null?cp:typeof t=="function"?up:lp)(e,t,n??"")):Br(this.node(),e)}function Br(e,t){return e.style.getPropertyValue(t)||Yu(e).getComputedStyle(e,null).getPropertyValue(t)}function fp(e){return function(){delete this[e]}}function hp(e,t){return function(){this[e]=t}}function mp(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function pp(e,t){return arguments.length>1?this.each((t==null?fp:typeof t=="function"?mp:hp)(e,t)):this.node()[e]}function Vu(e){return e.trim().split(/^|\s+/)}function ec(e){return e.classList||new qu(e)}function qu(e){this._node=e,this._names=Vu(e.getAttribute("class")||"")}qu.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ku(e,t){for(var n=ec(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function Uu(e,t){for(var n=ec(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function gp(e){return function(){Ku(this,e)}}function yp(e){return function(){Uu(this,e)}}function vp(e,t){return function(){(t.apply(this,arguments)?Ku:Uu)(this,e)}}function wp(e,t){var n=Vu(e+"");if(arguments.length<2){for(var r=ec(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?vp:t?gp:yp)(n,t))}function bp(){this.textContent=""}function xp(e){return function(){this.textContent=e}}function Sp(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function kp(e){return arguments.length?this.each(e==null?bp:(typeof e=="function"?Sp:xp)(e)):this.node().textContent}function Ep(){this.innerHTML=""}function _p(e){return function(){this.innerHTML=e}}function Np(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Tp(e){return arguments.length?this.each(e==null?Ep:(typeof e=="function"?Np:_p)(e)):this.node().innerHTML}function Cp(){this.nextSibling&&this.parentNode.appendChild(this)}function Dp(){return this.each(Cp)}function Op(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jp(){return this.each(Op)}function Pp(e){var t=typeof e=="function"?e:Fu(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ip(){return null}function Mp(e,t){var n=typeof e=="function"?e:Fu(e),r=t==null?Ip:typeof t=="function"?t:Js(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ap(){var e=this.parentNode;e&&e.removeChild(this)}function $p(){return this.each(Ap)}function Rp(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Lp(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Fp(e){return this.select(e?Lp:Rp)}function Wp(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Bp(e){return function(t){e.call(this,t,this.__data__)}}function Hp(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function zp(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,i;n<o;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function Yp(e,t,n){return function(){var r=this.__on,o,i=Bp(t);if(r){for(var s=0,l=r.length;s<l;++s)if((o=r[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=t;return}}this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function Vp(e,t,n){var r=Hp(e+""),o,i=r.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,d=l.length,h;u<d;++u)for(o=0,h=l[u];o<i;++o)if((s=r[o]).type===h.type&&s.name===h.name)return h.value}return}for(l=t?Yp:zp,o=0;o<i;++o)this.each(l(r[o],t,n));return this}function Xu(e,t,n){var r=Yu(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function qp(e,t){return function(){return Xu(this,e,t)}}function Kp(e,t){return function(){return Xu(this,e,t.apply(this,arguments))}}function Up(e,t){return this.each((typeof t=="function"?Kp:qp)(e,t))}function*Xp(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length,s;o<i;++o)(s=r[o])&&(yield s)}var Gu=[null];function Kt(e,t){this._groups=e,this._parents=t}function Mo(){return new Kt([[document.documentElement]],Gu)}function Gp(){return this}Kt.prototype=Mo.prototype={constructor:Kt,select:Sm,selectAll:Nm,selectChild:Om,selectChildren:Mm,filter:Am,data:Bm,enter:$m,exit:zm,join:Ym,merge:Vm,selection:Gp,order:qm,sort:Km,call:Xm,nodes:Gm,node:Zm,size:Qm,empty:Jm,each:ep,attr:sp,style:dp,property:pp,classed:wp,text:kp,html:Tp,raise:Dp,lower:jp,append:Pp,insert:Mp,remove:$p,clone:Fp,datum:Wp,on:Vp,dispatch:Up,[Symbol.iterator]:Xp};function Gt(e){return typeof e=="string"?new Kt([[document.querySelector(e)]],[document.documentElement]):new Kt([[e]],Gu)}function Zp(e){let t;for(;t=e.sourceEvent;)e=t;return e}function tn(e,t){if(e=Zp(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const Qp={passive:!1},xo={capture:!0,passive:!1};function Wi(e){e.stopImmediatePropagation()}function Rr(e){e.preventDefault(),e.stopImmediatePropagation()}function Zu(e){var t=e.document.documentElement,n=Gt(e).on("dragstart.drag",Rr,xo);"onselectstart"in t?n.on("selectstart.drag",Rr,xo):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Qu(e,t){var n=e.document.documentElement,r=Gt(e).on("dragstart.drag",null);t&&(r.on("click.drag",Rr,xo),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ua=e=>()=>e;function cs(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:s,y:l,dx:u,dy:d,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:h}})}cs.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Jp(e){return!e.ctrlKey&&!e.button}function eg(){return this.parentNode}function tg(e,t){return t??{x:e.x,y:e.y}}function ng(){return navigator.maxTouchPoints||"ontouchstart"in this}function rg(){var e=Jp,t=eg,n=tg,r=ng,o={},i=qa("start","drag","end"),s=0,l,u,d,h,p=0;function v(C){C.on("mousedown.drag",y).filter(r).on("touchstart.drag",N).on("touchmove.drag",T,Qp).on("touchend.drag touchcancel.drag",$).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(C,X){if(!(h||!e.call(this,C,X))){var q=I(this,t.call(this,C,X),C,X,"mouse");q&&(Gt(C.view).on("mousemove.drag",k,xo).on("mouseup.drag",S,xo),Zu(C.view),Wi(C),d=!1,l=C.clientX,u=C.clientY,q("start",C))}}function k(C){if(Rr(C),!d){var X=C.clientX-l,q=C.clientY-u;d=X*X+q*q>p}o.mouse("drag",C)}function S(C){Gt(C.view).on("mousemove.drag mouseup.drag",null),Qu(C.view,d),Rr(C),o.mouse("end",C)}function N(C,X){if(e.call(this,C,X)){var q=C.changedTouches,H=t.call(this,C,X),ee=q.length,K,ne;for(K=0;K<ee;++K)(ne=I(this,H,C,X,q[K].identifier,q[K]))&&(Wi(C),ne("start",C,q[K]))}}function T(C){var X=C.changedTouches,q=X.length,H,ee;for(H=0;H<q;++H)(ee=o[X[H].identifier])&&(Rr(C),ee("drag",C,X[H]))}function $(C){var X=C.changedTouches,q=X.length,H,ee;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),H=0;H<q;++H)(ee=o[X[H].identifier])&&(Wi(C),ee("end",C,X[H]))}function I(C,X,q,H,ee,K){var ne=i.copy(),U=tn(K||q,X),ie,ce,E;if((E=n.call(C,new cs("beforestart",{sourceEvent:q,target:v,identifier:ee,active:s,x:U[0],y:U[1],dx:0,dy:0,dispatch:ne}),H))!=null)return ie=E.x-U[0]||0,ce=E.y-U[1]||0,function z(D,Q,J){var j=U,G;switch(D){case"start":o[ee]=z,G=s++;break;case"end":delete o[ee],--s;case"drag":U=tn(J||Q,X),G=s;break}ne.call(D,C,new cs(D,{sourceEvent:Q,subject:E,target:v,identifier:ee,active:G,x:U[0]+ie,y:U[1]+ce,dx:U[0]-j[0],dy:U[1]-j[1],dispatch:ne}),H)}}return v.filter=function(C){return arguments.length?(e=typeof C=="function"?C:ua(!!C),v):e},v.container=function(C){return arguments.length?(t=typeof C=="function"?C:ua(C),v):t},v.subject=function(C){return arguments.length?(n=typeof C=="function"?C:ua(C),v):n},v.touchable=function(C){return arguments.length?(r=typeof C=="function"?C:ua(!!C),v):r},v.on=function(){var C=i.on.apply(i,arguments);return C===i?v:C},v.clickDistance=function(C){return arguments.length?(p=(C=+C)*C,v):Math.sqrt(p)},v}function tc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ju(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ao(){}var So=.7,Oa=1/So,Lr="\\s*([+-]?\\d+)\\s*",ko="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",gn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",og=/^#([0-9a-f]{3,8})$/,ag=new RegExp(`^rgb\\(${Lr},${Lr},${Lr}\\)$`),ig=new RegExp(`^rgb\\(${gn},${gn},${gn}\\)$`),sg=new RegExp(`^rgba\\(${Lr},${Lr},${Lr},${ko}\\)$`),cg=new RegExp(`^rgba\\(${gn},${gn},${gn},${ko}\\)$`),lg=new RegExp(`^hsl\\(${ko},${gn},${gn}\\)$`),ug=new RegExp(`^hsla\\(${ko},${gn},${gn},${ko}\\)$`),ul={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};tc(Ao,Eo,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:dl,formatHex:dl,formatHex8:dg,formatHsl:fg,formatRgb:fl,toString:fl});function dl(){return this.rgb().formatHex()}function dg(){return this.rgb().formatHex8()}function fg(){return ed(this).formatHsl()}function fl(){return this.rgb().formatRgb()}function Eo(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=og.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?hl(t):n===3?new Ht(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?da(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?da(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ag.exec(e))?new Ht(t[1],t[2],t[3],1):(t=ig.exec(e))?new Ht(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=sg.exec(e))?da(t[1],t[2],t[3],t[4]):(t=cg.exec(e))?da(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=lg.exec(e))?gl(t[1],t[2]/100,t[3]/100,1):(t=ug.exec(e))?gl(t[1],t[2]/100,t[3]/100,t[4]):ul.hasOwnProperty(e)?hl(ul[e]):e==="transparent"?new Ht(NaN,NaN,NaN,0):null}function hl(e){return new Ht(e>>16&255,e>>8&255,e&255,1)}function da(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ht(e,t,n,r)}function hg(e){return e instanceof Ao||(e=Eo(e)),e?(e=e.rgb(),new Ht(e.r,e.g,e.b,e.opacity)):new Ht}function ls(e,t,n,r){return arguments.length===1?hg(e):new Ht(e,t,n,r??1)}function Ht(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}tc(Ht,ls,Ju(Ao,{brighter(e){return e=e==null?Oa:Math.pow(Oa,e),new Ht(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?So:Math.pow(So,e),new Ht(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ht(hr(this.r),hr(this.g),hr(this.b),ja(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ml,formatHex:ml,formatHex8:mg,formatRgb:pl,toString:pl}));function ml(){return`#${ur(this.r)}${ur(this.g)}${ur(this.b)}`}function mg(){return`#${ur(this.r)}${ur(this.g)}${ur(this.b)}${ur((isNaN(this.opacity)?1:this.opacity)*255)}`}function pl(){const e=ja(this.opacity);return`${e===1?"rgb(":"rgba("}${hr(this.r)}, ${hr(this.g)}, ${hr(this.b)}${e===1?")":`, ${e})`}`}function ja(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function hr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ur(e){return e=hr(e),(e<16?"0":"")+e.toString(16)}function gl(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new nn(e,t,n,r)}function ed(e){if(e instanceof nn)return new nn(e.h,e.s,e.l,e.opacity);if(e instanceof Ao||(e=Eo(e)),!e)return new nn;if(e instanceof nn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),s=NaN,l=i-o,u=(i+o)/2;return l?(t===i?s=(n-r)/l+(n<r)*6:n===i?s=(r-t)/l+2:s=(t-n)/l+4,l/=u<.5?i+o:2-i-o,s*=60):l=u>0&&u<1?0:s,new nn(s,l,u,e.opacity)}function pg(e,t,n,r){return arguments.length===1?ed(e):new nn(e,t,n,r??1)}function nn(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}tc(nn,pg,Ju(Ao,{brighter(e){return e=e==null?Oa:Math.pow(Oa,e),new nn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?So:Math.pow(So,e),new nn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Ht(Bi(e>=240?e-240:e+120,o,r),Bi(e,o,r),Bi(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new nn(yl(this.h),fa(this.s),fa(this.l),ja(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ja(this.opacity);return`${e===1?"hsl(":"hsla("}${yl(this.h)}, ${fa(this.s)*100}%, ${fa(this.l)*100}%${e===1?")":`, ${e})`}`}}));function yl(e){return e=(e||0)%360,e<0?e+360:e}function fa(e){return Math.max(0,Math.min(1,e||0))}function Bi(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const td=e=>()=>e;function gg(e,t){return function(n){return e+n*t}}function yg(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function vg(e){return(e=+e)==1?nd:function(t,n){return n-t?yg(t,n,e):td(isNaN(t)?n:t)}}function nd(e,t){var n=t-e;return n?gg(e,n):td(isNaN(e)?t:e)}const vl=function e(t){var n=vg(t);function r(o,i){var s=n((o=ls(o)).r,(i=ls(i)).r),l=n(o.g,i.g),u=n(o.b,i.b),d=nd(o.opacity,i.opacity);return function(h){return o.r=s(h),o.g=l(h),o.b=u(h),o.opacity=d(h),o+""}}return r.gamma=e,r}(1);function Vn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var us=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hi=new RegExp(us.source,"g");function wg(e){return function(){return e}}function bg(e){return function(t){return e(t)+""}}function xg(e,t){var n=us.lastIndex=Hi.lastIndex=0,r,o,i,s=-1,l=[],u=[];for(e=e+"",t=t+"";(r=us.exec(e))&&(o=Hi.exec(t));)(i=o.index)>n&&(i=t.slice(n,i),l[s]?l[s]+=i:l[++s]=i),(r=r[0])===(o=o[0])?l[s]?l[s]+=o:l[++s]=o:(l[++s]=null,u.push({i:s,x:Vn(r,o)})),n=Hi.lastIndex;return n<t.length&&(i=t.slice(n),l[s]?l[s]+=i:l[++s]=i),l.length<2?u[0]?bg(u[0].x):wg(t):(t=u.length,function(d){for(var h=0,p;h<t;++h)l[(p=u[h]).i]=p.x(d);return l.join("")})}var wl=180/Math.PI,ds={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function rd(e,t,n,r,o,i){var s,l,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),e*r<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*wl,skewX:Math.atan(u)*wl,scaleX:s,scaleY:l}}var ha;function Sg(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ds:rd(t.a,t.b,t.c,t.d,t.e,t.f)}function kg(e){return e==null||(ha||(ha=document.createElementNS("http://www.w3.org/2000/svg","g")),ha.setAttribute("transform",e),!(e=ha.transform.baseVal.consolidate()))?ds:(e=e.matrix,rd(e.a,e.b,e.c,e.d,e.e,e.f))}function od(e,t,n,r){function o(d){return d.length?d.pop()+" ":""}function i(d,h,p,v,y,k){if(d!==p||h!==v){var S=y.push("translate(",null,t,null,n);k.push({i:S-4,x:Vn(d,p)},{i:S-2,x:Vn(h,v)})}else(p||v)&&y.push("translate("+p+t+v+n)}function s(d,h,p,v){d!==h?(d-h>180?h+=360:h-d>180&&(d+=360),v.push({i:p.push(o(p)+"rotate(",null,r)-2,x:Vn(d,h)})):h&&p.push(o(p)+"rotate("+h+r)}function l(d,h,p,v){d!==h?v.push({i:p.push(o(p)+"skewX(",null,r)-2,x:Vn(d,h)}):h&&p.push(o(p)+"skewX("+h+r)}function u(d,h,p,v,y,k){if(d!==p||h!==v){var S=y.push(o(y)+"scale(",null,",",null,")");k.push({i:S-4,x:Vn(d,p)},{i:S-2,x:Vn(h,v)})}else(p!==1||v!==1)&&y.push(o(y)+"scale("+p+","+v+")")}return function(d,h){var p=[],v=[];return d=e(d),h=e(h),i(d.translateX,d.translateY,h.translateX,h.translateY,p,v),s(d.rotate,h.rotate,p,v),l(d.skewX,h.skewX,p,v),u(d.scaleX,d.scaleY,h.scaleX,h.scaleY,p,v),d=h=null,function(y){for(var k=-1,S=v.length,N;++k<S;)p[(N=v[k]).i]=N.x(y);return p.join("")}}}var Eg=od(Sg,"px, ","px)","deg)"),_g=od(kg,", ",")",")"),Ng=1e-12;function bl(e){return((e=Math.exp(e))+1/e)/2}function Tg(e){return((e=Math.exp(e))-1/e)/2}function Cg(e){return((e=Math.exp(2*e))-1)/(e+1)}const Dg=function e(t,n,r){function o(i,s){var l=i[0],u=i[1],d=i[2],h=s[0],p=s[1],v=s[2],y=h-l,k=p-u,S=y*y+k*k,N,T;if(S<Ng)T=Math.log(v/d)/t,N=function(H){return[l+H*y,u+H*k,d*Math.exp(t*H*T)]};else{var $=Math.sqrt(S),I=(v*v-d*d+r*S)/(2*d*n*$),C=(v*v-d*d-r*S)/(2*v*n*$),X=Math.log(Math.sqrt(I*I+1)-I),q=Math.log(Math.sqrt(C*C+1)-C);T=(q-X)/t,N=function(H){var ee=H*T,K=bl(X),ne=d/(n*$)*(K*Cg(t*ee+X)-Tg(X));return[l+ne*y,u+ne*k,d*K/bl(t*ee+X)]}}return N.duration=T*1e3*t/Math.SQRT2,N}return o.rho=function(i){var s=Math.max(.001,+i),l=s*s,u=l*l;return e(s,l,u)},o}(Math.SQRT2,2,4);var Hr=0,mo=0,ao=0,ad=1e3,Pa,po,Ia=0,vr=0,Ua=0,_o=typeof performance=="object"&&performance.now?performance:Date,id=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function nc(){return vr||(id(Og),vr=_o.now()+Ua)}function Og(){vr=0}function Ma(){this._call=this._time=this._next=null}Ma.prototype=sd.prototype={constructor:Ma,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?nc():+n)+(t==null?0:+t),!this._next&&po!==this&&(po?po._next=this:Pa=this,po=this),this._call=e,this._time=n,fs()},stop:function(){this._call&&(this._call=null,this._time=1/0,fs())}};function sd(e,t,n){var r=new Ma;return r.restart(e,t,n),r}function jg(){nc(),++Hr;for(var e=Pa,t;e;)(t=vr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Hr}function xl(){vr=(Ia=_o.now())+Ua,Hr=mo=0;try{jg()}finally{Hr=0,Ig(),vr=0}}function Pg(){var e=_o.now(),t=e-Ia;t>ad&&(Ua-=t,Ia=e)}function Ig(){for(var e,t=Pa,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Pa=n);po=e,fs(r)}function fs(e){if(!Hr){mo&&(mo=clearTimeout(mo));var t=e-vr;t>24?(e<1/0&&(mo=setTimeout(xl,e-_o.now()-Ua)),ao&&(ao=clearInterval(ao))):(ao||(Ia=_o.now(),ao=setInterval(Pg,ad)),Hr=1,id(xl))}}function Sl(e,t,n){var r=new Ma;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var Mg=qa("start","end","cancel","interrupt"),Ag=[],cd=0,kl=1,hs=2,_a=3,El=4,ms=5,Na=6;function Xa(e,t,n,r,o,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;$g(e,n,{name:t,index:r,group:o,on:Mg,tween:Ag,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:cd})}function rc(e,t){var n=an(e,t);if(n.state>cd)throw new Error("too late; already scheduled");return n}function yn(e,t){var n=an(e,t);if(n.state>_a)throw new Error("too late; already running");return n}function an(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function $g(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=sd(i,0,n.time);function i(d){n.state=kl,n.timer.restart(s,n.delay,n.time),n.delay<=d&&s(d-n.delay)}function s(d){var h,p,v,y;if(n.state!==kl)return u();for(h in r)if(y=r[h],y.name===n.name){if(y.state===_a)return Sl(s);y.state===El?(y.state=Na,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete r[h]):+h<t&&(y.state=Na,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete r[h])}if(Sl(function(){n.state===_a&&(n.state=El,n.timer.restart(l,n.delay,n.time),l(d))}),n.state=hs,n.on.call("start",e,e.__data__,n.index,n.group),n.state===hs){for(n.state=_a,o=new Array(v=n.tween.length),h=0,p=-1;h<v;++h)(y=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(o[++p]=y);o.length=p+1}}function l(d){for(var h=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(u),n.state=ms,1),p=-1,v=o.length;++p<v;)o[p].call(e,h);n.state===ms&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Na,n.timer.stop(),delete r[t];for(var d in r)return;delete e.__transition}}function Ta(e,t){var n=e.__transition,r,o,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){i=!1;continue}o=r.state>hs&&r.state<ms,r.state=Na,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}i&&delete e.__transition}}function Rg(e){return this.each(function(){Ta(this,e)})}function Lg(e,t){var n,r;return function(){var o=yn(this,e),i=o.tween;if(i!==n){r=n=i;for(var s=0,l=r.length;s<l;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}o.tween=r}}function Fg(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=yn(this,e),s=i.tween;if(s!==r){o=(r=s).slice();for(var l={name:t,value:n},u=0,d=o.length;u<d;++u)if(o[u].name===t){o[u]=l;break}u===d&&o.push(l)}i.tween=o}}function Wg(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=an(this.node(),n).tween,o=0,i=r.length,s;o<i;++o)if((s=r[o]).name===e)return s.value;return null}return this.each((t==null?Lg:Fg)(n,e,t))}function oc(e,t,n){var r=e._id;return e.each(function(){var o=yn(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return an(o,r).value[t]}}function ld(e,t){var n;return(typeof t=="number"?Vn:t instanceof Eo?vl:(n=Eo(t))?(t=n,vl):xg)(e,t)}function Bg(e){return function(){this.removeAttribute(e)}}function Hg(e){return function(){this.removeAttributeNS(e.space,e.local)}}function zg(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttribute(e);return s===o?null:s===r?i:i=t(r=s,n)}}function Yg(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===r?i:i=t(r=s,n)}}function Vg(e,t,n){var r,o,i;return function(){var s,l=n(this),u;return l==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=l+"",s===u?null:s===r&&u===o?i:(o=u,i=t(r=s,l)))}}function qg(e,t,n){var r,o,i;return function(){var s,l=n(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=l+"",s===u?null:s===r&&u===o?i:(o=u,i=t(r=s,l)))}}function Kg(e,t){var n=Ka(e),r=n==="transform"?_g:ld;return this.attrTween(e,typeof t=="function"?(n.local?qg:Vg)(n,r,oc(this,"attr."+e,t)):t==null?(n.local?Hg:Bg)(n):(n.local?Yg:zg)(n,r,t))}function Ug(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Xg(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Gg(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Xg(e,i)),n}return o._value=t,o}function Zg(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Ug(e,i)),n}return o._value=t,o}function Qg(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Ka(e);return this.tween(n,(r.local?Gg:Zg)(r,t))}function Jg(e,t){return function(){rc(this,e).delay=+t.apply(this,arguments)}}function ey(e,t){return t=+t,function(){rc(this,e).delay=t}}function ty(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Jg:ey)(t,e)):an(this.node(),t).delay}function ny(e,t){return function(){yn(this,e).duration=+t.apply(this,arguments)}}function ry(e,t){return t=+t,function(){yn(this,e).duration=t}}function oy(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ny:ry)(t,e)):an(this.node(),t).duration}function ay(e,t){if(typeof t!="function")throw new Error;return function(){yn(this,e).ease=t}}function iy(e){var t=this._id;return arguments.length?this.each(ay(t,e)):an(this.node(),t).ease}function sy(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;yn(this,e).ease=n}}function cy(e){if(typeof e!="function")throw new Error;return this.each(sy(this._id,e))}function ly(e){typeof e!="function"&&(e=Bu(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,l=r[o]=[],u,d=0;d<s;++d)(u=i[d])&&e.call(u,u.__data__,d,i)&&l.push(u);return new jn(r,this._parents,this._name,this._id)}function uy(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),s=new Array(r),l=0;l<i;++l)for(var u=t[l],d=n[l],h=u.length,p=s[l]=new Array(h),v,y=0;y<h;++y)(v=u[y]||d[y])&&(p[y]=v);for(;l<r;++l)s[l]=t[l];return new jn(s,this._parents,this._name,this._id)}function dy(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function fy(e,t,n){var r,o,i=dy(t)?rc:yn;return function(){var s=i(this,e),l=s.on;l!==r&&(o=(r=l).copy()).on(t,n),s.on=o}}function hy(e,t){var n=this._id;return arguments.length<2?an(this.node(),n).on.on(e):this.each(fy(n,e,t))}function my(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function py(){return this.on("end.remove",my(this._id))}function gy(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Js(e));for(var r=this._groups,o=r.length,i=new Array(o),s=0;s<o;++s)for(var l=r[s],u=l.length,d=i[s]=new Array(u),h,p,v=0;v<u;++v)(h=l[v])&&(p=e.call(h,h.__data__,v,l))&&("__data__"in h&&(p.__data__=h.__data__),d[v]=p,Xa(d[v],t,n,v,d,an(h,n)));return new jn(i,this._parents,t,n)}function yy(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Wu(e));for(var r=this._groups,o=r.length,i=[],s=[],l=0;l<o;++l)for(var u=r[l],d=u.length,h,p=0;p<d;++p)if(h=u[p]){for(var v=e.call(h,h.__data__,p,u),y,k=an(h,n),S=0,N=v.length;S<N;++S)(y=v[S])&&Xa(y,t,n,S,v,k);i.push(v),s.push(h)}return new jn(i,s,t,n)}var vy=Mo.prototype.constructor;function wy(){return new vy(this._groups,this._parents)}function by(e,t){var n,r,o;return function(){var i=Br(this,e),s=(this.style.removeProperty(e),Br(this,e));return i===s?null:i===n&&s===r?o:o=t(n=i,r=s)}}function ud(e){return function(){this.style.removeProperty(e)}}function xy(e,t,n){var r,o=n+"",i;return function(){var s=Br(this,e);return s===o?null:s===r?i:i=t(r=s,n)}}function Sy(e,t,n){var r,o,i;return function(){var s=Br(this,e),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),Br(this,e))),s===u?null:s===r&&u===o?i:(o=u,i=t(r=s,l))}}function ky(e,t){var n,r,o,i="style."+t,s="end."+i,l;return function(){var u=yn(this,e),d=u.on,h=u.value[i]==null?l||(l=ud(t)):void 0;(d!==n||o!==h)&&(r=(n=d).copy()).on(s,o=h),u.on=r}}function Ey(e,t,n){var r=(e+="")=="transform"?Eg:ld;return t==null?this.styleTween(e,by(e,r)).on("end.style."+e,ud(e)):typeof t=="function"?this.styleTween(e,Sy(e,r,oc(this,"style."+e,t))).each(ky(this._id,e)):this.styleTween(e,xy(e,r,t),n).on("end.style."+e,null)}function _y(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Ny(e,t,n){var r,o;function i(){var s=t.apply(this,arguments);return s!==o&&(r=(o=s)&&_y(e,s,n)),r}return i._value=t,i}function Ty(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Ny(e,t,n??""))}function Cy(e){return function(){this.textContent=e}}function Dy(e){return function(){var t=e(this);this.textContent=t??""}}function Oy(e){return this.tween("text",typeof e=="function"?Dy(oc(this,"text",e)):Cy(e==null?"":e+""))}function jy(e){return function(t){this.textContent=e.call(this,t)}}function Py(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&jy(o)),t}return r._value=e,r}function Iy(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Py(e))}function My(){for(var e=this._name,t=this._id,n=dd(),r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],l=s.length,u,d=0;d<l;++d)if(u=s[d]){var h=an(u,t);Xa(u,e,n,d,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new jn(r,this._parents,e,n)}function Ay(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,s){var l={value:s},u={value:function(){--o===0&&i()}};n.each(function(){var d=yn(this,r),h=d.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),d.on=t}),o===0&&i()})}var $y=0;function jn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function dd(){return++$y}var _n=Mo.prototype;jn.prototype={constructor:jn,select:gy,selectAll:yy,selectChild:_n.selectChild,selectChildren:_n.selectChildren,filter:ly,merge:uy,selection:wy,transition:My,call:_n.call,nodes:_n.nodes,node:_n.node,size:_n.size,empty:_n.empty,each:_n.each,on:hy,attr:Kg,attrTween:Qg,style:Ey,styleTween:Ty,text:Oy,textTween:Iy,remove:py,tween:Wg,delay:ty,duration:oy,ease:iy,easeVarying:cy,end:Ay,[Symbol.iterator]:_n[Symbol.iterator]};function Ry(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Ly={time:null,delay:0,duration:250,ease:Ry};function Fy(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Wy(e){var t,n;e instanceof jn?(t=e._id,e=e._name):(t=dd(),(n=Ly).time=nc(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],l=s.length,u,d=0;d<l;++d)(u=s[d])&&Xa(u,e,t,d,s,n||Fy(u,t));return new jn(r,this._parents,e,t)}Mo.prototype.interrupt=Rg;Mo.prototype.transition=Wy;const ma=e=>()=>e;function By(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Cn(e,t,n){this.k=e,this.x=t,this.y=n}Cn.prototype={constructor:Cn,scale:function(e){return e===1?this:new Cn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Cn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Dn=new Cn(1,0,0);Cn.prototype;function zi(e){e.stopImmediatePropagation()}function io(e){e.preventDefault(),e.stopImmediatePropagation()}function Hy(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function zy(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function _l(){return this.__zoom||Dn}function Yy(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Vy(){return navigator.maxTouchPoints||"ontouchstart"in this}function qy(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function fd(){var e=Hy,t=zy,n=qy,r=Yy,o=Vy,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],l=250,u=Dg,d=qa("start","zoom","end"),h,p,v,y=500,k=150,S=0,N=10;function T(E){E.property("__zoom",_l).on("wheel.zoom",ee,{passive:!1}).on("mousedown.zoom",K).on("dblclick.zoom",ne).filter(o).on("touchstart.zoom",U).on("touchmove.zoom",ie).on("touchend.zoom touchcancel.zoom",ce).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}T.transform=function(E,z,D,Q){var J=E.selection?E.selection():E;J.property("__zoom",_l),E!==J?X(E,z,D,Q):J.interrupt().each(function(){q(this,arguments).event(Q).start().zoom(null,typeof z=="function"?z.apply(this,arguments):z).end()})},T.scaleBy=function(E,z,D,Q){T.scaleTo(E,function(){var J=this.__zoom.k,j=typeof z=="function"?z.apply(this,arguments):z;return J*j},D,Q)},T.scaleTo=function(E,z,D,Q){T.transform(E,function(){var J=t.apply(this,arguments),j=this.__zoom,G=D==null?C(J):typeof D=="function"?D.apply(this,arguments):D,se=j.invert(G),ae=typeof z=="function"?z.apply(this,arguments):z;return n(I($(j,ae),G,se),J,s)},D,Q)},T.translateBy=function(E,z,D,Q){T.transform(E,function(){return n(this.__zoom.translate(typeof z=="function"?z.apply(this,arguments):z,typeof D=="function"?D.apply(this,arguments):D),t.apply(this,arguments),s)},null,Q)},T.translateTo=function(E,z,D,Q,J){T.transform(E,function(){var j=t.apply(this,arguments),G=this.__zoom,se=Q==null?C(j):typeof Q=="function"?Q.apply(this,arguments):Q;return n(Dn.translate(se[0],se[1]).scale(G.k).translate(typeof z=="function"?-z.apply(this,arguments):-z,typeof D=="function"?-D.apply(this,arguments):-D),j,s)},Q,J)};function $(E,z){return z=Math.max(i[0],Math.min(i[1],z)),z===E.k?E:new Cn(z,E.x,E.y)}function I(E,z,D){var Q=z[0]-D[0]*E.k,J=z[1]-D[1]*E.k;return Q===E.x&&J===E.y?E:new Cn(E.k,Q,J)}function C(E){return[(+E[0][0]+ +E[1][0])/2,(+E[0][1]+ +E[1][1])/2]}function X(E,z,D,Q){E.on("start.zoom",function(){q(this,arguments).event(Q).start()}).on("interrupt.zoom end.zoom",function(){q(this,arguments).event(Q).end()}).tween("zoom",function(){var J=this,j=arguments,G=q(J,j).event(Q),se=t.apply(J,j),ae=D==null?C(se):typeof D=="function"?D.apply(J,j):D,de=Math.max(se[1][0]-se[0][0],se[1][1]-se[0][1]),we=J.__zoom,ke=typeof z=="function"?z.apply(J,j):z,Ne=u(we.invert(ae).concat(de/we.k),ke.invert(ae).concat(de/ke.k));return function(De){if(De===1)De=ke;else{var Pe=Ne(De),fe=de/Pe[2];De=new Cn(fe,ae[0]-Pe[0]*fe,ae[1]-Pe[1]*fe)}G.zoom(null,De)}})}function q(E,z,D){return!D&&E.__zooming||new H(E,z)}function H(E,z){this.that=E,this.args=z,this.active=0,this.sourceEvent=null,this.extent=t.apply(E,z),this.taps=0}H.prototype={event:function(E){return E&&(this.sourceEvent=E),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(E,z){return this.mouse&&E!=="mouse"&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&E!=="touch"&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&E!=="touch"&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(E){var z=Gt(this.that).datum();d.call(E,this.that,new By(E,{sourceEvent:this.sourceEvent,target:T,type:E,transform:this.that.__zoom,dispatch:d}),z)}};function ee(E,...z){if(!e.apply(this,arguments))return;var D=q(this,z).event(E),Q=this.__zoom,J=Math.max(i[0],Math.min(i[1],Q.k*Math.pow(2,r.apply(this,arguments)))),j=tn(E);if(D.wheel)(D.mouse[0][0]!==j[0]||D.mouse[0][1]!==j[1])&&(D.mouse[1]=Q.invert(D.mouse[0]=j)),clearTimeout(D.wheel);else{if(Q.k===J)return;D.mouse=[j,Q.invert(j)],Ta(this),D.start()}io(E),D.wheel=setTimeout(G,k),D.zoom("mouse",n(I($(Q,J),D.mouse[0],D.mouse[1]),D.extent,s));function G(){D.wheel=null,D.end()}}function K(E,...z){if(v||!e.apply(this,arguments))return;var D=E.currentTarget,Q=q(this,z,!0).event(E),J=Gt(E.view).on("mousemove.zoom",ae,!0).on("mouseup.zoom",de,!0),j=tn(E,D),G=E.clientX,se=E.clientY;Zu(E.view),zi(E),Q.mouse=[j,this.__zoom.invert(j)],Ta(this),Q.start();function ae(we){if(io(we),!Q.moved){var ke=we.clientX-G,Ne=we.clientY-se;Q.moved=ke*ke+Ne*Ne>S}Q.event(we).zoom("mouse",n(I(Q.that.__zoom,Q.mouse[0]=tn(we,D),Q.mouse[1]),Q.extent,s))}function de(we){J.on("mousemove.zoom mouseup.zoom",null),Qu(we.view,Q.moved),io(we),Q.event(we).end()}}function ne(E,...z){if(e.apply(this,arguments)){var D=this.__zoom,Q=tn(E.changedTouches?E.changedTouches[0]:E,this),J=D.invert(Q),j=D.k*(E.shiftKey?.5:2),G=n(I($(D,j),Q,J),t.apply(this,z),s);io(E),l>0?Gt(this).transition().duration(l).call(X,G,Q,E):Gt(this).call(T.transform,G,Q,E)}}function U(E,...z){if(e.apply(this,arguments)){var D=E.touches,Q=D.length,J=q(this,z,E.changedTouches.length===Q).event(E),j,G,se,ae;for(zi(E),G=0;G<Q;++G)se=D[G],ae=tn(se,this),ae=[ae,this.__zoom.invert(ae),se.identifier],J.touch0?!J.touch1&&J.touch0[2]!==ae[2]&&(J.touch1=ae,J.taps=0):(J.touch0=ae,j=!0,J.taps=1+!!h);h&&(h=clearTimeout(h)),j&&(J.taps<2&&(p=ae[0],h=setTimeout(function(){h=null},y)),Ta(this),J.start())}}function ie(E,...z){if(this.__zooming){var D=q(this,z).event(E),Q=E.changedTouches,J=Q.length,j,G,se,ae;for(io(E),j=0;j<J;++j)G=Q[j],se=tn(G,this),D.touch0&&D.touch0[2]===G.identifier?D.touch0[0]=se:D.touch1&&D.touch1[2]===G.identifier&&(D.touch1[0]=se);if(G=D.that.__zoom,D.touch1){var de=D.touch0[0],we=D.touch0[1],ke=D.touch1[0],Ne=D.touch1[1],De=(De=ke[0]-de[0])*De+(De=ke[1]-de[1])*De,Pe=(Pe=Ne[0]-we[0])*Pe+(Pe=Ne[1]-we[1])*Pe;G=$(G,Math.sqrt(De/Pe)),se=[(de[0]+ke[0])/2,(de[1]+ke[1])/2],ae=[(we[0]+Ne[0])/2,(we[1]+Ne[1])/2]}else if(D.touch0)se=D.touch0[0],ae=D.touch0[1];else return;D.zoom("touch",n(I(G,se,ae),D.extent,s))}}function ce(E,...z){if(this.__zooming){var D=q(this,z).event(E),Q=E.changedTouches,J=Q.length,j,G;for(zi(E),v&&clearTimeout(v),v=setTimeout(function(){v=null},y),j=0;j<J;++j)G=Q[j],D.touch0&&D.touch0[2]===G.identifier?delete D.touch0:D.touch1&&D.touch1[2]===G.identifier&&delete D.touch1;if(D.touch1&&!D.touch0&&(D.touch0=D.touch1,delete D.touch1),D.touch0)D.touch0[1]=this.__zoom.invert(D.touch0[0]);else if(D.end(),D.taps===2&&(G=tn(G,this),Math.hypot(p[0]-G[0],p[1]-G[1])<N)){var se=Gt(this).on("dblclick.zoom");se&&se.apply(this,arguments)}}}return T.wheelDelta=function(E){return arguments.length?(r=typeof E=="function"?E:ma(+E),T):r},T.filter=function(E){return arguments.length?(e=typeof E=="function"?E:ma(!!E),T):e},T.touchable=function(E){return arguments.length?(o=typeof E=="function"?E:ma(!!E),T):o},T.extent=function(E){return arguments.length?(t=typeof E=="function"?E:ma([[+E[0][0],+E[0][1]],[+E[1][0],+E[1][1]]]),T):t},T.scaleExtent=function(E){return arguments.length?(i[0]=+E[0],i[1]=+E[1],T):[i[0],i[1]]},T.translateExtent=function(E){return arguments.length?(s[0][0]=+E[0][0],s[1][0]=+E[1][0],s[0][1]=+E[0][1],s[1][1]=+E[1][1],T):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},T.constrain=function(E){return arguments.length?(n=E,T):n},T.duration=function(E){return arguments.length?(l=+E,T):l},T.interpolate=function(E){return arguments.length?(u=E,T):u},T.on=function(){var E=d.on.apply(d,arguments);return E===d?T:E},T.clickDistance=function(E){return arguments.length?(S=(E=+E)*E,T):Math.sqrt(S)},T.tapDistance=function(E){return arguments.length?(N=+E,T):N},T}const Ga=b.createContext(null),Ky=Ga.Provider,Pn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},hd=Pn.error001();function tt(e,t){const n=b.useContext(Ga);if(n===null)throw new Error(hd);return Lu(n,e,t)}const vt=()=>{const e=b.useContext(Ga);if(e===null)throw new Error(hd);return b.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Uy=e=>e.userSelectionActive?"none":"all";function No({position:e,children:t,className:n,style:r,...o}){const i=tt(Uy),s=`${e}`.split("-");return W.createElement("div",{className:_t(["react-flow__panel",n,...s]),style:{...r,pointerEvents:i},...o},t)}function Xy({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:W.createElement(No,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},W.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Gy=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:i={},labelBgPadding:s=[2,4],labelBgBorderRadius:l=2,children:u,className:d,...h})=>{const p=b.useRef(null),[v,y]=b.useState({x:0,y:0,width:0,height:0}),k=_t(["react-flow__edge-textwrapper",d]);return b.useEffect(()=>{if(p.current){const S=p.current.getBBox();y({x:S.x,y:S.y,width:S.width,height:S.height})}},[n]),typeof n>"u"||!n?null:W.createElement("g",{transform:`translate(${e-v.width/2} ${t-v.height/2})`,className:k,visibility:v.width?"visible":"hidden",...h},o&&W.createElement("rect",{width:v.width+2*s[0],x:-s[0],y:-s[1],height:v.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:l,ry:l}),W.createElement("text",{className:"react-flow__edge-text",y:v.height/2,dy:"0.3em",ref:p,style:r},n),u)};var Zy=b.memo(Gy);const ac=e=>({width:e.offsetWidth,height:e.offsetHeight}),zr=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ic=(e={x:0,y:0},t)=>({x:zr(e.x,t[0][0],t[1][0]),y:zr(e.y,t[0][1],t[1][1])}),Nl=(e,t,n)=>e<t?zr(Math.abs(e-t),1,50)/50:e>n?-zr(Math.abs(e-n),1,50)/50:0,md=(e,t)=>{const n=Nl(e.x,35,t.width-35)*20,r=Nl(e.y,35,t.height-35)*20;return[n,r]},pd=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},gd=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),To=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),yd=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Tl=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Qy=(e,t)=>yd(gd(To(e),To(t))),ps=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Jy=e=>Zt(e.width)&&Zt(e.height)&&Zt(e.x)&&Zt(e.y),Zt=e=>!isNaN(e)&&isFinite(e),ut=Symbol.for("internals"),vd=["Enter"," ","Escape"],e0=(e,t)=>{},t0=e=>"nativeEvent"in e;function gs(e){var o,i;const t=t0(e)?e.nativeEvent:e,n=((i=(o=t.composedPath)==null?void 0:o.call(t))==null?void 0:i[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const wd=e=>"clientX"in e,Zn=(e,t)=>{var i,s;const n=wd(e),r=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,o=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},Aa=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},$o=({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:v,interactionWidth:y=20})=>W.createElement(W.Fragment,null,W.createElement("path",{id:e,style:h,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:p,markerStart:v}),y&&W.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:y,className:"react-flow__edge-interaction"}),o&&Zt(n)&&Zt(r)?W.createElement(Zy,{x:n,y:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d}):null);$o.displayName="BaseEdge";function so(e,t,n){return n===void 0?n:r=>{const o=t().edges.find(i=>i.id===e);o&&n(r,{...o})}}function bd({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,i=n<e?n+o:n-o,s=Math.abs(r-t)/2,l=r<t?r+s:r-s;return[i,l,o,s]}function xd({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:s,targetControlY:l}){const u=e*.125+o*.375+s*.375+n*.125,d=t*.125+i*.375+l*.375+r*.125,h=Math.abs(u-e),p=Math.abs(d-t);return[u,d,h,p]}var wr;(function(e){e.Strict="strict",e.Loose="loose"})(wr||(wr={}));var dr;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(dr||(dr={}));var Co;(function(e){e.Partial="partial",e.Full="full"})(Co||(Co={}));var Kn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Kn||(Kn={}));var $a;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})($a||($a={}));var Oe;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Oe||(Oe={}));function Cl({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===Oe.Left||e===Oe.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function Sd({sourceX:e,sourceY:t,sourcePosition:n=Oe.Bottom,targetX:r,targetY:o,targetPosition:i=Oe.Top}){const[s,l]=Cl({pos:n,x1:e,y1:t,x2:r,y2:o}),[u,d]=Cl({pos:i,x1:r,y1:o,x2:e,y2:t}),[h,p,v,y]=xd({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${e},${t} C${s},${l} ${u},${d} ${r},${o}`,h,p,v,y]}const sc=b.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=Oe.Bottom,targetPosition:i=Oe.Top,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:v,markerEnd:y,markerStart:k,interactionWidth:S})=>{const[N,T,$]=Sd({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:i});return W.createElement($o,{path:N,labelX:T,labelY:$,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:v,markerEnd:y,markerStart:k,interactionWidth:S})});sc.displayName="SimpleBezierEdge";const Dl={[Oe.Left]:{x:-1,y:0},[Oe.Right]:{x:1,y:0},[Oe.Top]:{x:0,y:-1},[Oe.Bottom]:{x:0,y:1}},n0=({source:e,sourcePosition:t=Oe.Bottom,target:n})=>t===Oe.Left||t===Oe.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Ol=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function r0({source:e,sourcePosition:t=Oe.Bottom,target:n,targetPosition:r=Oe.Top,center:o,offset:i}){const s=Dl[t],l=Dl[r],u={x:e.x+s.x*i,y:e.y+s.y*i},d={x:n.x+l.x*i,y:n.y+l.y*i},h=n0({source:u,sourcePosition:t,target:d}),p=h.x!==0?"x":"y",v=h[p];let y=[],k,S;const N={x:0,y:0},T={x:0,y:0},[$,I,C,X]=bd({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[p]*l[p]===-1){k=o.x??$,S=o.y??I;const H=[{x:k,y:u.y},{x:k,y:d.y}],ee=[{x:u.x,y:S},{x:d.x,y:S}];s[p]===v?y=p==="x"?H:ee:y=p==="x"?ee:H}else{const H=[{x:u.x,y:d.y}],ee=[{x:d.x,y:u.y}];if(p==="x"?y=s.x===v?ee:H:y=s.y===v?H:ee,t===r){const ce=Math.abs(e[p]-n[p]);if(ce<=i){const E=Math.min(i-1,i-ce);s[p]===v?N[p]=(u[p]>e[p]?-1:1)*E:T[p]=(d[p]>n[p]?-1:1)*E}}if(t!==r){const ce=p==="x"?"y":"x",E=s[p]===l[ce],z=u[ce]>d[ce],D=u[ce]<d[ce];(s[p]===1&&(!E&&z||E&&D)||s[p]!==1&&(!E&&D||E&&z))&&(y=p==="x"?H:ee)}const K={x:u.x+N.x,y:u.y+N.y},ne={x:d.x+T.x,y:d.y+T.y},U=Math.max(Math.abs(K.x-y[0].x),Math.abs(ne.x-y[0].x)),ie=Math.max(Math.abs(K.y-y[0].y),Math.abs(ne.y-y[0].y));U>=ie?(k=(K.x+ne.x)/2,S=y[0].y):(k=y[0].x,S=(K.y+ne.y)/2)}return[[e,{x:u.x+N.x,y:u.y+N.y},...y,{x:d.x+T.x,y:d.y+T.y},n],k,S,C,X]}function o0(e,t,n,r){const o=Math.min(Ol(e,t)/2,Ol(t,n)/2,r),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){const d=e.x<n.x?-1:1,h=e.y<n.y?1:-1;return`L ${i+o*d},${s}Q ${i},${s} ${i},${s+o*h}`}const l=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${i},${s+o*u}Q ${i},${s} ${i+o*l},${s}`}function ys({sourceX:e,sourceY:t,sourcePosition:n=Oe.Bottom,targetX:r,targetY:o,targetPosition:i=Oe.Top,borderRadius:s=5,centerX:l,centerY:u,offset:d=20}){const[h,p,v,y,k]=r0({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:l,y:u},offset:d});return[h.reduce((N,T,$)=>{let I="";return $>0&&$<h.length-1?I=o0(h[$-1],T,h[$+1],s):I=`${$===0?"M":"L"}${T.x} ${T.y}`,N+=I,N},""),p,v,y,k]}const Za=b.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:h,sourcePosition:p=Oe.Bottom,targetPosition:v=Oe.Top,markerEnd:y,markerStart:k,pathOptions:S,interactionWidth:N})=>{const[T,$,I]=ys({sourceX:e,sourceY:t,sourcePosition:p,targetX:n,targetY:r,targetPosition:v,borderRadius:S==null?void 0:S.borderRadius,offset:S==null?void 0:S.offset});return W.createElement($o,{path:T,labelX:$,labelY:I,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:h,markerEnd:y,markerStart:k,interactionWidth:N})});Za.displayName="SmoothStepEdge";const cc=b.memo(e=>{var t;return W.createElement(Za,{...e,pathOptions:b.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});cc.displayName="StepEdge";function a0({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,i,s,l]=bd({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,i,s,l]}const lc=b.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:v,interactionWidth:y})=>{const[k,S,N]=a0({sourceX:e,sourceY:t,targetX:n,targetY:r});return W.createElement($o,{path:k,labelX:S,labelY:N,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:v,interactionWidth:y})});lc.displayName="StraightEdge";function pa(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function jl({pos:e,x1:t,y1:n,x2:r,y2:o,c:i}){switch(e){case Oe.Left:return[t-pa(t-r,i),n];case Oe.Right:return[t+pa(r-t,i),n];case Oe.Top:return[t,n-pa(n-o,i)];case Oe.Bottom:return[t,n+pa(o-n,i)]}}function kd({sourceX:e,sourceY:t,sourcePosition:n=Oe.Bottom,targetX:r,targetY:o,targetPosition:i=Oe.Top,curvature:s=.25}){const[l,u]=jl({pos:n,x1:e,y1:t,x2:r,y2:o,c:s}),[d,h]=jl({pos:i,x1:r,y1:o,x2:e,y2:t,c:s}),[p,v,y,k]=xd({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:l,sourceControlY:u,targetControlX:d,targetControlY:h});return[`M${e},${t} C${l},${u} ${d},${h} ${r},${o}`,p,v,y,k]}const Ra=b.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=Oe.Bottom,targetPosition:i=Oe.Top,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:v,markerEnd:y,markerStart:k,pathOptions:S,interactionWidth:N})=>{const[T,$,I]=kd({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:i,curvature:S==null?void 0:S.curvature});return W.createElement($o,{path:T,labelX:$,labelY:I,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:v,markerEnd:y,markerStart:k,interactionWidth:N})});Ra.displayName="BezierEdge";const uc=b.createContext(null),i0=uc.Provider;uc.Consumer;const s0=()=>b.useContext(uc),c0=e=>"id"in e&&"source"in e&&"target"in e,l0=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,vs=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,u0=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),d0=(e,t)=>{if(!e.source||!e.target)return t;let n;return c0(e)?n={...e}:n={...e,id:l0(e)},u0(n,t)?t:t.concat(n)},ws=({x:e,y:t},[n,r,o],i,[s,l])=>{const u={x:(e-n)/o,y:(t-r)/o};return i?{x:s*Math.round(u.x/s),y:l*Math.round(u.y/l)}:u},Ed=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),mr=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],o={x:e.position.x-n,y:e.position.y-r};return{...o,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:o}},Qa=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const{x:i,y:s}=mr(o,t).positionAbsolute;return gd(r,To({x:i,y:s,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return yd(n)},_d=(e,t,[n,r,o]=[0,0,1],i=!1,s=!1,l=[0,0])=>{const u={x:(t.x-n)/o,y:(t.y-r)/o,width:t.width/o,height:t.height/o},d=[];return e.forEach(h=>{const{width:p,height:v,selectable:y=!0,hidden:k=!1}=h;if(s&&!y||k)return!1;const{positionAbsolute:S}=mr(h,l),N={x:S.x,y:S.y,width:p||0,height:v||0},T=ps(u,N),$=typeof p>"u"||typeof v>"u"||p===null||v===null,I=i&&T>0,C=(p||0)*(v||0);($||I||T>=C||h.dragging)&&d.push(h)}),d},Nd=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},Td=(e,t,n,r,o,i=.1)=>{const s=t/(e.width*(1+i)),l=n/(e.height*(1+i)),u=Math.min(s,l),d=zr(u,r,o),h=e.x+e.width/2,p=e.y+e.height/2,v=t/2-h*d,y=n/2-p*d;return{x:v,y,zoom:d}},ir=(e,t=0)=>e.transition().duration(t);function Pl(e,t,n,r){return(t[n]||[]).reduce((o,i)=>{var s,l;return`${e.id}-${i.id}-${n}`!==r&&o.push({id:i.id||null,type:n,nodeId:e.id,x:(((s=e.positionAbsolute)==null?void 0:s.x)??0)+i.x+i.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+i.y+i.height/2}),o},[])}function f0(e,t,n,r,o,i){const{x:s,y:l}=Zn(e),d=t.elementsFromPoint(s,l).find(k=>k.classList.contains("react-flow__handle"));if(d){const k=d.getAttribute("data-nodeid");if(k){const S=dc(void 0,d),N=d.getAttribute("data-handleid"),T=i({nodeId:k,id:N,type:S});if(T){const $=o.find(I=>I.nodeId===k&&I.type===S&&I.id===N);return{handle:{id:N,type:S,nodeId:k,x:($==null?void 0:$.x)||n.x,y:($==null?void 0:$.y)||n.y},validHandleResult:T}}}}let h=[],p=1/0;if(o.forEach(k=>{const S=Math.sqrt((k.x-n.x)**2+(k.y-n.y)**2);if(S<=r){const N=i(k);S<=p&&(S<p?h=[{handle:k,validHandleResult:N}]:S===p&&h.push({handle:k,validHandleResult:N}),p=S)}}),!h.length)return{handle:null,validHandleResult:Cd()};if(h.length===1)return h[0];const v=h.some(({validHandleResult:k})=>k.isValid),y=h.some(({handle:k})=>k.type==="target");return h.find(({handle:k,validHandleResult:S})=>y?k.type==="target":v?S.isValid:!0)||h[0]}const h0={source:null,target:null,sourceHandle:null,targetHandle:null},Cd=()=>({handleDomNode:null,isValid:!1,connection:h0,endHandle:null});function Dd(e,t,n,r,o,i,s){const l=o==="target",u=s.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),d={...Cd(),handleDomNode:u};if(u){const h=dc(void 0,u),p=u.getAttribute("data-nodeid"),v=u.getAttribute("data-handleid"),y=u.classList.contains("connectable"),k=u.classList.contains("connectableend"),S={source:l?p:n,sourceHandle:l?v:r,target:l?n:p,targetHandle:l?r:v};d.connection=S,y&&k&&(t===wr.Strict?l&&h==="source"||!l&&h==="target":p!==n||v!==r)&&(d.endHandle={nodeId:p,handleId:v,type:h},d.isValid=i(S))}return d}function m0({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((o,i)=>{if(i[ut]){const{handleBounds:s}=i[ut];let l=[],u=[];s&&(l=Pl(i,s,"source",`${t}-${n}-${r}`),u=Pl(i,s,"target",`${t}-${n}-${r}`)),o.push(...l,...u)}return o},[])}function dc(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Yi(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function p0(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Od({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:o,getState:i,setState:s,isValidConnection:l,edgeUpdaterType:u,onReconnectEnd:d}){const h=pd(e.target),{connectionMode:p,domNode:v,autoPanOnConnect:y,connectionRadius:k,onConnectStart:S,panBy:N,getNodes:T,cancelConnection:$}=i();let I=0,C;const{x:X,y:q}=Zn(e),H=h==null?void 0:h.elementFromPoint(X,q),ee=dc(u,H),K=v==null?void 0:v.getBoundingClientRect();if(!K||!ee)return;let ne,U=Zn(e,K),ie=!1,ce=null,E=!1,z=null;const D=m0({nodes:T(),nodeId:n,handleId:t,handleType:ee}),Q=()=>{if(!y)return;const[G,se]=md(U,K);N({x:G,y:se}),I=requestAnimationFrame(Q)};s({connectionPosition:U,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:ee,connectionStartHandle:{nodeId:n,handleId:t,type:ee},connectionEndHandle:null}),S==null||S(e,{nodeId:n,handleId:t,handleType:ee});function J(G){const{transform:se}=i();U=Zn(G,K);const{handle:ae,validHandleResult:de}=f0(G,h,ws(U,se,!1,[1,1]),k,D,we=>Dd(we,p,n,t,o?"target":"source",l,h));if(C=ae,ie||(Q(),ie=!0),z=de.handleDomNode,ce=de.connection,E=de.isValid,s({connectionPosition:C&&E?Ed({x:C.x,y:C.y},se):U,connectionStatus:p0(!!C,E),connectionEndHandle:de.endHandle}),!C&&!E&&!z)return Yi(ne);ce.source!==ce.target&&z&&(Yi(ne),ne=z,z.classList.add("connecting","react-flow__handle-connecting"),z.classList.toggle("valid",E),z.classList.toggle("react-flow__handle-valid",E))}function j(G){var se,ae;(C||z)&&ce&&E&&(r==null||r(ce)),(ae=(se=i()).onConnectEnd)==null||ae.call(se,G),u&&(d==null||d(G)),Yi(ne),$(),cancelAnimationFrame(I),ie=!1,E=!1,ce=null,z=null,h.removeEventListener("mousemove",J),h.removeEventListener("mouseup",j),h.removeEventListener("touchmove",J),h.removeEventListener("touchend",j)}h.addEventListener("mousemove",J),h.addEventListener("mouseup",j),h.addEventListener("touchmove",J),h.addEventListener("touchend",j)}const Il=()=>!0,g0=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),y0=(e,t,n)=>r=>{const{connectionStartHandle:o,connectionEndHandle:i,connectionClickStartHandle:s}=r;return{connecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n||(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n}},jd=b.forwardRef(({type:e="source",position:t=Oe.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:i=!0,id:s,onConnect:l,children:u,className:d,onMouseDown:h,onTouchStart:p,...v},y)=>{var K,ne;const k=s||null,S=e==="target",N=vt(),T=s0(),{connectOnClick:$,noPanClassName:I}=tt(g0,St),{connecting:C,clickConnecting:X}=tt(y0(T,k,e),St);T||(ne=(K=N.getState()).onError)==null||ne.call(K,"010",Pn.error010());const q=U=>{const{defaultEdgeOptions:ie,onConnect:ce,hasDefaultEdges:E}=N.getState(),z={...ie,...U};if(E){const{edges:D,setEdges:Q}=N.getState();Q(d0(z,D))}ce==null||ce(z),l==null||l(z)},H=U=>{if(!T)return;const ie=wd(U);o&&(ie&&U.button===0||!ie)&&Od({event:U,handleId:k,nodeId:T,onConnect:q,isTarget:S,getState:N.getState,setState:N.setState,isValidConnection:n||N.getState().isValidConnection||Il}),ie?h==null||h(U):p==null||p(U)},ee=U=>{const{onClickConnectStart:ie,onClickConnectEnd:ce,connectionClickStartHandle:E,connectionMode:z,isValidConnection:D}=N.getState();if(!T||!E&&!o)return;if(!E){ie==null||ie(U,{nodeId:T,handleId:k,handleType:e}),N.setState({connectionClickStartHandle:{nodeId:T,type:e,handleId:k}});return}const Q=pd(U.target),J=n||D||Il,{connection:j,isValid:G}=Dd({nodeId:T,id:k,type:e},z,E.nodeId,E.handleId||null,E.type,J,Q);G&&q(j),ce==null||ce(U),N.setState({connectionClickStartHandle:null})};return W.createElement("div",{"data-handleid":k,"data-nodeid":T,"data-handlepos":t,"data-id":`${T}-${k}-${e}`,className:_t(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",I,d,{source:!S,target:S,connectable:r,connectablestart:o,connectableend:i,connecting:X,connectionindicator:r&&(o&&!C||i&&C)}]),onMouseDown:H,onTouchStart:H,onClick:$?ee:void 0,ref:y,...v},u)});jd.displayName="Handle";var Xn=b.memo(jd);const Pd=({data:e,isConnectable:t,targetPosition:n=Oe.Top,sourcePosition:r=Oe.Bottom})=>W.createElement(W.Fragment,null,W.createElement(Xn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,W.createElement(Xn,{type:"source",position:r,isConnectable:t}));Pd.displayName="DefaultNode";var bs=b.memo(Pd);const Id=({data:e,isConnectable:t,sourcePosition:n=Oe.Bottom})=>W.createElement(W.Fragment,null,e==null?void 0:e.label,W.createElement(Xn,{type:"source",position:n,isConnectable:t}));Id.displayName="InputNode";var Md=b.memo(Id);const Ad=({data:e,isConnectable:t,targetPosition:n=Oe.Top})=>W.createElement(W.Fragment,null,W.createElement(Xn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);Ad.displayName="OutputNode";var $d=b.memo(Ad);const fc=()=>null;fc.displayName="GroupNode";const v0=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),ga=e=>e.id;function w0(e,t){return St(e.selectedNodes.map(ga),t.selectedNodes.map(ga))&&St(e.selectedEdges.map(ga),t.selectedEdges.map(ga))}const Rd=b.memo(({onSelectionChange:e})=>{const t=vt(),{selectedNodes:n,selectedEdges:r}=tt(v0,w0);return b.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChange.forEach(i=>i(o))},[n,r,e]),null});Rd.displayName="SelectionListener";const b0=e=>!!e.onSelectionChange;function x0({onSelectionChange:e}){const t=tt(b0);return e||t?W.createElement(Rd,{onSelectionChange:e}):null}const S0=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Cr(e,t){b.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function He(e,t,n){b.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const k0=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:i,onConnectEnd:s,onClickConnectStart:l,onClickConnectEnd:u,nodesDraggable:d,nodesConnectable:h,nodesFocusable:p,edgesFocusable:v,edgesUpdatable:y,elevateNodesOnSelect:k,minZoom:S,maxZoom:N,nodeExtent:T,onNodesChange:$,onEdgesChange:I,elementsSelectable:C,connectionMode:X,snapGrid:q,snapToGrid:H,translateExtent:ee,connectOnClick:K,defaultEdgeOptions:ne,fitView:U,fitViewOptions:ie,onNodesDelete:ce,onEdgesDelete:E,onNodeDrag:z,onNodeDragStart:D,onNodeDragStop:Q,onSelectionDrag:J,onSelectionDragStart:j,onSelectionDragStop:G,noPanClassName:se,nodeOrigin:ae,rfId:de,autoPanOnConnect:we,autoPanOnNodeDrag:ke,onError:Ne,connectionRadius:De,isValidConnection:Pe,nodeDragThreshold:fe})=>{const{setNodes:Me,setEdges:Ue,setDefaultNodesAndEdges:je,setMinZoom:Je,setMaxZoom:$e,setTranslateExtent:ze,setNodeExtent:qe,reset:Ye}=tt(S0,St),Ce=vt();return b.useEffect(()=>{const st=r==null?void 0:r.map(wt=>({...wt,...ne}));return je(n,st),()=>{Ye()}},[]),He("defaultEdgeOptions",ne,Ce.setState),He("connectionMode",X,Ce.setState),He("onConnect",o,Ce.setState),He("onConnectStart",i,Ce.setState),He("onConnectEnd",s,Ce.setState),He("onClickConnectStart",l,Ce.setState),He("onClickConnectEnd",u,Ce.setState),He("nodesDraggable",d,Ce.setState),He("nodesConnectable",h,Ce.setState),He("nodesFocusable",p,Ce.setState),He("edgesFocusable",v,Ce.setState),He("edgesUpdatable",y,Ce.setState),He("elementsSelectable",C,Ce.setState),He("elevateNodesOnSelect",k,Ce.setState),He("snapToGrid",H,Ce.setState),He("snapGrid",q,Ce.setState),He("onNodesChange",$,Ce.setState),He("onEdgesChange",I,Ce.setState),He("connectOnClick",K,Ce.setState),He("fitViewOnInit",U,Ce.setState),He("fitViewOnInitOptions",ie,Ce.setState),He("onNodesDelete",ce,Ce.setState),He("onEdgesDelete",E,Ce.setState),He("onNodeDrag",z,Ce.setState),He("onNodeDragStart",D,Ce.setState),He("onNodeDragStop",Q,Ce.setState),He("onSelectionDrag",J,Ce.setState),He("onSelectionDragStart",j,Ce.setState),He("onSelectionDragStop",G,Ce.setState),He("noPanClassName",se,Ce.setState),He("nodeOrigin",ae,Ce.setState),He("rfId",de,Ce.setState),He("autoPanOnConnect",we,Ce.setState),He("autoPanOnNodeDrag",ke,Ce.setState),He("onError",Ne,Ce.setState),He("connectionRadius",De,Ce.setState),He("isValidConnection",Pe,Ce.setState),He("nodeDragThreshold",fe,Ce.setState),Cr(e,Me),Cr(t,Ue),Cr(S,Je),Cr(N,$e),Cr(ee,ze),Cr(T,qe),null},Ml={display:"none"},E0={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ld="react-flow__node-desc",Fd="react-flow__edge-desc",_0="react-flow__aria-live",N0=e=>e.ariaLiveMessage;function T0({rfId:e}){const t=tt(N0);return W.createElement("div",{id:`${_0}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:E0},t)}function C0({rfId:e,disableKeyboardA11y:t}){return W.createElement(W.Fragment,null,W.createElement("div",{id:`${Ld}-${e}`,style:Ml},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),W.createElement("div",{id:`${Fd}-${e}`,style:Ml},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&W.createElement(T0,{rfId:e}))}var Do=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=b.useState(!1),o=b.useRef(!1),i=b.useRef(new Set([])),[s,l]=b.useMemo(()=>{if(e!==null){const d=(Array.isArray(e)?e:[e]).filter(p=>typeof p=="string").map(p=>p.split("+")),h=d.reduce((p,v)=>p.concat(...v),[]);return[d,h]}return[[],[]]},[e]);return b.useEffect(()=>{const u=typeof document<"u"?document:null,d=(t==null?void 0:t.target)||u;if(e!==null){const h=y=>{if(o.current=y.ctrlKey||y.metaKey||y.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&gs(y))return!1;const S=$l(y.code,l);i.current.add(y[S]),Al(s,i.current,!1)&&(y.preventDefault(),r(!0))},p=y=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&gs(y))return!1;const S=$l(y.code,l);Al(s,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(y[S]),y.key==="Meta"&&i.current.clear(),o.current=!1},v=()=>{i.current.clear(),r(!1)};return d==null||d.addEventListener("keydown",h),d==null||d.addEventListener("keyup",p),window.addEventListener("blur",v),()=>{d==null||d.removeEventListener("keydown",h),d==null||d.removeEventListener("keyup",p),window.removeEventListener("blur",v)}}},[e,r]),n};function Al(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function $l(e,t){return t.includes(e)?"code":"key"}function Wd(e,t,n,r){var l,u;const o=e.parentNode||e.parentId;if(!o)return n;const i=t.get(o),s=mr(i,r);return Wd(i,t,{x:(n.x??0)+s.x,y:(n.y??0)+s.y,z:(((l=i[ut])==null?void 0:l.z)??0)>(n.z??0)?((u=i[ut])==null?void 0:u.z)??0:n.z??0},r)}function Bd(e,t,n){e.forEach(r=>{var i;const o=r.parentNode||r.parentId;if(o&&!e.has(o))throw new Error(`Parent node ${o} not found`);if(o||n!=null&&n[r.id]){const{x:s,y:l,z:u}=Wd(r,e,{...r.position,z:((i=r[ut])==null?void 0:i.z)??0},t);r.positionAbsolute={x:s,y:l},r[ut].z=u,n!=null&&n[r.id]&&(r[ut].isParent=!0)}})}function Vi(e,t,n,r){const o=new Map,i={},s=r?1e3:0;return e.forEach(l=>{var y;const u=(Zt(l.zIndex)?l.zIndex:0)+(l.selected?s:0),d=t.get(l.id),h={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},p=l.parentNode||l.parentId;p&&(i[p]=!0);const v=(d==null?void 0:d.type)&&(d==null?void 0:d.type)!==l.type;Object.defineProperty(h,ut,{enumerable:!1,value:{handleBounds:v||(y=d==null?void 0:d[ut])==null?void 0:y.handleBounds,z:u}}),o.set(l.id,h)}),Bd(o,n,i),o}function Hd(e,t={}){const{getNodes:n,width:r,height:o,minZoom:i,maxZoom:s,d3Zoom:l,d3Selection:u,fitViewOnInitDone:d,fitViewOnInit:h,nodeOrigin:p}=e(),v=t.initial&&!d&&h;if(l&&u&&(v||!t.initial)){const k=n().filter(N=>{var $;const T=t.includeHiddenNodes?N.width&&N.height:!N.hidden;return($=t.nodes)!=null&&$.length?T&&t.nodes.some(I=>I.id===N.id):T}),S=k.every(N=>N.width&&N.height);if(k.length>0&&S){const N=Qa(k,p),{x:T,y:$,zoom:I}=Td(N,r,o,t.minZoom??i,t.maxZoom??s,t.padding??.1),C=Dn.translate(T,$).scale(I);return typeof t.duration=="number"&&t.duration>0?l.transform(ir(u,t.duration),C):l.transform(u,C),!0}}return!1}function D0(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[ut]:r[ut],selected:n.selected})}),new Map(t)}function O0(e,t){return t.map(n=>{const r=e.find(o=>o.id===n.id);return r&&(n.selected=r.selected),n})}function ya({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:o,edges:i,onNodesChange:s,onEdgesChange:l,hasDefaultNodes:u,hasDefaultEdges:d}=n();e!=null&&e.length&&(u&&r({nodeInternals:D0(e,o)}),s==null||s(e)),t!=null&&t.length&&(d&&r({edges:O0(t,i)}),l==null||l(t))}const Dr=()=>{},j0={zoomIn:Dr,zoomOut:Dr,zoomTo:Dr,getZoom:()=>1,setViewport:Dr,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Dr,fitBounds:Dr,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},P0=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),I0=()=>{const e=vt(),{d3Zoom:t,d3Selection:n}=tt(P0,St);return b.useMemo(()=>n&&t?{zoomIn:o=>t.scaleBy(ir(n,o==null?void 0:o.duration),1.2),zoomOut:o=>t.scaleBy(ir(n,o==null?void 0:o.duration),1/1.2),zoomTo:(o,i)=>t.scaleTo(ir(n,i==null?void 0:i.duration),o),getZoom:()=>e.getState().transform[2],setViewport:(o,i)=>{const[s,l,u]=e.getState().transform,d=Dn.translate(o.x??s,o.y??l).scale(o.zoom??u);t.transform(ir(n,i==null?void 0:i.duration),d)},getViewport:()=>{const[o,i,s]=e.getState().transform;return{x:o,y:i,zoom:s}},fitView:o=>Hd(e.getState,o),setCenter:(o,i,s)=>{const{width:l,height:u,maxZoom:d}=e.getState(),h=typeof(s==null?void 0:s.zoom)<"u"?s.zoom:d,p=l/2-o*h,v=u/2-i*h,y=Dn.translate(p,v).scale(h);t.transform(ir(n,s==null?void 0:s.duration),y)},fitBounds:(o,i)=>{const{width:s,height:l,minZoom:u,maxZoom:d}=e.getState(),{x:h,y:p,zoom:v}=Td(o,s,l,u,d,(i==null?void 0:i.padding)??.1),y=Dn.translate(h,p).scale(v);t.transform(ir(n,i==null?void 0:i.duration),y)},project:o=>{const{transform:i,snapToGrid:s,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),ws(o,i,s,l)},screenToFlowPosition:o=>{const{transform:i,snapToGrid:s,snapGrid:l,domNode:u}=e.getState();if(!u)return o;const{x:d,y:h}=u.getBoundingClientRect(),p={x:o.x-d,y:o.y-h};return ws(p,i,s,l)},flowToScreenPosition:o=>{const{transform:i,domNode:s}=e.getState();if(!s)return o;const{x:l,y:u}=s.getBoundingClientRect(),d=Ed(o,i);return{x:d.x+l,y:d.y+u}},viewportInitialized:!0}:j0,[t,n])};function hc(){const e=I0(),t=vt(),n=b.useCallback(()=>t.getState().getNodes().map(S=>({...S})),[]),r=b.useCallback(S=>t.getState().nodeInternals.get(S),[]),o=b.useCallback(()=>{const{edges:S=[]}=t.getState();return S.map(N=>({...N}))},[]),i=b.useCallback(S=>{const{edges:N=[]}=t.getState();return N.find(T=>T.id===S)},[]),s=b.useCallback(S=>{const{getNodes:N,setNodes:T,hasDefaultNodes:$,onNodesChange:I}=t.getState(),C=N(),X=typeof S=="function"?S(C):S;if($)T(X);else if(I){const q=X.length===0?C.map(H=>({type:"remove",id:H.id})):X.map(H=>({item:H,type:"reset"}));I(q)}},[]),l=b.useCallback(S=>{const{edges:N=[],setEdges:T,hasDefaultEdges:$,onEdgesChange:I}=t.getState(),C=typeof S=="function"?S(N):S;if($)T(C);else if(I){const X=C.length===0?N.map(q=>({type:"remove",id:q.id})):C.map(q=>({item:q,type:"reset"}));I(X)}},[]),u=b.useCallback(S=>{const N=Array.isArray(S)?S:[S],{getNodes:T,setNodes:$,hasDefaultNodes:I,onNodesChange:C}=t.getState();if(I){const q=[...T(),...N];$(q)}else if(C){const X=N.map(q=>({item:q,type:"add"}));C(X)}},[]),d=b.useCallback(S=>{const N=Array.isArray(S)?S:[S],{edges:T=[],setEdges:$,hasDefaultEdges:I,onEdgesChange:C}=t.getState();if(I)$([...T,...N]);else if(C){const X=N.map(q=>({item:q,type:"add"}));C(X)}},[]),h=b.useCallback(()=>{const{getNodes:S,edges:N=[],transform:T}=t.getState(),[$,I,C]=T;return{nodes:S().map(X=>({...X})),edges:N.map(X=>({...X})),viewport:{x:$,y:I,zoom:C}}},[]),p=b.useCallback(({nodes:S,edges:N})=>{const{nodeInternals:T,getNodes:$,edges:I,hasDefaultNodes:C,hasDefaultEdges:X,onNodesDelete:q,onEdgesDelete:H,onNodesChange:ee,onEdgesChange:K}=t.getState(),ne=(S||[]).map(z=>z.id),U=(N||[]).map(z=>z.id),ie=$().reduce((z,D)=>{const Q=D.parentNode||D.parentId,J=!ne.includes(D.id)&&Q&&z.find(G=>G.id===Q);return(typeof D.deletable=="boolean"?D.deletable:!0)&&(ne.includes(D.id)||J)&&z.push(D),z},[]),ce=I.filter(z=>typeof z.deletable=="boolean"?z.deletable:!0),E=ce.filter(z=>U.includes(z.id));if(ie||E){const z=Nd(ie,ce),D=[...E,...z],Q=D.reduce((J,j)=>(J.includes(j.id)||J.push(j.id),J),[]);if((X||C)&&(X&&t.setState({edges:I.filter(J=>!Q.includes(J.id))}),C&&(ie.forEach(J=>{T.delete(J.id)}),t.setState({nodeInternals:new Map(T)}))),Q.length>0&&(H==null||H(D),K&&K(Q.map(J=>({id:J,type:"remove"})))),ie.length>0&&(q==null||q(ie),ee)){const J=ie.map(j=>({id:j.id,type:"remove"}));ee(J)}}},[]),v=b.useCallback(S=>{const N=Jy(S),T=N?null:t.getState().nodeInternals.get(S.id);return!N&&!T?[null,null,N]:[N?S:Tl(T),T,N]},[]),y=b.useCallback((S,N=!0,T)=>{const[$,I,C]=v(S);return $?(T||t.getState().getNodes()).filter(X=>{if(!C&&(X.id===I.id||!X.positionAbsolute))return!1;const q=Tl(X),H=ps(q,$);return N&&H>0||H>=$.width*$.height}):[]},[]),k=b.useCallback((S,N,T=!0)=>{const[$]=v(S);if(!$)return!1;const I=ps($,N);return T&&I>0||I>=$.width*$.height},[]);return b.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:o,getEdge:i,setNodes:s,setEdges:l,addNodes:u,addEdges:d,toObject:h,deleteElements:p,getIntersectingNodes:y,isNodeIntersecting:k}),[e,n,r,o,i,s,l,u,d,h,p,y,k])}const M0={actInsideInputWithModifier:!1};var A0=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=vt(),{deleteElements:r}=hc(),o=Do(e,M0),i=Do(t);b.useEffect(()=>{if(o){const{edges:s,getNodes:l}=n.getState(),u=l().filter(h=>h.selected),d=s.filter(h=>h.selected);r({nodes:u,edges:d}),n.setState({nodesSelectionActive:!1})}},[o]),b.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])};function $0(e){const t=vt();b.useEffect(()=>{let n;const r=()=>{var i,s;if(!e.current)return;const o=ac(e.current);(o.height===0||o.width===0)&&((s=(i=t.getState()).onError)==null||s.call(i,"004",Pn.error004())),t.setState({width:o.width||500,height:o.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const mc={position:"absolute",width:"100%",height:"100%",top:0,left:0},R0=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,va=e=>({x:e.x,y:e.y,zoom:e.k}),Or=(e,t)=>e.target.closest(`.${t}`),Rl=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Ll=e=>{const t=e.ctrlKey&&Aa()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},L0=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),F0=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:o=!0,zoomOnPinch:i=!0,panOnScroll:s=!1,panOnScrollSpeed:l=.5,panOnScrollMode:u=dr.Free,zoomOnDoubleClick:d=!0,elementsSelectable:h,panOnDrag:p=!0,defaultViewport:v,translateExtent:y,minZoom:k,maxZoom:S,zoomActivationKeyCode:N,preventScrolling:T=!0,children:$,noWheelClassName:I,noPanClassName:C})=>{const X=b.useRef(),q=vt(),H=b.useRef(!1),ee=b.useRef(!1),K=b.useRef(null),ne=b.useRef({x:0,y:0,zoom:0}),{d3Zoom:U,d3Selection:ie,d3ZoomHandler:ce,userSelectionActive:E}=tt(L0,St),z=Do(N),D=b.useRef(0),Q=b.useRef(!1),J=b.useRef();return $0(K),b.useEffect(()=>{if(K.current){const j=K.current.getBoundingClientRect(),G=fd().scaleExtent([k,S]).translateExtent(y),se=Gt(K.current).call(G),ae=Dn.translate(v.x,v.y).scale(zr(v.zoom,k,S)),de=[[0,0],[j.width,j.height]],we=G.constrain()(ae,de,y);G.transform(se,we),G.wheelDelta(Ll),q.setState({d3Zoom:G,d3Selection:se,d3ZoomHandler:se.on("wheel.zoom"),transform:[we.x,we.y,we.k],domNode:K.current.closest(".react-flow")})}},[]),b.useEffect(()=>{ie&&U&&(s&&!z&&!E?ie.on("wheel.zoom",j=>{if(Or(j,I))return!1;j.preventDefault(),j.stopImmediatePropagation();const G=ie.property("__zoom").k||1;if(j.ctrlKey&&i){const Pe=tn(j),fe=Ll(j),Me=G*Math.pow(2,fe);U.scaleTo(ie,Me,Pe,j);return}const se=j.deltaMode===1?20:1;let ae=u===dr.Vertical?0:j.deltaX*se,de=u===dr.Horizontal?0:j.deltaY*se;!Aa()&&j.shiftKey&&u!==dr.Vertical&&(ae=j.deltaY*se,de=0),U.translateBy(ie,-(ae/G)*l,-(de/G)*l,{internal:!0});const we=va(ie.property("__zoom")),{onViewportChangeStart:ke,onViewportChange:Ne,onViewportChangeEnd:De}=q.getState();clearTimeout(J.current),Q.current||(Q.current=!0,t==null||t(j,we),ke==null||ke(we)),Q.current&&(e==null||e(j,we),Ne==null||Ne(we),J.current=setTimeout(()=>{n==null||n(j,we),De==null||De(we),Q.current=!1},150))},{passive:!1}):typeof ce<"u"&&ie.on("wheel.zoom",function(j,G){if(!T&&j.type==="wheel"&&!j.ctrlKey||Or(j,I))return null;j.preventDefault(),ce.call(this,j,G)},{passive:!1}))},[E,s,u,ie,U,ce,z,i,T,I,t,e,n]),b.useEffect(()=>{U&&U.on("start",j=>{var ae,de;if(!j.sourceEvent||j.sourceEvent.internal)return null;D.current=(ae=j.sourceEvent)==null?void 0:ae.button;const{onViewportChangeStart:G}=q.getState(),se=va(j.transform);H.current=!0,ne.current=se,((de=j.sourceEvent)==null?void 0:de.type)==="mousedown"&&q.setState({paneDragging:!0}),G==null||G(se),t==null||t(j.sourceEvent,se)})},[U,t]),b.useEffect(()=>{U&&(E&&!H.current?U.on("zoom",null):E||U.on("zoom",j=>{var se;const{onViewportChange:G}=q.getState();if(q.setState({transform:[j.transform.x,j.transform.y,j.transform.k]}),ee.current=!!(r&&Rl(p,D.current??0)),(e||G)&&!((se=j.sourceEvent)!=null&&se.internal)){const ae=va(j.transform);G==null||G(ae),e==null||e(j.sourceEvent,ae)}}))},[E,U,e,p,r]),b.useEffect(()=>{U&&U.on("end",j=>{if(!j.sourceEvent||j.sourceEvent.internal)return null;const{onViewportChangeEnd:G}=q.getState();if(H.current=!1,q.setState({paneDragging:!1}),r&&Rl(p,D.current??0)&&!ee.current&&r(j.sourceEvent),ee.current=!1,(n||G)&&R0(ne.current,j.transform)){const se=va(j.transform);ne.current=se,clearTimeout(X.current),X.current=setTimeout(()=>{G==null||G(se),n==null||n(j.sourceEvent,se)},s?150:0)}})},[U,s,p,n,r]),b.useEffect(()=>{U&&U.filter(j=>{const G=z||o,se=i&&j.ctrlKey;if((p===!0||Array.isArray(p)&&p.includes(1))&&j.button===1&&j.type==="mousedown"&&(Or(j,"react-flow__node")||Or(j,"react-flow__edge")))return!0;if(!p&&!G&&!s&&!d&&!i||E||!d&&j.type==="dblclick"||Or(j,I)&&j.type==="wheel"||Or(j,C)&&(j.type!=="wheel"||s&&j.type==="wheel"&&!z)||!i&&j.ctrlKey&&j.type==="wheel"||!G&&!s&&!se&&j.type==="wheel"||!p&&(j.type==="mousedown"||j.type==="touchstart")||Array.isArray(p)&&!p.includes(j.button)&&j.type==="mousedown")return!1;const ae=Array.isArray(p)&&p.includes(j.button)||!j.button||j.button<=1;return(!j.ctrlKey||j.type==="wheel")&&ae})},[E,U,o,i,s,d,p,h,z]),W.createElement("div",{className:"react-flow__renderer",ref:K,style:mc},$)},W0=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function B0(){const{userSelectionActive:e,userSelectionRect:t}=tt(W0,St);return e&&t?W.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Fl(e,t){const n=t.parentNode||t.parentId,r=e.find(o=>o.id===n);if(r){const o=t.position.x+t.width-r.width,i=t.position.y+t.height-r.height;if(o>0||i>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,o>0&&(r.style.width+=o),i>0&&(r.style.height+=i),t.position.x<0){const s=Math.abs(t.position.x);r.position.x=r.position.x-s,r.style.width+=s,t.position.x=0}if(t.position.y<0){const s=Math.abs(t.position.y);r.position.y=r.position.y-s,r.style.height+=s,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function H0(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,o)=>{const i=e.filter(l=>l.id===o.id);if(i.length===0)return r.push(o),r;const s={...o};for(const l of i)if(l)switch(l.type){case"select":{s.selected=l.selected;break}case"position":{typeof l.position<"u"&&(s.position=l.position),typeof l.positionAbsolute<"u"&&(s.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(s.dragging=l.dragging),s.expandParent&&Fl(r,s);break}case"dimensions":{typeof l.dimensions<"u"&&(s.width=l.dimensions.width,s.height=l.dimensions.height),typeof l.updateStyle<"u"&&(s.style={...s.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(s.resizing=l.resizing),s.expandParent&&Fl(r,s);break}case"remove":return r}return r.push(s),r},n)}function zd(e,t){return H0(e,t)}const qn=(e,t)=>({id:e,type:"select",selected:t});function Mr(e,t){return e.reduce((n,r)=>{const o=t.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(qn(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(qn(r.id,!1))),n},[])}const qi=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},z0=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Yd=b.memo(({isSelecting:e,selectionMode:t=Co.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:o,onPaneClick:i,onPaneContextMenu:s,onPaneScroll:l,onPaneMouseEnter:u,onPaneMouseMove:d,onPaneMouseLeave:h,children:p})=>{const v=b.useRef(null),y=vt(),k=b.useRef(0),S=b.useRef(0),N=b.useRef(),{userSelectionActive:T,elementsSelectable:$,dragging:I}=tt(z0,St),C=()=>{y.setState({userSelectionActive:!1,userSelectionRect:null}),k.current=0,S.current=0},X=ce=>{i==null||i(ce),y.getState().resetSelectedElements(),y.setState({nodesSelectionActive:!1})},q=ce=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){ce.preventDefault();return}s==null||s(ce)},H=l?ce=>l(ce):void 0,ee=ce=>{const{resetSelectedElements:E,domNode:z}=y.getState();if(N.current=z==null?void 0:z.getBoundingClientRect(),!$||!e||ce.button!==0||ce.target!==v.current||!N.current)return;const{x:D,y:Q}=Zn(ce,N.current);E(),y.setState({userSelectionRect:{width:0,height:0,startX:D,startY:Q,x:D,y:Q}}),r==null||r(ce)},K=ce=>{const{userSelectionRect:E,nodeInternals:z,edges:D,transform:Q,onNodesChange:J,onEdgesChange:j,nodeOrigin:G,getNodes:se}=y.getState();if(!e||!N.current||!E)return;y.setState({userSelectionActive:!0,nodesSelectionActive:!1});const ae=Zn(ce,N.current),de=E.startX??0,we=E.startY??0,ke={...E,x:ae.x<de?ae.x:de,y:ae.y<we?ae.y:we,width:Math.abs(ae.x-de),height:Math.abs(ae.y-we)},Ne=se(),De=_d(z,ke,Q,t===Co.Partial,!0,G),Pe=Nd(De,D).map(Me=>Me.id),fe=De.map(Me=>Me.id);if(k.current!==fe.length){k.current=fe.length;const Me=Mr(Ne,fe);Me.length&&(J==null||J(Me))}if(S.current!==Pe.length){S.current=Pe.length;const Me=Mr(D,Pe);Me.length&&(j==null||j(Me))}y.setState({userSelectionRect:ke})},ne=ce=>{if(ce.button!==0)return;const{userSelectionRect:E}=y.getState();!T&&E&&ce.target===v.current&&(X==null||X(ce)),y.setState({nodesSelectionActive:k.current>0}),C(),o==null||o(ce)},U=ce=>{T&&(y.setState({nodesSelectionActive:k.current>0}),o==null||o(ce)),C()},ie=$&&(e||T);return W.createElement("div",{className:_t(["react-flow__pane",{dragging:I,selection:e}]),onClick:ie?void 0:qi(X,v),onContextMenu:qi(q,v),onWheel:qi(H,v),onMouseEnter:ie?void 0:u,onMouseDown:ie?ee:void 0,onMouseMove:ie?K:d,onMouseUp:ie?ne:void 0,onMouseLeave:ie?U:h,ref:v,style:mc},p,W.createElement(B0,null))});Yd.displayName="Pane";function Vd(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:Vd(r,t):!1}function Wl(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function Y0(e,t,n,r){return Array.from(e.values()).filter(o=>(o.selected||o.id===r)&&(!o.parentNode||o.parentId||!Vd(o,e))&&(o.draggable||t&&typeof o.draggable>"u")).map(o=>{var i,s;return{id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((i=o.positionAbsolute)==null?void 0:i.x)??0),y:n.y-(((s=o.positionAbsolute)==null?void 0:s.y)??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode||o.parentId,parentId:o.parentNode||o.parentId,width:o.width,height:o.height,expandParent:o.expandParent}})}function V0(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function qd(e,t,n,r,o=[0,0],i){const s=V0(e,e.extent||r);let l=s;const u=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(u&&e.width&&e.height){const p=n.get(u),{x:v,y}=mr(p,o).positionAbsolute;l=p&&Zt(v)&&Zt(y)&&Zt(p.width)&&Zt(p.height)?[[v+e.width*o[0],y+e.height*o[1]],[v+p.width-e.width+e.width*o[0],y+p.height-e.height+e.height*o[1]]]:l}else i==null||i("005",Pn.error005()),l=s;else if(e.extent&&u&&e.extent!=="parent"){const p=n.get(u),{x:v,y}=mr(p,o).positionAbsolute;l=[[e.extent[0][0]+v,e.extent[0][1]+y],[e.extent[1][0]+v,e.extent[1][1]+y]]}let d={x:0,y:0};if(u){const p=n.get(u);d=mr(p,o).positionAbsolute}const h=l&&l!=="parent"?ic(t,l):t;return{position:{x:h.x-d.x,y:h.y-d.y},positionAbsolute:h}}function Ki({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[e?r.find(o=>o.id===e):r[0],r]}const Bl=(e,t,n,r)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return null;const i=Array.from(o),s=t.getBoundingClientRect(),l={x:s.width*r[0],y:s.height*r[1]};return i.map(u=>{const d=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),position:u.getAttribute("data-handlepos"),x:(d.left-s.left-l.x)/n,y:(d.top-s.top-l.y)/n,...ac(u)}})};function co(e,t,n){return n===void 0?n:r=>{const o=t().nodeInternals.get(e);o&&n(r,{...o})}}function xs({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:i,multiSelectionActive:s,nodeInternals:l,onError:u}=t.getState(),d=l.get(e);if(!d){u==null||u("012",Pn.error012(e));return}t.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&s)&&(i({nodes:[d],edges:[]}),requestAnimationFrame(()=>{var h;return(h=r==null?void 0:r.current)==null?void 0:h.blur()})):o([e])}function q0(){const e=vt();return b.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:o,snapToGrid:i}=e.getState(),s=n.touches?n.touches[0].clientX:n.clientX,l=n.touches?n.touches[0].clientY:n.clientY,u={x:(s-r[0])/r[2],y:(l-r[1])/r[2]};return{xSnapped:i?o[0]*Math.round(u.x/o[0]):u.x,ySnapped:i?o[1]*Math.round(u.y/o[1]):u.y,...u}},[])}function Ui(e){return(t,n,r)=>e==null?void 0:e(t,r)}function Kd({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:i,selectNodesOnDrag:s}){const l=vt(),[u,d]=b.useState(!1),h=b.useRef([]),p=b.useRef({x:null,y:null}),v=b.useRef(0),y=b.useRef(null),k=b.useRef({x:0,y:0}),S=b.useRef(null),N=b.useRef(!1),T=b.useRef(!1),$=b.useRef(!1),I=q0();return b.useEffect(()=>{if(e!=null&&e.current){const C=Gt(e.current),X=({x:ee,y:K})=>{const{nodeInternals:ne,onNodeDrag:U,onSelectionDrag:ie,updateNodePositions:ce,nodeExtent:E,snapGrid:z,snapToGrid:D,nodeOrigin:Q,onError:J}=l.getState();p.current={x:ee,y:K};let j=!1,G={x:0,y:0,x2:0,y2:0};if(h.current.length>1&&E){const ae=Qa(h.current,Q);G=To(ae)}if(h.current=h.current.map(ae=>{const de={x:ee-ae.distance.x,y:K-ae.distance.y};D&&(de.x=z[0]*Math.round(de.x/z[0]),de.y=z[1]*Math.round(de.y/z[1]));const we=[[E[0][0],E[0][1]],[E[1][0],E[1][1]]];h.current.length>1&&E&&!ae.extent&&(we[0][0]=ae.positionAbsolute.x-G.x+E[0][0],we[1][0]=ae.positionAbsolute.x+(ae.width??0)-G.x2+E[1][0],we[0][1]=ae.positionAbsolute.y-G.y+E[0][1],we[1][1]=ae.positionAbsolute.y+(ae.height??0)-G.y2+E[1][1]);const ke=qd(ae,de,ne,we,Q,J);return j=j||ae.position.x!==ke.position.x||ae.position.y!==ke.position.y,ae.position=ke.position,ae.positionAbsolute=ke.positionAbsolute,ae}),!j)return;ce(h.current,!0,!0),d(!0);const se=o?U:Ui(ie);if(se&&S.current){const[ae,de]=Ki({nodeId:o,dragItems:h.current,nodeInternals:ne});se(S.current,ae,de)}},q=()=>{if(!y.current)return;const[ee,K]=md(k.current,y.current);if(ee!==0||K!==0){const{transform:ne,panBy:U}=l.getState();p.current.x=(p.current.x??0)-ee/ne[2],p.current.y=(p.current.y??0)-K/ne[2],U({x:ee,y:K})&&X(p.current)}v.current=requestAnimationFrame(q)},H=ee=>{var Q;const{nodeInternals:K,multiSelectionActive:ne,nodesDraggable:U,unselectNodesAndEdges:ie,onNodeDragStart:ce,onSelectionDragStart:E}=l.getState();T.current=!0;const z=o?ce:Ui(E);(!s||!i)&&!ne&&o&&((Q=K.get(o))!=null&&Q.selected||ie()),o&&i&&s&&xs({id:o,store:l,nodeRef:e});const D=I(ee);if(p.current=D,h.current=Y0(K,U,D,o),z&&h.current){const[J,j]=Ki({nodeId:o,dragItems:h.current,nodeInternals:K});z(ee.sourceEvent,J,j)}};if(t)C.on(".drag",null);else{const ee=rg().on("start",K=>{const{domNode:ne,nodeDragThreshold:U}=l.getState();U===0&&H(K),$.current=!1;const ie=I(K);p.current=ie,y.current=(ne==null?void 0:ne.getBoundingClientRect())||null,k.current=Zn(K.sourceEvent,y.current)}).on("drag",K=>{var ce,E;const ne=I(K),{autoPanOnNodeDrag:U,nodeDragThreshold:ie}=l.getState();if(K.sourceEvent.type==="touchmove"&&K.sourceEvent.touches.length>1&&($.current=!0),!$.current){if(!N.current&&T.current&&U&&(N.current=!0,q()),!T.current){const z=ne.xSnapped-(((ce=p==null?void 0:p.current)==null?void 0:ce.x)??0),D=ne.ySnapped-(((E=p==null?void 0:p.current)==null?void 0:E.y)??0);Math.sqrt(z*z+D*D)>ie&&H(K)}(p.current.x!==ne.xSnapped||p.current.y!==ne.ySnapped)&&h.current&&T.current&&(S.current=K.sourceEvent,k.current=Zn(K.sourceEvent,y.current),X(ne))}}).on("end",K=>{if(!(!T.current||$.current)&&(d(!1),N.current=!1,T.current=!1,cancelAnimationFrame(v.current),h.current)){const{updateNodePositions:ne,nodeInternals:U,onNodeDragStop:ie,onSelectionDragStop:ce}=l.getState(),E=o?ie:Ui(ce);if(ne(h.current,!1,!1),E){const[z,D]=Ki({nodeId:o,dragItems:h.current,nodeInternals:U});E(K.sourceEvent,z,D)}}}).filter(K=>{const ne=K.target;return!K.button&&(!n||!Wl(ne,`.${n}`,e))&&(!r||Wl(ne,r,e))});return C.call(ee),()=>{C.on(".drag",null)}}}},[e,t,n,r,i,l,o,s,I]),u}function Ud(){const e=vt();return b.useCallback(n=>{const{nodeInternals:r,nodeExtent:o,updateNodePositions:i,getNodes:s,snapToGrid:l,snapGrid:u,onError:d,nodesDraggable:h}=e.getState(),p=s().filter($=>$.selected&&($.draggable||h&&typeof $.draggable>"u")),v=l?u[0]:5,y=l?u[1]:5,k=n.isShiftPressed?4:1,S=n.x*v*k,N=n.y*y*k,T=p.map($=>{if($.positionAbsolute){const I={x:$.positionAbsolute.x+S,y:$.positionAbsolute.y+N};l&&(I.x=u[0]*Math.round(I.x/u[0]),I.y=u[1]*Math.round(I.y/u[1]));const{positionAbsolute:C,position:X}=qd($,I,r,o,void 0,d);$.position=X,$.positionAbsolute=C}return $});i(T,!0,!1)},[])}const Fr={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var lo=e=>{const t=({id:n,type:r,data:o,xPos:i,yPos:s,xPosOrigin:l,yPosOrigin:u,selected:d,onClick:h,onMouseEnter:p,onMouseMove:v,onMouseLeave:y,onContextMenu:k,onDoubleClick:S,style:N,className:T,isDraggable:$,isSelectable:I,isConnectable:C,isFocusable:X,selectNodesOnDrag:q,sourcePosition:H,targetPosition:ee,hidden:K,resizeObserver:ne,dragHandle:U,zIndex:ie,isParent:ce,noDragClassName:E,noPanClassName:z,initialized:D,disableKeyboardA11y:Q,ariaLabel:J,rfId:j,hasHandleBounds:G})=>{const se=vt(),ae=b.useRef(null),de=b.useRef(null),we=b.useRef(H),ke=b.useRef(ee),Ne=b.useRef(r),De=I||$||h||p||v||y,Pe=Ud(),fe=co(n,se.getState,p),Me=co(n,se.getState,v),Ue=co(n,se.getState,y),je=co(n,se.getState,k),Je=co(n,se.getState,S),$e=Ye=>{const{nodeDragThreshold:Ce}=se.getState();if(I&&(!q||!$||Ce>0)&&xs({id:n,store:se,nodeRef:ae}),h){const st=se.getState().nodeInternals.get(n);st&&h(Ye,{...st})}},ze=Ye=>{if(!gs(Ye)&&!Q)if(vd.includes(Ye.key)&&I){const Ce=Ye.key==="Escape";xs({id:n,store:se,unselect:Ce,nodeRef:ae})}else $&&d&&Object.prototype.hasOwnProperty.call(Fr,Ye.key)&&(se.setState({ariaLiveMessage:`Moved selected node ${Ye.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~s}`}),Pe({x:Fr[Ye.key].x,y:Fr[Ye.key].y,isShiftPressed:Ye.shiftKey}))};b.useEffect(()=>()=>{de.current&&(ne==null||ne.unobserve(de.current),de.current=null)},[]),b.useEffect(()=>{if(ae.current&&!K){const Ye=ae.current;(!D||!G||de.current!==Ye)&&(de.current&&(ne==null||ne.unobserve(de.current)),ne==null||ne.observe(Ye),de.current=Ye)}},[K,D,G]),b.useEffect(()=>{const Ye=Ne.current!==r,Ce=we.current!==H,st=ke.current!==ee;ae.current&&(Ye||Ce||st)&&(Ye&&(Ne.current=r),Ce&&(we.current=H),st&&(ke.current=ee),se.getState().updateNodeDimensions([{id:n,nodeElement:ae.current,forceUpdate:!0}]))},[n,r,H,ee]);const qe=Kd({nodeRef:ae,disabled:K||!$,noDragClassName:E,handleSelector:U,nodeId:n,isSelectable:I,selectNodesOnDrag:q});return K?null:W.createElement("div",{className:_t(["react-flow__node",`react-flow__node-${r}`,{[z]:$},T,{selected:d,selectable:I,parent:ce,dragging:qe}]),ref:ae,style:{zIndex:ie,transform:`translate(${l}px,${u}px)`,pointerEvents:De?"all":"none",visibility:D?"visible":"hidden",...N},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:fe,onMouseMove:Me,onMouseLeave:Ue,onContextMenu:je,onClick:$e,onDoubleClick:Je,onKeyDown:X?ze:void 0,tabIndex:X?0:void 0,role:X?"button":void 0,"aria-describedby":Q?void 0:`${Ld}-${j}`,"aria-label":J},W.createElement(i0,{value:n},W.createElement(e,{id:n,data:o,type:r,xPos:i,yPos:s,selected:d,isConnectable:C,sourcePosition:H,targetPosition:ee,dragging:qe,dragHandle:U,zIndex:ie})))};return t.displayName="NodeWrapper",b.memo(t)};const K0=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Qa(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function U0({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=vt(),{width:o,height:i,x:s,y:l,transformString:u,userSelectionActive:d}=tt(K0,St),h=Ud(),p=b.useRef(null);if(b.useEffect(()=>{var k;n||(k=p.current)==null||k.focus({preventScroll:!0})},[n]),Kd({nodeRef:p}),d||!o||!i)return null;const v=e?k=>{const S=r.getState().getNodes().filter(N=>N.selected);e(k,S)}:void 0,y=k=>{Object.prototype.hasOwnProperty.call(Fr,k.key)&&h({x:Fr[k.key].x,y:Fr[k.key].y,isShiftPressed:k.shiftKey})};return W.createElement("div",{className:_t(["react-flow__nodesselection","react-flow__container",t]),style:{transform:u}},W.createElement("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:v,tabIndex:n?void 0:-1,onKeyDown:n?void 0:y,style:{width:o,height:i,top:l,left:s}}))}var X0=b.memo(U0);const G0=e=>e.nodesSelectionActive,Xd=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,deleteKeyCode:l,onMove:u,onMoveStart:d,onMoveEnd:h,selectionKeyCode:p,selectionOnDrag:v,selectionMode:y,onSelectionStart:k,onSelectionEnd:S,multiSelectionKeyCode:N,panActivationKeyCode:T,zoomActivationKeyCode:$,elementsSelectable:I,zoomOnScroll:C,zoomOnPinch:X,panOnScroll:q,panOnScrollSpeed:H,panOnScrollMode:ee,zoomOnDoubleClick:K,panOnDrag:ne,defaultViewport:U,translateExtent:ie,minZoom:ce,maxZoom:E,preventScrolling:z,onSelectionContextMenu:D,noWheelClassName:Q,noPanClassName:J,disableKeyboardA11y:j})=>{const G=tt(G0),se=Do(p),ae=Do(T),de=ae||ne,we=ae||q,ke=se||v&&de!==!0;return A0({deleteKeyCode:l,multiSelectionKeyCode:N}),W.createElement(F0,{onMove:u,onMoveStart:d,onMoveEnd:h,onPaneContextMenu:i,elementsSelectable:I,zoomOnScroll:C,zoomOnPinch:X,panOnScroll:we,panOnScrollSpeed:H,panOnScrollMode:ee,zoomOnDoubleClick:K,panOnDrag:!se&&de,defaultViewport:U,translateExtent:ie,minZoom:ce,maxZoom:E,zoomActivationKeyCode:$,preventScrolling:z,noWheelClassName:Q,noPanClassName:J},W.createElement(Yd,{onSelectionStart:k,onSelectionEnd:S,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:de,isSelecting:!!ke,selectionMode:y},e,G&&W.createElement(X0,{onSelectionContextMenu:D,noPanClassName:J,disableKeyboardA11y:j})))};Xd.displayName="FlowRenderer";var Z0=b.memo(Xd);function Q0(e){return tt(b.useCallback(n=>e?_d(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function J0(e){const t={input:lo(e.input||Md),default:lo(e.default||bs),output:lo(e.output||$d),group:lo(e.group||fc)},n={},r=Object.keys(e).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,i)=>(o[i]=lo(e[i]||bs),o),n);return{...t,...r}}const ev=({x:e,y:t,width:n,height:r,origin:o})=>!n||!r?{x:e,y:t}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-r*o[1]},tv=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Gd=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,updateNodeDimensions:i,onError:s}=tt(tv,St),l=Q0(e.onlyRenderVisibleElements),u=b.useRef(),d=b.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const h=new ResizeObserver(p=>{const v=p.map(y=>({id:y.target.getAttribute("data-id"),nodeElement:y.target,forceUpdate:!0}));i(v)});return u.current=h,h},[]);return b.useEffect(()=>()=>{var h;(h=u==null?void 0:u.current)==null||h.disconnect()},[]),W.createElement("div",{className:"react-flow__nodes",style:mc},l.map(h=>{var X,q,H;let p=h.type||"default";e.nodeTypes[p]||(s==null||s("003",Pn.error003(p)),p="default");const v=e.nodeTypes[p]||e.nodeTypes.default,y=!!(h.draggable||t&&typeof h.draggable>"u"),k=!!(h.selectable||o&&typeof h.selectable>"u"),S=!!(h.connectable||n&&typeof h.connectable>"u"),N=!!(h.focusable||r&&typeof h.focusable>"u"),T=e.nodeExtent?ic(h.positionAbsolute,e.nodeExtent):h.positionAbsolute,$=(T==null?void 0:T.x)??0,I=(T==null?void 0:T.y)??0,C=ev({x:$,y:I,width:h.width??0,height:h.height??0,origin:e.nodeOrigin});return W.createElement(v,{key:h.id,id:h.id,className:h.className,style:h.style,type:p,data:h.data,sourcePosition:h.sourcePosition||Oe.Bottom,targetPosition:h.targetPosition||Oe.Top,hidden:h.hidden,xPos:$,yPos:I,xPosOrigin:C.x,yPosOrigin:C.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!h.selected,isDraggable:y,isSelectable:k,isConnectable:S,isFocusable:N,resizeObserver:d,dragHandle:h.dragHandle,zIndex:((X=h[ut])==null?void 0:X.z)??0,isParent:!!((q=h[ut])!=null&&q.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!h.width&&!!h.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:h.ariaLabel,hasHandleBounds:!!((H=h[ut])!=null&&H.handleBounds)})}))};Gd.displayName="NodeRenderer";var nv=b.memo(Gd);const rv=(e,t,n)=>n===Oe.Left?e-t:n===Oe.Right?e+t:e,ov=(e,t,n)=>n===Oe.Top?e-t:n===Oe.Bottom?e+t:e,Hl="react-flow__edgeupdater",zl=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:i,onMouseOut:s,type:l})=>W.createElement("circle",{onMouseDown:o,onMouseEnter:i,onMouseOut:s,className:_t([Hl,`${Hl}-${l}`]),cx:rv(t,r,e),cy:ov(n,r,e),r,stroke:"transparent",fill:"transparent"}),av=()=>!0;var jr=e=>{const t=({id:n,className:r,type:o,data:i,onClick:s,onEdgeDoubleClick:l,selected:u,animated:d,label:h,labelStyle:p,labelShowBg:v,labelBgStyle:y,labelBgPadding:k,labelBgBorderRadius:S,style:N,source:T,target:$,sourceX:I,sourceY:C,targetX:X,targetY:q,sourcePosition:H,targetPosition:ee,elementsSelectable:K,hidden:ne,sourceHandleId:U,targetHandleId:ie,onContextMenu:ce,onMouseEnter:E,onMouseMove:z,onMouseLeave:D,reconnectRadius:Q,onReconnect:J,onReconnectStart:j,onReconnectEnd:G,markerEnd:se,markerStart:ae,rfId:de,ariaLabel:we,isFocusable:ke,isReconnectable:Ne,pathOptions:De,interactionWidth:Pe,disableKeyboardA11y:fe})=>{const Me=b.useRef(null),[Ue,je]=b.useState(!1),[Je,$e]=b.useState(!1),ze=vt(),qe=b.useMemo(()=>`url('#${vs(ae,de)}')`,[ae,de]),Ye=b.useMemo(()=>`url('#${vs(se,de)}')`,[se,de]);if(ne)return null;const Ce=Xe=>{var be;const{edges:mt,addSelectedEdges:le,unselectNodesAndEdges:me,multiSelectionActive:te}=ze.getState(),pe=mt.find(Te=>Te.id===n);pe&&(K&&(ze.setState({nodesSelectionActive:!1}),pe.selected&&te?(me({nodes:[],edges:[pe]}),(be=Me.current)==null||be.blur()):le([n])),s&&s(Xe,pe))},st=so(n,ze.getState,l),wt=so(n,ze.getState,ce),dt=so(n,ze.getState,E),At=so(n,ze.getState,z),kt=so(n,ze.getState,D),bt=(Xe,mt)=>{if(Xe.button!==0)return;const{edges:le,isValidConnection:me}=ze.getState(),te=mt?$:T,pe=(mt?ie:U)||null,be=mt?"target":"source",Te=me||av,he=mt,Re=le.find(Qe=>Qe.id===n);$e(!0),j==null||j(Xe,Re,be);const Ft=Qe=>{$e(!1),G==null||G(Qe,Re,be)};Od({event:Xe,handleId:pe,nodeId:te,onConnect:Qe=>J==null?void 0:J(Re,Qe),isTarget:he,getState:ze.getState,setState:ze.setState,isValidConnection:Te,edgeUpdaterType:be,onReconnectEnd:Ft})},Nt=Xe=>bt(Xe,!0),gt=Xe=>bt(Xe,!1),Tt=()=>je(!0),Ct=()=>je(!1),Dt=!K&&!s,Ot=Xe=>{var mt;if(!fe&&vd.includes(Xe.key)&&K){const{unselectNodesAndEdges:le,addSelectedEdges:me,edges:te}=ze.getState();Xe.key==="Escape"?((mt=Me.current)==null||mt.blur(),le({edges:[te.find(be=>be.id===n)]})):me([n])}};return W.createElement("g",{className:_t(["react-flow__edge",`react-flow__edge-${o}`,r,{selected:u,animated:d,inactive:Dt,updating:Ue}]),onClick:Ce,onDoubleClick:st,onContextMenu:wt,onMouseEnter:dt,onMouseMove:At,onMouseLeave:kt,onKeyDown:ke?Ot:void 0,tabIndex:ke?0:void 0,role:ke?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":we===null?void 0:we||`Edge from ${T} to ${$}`,"aria-describedby":ke?`${Fd}-${de}`:void 0,ref:Me},!Je&&W.createElement(e,{id:n,source:T,target:$,selected:u,animated:d,label:h,labelStyle:p,labelShowBg:v,labelBgStyle:y,labelBgPadding:k,labelBgBorderRadius:S,data:i,style:N,sourceX:I,sourceY:C,targetX:X,targetY:q,sourcePosition:H,targetPosition:ee,sourceHandleId:U,targetHandleId:ie,markerStart:qe,markerEnd:Ye,pathOptions:De,interactionWidth:Pe}),Ne&&W.createElement(W.Fragment,null,(Ne==="source"||Ne===!0)&&W.createElement(zl,{position:H,centerX:I,centerY:C,radius:Q,onMouseDown:Nt,onMouseEnter:Tt,onMouseOut:Ct,type:"source"}),(Ne==="target"||Ne===!0)&&W.createElement(zl,{position:ee,centerX:X,centerY:q,radius:Q,onMouseDown:gt,onMouseEnter:Tt,onMouseOut:Ct,type:"target"})))};return t.displayName="EdgeWrapper",b.memo(t)};function iv(e){const t={default:jr(e.default||Ra),straight:jr(e.bezier||lc),step:jr(e.step||cc),smoothstep:jr(e.step||Za),simplebezier:jr(e.simplebezier||sc)},n={},r=Object.keys(e).filter(o=>!["default","bezier"].includes(o)).reduce((o,i)=>(o[i]=jr(e[i]||Ra),o),n);return{...t,...r}}function Yl(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,o=((n==null?void 0:n.y)||0)+t.y,i=(n==null?void 0:n.width)||t.width,s=(n==null?void 0:n.height)||t.height;switch(e){case Oe.Top:return{x:r+i/2,y:o};case Oe.Right:return{x:r+i,y:o+s/2};case Oe.Bottom:return{x:r+i/2,y:o+s};case Oe.Left:return{x:r,y:o+s/2}}}function Vl(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const sv=(e,t,n,r,o,i)=>{const s=Yl(n,e,t),l=Yl(i,r,o);return{sourceX:s.x,sourceY:s.y,targetX:l.x,targetY:l.y}};function cv({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:i,width:s,height:l,transform:u}){const d={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+i)};d.x===d.x2&&(d.x2+=1),d.y===d.y2&&(d.y2+=1);const h=To({x:(0-u[0])/u[2],y:(0-u[1])/u[2],width:s/u[2],height:l/u[2]}),p=Math.max(0,Math.min(h.x2,d.x2)-Math.max(h.x,d.x)),v=Math.max(0,Math.min(h.y2,d.y2)-Math.max(h.y,d.y));return Math.ceil(p*v)>0}function ql(e){var r,o,i,s,l;const t=((r=e==null?void 0:e[ut])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)<"u"&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.y)<"u";return[{x:((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const lv=[{level:0,isMaxLevel:!0,edges:[]}];function uv(e,t,n=!1){let r=-1;const o=e.reduce((s,l)=>{var h,p;const u=Zt(l.zIndex);let d=u?l.zIndex:0;if(n){const v=t.get(l.target),y=t.get(l.source),k=l.selected||(v==null?void 0:v.selected)||(y==null?void 0:y.selected),S=Math.max(((h=y==null?void 0:y[ut])==null?void 0:h.z)||0,((p=v==null?void 0:v[ut])==null?void 0:p.z)||0,1e3);d=(u?l.zIndex:0)+(k?S:0)}return s[d]?s[d].push(l):s[d]=[l],r=d>r?d:r,s},{}),i=Object.entries(o).map(([s,l])=>{const u=+s;return{edges:l,level:u,isMaxLevel:u===r}});return i.length===0?lv:i}function dv(e,t,n){const r=tt(b.useCallback(o=>e?o.edges.filter(i=>{const s=t.get(i.source),l=t.get(i.target);return(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&cv({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:l.width,targetHeight:l.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[e,t]));return uv(r,t,n)}const fv=({color:e="none",strokeWidth:t=1})=>W.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),hv=({color:e="none",strokeWidth:t=1})=>W.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Kl={[$a.Arrow]:fv,[$a.ArrowClosed]:hv};function mv(e){const t=vt();return b.useMemo(()=>{var o,i;return Object.prototype.hasOwnProperty.call(Kl,e)?Kl[e]:((i=(o=t.getState()).onError)==null||i.call(o,"009",Pn.error009(e)),null)},[e])}const pv=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:l="auto-start-reverse"})=>{const u=mv(t);return u?W.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:l,refX:"0",refY:"0"},W.createElement(u,{color:n,strokeWidth:s})):null},gv=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((o,i)=>([i.markerStart,i.markerEnd].forEach(s=>{if(s&&typeof s=="object"){const l=vs(s,t);r.includes(l)||(o.push({id:l,color:s.color||e,...s}),r.push(l))}}),o),[]).sort((o,i)=>o.id.localeCompare(i.id))},Zd=({defaultColor:e,rfId:t})=>{const n=tt(b.useCallback(gv({defaultColor:e,rfId:t}),[e,t]),(r,o)=>!(r.length!==o.length||r.some((i,s)=>i.id!==o[s].id)));return W.createElement("defs",null,n.map(r=>W.createElement(pv,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};Zd.displayName="MarkerDefinitions";var yv=b.memo(Zd);const vv=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Qd=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:o,noPanClassName:i,onEdgeContextMenu:s,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:d,onEdgeClick:h,onEdgeDoubleClick:p,onReconnect:v,onReconnectStart:y,onReconnectEnd:k,reconnectRadius:S,children:N,disableKeyboardA11y:T})=>{const{edgesFocusable:$,edgesUpdatable:I,elementsSelectable:C,width:X,height:q,connectionMode:H,nodeInternals:ee,onError:K}=tt(vv,St),ne=dv(t,ee,n);return X?W.createElement(W.Fragment,null,ne.map(({level:U,edges:ie,isMaxLevel:ce})=>W.createElement("svg",{key:U,style:{zIndex:U},width:X,height:q,className:"react-flow__edges react-flow__container"},ce&&W.createElement(yv,{defaultColor:e,rfId:r}),W.createElement("g",null,ie.map(E=>{const[z,D,Q]=ql(ee.get(E.source)),[J,j,G]=ql(ee.get(E.target));if(!Q||!G)return null;let se=E.type||"default";o[se]||(K==null||K("011",Pn.error011(se)),se="default");const ae=o[se]||o.default,de=H===wr.Strict?j.target:(j.target??[]).concat(j.source??[]),we=Vl(D.source,E.sourceHandle),ke=Vl(de,E.targetHandle),Ne=(we==null?void 0:we.position)||Oe.Bottom,De=(ke==null?void 0:ke.position)||Oe.Top,Pe=!!(E.focusable||$&&typeof E.focusable>"u"),fe=E.reconnectable||E.updatable,Me=typeof v<"u"&&(fe||I&&typeof fe>"u");if(!we||!ke)return K==null||K("008",Pn.error008(we,E)),null;const{sourceX:Ue,sourceY:je,targetX:Je,targetY:$e}=sv(z,we,Ne,J,ke,De);return W.createElement(ae,{key:E.id,id:E.id,className:_t([E.className,i]),type:se,data:E.data,selected:!!E.selected,animated:!!E.animated,hidden:!!E.hidden,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,style:E.style,source:E.source,target:E.target,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerEnd:E.markerEnd,markerStart:E.markerStart,sourceX:Ue,sourceY:je,targetX:Je,targetY:$e,sourcePosition:Ne,targetPosition:De,elementsSelectable:C,onContextMenu:s,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,onClick:h,onEdgeDoubleClick:p,onReconnect:v,onReconnectStart:y,onReconnectEnd:k,reconnectRadius:S,rfId:r,ariaLabel:E.ariaLabel,isFocusable:Pe,isReconnectable:Me,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth,disableKeyboardA11y:T})})))),N):null};Qd.displayName="EdgeRenderer";var wv=b.memo(Qd);const bv=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function xv({children:e}){const t=tt(bv);return W.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Sv(e){const t=hc(),n=b.useRef(!1);b.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const kv={[Oe.Left]:Oe.Right,[Oe.Right]:Oe.Left,[Oe.Top]:Oe.Bottom,[Oe.Bottom]:Oe.Top},Jd=({nodeId:e,handleType:t,style:n,type:r=Kn.Bezier,CustomComponent:o,connectionStatus:i})=>{var q,H,ee;const{fromNode:s,handleId:l,toX:u,toY:d,connectionMode:h}=tt(b.useCallback(K=>({fromNode:K.nodeInternals.get(e),handleId:K.connectionHandleId,toX:(K.connectionPosition.x-K.transform[0])/K.transform[2],toY:(K.connectionPosition.y-K.transform[1])/K.transform[2],connectionMode:K.connectionMode}),[e]),St),p=(q=s==null?void 0:s[ut])==null?void 0:q.handleBounds;let v=p==null?void 0:p[t];if(h===wr.Loose&&(v=v||(p==null?void 0:p[t==="source"?"target":"source"])),!s||!v)return null;const y=l?v.find(K=>K.id===l):v[0],k=y?y.x+y.width/2:(s.width??0)/2,S=y?y.y+y.height/2:s.height??0,N=(((H=s.positionAbsolute)==null?void 0:H.x)??0)+k,T=(((ee=s.positionAbsolute)==null?void 0:ee.y)??0)+S,$=y==null?void 0:y.position,I=$?kv[$]:null;if(!$||!I)return null;if(o)return W.createElement(o,{connectionLineType:r,connectionLineStyle:n,fromNode:s,fromHandle:y,fromX:N,fromY:T,toX:u,toY:d,fromPosition:$,toPosition:I,connectionStatus:i});let C="";const X={sourceX:N,sourceY:T,sourcePosition:$,targetX:u,targetY:d,targetPosition:I};return r===Kn.Bezier?[C]=kd(X):r===Kn.Step?[C]=ys({...X,borderRadius:0}):r===Kn.SmoothStep?[C]=ys(X):r===Kn.SimpleBezier?[C]=Sd(X):C=`M${N},${T} ${u},${d}`,W.createElement("path",{d:C,fill:"none",className:"react-flow__connection-path",style:n})};Jd.displayName="ConnectionLine";const Ev=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function _v({containerStyle:e,style:t,type:n,component:r}){const{nodeId:o,handleType:i,nodesConnectable:s,width:l,height:u,connectionStatus:d}=tt(Ev,St);return!(o&&i&&l&&s)?null:W.createElement("svg",{style:e,width:l,height:u,className:"react-flow__edges react-flow__connectionline react-flow__container"},W.createElement("g",{className:_t(["react-flow__connection",d])},W.createElement(Jd,{nodeId:o,handleType:i,style:t,type:n,CustomComponent:r,connectionStatus:d})))}function Ul(e,t){return b.useRef(null),vt(),b.useMemo(()=>t(e),[e])}const ef=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:i,onNodeClick:s,onEdgeClick:l,onNodeDoubleClick:u,onEdgeDoubleClick:d,onNodeMouseEnter:h,onNodeMouseMove:p,onNodeMouseLeave:v,onNodeContextMenu:y,onSelectionContextMenu:k,onSelectionStart:S,onSelectionEnd:N,connectionLineType:T,connectionLineStyle:$,connectionLineComponent:I,connectionLineContainerStyle:C,selectionKeyCode:X,selectionOnDrag:q,selectionMode:H,multiSelectionKeyCode:ee,panActivationKeyCode:K,zoomActivationKeyCode:ne,deleteKeyCode:U,onlyRenderVisibleElements:ie,elementsSelectable:ce,selectNodesOnDrag:E,defaultViewport:z,translateExtent:D,minZoom:Q,maxZoom:J,preventScrolling:j,defaultMarkerColor:G,zoomOnScroll:se,zoomOnPinch:ae,panOnScroll:de,panOnScrollSpeed:we,panOnScrollMode:ke,zoomOnDoubleClick:Ne,panOnDrag:De,onPaneClick:Pe,onPaneMouseEnter:fe,onPaneMouseMove:Me,onPaneMouseLeave:Ue,onPaneScroll:je,onPaneContextMenu:Je,onEdgeContextMenu:$e,onEdgeMouseEnter:ze,onEdgeMouseMove:qe,onEdgeMouseLeave:Ye,onReconnect:Ce,onReconnectStart:st,onReconnectEnd:wt,reconnectRadius:dt,noDragClassName:At,noWheelClassName:kt,noPanClassName:bt,elevateEdgesOnSelect:Nt,disableKeyboardA11y:gt,nodeOrigin:Tt,nodeExtent:Ct,rfId:Dt})=>{const Ot=Ul(e,J0),Xe=Ul(t,iv);return Sv(i),W.createElement(Z0,{onPaneClick:Pe,onPaneMouseEnter:fe,onPaneMouseMove:Me,onPaneMouseLeave:Ue,onPaneContextMenu:Je,onPaneScroll:je,deleteKeyCode:U,selectionKeyCode:X,selectionOnDrag:q,selectionMode:H,onSelectionStart:S,onSelectionEnd:N,multiSelectionKeyCode:ee,panActivationKeyCode:K,zoomActivationKeyCode:ne,elementsSelectable:ce,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:se,zoomOnPinch:ae,zoomOnDoubleClick:Ne,panOnScroll:de,panOnScrollSpeed:we,panOnScrollMode:ke,panOnDrag:De,defaultViewport:z,translateExtent:D,minZoom:Q,maxZoom:J,onSelectionContextMenu:k,preventScrolling:j,noDragClassName:At,noWheelClassName:kt,noPanClassName:bt,disableKeyboardA11y:gt},W.createElement(xv,null,W.createElement(wv,{edgeTypes:Xe,onEdgeClick:l,onEdgeDoubleClick:d,onlyRenderVisibleElements:ie,onEdgeContextMenu:$e,onEdgeMouseEnter:ze,onEdgeMouseMove:qe,onEdgeMouseLeave:Ye,onReconnect:Ce,onReconnectStart:st,onReconnectEnd:wt,reconnectRadius:dt,defaultMarkerColor:G,noPanClassName:bt,elevateEdgesOnSelect:!!Nt,disableKeyboardA11y:gt,rfId:Dt},W.createElement(_v,{style:$,type:T,component:I,containerStyle:C})),W.createElement("div",{className:"react-flow__edgelabel-renderer"}),W.createElement(nv,{nodeTypes:Ot,onNodeClick:s,onNodeDoubleClick:u,onNodeMouseEnter:h,onNodeMouseMove:p,onNodeMouseLeave:v,onNodeContextMenu:y,selectNodesOnDrag:E,onlyRenderVisibleElements:ie,noPanClassName:bt,noDragClassName:At,disableKeyboardA11y:gt,nodeOrigin:Tt,nodeExtent:Ct,rfId:Dt})))};ef.displayName="GraphView";var Nv=b.memo(ef);const Ss=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Hn={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Ss,nodeExtent:Ss,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:wr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:e0,isValidConnection:void 0},Tv=()=>pm((e,t)=>({...Hn,setNodes:n=>{const{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:i}=t();e({nodeInternals:Vi(n,r,o,i)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(o=>({...r,...o}))})},setDefaultNodesAndEdges:(n,r)=>{const o=typeof n<"u",i=typeof r<"u",s=o?Vi(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:s,edges:i?r:[],hasDefaultNodes:o,hasDefaultEdges:i})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:i,fitViewOnInitDone:s,fitViewOnInitOptions:l,domNode:u,nodeOrigin:d}=t(),h=u==null?void 0:u.querySelector(".react-flow__viewport");if(!h)return;const p=window.getComputedStyle(h),{m22:v}=new window.DOMMatrixReadOnly(p.transform),y=n.reduce((S,N)=>{const T=o.get(N.id);if(T!=null&&T.hidden)o.set(T.id,{...T,[ut]:{...T[ut],handleBounds:void 0}});else if(T){const $=ac(N.nodeElement);!!($.width&&$.height&&(T.width!==$.width||T.height!==$.height||N.forceUpdate))&&(o.set(T.id,{...T,[ut]:{...T[ut],handleBounds:{source:Bl(".source",N.nodeElement,v,d),target:Bl(".target",N.nodeElement,v,d)}},...$}),S.push({id:T.id,type:"dimensions",dimensions:$}))}return S},[]);Bd(o,d);const k=s||i&&!s&&Hd(t,{initial:!0,...l});e({nodeInternals:new Map(o),fitViewOnInitDone:k}),(y==null?void 0:y.length)>0&&(r==null||r(y))},updateNodePositions:(n,r=!0,o=!1)=>{const{triggerNodeChanges:i}=t(),s=n.map(l=>{const u={id:l.id,type:"position",dragging:o};return r&&(u.positionAbsolute=l.positionAbsolute,u.position=l.position),u});i(s)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:o,hasDefaultNodes:i,nodeOrigin:s,getNodes:l,elevateNodesOnSelect:u}=t();if(n!=null&&n.length){if(i){const d=zd(n,l()),h=Vi(d,o,s,u);e({nodeInternals:h})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:o,getNodes:i}=t();let s,l=null;r?s=n.map(u=>qn(u,!0)):(s=Mr(i(),n),l=Mr(o,[])),ya({changedNodes:s,changedEdges:l,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,getNodes:i}=t();let s,l=null;r?s=n.map(u=>qn(u,!0)):(s=Mr(o,n),l=Mr(i(),[])),ya({changedNodes:l,changedEdges:s,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:o,getNodes:i}=t(),s=n||i(),l=r||o,u=s.map(h=>(h.selected=!1,qn(h.id,!1))),d=l.map(h=>qn(h.id,!1));ya({changedNodes:u,changedEdges:d,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=t();r==null||r.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=t();r==null||r.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),i=r().filter(l=>l.selected).map(l=>qn(l.id,!1)),s=n.filter(l=>l.selected).map(l=>qn(l.id,!1));ya({changedNodes:i,changedEdges:s,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(o=>{o.positionAbsolute=ic(o.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:o,height:i,d3Zoom:s,d3Selection:l,translateExtent:u}=t();if(!s||!l||!n.x&&!n.y)return!1;const d=Dn.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),h=[[0,0],[o,i]],p=s==null?void 0:s.constrain()(d,h,u);return s.transform(l,p),r[0]!==p.x||r[1]!==p.y||r[2]!==p.k},cancelConnection:()=>e({connectionNodeId:Hn.connectionNodeId,connectionHandleId:Hn.connectionHandleId,connectionHandleType:Hn.connectionHandleType,connectionStatus:Hn.connectionStatus,connectionStartHandle:Hn.connectionStartHandle,connectionEndHandle:Hn.connectionEndHandle}),reset:()=>e({...Hn})}),Object.is),tf=({children:e})=>{const t=b.useRef(null);return t.current||(t.current=Tv()),W.createElement(Ky,{value:t.current},e)};tf.displayName="ReactFlowProvider";const nf=({children:e})=>b.useContext(Ga)?W.createElement(W.Fragment,null,e):W.createElement(tf,null,e);nf.displayName="ReactFlowWrapper";const Cv={input:Md,default:bs,output:$d,group:fc},Dv={default:Ra,straight:lc,step:cc,smoothstep:Za,simplebezier:sc},Ov=[0,0],jv=[15,15],Pv={x:0,y:0,zoom:1},Iv={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},rf=b.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:i=Cv,edgeTypes:s=Dv,onNodeClick:l,onEdgeClick:u,onInit:d,onMove:h,onMoveStart:p,onMoveEnd:v,onConnect:y,onConnectStart:k,onConnectEnd:S,onClickConnectStart:N,onClickConnectEnd:T,onNodeMouseEnter:$,onNodeMouseMove:I,onNodeMouseLeave:C,onNodeContextMenu:X,onNodeDoubleClick:q,onNodeDragStart:H,onNodeDrag:ee,onNodeDragStop:K,onNodesDelete:ne,onEdgesDelete:U,onSelectionChange:ie,onSelectionDragStart:ce,onSelectionDrag:E,onSelectionDragStop:z,onSelectionContextMenu:D,onSelectionStart:Q,onSelectionEnd:J,connectionMode:j=wr.Strict,connectionLineType:G=Kn.Bezier,connectionLineStyle:se,connectionLineComponent:ae,connectionLineContainerStyle:de,deleteKeyCode:we="Backspace",selectionKeyCode:ke="Shift",selectionOnDrag:Ne=!1,selectionMode:De=Co.Full,panActivationKeyCode:Pe="Space",multiSelectionKeyCode:fe=Aa()?"Meta":"Control",zoomActivationKeyCode:Me=Aa()?"Meta":"Control",snapToGrid:Ue=!1,snapGrid:je=jv,onlyRenderVisibleElements:Je=!1,selectNodesOnDrag:$e=!0,nodesDraggable:ze,nodesConnectable:qe,nodesFocusable:Ye,nodeOrigin:Ce=Ov,edgesFocusable:st,edgesUpdatable:wt,elementsSelectable:dt,defaultViewport:At=Pv,minZoom:kt=.5,maxZoom:bt=2,translateExtent:Nt=Ss,preventScrolling:gt=!0,nodeExtent:Tt,defaultMarkerColor:Ct="#b1b1b7",zoomOnScroll:Dt=!0,zoomOnPinch:Ot=!0,panOnScroll:Xe=!1,panOnScrollSpeed:mt=.5,panOnScrollMode:le=dr.Free,zoomOnDoubleClick:me=!0,panOnDrag:te=!0,onPaneClick:pe,onPaneMouseEnter:be,onPaneMouseMove:Te,onPaneMouseLeave:he,onPaneScroll:Re,onPaneContextMenu:Ft,children:pt,onEdgeContextMenu:Qe,onEdgeDoubleClick:lt,onEdgeMouseEnter:An,onEdgeMouseMove:et,onEdgeMouseLeave:yt,onEdgeUpdate:cn,onEdgeUpdateStart:bn,onEdgeUpdateEnd:xn,onReconnect:Ge,onReconnectStart:at,onReconnectEnd:$n,reconnectRadius:ln=10,edgeUpdaterRadius:un=10,onNodesChange:dn,onEdgesChange:Kr,noDragClassName:Wt="nodrag",noWheelClassName:Jt="nowheel",noPanClassName:Yt="nopan",fitView:Rn=!1,fitViewOptions:Le,connectOnClick:Ve=!0,attributionPosition:nt,proOptions:ft,defaultEdgeOptions:jt,elevateNodesOnSelect:Sn=!0,elevateEdgesOnSelect:rt=!1,disableKeyboardA11y:Ut=!1,autoPanOnConnect:en=!0,autoPanOnNodeDrag:Vo=!0,connectionRadius:Ln=20,isValidConnection:kr,onError:Ur,style:Xr,id:fn,nodeDragThreshold:qo,...Er},Ko)=>{const Fe=fn||"1";return W.createElement("div",{...Er,style:{...Xr,...Iv},ref:Ko,className:_t(["react-flow",o]),"data-testid":"rf__wrapper",id:fn},W.createElement(nf,null,W.createElement(Nv,{onInit:d,onMove:h,onMoveStart:p,onMoveEnd:v,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:$,onNodeMouseMove:I,onNodeMouseLeave:C,onNodeContextMenu:X,onNodeDoubleClick:q,nodeTypes:i,edgeTypes:s,connectionLineType:G,connectionLineStyle:se,connectionLineComponent:ae,connectionLineContainerStyle:de,selectionKeyCode:ke,selectionOnDrag:Ne,selectionMode:De,deleteKeyCode:we,multiSelectionKeyCode:fe,panActivationKeyCode:Pe,zoomActivationKeyCode:Me,onlyRenderVisibleElements:Je,selectNodesOnDrag:$e,defaultViewport:At,translateExtent:Nt,minZoom:kt,maxZoom:bt,preventScrolling:gt,zoomOnScroll:Dt,zoomOnPinch:Ot,zoomOnDoubleClick:me,panOnScroll:Xe,panOnScrollSpeed:mt,panOnScrollMode:le,panOnDrag:te,onPaneClick:pe,onPaneMouseEnter:be,onPaneMouseMove:Te,onPaneMouseLeave:he,onPaneScroll:Re,onPaneContextMenu:Ft,onSelectionContextMenu:D,onSelectionStart:Q,onSelectionEnd:J,onEdgeContextMenu:Qe,onEdgeDoubleClick:lt,onEdgeMouseEnter:An,onEdgeMouseMove:et,onEdgeMouseLeave:yt,onReconnect:Ge??cn,onReconnectStart:at??bn,onReconnectEnd:$n??xn,reconnectRadius:ln??un,defaultMarkerColor:Ct,noDragClassName:Wt,noWheelClassName:Jt,noPanClassName:Yt,elevateEdgesOnSelect:rt,rfId:Fe,disableKeyboardA11y:Ut,nodeOrigin:Ce,nodeExtent:Tt}),W.createElement(k0,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:y,onConnectStart:k,onConnectEnd:S,onClickConnectStart:N,onClickConnectEnd:T,nodesDraggable:ze,nodesConnectable:qe,nodesFocusable:Ye,edgesFocusable:st,edgesUpdatable:wt,elementsSelectable:dt,elevateNodesOnSelect:Sn,minZoom:kt,maxZoom:bt,nodeExtent:Tt,onNodesChange:dn,onEdgesChange:Kr,snapToGrid:Ue,snapGrid:je,connectionMode:j,translateExtent:Nt,connectOnClick:Ve,defaultEdgeOptions:jt,fitView:Rn,fitViewOptions:Le,onNodesDelete:ne,onEdgesDelete:U,onNodeDragStart:H,onNodeDrag:ee,onNodeDragStop:K,onSelectionDrag:E,onSelectionDragStart:ce,onSelectionDragStop:z,noPanClassName:Yt,nodeOrigin:Ce,rfId:Fe,autoPanOnConnect:en,autoPanOnNodeDrag:Vo,onError:Ur,connectionRadius:Ln,isValidConnection:kr,nodeDragThreshold:qo}),W.createElement(x0,{onSelectionChange:ie}),pt,W.createElement(Xy,{proOptions:ft,position:nt}),W.createElement(C0,{rfId:Fe,disableKeyboardA11y:Ut})))});rf.displayName="ReactFlow";const of=({id:e,x:t,y:n,width:r,height:o,style:i,color:s,strokeColor:l,strokeWidth:u,className:d,borderRadius:h,shapeRendering:p,onClick:v,selected:y})=>{const{background:k,backgroundColor:S}=i||{},N=s||k||S;return W.createElement("rect",{className:_t(["react-flow__minimap-node",{selected:y},d]),x:t,y:n,rx:h,ry:h,width:r,height:o,fill:N,stroke:l,strokeWidth:u,shapeRendering:p,onClick:v?T=>v(T,e):void 0})};of.displayName="MiniMapNode";var Mv=b.memo(of);const Av=e=>e.nodeOrigin,$v=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),Xi=e=>e instanceof Function?e:()=>e;function Rv({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o=2,nodeComponent:i=Mv,onClick:s}){const l=tt($v,St),u=tt(Av),d=Xi(t),h=Xi(e),p=Xi(n),v=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return W.createElement(W.Fragment,null,l.map(y=>{const{x:k,y:S}=mr(y,u).positionAbsolute;return W.createElement(i,{key:y.id,x:k,y:S,width:y.width,height:y.height,style:y.style,selected:y.selected,className:p(y),color:d(y),borderRadius:r,strokeColor:h(y),strokeWidth:o,shapeRendering:v,onClick:s,id:y.id})}))}var Lv=b.memo(Rv);const Fv=200,Wv=150,Bv=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?Qy(Qa(t,e.nodeOrigin),n):n,rfId:e.rfId}},Hv="react-flow__minimap-desc";function af({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:s=2,nodeComponent:l,maskColor:u="rgb(240, 240, 240, 0.6)",maskStrokeColor:d="none",maskStrokeWidth:h=1,position:p="bottom-right",onClick:v,onNodeClick:y,pannable:k=!1,zoomable:S=!1,ariaLabel:N="React Flow mini map",inversePan:T=!1,zoomStep:$=10,offsetScale:I=5}){const C=vt(),X=b.useRef(null),{boundingRect:q,viewBB:H,rfId:ee}=tt(Bv,St),K=(e==null?void 0:e.width)??Fv,ne=(e==null?void 0:e.height)??Wv,U=q.width/K,ie=q.height/ne,ce=Math.max(U,ie),E=ce*K,z=ce*ne,D=I*ce,Q=q.x-(E-q.width)/2-D,J=q.y-(z-q.height)/2-D,j=E+D*2,G=z+D*2,se=`${Hv}-${ee}`,ae=b.useRef(0);ae.current=ce,b.useEffect(()=>{if(X.current){const ke=Gt(X.current),Ne=fe=>{const{transform:Me,d3Selection:Ue,d3Zoom:je}=C.getState();if(fe.sourceEvent.type!=="wheel"||!Ue||!je)return;const Je=-fe.sourceEvent.deltaY*(fe.sourceEvent.deltaMode===1?.05:fe.sourceEvent.deltaMode?1:.002)*$,$e=Me[2]*Math.pow(2,Je);je.scaleTo(Ue,$e)},De=fe=>{const{transform:Me,d3Selection:Ue,d3Zoom:je,translateExtent:Je,width:$e,height:ze}=C.getState();if(fe.sourceEvent.type!=="mousemove"||!Ue||!je)return;const qe=ae.current*Math.max(1,Me[2])*(T?-1:1),Ye={x:Me[0]-fe.sourceEvent.movementX*qe,y:Me[1]-fe.sourceEvent.movementY*qe},Ce=[[0,0],[$e,ze]],st=Dn.translate(Ye.x,Ye.y).scale(Me[2]),wt=je.constrain()(st,Ce,Je);je.transform(Ue,wt)},Pe=fd().on("zoom",k?De:null).on("zoom.wheel",S?Ne:null);return ke.call(Pe),()=>{ke.on("zoom",null)}}},[k,S,T,$]);const de=v?ke=>{const Ne=tn(ke);v(ke,{x:Ne[0],y:Ne[1]})}:void 0,we=y?(ke,Ne)=>{const De=C.getState().nodeInternals.get(Ne);y(ke,De)}:void 0;return W.createElement(No,{position:p,style:e,className:_t(["react-flow__minimap",t]),"data-testid":"rf__minimap"},W.createElement("svg",{width:K,height:ne,viewBox:`${Q} ${J} ${j} ${G}`,role:"img","aria-labelledby":se,ref:X,onClick:de},N&&W.createElement("title",{id:se},N),W.createElement(Lv,{onClick:we,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:o,nodeStrokeWidth:s,nodeComponent:l}),W.createElement("path",{className:"react-flow__minimap-mask",d:`M${Q-D},${J-D}h${j+D*2}v${G+D*2}h${-j-D*2}z
        M${H.x},${H.y}h${H.width}v${H.height}h${-H.width}z`,fill:u,fillRule:"evenodd",stroke:d,strokeWidth:h,pointerEvents:"none"})))}af.displayName="MiniMap";var zv=b.memo(af);function Yv(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},W.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Vv(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},W.createElement("path",{d:"M0 0h32v4.2H0z"}))}function qv(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},W.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Kv(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},W.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Uv(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},W.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const go=({children:e,className:t,...n})=>W.createElement("button",{type:"button",className:_t(["react-flow__controls-button",t]),...n},e);go.displayName="ControlButton";const Xv=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),sf=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:i,onZoomOut:s,onFitView:l,onInteractiveChange:u,className:d,children:h,position:p="bottom-left"})=>{const v=vt(),[y,k]=b.useState(!1),{isInteractive:S,minZoomReached:N,maxZoomReached:T}=tt(Xv,St),{zoomIn:$,zoomOut:I,fitView:C}=hc();if(b.useEffect(()=>{k(!0)},[]),!y)return null;const X=()=>{$(),i==null||i()},q=()=>{I(),s==null||s()},H=()=>{C(o),l==null||l()},ee=()=>{v.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),u==null||u(!S)};return W.createElement(No,{className:_t(["react-flow__controls",d]),position:p,style:e,"data-testid":"rf__controls"},t&&W.createElement(W.Fragment,null,W.createElement(go,{onClick:X,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:T},W.createElement(Yv,null)),W.createElement(go,{onClick:q,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:N},W.createElement(Vv,null))),n&&W.createElement(go,{className:"react-flow__controls-fitview",onClick:H,title:"fit view","aria-label":"fit view"},W.createElement(qv,null)),r&&W.createElement(go,{className:"react-flow__controls-interactive",onClick:ee,title:"toggle interactivity","aria-label":"toggle interactivity"},S?W.createElement(Uv,null):W.createElement(Kv,null)),h)};sf.displayName="Controls";var Gv=b.memo(sf),on;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(on||(on={}));function Zv({color:e,dimensions:t,lineWidth:n}){return W.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Qv({color:e,radius:t}){return W.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const Jv={[on.Dots]:"#91919a",[on.Lines]:"#eee",[on.Cross]:"#e2e2e2"},ew={[on.Dots]:1,[on.Lines]:1,[on.Cross]:6},tw=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function cf({id:e,variant:t=on.Dots,gap:n=20,size:r,lineWidth:o=1,offset:i=2,color:s,style:l,className:u}){const d=b.useRef(null),{transform:h,patternId:p}=tt(tw,St),v=s||Jv[t],y=r||ew[t],k=t===on.Dots,S=t===on.Cross,N=Array.isArray(n)?n:[n,n],T=[N[0]*h[2]||1,N[1]*h[2]||1],$=y*h[2],I=S?[$,$]:T,C=k?[$/i,$/i]:[I[0]/i,I[1]/i];return W.createElement("svg",{className:_t(["react-flow__background",u]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:d,"data-testid":"rf__background"},W.createElement("pattern",{id:p+e,x:h[0]%T[0],y:h[1]%T[1],width:T[0],height:T[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${C[0]},-${C[1]})`},k?W.createElement(Qv,{color:v,radius:$/i}):W.createElement(Zv,{dimensions:I,color:v,lineWidth:o})),W.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${p+e})`}))}cf.displayName="Background";var nw=b.memo(cf);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),In=(e,t)=>{const n=b.forwardRef(({color:r="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:l="",children:u,...d},h)=>b.createElement("svg",{ref:h,...rw,width:o,height:o,stroke:r,strokeWidth:s?Number(i)*24/Number(o):i,className:["lucide",`lucide-${ow(e)}`,l].join(" "),...d},[...t.map(([p,v])=>b.createElement(p,v)),...Array.isArray(u)?u:[u]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=In("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=In("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=In("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=In("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=In("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=In("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=In("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=In("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=In("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function uf(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=uf(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Bt(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=uf(e))&&(r&&(r+=" "),r+=t);return r}const pc=(e,t)=>{if(!e||!t)return null;const n=new Date(e),o=new Date(t).getTime()-n.getTime(),i=Math.floor(o/1e3),s=Math.floor(i/60),l=Math.floor(s/60),u=[];return l>0&&u.push(`${l}h`),s%60>0&&u.push(`${s%60}m`),i%60>0&&u.push(`${i%60}s`),o%1e3>0&&u.push(`${o%1e3}ms`),u.join(" ")},Gi=e=>{var t;switch((t=e.status)==null?void 0:t.toLowerCase()){case"completed":return"border-green-500";case"running":return"border-blue-500";case"retrying":return"border-orange-600";case"pending":return"border-purple-600";case"terminated":return"border-yellow-500";case"failed":return"border-red-600";default:return"border-gray-500"}},dw=(e,t=50)=>e?e.length<=t?e:e.slice(0,t)+"...":"",fw=e=>{switch(e==null?void 0:e.toLowerCase()){case"completed":return"text-green-600 bg-green-50";case"retrying":return"text-orange-700 bg-orange-100";case"running":return"text-blue-600 bg-blue-50";case"pending":return"text-purple-700 bg-purple-100";case"terminated":return"text-yellow-600 bg-yellow-50";case"failed":return"text-red-700 bg-red-100";default:return"text-gray-600 bg-gray-50"}};function hw({id:e,data:t,expandChildWorkflowNode:n,collapseChildWorkflowNode:r,onShowNodeData:o,onSpreadBatchNodes:i}){var h;const s=t.type==="workflow"||t.type==="childWorkflow",l=t.count&&t.count>1,u=`${e}-${t.type}-${t.workflowId||""}-${t.runId||""}`,d=async()=>{t.count===1&&s&&!t.isLoading&&(t.isExpanded?await r(e,t.runId):await n(e,t.runId))};return g.jsxs("div",{className:"relative min-w-[450px]",children:[g.jsx(Xn,{type:"source",position:Oe.Right,id:`${e}-right`,style:{top:"50%",transform:"translateY(-50%)"}}),g.jsx(Xn,{type:"target",position:Oe.Left,id:`${e}-left`,style:{top:"50%",transform:"translateY(-50%)"}}),g.jsx(Xn,{type:"source",position:Oe.Bottom,id:`${e}-bottom`,style:{left:"25px"}}),g.jsx(Xn,{type:"target",position:Oe.Top,id:`${e}-top`,style:{left:"25px"}}),g.jsxs("div",{className:"relative",children:[l&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:Bt("absolute rounded-xl shadow-lg border-2 transition-all duration-300",Gi(t),"opacity-40"),style:{top:"-8px",left:"-8px",width:"100%",height:"100%",pointerEvents:"none"},children:g.jsx("div",{className:"p-4 bg-white rounded-xl"})}),g.jsx("div",{className:Bt("absolute rounded-xl shadow-lg border-2 transition-all duration-300",Gi(t),"opacity-70"),style:{top:"-4px",left:"-4px",width:"100%",height:"100%",pointerEvents:"none"},children:g.jsx("div",{className:"p-4 bg-white rounded-xl"})})]}),g.jsx("div",{className:Bt("rounded-xl shadow-lg border-2 transition-all duration-300 relative",Gi(t),t.isLoading&&"opacity-75"),children:g.jsxs("div",{className:Bt("p-4 relative bg-white rounded-xl",s&&!t.isLoading&&!l&&"cursor-pointer",t.isLoading&&"pointer-events-none"),onClick:d,children:[g.jsxs("div",{className:"absolute -top-2.5 -right-2.5 flex gap-1",children:[l&&g.jsx("div",{onClick:p=>{p.stopPropagation(),r(e,t.runId),i==null||i(e)},className:"w-6 h-6 flex items-center justify-center bg-blue-500 hover:bg-blue-600 rounded-full text-white shadow-lg z-10 cursor-pointer",children:g.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4.5a6.5 6.5 0 1 0 4.135 11.286l3.572 3.572a1 1 0 0 0 1.414-1.414l-3.572-3.572A6.5 6.5 0 0 0 11 4.5z"})})}),!l&&g.jsx("div",{onClick:p=>{p.stopPropagation();const v=p.currentTarget.closest(".relative");if(v){const y=v.getBoundingClientRect();o(t,{x:y.left+y.width/2,y:y.top})}},className:"w-6 h-6 flex items-center justify-center bg-gray-500 hover:bg-gray-600 rounded-full text-white shadow-lg z-10 cursor-pointer",children:g.jsx(cw,{className:"w-3 h-3"})})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:Bt("w-8 h-8 rounded flex items-center justify-center flex-shrink-0",s?"bg-amber-50":"bg-fuchsia-50"),children:s?g.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("rect",{x:"9",y:"3",width:"6",height:"6",rx:"1"}),g.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),g.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3M6 15v-3h12v3"})]}):g.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:g.jsx("path",{d:"M5 12L12 5L19 12L12 19L5 12Z"})})}),g.jsxs("div",{className:Bt("min-w-0",s?"":"flex items-center h-[2.5rem]"),children:[g.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:t.title}),s&&g.jsx("p",{className:"text-xs text-gray-500 overflow-hidden text-ellipsis",children:dw(e)})]})]}),g.jsxs("div",{className:"absolute -top-3 left-3 flex gap-2",children:[g.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:s?"rgb(254 243 199)":"rgb(253 244 255)",color:s?"rgb(217 119 6)":"rgb(192 38 211)"},children:s?"workflow":"activity"}),g.jsx("div",{className:Bt("px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",fw(t.status)),children:((h=t.status)==null?void 0:h.toLowerCase())||"unknown"}),l&&g.jsxs("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgba(224, 242, 254, 0.9)",color:"#0369a1"},children:["batch: ",t.count]}),t.startTime&&t.endTime&&g.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgba(236, 254, 255, 0.9)",color:"#0891b2"},children:pc(t.startTime,t.endTime)})]}),t.taskQueue&&g.jsx("div",{className:"absolute -bottom-2.5 right-2",children:g.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm",style:{backgroundColor:"rgba(240, 253, 244, 0.9)",color:"#166534",fontSize:"0.7rem"},children:t.taskQueue?t.taskQueue.name:""})}),t.isLoading&&g.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-50 flex items-center justify-center z-20",children:g.jsx("div",{className:"bg-white p-2 rounded-full shadow-lg",children:g.jsx(sw,{className:"w-5 h-5 text-blue-500 animate-spin"})})})]})})]})]},u)}function mw({nodes:e,onFocusChange:t,selectedWorkflow:n,onReset:r,onClose:o}){const[i,s]=b.useState(288),l=b.useRef(null),u=b.useRef(null),d=b.useRef(!1),h=e.filter(y=>y.data.type==="workflow"||y.data.type==="childWorkflow"),p=y=>{t(n===y?null:y)};b.useEffect(()=>{const y=S=>{if(!d.current||!u.current)return;const N=S.clientX-u.current.getBoundingClientRect().left;N>200&&N<600&&s(N)},k=()=>{d.current&&(d.current=!1,document.body.style.cursor="default")};return window.addEventListener("mousemove",y),window.addEventListener("mouseup",k),()=>{window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",k)}},[]);const v=y=>{y.preventDefault(),d.current=!0,document.body.style.cursor="col-resize"};return g.jsxs("div",{ref:u,className:"absolute left-0 top-0 bottom-0 bg-white shadow-lg border-r z-10",style:{width:`${i}px`},children:[g.jsxs("div",{className:"p-4 border-b flex items-center justify-between bg-gray-50",children:[g.jsx("h3",{className:"font-semibold text-gray-800",children:"Focus Workflow"}),g.jsx("button",{onClick:o,className:"p-1 hover:bg-gray-200 rounded-full transition-colors",children:g.jsx(pr,{className:"w-5 h-5 text-gray-600"})})]}),g.jsxs("div",{className:"p-4 overflow-y-auto",children:[g.jsx("button",{onClick:r,className:"w-full mb-4 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md transition-colors",children:"Reset View"}),g.jsx("div",{className:"space-y-2",children:h.map(y=>g.jsx("button",{onClick:()=>p(y.id),className:Bt("w-full px-3 py-2 text-left rounded-md transition-colors","text-sm",n===y.id?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-50"),children:y.data.title},y.id))})]}),g.jsx("div",{ref:l,onMouseDown:v,className:"w-1 cursor-col-resize hover:bg-gray-300 absolute top-0 right-0 bottom-0"})]})}const pw={NORMAL:"TASK_QUEUE_KIND_NORMAL",STICKY:"TASK_QUEUE_KIND_STICKY"};var df={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ir,function(){var n=function(a,c){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,m){f.__proto__=m}||function(f,m){for(var w in m)Object.prototype.hasOwnProperty.call(m,w)&&(f[w]=m[w])})(a,c)},r=function(){return(r=Object.assign||function(a){for(var c,f=1,m=arguments.length;f<m;f++)for(var w in c=arguments[f])Object.prototype.hasOwnProperty.call(c,w)&&(a[w]=c[w]);return a}).apply(this,arguments)};function o(a,c,f){for(var m,w=0,x=c.length;w<x;w++)!m&&w in c||((m=m||Array.prototype.slice.call(c,0,w))[w]=c[w]);return a.concat(m||Array.prototype.slice.call(c))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Ir,s=Object.keys,l=Array.isArray;function u(a,c){return typeof c!="object"||s(c).forEach(function(f){a[f]=c[f]}),a}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var d=Object.getPrototypeOf,h={}.hasOwnProperty;function p(a,c){return h.call(a,c)}function v(a,c){typeof c=="function"&&(c=c(d(a))),(typeof Reflect>"u"?s:Reflect.ownKeys)(c).forEach(function(f){k(a,f,c[f])})}var y=Object.defineProperty;function k(a,c,f,m){y(a,c,u(f&&p(f,"get")&&typeof f.get=="function"?{get:f.get,set:f.set,configurable:!0}:{value:f,configurable:!0,writable:!0},m))}function S(a){return{from:function(c){return a.prototype=Object.create(c.prototype),k(a.prototype,"constructor",a),{extend:v.bind(null,a.prototype)}}}}var N=Object.getOwnPropertyDescriptor,T=[].slice;function $(a,c,f){return T.call(a,c,f)}function I(a,c){return c(a)}function C(a){if(!a)throw new Error("Assertion Failed")}function X(a){i.setImmediate?setImmediate(a):setTimeout(a,0)}function q(a,c){if(typeof c=="string"&&p(a,c))return a[c];if(!c)return a;if(typeof c!="string"){for(var f=[],m=0,w=c.length;m<w;++m){var x=q(a,c[m]);f.push(x)}return f}var _=c.indexOf(".");if(_!==-1){var O=a[c.substr(0,_)];return O==null?void 0:q(O,c.substr(_+1))}}function H(a,c,f){if(a&&c!==void 0&&!("isFrozen"in Object&&Object.isFrozen(a)))if(typeof c!="string"&&"length"in c){C(typeof f!="string"&&"length"in f);for(var m=0,w=c.length;m<w;++m)H(a,c[m],f[m])}else{var x,_,O=c.indexOf(".");O!==-1?(x=c.substr(0,O),(_=c.substr(O+1))===""?f===void 0?l(a)&&!isNaN(parseInt(x))?a.splice(x,1):delete a[x]:a[x]=f:H(O=!(O=a[x])||!p(a,x)?a[x]={}:O,_,f)):f===void 0?l(a)&&!isNaN(parseInt(c))?a.splice(c,1):delete a[c]:a[c]=f}}function ee(a){var c,f={};for(c in a)p(a,c)&&(f[c]=a[c]);return f}var K=[].concat;function ne(a){return K.apply([],a)}var kn="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ne([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(c){return c+a+"Array"})}))).filter(function(a){return i[a]}),U=new Set(kn.map(function(a){return i[a]})),ie=null;function ce(a){return ie=new WeakMap,a=function c(f){if(!f||typeof f!="object")return f;var m=ie.get(f);if(m)return m;if(l(f)){m=[],ie.set(f,m);for(var w=0,x=f.length;w<x;++w)m.push(c(f[w]))}else if(U.has(f.constructor))m=f;else{var _,O=d(f);for(_ in m=O===Object.prototype?{}:Object.create(O),ie.set(f,m),f)p(f,_)&&(m[_]=c(f[_]))}return m}(a),ie=null,a}var E={}.toString;function z(a){return E.call(a).slice(8,-1)}var D=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Q=typeof D=="symbol"?function(a){var c;return a!=null&&(c=a[D])&&c.apply(a)}:function(){return null};function J(a,c){return c=a.indexOf(c),0<=c&&a.splice(c,1),0<=c}var j={};function G(a){var c,f,m,w;if(arguments.length===1){if(l(a))return a.slice();if(this===j&&typeof a=="string")return[a];if(w=Q(a)){for(f=[];!(m=w.next()).done;)f.push(m.value);return f}if(a==null)return[a];if(typeof(c=a.length)!="number")return[a];for(f=new Array(c);c--;)f[c]=a[c];return f}for(c=arguments.length,f=new Array(c);c--;)f[c]=arguments[c];return f}var se=typeof Symbol<"u"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Nt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Xt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Nt),ae={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function de(a,c){this.name=a,this.message=c}function we(a,c){return a+". Errors: "+Object.keys(c).map(function(f){return c[f].toString()}).filter(function(f,m,w){return w.indexOf(f)===m}).join(`
`)}function ke(a,c,f,m){this.failures=c,this.failedKeys=m,this.successCount=f,this.message=we(a,c)}function Ne(a,c){this.name="BulkError",this.failures=Object.keys(c).map(function(f){return c[f]}),this.failuresByPos=c,this.message=we(a,this.failures)}S(de).from(Error).extend({toString:function(){return this.name+": "+this.message}}),S(ke).from(de),S(Ne).from(de);var De=Xt.reduce(function(a,c){return a[c]=c+"Error",a},{}),Pe=de,fe=Xt.reduce(function(a,c){var f=c+"Error";function m(w,x){this.name=f,w?typeof w=="string"?(this.message="".concat(w).concat(x?`
 `+x:""),this.inner=x||null):typeof w=="object"&&(this.message="".concat(w.name," ").concat(w.message),this.inner=w):(this.message=ae[c]||f,this.inner=null)}return S(m).from(Pe),a[c]=m,a},{});fe.Syntax=SyntaxError,fe.Type=TypeError,fe.Range=RangeError;var Me=Nt.reduce(function(a,c){return a[c+"Error"]=fe[c],a},{}),Ue=Xt.reduce(function(a,c){return["Syntax","Type","Range"].indexOf(c)===-1&&(a[c+"Error"]=fe[c]),a},{});function je(){}function Je(a){return a}function $e(a,c){return a==null||a===Je?c:function(f){return c(a(f))}}function ze(a,c){return function(){a.apply(this,arguments),c.apply(this,arguments)}}function qe(a,c){return a===je?c:function(){var f=a.apply(this,arguments);f!==void 0&&(arguments[0]=f);var m=this.onsuccess,w=this.onerror;this.onsuccess=null,this.onerror=null;var x=c.apply(this,arguments);return m&&(this.onsuccess=this.onsuccess?ze(m,this.onsuccess):m),w&&(this.onerror=this.onerror?ze(w,this.onerror):w),x!==void 0?x:f}}function Ye(a,c){return a===je?c:function(){a.apply(this,arguments);var f=this.onsuccess,m=this.onerror;this.onsuccess=this.onerror=null,c.apply(this,arguments),f&&(this.onsuccess=this.onsuccess?ze(f,this.onsuccess):f),m&&(this.onerror=this.onerror?ze(m,this.onerror):m)}}function Ce(a,c){return a===je?c:function(f){var m=a.apply(this,arguments);u(f,m);var w=this.onsuccess,x=this.onerror;return this.onsuccess=null,this.onerror=null,f=c.apply(this,arguments),w&&(this.onsuccess=this.onsuccess?ze(w,this.onsuccess):w),x&&(this.onerror=this.onerror?ze(x,this.onerror):x),m===void 0?f===void 0?void 0:f:u(m,f)}}function st(a,c){return a===je?c:function(){return c.apply(this,arguments)!==!1&&a.apply(this,arguments)}}function wt(a,c){return a===je?c:function(){var f=a.apply(this,arguments);if(f&&typeof f.then=="function"){for(var m=this,w=arguments.length,x=new Array(w);w--;)x[w]=arguments[w];return f.then(function(){return c.apply(m,x)})}return c.apply(this,arguments)}}Ue.ModifyError=ke,Ue.DexieError=de,Ue.BulkError=Ne;var dt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function At(a){dt=a}var kt={},bt=100,kn=typeof Promise>"u"?[]:function(){var a=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[a,d(a),a];var c=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[c,d(c),a]}(),Nt=kn[0],Xt=kn[1],kn=kn[2],Xt=Xt&&Xt.then,gt=Nt&&Nt.constructor,Tt=!!kn,Ct=function(a,c){pe.push([a,c]),Ot&&(queueMicrotask(et),Ot=!1)},Dt=!0,Ot=!0,Xe=[],mt=[],le=Je,me={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:je,pgp:!1,env:{},finalize:je},te=me,pe=[],be=0,Te=[];function he(a){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var c=this._PSD=te;if(typeof a!="function"){if(a!==kt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&pt(this,this._value))}this._state=null,this._value=null,++c.ref,function f(m,w){try{w(function(x){if(m._state===null){if(x===m)throw new TypeError("A promise cannot be resolved with itself.");var _=m._lib&&yt();x&&typeof x.then=="function"?f(m,function(O,M){x instanceof he?x._then(O,M):x.then(O,M)}):(m._state=!0,m._value=x,Qe(m)),_&&cn()}},pt.bind(null,m))}catch(x){pt(m,x)}}(this,a)}var Re={get:function(){var a=te,c=dn;function f(m,w){var x=this,_=!a.global&&(a!==te||c!==dn),O=_&&!Yt(),M=new he(function(R,B){lt(x,new Ft(jt(m,a,_,O),jt(w,a,_,O),R,B,a))});return this._consoleTask&&(M._consoleTask=this._consoleTask),M}return f.prototype=kt,f},set:function(a){k(this,"then",a&&a.prototype===kt?Re:{get:function(){return a},set:Re.set})}};function Ft(a,c,f,m,w){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof c=="function"?c:null,this.resolve=f,this.reject=m,this.psd=w}function pt(a,c){var f,m;mt.push(c),a._state===null&&(f=a._lib&&yt(),c=le(c),a._state=!1,a._value=c,m=a,Xe.some(function(w){return w._value===m._value})||Xe.push(m),Qe(a),f&&cn())}function Qe(a){var c=a._listeners;a._listeners=[];for(var f=0,m=c.length;f<m;++f)lt(a,c[f]);var w=a._PSD;--w.ref||w.finalize(),be===0&&(++be,Ct(function(){--be==0&&bn()},[]))}function lt(a,c){if(a._state!==null){var f=a._state?c.onFulfilled:c.onRejected;if(f===null)return(a._state?c.resolve:c.reject)(a._value);++c.psd.ref,++be,Ct(An,[f,a,c])}else a._listeners.push(c)}function An(a,c,f){try{var m,w=c._value;!c._state&&mt.length&&(mt=[]),m=dt&&c._consoleTask?c._consoleTask.run(function(){return a(w)}):a(w),c._state||mt.indexOf(w)!==-1||function(x){for(var _=Xe.length;_;)if(Xe[--_]._value===x._value)return Xe.splice(_,1)}(c),f.resolve(m)}catch(x){f.reject(x)}finally{--be==0&&bn(),--f.psd.ref||f.psd.finalize()}}function et(){ft(me,function(){yt()&&cn()})}function yt(){var a=Dt;return Ot=Dt=!1,a}function cn(){var a,c,f;do for(;0<pe.length;)for(a=pe,pe=[],f=a.length,c=0;c<f;++c){var m=a[c];m[0].apply(null,m[1])}while(0<pe.length);Ot=Dt=!0}function bn(){var a=Xe;Xe=[],a.forEach(function(m){m._PSD.onunhandled.call(null,m._value,m)});for(var c=Te.slice(0),f=c.length;f;)c[--f]()}function xn(a){return new he(kt,!1,a)}function Ge(a,c){var f=te;return function(){var m=yt(),w=te;try{return Ve(f,!0),a.apply(this,arguments)}catch(x){c&&c(x)}finally{Ve(w,!1),m&&cn()}}}v(he.prototype,{then:Re,_then:function(a,c){lt(this,new Ft(null,null,a,c,te))},catch:function(a){if(arguments.length===1)return this.then(null,a);var c=a,f=arguments[1];return typeof c=="function"?this.then(null,function(m){return(m instanceof c?f:xn)(m)}):this.then(null,function(m){return(m&&m.name===c?f:xn)(m)})},finally:function(a){return this.then(function(c){return he.resolve(a()).then(function(){return c})},function(c){return he.resolve(a()).then(function(){return xn(c)})})},timeout:function(a,c){var f=this;return a<1/0?new he(function(m,w){var x=setTimeout(function(){return w(new fe.Timeout(c))},a);f.then(m,w).finally(clearTimeout.bind(null,x))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&k(he.prototype,Symbol.toStringTag,"Dexie.Promise"),me.env=nt(),v(he,{all:function(){var a=G.apply(null,arguments).map(Rn);return new he(function(c,f){a.length===0&&c([]);var m=a.length;a.forEach(function(w,x){return he.resolve(w).then(function(_){a[x]=_,--m||c(a)},f)})})},resolve:function(a){return a instanceof he?a:a&&typeof a.then=="function"?new he(function(c,f){a.then(c,f)}):new he(kt,!0,a)},reject:xn,race:function(){var a=G.apply(null,arguments).map(Rn);return new he(function(c,f){a.map(function(m){return he.resolve(m).then(c,f)})})},PSD:{get:function(){return te},set:function(a){return te=a}},totalEchoes:{get:function(){return dn}},newPSD:Wt,usePSD:ft,scheduler:{get:function(){return Ct},set:function(a){Ct=a}},rejectionMapper:{get:function(){return le},set:function(a){le=a}},follow:function(a,c){return new he(function(f,m){return Wt(function(w,x){var _=te;_.unhandleds=[],_.onunhandled=x,_.finalize=ze(function(){var O,M=this;O=function(){M.unhandleds.length===0?w():x(M.unhandleds[0])},Te.push(function R(){O(),Te.splice(Te.indexOf(R),1)}),++be,Ct(function(){--be==0&&bn()},[])},_.finalize),a()},c,f,m)})}}),gt&&(gt.allSettled&&k(he,"allSettled",function(){var a=G.apply(null,arguments).map(Rn);return new he(function(c){a.length===0&&c([]);var f=a.length,m=new Array(f);a.forEach(function(w,x){return he.resolve(w).then(function(_){return m[x]={status:"fulfilled",value:_}},function(_){return m[x]={status:"rejected",reason:_}}).then(function(){return--f||c(m)})})})}),gt.any&&typeof AggregateError<"u"&&k(he,"any",function(){var a=G.apply(null,arguments).map(Rn);return new he(function(c,f){a.length===0&&f(new AggregateError([]));var m=a.length,w=new Array(m);a.forEach(function(x,_){return he.resolve(x).then(function(O){return c(O)},function(O){w[_]=O,--m||f(new AggregateError(w))})})})}),gt.withResolvers&&(he.withResolvers=gt.withResolvers));var at={awaits:0,echoes:0,id:0},$n=0,ln=[],un=0,dn=0,Kr=0;function Wt(a,c,f,m){var w=te,x=Object.create(w);return x.parent=w,x.ref=0,x.global=!1,x.id=++Kr,me.env,x.env=Tt?{Promise:he,PromiseProp:{value:he,configurable:!0,writable:!0},all:he.all,race:he.race,allSettled:he.allSettled,any:he.any,resolve:he.resolve,reject:he.reject}:{},c&&u(x,c),++w.ref,x.finalize=function(){--this.parent.ref||this.parent.finalize()},m=ft(x,a,f,m),x.ref===0&&x.finalize(),m}function Jt(){return at.id||(at.id=++$n),++at.awaits,at.echoes+=bt,at.id}function Yt(){return!!at.awaits&&(--at.awaits==0&&(at.id=0),at.echoes=at.awaits*bt,!0)}function Rn(a){return at.echoes&&a&&a.constructor===gt?(Jt(),a.then(function(c){return Yt(),c},function(c){return Yt(),rt(c)})):a}function Le(){var a=ln[ln.length-1];ln.pop(),Ve(a,!1)}function Ve(a,c){var f,m=te;(c?!at.echoes||un++&&a===te:!un||--un&&a===te)||queueMicrotask(c?(function(w){++dn,at.echoes&&--at.echoes!=0||(at.echoes=at.awaits=at.id=0),ln.push(te),Ve(w,!0)}).bind(null,a):Le),a!==te&&(te=a,m===me&&(me.env=nt()),Tt&&(f=me.env.Promise,c=a.env,(m.global||a.global)&&(Object.defineProperty(i,"Promise",c.PromiseProp),f.all=c.all,f.race=c.race,f.resolve=c.resolve,f.reject=c.reject,c.allSettled&&(f.allSettled=c.allSettled),c.any&&(f.any=c.any))))}function nt(){var a=i.Promise;return Tt?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject}:{}}function ft(a,c,f,m,w){var x=te;try{return Ve(a,!0),c(f,m,w)}finally{Ve(x,!1)}}function jt(a,c,f,m){return typeof a!="function"?a:function(){var w=te;f&&Jt(),Ve(c,!0);try{return a.apply(this,arguments)}finally{Ve(w,!1),m&&queueMicrotask(Yt)}}}function Sn(a){Promise===gt&&at.echoes===0?un===0?a():enqueueNativeMicroTask(a):setTimeout(a,0)}(""+Xt).indexOf("[native code]")===-1&&(Jt=Yt=je);var rt=he.reject,Ut="￿",en="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Vo="String expected.",Ln=[],kr="__dbnames",Ur="readonly",Xr="readwrite";function fn(a,c){return a?c?function(){return a.apply(this,arguments)&&c.apply(this,arguments)}:a:c}var qo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Er(a){return typeof a!="string"||/\./.test(a)?function(c){return c}:function(c){return c[a]===void 0&&a in c&&delete(c=ce(c))[a],c}}function Ko(){throw fe.Type()}function Fe(a,c){try{var f=Mc(a),m=Mc(c);if(f!==m)return f==="Array"?1:m==="Array"?-1:f==="binary"?1:m==="binary"?-1:f==="string"?1:m==="string"?-1:f==="Date"?1:m!=="Date"?NaN:-1;switch(f){case"number":case"Date":case"string":return c<a?1:a<c?-1:0;case"binary":return function(w,x){for(var _=w.length,O=x.length,M=_<O?_:O,R=0;R<M;++R)if(w[R]!==x[R])return w[R]<x[R]?-1:1;return _===O?0:_<O?-1:1}(Ac(a),Ac(c));case"Array":return function(w,x){for(var _=w.length,O=x.length,M=_<O?_:O,R=0;R<M;++R){var B=Fe(w[R],x[R]);if(B!==0)return B}return _===O?0:_<O?-1:1}(a,c)}}catch{}return NaN}function Mc(a){var c=typeof a;return c!="object"?c:ArrayBuffer.isView(a)?"binary":(a=z(a),a==="ArrayBuffer"?"binary":a)}function Ac(a){return a instanceof Uint8Array?a:ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var $c=(ot.prototype._trans=function(a,c,f){var m=this._tx||te.trans,w=this.name,x=dt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(a==="readonly"?"read":"write"," ").concat(this.name));function _(R,B,P){if(!P.schema[w])throw new fe.NotFound("Table "+w+" not part of transaction");return c(P.idbtrans,P)}var O=yt();try{var M=m&&m.db._novip===this.db._novip?m===te.trans?m._promise(a,_,f):Wt(function(){return m._promise(a,_,f)},{trans:m,transless:te.transless||te}):function R(B,P,V,A){if(B.idbdb&&(B._state.openComplete||te.letThrough||B._vip)){var F=B._createTransaction(P,V,B._dbSchema);try{F.create(),B._state.PR1398_maxLoop=3}catch(Y){return Y.name===De.InvalidState&&B.isOpen()&&0<--B._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),B.close({disableAutoOpen:!1}),B.open().then(function(){return R(B,P,V,A)})):rt(Y)}return F._promise(P,function(Y,L){return Wt(function(){return te.trans=F,A(Y,L,F)})}).then(function(Y){if(P==="readwrite")try{F.idbtrans.commit()}catch{}return P==="readonly"?Y:F._completion.then(function(){return Y})})}if(B._state.openComplete)return rt(new fe.DatabaseClosed(B._state.dbOpenError));if(!B._state.isBeingOpened){if(!B._state.autoOpen)return rt(new fe.DatabaseClosed);B.open().catch(je)}return B._state.dbReadyPromise.then(function(){return R(B,P,V,A)})}(this.db,a,[this.name],_);return x&&(M._consoleTask=x,M=M.catch(function(R){return console.trace(R),rt(R)})),M}finally{O&&cn()}},ot.prototype.get=function(a,c){var f=this;return a&&a.constructor===Object?this.where(a).first(c):a==null?rt(new fe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(m){return f.core.get({trans:m,key:a}).then(function(w){return f.hook.reading.fire(w)})}).then(c)},ot.prototype.where=function(a){if(typeof a=="string")return new this.db.WhereClause(this,a);if(l(a))return new this.db.WhereClause(this,"[".concat(a.join("+"),"]"));var c=s(a);if(c.length===1)return this.where(c[0]).equals(a[c[0]]);var f=this.schema.indexes.concat(this.schema.primKey).filter(function(O){if(O.compound&&c.every(function(R){return 0<=O.keyPath.indexOf(R)})){for(var M=0;M<c.length;++M)if(c.indexOf(O.keyPath[M])===-1)return!1;return!0}return!1}).sort(function(O,M){return O.keyPath.length-M.keyPath.length})[0];if(f&&this.db._maxKey!==Ut){var x=f.keyPath.slice(0,c.length);return this.where(x).equals(x.map(function(M){return a[M]}))}!f&&dt&&console.warn("The query ".concat(JSON.stringify(a)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(c.join("+"),"]"));var m=this.schema.idxByName;function w(O,M){return Fe(O,M)===0}var _=c.reduce(function(P,M){var R=P[0],B=P[1],P=m[M],V=a[M];return[R||P,R||!P?fn(B,P&&P.multi?function(A){return A=q(A,M),l(A)&&A.some(function(F){return w(V,F)})}:function(A){return w(V,q(A,M))}):B]},[null,null]),x=_[0],_=_[1];return x?this.where(x.name).equals(a[x.keyPath]).filter(_):f?this.filter(_):this.where(c).equals("")},ot.prototype.filter=function(a){return this.toCollection().and(a)},ot.prototype.count=function(a){return this.toCollection().count(a)},ot.prototype.offset=function(a){return this.toCollection().offset(a)},ot.prototype.limit=function(a){return this.toCollection().limit(a)},ot.prototype.each=function(a){return this.toCollection().each(a)},ot.prototype.toArray=function(a){return this.toCollection().toArray(a)},ot.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ot.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,l(a)?"[".concat(a.join("+"),"]"):a))},ot.prototype.reverse=function(){return this.toCollection().reverse()},ot.prototype.mapToClass=function(a){var c,f=this.db,m=this.name;function w(){return c!==null&&c.apply(this,arguments)||this}(this.schema.mappedClass=a).prototype instanceof Ko&&(function(M,R){if(typeof R!="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function B(){this.constructor=M}n(M,R),M.prototype=R===null?Object.create(R):(B.prototype=R.prototype,new B)}(w,c=a),Object.defineProperty(w.prototype,"db",{get:function(){return f},enumerable:!1,configurable:!0}),w.prototype.table=function(){return m},a=w);for(var x=new Set,_=a.prototype;_;_=d(_))Object.getOwnPropertyNames(_).forEach(function(M){return x.add(M)});function O(M){if(!M)return M;var R,B=Object.create(a.prototype);for(R in M)if(!x.has(R))try{B[R]=M[R]}catch{}return B}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=O,this.hook("reading",O),a},ot.prototype.defineClass=function(){return this.mapToClass(function(a){u(this,a)})},ot.prototype.add=function(a,c){var f=this,m=this.schema.primKey,w=m.auto,x=m.keyPath,_=a;return x&&w&&(_=Er(x)(a)),this._trans("readwrite",function(O){return f.core.mutate({trans:O,type:"add",keys:c!=null?[c]:null,values:[_]})}).then(function(O){return O.numFailures?he.reject(O.failures[0]):O.lastResult}).then(function(O){if(x)try{H(a,x,O)}catch{}return O})},ot.prototype.update=function(a,c){return typeof a!="object"||l(a)?this.where(":id").equals(a).modify(c):(a=q(a,this.schema.primKey.keyPath),a===void 0?rt(new fe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(a).modify(c))},ot.prototype.put=function(a,c){var f=this,m=this.schema.primKey,w=m.auto,x=m.keyPath,_=a;return x&&w&&(_=Er(x)(a)),this._trans("readwrite",function(O){return f.core.mutate({trans:O,type:"put",values:[_],keys:c!=null?[c]:null})}).then(function(O){return O.numFailures?he.reject(O.failures[0]):O.lastResult}).then(function(O){if(x)try{H(a,x,O)}catch{}return O})},ot.prototype.delete=function(a){var c=this;return this._trans("readwrite",function(f){return c.core.mutate({trans:f,type:"delete",keys:[a]})}).then(function(f){return f.numFailures?he.reject(f.failures[0]):void 0})},ot.prototype.clear=function(){var a=this;return this._trans("readwrite",function(c){return a.core.mutate({trans:c,type:"deleteRange",range:qo})}).then(function(c){return c.numFailures?he.reject(c.failures[0]):void 0})},ot.prototype.bulkGet=function(a){var c=this;return this._trans("readonly",function(f){return c.core.getMany({keys:a,trans:f}).then(function(m){return m.map(function(w){return c.hook.reading.fire(w)})})})},ot.prototype.bulkAdd=function(a,c,f){var m=this,w=Array.isArray(c)?c:void 0,x=(f=f||(w?void 0:c))?f.allKeys:void 0;return this._trans("readwrite",function(_){var R=m.schema.primKey,O=R.auto,R=R.keyPath;if(R&&w)throw new fe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(w&&w.length!==a.length)throw new fe.InvalidArgument("Arguments objects and keys must have the same length");var M=a.length,R=R&&O?a.map(Er(R)):a;return m.core.mutate({trans:_,type:"add",keys:w,values:R,wantResults:x}).then(function(F){var P=F.numFailures,V=F.results,A=F.lastResult,F=F.failures;if(P===0)return x?V:A;throw new Ne("".concat(m.name,".bulkAdd(): ").concat(P," of ").concat(M," operations failed"),F)})})},ot.prototype.bulkPut=function(a,c,f){var m=this,w=Array.isArray(c)?c:void 0,x=(f=f||(w?void 0:c))?f.allKeys:void 0;return this._trans("readwrite",function(_){var R=m.schema.primKey,O=R.auto,R=R.keyPath;if(R&&w)throw new fe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(w&&w.length!==a.length)throw new fe.InvalidArgument("Arguments objects and keys must have the same length");var M=a.length,R=R&&O?a.map(Er(R)):a;return m.core.mutate({trans:_,type:"put",keys:w,values:R,wantResults:x}).then(function(F){var P=F.numFailures,V=F.results,A=F.lastResult,F=F.failures;if(P===0)return x?V:A;throw new Ne("".concat(m.name,".bulkPut(): ").concat(P," of ").concat(M," operations failed"),F)})})},ot.prototype.bulkUpdate=function(a){var c=this,f=this.core,m=a.map(function(_){return _.key}),w=a.map(function(_){return _.changes}),x=[];return this._trans("readwrite",function(_){return f.getMany({trans:_,keys:m,cache:"clone"}).then(function(O){var M=[],R=[];a.forEach(function(P,V){var A=P.key,F=P.changes,Y=O[V];if(Y){for(var L=0,Z=Object.keys(F);L<Z.length;L++){var re=Z[L],oe=F[re];if(re===c.schema.primKey.keyPath){if(Fe(oe,A)!==0)throw new fe.Constraint("Cannot update primary key in bulkUpdate()")}else H(Y,re,oe)}x.push(V),M.push(A),R.push(Y)}});var B=M.length;return f.mutate({trans:_,type:"put",keys:M,values:R,updates:{keys:m,changeSpecs:w}}).then(function(P){var V=P.numFailures,A=P.failures;if(V===0)return B;for(var F=0,Y=Object.keys(A);F<Y.length;F++){var L,Z=Y[F],re=x[Number(Z)];re!=null&&(L=A[Z],delete A[Z],A[re]=L)}throw new Ne("".concat(c.name,".bulkUpdate(): ").concat(V," of ").concat(B," operations failed"),A)})})})},ot.prototype.bulkDelete=function(a){var c=this,f=a.length;return this._trans("readwrite",function(m){return c.core.mutate({trans:m,type:"delete",keys:a})}).then(function(_){var w=_.numFailures,x=_.lastResult,_=_.failures;if(w===0)return x;throw new Ne("".concat(c.name,".bulkDelete(): ").concat(w," of ").concat(f," operations failed"),_)})},ot);function ot(){}function Gr(a){function c(_,O){if(O){for(var M=arguments.length,R=new Array(M-1);--M;)R[M-1]=arguments[M];return f[_].subscribe.apply(null,R),a}if(typeof _=="string")return f[_]}var f={};c.addEventType=x;for(var m=1,w=arguments.length;m<w;++m)x(arguments[m]);return c;function x(_,O,M){if(typeof _!="object"){var R;O=O||st;var B={subscribers:[],fire:M=M||je,subscribe:function(P){B.subscribers.indexOf(P)===-1&&(B.subscribers.push(P),B.fire=O(B.fire,P))},unsubscribe:function(P){B.subscribers=B.subscribers.filter(function(V){return V!==P}),B.fire=B.subscribers.reduce(O,M)}};return f[_]=c[_]=B}s(R=_).forEach(function(P){var V=R[P];if(l(V))x(P,R[P][0],R[P][1]);else{if(V!=="asap")throw new fe.InvalidArgument("Invalid event config");var A=x(P,Je,function(){for(var F=arguments.length,Y=new Array(F);F--;)Y[F]=arguments[F];A.subscribers.forEach(function(L){X(function(){L.apply(null,Y)})})})}})}}function Zr(a,c){return S(c).from({prototype:a}),c}function _r(a,c){return!(a.filter||a.algorithm||a.or)&&(c?a.justLimit:!a.replayFilter)}function mi(a,c){a.filter=fn(a.filter,c)}function pi(a,c,f){var m=a.replayFilter;a.replayFilter=m?function(){return fn(m(),c())}:c,a.justLimit=f&&!m}function Uo(a,c){if(a.isPrimKey)return c.primaryKey;var f=c.getIndexByKeyPath(a.index);if(!f)throw new fe.Schema("KeyPath "+a.index+" on object store "+c.name+" is not indexed");return f}function Rc(a,c,f){var m=Uo(a,c.schema);return c.openCursor({trans:f,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:m,range:a.range}})}function Xo(a,c,f,m){var w=a.replayFilter?fn(a.filter,a.replayFilter()):a.filter;if(a.or){var x={},_=function(O,M,R){var B,P;w&&!w(M,R,function(V){return M.stop(V)},function(V){return M.fail(V)})||((P=""+(B=M.primaryKey))=="[object ArrayBuffer]"&&(P=""+new Uint8Array(B)),p(x,P)||(x[P]=!0,c(O,M,R)))};return Promise.all([a.or._iterate(_,f),Lc(Rc(a,m,f),a.algorithm,_,!a.keysOnly&&a.valueMapper)])}return Lc(Rc(a,m,f),fn(a.algorithm,w),c,!a.keysOnly&&a.valueMapper)}function Lc(a,c,f,m){var w=Ge(m?function(x,_,O){return f(m(x),_,O)}:f);return a.then(function(x){if(x)return x.start(function(){var _=function(){return x.continue()};c&&!c(x,function(O){return _=O},function(O){x.stop(O),_=je},function(O){x.fail(O),_=je})||w(x.value,x,function(O){return _=O}),_()})})}var kn=Symbol(),Qr=(Fc.prototype.execute=function(a){if(this.add!==void 0){var c=this.add;if(l(c))return o(o([],l(a)?a:[],!0),c).sort();if(typeof c=="number")return(Number(a)||0)+c;if(typeof c=="bigint")try{return BigInt(a)+c}catch{return BigInt(0)+c}throw new TypeError("Invalid term ".concat(c))}if(this.remove!==void 0){var f=this.remove;if(l(f))return l(a)?a.filter(function(m){return!f.includes(m)}).sort():[];if(typeof f=="number")return Number(a)-f;if(typeof f=="bigint")try{return BigInt(a)-f}catch{return BigInt(0)-f}throw new TypeError("Invalid subtrahend ".concat(f))}return c=(c=this.replacePrefix)===null||c===void 0?void 0:c[0],c&&typeof a=="string"&&a.startsWith(c)?this.replacePrefix[1]+a.substring(c.length):a},Fc);function Fc(a){Object.assign(this,a)}var vh=(Ke.prototype._read=function(a,c){var f=this._ctx;return f.error?f.table._trans(null,rt.bind(null,f.error)):f.table._trans("readonly",a).then(c)},Ke.prototype._write=function(a){var c=this._ctx;return c.error?c.table._trans(null,rt.bind(null,c.error)):c.table._trans("readwrite",a,"locked")},Ke.prototype._addAlgorithm=function(a){var c=this._ctx;c.algorithm=fn(c.algorithm,a)},Ke.prototype._iterate=function(a,c){return Xo(this._ctx,a,c,this._ctx.table.core)},Ke.prototype.clone=function(a){var c=Object.create(this.constructor.prototype),f=Object.create(this._ctx);return a&&u(f,a),c._ctx=f,c},Ke.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ke.prototype.each=function(a){var c=this._ctx;return this._read(function(f){return Xo(c,a,f,c.table.core)})},Ke.prototype.count=function(a){var c=this;return this._read(function(f){var m=c._ctx,w=m.table.core;if(_r(m,!0))return w.count({trans:f,query:{index:Uo(m,w.schema),range:m.range}}).then(function(_){return Math.min(_,m.limit)});var x=0;return Xo(m,function(){return++x,!1},f,w).then(function(){return x})}).then(a)},Ke.prototype.sortBy=function(a,c){var f=a.split(".").reverse(),m=f[0],w=f.length-1;function x(M,R){return R?x(M[f[R]],R-1):M[m]}var _=this._ctx.dir==="next"?1:-1;function O(M,R){return Fe(x(M,w),x(R,w))*_}return this.toArray(function(M){return M.sort(O)}).then(c)},Ke.prototype.toArray=function(a){var c=this;return this._read(function(f){var m=c._ctx;if(m.dir==="next"&&_r(m,!0)&&0<m.limit){var w=m.valueMapper,x=Uo(m,m.table.core.schema);return m.table.core.query({trans:f,limit:m.limit,values:!0,query:{index:x,range:m.range}}).then(function(O){return O=O.result,w?O.map(w):O})}var _=[];return Xo(m,function(O){return _.push(O)},f,m.table.core).then(function(){return _})},a)},Ke.prototype.offset=function(a){var c=this._ctx;return a<=0||(c.offset+=a,_r(c)?pi(c,function(){var f=a;return function(m,w){return f===0||(f===1?--f:w(function(){m.advance(f),f=0}),!1)}}):pi(c,function(){var f=a;return function(){return--f<0}})),this},Ke.prototype.limit=function(a){return this._ctx.limit=Math.min(this._ctx.limit,a),pi(this._ctx,function(){var c=a;return function(f,m,w){return--c<=0&&m(w),0<=c}},!0),this},Ke.prototype.until=function(a,c){return mi(this._ctx,function(f,m,w){return!a(f.value)||(m(w),c)}),this},Ke.prototype.first=function(a){return this.limit(1).toArray(function(c){return c[0]}).then(a)},Ke.prototype.last=function(a){return this.reverse().first(a)},Ke.prototype.filter=function(a){var c;return mi(this._ctx,function(f){return a(f.value)}),(c=this._ctx).isMatch=fn(c.isMatch,a),this},Ke.prototype.and=function(a){return this.filter(a)},Ke.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)},Ke.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ke.prototype.desc=function(){return this.reverse()},Ke.prototype.eachKey=function(a){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(f,m){a(m.key,m)})},Ke.prototype.eachUniqueKey=function(a){return this._ctx.unique="unique",this.eachKey(a)},Ke.prototype.eachPrimaryKey=function(a){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(f,m){a(m.primaryKey,m)})},Ke.prototype.keys=function(a){var c=this._ctx;c.keysOnly=!c.isMatch;var f=[];return this.each(function(m,w){f.push(w.key)}).then(function(){return f}).then(a)},Ke.prototype.primaryKeys=function(a){var c=this._ctx;if(c.dir==="next"&&_r(c,!0)&&0<c.limit)return this._read(function(m){var w=Uo(c,c.table.core.schema);return c.table.core.query({trans:m,values:!1,limit:c.limit,query:{index:w,range:c.range}})}).then(function(m){return m.result}).then(a);c.keysOnly=!c.isMatch;var f=[];return this.each(function(m,w){f.push(w.primaryKey)}).then(function(){return f}).then(a)},Ke.prototype.uniqueKeys=function(a){return this._ctx.unique="unique",this.keys(a)},Ke.prototype.firstKey=function(a){return this.limit(1).keys(function(c){return c[0]}).then(a)},Ke.prototype.lastKey=function(a){return this.reverse().firstKey(a)},Ke.prototype.distinct=function(){var a=this._ctx,a=a.index&&a.table.schema.idxByName[a.index];if(!a||!a.multi)return this;var c={};return mi(this._ctx,function(w){var m=w.primaryKey.toString(),w=p(c,m);return c[m]=!0,!w}),this},Ke.prototype.modify=function(a){var c=this,f=this._ctx;return this._write(function(m){var w,x,_;_=typeof a=="function"?a:(w=s(a),x=w.length,function(L){for(var Z=!1,re=0;re<x;++re){var oe=w[re],ue=a[oe],ge=q(L,oe);ue instanceof Qr?(H(L,oe,ue.execute(ge)),Z=!0):ge!==ue&&(H(L,oe,ue),Z=!0)}return Z});var O=f.table.core,P=O.schema.primaryKey,M=P.outbound,R=P.extractKey,B=200,P=c.db._options.modifyChunkSize;P&&(B=typeof P=="object"?P[O.name]||P["*"]||200:P);function V(L,oe){var re=oe.failures,oe=oe.numFailures;F+=L-oe;for(var ue=0,ge=s(re);ue<ge.length;ue++){var Se=ge[ue];A.push(re[Se])}}var A=[],F=0,Y=[];return c.clone().primaryKeys().then(function(L){function Z(oe){var ue=Math.min(B,L.length-oe);return O.getMany({trans:m,keys:L.slice(oe,oe+ue),cache:"immutable"}).then(function(ge){for(var Se=[],ye=[],ve=M?[]:null,Ee=[],xe=0;xe<ue;++xe){var _e=ge[xe],Ae={value:ce(_e),primKey:L[oe+xe]};_.call(Ae,Ae.value,Ae)!==!1&&(Ae.value==null?Ee.push(L[oe+xe]):M||Fe(R(_e),R(Ae.value))===0?(ye.push(Ae.value),M&&ve.push(L[oe+xe])):(Ee.push(L[oe+xe]),Se.push(Ae.value)))}return Promise.resolve(0<Se.length&&O.mutate({trans:m,type:"add",values:Se}).then(function(We){for(var Be in We.failures)Ee.splice(parseInt(Be),1);V(Se.length,We)})).then(function(){return(0<ye.length||re&&typeof a=="object")&&O.mutate({trans:m,type:"put",keys:ve,values:ye,criteria:re,changeSpec:typeof a!="function"&&a,isAdditionalChunk:0<oe}).then(function(We){return V(ye.length,We)})}).then(function(){return(0<Ee.length||re&&a===gi)&&O.mutate({trans:m,type:"delete",keys:Ee,criteria:re,isAdditionalChunk:0<oe}).then(function(We){return V(Ee.length,We)})}).then(function(){return L.length>oe+ue&&Z(oe+B)})})}var re=_r(f)&&f.limit===1/0&&(typeof a!="function"||a===gi)&&{index:f.index,range:f.range};return Z(0).then(function(){if(0<A.length)throw new ke("Error modifying one or more objects",A,F,Y);return L.length})})})},Ke.prototype.delete=function(){var a=this._ctx,c=a.range;return _r(a)&&(a.isPrimKey||c.type===3)?this._write(function(f){var m=a.table.core.schema.primaryKey,w=c;return a.table.core.count({trans:f,query:{index:m,range:w}}).then(function(x){return a.table.core.mutate({trans:f,type:"deleteRange",range:w}).then(function(_){var O=_.failures;if(_.lastResult,_.results,_=_.numFailures,_)throw new ke("Could not delete some values",Object.keys(O).map(function(M){return O[M]}),x-_);return x-_})})}):this.modify(gi)},Ke);function Ke(){}var gi=function(a,c){return c.value=null};function wh(a,c){return a<c?-1:a===c?0:1}function bh(a,c){return c<a?-1:a===c?0:1}function Vt(a,c,f){return a=a instanceof Bc?new a.Collection(a):a,a._ctx.error=new(f||TypeError)(c),a}function Nr(a){return new a.Collection(a,function(){return Wc("")}).limit(0)}function Go(a,c,f,m){var w,x,_,O,M,R,B,P=f.length;if(!f.every(function(F){return typeof F=="string"}))return Vt(a,Vo);function V(F){w=F==="next"?function(L){return L.toUpperCase()}:function(L){return L.toLowerCase()},x=F==="next"?function(L){return L.toLowerCase()}:function(L){return L.toUpperCase()},_=F==="next"?wh:bh;var Y=f.map(function(L){return{lower:x(L),upper:w(L)}}).sort(function(L,Z){return _(L.lower,Z.lower)});O=Y.map(function(L){return L.upper}),M=Y.map(function(L){return L.lower}),B=(R=F)==="next"?"":m}V("next"),a=new a.Collection(a,function(){return Fn(O[0],M[P-1]+m)}),a._ondirectionchange=function(F){V(F)};var A=0;return a._addAlgorithm(function(F,Y,L){var Z=F.key;if(typeof Z!="string")return!1;var re=x(Z);if(c(re,M,A))return!0;for(var oe=null,ue=A;ue<P;++ue){var ge=function(Se,ye,ve,Ee,xe,_e){for(var Ae=Math.min(Se.length,Ee.length),We=-1,Be=0;Be<Ae;++Be){var qt=ye[Be];if(qt!==Ee[Be])return xe(Se[Be],ve[Be])<0?Se.substr(0,Be)+ve[Be]+ve.substr(Be+1):xe(Se[Be],Ee[Be])<0?Se.substr(0,Be)+Ee[Be]+ve.substr(Be+1):0<=We?Se.substr(0,We)+ye[We]+ve.substr(We+1):null;xe(Se[Be],qt)<0&&(We=Be)}return Ae<Ee.length&&_e==="next"?Se+ve.substr(Se.length):Ae<Se.length&&_e==="prev"?Se.substr(0,ve.length):We<0?null:Se.substr(0,We)+Ee[We]+ve.substr(We+1)}(Z,re,O[ue],M[ue],_,R);ge===null&&oe===null?A=ue+1:(oe===null||0<_(oe,ge))&&(oe=ge)}return Y(oe!==null?function(){F.continue(oe+B)}:L),!1}),a}function Fn(a,c,f,m){return{type:2,lower:a,upper:c,lowerOpen:f,upperOpen:m}}function Wc(a){return{type:1,lower:a,upper:a}}var Bc=(Object.defineProperty(xt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),xt.prototype.between=function(a,c,f,m){f=f!==!1,m=m===!0;try{return 0<this._cmp(a,c)||this._cmp(a,c)===0&&(f||m)&&(!f||!m)?Nr(this):new this.Collection(this,function(){return Fn(a,c,!f,!m)})}catch{return Vt(this,en)}},xt.prototype.equals=function(a){return a==null?Vt(this,en):new this.Collection(this,function(){return Wc(a)})},xt.prototype.above=function(a){return a==null?Vt(this,en):new this.Collection(this,function(){return Fn(a,void 0,!0)})},xt.prototype.aboveOrEqual=function(a){return a==null?Vt(this,en):new this.Collection(this,function(){return Fn(a,void 0,!1)})},xt.prototype.below=function(a){return a==null?Vt(this,en):new this.Collection(this,function(){return Fn(void 0,a,!1,!0)})},xt.prototype.belowOrEqual=function(a){return a==null?Vt(this,en):new this.Collection(this,function(){return Fn(void 0,a)})},xt.prototype.startsWith=function(a){return typeof a!="string"?Vt(this,Vo):this.between(a,a+Ut,!0,!0)},xt.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):Go(this,function(c,f){return c.indexOf(f[0])===0},[a],Ut)},xt.prototype.equalsIgnoreCase=function(a){return Go(this,function(c,f){return c===f[0]},[a],"")},xt.prototype.anyOfIgnoreCase=function(){var a=G.apply(j,arguments);return a.length===0?Nr(this):Go(this,function(c,f){return f.indexOf(c)!==-1},a,"")},xt.prototype.startsWithAnyOfIgnoreCase=function(){var a=G.apply(j,arguments);return a.length===0?Nr(this):Go(this,function(c,f){return f.some(function(m){return c.indexOf(m)===0})},a,Ut)},xt.prototype.anyOf=function(){var a=this,c=G.apply(j,arguments),f=this._cmp;try{c.sort(f)}catch{return Vt(this,en)}if(c.length===0)return Nr(this);var m=new this.Collection(this,function(){return Fn(c[0],c[c.length-1])});m._ondirectionchange=function(x){f=x==="next"?a._ascending:a._descending,c.sort(f)};var w=0;return m._addAlgorithm(function(x,_,O){for(var M=x.key;0<f(M,c[w]);)if(++w===c.length)return _(O),!1;return f(M,c[w])===0||(_(function(){x.continue(c[w])}),!1)}),m},xt.prototype.notEqual=function(a){return this.inAnyRange([[-1/0,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},xt.prototype.noneOf=function(){var a=G.apply(j,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch{return Vt(this,en)}var c=a.reduce(function(f,m){return f?f.concat([[f[f.length-1][1],m]]):[[-1/0,m]]},null);return c.push([a[a.length-1],this.db._maxKey]),this.inAnyRange(c,{includeLowers:!1,includeUppers:!1})},xt.prototype.inAnyRange=function(Z,c){var f=this,m=this._cmp,w=this._ascending,x=this._descending,_=this._min,O=this._max;if(Z.length===0)return Nr(this);if(!Z.every(function(re){return re[0]!==void 0&&re[1]!==void 0&&w(re[0],re[1])<=0}))return Vt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",fe.InvalidArgument);var M=!c||c.includeLowers!==!1,R=c&&c.includeUppers===!0,B,P=w;function V(re,oe){return P(re[0],oe[0])}try{(B=Z.reduce(function(re,oe){for(var ue=0,ge=re.length;ue<ge;++ue){var Se=re[ue];if(m(oe[0],Se[1])<0&&0<m(oe[1],Se[0])){Se[0]=_(Se[0],oe[0]),Se[1]=O(Se[1],oe[1]);break}}return ue===ge&&re.push(oe),re},[])).sort(V)}catch{return Vt(this,en)}var A=0,F=R?function(re){return 0<w(re,B[A][1])}:function(re){return 0<=w(re,B[A][1])},Y=M?function(re){return 0<x(re,B[A][0])}:function(re){return 0<=x(re,B[A][0])},L=F,Z=new this.Collection(this,function(){return Fn(B[0][0],B[B.length-1][1],!M,!R)});return Z._ondirectionchange=function(re){P=re==="next"?(L=F,w):(L=Y,x),B.sort(V)},Z._addAlgorithm(function(re,oe,ue){for(var ge,Se=re.key;L(Se);)if(++A===B.length)return oe(ue),!1;return!F(ge=Se)&&!Y(ge)||(f._cmp(Se,B[A][1])===0||f._cmp(Se,B[A][0])===0||oe(function(){P===w?re.continue(B[A][0]):re.continue(B[A][1])}),!1)}),Z},xt.prototype.startsWithAnyOf=function(){var a=G.apply(j,arguments);return a.every(function(c){return typeof c=="string"})?a.length===0?Nr(this):this.inAnyRange(a.map(function(c){return[c,c+Ut]})):Vt(this,"startsWithAnyOf() only works with strings")},xt);function xt(){}function hn(a){return Ge(function(c){return Jr(c),a(c.target.error),!1})}function Jr(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var eo="storagemutated",yi="x-storagemutated-1",Wn=Gr(null,eo),xh=(mn.prototype._lock=function(){return C(!te.global),++this._reculock,this._reculock!==1||te.global||(te.lockOwnerFor=this),this},mn.prototype._unlock=function(){if(C(!te.global),--this._reculock==0)for(te.global||(te.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var a=this._blockedFuncs.shift();try{ft(a[1],a[0])}catch{}}return this},mn.prototype._locked=function(){return this._reculock&&te.lockOwnerFor!==this},mn.prototype.create=function(a){var c=this;if(!this.mode)return this;var f=this.db.idbdb,m=this.db._state.dbOpenError;if(C(!this.idbtrans),!a&&!f)switch(m&&m.name){case"DatabaseClosedError":throw new fe.DatabaseClosed(m);case"MissingAPIError":throw new fe.MissingAPI(m.message,m);default:throw new fe.OpenFailed(m)}if(!this.active)throw new fe.TransactionInactive;return C(this._completion._state===null),(a=this.idbtrans=a||(this.db.core||f).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ge(function(w){Jr(w),c._reject(a.error)}),a.onabort=Ge(function(w){Jr(w),c.active&&c._reject(new fe.Abort(a.error)),c.active=!1,c.on("abort").fire(w)}),a.oncomplete=Ge(function(){c.active=!1,c._resolve(),"mutatedParts"in a&&Wn.storagemutated.fire(a.mutatedParts)}),this},mn.prototype._promise=function(a,c,f){var m=this;if(a==="readwrite"&&this.mode!=="readwrite")return rt(new fe.ReadOnly("Transaction is readonly"));if(!this.active)return rt(new fe.TransactionInactive);if(this._locked())return new he(function(x,_){m._blockedFuncs.push([function(){m._promise(a,c,f).then(x,_)},te])});if(f)return Wt(function(){var x=new he(function(_,O){m._lock();var M=c(_,O,m);M&&M.then&&M.then(_,O)});return x.finally(function(){return m._unlock()}),x._lib=!0,x});var w=new he(function(x,_){var O=c(x,_,m);O&&O.then&&O.then(x,_)});return w._lib=!0,w},mn.prototype._root=function(){return this.parent?this.parent._root():this},mn.prototype.waitFor=function(a){var c,f=this._root(),m=he.resolve(a);f._waitingFor?f._waitingFor=f._waitingFor.then(function(){return m}):(f._waitingFor=m,f._waitingQueue=[],c=f.idbtrans.objectStore(f.storeNames[0]),function x(){for(++f._spinCount;f._waitingQueue.length;)f._waitingQueue.shift()();f._waitingFor&&(c.get(-1/0).onsuccess=x)}());var w=f._waitingFor;return new he(function(x,_){m.then(function(O){return f._waitingQueue.push(Ge(x.bind(null,O)))},function(O){return f._waitingQueue.push(Ge(_.bind(null,O)))}).finally(function(){f._waitingFor===w&&(f._waitingFor=null)})})},mn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new fe.Abort))},mn.prototype.table=function(a){var c=this._memoizedTables||(this._memoizedTables={});if(p(c,a))return c[a];var f=this.schema[a];if(!f)throw new fe.NotFound("Table "+a+" not part of transaction");return f=new this.db.Table(a,f,this),f.core=this.db.core.table(a),c[a]=f},mn);function mn(){}function vi(a,c,f,m,w,x,_){return{name:a,keyPath:c,unique:f,multi:m,auto:w,compound:x,src:(f&&!_?"&":"")+(m?"*":"")+(w?"++":"")+Hc(c)}}function Hc(a){return typeof a=="string"?a:a?"["+[].join.call(a,"+")+"]":""}function wi(a,c,f){return{name:a,primKey:c,indexes:f,mappedClass:null,idxByName:(m=function(w){return[w.name,w]},f.reduce(function(w,x,_){return _=m(x,_),_&&(w[_[0]]=_[1]),w},{}))};var m}var to=function(a){try{return a.only([[]]),to=function(){return[[]]},[[]]}catch{return to=function(){return Ut},Ut}};function bi(a){return a==null?function(){}:typeof a=="string"?(c=a).split(".").length===1?function(f){return f[c]}:function(f){return q(f,c)}:function(f){return q(f,a)};var c}function zc(a){return[].slice.call(a)}var Sh=0;function no(a){return a==null?":id":typeof a=="string"?a:"[".concat(a.join("+"),"]")}function kh(a,c,M){function m(L){if(L.type===3)return null;if(L.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var A=L.lower,F=L.upper,Y=L.lowerOpen,L=L.upperOpen;return A===void 0?F===void 0?null:c.upperBound(F,!!L):F===void 0?c.lowerBound(A,!!Y):c.bound(A,F,!!Y,!!L)}function w(V){var A,F=V.name;return{name:F,schema:V,mutate:function(Y){var L=Y.trans,Z=Y.type,re=Y.keys,oe=Y.values,ue=Y.range;return new Promise(function(ge,Se){ge=Ge(ge);var ye=L.objectStore(F),ve=ye.keyPath==null,Ee=Z==="put"||Z==="add";if(!Ee&&Z!=="delete"&&Z!=="deleteRange")throw new Error("Invalid operation type: "+Z);var xe,_e=(re||oe||{length:1}).length;if(re&&oe&&re.length!==oe.length)throw new Error("Given keys array must have same length as given values array.");if(_e===0)return ge({numFailures:0,failures:{},results:[],lastResult:void 0});function Ae($t){++qt,Jr($t)}var We=[],Be=[],qt=0;if(Z==="deleteRange"){if(ue.type===4)return ge({numFailures:qt,failures:Be,results:[],lastResult:void 0});ue.type===3?We.push(xe=ye.clear()):We.push(xe=ye.delete(m(ue)))}else{var ve=Ee?ve?[oe,re]:[oe,null]:[re,null],Ie=ve[0],It=ve[1];if(Ee)for(var Mt=0;Mt<_e;++Mt)We.push(xe=It&&It[Mt]!==void 0?ye[Z](Ie[Mt],It[Mt]):ye[Z](Ie[Mt])),xe.onerror=Ae;else for(Mt=0;Mt<_e;++Mt)We.push(xe=ye[Z](Ie[Mt])),xe.onerror=Ae}function la($t){$t=$t.target.result,We.forEach(function(ar,Li){return ar.error!=null&&(Be[Li]=ar.error)}),ge({numFailures:qt,failures:Be,results:Z==="delete"?re:We.map(function(ar){return ar.result}),lastResult:$t})}xe.onerror=function($t){Ae($t),la($t)},xe.onsuccess=la})},getMany:function(Y){var L=Y.trans,Z=Y.keys;return new Promise(function(re,oe){re=Ge(re);for(var ue,ge=L.objectStore(F),Se=Z.length,ye=new Array(Se),ve=0,Ee=0,xe=function(We){We=We.target,ye[We._pos]=We.result,++Ee===ve&&re(ye)},_e=hn(oe),Ae=0;Ae<Se;++Ae)Z[Ae]!=null&&((ue=ge.get(Z[Ae]))._pos=Ae,ue.onsuccess=xe,ue.onerror=_e,++ve);ve===0&&re(ye)})},get:function(Y){var L=Y.trans,Z=Y.key;return new Promise(function(re,oe){re=Ge(re);var ue=L.objectStore(F).get(Z);ue.onsuccess=function(ge){return re(ge.target.result)},ue.onerror=hn(oe)})},query:(A=R,function(Y){return new Promise(function(L,Z){L=Ge(L);var re,oe,ue,ve=Y.trans,ge=Y.values,Se=Y.limit,xe=Y.query,ye=Se===1/0?void 0:Se,Ee=xe.index,xe=xe.range,ve=ve.objectStore(F),Ee=Ee.isPrimaryKey?ve:ve.index(Ee.name),xe=m(xe);if(Se===0)return L({result:[]});A?((ye=ge?Ee.getAll(xe,ye):Ee.getAllKeys(xe,ye)).onsuccess=function(_e){return L({result:_e.target.result})},ye.onerror=hn(Z)):(re=0,oe=!ge&&"openKeyCursor"in Ee?Ee.openKeyCursor(xe):Ee.openCursor(xe),ue=[],oe.onsuccess=function(_e){var Ae=oe.result;return Ae?(ue.push(ge?Ae.value:Ae.primaryKey),++re===Se?L({result:ue}):void Ae.continue()):L({result:ue})},oe.onerror=hn(Z))})}),openCursor:function(Y){var L=Y.trans,Z=Y.values,re=Y.query,oe=Y.reverse,ue=Y.unique;return new Promise(function(ge,Se){ge=Ge(ge);var Ee=re.index,ye=re.range,ve=L.objectStore(F),ve=Ee.isPrimaryKey?ve:ve.index(Ee.name),Ee=oe?ue?"prevunique":"prev":ue?"nextunique":"next",xe=!Z&&"openKeyCursor"in ve?ve.openKeyCursor(m(ye),Ee):ve.openCursor(m(ye),Ee);xe.onerror=hn(Se),xe.onsuccess=Ge(function(_e){var Ae,We,Be,qt,Ie=xe.result;Ie?(Ie.___id=++Sh,Ie.done=!1,Ae=Ie.continue.bind(Ie),We=(We=Ie.continuePrimaryKey)&&We.bind(Ie),Be=Ie.advance.bind(Ie),qt=function(){throw new Error("Cursor not stopped")},Ie.trans=L,Ie.stop=Ie.continue=Ie.continuePrimaryKey=Ie.advance=function(){throw new Error("Cursor not started")},Ie.fail=Ge(Se),Ie.next=function(){var It=this,Mt=1;return this.start(function(){return Mt--?It.continue():It.stop()}).then(function(){return It})},Ie.start=function(It){function Mt(){if(xe.result)try{It()}catch($t){Ie.fail($t)}else Ie.done=!0,Ie.start=function(){throw new Error("Cursor behind last entry")},Ie.stop()}var la=new Promise(function($t,ar){$t=Ge($t),xe.onerror=hn(ar),Ie.fail=ar,Ie.stop=function(Li){Ie.stop=Ie.continue=Ie.continuePrimaryKey=Ie.advance=qt,$t(Li)}});return xe.onsuccess=Ge(function($t){xe.onsuccess=Mt,Mt()}),Ie.continue=Ae,Ie.continuePrimaryKey=We,Ie.advance=Be,Mt(),la},ge(Ie)):ge(null)},Se)})},count:function(Y){var L=Y.query,Z=Y.trans,re=L.index,oe=L.range;return new Promise(function(ue,ge){var Se=Z.objectStore(F),ye=re.isPrimaryKey?Se:Se.index(re.name),Se=m(oe),ye=Se?ye.count(Se):ye.count();ye.onsuccess=Ge(function(ve){return ue(ve.target.result)}),ye.onerror=hn(ge)})}}}var x,_,O,B=(_=M,O=zc((x=a).objectStoreNames),{schema:{name:x.name,tables:O.map(function(V){return _.objectStore(V)}).map(function(V){var A=V.keyPath,L=V.autoIncrement,F=l(A),Y={},L={name:V.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:A==null,compound:F,keyPath:A,autoIncrement:L,unique:!0,extractKey:bi(A)},indexes:zc(V.indexNames).map(function(Z){return V.index(Z)}).map(function(ue){var re=ue.name,oe=ue.unique,ge=ue.multiEntry,ue=ue.keyPath,ge={name:re,compound:l(ue),keyPath:ue,unique:oe,multiEntry:ge,extractKey:bi(ue)};return Y[no(ue)]=ge}),getIndexByKeyPath:function(Z){return Y[no(Z)]}};return Y[":id"]=L.primaryKey,A!=null&&(Y[no(A)]=L.primaryKey),L})},hasGetAll:0<O.length&&"getAll"in _.objectStore(O[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),M=B.schema,R=B.hasGetAll,B=M.tables.map(w),P={};return B.forEach(function(V){return P[V.name]=V}),{stack:"dbcore",transaction:a.transaction.bind(a),table:function(V){if(!P[V])throw new Error("Table '".concat(V,"' not found"));return P[V]},MIN_KEY:-1/0,MAX_KEY:to(c),schema:M}}function Eh(a,c,f,m){var w=f.IDBKeyRange;return f.indexedDB,{dbcore:(m=kh(c,w,m),a.dbcore.reduce(function(x,_){return _=_.create,r(r({},x),_(x))},m))}}function Zo(a,m){var f=m.db,m=Eh(a._middlewares,f,a._deps,m);a.core=m.dbcore,a.tables.forEach(function(w){var x=w.name;a.core.schema.tables.some(function(_){return _.name===x})&&(w.core=a.core.table(x),a[x]instanceof a.Table&&(a[x].core=w.core))})}function Qo(a,c,f,m){f.forEach(function(w){var x=m[w];c.forEach(function(_){var O=function M(R,B){return N(R,B)||(R=d(R))&&M(R,B)}(_,w);(!O||"value"in O&&O.value===void 0)&&(_===a.Transaction.prototype||_ instanceof a.Transaction?k(_,w,{get:function(){return this.table(w)},set:function(M){y(this,w,{value:M,writable:!0,configurable:!0,enumerable:!0})}}):_[w]=new a.Table(w,x))})})}function xi(a,c){c.forEach(function(f){for(var m in f)f[m]instanceof a.Table&&delete f[m]})}function _h(a,c){return a._cfg.version-c._cfg.version}function Nh(a,c,f,m){var w=a._dbSchema;f.objectStoreNames.contains("$meta")&&!w.$meta&&(w.$meta=wi("$meta",Vc("")[0],[]),a._storeNames.push("$meta"));var x=a._createTransaction("readwrite",a._storeNames,w);x.create(f),x._completion.catch(m);var _=x._reject.bind(x),O=te.transless||te;Wt(function(){return te.trans=x,te.transless=O,c!==0?(Zo(a,f),R=c,((M=x).storeNames.includes("$meta")?M.table("$meta").get("version").then(function(B){return B??R}):he.resolve(R)).then(function(B){return V=B,A=x,F=f,Y=[],B=(P=a)._versions,L=P._dbSchema=ea(0,P.idbdb,F),(B=B.filter(function(Z){return Z._cfg.version>=V})).length!==0?(B.forEach(function(Z){Y.push(function(){var re=L,oe=Z._cfg.dbschema;ta(P,re,F),ta(P,oe,F),L=P._dbSchema=oe;var ue=Si(re,oe);ue.add.forEach(function(Ee){ki(F,Ee[0],Ee[1].primKey,Ee[1].indexes)}),ue.change.forEach(function(Ee){if(Ee.recreate)throw new fe.Upgrade("Not yet support for changing primary key");var xe=F.objectStore(Ee.name);Ee.add.forEach(function(_e){return Jo(xe,_e)}),Ee.change.forEach(function(_e){xe.deleteIndex(_e.name),Jo(xe,_e)}),Ee.del.forEach(function(_e){return xe.deleteIndex(_e)})});var ge=Z._cfg.contentUpgrade;if(ge&&Z._cfg.version>V){Zo(P,F),A._memoizedTables={};var Se=ee(oe);ue.del.forEach(function(Ee){Se[Ee]=re[Ee]}),xi(P,[P.Transaction.prototype]),Qo(P,[P.Transaction.prototype],s(Se),Se),A.schema=Se;var ye,ve=se(ge);return ve&&Jt(),ue=he.follow(function(){var Ee;(ye=ge(A))&&ve&&(Ee=Yt.bind(null,null),ye.then(Ee,Ee))}),ye&&typeof ye.then=="function"?he.resolve(ye):ue.then(function(){return ye})}}),Y.push(function(re){var oe,ue,ge=Z._cfg.dbschema;oe=ge,ue=re,[].slice.call(ue.db.objectStoreNames).forEach(function(Se){return oe[Se]==null&&ue.db.deleteObjectStore(Se)}),xi(P,[P.Transaction.prototype]),Qo(P,[P.Transaction.prototype],P._storeNames,P._dbSchema),A.schema=P._dbSchema}),Y.push(function(re){P.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(P.idbdb.version/10)===Z._cfg.version?(P.idbdb.deleteObjectStore("$meta"),delete P._dbSchema.$meta,P._storeNames=P._storeNames.filter(function(oe){return oe!=="$meta"})):re.objectStore("$meta").put(Z._cfg.version,"version"))})}),function Z(){return Y.length?he.resolve(Y.shift()(A.idbtrans)).then(Z):he.resolve()}().then(function(){Yc(L,F)})):he.resolve();var P,V,A,F,Y,L}).catch(_)):(s(w).forEach(function(B){ki(f,B,w[B].primKey,w[B].indexes)}),Zo(a,f),void he.follow(function(){return a.on.populate.fire(x)}).catch(_));var M,R})}function Th(a,c){Yc(a._dbSchema,c),c.db.version%10!=0||c.objectStoreNames.contains("$meta")||c.db.createObjectStore("$meta").add(Math.ceil(c.db.version/10-1),"version");var f=ea(0,a.idbdb,c);ta(a,a._dbSchema,c);for(var m=0,w=Si(f,a._dbSchema).change;m<w.length;m++){var x=function(_){if(_.change.length||_.recreate)return console.warn("Unable to patch indexes of table ".concat(_.name," because it has changes on the type of index or primary key.")),{value:void 0};var O=c.objectStore(_.name);_.add.forEach(function(M){dt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(_.name,".").concat(M.src)),Jo(O,M)})}(w[m]);if(typeof x=="object")return x.value}}function Si(a,c){var f,m={del:[],add:[],change:[]};for(f in a)c[f]||m.del.push(f);for(f in c){var w=a[f],x=c[f];if(w){var _={name:f,def:x,recreate:!1,del:[],add:[],change:[]};if(""+(w.primKey.keyPath||"")!=""+(x.primKey.keyPath||"")||w.primKey.auto!==x.primKey.auto)_.recreate=!0,m.change.push(_);else{var O=w.idxByName,M=x.idxByName,R=void 0;for(R in O)M[R]||_.del.push(R);for(R in M){var B=O[R],P=M[R];B?B.src!==P.src&&_.change.push(P):_.add.push(P)}(0<_.del.length||0<_.add.length||0<_.change.length)&&m.change.push(_)}}else m.add.push([f,x])}return m}function ki(a,c,f,m){var w=a.db.createObjectStore(c,f.keyPath?{keyPath:f.keyPath,autoIncrement:f.auto}:{autoIncrement:f.auto});return m.forEach(function(x){return Jo(w,x)}),w}function Yc(a,c){s(a).forEach(function(f){c.db.objectStoreNames.contains(f)||(dt&&console.debug("Dexie: Creating missing table",f),ki(c,f,a[f].primKey,a[f].indexes))})}function Jo(a,c){a.createIndex(c.name,c.keyPath,{unique:c.unique,multiEntry:c.multi})}function ea(a,c,f){var m={};return $(c.objectStoreNames,0).forEach(function(w){for(var x=f.objectStore(w),_=vi(Hc(R=x.keyPath),R||"",!0,!1,!!x.autoIncrement,R&&typeof R!="string",!0),O=[],M=0;M<x.indexNames.length;++M){var B=x.index(x.indexNames[M]),R=B.keyPath,B=vi(B.name,R,!!B.unique,!!B.multiEntry,!1,R&&typeof R!="string",!1);O.push(B)}m[w]=wi(w,_,O)}),m}function ta(a,c,f){for(var m=f.db.objectStoreNames,w=0;w<m.length;++w){var x=m[w],_=f.objectStore(x);a._hasGetAll="getAll"in _;for(var O=0;O<_.indexNames.length;++O){var M=_.indexNames[O],R=_.index(M).keyPath,B=typeof R=="string"?R:"["+$(R).join("+")+"]";!c[x]||(R=c[x].idxByName[B])&&(R.name=M,delete c[x].idxByName[B],c[x].idxByName[M]=R)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function Vc(a){return a.split(",").map(function(c,f){var m=(c=c.trim()).replace(/([&*]|\+\+)/g,""),w=/^\[/.test(m)?m.match(/^\[(.*)\]$/)[1].split("+"):m;return vi(m,w||null,/\&/.test(c),/\*/.test(c),/\+\+/.test(c),l(w),f===0)})}var Ch=(na.prototype._parseStoresSpec=function(a,c){s(a).forEach(function(f){if(a[f]!==null){var m=Vc(a[f]),w=m.shift();if(w.unique=!0,w.multi)throw new fe.Schema("Primary key cannot be multi-valued");m.forEach(function(x){if(x.auto)throw new fe.Schema("Only primary key can be marked as autoIncrement (++)");if(!x.keyPath)throw new fe.Schema("Index must have a name and cannot be an empty string")}),c[f]=wi(f,w,m)}})},na.prototype.stores=function(f){var c=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,f):f;var f=c._versions,m={},w={};return f.forEach(function(x){u(m,x._cfg.storesSource),w=x._cfg.dbschema={},x._parseStoresSpec(m,w)}),c._dbSchema=w,xi(c,[c._allTables,c,c.Transaction.prototype]),Qo(c,[c._allTables,c,c.Transaction.prototype,this._cfg.tables],s(w),w),c._storeNames=s(w),this},na.prototype.upgrade=function(a){return this._cfg.contentUpgrade=wt(this._cfg.contentUpgrade||je,a),this},na);function na(){}function Ei(a,c){var f=a._dbNamesDB;return f||(f=a._dbNamesDB=new En(kr,{addons:[],indexedDB:a,IDBKeyRange:c})).version(1).stores({dbnames:"name"}),f.table("dbnames")}function _i(a){return a&&typeof a.databases=="function"}function Ni(a){return Wt(function(){return te.letThrough=!0,a()})}function Ti(a){return!("from"in a)}var Pt=function(a,c){if(!this){var f=new Pt;return a&&"d"in a&&u(f,a),f}u(this,arguments.length?{d:1,from:a,to:1<arguments.length?c:a}:{d:0})};function ro(a,c,f){var m=Fe(c,f);if(!isNaN(m)){if(0<m)throw RangeError();if(Ti(a))return u(a,{from:c,to:f,d:1});var w=a.l,m=a.r;if(Fe(f,a.from)<0)return w?ro(w,c,f):a.l={from:c,to:f,d:1,l:null,r:null},Kc(a);if(0<Fe(c,a.to))return m?ro(m,c,f):a.r={from:c,to:f,d:1,l:null,r:null},Kc(a);Fe(c,a.from)<0&&(a.from=c,a.l=null,a.d=m?m.d+1:1),0<Fe(f,a.to)&&(a.to=f,a.r=null,a.d=a.l?a.l.d+1:1),f=!a.r,w&&!a.l&&oo(a,w),m&&f&&oo(a,m)}}function oo(a,c){Ti(c)||function f(m,M){var x=M.from,_=M.to,O=M.l,M=M.r;ro(m,x,_),O&&f(m,O),M&&f(m,M)}(a,c)}function qc(a,c){var f=ra(c),m=f.next();if(m.done)return!1;for(var w=m.value,x=ra(a),_=x.next(w.from),O=_.value;!m.done&&!_.done;){if(Fe(O.from,w.to)<=0&&0<=Fe(O.to,w.from))return!0;Fe(w.from,O.from)<0?w=(m=f.next(O.from)).value:O=(_=x.next(w.from)).value}return!1}function ra(a){var c=Ti(a)?null:{s:0,n:a};return{next:function(f){for(var m=0<arguments.length;c;)switch(c.s){case 0:if(c.s=1,m)for(;c.n.l&&Fe(f,c.n.from)<0;)c={up:c,n:c.n.l,s:1};else for(;c.n.l;)c={up:c,n:c.n.l,s:1};case 1:if(c.s=2,!m||Fe(f,c.n.to)<=0)return{value:c.n,done:!1};case 2:if(c.n.r){c.s=3,c={up:c,n:c.n.r,s:0};continue}case 3:c=c.up}return{done:!0}}}}function Kc(a){var c,f,m=(((c=a.r)===null||c===void 0?void 0:c.d)||0)-(((f=a.l)===null||f===void 0?void 0:f.d)||0),w=1<m?"r":m<-1?"l":"";w&&(c=w=="r"?"l":"r",f=r({},a),m=a[w],a.from=m.from,a.to=m.to,a[w]=m[w],f[w]=m[c],(a[c]=f).d=Uc(f)),a.d=Uc(a)}function Uc(f){var c=f.r,f=f.l;return(c?f?Math.max(c.d,f.d):c.d:f?f.d:0)+1}function oa(a,c){return s(c).forEach(function(f){a[f]?oo(a[f],c[f]):a[f]=function m(w){var x,_,O={};for(x in w)p(w,x)&&(_=w[x],O[x]=!_||typeof _!="object"||U.has(_.constructor)?_:m(_));return O}(c[f])}),a}function Ci(a,c){return a.all||c.all||Object.keys(a).some(function(f){return c[f]&&qc(c[f],a[f])})}v(Pt.prototype,((Xt={add:function(a){return oo(this,a),this},addKey:function(a){return ro(this,a,a),this},addKeys:function(a){var c=this;return a.forEach(function(f){return ro(c,f,f)}),this},hasKey:function(a){var c=ra(this).next(a).value;return c&&Fe(c.from,a)<=0&&0<=Fe(c.to,a)}})[D]=function(){return ra(this)},Xt));var rr={},Di={},Oi=!1;function aa(a){oa(Di,a),Oi||(Oi=!0,setTimeout(function(){Oi=!1,ji(Di,!(Di={}))},0))}function ji(a,c){c===void 0&&(c=!1);var f=new Set;if(a.all)for(var m=0,w=Object.values(rr);m<w.length;m++)Xc(_=w[m],a,f,c);else for(var x in a){var _,O=/^idb\:\/\/(.*)\/(.*)\//.exec(x);O&&(x=O[1],O=O[2],(_=rr["idb://".concat(x,"/").concat(O)])&&Xc(_,a,f,c))}f.forEach(function(M){return M()})}function Xc(a,c,f,m){for(var w=[],x=0,_=Object.entries(a.queries.query);x<_.length;x++){for(var O=_[x],M=O[0],R=[],B=0,P=O[1];B<P.length;B++){var V=P[B];Ci(c,V.obsSet)?V.subscribers.forEach(function(L){return f.add(L)}):m&&R.push(V)}m&&w.push([M,R])}if(m)for(var A=0,F=w;A<F.length;A++){var Y=F[A],M=Y[0],R=Y[1];a.queries.query[M]=R}}function Dh(a){var c=a._state,f=a._deps.indexedDB;if(c.isBeingOpened||a.idbdb)return c.dbReadyPromise.then(function(){return c.dbOpenError?rt(c.dbOpenError):a});c.isBeingOpened=!0,c.dbOpenError=null,c.openComplete=!1;var m=c.openCanceller,w=Math.round(10*a.verno),x=!1;function _(){if(c.openCanceller!==m)throw new fe.DatabaseClosed("db.open() was cancelled")}function O(){return new he(function(V,A){if(_(),!f)throw new fe.MissingAPI;var F=a.name,Y=c.autoSchema||!w?f.open(F):f.open(F,w);if(!Y)throw new fe.MissingAPI;Y.onerror=hn(A),Y.onblocked=Ge(a._fireOnBlocked),Y.onupgradeneeded=Ge(function(L){var Z;B=Y.transaction,c.autoSchema&&!a._options.allowEmptyDB?(Y.onerror=Jr,B.abort(),Y.result.close(),(Z=f.deleteDatabase(F)).onsuccess=Z.onerror=Ge(function(){A(new fe.NoSuchDatabase("Database ".concat(F," doesnt exist")))})):(B.onerror=hn(A),L=L.oldVersion>Math.pow(2,62)?0:L.oldVersion,P=L<1,a.idbdb=Y.result,x&&Th(a,B),Nh(a,L/10,B,A))},A),Y.onsuccess=Ge(function(){B=null;var L,Z,re,oe,ue,ge=a.idbdb=Y.result,Se=$(ge.objectStoreNames);if(0<Se.length)try{var ye=ge.transaction((oe=Se).length===1?oe[0]:oe,"readonly");if(c.autoSchema)Z=ge,re=ye,(L=a).verno=Z.version/10,re=L._dbSchema=ea(0,Z,re),L._storeNames=$(Z.objectStoreNames,0),Qo(L,[L._allTables],s(re),re);else if(ta(a,a._dbSchema,ye),((ue=Si(ea(0,(ue=a).idbdb,ye),ue._dbSchema)).add.length||ue.change.some(function(ve){return ve.add.length||ve.change.length}))&&!x)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ge.close(),w=ge.version+1,x=!0,V(O());Zo(a,ye)}catch{}Ln.push(a),ge.onversionchange=Ge(function(ve){c.vcFired=!0,a.on("versionchange").fire(ve)}),ge.onclose=Ge(function(ve){a.on("close").fire(ve)}),P&&(ue=a._deps,ye=F,ge=ue.indexedDB,ue=ue.IDBKeyRange,_i(ge)||ye===kr||Ei(ge,ue).put({name:ye}).catch(je)),V()},A)}).catch(function(V){switch(V==null?void 0:V.name){case"UnknownError":if(0<c.PR1398_maxLoop)return c.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),O();break;case"VersionError":if(0<w)return w=0,O()}return he.reject(V)})}var M,R=c.dbReadyResolve,B=null,P=!1;return he.race([m,(typeof navigator>"u"?he.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(V){function A(){return indexedDB.databases().finally(V)}M=setInterval(A,100),A()}).finally(function(){return clearInterval(M)}):Promise.resolve()).then(O)]).then(function(){return _(),c.onReadyBeingFired=[],he.resolve(Ni(function(){return a.on.ready.fire(a.vip)})).then(function V(){if(0<c.onReadyBeingFired.length){var A=c.onReadyBeingFired.reduce(wt,je);return c.onReadyBeingFired=[],he.resolve(Ni(function(){return A(a.vip)})).then(V)}})}).finally(function(){c.openCanceller===m&&(c.onReadyBeingFired=null,c.isBeingOpened=!1)}).catch(function(V){c.dbOpenError=V;try{B&&B.abort()}catch{}return m===c.openCanceller&&a._close(),rt(V)}).finally(function(){c.openComplete=!0,R()}).then(function(){var V;return P&&(V={},a.tables.forEach(function(A){A.schema.indexes.forEach(function(F){F.name&&(V["idb://".concat(a.name,"/").concat(A.name,"/").concat(F.name)]=new Pt(-1/0,[[[]]]))}),V["idb://".concat(a.name,"/").concat(A.name,"/")]=V["idb://".concat(a.name,"/").concat(A.name,"/:dels")]=new Pt(-1/0,[[[]]])}),Wn(eo).fire(V),ji(V,!0)),a})}function Pi(a){function c(x){return a.next(x)}var f=w(c),m=w(function(x){return a.throw(x)});function w(x){return function(M){var O=x(M),M=O.value;return O.done?M:M&&typeof M.then=="function"?M.then(f,m):l(M)?Promise.all(M).then(f,m):f(M)}}return w(c)()}function ia(a,c,f){for(var m=l(a)?a.slice():[a],w=0;w<f;++w)m.push(c);return m}var Oh={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(a){return r(r({},a),{table:function(c){var f=a.table(c),m=f.schema,w={},x=[];function _(P,V,A){var F=no(P),Y=w[F]=w[F]||[],L=P==null?0:typeof P=="string"?1:P.length,Z=0<V,Z=r(r({},A),{name:Z?"".concat(F,"(virtual-from:").concat(A.name,")"):A.name,lowLevelIndex:A,isVirtual:Z,keyTail:V,keyLength:L,extractKey:bi(P),unique:!Z&&A.unique});return Y.push(Z),Z.isPrimaryKey||x.push(Z),1<L&&_(L===2?P[0]:P.slice(0,L-1),V+1,A),Y.sort(function(re,oe){return re.keyTail-oe.keyTail}),Z}c=_(m.primaryKey.keyPath,0,m.primaryKey),w[":id"]=[c];for(var O=0,M=m.indexes;O<M.length;O++){var R=M[O];_(R.keyPath,0,R)}function B(P){var V,A=P.query.index;return A.isVirtual?r(r({},P),{query:{index:A.lowLevelIndex,range:(V=P.query.range,A=A.keyTail,{type:V.type===1?2:V.type,lower:ia(V.lower,V.lowerOpen?a.MAX_KEY:a.MIN_KEY,A),lowerOpen:!0,upper:ia(V.upper,V.upperOpen?a.MIN_KEY:a.MAX_KEY,A),upperOpen:!0})}}):P}return r(r({},f),{schema:r(r({},m),{primaryKey:c,indexes:x,getIndexByKeyPath:function(P){return(P=w[no(P)])&&P[0]}}),count:function(P){return f.count(B(P))},query:function(P){return f.query(B(P))},openCursor:function(P){var V=P.query.index,A=V.keyTail,F=V.isVirtual,Y=V.keyLength;return F?f.openCursor(B(P)).then(function(Z){return Z&&L(Z)}):f.openCursor(P);function L(Z){return Object.create(Z,{continue:{value:function(re){re!=null?Z.continue(ia(re,P.reverse?a.MAX_KEY:a.MIN_KEY,A)):P.unique?Z.continue(Z.key.slice(0,Y).concat(P.reverse?a.MIN_KEY:a.MAX_KEY,A)):Z.continue()}},continuePrimaryKey:{value:function(re,oe){Z.continuePrimaryKey(ia(re,a.MAX_KEY,A),oe)}},primaryKey:{get:function(){return Z.primaryKey}},key:{get:function(){var re=Z.key;return Y===1?re[0]:re.slice(0,Y)}},value:{get:function(){return Z.value}}})}}})}})}};function Ii(a,c,f,m){return f=f||{},m=m||"",s(a).forEach(function(w){var x,_,O;p(c,w)?(x=a[w],_=c[w],typeof x=="object"&&typeof _=="object"&&x&&_?(O=z(x))!==z(_)?f[m+w]=c[w]:O==="Object"?Ii(x,_,f,m+w+"."):x!==_&&(f[m+w]=c[w]):x!==_&&(f[m+w]=c[w])):f[m+w]=void 0}),s(c).forEach(function(w){p(a,w)||(f[m+w]=c[w])}),f}function Mi(a,c){return c.type==="delete"?c.keys:c.keys||c.values.map(a.extractKey)}var jh={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return r(r({},a),{table:function(c){var f=a.table(c),m=f.schema.primaryKey;return r(r({},f),{mutate:function(w){var x=te.trans,_=x.table(c).hook,O=_.deleting,M=_.creating,R=_.updating;switch(w.type){case"add":if(M.fire===je)break;return x._promise("readwrite",function(){return B(w)},!0);case"put":if(M.fire===je&&R.fire===je)break;return x._promise("readwrite",function(){return B(w)},!0);case"delete":if(O.fire===je)break;return x._promise("readwrite",function(){return B(w)},!0);case"deleteRange":if(O.fire===je)break;return x._promise("readwrite",function(){return function P(V,A,F){return f.query({trans:V,values:!1,query:{index:m,range:A},limit:F}).then(function(Y){var L=Y.result;return B({type:"delete",keys:L,trans:V}).then(function(Z){return 0<Z.numFailures?Promise.reject(Z.failures[0]):L.length<F?{failures:[],numFailures:0,lastResult:void 0}:P(V,r(r({},A),{lower:L[L.length-1],lowerOpen:!0}),F)})})}(w.trans,w.range,1e4)},!0)}return f.mutate(w);function B(P){var V,A,F,Y=te.trans,L=P.keys||Mi(m,P);if(!L)throw new Error("Keys missing");return(P=P.type==="add"||P.type==="put"?r(r({},P),{keys:L}):r({},P)).type!=="delete"&&(P.values=o([],P.values)),P.keys&&(P.keys=o([],P.keys)),V=f,F=L,((A=P).type==="add"?Promise.resolve([]):V.getMany({trans:A.trans,keys:F,cache:"immutable"})).then(function(Z){var re=L.map(function(oe,ue){var ge,Se,ye,ve=Z[ue],Ee={onerror:null,onsuccess:null};return P.type==="delete"?O.fire.call(Ee,oe,ve,Y):P.type==="add"||ve===void 0?(ge=M.fire.call(Ee,oe,P.values[ue],Y),oe==null&&ge!=null&&(P.keys[ue]=oe=ge,m.outbound||H(P.values[ue],m.keyPath,oe))):(ge=Ii(ve,P.values[ue]),(Se=R.fire.call(Ee,ge,oe,ve,Y))&&(ye=P.values[ue],Object.keys(Se).forEach(function(xe){p(ye,xe)?ye[xe]=Se[xe]:H(ye,xe,Se[xe])}))),Ee});return f.mutate(P).then(function(oe){for(var ue=oe.failures,ge=oe.results,Se=oe.numFailures,oe=oe.lastResult,ye=0;ye<L.length;++ye){var ve=(ge||L)[ye],Ee=re[ye];ve==null?Ee.onerror&&Ee.onerror(ue[ye]):Ee.onsuccess&&Ee.onsuccess(P.type==="put"&&Z[ye]?P.values[ye]:ve)}return{failures:ue,results:ge,numFailures:Se,lastResult:oe}}).catch(function(oe){return re.forEach(function(ue){return ue.onerror&&ue.onerror(oe)}),Promise.reject(oe)})})}}})}})}};function Gc(a,c,f){try{if(!c||c.keys.length<a.length)return null;for(var m=[],w=0,x=0;w<c.keys.length&&x<a.length;++w)Fe(c.keys[w],a[x])===0&&(m.push(f?ce(c.values[w]):c.values[w]),++x);return m.length===a.length?m:null}catch{return null}}var Ph={stack:"dbcore",level:-1,create:function(a){return{table:function(c){var f=a.table(c);return r(r({},f),{getMany:function(m){if(!m.cache)return f.getMany(m);var w=Gc(m.keys,m.trans._cache,m.cache==="clone");return w?he.resolve(w):f.getMany(m).then(function(x){return m.trans._cache={keys:m.keys,values:m.cache==="clone"?ce(x):x},x})},mutate:function(m){return m.type!=="add"&&(m.trans._cache=null),f.mutate(m)}})}}}};function Zc(a,c){return a.trans.mode==="readonly"&&!!a.subscr&&!a.trans.explicit&&a.trans.db._options.cache!=="disabled"&&!c.schema.primaryKey.outbound}function Qc(a,c){switch(a){case"query":return c.values&&!c.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ih={stack:"dbcore",level:0,name:"Observability",create:function(a){var c=a.schema.name,f=new Pt(a.MIN_KEY,a.MAX_KEY);return r(r({},a),{transaction:function(m,w,x){if(te.subscr&&w!=="readonly")throw new fe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(te.querier));return a.transaction(m,w,x)},table:function(m){var w=a.table(m),x=w.schema,_=x.primaryKey,P=x.indexes,O=_.extractKey,M=_.outbound,R=_.autoIncrement&&P.filter(function(A){return A.compound&&A.keyPath.includes(_.keyPath)}),B=r(r({},w),{mutate:function(A){function F(xe){return xe="idb://".concat(c,"/").concat(m,"/").concat(xe),oe[xe]||(oe[xe]=new Pt)}var Y,L,Z,re=A.trans,oe=A.mutatedParts||(A.mutatedParts={}),ue=F(""),ge=F(":dels"),Se=A.type,Ee=A.type==="deleteRange"?[A.range]:A.type==="delete"?[A.keys]:A.values.length<50?[Mi(_,A).filter(function(xe){return xe}),A.values]:[],ye=Ee[0],ve=Ee[1],Ee=A.trans._cache;return l(ye)?(ue.addKeys(ye),(Ee=Se==="delete"||ye.length===ve.length?Gc(ye,Ee):null)||ge.addKeys(ye),(Ee||ve)&&(Y=F,L=Ee,Z=ve,x.indexes.forEach(function(xe){var _e=Y(xe.name||"");function Ae(Be){return Be!=null?xe.extractKey(Be):null}function We(Be){return xe.multiEntry&&l(Be)?Be.forEach(function(qt){return _e.addKey(qt)}):_e.addKey(Be)}(L||Z).forEach(function(Be,It){var Ie=L&&Ae(L[It]),It=Z&&Ae(Z[It]);Fe(Ie,It)!==0&&(Ie!=null&&We(Ie),It!=null&&We(It))})}))):ye?(ve={from:(ve=ye.lower)!==null&&ve!==void 0?ve:a.MIN_KEY,to:(ve=ye.upper)!==null&&ve!==void 0?ve:a.MAX_KEY},ge.add(ve),ue.add(ve)):(ue.add(f),ge.add(f),x.indexes.forEach(function(xe){return F(xe.name).add(f)})),w.mutate(A).then(function(xe){return!ye||A.type!=="add"&&A.type!=="put"||(ue.addKeys(xe.results),R&&R.forEach(function(_e){for(var Ae=A.values.map(function(Ie){return _e.extractKey(Ie)}),We=_e.keyPath.findIndex(function(Ie){return Ie===_.keyPath}),Be=0,qt=xe.results.length;Be<qt;++Be)Ae[Be][We]=xe.results[Be];F(_e.name).addKeys(Ae)})),re.mutatedParts=oa(re.mutatedParts||{},oe),xe})}}),P=function(F){var Y=F.query,F=Y.index,Y=Y.range;return[F,new Pt((F=Y.lower)!==null&&F!==void 0?F:a.MIN_KEY,(Y=Y.upper)!==null&&Y!==void 0?Y:a.MAX_KEY)]},V={get:function(A){return[_,new Pt(A.key)]},getMany:function(A){return[_,new Pt().addKeys(A.keys)]},count:P,query:P,openCursor:P};return s(V).forEach(function(A){B[A]=function(F){var Y=te.subscr,L=!!Y,Z=Zc(te,w)&&Qc(A,F)?F.obsSet={}:Y;if(L){var re=function(ve){return ve="idb://".concat(c,"/").concat(m,"/").concat(ve),Z[ve]||(Z[ve]=new Pt)},oe=re(""),ue=re(":dels"),Y=V[A](F),L=Y[0],Y=Y[1];if((A==="query"&&L.isPrimaryKey&&!F.values?ue:re(L.name||"")).add(Y),!L.isPrimaryKey){if(A!=="count"){var ge=A==="query"&&M&&F.values&&w.query(r(r({},F),{values:!1}));return w[A].apply(this,arguments).then(function(ve){if(A==="query"){if(M&&F.values)return ge.then(function(Ae){return Ae=Ae.result,oe.addKeys(Ae),ve});var Ee=F.values?ve.result.map(O):ve.result;(F.values?oe:ue).addKeys(Ee)}else if(A==="openCursor"){var xe=ve,_e=F.values;return xe&&Object.create(xe,{key:{get:function(){return ue.addKey(xe.primaryKey),xe.key}},primaryKey:{get:function(){var Ae=xe.primaryKey;return ue.addKey(Ae),Ae}},value:{get:function(){return _e&&oe.addKey(xe.primaryKey),xe.value}}})}return ve})}ue.add(f)}}return w[A].apply(this,arguments)}}),B}})}};function Jc(a,c,f){if(f.numFailures===0)return c;if(c.type==="deleteRange")return null;var m=c.keys?c.keys.length:"values"in c&&c.values?c.values.length:1;return f.numFailures===m?null:(c=r({},c),l(c.keys)&&(c.keys=c.keys.filter(function(w,x){return!(x in f.failures)})),"values"in c&&l(c.values)&&(c.values=c.values.filter(function(w,x){return!(x in f.failures)})),c)}function Ai(a,c){return f=a,((m=c).lower===void 0||(m.lowerOpen?0<Fe(f,m.lower):0<=Fe(f,m.lower)))&&(a=a,(c=c).upper===void 0||(c.upperOpen?Fe(a,c.upper)<0:Fe(a,c.upper)<=0));var f,m}function el(a,c,V,m,w,x){if(!V||V.length===0)return a;var _=c.query.index,O=_.multiEntry,M=c.query.range,R=m.schema.primaryKey.extractKey,B=_.extractKey,P=(_.lowLevelIndex||_).extractKey,V=V.reduce(function(A,F){var Y=A,L=[];if(F.type==="add"||F.type==="put")for(var Z=new Pt,re=F.values.length-1;0<=re;--re){var oe,ue=F.values[re],ge=R(ue);Z.hasKey(ge)||(oe=B(ue),(O&&l(oe)?oe.some(function(xe){return Ai(xe,M)}):Ai(oe,M))&&(Z.addKey(ge),L.push(ue)))}switch(F.type){case"add":var Se=new Pt().addKeys(c.values?A.map(function(_e){return R(_e)}):A),Y=A.concat(c.values?L.filter(function(_e){return _e=R(_e),!Se.hasKey(_e)&&(Se.addKey(_e),!0)}):L.map(function(_e){return R(_e)}).filter(function(_e){return!Se.hasKey(_e)&&(Se.addKey(_e),!0)}));break;case"put":var ye=new Pt().addKeys(F.values.map(function(_e){return R(_e)}));Y=A.filter(function(_e){return!ye.hasKey(c.values?R(_e):_e)}).concat(c.values?L:L.map(function(_e){return R(_e)}));break;case"delete":var ve=new Pt().addKeys(F.keys);Y=A.filter(function(_e){return!ve.hasKey(c.values?R(_e):_e)});break;case"deleteRange":var Ee=F.range;Y=A.filter(function(_e){return!Ai(R(_e),Ee)})}return Y},a);return V===a?a:(V.sort(function(A,F){return Fe(P(A),P(F))||Fe(R(A),R(F))}),c.limit&&c.limit<1/0&&(V.length>c.limit?V.length=c.limit:a.length===c.limit&&V.length<c.limit&&(w.dirty=!0)),x?Object.freeze(V):V)}function tl(a,c){return Fe(a.lower,c.lower)===0&&Fe(a.upper,c.upper)===0&&!!a.lowerOpen==!!c.lowerOpen&&!!a.upperOpen==!!c.upperOpen}function Mh(a,c){return function(f,m,w,x){if(f===void 0)return m!==void 0?-1:0;if(m===void 0)return 1;if((m=Fe(f,m))===0){if(w&&x)return 0;if(w)return 1;if(x)return-1}return m}(a.lower,c.lower,a.lowerOpen,c.lowerOpen)<=0&&0<=function(f,m,w,x){if(f===void 0)return m!==void 0?1:0;if(m===void 0)return-1;if((m=Fe(f,m))===0){if(w&&x)return 0;if(w)return-1;if(x)return 1}return m}(a.upper,c.upper,a.upperOpen,c.upperOpen)}function Ah(a,c,f,m){a.subscribers.add(f),m.addEventListener("abort",function(){var w,x;a.subscribers.delete(f),a.subscribers.size===0&&(w=a,x=c,setTimeout(function(){w.subscribers.size===0&&J(x,w)},3e3))})}var $h={stack:"dbcore",level:0,name:"Cache",create:function(a){var c=a.schema.name;return r(r({},a),{transaction:function(f,m,w){var x,_,O=a.transaction(f,m,w);return m==="readwrite"&&(_=(x=new AbortController).signal,w=function(M){return function(){if(x.abort(),m==="readwrite"){for(var R=new Set,B=0,P=f;B<P.length;B++){var V=P[B],A=rr["idb://".concat(c,"/").concat(V)];if(A){var F=a.table(V),Y=A.optimisticOps.filter(function(_e){return _e.trans===O});if(O._explicit&&M&&O.mutatedParts)for(var L=0,Z=Object.values(A.queries.query);L<Z.length;L++)for(var re=0,oe=(Se=Z[L]).slice();re<oe.length;re++)Ci((ye=oe[re]).obsSet,O.mutatedParts)&&(J(Se,ye),ye.subscribers.forEach(function(_e){return R.add(_e)}));else if(0<Y.length){A.optimisticOps=A.optimisticOps.filter(function(_e){return _e.trans!==O});for(var ue=0,ge=Object.values(A.queries.query);ue<ge.length;ue++)for(var Se,ye,ve,Ee=0,xe=(Se=ge[ue]).slice();Ee<xe.length;Ee++)(ye=xe[Ee]).res!=null&&O.mutatedParts&&(M&&!ye.dirty?(ve=Object.isFrozen(ye.res),ve=el(ye.res,ye.req,Y,F,ye,ve),ye.dirty?(J(Se,ye),ye.subscribers.forEach(function(_e){return R.add(_e)})):ve!==ye.res&&(ye.res=ve,ye.promise=he.resolve({result:ve}))):(ye.dirty&&J(Se,ye),ye.subscribers.forEach(function(_e){return R.add(_e)})))}}}R.forEach(function(_e){return _e()})}}},O.addEventListener("abort",w(!1),{signal:_}),O.addEventListener("error",w(!1),{signal:_}),O.addEventListener("complete",w(!0),{signal:_})),O},table:function(f){var m=a.table(f),w=m.schema.primaryKey;return r(r({},m),{mutate:function(x){var _=te.trans;if(w.outbound||_.db._options.cache==="disabled"||_.explicit||_.idbtrans.mode!=="readwrite")return m.mutate(x);var O=rr["idb://".concat(c,"/").concat(f)];return O?(_=m.mutate(x),x.type!=="add"&&x.type!=="put"||!(50<=x.values.length||Mi(w,x).some(function(M){return M==null}))?(O.optimisticOps.push(x),x.mutatedParts&&aa(x.mutatedParts),_.then(function(M){0<M.numFailures&&(J(O.optimisticOps,x),(M=Jc(0,x,M))&&O.optimisticOps.push(M),x.mutatedParts&&aa(x.mutatedParts))}),_.catch(function(){J(O.optimisticOps,x),x.mutatedParts&&aa(x.mutatedParts)})):_.then(function(M){var R=Jc(0,r(r({},x),{values:x.values.map(function(B,P){var V;return M.failures[P]?B:(B=(V=w.keyPath)!==null&&V!==void 0&&V.includes(".")?ce(B):r({},B),H(B,w.keyPath,M.results[P]),B)})}),M);O.optimisticOps.push(R),queueMicrotask(function(){return x.mutatedParts&&aa(x.mutatedParts)})}),_):m.mutate(x)},query:function(x){if(!Zc(te,m)||!Qc("query",x))return m.query(x);var _=((R=te.trans)===null||R===void 0?void 0:R.db._options.cache)==="immutable",P=te,O=P.requery,M=P.signal,R=function(F,Y,L,Z){var re=rr["idb://".concat(F,"/").concat(Y)];if(!re)return[];if(!(Y=re.queries[L]))return[null,!1,re,null];var oe=Y[(Z.query?Z.query.index.name:null)||""];if(!oe)return[null,!1,re,null];switch(L){case"query":var ue=oe.find(function(ge){return ge.req.limit===Z.limit&&ge.req.values===Z.values&&tl(ge.req.query.range,Z.query.range)});return ue?[ue,!0,re,oe]:[oe.find(function(ge){return("limit"in ge.req?ge.req.limit:1/0)>=Z.limit&&(!Z.values||ge.req.values)&&Mh(ge.req.query.range,Z.query.range)}),!1,re,oe];case"count":return ue=oe.find(function(ge){return tl(ge.req.query.range,Z.query.range)}),[ue,!!ue,re,oe]}}(c,f,"query",x),B=R[0],P=R[1],V=R[2],A=R[3];return B&&P?B.obsSet=x.obsSet:(P=m.query(x).then(function(F){var Y=F.result;if(B&&(B.res=Y),_){for(var L=0,Z=Y.length;L<Z;++L)Object.freeze(Y[L]);Object.freeze(Y)}else F.result=ce(Y);return F}).catch(function(F){return A&&B&&J(A,B),Promise.reject(F)}),B={obsSet:x.obsSet,promise:P,subscribers:new Set,type:"query",req:x,dirty:!1},A?A.push(B):(A=[B],(V=V||(rr["idb://".concat(c,"/").concat(f)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[x.query.index.name||""]=A)),Ah(B,A,O,M),B.promise.then(function(F){return{result:el(F.result,x,V==null?void 0:V.optimisticOps,m,B,_)}})}})}})}};function sa(a,c){return new Proxy(a,{get:function(f,m,w){return m==="db"?c:Reflect.get(f,m,w)}})}var En=(ht.prototype.version=function(a){if(isNaN(a)||a<.1)throw new fe.Type("Given version is not a positive number");if(a=Math.round(10*a)/10,this.idbdb||this._state.isBeingOpened)throw new fe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var c=this._versions,f=c.filter(function(m){return m._cfg.version===a})[0];return f||(f=new this.Version(a),c.push(f),c.sort(_h),f.stores({}),this._state.autoSchema=!1,f)},ht.prototype._whenReady=function(a){var c=this;return this.idbdb&&(this._state.openComplete||te.letThrough||this._vip)?a():new he(function(f,m){if(c._state.openComplete)return m(new fe.DatabaseClosed(c._state.dbOpenError));if(!c._state.isBeingOpened){if(!c._state.autoOpen)return void m(new fe.DatabaseClosed);c.open().catch(je)}c._state.dbReadyPromise.then(f,m)}).then(a)},ht.prototype.use=function(a){var c=a.stack,f=a.create,m=a.level,w=a.name;return w&&this.unuse({stack:c,name:w}),a=this._middlewares[c]||(this._middlewares[c]=[]),a.push({stack:c,create:f,level:m??10,name:w}),a.sort(function(x,_){return x.level-_.level}),this},ht.prototype.unuse=function(a){var c=a.stack,f=a.name,m=a.create;return c&&this._middlewares[c]&&(this._middlewares[c]=this._middlewares[c].filter(function(w){return m?w.create!==m:!!f&&w.name!==f})),this},ht.prototype.open=function(){var a=this;return ft(me,function(){return Dh(a)})},ht.prototype._close=function(){var a=this._state,c=Ln.indexOf(this);if(0<=c&&Ln.splice(c,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}a.isBeingOpened||(a.dbReadyPromise=new he(function(f){a.dbReadyResolve=f}),a.openCanceller=new he(function(f,m){a.cancelOpen=m}))},ht.prototype.close=function(f){var c=(f===void 0?{disableAutoOpen:!0}:f).disableAutoOpen,f=this._state;c?(f.isBeingOpened&&f.cancelOpen(new fe.DatabaseClosed),this._close(),f.autoOpen=!1,f.dbOpenError=new fe.DatabaseClosed):(this._close(),f.autoOpen=this._options.autoOpen||f.isBeingOpened,f.openComplete=!1,f.dbOpenError=null)},ht.prototype.delete=function(a){var c=this;a===void 0&&(a={disableAutoOpen:!0});var f=0<arguments.length&&typeof arguments[0]!="object",m=this._state;return new he(function(w,x){function _(){c.close(a);var O=c._deps.indexedDB.deleteDatabase(c.name);O.onsuccess=Ge(function(){var M,R,B;M=c._deps,R=c.name,B=M.indexedDB,M=M.IDBKeyRange,_i(B)||R===kr||Ei(B,M).delete(R).catch(je),w()}),O.onerror=hn(x),O.onblocked=c._fireOnBlocked}if(f)throw new fe.InvalidArgument("Invalid closeOptions argument to db.delete()");m.isBeingOpened?m.dbReadyPromise.then(_):_()})},ht.prototype.backendDB=function(){return this.idbdb},ht.prototype.isOpen=function(){return this.idbdb!==null},ht.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"},ht.prototype.hasFailed=function(){return this._state.dbOpenError!==null},ht.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(ht.prototype,"tables",{get:function(){var a=this;return s(this._allTables).map(function(c){return a._allTables[c]})},enumerable:!1,configurable:!0}),ht.prototype.transaction=function(){var a=(function(c,f,m){var w=arguments.length;if(w<2)throw new fe.InvalidArgument("Too few arguments");for(var x=new Array(w-1);--w;)x[w-1]=arguments[w];return m=x.pop(),[c,ne(x),m]}).apply(this,arguments);return this._transaction.apply(this,a)},ht.prototype._transaction=function(a,c,f){var m=this,w=te.trans;w&&w.db===this&&a.indexOf("!")===-1||(w=null);var x,_,O=a.indexOf("?")!==-1;a=a.replace("!","").replace("?","");try{if(_=c.map(function(R){if(R=R instanceof m.Table?R.name:R,typeof R!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return R}),a=="r"||a===Ur)x=Ur;else{if(a!="rw"&&a!=Xr)throw new fe.InvalidArgument("Invalid transaction mode: "+a);x=Xr}if(w){if(w.mode===Ur&&x===Xr){if(!O)throw new fe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");w=null}w&&_.forEach(function(R){if(w&&w.storeNames.indexOf(R)===-1){if(!O)throw new fe.SubTransaction("Table "+R+" not included in parent transaction.");w=null}}),O&&w&&!w.active&&(w=null)}}catch(R){return w?w._promise(null,function(B,P){P(R)}):rt(R)}var M=(function R(B,P,V,A,F){return he.resolve().then(function(){var Y=te.transless||te,L=B._createTransaction(P,V,B._dbSchema,A);if(L.explicit=!0,Y={trans:L,transless:Y},A)L.idbtrans=A.idbtrans;else try{L.create(),L.idbtrans._explicit=!0,B._state.PR1398_maxLoop=3}catch(oe){return oe.name===De.InvalidState&&B.isOpen()&&0<--B._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),B.close({disableAutoOpen:!1}),B.open().then(function(){return R(B,P,V,null,F)})):rt(oe)}var Z,re=se(F);return re&&Jt(),Y=he.follow(function(){var oe;(Z=F.call(L,L))&&(re?(oe=Yt.bind(null,null),Z.then(oe,oe)):typeof Z.next=="function"&&typeof Z.throw=="function"&&(Z=Pi(Z)))},Y),(Z&&typeof Z.then=="function"?he.resolve(Z).then(function(oe){return L.active?oe:rt(new fe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Y.then(function(){return Z})).then(function(oe){return A&&L._resolve(),L._completion.then(function(){return oe})}).catch(function(oe){return L._reject(oe),rt(oe)})})}).bind(null,this,x,_,w,f);return w?w._promise(x,M,"lock"):te.trans?ft(te.transless,function(){return m._whenReady(M)}):this._whenReady(M)},ht.prototype.table=function(a){if(!p(this._allTables,a))throw new fe.InvalidTable("Table ".concat(a," does not exist"));return this._allTables[a]},ht);function ht(a,c){var f=this;this._middlewares={},this.verno=0;var m=ht.dependencies;this._options=c=r({addons:ht.addons,autoOpen:!0,indexedDB:m.indexedDB,IDBKeyRange:m.IDBKeyRange,cache:"cloned"},c),this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange},m=c.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var w,x,_,O,M,R={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:je,dbReadyPromise:null,cancelOpen:je,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:c.autoOpen};R.dbReadyPromise=new he(function(P){R.dbReadyResolve=P}),R.openCanceller=new he(function(P,V){R.cancelOpen=V}),this._state=R,this.name=a,this.on=Gr(this,"populate","blocked","versionchange","close",{ready:[wt,je]}),this.on.ready.subscribe=I(this.on.ready.subscribe,function(P){return function(V,A){ht.vip(function(){var F,Y=f._state;Y.openComplete?(Y.dbOpenError||he.resolve().then(V),A&&P(V)):Y.onReadyBeingFired?(Y.onReadyBeingFired.push(V),A&&P(V)):(P(V),F=f,A||P(function L(){F.on.ready.unsubscribe(V),F.on.ready.unsubscribe(L)}))})}}),this.Collection=(w=this,Zr(vh.prototype,function(Z,L){this.db=w;var A=qo,F=null;if(L)try{A=L()}catch(re){F=re}var Y=Z._ctx,L=Y.table,Z=L.hook.reading.fire;this._ctx={table:L,index:Y.index,isPrimKey:!Y.index||L.schema.primKey.keyPath&&Y.index===L.schema.primKey.name,range:A,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:F,or:Y.or,valueMapper:Z!==Je?Z:null}})),this.Table=(x=this,Zr($c.prototype,function(P,V,A){this.db=x,this._tx=A,this.name=P,this.schema=V,this.hook=x._allTables[P]?x._allTables[P].hook:Gr(null,{creating:[qe,je],reading:[$e,Je],updating:[Ce,je],deleting:[Ye,je]})})),this.Transaction=(_=this,Zr(xh.prototype,function(P,V,A,F,Y){var L=this;this.db=_,this.mode=P,this.storeNames=V,this.schema=A,this.chromeTransactionDurability=F,this.idbtrans=null,this.on=Gr(this,"complete","error","abort"),this.parent=Y||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new he(function(Z,re){L._resolve=Z,L._reject=re}),this._completion.then(function(){L.active=!1,L.on.complete.fire()},function(Z){var re=L.active;return L.active=!1,L.on.error.fire(Z),L.parent?L.parent._reject(Z):re&&L.idbtrans&&L.idbtrans.abort(),rt(Z)})})),this.Version=(O=this,Zr(Ch.prototype,function(P){this.db=O,this._cfg={version:P,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(M=this,Zr(Bc.prototype,function(P,V,A){if(this.db=M,this._ctx={table:P,index:V===":id"?null:V,or:A},this._cmp=this._ascending=Fe,this._descending=function(F,Y){return Fe(Y,F)},this._max=function(F,Y){return 0<Fe(F,Y)?F:Y},this._min=function(F,Y){return Fe(F,Y)<0?F:Y},this._IDBKeyRange=M._deps.IDBKeyRange,!this._IDBKeyRange)throw new fe.MissingAPI})),this.on("versionchange",function(P){0<P.newVersion?console.warn("Another connection wants to upgrade database '".concat(f.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(f.name,"'. Closing db now to resume the delete request.")),f.close({disableAutoOpen:!1})}),this.on("blocked",function(P){!P.newVersion||P.newVersion<P.oldVersion?console.warn("Dexie.delete('".concat(f.name,"') was blocked")):console.warn("Upgrade '".concat(f.name,"' blocked by other connection holding version ").concat(P.oldVersion/10))}),this._maxKey=to(c.IDBKeyRange),this._createTransaction=function(P,V,A,F){return new f.Transaction(P,V,A,f._options.chromeTransactionDurability,F)},this._fireOnBlocked=function(P){f.on("blocked").fire(P),Ln.filter(function(V){return V.name===f.name&&V!==f&&!V._state.vcFired}).map(function(V){return V.on("versionchange").fire(P)})},this.use(Ph),this.use($h),this.use(Ih),this.use(Oh),this.use(jh);var B=new Proxy(this,{get:function(P,V,A){if(V==="_vip")return!0;if(V==="table")return function(Y){return sa(f.table(Y),B)};var F=Reflect.get(P,V,A);return F instanceof $c?sa(F,B):V==="tables"?F.map(function(Y){return sa(Y,B)}):V==="_createTransaction"?function(){return sa(F.apply(this,arguments),B)}:F}});this.vip=B,m.forEach(function(P){return P(f)})}var ca,Xt=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Rh=($i.prototype.subscribe=function(a,c,f){return this._subscribe(a&&typeof a!="function"?a:{next:a,error:c,complete:f})},$i.prototype[Xt]=function(){return this},$i);function $i(a){this._subscribe=a}try{ca={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{ca={indexedDB:null,IDBKeyRange:null}}function nl(a){var c,f=!1,m=new Rh(function(w){var x=se(a),_,O=!1,M={},R={},B={get closed(){return O},unsubscribe:function(){O||(O=!0,_&&_.abort(),P&&Wn.storagemutated.unsubscribe(A))}};w.start&&w.start(B);var P=!1,V=function(){return Sn(F)},A=function(Y){oa(M,Y),Ci(R,M)&&V()},F=function(){var Y,L,Z;!O&&ca.indexedDB&&(M={},Y={},_&&_.abort(),_=new AbortController,Z=function(re){var oe=yt();try{x&&Jt();var ue=Wt(a,re);return ue=x?ue.finally(Yt):ue}finally{oe&&cn()}}(L={subscr:Y,signal:_.signal,requery:V,querier:a,trans:null}),Promise.resolve(Z).then(function(re){f=!0,c=re,O||L.signal.aborted||(M={},function(oe){for(var ue in oe)if(p(oe,ue))return;return 1}(R=Y)||P||(Wn(eo,A),P=!0),Sn(function(){return!O&&w.next&&w.next(re)}))},function(re){f=!1,["DatabaseClosedError","AbortError"].includes(re==null?void 0:re.name)||O||Sn(function(){O||w.error&&w.error(re)})}))};return setTimeout(V,0),B});return m.hasValue=function(){return f},m.getValue=function(){return c},m}var or=En;function Ri(a){var c=Bn;try{Bn=!0,Wn.storagemutated.fire(a),ji(a,!0)}finally{Bn=c}}v(or,r(r({},Ue),{delete:function(a){return new or(a,{addons:[]}).delete()},exists:function(a){return new or(a,{addons:[]}).open().then(function(c){return c.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return c=or.dependencies,f=c.indexedDB,c=c.IDBKeyRange,(_i(f)?Promise.resolve(f.databases()).then(function(m){return m.map(function(w){return w.name}).filter(function(w){return w!==kr})}):Ei(f,c).toCollection().primaryKeys()).then(a)}catch{return rt(new fe.MissingAPI)}var c,f},defineClass:function(){return function(a){u(this,a)}},ignoreTransaction:function(a){return te.trans?ft(te.transless,a):a()},vip:Ni,async:function(a){return function(){try{var c=Pi(a.apply(this,arguments));return c&&typeof c.then=="function"?c:he.resolve(c)}catch(f){return rt(f)}}},spawn:function(a,c,f){try{var m=Pi(a.apply(f,c||[]));return m&&typeof m.then=="function"?m:he.resolve(m)}catch(w){return rt(w)}},currentTransaction:{get:function(){return te.trans||null}},waitFor:function(a,c){return c=he.resolve(typeof a=="function"?or.ignoreTransaction(a):a).timeout(c||6e4),te.trans?te.trans.waitFor(c):c},Promise:he,debug:{get:function(){return dt},set:function(a){At(a)}},derive:S,extend:u,props:v,override:I,Events:Gr,on:Wn,liveQuery:nl,extendObservabilitySet:oa,getByKeyPath:q,setByKeyPath:H,delByKeyPath:function(a,c){typeof c=="string"?H(a,c,void 0):"length"in c&&[].map.call(c,function(f){H(a,f,void 0)})},shallowClone:ee,deepClone:ce,getObjectDiff:Ii,cmp:Fe,asap:X,minKey:-1/0,addons:[],connections:Ln,errnames:De,dependencies:ca,cache:rr,semVer:"4.0.10",version:"4.0.10".split(".").map(function(a){return parseInt(a)}).reduce(function(a,c,f){return a+c/Math.pow(10,2*f)})})),or.maxKey=to(or.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Wn(eo,function(a){Bn||(a=new CustomEvent(yi,{detail:a}),Bn=!0,dispatchEvent(a),Bn=!1)}),addEventListener(yi,function(a){a=a.detail,Bn||Ri(a)}));var Tr,Bn=!1,rl=function(){};return typeof BroadcastChannel<"u"&&((rl=function(){(Tr=new BroadcastChannel(yi)).onmessage=function(a){return a.data&&Ri(a.data)}})(),typeof Tr.unref=="function"&&Tr.unref(),Wn(eo,function(a){Bn||Tr.postMessage(a)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(a){if(!En.disableBfCache&&a.persisted){dt&&console.debug("Dexie: handling persisted pagehide"),Tr!=null&&Tr.close();for(var c=0,f=Ln;c<f.length;c++)f[c].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(a){!En.disableBfCache&&a.persisted&&(dt&&console.debug("Dexie: handling persisted pageshow"),rl(),Ri({all:new Pt(-1/0,[[]])}))})),he.rejectionMapper=function(a,c){return!a||a instanceof de||a instanceof TypeError||a instanceof SyntaxError||!a.name||!Me[a.name]?a:(c=new Me[a.name](c||a.message,a),"stack"in a&&k(c,"stack",{get:function(){return this.inner.stack}}),c)},At(dt),r(En,Object.freeze({__proto__:null,Dexie:En,liveQuery:nl,Entity:Ko,cmp:Fe,PropModSymbol:kn,PropModification:Qr,replacePrefix:function(a,c){return new Qr({replacePrefix:[a,c]})},add:function(a){return new Qr({add:a})},remove:function(a){return new Qr({remove:a})},default:En,RangeSet:Pt,mergeRanges:oo,rangesOverlap:qc}),{default:En}),En})})(df);var gw=df.exports;const ks=Qs(gw),Gl=Symbol.for("Dexie"),Es=globalThis[Gl]||(globalThis[Gl]=ks);if(ks.semVer!==Es.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ks.semVer} and ${Es.semVer}`);class yw extends Es{constructor(){super("TemporalDB"),this.version(3).stores({workflows:"[workflowId+runId],[parentWorkflowId+parentWorkflowRunId], parentWorkflowId, parentWorkflowRunId",activities:"[activityId+workflowId+workflowRunId],[workflowId+workflowRunId], workflowId, workflowRunId",settings:"id"})}}const vn=new yw;async function _s(e){try{await vn.workflows.put(e),console.debug("Workflow added successfully:",e)}catch(t){console.error("Failed to add workflow:",t,e)}}async function Ro(e,t){if(t)try{const n=await vn.workflows.get({workflowId:e,runId:t});return console.debug("Retrieved Workflow:",n),n}catch(n){console.error("Failed to retrieve workflow:",n);return}}async function vw(e,t){try{await vn.workflows.where({workflowId:e,runId:t}).delete(),console.debug(`Deleted Workflow with ID: ${e}`)}catch(n){console.error("Failed to delete workflow:",n)}}async function ff(e){try{await vn.activities.put(e),console.debug("Activity added successfully:",e)}catch(t){console.error("Failed to add activity:",t,e)}}async function ww(e,t,n){try{const r=await vn.activities.get({activityId:t,workflowId:e,workflowRunId:n});return console.debug("Retrieved Activity:",r),r}catch(r){console.error("Failed to retrieve activity:",r);return}}async function bw(e,t,n){try{await vn.activities.where({activityId:t,workflowId:e,workflowRunId:n}).delete(),console.debug(`Deleted Activity with ID: ${t}`)}catch(r){console.error("Failed to delete activity:",r)}}async function hf(e,t){try{return await vn.activities.where(["workflowId","workflowRunId"]).equals([e,t]).toArray()}catch(n){return console.error("Failed to retrieve activities by workflowId:",n),[]}}async function gc(e,t){try{return await vn.workflows.where(["parentWorkflowId","parentWorkflowRunId"]).equals([e,t]).toArray()}catch(n){return console.error("Failed to retrieve child workflows:",n),[]}}async function xw(e,t,n){if(!e)return[];const r=[];for(const o of e)if(o.type==="workflow"||o.type==="childWorkflow"){const i=await Ro(o.id,o.workflowRunId);i&&r.push(i)}else if(o.type==="activity"){const i=await ww(t,o.id,n);i&&r.push(i)}return r}async function Oo(e){try{const t=await vn.settings.get(e);return t==null?void 0:t.value}catch(t){console.error("Failed to retrieve setting:",t);return}}async function Ns(e,t){try{await vn.settings.put({id:e,value:t}),console.debug(`Setting ${e} updated successfully:`,t)}catch(n){console.error("Failed to update setting:",n)}}const zn={name:"default-queue",kind:pw.NORMAL},Sw=()=>{const e="demo-order-processing-wf-001",t="1",n=new Date().toISOString(),r=new Date(Date.parse(n)+6e4).toISOString(),o=new Date(Date.parse(n)+12e4).toISOString(),i=new Date(Date.parse(n)+18e4).toISOString(),s="1",l="2",u="3",d={orderId:"ORD-001",customer:{id:"CUST-123",name:"John Doe",email:"john.doe@example.com"},items:[{id:"ITEM-1",name:"Gaming Laptop",price:1299.99,quantity:1},{id:"ITEM-2",name:"Wireless Mouse",price:49.99,quantity:2}],totalAmount:1399.97,shippingAddress:{street:"123 Tech Lane",city:"San Francisco",state:"CA",zipCode:"94105"}},h=[{type:"workflow",namespace:"default",workflowId:e,runId:t,workflowType:"OrderProcessingWorkflow",status:"RUNNING",startTime:n,endTime:void 0,sortEventTime:n,taskQueue:zn,input:JSON.stringify(d),workflowTaskCompletedEventId:s,memo:{description:"Process customer order with validation and fulfillment",priority:"HIGH"}},{type:"childWorkflow",namespace:"default",workflowId:"demo-fulfillment-wf-001",runId:"2",workflowType:"OrderFulfillmentWorkflow",parentWorkflowId:e,parentWorkflowRunId:t,status:"RUNNING",startTime:n,endTime:void 0,sortEventTime:n,taskQueue:zn,workflowTaskCompletedEventId:l,input:JSON.stringify({orderId:d.orderId,items:d.items,shippingAddress:d.shippingAddress,warehouseId:"WH-SF-001"})},...Array(5).fill(null).map((v,y)=>({type:"childWorkflow",runId:`child_${y+1}`,namespace:"default",workflowId:`demo-shipping-wf-00${y+1}`,workflowType:"ShippingWorkflow",parentWorkflowId:"demo-fulfillment-wf-001",parentWorkflowRunId:"2",status:"RUNNING",startTime:n,endTime:void 0,sortEventTime:n,taskQueue:zn,workflowTaskCompletedEventId:u,input:JSON.stringify({packageId:`PKG-00${y+1}`,orderId:d.orderId,item:d.items[y%2],shippingAddress:d.shippingAddress,carrier:"FastShip",trackingPrefix:"FS"})}))],p=[{type:"activity",activityId:"validate-order-001",activityType:"ValidateOrderActivity",workflowId:e,workflowRunId:t,status:"COMPLETED",startTime:n,endTime:r,sortEventTime:r,taskQueue:zn,input:JSON.stringify({orderId:d.orderId,customerId:d.customer.id,items:d.items,totalAmount:d.totalAmount}),result:JSON.stringify({isValid:!0,validatedAt:n,checks:{inventory:!0,pricing:!0,customerStatus:"ACTIVE",fraudCheck:{passed:!0,score:.95,reasons:["Valid customer history","Normal order pattern"]}}}),workflowTaskCompletedEventId:s},{type:"activity",activityId:"process-payment-001",activityType:"ProcessPaymentActivity",workflowId:e,workflowRunId:t,status:"COMPLETED",startTime:r,endTime:o,sortEventTime:o,taskQueue:zn,input:JSON.stringify({orderId:d.orderId,amount:d.totalAmount,customerId:d.customer.id,paymentMethod:{type:"CREDIT_CARD",last4:"4242",brand:"Visa",expiryMonth:12,expiryYear:2025}}),result:JSON.stringify({transactionId:"TX-789012",status:"APPROVED",processedAt:r,paymentDetails:{authorizationCode:"AUTH123",avsResult:"Y",cvvResult:"M",processorResponse:"Approved"}}),workflowTaskCompletedEventId:s},{type:"activity",activityId:"inventory-check-001",activityType:"CheckInventoryActivity",workflowId:"demo-fulfillment-wf-001",workflowRunId:"2",status:"COMPLETED",startTime:o,endTime:i,sortEventTime:i,taskQueue:zn,input:JSON.stringify({warehouseId:"WH-SF-001",items:d.items,reservationDuration:"30m"}),result:JSON.stringify({available:!0,itemsAvailability:d.items.map(v=>({itemId:v.id,available:!0,quantity:v.quantity,location:"Zone-A12",binNumber:"BIN-456",reservationId:`RES-${v.id}`,expiresAt:new Date(Date.parse(i)+18e5).toISOString()}))}),workflowTaskCompletedEventId:l},{type:"activity",activityId:"prepare-shipment-001",activityType:"PrepareShipmentActivity",workflowId:"demo-fulfillment-wf-001",workflowRunId:"2",status:"FAILED",startTime:i,endTime:new Date(Date.parse(i)+3e4).toISOString(),sortEventTime:new Date(Date.parse(i)+3e4).toISOString(),taskQueue:zn,input:JSON.stringify({orderId:d.orderId,items:d.items,warehouseId:"WH-SF-001",packagingType:"STANDARD",packagingRequirements:{type:"BOX_MEDIUM",reinforced:!0,materials:["bubble_wrap","foam_padding"]}}),result:JSON.stringify({error:"PACKAGING_MATERIAL_UNAVAILABLE",message:"Required packaging material out of stock",details:{missingMaterials:["foam_padding"],availableAlternatives:["air_pillows"],nextRestockScheduled:new Date(Date.parse(n)+864e5).toISOString()},timestamp:i,errorCode:"PKG_001",severity:"MEDIUM"}),workflowTaskCompletedEventId:l},...Array(5).fill(null).map((v,y)=>({type:"activity",activityId:`process-shipping-00${y+1}`,activityType:"ProcessShippingActivity",workflowId:`demo-shipping-wf-00${y+1}`,workflowRunId:`child_${y+1}`,status:"RUNNING",startTime:new Date(Date.parse(i)+y*1e4).toISOString(),endTime:void 0,taskQueue:zn,sortEventTime:new Date(Date.parse(i)+y*1e4).toISOString(),input:JSON.stringify({packageId:`PKG-00${y+1}`,orderId:d.orderId,carrier:"FastShip",service:"NEXT_DAY",dimensions:{length:15,width:10,height:5,weight:2.5,unit:"IMPERIAL"},shippingAddress:d.shippingAddress,item:d.items[y%2],specialInstructions:"Handle with care",insurance:{required:!0,value:d.items[y%2].price}}),workflowTaskCompletedEventId:u}))];return{workflows:h,activities:p}},kw=async()=>{const e="demo-order-processing-wf-001",t="1";try{const{workflows:n,activities:r}=Sw();for(const o of n)await _s(o);for(const o of r)await ff(o);return console.log("Demo data stored successfully"),{rootWorkflowId:e,rootWorkflowRunId:t}}catch(n){throw console.error("Error storing demo data:",n),n}};var Ew=Object.defineProperty,_w=(e,t,n)=>t in e?Ew(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zi=(e,t,n)=>(_w(e,typeof t!="symbol"?t+"":t,n),n);let Nw=class{constructor(){Zi(this,"current",this.detect()),Zi(this,"handoffState","pending"),Zi(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},gr=new Nw;function Ja(e){return gr.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function ei(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function er(){let e=[],t={addEventListener(n,r,o,i){return n.addEventListener(r,o,i),t.add(()=>n.removeEventListener(r,o,i))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return ei(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,o){let i=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:o}),this.add(()=>{Object.assign(n.style,{[r]:i})})},group(n){let r=er();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let o of e.splice(r,1))o()}},dispose(){for(let n of e.splice(0))n()}};return t}function yc(){let[e]=b.useState(er);return b.useEffect(()=>()=>e.dispose(),[e]),e}let Lt=(e,t)=>{gr.isServer?b.useEffect(e,t):b.useLayoutEffect(e,t)};function br(e){let t=b.useRef(e);return Lt(()=>{t.current=e},[e]),t}let ct=function(e){let t=br(e);return W.useCallback((...n)=>t.current(...n),[t])},Tw=b.createContext(void 0);function Cw(){return b.useContext(Tw)}function Ts(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Qn(e,t,...n){if(e in t){let o=t[e];return typeof o=="function"?o(...n):o}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(o=>`"${o}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Qn),r}var La=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(La||{}),Gn=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Gn||{});function Qt(){let e=Ow();return b.useCallback(t=>Dw({mergeRefs:e,...t}),[e])}function Dw({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:o,visible:i=!0,name:s,mergeRefs:l}){l=l??jw;let u=mf(t,e);if(i)return wa(u,n,r,s,l);let d=o??0;if(d&2){let{static:h=!1,...p}=u;if(h)return wa(p,n,r,s,l)}if(d&1){let{unmount:h=!0,...p}=u;return Qn(h?0:1,{0(){return null},1(){return wa({...p,hidden:!0,style:{display:"none"}},n,r,s,l)}})}return wa(u,n,r,s,l)}function wa(e,t={},n,r,o){let{as:i=n,children:s,refName:l="ref",...u}=Qi(e,["unmount","static"]),d=e.ref!==void 0?{[l]:e.ref}:{},h=typeof s=="function"?s(t):s;"className"in u&&u.className&&typeof u.className=="function"&&(u.className=u.className(t)),u["aria-labelledby"]&&u["aria-labelledby"]===u.id&&(u["aria-labelledby"]=void 0);let p={};if(t){let v=!1,y=[];for(let[k,S]of Object.entries(t))typeof S=="boolean"&&(v=!0),S===!0&&y.push(k.replace(/([A-Z])/g,N=>`-${N.toLowerCase()}`));if(v){p["data-headlessui-state"]=y.join(" ");for(let k of y)p[`data-${k}`]=""}}if(i===b.Fragment&&(Object.keys(sr(u)).length>0||Object.keys(sr(p)).length>0))if(!b.isValidElement(h)||Array.isArray(h)&&h.length>1){if(Object.keys(sr(u)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(sr(u)).concat(Object.keys(sr(p))).map(v=>`  - ${v}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(v=>`  - ${v}`).join(`
`)].join(`
`))}else{let v=h.props,y=v==null?void 0:v.className,k=typeof y=="function"?(...T)=>Ts(y(...T),u.className):Ts(y,u.className),S=k?{className:k}:{},N=mf(h.props,sr(Qi(u,["ref"])));for(let T in p)T in N&&delete p[T];return b.cloneElement(h,Object.assign({},N,p,d,{ref:o(Pw(h),d.ref)},S))}return b.createElement(i,Object.assign({},Qi(u,["ref"]),i!==b.Fragment&&d,i!==b.Fragment&&p),h)}function Ow(){let e=b.useRef([]),t=b.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function jw(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function mf(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let o in r)o.startsWith("on")&&typeof r[o]=="function"?(n[o]!=null||(n[o]=[]),n[o].push(r[o])):t[o]=r[o];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[o=>{var i;return(i=o==null?void 0:o.preventDefault)==null?void 0:i.call(o)}]);for(let r in n)Object.assign(t,{[r](o,...i){let s=n[r];for(let l of s){if((o instanceof Event||(o==null?void 0:o.nativeEvent)instanceof Event)&&o.defaultPrevented)return;l(o,...i)}}});return t}function zt(e){var t;return Object.assign(b.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function sr(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Qi(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function Pw(e){return W.version.split(".")[0]>="19"?e.props.ref:e.ref}let Iw="span";var Fa=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Fa||{});function Mw(e,t){var n;let{features:r=1,...o}=e,i={ref:t,"aria-hidden":(r&2)===2?!0:(n=o["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Qt()({ourProps:i,theirProps:o,slot:{},defaultTag:Iw,name:"Hidden"})}let Cs=zt(Mw),pf=Symbol();function Aw(e,t=!0){return Object.assign(e,{[pf]:t})}function wn(...e){let t=b.useRef(e);b.useEffect(()=>{t.current=e},[e]);let n=ct(r=>{for(let o of t.current)o!=null&&(typeof o=="function"?o(r):o.current=r)});return e.every(r=>r==null||(r==null?void 0:r[pf]))?void 0:n}let vc=b.createContext(null);vc.displayName="DescriptionContext";function gf(){let e=b.useContext(vc);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,gf),t}return e}function $w(){let[e,t]=b.useState([]);return[e.length>0?e.join(" "):void 0,b.useMemo(()=>function(n){let r=ct(i=>(t(s=>[...s,i]),()=>t(s=>{let l=s.slice(),u=l.indexOf(i);return u!==-1&&l.splice(u,1),l}))),o=b.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return W.createElement(vc.Provider,{value:o},n.children)},[t])]}let Rw="p";function Lw(e,t){let n=b.useId(),r=Cw(),{id:o=`headlessui-description-${n}`,...i}=e,s=gf(),l=wn(t);Lt(()=>s.register(o),[o,s.register]);let u=r||!1,d=b.useMemo(()=>({...s.slot,disabled:u}),[s.slot,u]),h={ref:l,...s.props,id:o};return Qt()({ourProps:h,theirProps:i,slot:d,defaultTag:Rw,name:s.name||"Description"})}let Fw=zt(Lw),Ww=Object.assign(Fw,{});var yf=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(yf||{});let Bw=b.createContext(()=>{});function Hw({value:e,children:t}){return W.createElement(Bw.Provider,{value:e},t)}let zw=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};function vf(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(o){return r.add(o),()=>r.delete(o)},dispatch(o,...i){let s=t[o].call(n,...i);s&&(n=s,r.forEach(l=>l()))}}}function wf(e){return b.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}let Yw=new zw(()=>vf(()=>[],{ADD(e){return this.includes(e)?this:[...this,e]},REMOVE(e){let t=this.indexOf(e);if(t===-1)return this;let n=this.slice();return n.splice(t,1),n}}));function Yr(e,t){let n=Yw.get(t),r=b.useId(),o=wf(n);if(Lt(()=>{if(e)return n.dispatch("ADD",r),()=>n.dispatch("REMOVE",r)},[n,e]),!e)return!1;let i=o.indexOf(r),s=o.length;return i===-1&&(i=s,s+=1),i===s-1}let Ds=new Map,wo=new Map;function Zl(e){var t;let n=(t=wo.get(e))!=null?t:0;return wo.set(e,n+1),n!==0?()=>Ql(e):(Ds.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Ql(e))}function Ql(e){var t;let n=(t=wo.get(e))!=null?t:1;if(n===1?wo.delete(e):wo.set(e,n-1),n!==1)return;let r=Ds.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,Ds.delete(e))}function Vw(e,{allowed:t,disallowed:n}={}){let r=Yr(e,"inert-others");Lt(()=>{var o,i;if(!r)return;let s=er();for(let u of(o=n==null?void 0:n())!=null?o:[])u&&s.add(Zl(u));let l=(i=t==null?void 0:t())!=null?i:[];for(let u of l){if(!u)continue;let d=Ja(u);if(!d)continue;let h=u.parentElement;for(;h&&h!==d.body;){for(let p of h.children)l.some(v=>p.contains(v))||s.add(Zl(p));h=h.parentElement}}return s.dispose},[r,t,n])}function qw(e,t,n){let r=br(o=>{let i=o.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&n()});b.useEffect(()=>{if(!e)return;let o=t===null?null:t instanceof HTMLElement?t:t.current;if(!o)return;let i=er();if(typeof ResizeObserver<"u"){let s=new ResizeObserver(()=>r.current(o));s.observe(o),i.add(()=>s.disconnect())}if(typeof IntersectionObserver<"u"){let s=new IntersectionObserver(()=>r.current(o));s.observe(o),i.add(()=>s.disconnect())}return()=>i.dispose()},[t,r,e])}let Wa=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),Kw=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Tn=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(Tn||{}),Os=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Os||{}),Uw=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Uw||{});function Xw(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Wa)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function Gw(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Kw)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var bf=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(bf||{});function Zw(e,t=0){var n;return e===((n=Ja(e))==null?void 0:n.body)?!1:Qn(t,{0(){return e.matches(Wa)},1(){let r=e;for(;r!==null;){if(r.matches(Wa))return!0;r=r.parentElement}return!1}})}var Qw=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Qw||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function On(e){e==null||e.focus({preventScroll:!0})}let Jw=["textarea","input"].join(",");function eb(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,Jw))!=null?n:!1}function tb(e,t=n=>n){return e.slice().sort((n,r)=>{let o=t(n),i=t(r);if(o===null||i===null)return 0;let s=o.compareDocumentPosition(i);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function bo(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:o=[]}={}){let i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,s=Array.isArray(e)?n?tb(e):e:t&64?Gw(e):Xw(e);o.length>0&&s.length>1&&(s=s.filter(y=>!o.some(k=>k!=null&&"current"in k?(k==null?void 0:k.current)===y:k===y))),r=r??i.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,s.indexOf(r))-1;if(t&4)return Math.max(0,s.indexOf(r))+1;if(t&8)return s.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=t&32?{preventScroll:!0}:{},h=0,p=s.length,v;do{if(h>=p||h+p<=0)return 0;let y=u+h;if(t&16)y=(y+p)%p;else{if(y<0)return 3;if(y>=p)return 1}v=s[y],v==null||v.focus(d),h+=l}while(v!==i.activeElement);return t&6&&eb(v)&&v.select(),2}function xf(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function nb(){return/Android/gi.test(window.navigator.userAgent)}function rb(){return xf()||nb()}function uo(e,t,n,r){let o=br(n);b.useEffect(()=>{if(!e)return;function i(s){o.current(s)}return document.addEventListener(t,i,r),()=>document.removeEventListener(t,i,r)},[e,t,r])}function Sf(e,t,n,r){let o=br(n);b.useEffect(()=>{if(!e)return;function i(s){o.current(s)}return window.addEventListener(t,i,r),()=>window.removeEventListener(t,i,r)},[e,t,r])}const Jl=30;function ob(e,t,n){let r=Yr(e,"outside-click"),o=br(n),i=b.useCallback(function(u,d){if(u.defaultPrevented)return;let h=d(u);if(h===null||!h.getRootNode().contains(h)||!h.isConnected)return;let p=function v(y){return typeof y=="function"?v(y()):Array.isArray(y)||y instanceof Set?y:[y]}(t);for(let v of p)if(v!==null&&(v.contains(h)||u.composed&&u.composedPath().includes(v)))return;return!Zw(h,bf.Loose)&&h.tabIndex!==-1&&u.preventDefault(),o.current(u,h)},[o,t]),s=b.useRef(null);uo(r,"pointerdown",u=>{var d,h;s.current=((h=(d=u.composedPath)==null?void 0:d.call(u))==null?void 0:h[0])||u.target},!0),uo(r,"mousedown",u=>{var d,h;s.current=((h=(d=u.composedPath)==null?void 0:d.call(u))==null?void 0:h[0])||u.target},!0),uo(r,"click",u=>{rb()||s.current&&(i(u,()=>s.current),s.current=null)},!0);let l=b.useRef({x:0,y:0});uo(r,"touchstart",u=>{l.current.x=u.touches[0].clientX,l.current.y=u.touches[0].clientY},!0),uo(r,"touchend",u=>{let d={x:u.changedTouches[0].clientX,y:u.changedTouches[0].clientY};if(!(Math.abs(d.x-l.current.x)>=Jl||Math.abs(d.y-l.current.y)>=Jl))return i(u,()=>u.target instanceof HTMLElement?u.target:null)},!0),Sf(r,"blur",u=>i(u,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Lo(...e){return b.useMemo(()=>Ja(...e),[...e])}function kf(e,t,n,r){let o=br(n);b.useEffect(()=>{e=e??window;function i(s){o.current(s)}return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)},[e,t,r])}function ab(){let e;return{before({doc:t}){var n;let r=t.documentElement,o=(n=t.defaultView)!=null?n:window;e=Math.max(0,o.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,o=Math.max(0,r.clientWidth-r.offsetWidth),i=Math.max(0,e-o);n.style(r,"paddingRight",`${i}px`)}}}function ib(){return xf()?{before({doc:e,d:t,meta:n}){function r(o){return n.containers.flatMap(i=>i()).some(i=>i.contains(o))}t.microTask(()=>{var o;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=er();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let i=(o=window.scrollY)!=null?o:window.pageYOffset,s=null;t.addEventListener(e,"click",l=>{if(l.target instanceof HTMLElement)try{let u=l.target.closest("a");if(!u)return;let{hash:d}=new URL(u.href),h=e.querySelector(d);h&&!r(h)&&(s=h)}catch{}},!0),t.addEventListener(e,"touchstart",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let u=l.target;for(;u.parentElement&&r(u.parentElement);)u=u.parentElement;t.style(u,"overscrollBehavior","contain")}else t.style(l.target,"touchAction","none")}),t.addEventListener(e,"touchmove",l=>{if(l.target instanceof HTMLElement){if(l.target.tagName==="INPUT")return;if(r(l.target)){let u=l.target;for(;u.parentElement&&u.dataset.headlessuiPortal!==""&&!(u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth);)u=u.parentElement;u.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()}},{passive:!1}),t.add(()=>{var l;let u=(l=window.scrollY)!=null?l:window.pageYOffset;i!==u&&window.scrollTo(0,i),s&&s.isConnected&&(s.scrollIntoView({block:"nearest"}),s=null)})})}}:{}}function sb(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function cb(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let fr=vf(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:er(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:cb(n)},o=[ib(),ab(),sb()];o.forEach(({before:i})=>i==null?void 0:i(r)),o.forEach(({after:i})=>i==null?void 0:i(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});fr.subscribe(()=>{let e=fr.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",o=n.count!==0;(o&&!r||!o&&r)&&fr.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&fr.dispatch("TEARDOWN",n)}});function lb(e,t,n=()=>({containers:[]})){let r=wf(fr),o=t?r.get(t):void 0,i=o?o.count>0:!1;return Lt(()=>{if(!(!t||!e))return fr.dispatch("PUSH",t,n),()=>fr.dispatch("POP",t,n)},[e,t]),i}function ub(e,t,n=()=>[document.body]){let r=Yr(e,"scroll-lock");lb(r,t,o=>{var i;return{containers:[...(i=o.containers)!=null?i:[],n]}})}function db(e=0){let[t,n]=b.useState(e),r=b.useCallback(u=>n(u),[t]),o=b.useCallback(u=>n(d=>d|u),[t]),i=b.useCallback(u=>(t&u)===u,[t]),s=b.useCallback(u=>n(d=>d&~u),[n]),l=b.useCallback(u=>n(d=>d^u),[n]);return{flags:t,setFlag:r,addFlag:o,hasFlag:i,removeFlag:s,toggleFlag:l}}var fb={},eu,tu;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((eu=process==null?void 0:fb)==null?void 0:eu.NODE_ENV)==="test"&&typeof((tu=Element==null?void 0:Element.prototype)==null?void 0:tu.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var hb=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(hb||{});function mb(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function pb(e,t,n,r){let[o,i]=b.useState(n),{hasFlag:s,addFlag:l,removeFlag:u}=db(e&&o?3:0),d=b.useRef(!1),h=b.useRef(!1),p=yc();return Lt(()=>{var v;if(e){if(n&&i(!0),!t){n&&l(3);return}return(v=r==null?void 0:r.start)==null||v.call(r,n),gb(t,{inFlight:d,prepare(){h.current?h.current=!1:h.current=d.current,d.current=!0,!h.current&&(n?(l(3),u(4)):(l(4),u(2)))},run(){h.current?n?(u(3),l(4)):(u(4),l(3)):n?u(1):l(1)},done(){var y;h.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(d.current=!1,u(7),n||i(!1),(y=r==null?void 0:r.end)==null||y.call(r,n))}})}},[e,n,t,p]),e?[o,{closed:s(1),enter:s(2),leave:s(4),transition:s(2)||s(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function gb(e,{prepare:t,run:n,done:r,inFlight:o}){let i=er();return vb(e,{prepare:t,inFlight:o}),i.nextFrame(()=>{n(),i.requestAnimationFrame(()=>{i.add(yb(e,r))})}),i.dispose}function yb(e,t){var n,r;let o=er();if(!e)return o.dispose;let i=!1;o.add(()=>{i=!0});let s=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(l=>l instanceof CSSTransition))!=null?r:[];return s.length===0?(t(),o.dispose):(Promise.allSettled(s.map(l=>l.finished)).then(()=>{i||t()}),o.dispose)}function vb(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function wc(e,t){let n=b.useRef([]),r=ct(e);b.useEffect(()=>{let o=[...n.current];for(let[i,s]of t.entries())if(n.current[i]!==s){let l=r(t,o);return n.current=t,l}},[r,...t])}let ti=b.createContext(null);ti.displayName="OpenClosedContext";var rn=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(rn||{});function ni(){return b.useContext(ti)}function wb({value:e,children:t}){return W.createElement(ti.Provider,{value:e},t)}function bb({children:e}){return W.createElement(ti.Provider,{value:null},e)}function xb(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Un=[];xb(()=>{function e(t){if(!(t.target instanceof HTMLElement)||t.target===document.body||Un[0]===t.target)return;let n=t.target;n=n.closest(Wa),Un.unshift(n??t.target),Un=Un.filter(r=>r!=null&&r.isConnected),Un.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function Ef(e){let t=ct(e),n=b.useRef(!1);b.useEffect(()=>(n.current=!1,()=>{n.current=!0,ei(()=>{n.current&&t()})}),[t])}function Sb(){let e=typeof document>"u";return"useSyncExternalStore"in ol?(t=>t.useSyncExternalStore)(ol)(()=>()=>{},()=>!1,()=>!e):!1}function Fo(){let e=Sb(),[t,n]=b.useState(gr.isHandoffComplete);return t&&gr.isHandoffComplete===!1&&n(!1),b.useEffect(()=>{t!==!0&&n(!0)},[t]),b.useEffect(()=>gr.handoff(),[]),e?!1:t}let _f=b.createContext(!1);function kb(){return b.useContext(_f)}function nu(e){return W.createElement(_f.Provider,{value:e.force},e.children)}function Eb(e){let t=kb(),n=b.useContext(Tf),r=Lo(e),[o,i]=b.useState(()=>{var s;if(!t&&n!==null)return(s=n.current)!=null?s:null;if(gr.isServer)return null;let l=r==null?void 0:r.getElementById("headlessui-portal-root");if(l)return l;if(r===null)return null;let u=r.createElement("div");return u.setAttribute("id","headlessui-portal-root"),r.body.appendChild(u)});return b.useEffect(()=>{o!==null&&(r!=null&&r.body.contains(o)||r==null||r.body.appendChild(o))},[o,r]),b.useEffect(()=>{t||n!==null&&i(n.current)},[n,i,t]),o}let Nf=b.Fragment,_b=zt(function(e,t){let n=e,r=b.useRef(null),o=wn(Aw(p=>{r.current=p}),t),i=Lo(r),s=Eb(r),[l]=b.useState(()=>{var p;return gr.isServer?null:(p=i==null?void 0:i.createElement("div"))!=null?p:null}),u=b.useContext(js),d=Fo();Lt(()=>{!s||!l||s.contains(l)||(l.setAttribute("data-headlessui-portal",""),s.appendChild(l))},[s,l]),Lt(()=>{if(l&&u)return u.register(l)},[u,l]),Ef(()=>{var p;!s||!l||(l instanceof Node&&s.contains(l)&&s.removeChild(l),s.childNodes.length<=0&&((p=s.parentElement)==null||p.removeChild(s)))});let h=Qt();return d?!s||!l?null:Ou.createPortal(h({ourProps:{ref:o},theirProps:n,slot:{},defaultTag:Nf,name:"Portal"}),l):null});function Nb(e,t){let n=wn(t),{enabled:r=!0,...o}=e,i=Qt();return r?W.createElement(_b,{...o,ref:n}):i({ourProps:{ref:n},theirProps:o,slot:{},defaultTag:Nf,name:"Portal"})}let Tb=b.Fragment,Tf=b.createContext(null);function Cb(e,t){let{target:n,...r}=e,o={ref:wn(t)},i=Qt();return W.createElement(Tf.Provider,{value:n},i({ourProps:o,theirProps:r,defaultTag:Tb,name:"Popover.Group"}))}let js=b.createContext(null);function Db(){let e=b.useContext(js),t=b.useRef([]),n=ct(i=>(t.current.push(i),e&&e.register(i),()=>r(i))),r=ct(i=>{let s=t.current.indexOf(i);s!==-1&&t.current.splice(s,1),e&&e.unregister(i)}),o=b.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,b.useMemo(()=>function({children:i}){return W.createElement(js.Provider,{value:o},i)},[o])]}let Ob=zt(Nb),Cf=zt(Cb),jb=Object.assign(Ob,{Group:Cf});function Pb(e,t=typeof document<"u"?document.defaultView:null,n){let r=Yr(e,"escape");kf(t,"keydown",o=>{r&&(o.defaultPrevented||o.key===yf.Escape&&n(o))})}function Ib(){var e;let[t]=b.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=b.useState((e=t==null?void 0:t.matches)!=null?e:!1);return Lt(()=>{if(!t)return;function o(i){r(i.matches)}return t.addEventListener("change",o),()=>t.removeEventListener("change",o)},[t]),n}function Mb({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=Lo(n),o=ct(()=>{var i,s;let l=[];for(let u of e)u!==null&&(u instanceof HTMLElement?l.push(u):"current"in u&&u.current instanceof HTMLElement&&l.push(u.current));if(t!=null&&t.current)for(let u of t.current)l.push(u);for(let u of(i=r==null?void 0:r.querySelectorAll("html > *, body > *"))!=null?i:[])u!==document.body&&u!==document.head&&u instanceof HTMLElement&&u.id!=="headlessui-portal-root"&&(n&&(u.contains(n)||u.contains((s=n==null?void 0:n.getRootNode())==null?void 0:s.host))||l.some(d=>u.contains(d))||l.push(u));return l});return{resolveContainers:o,contains:ct(i=>o().some(s=>s.contains(i)))}}let Df=b.createContext(null);function ru({children:e,node:t}){let[n,r]=b.useState(null),o=Of(t??n);return W.createElement(Df.Provider,{value:o},e,o===null&&W.createElement(Cs,{features:Fa.Hidden,ref:i=>{var s,l;if(i){for(let u of(l=(s=Ja(i))==null?void 0:s.querySelectorAll("html > *, body > *"))!=null?l:[])if(u!==document.body&&u!==document.head&&u instanceof HTMLElement&&u!=null&&u.contains(i)){r(u);break}}}}))}function Of(e=null){var t;return(t=b.useContext(Df))!=null?t:e}function bc(){let e=b.useRef(!1);return Lt(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var yo=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(yo||{});function Ab(){let e=b.useRef(0);return Sf(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function jf(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let $b="div";var lr=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(lr||{});function Rb(e,t){let n=b.useRef(null),r=wn(n,t),{initialFocus:o,initialFocusFallback:i,containers:s,features:l=15,...u}=e;Fo()||(l=0);let d=Lo(n);Bb(l,{ownerDocument:d});let h=Hb(l,{ownerDocument:d,container:n,initialFocus:o,initialFocusFallback:i});zb(l,{ownerDocument:d,container:n,containers:s,previousActiveElement:h});let p=Ab(),v=ct($=>{let I=n.current;I&&(C=>C())(()=>{Qn(p.current,{[yo.Forwards]:()=>{bo(I,Tn.First,{skipElements:[$.relatedTarget,i]})},[yo.Backwards]:()=>{bo(I,Tn.Last,{skipElements:[$.relatedTarget,i]})}})})}),y=Yr(!!(l&2),"focus-trap#tab-lock"),k=yc(),S=b.useRef(!1),N={ref:r,onKeyDown($){$.key=="Tab"&&(S.current=!0,k.requestAnimationFrame(()=>{S.current=!1}))},onBlur($){if(!(l&4))return;let I=jf(s);n.current instanceof HTMLElement&&I.add(n.current);let C=$.relatedTarget;C instanceof HTMLElement&&C.dataset.headlessuiFocusGuard!=="true"&&(Pf(I,C)||(S.current?bo(n.current,Qn(p.current,{[yo.Forwards]:()=>Tn.Next,[yo.Backwards]:()=>Tn.Previous})|Tn.WrapAround,{relativeTo:$.target}):$.target instanceof HTMLElement&&On($.target)))}},T=Qt();return W.createElement(W.Fragment,null,y&&W.createElement(Cs,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:v,features:Fa.Focusable}),T({ourProps:N,theirProps:u,defaultTag:$b,name:"FocusTrap"}),y&&W.createElement(Cs,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:v,features:Fa.Focusable}))}let Lb=zt(Rb),Fb=Object.assign(Lb,{features:lr});function Wb(e=!0){let t=b.useRef(Un.slice());return wc(([n],[r])=>{r===!0&&n===!1&&ei(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Un.slice())},[e,Un,t]),ct(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function Bb(e,{ownerDocument:t}){let n=!!(e&8),r=Wb(n);wc(()=>{n||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&On(r())},[n]),Ef(()=>{n&&On(r())})}function Hb(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:o}){let i=b.useRef(null),s=Yr(!!(e&1),"focus-trap#initial-focus"),l=bc();return wc(()=>{if(e===0)return;if(!s){o!=null&&o.current&&On(o.current);return}let u=n.current;u&&ei(()=>{if(!l.current)return;let d=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===d){i.current=d;return}}else if(u.contains(d)){i.current=d;return}if(r!=null&&r.current)On(r.current);else{if(e&16){if(bo(u,Tn.First|Tn.AutoFocus)!==Os.Error)return}else if(bo(u,Tn.First)!==Os.Error)return;if(o!=null&&o.current&&(On(o.current),(t==null?void 0:t.activeElement)===o.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t==null?void 0:t.activeElement})},[o,s,e]),i}function zb(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:o}){let i=bc(),s=!!(e&4);kf(t==null?void 0:t.defaultView,"focus",l=>{if(!s||!i.current)return;let u=jf(r);n.current instanceof HTMLElement&&u.add(n.current);let d=o.current;if(!d)return;let h=l.target;h&&h instanceof HTMLElement?Pf(u,h)?(o.current=h,On(h)):(l.preventDefault(),l.stopPropagation(),On(d)):On(o.current)},!0)}function Pf(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function If(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:Af)!==b.Fragment||W.Children.count(e.children)===1}let ri=b.createContext(null);ri.displayName="TransitionContext";var Yb=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Yb||{});function Vb(){let e=b.useContext(ri);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function qb(){let e=b.useContext(oi);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let oi=b.createContext(null);oi.displayName="NestingContext";function ai(e){return"children"in e?ai(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function Mf(e,t){let n=br(e),r=b.useRef([]),o=bc(),i=yc(),s=ct((y,k=Gn.Hidden)=>{let S=r.current.findIndex(({el:N})=>N===y);S!==-1&&(Qn(k,{[Gn.Unmount](){r.current.splice(S,1)},[Gn.Hidden](){r.current[S].state="hidden"}}),i.microTask(()=>{var N;!ai(r)&&o.current&&((N=n.current)==null||N.call(n))}))}),l=ct(y=>{let k=r.current.find(({el:S})=>S===y);return k?k.state!=="visible"&&(k.state="visible"):r.current.push({el:y,state:"visible"}),()=>s(y,Gn.Unmount)}),u=b.useRef([]),d=b.useRef(Promise.resolve()),h=b.useRef({enter:[],leave:[]}),p=ct((y,k,S)=>{u.current.splice(0),t&&(t.chains.current[k]=t.chains.current[k].filter(([N])=>N!==y)),t==null||t.chains.current[k].push([y,new Promise(N=>{u.current.push(N)})]),t==null||t.chains.current[k].push([y,new Promise(N=>{Promise.all(h.current[k].map(([T,$])=>$)).then(()=>N())})]),k==="enter"?d.current=d.current.then(()=>t==null?void 0:t.wait.current).then(()=>S(k)):S(k)}),v=ct((y,k,S)=>{Promise.all(h.current[k].splice(0).map(([N,T])=>T)).then(()=>{var N;(N=u.current.shift())==null||N()}).then(()=>S(k))});return b.useMemo(()=>({children:r,register:l,unregister:s,onStart:p,onStop:v,wait:d,chains:h}),[l,s,r,p,v,h,d])}let Af=b.Fragment,$f=La.RenderStrategy;function Kb(e,t){var n,r;let{transition:o=!0,beforeEnter:i,afterEnter:s,beforeLeave:l,afterLeave:u,enter:d,enterFrom:h,enterTo:p,entered:v,leave:y,leaveFrom:k,leaveTo:S,...N}=e,[T,$]=b.useState(null),I=b.useRef(null),C=If(e),X=wn(...C?[I,t,$]:t===null?[]:[t]),q=(n=N.unmount)==null||n?Gn.Unmount:Gn.Hidden,{show:H,appear:ee,initial:K}=Vb(),[ne,U]=b.useState(H?"visible":"hidden"),ie=qb(),{register:ce,unregister:E}=ie;Lt(()=>ce(I),[ce,I]),Lt(()=>{if(q===Gn.Hidden&&I.current){if(H&&ne!=="visible"){U("visible");return}return Qn(ne,{hidden:()=>E(I),visible:()=>ce(I)})}},[ne,I,ce,E,H,q]);let z=Fo();Lt(()=>{if(C&&z&&ne==="visible"&&I.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[I,ne,z,C]);let D=K&&!ee,Q=ee&&H&&K,J=b.useRef(!1),j=Mf(()=>{J.current||(U("hidden"),E(I))},ie),G=ct(De=>{J.current=!0;let Pe=De?"enter":"leave";j.onStart(I,Pe,fe=>{fe==="enter"?i==null||i():fe==="leave"&&(l==null||l())})}),se=ct(De=>{let Pe=De?"enter":"leave";J.current=!1,j.onStop(I,Pe,fe=>{fe==="enter"?s==null||s():fe==="leave"&&(u==null||u())}),Pe==="leave"&&!ai(j)&&(U("hidden"),E(I))});b.useEffect(()=>{C&&o||(G(H),se(H))},[H,C,o]);let ae=!(!o||!C||!z||D),[,de]=pb(ae,T,H,{start:G,end:se}),we=sr({ref:X,className:((r=Ts(N.className,Q&&d,Q&&h,de.enter&&d,de.enter&&de.closed&&h,de.enter&&!de.closed&&p,de.leave&&y,de.leave&&!de.closed&&k,de.leave&&de.closed&&S,!de.transition&&H&&v))==null?void 0:r.trim())||void 0,...mb(de)}),ke=0;ne==="visible"&&(ke|=rn.Open),ne==="hidden"&&(ke|=rn.Closed),de.enter&&(ke|=rn.Opening),de.leave&&(ke|=rn.Closing);let Ne=Qt();return W.createElement(oi.Provider,{value:j},W.createElement(wb,{value:ke},Ne({ourProps:we,theirProps:N,defaultTag:Af,features:$f,visible:ne==="visible",name:"Transition.Child"})))}function Ub(e,t){let{show:n,appear:r=!1,unmount:o=!0,...i}=e,s=b.useRef(null),l=If(e),u=wn(...l?[s,t]:t===null?[]:[t]);Fo();let d=ni();if(n===void 0&&d!==null&&(n=(d&rn.Open)===rn.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[h,p]=b.useState(n?"visible":"hidden"),v=Mf(()=>{n||p("hidden")}),[y,k]=b.useState(!0),S=b.useRef([n]);Lt(()=>{y!==!1&&S.current[S.current.length-1]!==n&&(S.current.push(n),k(!1))},[S,n]);let N=b.useMemo(()=>({show:n,appear:r,initial:y}),[n,r,y]);Lt(()=>{n?p("visible"):!ai(v)&&s.current!==null&&p("hidden")},[n,v]);let T={unmount:o},$=ct(()=>{var X;y&&k(!1),(X=e.beforeEnter)==null||X.call(e)}),I=ct(()=>{var X;y&&k(!1),(X=e.beforeLeave)==null||X.call(e)}),C=Qt();return W.createElement(oi.Provider,{value:v},W.createElement(ri.Provider,{value:N},C({ourProps:{...T,as:b.Fragment,children:W.createElement(Rf,{ref:u,...T,...i,beforeEnter:$,beforeLeave:I})},theirProps:{},defaultTag:b.Fragment,features:$f,visible:h==="visible",name:"Transition"})))}function Xb(e,t){let n=b.useContext(ri)!==null,r=ni()!==null;return W.createElement(W.Fragment,null,!n&&r?W.createElement(Ps,{ref:t,...e}):W.createElement(Rf,{ref:t,...e}))}let Ps=zt(Ub),Rf=zt(Kb),xc=zt(Xb),Gb=Object.assign(Ps,{Child:xc,Root:Ps});var Zb=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Zb||{}),Qb=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(Qb||{});let Jb={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Sc=b.createContext(null);Sc.displayName="DialogContext";function ii(e){let t=b.useContext(Sc);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ii),n}return t}function ex(e,t){return Qn(t.type,Jb,e,t)}let ou=zt(function(e,t){let n=b.useId(),{id:r=`headlessui-dialog-${n}`,open:o,onClose:i,initialFocus:s,role:l="dialog",autoFocus:u=!0,__demoMode:d=!1,unmount:h=!1,...p}=e,v=b.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(v.current||(v.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let y=ni();o===void 0&&y!==null&&(o=(y&rn.Open)===rn.Open);let k=b.useRef(null),S=wn(k,t),N=Lo(k),T=o?0:1,[$,I]=b.useReducer(ex,{titleId:null,descriptionId:null,panelRef:b.createRef()}),C=ct(()=>i(!1)),X=ct(se=>I({type:0,id:se})),q=Fo()?T===0:!1,[H,ee]=Db(),K={get current(){var se;return(se=$.panelRef.current)!=null?se:k.current}},ne=Of(),{resolveContainers:U}=Mb({mainTreeNode:ne,portals:H,defaultContainers:[K]}),ie=y!==null?(y&rn.Closing)===rn.Closing:!1;Vw(d||ie?!1:q,{allowed:ct(()=>{var se,ae;return[(ae=(se=k.current)==null?void 0:se.closest("[data-headlessui-portal]"))!=null?ae:null]}),disallowed:ct(()=>{var se;return[(se=ne==null?void 0:ne.closest("body > *:not(#headlessui-portal-root)"))!=null?se:null]})}),ob(q,U,se=>{se.preventDefault(),C()}),Pb(q,N==null?void 0:N.defaultView,se=>{se.preventDefault(),se.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),C()}),ub(d||ie?!1:q,N,U),qw(q,k,C);let[ce,E]=$w(),z=b.useMemo(()=>[{dialogState:T,close:C,setTitleId:X,unmount:h},$],[T,$,C,X,h]),D=b.useMemo(()=>({open:T===0}),[T]),Q={ref:S,id:r,role:l,tabIndex:-1,"aria-modal":d?void 0:T===0?!0:void 0,"aria-labelledby":$.titleId,"aria-describedby":ce,unmount:h},J=!Ib(),j=lr.None;q&&!d&&(j|=lr.RestoreFocus,j|=lr.TabLock,u&&(j|=lr.AutoFocus),J&&(j|=lr.InitialFocus));let G=Qt();return W.createElement(bb,null,W.createElement(nu,{force:!0},W.createElement(jb,null,W.createElement(Sc.Provider,{value:z},W.createElement(Cf,{target:k},W.createElement(nu,{force:!1},W.createElement(E,{slot:D},W.createElement(ee,null,W.createElement(Fb,{initialFocus:s,initialFocusFallback:k,containers:U,features:j},W.createElement(Hw,{value:C},G({ourProps:Q,theirProps:p,slot:D,defaultTag:tx,features:nx,visible:T===0,name:"Dialog"})))))))))))}),tx="div",nx=La.RenderStrategy|La.Static;function rx(e,t){let{transition:n=!1,open:r,...o}=e,i=ni(),s=e.hasOwnProperty("open")||i!==null,l=e.hasOwnProperty("onClose");if(!s&&!l)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!s)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!l)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!o.static?W.createElement(ru,null,W.createElement(Gb,{show:r,transition:n,unmount:o.unmount},W.createElement(ou,{ref:t,...o}))):W.createElement(ru,null,W.createElement(ou,{ref:t,open:r,...o}))}let ox="div";function ax(e,t){let n=b.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:o=!1,...i}=e,[{dialogState:s,unmount:l},u]=ii("Dialog.Panel"),d=wn(t,u.panelRef),h=b.useMemo(()=>({open:s===0}),[s]),p=ct(N=>{N.stopPropagation()}),v={ref:d,id:r,onClick:p},y=o?xc:b.Fragment,k=o?{unmount:l}:{},S=Qt();return W.createElement(y,{...k},S({ourProps:v,theirProps:i,slot:h,defaultTag:ox,name:"Dialog.Panel"}))}let ix="div";function sx(e,t){let{transition:n=!1,...r}=e,[{dialogState:o,unmount:i}]=ii("Dialog.Backdrop"),s=b.useMemo(()=>({open:o===0}),[o]),l={ref:t,"aria-hidden":!0},u=n?xc:b.Fragment,d=n?{unmount:i}:{},h=Qt();return W.createElement(u,{...d},h({ourProps:l,theirProps:r,slot:s,defaultTag:ix,name:"Dialog.Backdrop"}))}let cx="h2";function lx(e,t){let n=b.useId(),{id:r=`headlessui-dialog-title-${n}`,...o}=e,[{dialogState:i,setTitleId:s}]=ii("Dialog.Title"),l=wn(t);b.useEffect(()=>(s(r),()=>s(null)),[r,s]);let u=b.useMemo(()=>({open:i===0}),[i]),d={ref:l,id:r};return Qt()({ourProps:d,theirProps:o,slot:u,defaultTag:cx,name:"Dialog.Title"})}let ux=zt(rx),Lf=zt(ax);zt(sx);let dx=zt(lx),Is=Object.assign(ux,{Panel:Lf,Title:dx,Description:Ww});const Nn=[{id:"WorkflowType",label:"WorkflowType",type:"text"},{id:"WorkflowId",label:"WorkflowId",type:"text"},{id:"RunId",label:"RunId",type:"text"},{id:"ExecutionStatus",label:"Status",type:"status"},{id:"StartTime",label:"StartTime",type:"datetime"},{id:"CloseTime",label:"CloseTime",type:"datetime"},{id:"TaskQueue",label:"TaskQueue",type:"text"}],au=[{id:"equals",label:"=",alternatives:["equals","is"],searchOperator:"="},{id:"notEquals",label:"!=",alternatives:["not equals","is not"],searchOperator:"!="},{id:"starts_with",label:"starts with",alternatives:["startswith","start"],searchOperator:"starts_with"},{id:"isNull",label:"is null",alternatives:["null"],searchOperator:"is null"},{id:"isNotNull",label:"is not null",alternatives:["not null"],searchOperator:"is not null"},{id:"greaterThan",label:">",alternatives:["after","greater than"],searchOperator:">"},{id:"lessThan",label:"<",alternatives:["before","less than"],searchOperator:"<"},{id:"between",label:"between",alternatives:[],searchOperator:"between"}],Ji=[{value:"Completed",color:"text-green-700 bg-green-50"},{value:"Running",color:"text-blue-700 bg-blue-50"},{value:"TimedOut",color:"text-orange-700 bg-orange-50"},{value:"Failed",color:"text-red-700 bg-red-50"},{value:"Canceled",color:"text-gray-700 bg-gray-50"},{value:"Terminated",color:"text-yellow-700 bg-yellow-50"},{value:"Continued as New",color:"text-pink-700 bg-pink-50"}],ba=[{id:"equals",label:"=",alternatives:["==","is","="]},{id:"between",label:"between",alternatives:["between"]},{id:"greater",label:">",alternatives:["gt",">"]},{id:"greaterOrEqual",label:">=",alternatives:["gte",">="]},{id:"less",label:"<",alternatives:["lt","<"]},{id:"lessOrEqual",label:"<=",alternatives:["lte","<="]}],Ff=6048e5,fx=864e5,iu=Symbol.for("constructDateFrom");function Jn(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&iu in e?e[iu](t):e instanceof Date?new e.constructor(t):new Date(t)}function sn(e,t){return Jn(t||e,e)}let hx={};function si(){return hx}function jo(e,t){var l,u,d,h;const n=si(),r=(t==null?void 0:t.weekStartsOn)??((u=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,o=sn(e,t==null?void 0:t.in),i=o.getDay(),s=(i<r?7:0)+i-r;return o.setDate(o.getDate()-s),o.setHours(0,0,0,0),o}function Ba(e,t){return jo(e,{...t,weekStartsOn:1})}function Wf(e,t){const n=sn(e,t==null?void 0:t.in),r=n.getFullYear(),o=Jn(n,0);o.setFullYear(r+1,0,4),o.setHours(0,0,0,0);const i=Ba(o),s=Jn(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const l=Ba(s);return n.getTime()>=i.getTime()?r+1:n.getTime()>=l.getTime()?r:r-1}function su(e){const t=sn(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function mx(e,...t){const n=Jn.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function cu(e,t){const n=sn(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function px(e,t,n){const[r,o]=mx(n==null?void 0:n.in,e,t),i=cu(r),s=cu(o),l=+i-su(i),u=+s-su(s);return Math.round((l-u)/fx)}function gx(e,t){const n=Wf(e,t),r=Jn(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Ba(r)}function yx(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function vx(e){return!(!yx(e)&&typeof e!="number"||isNaN(+sn(e)))}function wx(e,t){const n=sn(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const bx={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},xx=(e,t,n)=>{let r;const o=bx[e];return typeof o=="string"?r=o:t===1?r=o.one:r=o.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function es(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Sx={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},kx={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ex={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_x={date:es({formats:Sx,defaultWidth:"full"}),time:es({formats:kx,defaultWidth:"full"}),dateTime:es({formats:Ex,defaultWidth:"full"})},Nx={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Tx=(e,t,n,r)=>Nx[e];function fo(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let o;if(r==="formatting"&&e.formattingValues){const s=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):s;o=e.formattingValues[l]||e.formattingValues[s]}else{const s=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;o=e.values[l]||e.values[s]}const i=e.argumentCallback?e.argumentCallback(t):t;return o[i]}}const Cx={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Dx={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ox={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},jx={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Px={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ix={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Mx=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Ax={ordinalNumber:Mx,era:fo({values:Cx,defaultWidth:"wide"}),quarter:fo({values:Dx,defaultWidth:"wide",argumentCallback:e=>e-1}),month:fo({values:Ox,defaultWidth:"wide"}),day:fo({values:jx,defaultWidth:"wide"}),dayPeriod:fo({values:Px,defaultWidth:"wide",formattingValues:Ix,defaultFormattingWidth:"wide"})};function ho(e){return(t,n={})=>{const r=n.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(o);if(!i)return null;const s=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(l)?Rx(l,p=>p.test(s)):$x(l,p=>p.test(s));let d;d=e.valueCallback?e.valueCallback(u):u,d=n.valueCallback?n.valueCallback(d):d;const h=t.slice(s.length);return{value:d,rest:h}}}function $x(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Rx(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Lx(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const o=r[0],i=t.match(e.parsePattern);if(!i)return null;let s=e.valueCallback?e.valueCallback(i[0]):i[0];s=n.valueCallback?n.valueCallback(s):s;const l=t.slice(o.length);return{value:s,rest:l}}}const Fx=/^(\d+)(th|st|nd|rd)?/i,Wx=/\d+/i,Bx={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Hx={any:[/^b/i,/^(a|c)/i]},zx={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Yx={any:[/1/i,/2/i,/3/i,/4/i]},Vx={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},qx={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Kx={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ux={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Xx={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Gx={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Zx={ordinalNumber:Lx({matchPattern:Fx,parsePattern:Wx,valueCallback:e=>parseInt(e,10)}),era:ho({matchPatterns:Bx,defaultMatchWidth:"wide",parsePatterns:Hx,defaultParseWidth:"any"}),quarter:ho({matchPatterns:zx,defaultMatchWidth:"wide",parsePatterns:Yx,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ho({matchPatterns:Vx,defaultMatchWidth:"wide",parsePatterns:qx,defaultParseWidth:"any"}),day:ho({matchPatterns:Kx,defaultMatchWidth:"wide",parsePatterns:Ux,defaultParseWidth:"any"}),dayPeriod:ho({matchPatterns:Xx,defaultMatchWidth:"any",parsePatterns:Gx,defaultParseWidth:"any"})},Qx={code:"en-US",formatDistance:xx,formatLong:_x,formatRelative:Tx,localize:Ax,match:Zx,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Jx(e,t){const n=sn(e,t==null?void 0:t.in);return px(n,wx(n))+1}function e1(e,t){const n=sn(e,t==null?void 0:t.in),r=+Ba(n)-+gx(n);return Math.round(r/Ff)+1}function Bf(e,t){var h,p,v,y;const n=sn(e,t==null?void 0:t.in),r=n.getFullYear(),o=si(),i=(t==null?void 0:t.firstWeekContainsDate)??((p=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??o.firstWeekContainsDate??((y=(v=o.locale)==null?void 0:v.options)==null?void 0:y.firstWeekContainsDate)??1,s=Jn((t==null?void 0:t.in)||e,0);s.setFullYear(r+1,0,i),s.setHours(0,0,0,0);const l=jo(s,t),u=Jn((t==null?void 0:t.in)||e,0);u.setFullYear(r,0,i),u.setHours(0,0,0,0);const d=jo(u,t);return+n>=+l?r+1:+n>=+d?r:r-1}function t1(e,t){var l,u,d,h;const n=si(),r=(t==null?void 0:t.firstWeekContainsDate)??((u=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=Bf(e,t),i=Jn((t==null?void 0:t.in)||e,0);return i.setFullYear(o,0,r),i.setHours(0,0,0,0),jo(i,t)}function n1(e,t){const n=sn(e,t==null?void 0:t.in),r=+jo(n,t)-+t1(n,t);return Math.round(r/Ff)+1}function Ze(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Yn={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Ze(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Ze(n+1,2)},d(e,t){return Ze(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Ze(e.getHours()%12||12,t.length)},H(e,t){return Ze(e.getHours(),t.length)},m(e,t){return Ze(e.getMinutes(),t.length)},s(e,t){return Ze(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),o=Math.trunc(r*Math.pow(10,n-3));return Ze(o,t.length)}},Pr={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},lu={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return Yn.y(e,t)},Y:function(e,t,n,r){const o=Bf(e,r),i=o>0?o:1-o;if(t==="YY"){const s=i%100;return Ze(s,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):Ze(i,t.length)},R:function(e,t){const n=Wf(e);return Ze(n,t.length)},u:function(e,t){const n=e.getFullYear();return Ze(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Ze(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Ze(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Yn.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Ze(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const o=n1(e,r);return t==="wo"?n.ordinalNumber(o,{unit:"week"}):Ze(o,t.length)},I:function(e,t,n){const r=e1(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Ze(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Yn.d(e,t)},D:function(e,t,n){const r=Jx(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ze(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const o=e.getDay(),i=(o-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Ze(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const o=e.getDay(),i=(o-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Ze(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),o=r===0?7:r;switch(t){case"i":return String(o);case"ii":return Ze(o,t.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const o=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let o;switch(r===12?o=Pr.noon:r===0?o=Pr.midnight:o=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let o;switch(r>=17?o=Pr.evening:r>=12?o=Pr.afternoon:r>=4?o=Pr.morning:o=Pr.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Yn.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Yn.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ze(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ze(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Yn.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Yn.s(e,t)},S:function(e,t){return Yn.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return du(r);case"XXXX":case"XX":return cr(r);case"XXXXX":case"XXX":default:return cr(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return du(r);case"xxxx":case"xx":return cr(r);case"xxxxx":case"xxx":default:return cr(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+uu(r,":");case"OOOO":default:return"GMT"+cr(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+uu(r,":");case"zzzz":default:return"GMT"+cr(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return Ze(r,t.length)},T:function(e,t,n){return Ze(+e,t.length)}};function uu(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),o=Math.trunc(r/60),i=r%60;return i===0?n+String(o):n+String(o)+t+Ze(i,2)}function du(e,t){return e%60===0?(e>0?"-":"+")+Ze(Math.abs(e)/60,2):cr(e,t)}function cr(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),o=Ze(Math.trunc(r/60),2),i=Ze(r%60,2);return n+o+t+i}const fu=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Hf=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},r1=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],o=n[2];if(!o)return fu(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",fu(r,t)).replace("{{time}}",Hf(o,t))},o1={p:Hf,P:r1},a1=/^D+$/,i1=/^Y+$/,s1=["D","DD","YY","YYYY"];function c1(e){return a1.test(e)}function l1(e){return i1.test(e)}function u1(e,t,n){const r=d1(e,t,n);if(console.warn(r),s1.includes(e))throw new RangeError(r)}function d1(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const f1=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,h1=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,m1=/^'([^]*?)'?$/,p1=/''/g,g1=/[a-zA-Z]/;function Rt(e,t,n){var h,p,v,y;const r=si(),o=r.locale??Qx,i=r.firstWeekContainsDate??((p=(h=r.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,s=r.weekStartsOn??((y=(v=r.locale)==null?void 0:v.options)==null?void 0:y.weekStartsOn)??0,l=sn(e,n==null?void 0:n.in);if(!vx(l))throw new RangeError("Invalid time value");let u=t.match(h1).map(k=>{const S=k[0];if(S==="p"||S==="P"){const N=o1[S];return N(k,o.formatLong)}return k}).join("").match(f1).map(k=>{if(k==="''")return{isToken:!1,value:"'"};const S=k[0];if(S==="'")return{isToken:!1,value:y1(k)};if(lu[S])return{isToken:!0,value:k};if(S.match(g1))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:k}});o.localize.preprocessor&&(u=o.localize.preprocessor(l,u));const d={firstWeekContainsDate:i,weekStartsOn:s,locale:o};return u.map(k=>{if(!k.isToken)return k.value;const S=k.value;(l1(S)||c1(S))&&u1(S,t,String(e));const N=lu[S[0]];return N(l,S,o.localize,d)}).join("")}function y1(e){const t=e.match(m1);return t?t[1].replace(p1,"'"):e}const v1=(e,t,n,r)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;const o=Object.getOwnPropertyDescriptor(e,n),i=Object.getOwnPropertyDescriptor(t,n);!w1(o,i)&&r||Object.defineProperty(e,n,i)},w1=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},b1=(e,t)=>{const n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)},x1=(e,t)=>`/* Wrapped ${e}*/
${t}`,S1=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),k1=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),E1=(e,t,n)=>{const r=n===""?"":`with ${n.trim()}() `,o=x1.bind(null,r,t.toString());Object.defineProperty(o,"name",k1),Object.defineProperty(e,"toString",{...S1,value:o})},_1=(e,t,{ignoreNonConfigurable:n=!1}={})=>{const{name:r}=e;for(const o of Reflect.ownKeys(t))v1(e,t,o,n);return b1(e,t),E1(e,t,r),e};var N1=_1,Ms={exports:{}},T1=()=>{const e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e};(function(e,t){var n=Ir&&Ir.__awaiter||function(s,l,u,d){return new(u||(u=Promise))(function(h,p){function v(S){try{k(d.next(S))}catch(N){p(N)}}function y(S){try{k(d.throw(S))}catch(N){p(N)}}function k(S){S.done?h(S.value):new u(function(N){N(S.value)}).then(v,y)}k((d=d.apply(s,l||[])).next())})},r=Ir&&Ir.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(T1);function i(s,l="maxAge"){let u,d,h;const p=()=>n(this,void 0,void 0,function*(){if(u!==void 0)return;const k=S=>n(this,void 0,void 0,function*(){h=o.default();const N=S[1][l]-Date.now();if(N<=0){s.delete(S[0]),h.resolve();return}return u=S[0],d=setTimeout(()=>{s.delete(S[0]),h&&h.resolve()},N),typeof d.unref=="function"&&d.unref(),h.promise});try{for(const S of s)yield k(S)}catch{}u=void 0}),v=()=>{u=void 0,d!==void 0&&(clearTimeout(d),d=void 0),h!==void 0&&(h.reject(void 0),h=void 0)},y=s.set.bind(s);return s.set=(k,S)=>{s.has(k)&&s.delete(k);const N=y(k,S);return u&&u===k&&v(),p(),N},p(),s}t.default=i,e.exports=i,e.exports.default=i})(Ms,Ms.exports);var C1=Ms.exports;const D1=N1,O1=C1,ts=new WeakMap,zf=new WeakMap,Ha=(e,{cacheKey:t,cache:n=new Map,maxAge:r}={})=>{typeof r=="number"&&O1(n);const o=function(...i){const s=t?t(i):i[0],l=n.get(s);if(l)return l.data;const u=e.apply(this,i);return n.set(s,{data:u,maxAge:r?Date.now()+r:Number.POSITIVE_INFINITY}),u};return D1(o,e,{ignoreNonConfigurable:!0}),zf.set(o,n),o};Ha.decorator=(e={})=>(t,n,r)=>{const o=t[n];if(typeof o!="function")throw new TypeError("The decorated value must be a function");delete r.value,delete r.writable,r.get=function(){if(!ts.has(this)){const i=Ha(o,e);return ts.set(this,i),i}return ts.get(this)}};Ha.clear=e=>{const t=zf.get(e);if(!t)throw new TypeError("Can't clear a function that was not memoized!");if(typeof t.clear!="function")throw new TypeError("The cache Map can't be cleared!");t.clear()};var j1=Ha;const Yf=Qs(j1);function P1(e){return typeof e=="string"}function I1(e,t,n){return n.indexOf(e)===t}function M1(e){return e.toLowerCase()===e}function hu(e){return e.indexOf(",")===-1?e:e.split(",")}function As(e){if(!e)return e;if(e==="C"||e==="posix"||e==="POSIX")return"en-US";if(e.indexOf(".")!==-1){var t=e.split(".")[0],n=t===void 0?"":t;return As(n)}if(e.indexOf("@")!==-1){var r=e.split("@")[0],n=r===void 0?"":r;return As(n)}if(e.indexOf("-")===-1||!M1(e))return e;var o=e.split("-"),i=o[0],s=o[1],l=s===void 0?"":s;return"".concat(i,"-").concat(l.toUpperCase())}function A1(e){var t=e===void 0?{}:e,n=t.useFallbackLocale,r=n===void 0?!0:n,o=t.fallbackLocale,i=o===void 0?"en-US":o,s=[];if(typeof navigator<"u"){for(var l=navigator.languages||[],u=[],d=0,h=l;d<h.length;d++){var p=h[d];u=u.concat(hu(p))}var v=navigator.language,y=v&&hu(v);s=s.concat(u,y)}return r&&s.push(i),s.filter(P1).map(As).filter(I1)}var $1=Yf(A1,{cacheKey:JSON.stringify});function R1(e){return $1(e)[0]||null}var Vf=Yf(R1,{cacheKey:JSON.stringify});function Mn(e,t,n){return function(o,i){i===void 0&&(i=n);var s=e(o)+i;return t(s)}}function Wo(e){return function(n){return new Date(e(n).getTime()-1)}}function Bo(e,t){return function(r){return[e(r),t(r)]}}function it(e){if(e instanceof Date)return e.getFullYear();if(typeof e=="number")return e;var t=parseInt(e,10);if(typeof e=="string"&&!isNaN(t))return t;throw new Error("Failed to get year from date: ".concat(e,"."))}function tr(e){if(e instanceof Date)return e.getMonth();throw new Error("Failed to get month from date: ".concat(e,"."))}function ci(e){if(e instanceof Date)return e.getDate();throw new Error("Failed to get year from date: ".concat(e,"."))}function Vr(e){var t=it(e),n=t+(-t+1)%100,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var L1=Mn(it,Vr,-100),qf=Mn(it,Vr,100),kc=Wo(qf),F1=Mn(it,kc,-100),Kf=Bo(Vr,kc);function nr(e){var t=it(e),n=t+(-t+1)%10,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var Uf=Mn(it,nr,-10),Ec=Mn(it,nr,10),li=Wo(Ec),Xf=Mn(it,li,-10),Gf=Bo(nr,li);function qr(e){var t=it(e),n=new Date;return n.setFullYear(t,0,1),n.setHours(0,0,0,0),n}var Zf=Mn(it,qr,-1),_c=Mn(it,qr,1),ui=Wo(_c),Qf=Mn(it,ui,-1),W1=Bo(qr,ui);function Nc(e,t){return function(r,o){o===void 0&&(o=t);var i=it(r),s=tr(r)+o,l=new Date;return l.setFullYear(i,s,1),l.setHours(0,0,0,0),e(l)}}function xr(e){var t=it(e),n=tr(e),r=new Date;return r.setFullYear(t,n,1),r.setHours(0,0,0,0),r}var Jf=Nc(xr,-1),Tc=Nc(xr,1),Ho=Wo(Tc),eh=Nc(Ho,-1),B1=Bo(xr,Ho);function H1(e,t){return function(r,o){o===void 0&&(o=t);var i=it(r),s=tr(r),l=ci(r)+o,u=new Date;return u.setFullYear(i,s,l),u.setHours(0,0,0,0),e(u)}}function zo(e){var t=it(e),n=tr(e),r=ci(e),o=new Date;return o.setFullYear(t,n,r),o.setHours(0,0,0,0),o}var z1=H1(zo,1),Cc=Wo(z1),Y1=Bo(zo,Cc);function th(e){return ci(Ho(e))}var Et={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},V1={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},Dc=[0,1,2,3,4,5,6],ns=new Map;function q1(e){return function(n,r){var o=n||Vf();ns.has(o)||ns.set(o,new Map);var i=ns.get(o);return i.has(e)||i.set(e,new Intl.DateTimeFormat(o||void 0,e).format),i.get(e)(r)}}function K1(e){var t=new Date(e);return new Date(t.setHours(12))}function Sr(e){return function(t,n){return q1(e)(t,K1(n))}}var U1={day:"numeric"},X1={day:"numeric",month:"long",year:"numeric"},G1={month:"long"},Z1={month:"long",year:"numeric"},Q1={weekday:"short"},J1={weekday:"long"},eS={year:"numeric"},tS=Sr(U1),nS=Sr(X1),rS=Sr(G1),nh=Sr(Z1),oS=Sr(Q1),aS=Sr(J1),di=Sr(eS),iS=Dc[0],sS=Dc[5],mu=Dc[6];function Po(e,t){t===void 0&&(t=Et.ISO_8601);var n=e.getDay();switch(t){case Et.ISO_8601:return(n+6)%7;case Et.ISLAMIC:return(n+1)%7;case Et.HEBREW:case Et.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function cS(e){var t=Vr(e);return it(t)}function lS(e){var t=nr(e);return it(t)}function $s(e,t){t===void 0&&(t=Et.ISO_8601);var n=it(e),r=tr(e),o=e.getDate()-Po(e,t);return new Date(n,r,o)}function uS(e,t){t===void 0&&(t=Et.ISO_8601);var n=t===Et.GREGORY?Et.GREGORY:Et.ISO_8601,r=$s(e,t),o=it(e)+1,i,s;do i=new Date(o,0,n===Et.ISO_8601?4:1),s=$s(i,t),o-=1;while(e<s);return Math.round((r.getTime()-s.getTime())/(864e5*7))+1}function yr(e,t){switch(e){case"century":return Vr(t);case"decade":return nr(t);case"year":return qr(t);case"month":return xr(t);case"day":return zo(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function dS(e,t){switch(e){case"century":return L1(t);case"decade":return Uf(t);case"year":return Zf(t);case"month":return Jf(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function rh(e,t){switch(e){case"century":return qf(t);case"decade":return Ec(t);case"year":return _c(t);case"month":return Tc(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function fS(e,t){switch(e){case"decade":return Uf(t,-100);case"year":return Zf(t,-10);case"month":return Jf(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function hS(e,t){switch(e){case"decade":return Ec(t,100);case"year":return _c(t,10);case"month":return Tc(t,12);default:throw new Error("Invalid rangeType: ".concat(e))}}function oh(e,t){switch(e){case"century":return kc(t);case"decade":return li(t);case"year":return ui(t);case"month":return Ho(t);case"day":return Cc(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function mS(e,t){switch(e){case"century":return F1(t);case"decade":return Xf(t);case"year":return Qf(t);case"month":return eh(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function pS(e,t){switch(e){case"decade":return Xf(t,-100);case"year":return Qf(t,-10);case"month":return eh(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function pu(e,t){switch(e){case"century":return Kf(t);case"decade":return Gf(t);case"year":return W1(t);case"month":return B1(t);case"day":return Y1(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function gS(e,t,n){var r=[t,n].sort(function(o,i){return o.getTime()-i.getTime()});return[yr(e,r[0]),oh(e,r[1])]}function ah(e,t,n){return n.map(function(r){return(t||di)(e,r)}).join(" – ")}function yS(e,t,n){return ah(e,t,Kf(n))}function ih(e,t,n){return ah(e,t,Gf(n))}function vS(e){return e.getDay()===new Date().getDay()}function sh(e,t){t===void 0&&(t=Et.ISO_8601);var n=e.getDay();switch(t){case Et.ISLAMIC:case Et.HEBREW:return n===sS||n===mu;case Et.ISO_8601:case Et.GREGORY:return n===mu||n===iS;default:throw new Error("Unsupported calendar type.")}}var pn="react-calendar__navigation";function wS(e){var t=e.activeStartDate,n=e.drillUp,r=e.formatMonthYear,o=r===void 0?nh:r,i=e.formatYear,s=i===void 0?di:i,l=e.locale,u=e.maxDate,d=e.minDate,h=e.navigationAriaLabel,p=h===void 0?"":h,v=e.navigationAriaLive,y=e.navigationLabel,k=e.next2AriaLabel,S=k===void 0?"":k,N=e.next2Label,T=N===void 0?"»":N,$=e.nextAriaLabel,I=$===void 0?"":$,C=e.nextLabel,X=C===void 0?"›":C,q=e.prev2AriaLabel,H=q===void 0?"":q,ee=e.prev2Label,K=ee===void 0?"«":ee,ne=e.prevAriaLabel,U=ne===void 0?"":ne,ie=e.prevLabel,ce=ie===void 0?"‹":ie,E=e.setActiveStartDate,z=e.showDoubleView,D=e.view,Q=e.views,J=Q.indexOf(D)>0,j=D!=="century",G=dS(D,t),se=j?fS(D,t):void 0,ae=rh(D,t),de=j?hS(D,t):void 0,we=function(){if(G.getFullYear()<0)return!0;var $e=mS(D,t);return d&&d>=$e}(),ke=j&&function(){if(se.getFullYear()<0)return!0;var $e=pS(D,t);return d&&d>=$e}(),Ne=u&&u<ae,De=j&&u&&u<de;function Pe(){E(G,"prev")}function fe(){E(se,"prev2")}function Me(){E(ae,"next")}function Ue(){E(de,"next2")}function je($e){var ze=function(){switch(D){case"century":return yS(l,s,$e);case"decade":return ih(l,s,$e);case"year":return s(l,$e);case"month":return o(l,$e);default:throw new Error("Invalid view: ".concat(D,"."))}}();return y?y({date:$e,label:ze,locale:l||Vf()||void 0,view:D}):ze}function Je(){var $e="".concat(pn,"__label");return g.jsxs("button",{"aria-label":p,"aria-live":v,className:$e,disabled:!J,onClick:n,style:{flexGrow:1},type:"button",children:[g.jsx("span",{className:"".concat($e,"__labelText ").concat($e,"__labelText--from"),children:je(t)}),z?g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"".concat($e,"__divider"),children:" – "}),g.jsx("span",{className:"".concat($e,"__labelText ").concat($e,"__labelText--to"),children:je(ae)})]}):null]})}return g.jsxs("div",{className:pn,children:[K!==null&&j?g.jsx("button",{"aria-label":H,className:"".concat(pn,"__arrow ").concat(pn,"__prev2-button"),disabled:ke,onClick:fe,type:"button",children:K}):null,ce!==null&&g.jsx("button",{"aria-label":U,className:"".concat(pn,"__arrow ").concat(pn,"__prev-button"),disabled:we,onClick:Pe,type:"button",children:ce}),Je(),X!==null&&g.jsx("button",{"aria-label":I,className:"".concat(pn,"__arrow ").concat(pn,"__next-button"),disabled:Ne,onClick:Me,type:"button",children:X}),T!==null&&j?g.jsx("button",{"aria-label":S,className:"".concat(pn,"__arrow ").concat(pn,"__next2-button"),disabled:De,onClick:Ue,type:"button",children:T}):null]})}var Ar=function(){return Ar=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ar.apply(this,arguments)},bS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function gu(e){return"".concat(e,"%")}function Oc(e){var t=e.children,n=e.className,r=e.count,o=e.direction,i=e.offset,s=e.style,l=e.wrap,u=bS(e,["children","className","count","direction","offset","style","wrap"]);return g.jsx("div",Ar({className:n,style:Ar({display:"flex",flexDirection:o,flexWrap:l?"wrap":"nowrap"},s)},u,{children:b.Children.map(t,function(d,h){var p=i&&h===0?gu(100*i/r):null;return b.cloneElement(d,Ar(Ar({},d.props),{style:{flexBasis:gu(100/r),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:p,marginInlineStart:p,marginInlineEnd:0}}))})}))}function xS(e,t,n){return t&&t>e?t:n&&n<e?n:e}function Io(e,t){return t[0]<=e&&t[1]>=e}function SS(e,t){return e[0]<=t[0]&&e[1]>=t[1]}function ch(e,t){return Io(e[0],t)||Io(e[1],t)}function yu(e,t,n){var r=ch(t,e),o=[];if(r){o.push(n);var i=Io(e[0],t),s=Io(e[1],t);i&&o.push("".concat(n,"Start")),s&&o.push("".concat(n,"End")),i&&s&&o.push("".concat(n,"BothEnds"))}return o}function kS(e){return Array.isArray(e)?e[0]!==null&&e[1]!==null:e!==null}function ES(e){if(!e)throw new Error("args is required");var t=e.value,n=e.date,r=e.hover,o="react-calendar__tile",i=[o];if(!n)return i;var s=new Date,l=function(){if(Array.isArray(n))return n;var y=e.dateType;if(!y)throw new Error("dateType is required when date is not an array of two dates");return pu(y,n)}();if(Io(s,l)&&i.push("".concat(o,"--now")),!t||!kS(t))return i;var u=function(){if(Array.isArray(t))return t;var y=e.valueType;if(!y)throw new Error("valueType is required when value is not an array of two dates");return pu(y,t)}();SS(u,l)?i.push("".concat(o,"--active")):ch(u,l)&&i.push("".concat(o,"--hasActive"));var d=yu(u,l,"".concat(o,"--range"));i.push.apply(i,d);var h=Array.isArray(t)?t:[t];if(r&&h.length===1){var p=r>u[0]?[u[0],r]:[r,u[0]],v=yu(p,l,"".concat(o,"--hover"));i.push.apply(i,v)}return i}function fi(e){for(var t=e.className,n=e.count,r=n===void 0?3:n,o=e.dateTransform,i=e.dateType,s=e.end,l=e.hover,u=e.offset,d=e.renderTile,h=e.start,p=e.step,v=p===void 0?1:p,y=e.value,k=e.valueType,S=[],N=h;N<=s;N+=v){var T=o(N);S.push(d({classes:ES({date:T,dateType:i,hover:l,value:y,valueType:k}),date:T}))}return g.jsx(Oc,{className:t,count:r,offset:u,wrap:!0,children:S})}function hi(e){var t=e.activeStartDate,n=e.children,r=e.classes,o=e.date,i=e.formatAbbr,s=e.locale,l=e.maxDate,u=e.maxDateTransform,d=e.minDate,h=e.minDateTransform,p=e.onClick,v=e.onMouseOver,y=e.style,k=e.tileClassName,S=e.tileContent,N=e.tileDisabled,T=e.view,$=b.useMemo(function(){var C={activeStartDate:t,date:o,view:T};return typeof k=="function"?k(C):k},[t,o,k,T]),I=b.useMemo(function(){var C={activeStartDate:t,date:o,view:T};return typeof S=="function"?S(C):S},[t,o,S,T]);return g.jsxs("button",{className:Bt(r,$),disabled:d&&h(d)>o||l&&u(l)<o||(N==null?void 0:N({activeStartDate:t,date:o,view:T})),onClick:p?function(C){return p(o,C)}:void 0,onFocus:v?function(){return v(o)}:void 0,onMouseOver:v?function(){return v(o)}:void 0,style:y,type:"button",children:[i?g.jsx("abbr",{"aria-label":i(s,o),children:n}):n,I]})}var Rs=function(){return Rs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Rs.apply(this,arguments)},_S=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},vu="react-calendar__century-view__decades__decade";function NS(e){var t=e.classes,n=t===void 0?[]:t,r=e.currentCentury,o=e.formatYear,i=o===void 0?di:o,s=_S(e,["classes","currentCentury","formatYear"]),l=s.date,u=s.locale,d=[];return n&&d.push.apply(d,n),d.push(vu),Vr(l).getFullYear()!==r&&d.push("".concat(vu,"--neighboringCentury")),g.jsx(hi,Rs({},s,{classes:d,maxDateTransform:li,minDateTransform:nr,view:"century",children:ih(u,i,l)}))}var Ls=function(){return Ls=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ls.apply(this,arguments)},wu=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function TS(e){var t=e.activeStartDate,n=e.hover,r=e.showNeighboringCentury,o=e.value,i=e.valueType,s=wu(e,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),l=cS(t),u=l+(r?119:99);return g.jsx(fi,{className:"react-calendar__century-view__decades",dateTransform:nr,dateType:"decade",end:u,hover:n,renderTile:function(d){var h=d.date,p=wu(d,["date"]);return g.jsx(NS,Ls({},s,p,{activeStartDate:t,currentCentury:l,date:h}),h.getTime())},start:l,step:10,value:o,valueType:i})}var Fs=function(){return Fs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Fs.apply(this,arguments)};function CS(e){function t(){return g.jsx(TS,Fs({},e))}return g.jsx("div",{className:"react-calendar__century-view",children:t()})}var Ws=function(){return Ws=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ws.apply(this,arguments)},DS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},bu="react-calendar__decade-view__years__year";function OS(e){var t=e.classes,n=t===void 0?[]:t,r=e.currentDecade,o=e.formatYear,i=o===void 0?di:o,s=DS(e,["classes","currentDecade","formatYear"]),l=s.date,u=s.locale,d=[];return n&&d.push.apply(d,n),d.push(bu),nr(l).getFullYear()!==r&&d.push("".concat(bu,"--neighboringDecade")),g.jsx(hi,Ws({},s,{classes:d,maxDateTransform:ui,minDateTransform:qr,view:"decade",children:i(u,l)}))}var Bs=function(){return Bs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Bs.apply(this,arguments)},xu=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function jS(e){var t=e.activeStartDate,n=e.hover,r=e.showNeighboringDecade,o=e.value,i=e.valueType,s=xu(e,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),l=lS(t),u=l+(r?11:9);return g.jsx(fi,{className:"react-calendar__decade-view__years",dateTransform:qr,dateType:"year",end:u,hover:n,renderTile:function(d){var h=d.date,p=xu(d,["date"]);return g.jsx(OS,Bs({},s,p,{activeStartDate:t,currentDecade:l,date:h}),h.getTime())},start:l,value:o,valueType:i})}var Hs=function(){return Hs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Hs.apply(this,arguments)};function PS(e){function t(){return g.jsx(jS,Hs({},e))}return g.jsx("div",{className:"react-calendar__decade-view",children:t()})}var zs=function(){return zs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},zs.apply(this,arguments)},IS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},Su=function(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},MS="react-calendar__year-view__months__month";function AS(e){var t=e.classes,n=t===void 0?[]:t,r=e.formatMonth,o=r===void 0?rS:r,i=e.formatMonthYear,s=i===void 0?nh:i,l=IS(e,["classes","formatMonth","formatMonthYear"]),u=l.date,d=l.locale;return g.jsx(hi,zs({},l,{classes:Su(Su([],n,!0),[MS],!1),formatAbbr:s,maxDateTransform:Ho,minDateTransform:xr,view:"year",children:o(d,u)}))}var Ys=function(){return Ys=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ys.apply(this,arguments)},ku=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function $S(e){var t=e.activeStartDate,n=e.hover,r=e.value,o=e.valueType,i=ku(e,["activeStartDate","hover","value","valueType"]),s=0,l=11,u=it(t);return g.jsx(fi,{className:"react-calendar__year-view__months",dateTransform:function(d){var h=new Date;return h.setFullYear(u,d,1),xr(h)},dateType:"month",end:l,hover:n,renderTile:function(d){var h=d.date,p=ku(d,["date"]);return g.jsx(AS,Ys({},i,p,{activeStartDate:t,date:h}),h.getTime())},start:s,value:r,valueType:o})}var Vs=function(){return Vs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Vs.apply(this,arguments)};function RS(e){function t(){return g.jsx($S,Vs({},e))}return g.jsx("div",{className:"react-calendar__year-view",children:t()})}var qs=function(){return qs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},qs.apply(this,arguments)},LS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},rs="react-calendar__month-view__days__day";function FS(e){var t=e.calendarType,n=e.classes,r=n===void 0?[]:n,o=e.currentMonthIndex,i=e.formatDay,s=i===void 0?tS:i,l=e.formatLongDate,u=l===void 0?nS:l,d=LS(e,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),h=d.date,p=d.locale,v=[];return r&&v.push.apply(v,r),v.push(rs),sh(h,t)&&v.push("".concat(rs,"--weekend")),h.getMonth()!==o&&v.push("".concat(rs,"--neighboringMonth")),g.jsx(hi,qs({},d,{classes:v,formatAbbr:u,maxDateTransform:Cc,minDateTransform:zo,view:"month",children:s(p,h)}))}var Ks=function(){return Ks=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ks.apply(this,arguments)},Eu=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function WS(e){var t=e.activeStartDate,n=e.calendarType,r=e.hover,o=e.showFixedNumberOfWeeks,i=e.showNeighboringMonth,s=e.value,l=e.valueType,u=Eu(e,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),d=it(t),h=tr(t),p=o||i,v=Po(t,n),y=p?0:v,k=(p?-v:0)+1,S=function(){if(o)return k+6*7-1;var N=th(t);if(i){var T=new Date;T.setFullYear(d,h,N),T.setHours(0,0,0,0);var $=7-Po(T,n)-1;return N+$}return N}();return g.jsx(fi,{className:"react-calendar__month-view__days",count:7,dateTransform:function(N){var T=new Date;return T.setFullYear(d,h,N),zo(T)},dateType:"day",hover:r,end:S,renderTile:function(N){var T=N.date,$=Eu(N,["date"]);return g.jsx(FS,Ks({},u,$,{activeStartDate:t,calendarType:n,currentMonthIndex:h,date:T}),T.getTime())},offset:y,start:k,value:s,valueType:l})}var lh="react-calendar__month-view__weekdays",os="".concat(lh,"__weekday");function BS(e){for(var t=e.calendarType,n=e.formatShortWeekday,r=n===void 0?oS:n,o=e.formatWeekday,i=o===void 0?aS:o,s=e.locale,l=e.onMouseLeave,u=new Date,d=xr(u),h=it(d),p=tr(d),v=[],y=1;y<=7;y+=1){var k=new Date(h,p,y-Po(d,t)),S=i(s,k);v.push(g.jsx("div",{className:Bt(os,vS(k)&&"".concat(os,"--current"),sh(k,t)&&"".concat(os,"--weekend")),children:g.jsx("abbr",{"aria-label":S,title:S,children:r(s,k).replace(".","")})},y))}return g.jsx(Oc,{className:lh,count:7,onFocus:l,onMouseOver:l,children:v})}var za=function(){return za=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},za.apply(this,arguments)},_u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},Nu="react-calendar__tile";function HS(e){var t=e.onClickWeekNumber,n=e.weekNumber,r=g.jsx("span",{children:n});if(t){var o=e.date,i=e.onClickWeekNumber,s=e.weekNumber,l=_u(e,["date","onClickWeekNumber","weekNumber"]);return g.jsx("button",za({},l,{className:Nu,onClick:function(u){return i(s,o,u)},type:"button",children:r}))}else{e.date,e.onClickWeekNumber,e.weekNumber;var l=_u(e,["date","onClickWeekNumber","weekNumber"]);return g.jsx("div",za({},l,{className:Nu,children:r}))}}function zS(e){var t=e.activeStartDate,n=e.calendarType,r=e.onClickWeekNumber,o=e.onMouseLeave,i=e.showFixedNumberOfWeeks,s=function(){if(i)return 6;var d=th(t),h=Po(t,n),p=d-(7-h);return 1+Math.ceil(p/7)}(),l=function(){for(var d=it(t),h=tr(t),p=ci(t),v=[],y=0;y<s;y+=1)v.push($s(new Date(d,h,p+y*7),n));return v}(),u=l.map(function(d){return uS(d,n)});return g.jsx(Oc,{className:"react-calendar__month-view__weekNumbers",count:s,direction:"column",onFocus:o,onMouseOver:o,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:u.map(function(d,h){var p=l[h];if(!p)throw new Error("date is not defined");return g.jsx(HS,{date:p,onClickWeekNumber:r,weekNumber:d},d)})})}var Us=function(){return Us=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Us.apply(this,arguments)},YS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function VS(e){if(e)for(var t=0,n=Object.entries(V1);t<n.length;t++){var r=n[t],o=r[0],i=r[1];if(i.includes(e))return o}return Et.ISO_8601}function qS(e){var t=e.activeStartDate,n=e.locale,r=e.onMouseLeave,o=e.showFixedNumberOfWeeks,i=e.calendarType,s=i===void 0?VS(n):i,l=e.formatShortWeekday,u=e.formatWeekday,d=e.onClickWeekNumber,h=e.showWeekNumbers,p=YS(e,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function v(){return g.jsx(BS,{calendarType:s,formatShortWeekday:l,formatWeekday:u,locale:n,onMouseLeave:r})}function y(){return h?g.jsx(zS,{activeStartDate:t,calendarType:s,onClickWeekNumber:d,onMouseLeave:r,showFixedNumberOfWeeks:o}):null}function k(){return g.jsx(WS,Us({calendarType:s},p))}var S="react-calendar__month-view";return g.jsx("div",{className:Bt(S,h?"".concat(S,"--weekNumbers"):""),children:g.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[y(),g.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[v(),k()]})]})})}var $r=function(){return $r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},$r.apply(this,arguments)},xa="react-calendar",Ca=["century","decade","year","month"],KS=["decade","year","month","day"],jc=new Date;jc.setFullYear(1,0,1);jc.setHours(0,0,0,0);var US=new Date(864e13);function vo(e){return e instanceof Date?e:new Date(e)}function uh(e,t){return Ca.slice(Ca.indexOf(e),Ca.indexOf(t)+1)}function XS(e,t,n){var r=uh(t,n);return r.indexOf(e)!==-1}function Pc(e,t,n){return e&&XS(e,t,n)?e:n}function dh(e){var t=Ca.indexOf(e);return KS[t]}function GS(e,t){var n=Array.isArray(e)?e[t]:e;if(!n)return null;var r=vo(n);if(Number.isNaN(r.getTime()))throw new Error("Invalid date: ".concat(e));return r}function fh(e,t){var n=e.value,r=e.minDate,o=e.maxDate,i=e.maxDetail,s=GS(n,t);if(!s)return null;var l=dh(i),u=function(){switch(t){case 0:return yr(l,s);case 1:return oh(l,s);default:throw new Error("Invalid index value: ".concat(t))}}();return xS(u,r,o)}var Ic=function(e){return fh(e,0)},hh=function(e){return fh(e,1)},ZS=function(e){return[Ic,hh].map(function(t){return t(e)})};function mh(e){var t=e.maxDate,n=e.maxDetail,r=e.minDate,o=e.minDetail,i=e.value,s=e.view,l=Pc(s,o,n),u=Ic({value:i,minDate:r,maxDate:t,maxDetail:n})||new Date;return yr(l,u)}function QS(e){var t=e.activeStartDate,n=e.defaultActiveStartDate,r=e.defaultValue,o=e.defaultView,i=e.maxDate,s=e.maxDetail,l=e.minDate,u=e.minDetail,d=e.value,h=e.view,p=Pc(h,u,s),v=t||n;return v?yr(p,v):mh({maxDate:i,maxDetail:s,minDate:l,minDetail:u,value:d||r,view:h||o})}function as(e){return e&&(!Array.isArray(e)||e.length===1)}function Sa(e,t){return e instanceof Date&&t instanceof Date&&e.getTime()===t.getTime()}var is=b.forwardRef(function(t,n){var r=t.activeStartDate,o=t.allowPartialRange,i=t.calendarType,s=t.className,l=t.defaultActiveStartDate,u=t.defaultValue,d=t.defaultView,h=t.formatDay,p=t.formatLongDate,v=t.formatMonth,y=t.formatMonthYear,k=t.formatShortWeekday,S=t.formatWeekday,N=t.formatYear,T=t.goToRangeStartOnSelect,$=T===void 0?!0:T,I=t.inputRef,C=t.locale,X=t.maxDate,q=X===void 0?US:X,H=t.maxDetail,ee=H===void 0?"month":H,K=t.minDate,ne=K===void 0?jc:K,U=t.minDetail,ie=U===void 0?"century":U,ce=t.navigationAriaLabel,E=t.navigationAriaLive,z=t.navigationLabel,D=t.next2AriaLabel,Q=t.next2Label,J=t.nextAriaLabel,j=t.nextLabel,G=t.onActiveStartDateChange,se=t.onChange,ae=t.onClickDay,de=t.onClickDecade,we=t.onClickMonth,ke=t.onClickWeekNumber,Ne=t.onClickYear,De=t.onDrillDown,Pe=t.onDrillUp,fe=t.onViewChange,Me=t.prev2AriaLabel,Ue=t.prev2Label,je=t.prevAriaLabel,Je=t.prevLabel,$e=t.returnValue,ze=$e===void 0?"start":$e,qe=t.selectRange,Ye=t.showDoubleView,Ce=t.showFixedNumberOfWeeks,st=t.showNavigation,wt=st===void 0?!0:st,dt=t.showNeighboringCentury,At=t.showNeighboringDecade,kt=t.showNeighboringMonth,bt=kt===void 0?!0:kt,Nt=t.showWeekNumbers,gt=t.tileClassName,Tt=t.tileContent,Ct=t.tileDisabled,Dt=t.value,Ot=t.view,Xe=b.useState(l),mt=Xe[0],le=Xe[1],me=b.useState(null),te=me[0],pe=me[1],be=b.useState(Array.isArray(u)?u.map(function(Le){return Le!==null?vo(Le):null}):u!=null?vo(u):null),Te=be[0],he=be[1],Re=b.useState(d),Ft=Re[0],pt=Re[1],Qe=r||mt||QS({activeStartDate:r,defaultActiveStartDate:l,defaultValue:u,defaultView:d,maxDate:q,maxDetail:ee,minDate:ne,minDetail:ie,value:Dt,view:Ot}),lt=function(){var Le=function(){return qe&&as(Te)?Te:Dt!==void 0?Dt:Te}();return Le?Array.isArray(Le)?Le.map(function(Ve){return Ve!==null?vo(Ve):null}):Le!==null?vo(Le):null:null}(),An=dh(ee),et=Pc(Ot||Ft,ie,ee),yt=uh(ie,ee),cn=qe?te:null,bn=yt.indexOf(et)<yt.length-1,xn=yt.indexOf(et)>0,Ge=b.useCallback(function(Le){var Ve=function(){switch(ze){case"start":return Ic;case"end":return hh;case"range":return ZS;default:throw new Error("Invalid returnValue.")}}();return Ve({maxDate:q,maxDetail:ee,minDate:ne,value:Le})},[q,ee,ne,ze]),at=b.useCallback(function(Le,Ve){le(Le);var nt={action:Ve,activeStartDate:Le,value:lt,view:et};G&&!Sa(Qe,Le)&&G(nt)},[Qe,G,lt,et]),$n=b.useCallback(function(Le,Ve){var nt=function(){switch(et){case"century":return de;case"decade":return Ne;case"year":return we;case"month":return ae;default:throw new Error("Invalid view: ".concat(et,"."))}}();nt&&nt(Le,Ve)},[ae,de,we,Ne,et]),ln=b.useCallback(function(Le,Ve){if(bn){$n(Le,Ve);var nt=yt[yt.indexOf(et)+1];if(!nt)throw new Error("Attempted to drill down from the lowest view.");le(Le),pt(nt);var ft={action:"drillDown",activeStartDate:Le,value:lt,view:nt};G&&!Sa(Qe,Le)&&G(ft),fe&&et!==nt&&fe(ft),De&&De(ft)}},[Qe,bn,G,$n,De,fe,lt,et,yt]),un=b.useCallback(function(){if(xn){var Le=yt[yt.indexOf(et)-1];if(!Le)throw new Error("Attempted to drill up from the highest view.");var Ve=yr(Le,Qe);le(Ve),pt(Le);var nt={action:"drillUp",activeStartDate:Ve,value:lt,view:Le};G&&!Sa(Qe,Ve)&&G(nt),fe&&et!==Le&&fe(nt),Pe&&Pe(nt)}},[Qe,xn,G,Pe,fe,lt,et,yt]),dn=b.useCallback(function(Le,Ve){var nt=lt;$n(Le,Ve);var ft=qe&&!as(nt),jt;if(qe)if(ft)jt=yr(An,Le);else{if(!nt)throw new Error("previousValue is required");if(Array.isArray(nt))throw new Error("previousValue must not be an array");jt=gS(An,nt,Le)}else jt=Ge(Le);var Sn=!qe||ft||$?mh({maxDate:q,maxDetail:ee,minDate:ne,minDetail:ie,value:jt,view:et}):null;Ve.persist(),le(Sn),he(jt);var rt={action:"onChange",activeStartDate:Sn,value:jt,view:et};if(G&&!Sa(Qe,Sn)&&G(rt),se)if(qe){var Ut=as(jt);if(!Ut)se(jt||null,Ve);else if(o){if(Array.isArray(jt))throw new Error("value must not be an array");se([jt||null,null],Ve)}}else se(jt||null,Ve)},[Qe,o,Ge,$,q,ee,ne,ie,G,se,$n,qe,lt,An,et]);function Kr(Le){pe(Le)}function Wt(){pe(null)}b.useImperativeHandle(n,function(){return{activeStartDate:Qe,drillDown:ln,drillUp:un,onChange:dn,setActiveStartDate:at,value:lt,view:et}},[Qe,ln,un,dn,at,lt,et]);function Jt(Le){var Ve=Le?rh(et,Qe):yr(et,Qe),nt=bn?ln:dn,ft={activeStartDate:Ve,hover:cn,locale:C,maxDate:q,minDate:ne,onClick:nt,onMouseOver:qe?Kr:void 0,tileClassName:gt,tileContent:Tt,tileDisabled:Ct,value:lt,valueType:An};switch(et){case"century":return g.jsx(CS,$r({formatYear:N,showNeighboringCentury:dt},ft));case"decade":return g.jsx(PS,$r({formatYear:N,showNeighboringDecade:At},ft));case"year":return g.jsx(RS,$r({formatMonth:v,formatMonthYear:y},ft));case"month":return g.jsx(qS,$r({calendarType:i,formatDay:h,formatLongDate:p,formatShortWeekday:k,formatWeekday:S,onClickWeekNumber:ke,onMouseLeave:qe?Wt:void 0,showFixedNumberOfWeeks:typeof Ce<"u"?Ce:Ye,showNeighboringMonth:bt,showWeekNumbers:Nt},ft));default:throw new Error("Invalid view: ".concat(et,"."))}}function Yt(){return wt?g.jsx(wS,{activeStartDate:Qe,drillUp:un,formatMonthYear:y,formatYear:N,locale:C,maxDate:q,minDate:ne,navigationAriaLabel:ce,navigationAriaLive:E,navigationLabel:z,next2AriaLabel:D,next2Label:Q,nextAriaLabel:J,nextLabel:j,prev2AriaLabel:Me,prev2Label:Ue,prevAriaLabel:je,prevLabel:Je,setActiveStartDate:at,showDoubleView:Ye,view:et,views:yt}):null}var Rn=Array.isArray(lt)?lt:[lt];return g.jsxs("div",{className:Bt(xa,qe&&Rn.length===1&&"".concat(xa,"--selectRange"),Ye&&"".concat(xa,"--doubleView"),s),ref:I,children:[Yt(),g.jsxs("div",{className:"".concat(xa,"__viewContainer"),onBlur:qe?Wt:void 0,onMouseLeave:qe?Wt:void 0,children:[Jt(),Ye?Jt(!0):null]})]})});function JS({onSelect:e,onClose:t,showTime:n=!0,isBetweenMode:r=!1}){const[o,i]=b.useState(new Date),[s,l]=b.useState(new Date),[u,d]=b.useState(Rt(new Date,"HH")),[h,p]=b.useState(Rt(new Date,"mm")),[v,y]=b.useState(Rt(new Date,"ss")),[k,S]=b.useState(Rt(new Date,"HH")),[N,T]=b.useState(Rt(new Date,"mm")),[$,I]=b.useState(Rt(new Date,"ss")),[C,X]=b.useState(!1),[q,H]=b.useState(!1),ee=b.useRef(null);b.useEffect(()=>{function U(ie){ee.current&&!ee.current.contains(ie.target)&&t()}return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[t]),b.useEffect(()=>{function U(ie){ie.key==="Enter"&&(ie.preventDefault(),ie.stopPropagation(),K(),t())}return document.addEventListener("keydown",U),()=>document.removeEventListener("keydown",U)},[o,s,u,h,v,k,N,$,r,t]);const K=()=>{if(r){const U=new Date(o);U.setHours(parseInt(u),parseInt(h),parseInt(v));const ie=new Date(s);ie.setHours(parseInt(k),parseInt(N),parseInt($)),e({start:U,end:ie})}else{const U=new Date(o);U.setHours(parseInt(u),parseInt(h),parseInt(v)),e({start:U})}t()},ne=({label:U,hours:ie,minutes:ce,seconds:E,setHours:z,setMinutes:D,setSeconds:Q})=>g.jsxs("div",{className:"flex flex-col gap-2",children:[g.jsx("div",{className:"text-sm font-medium text-gray-700",children:U}),g.jsxs("div",{className:"flex justify-between items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"number",min:"0",max:"23",value:ie,onChange:J=>z(J.target.value.padStart(2,"0")),className:"w-16 px-3 py-2 bg-white border rounded-md text-center text-lg font-medium text-gray-700"}),g.jsx("span",{className:"text-gray-500 text-sm",children:"hrs"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"number",min:"0",max:"59",value:ce,onChange:J=>D(J.target.value.padStart(2,"0")),className:"w-16 px-3 py-2 bg-white border rounded-md text-center text-lg font-medium text-gray-700"}),g.jsx("span",{className:"text-gray-500 text-sm",children:"min"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"number",min:"0",max:"59",value:E,onChange:J=>Q(J.target.value.padStart(2,"0")),className:"w-16 px-3 py-2 bg-white border rounded-md text-center text-lg font-medium text-gray-700"}),g.jsx("span",{className:"text-gray-500 text-sm",children:"sec"})]})]})]});return g.jsxs("div",{ref:ee,className:"bg-white rounded-lg shadow-xl p-4 w-[400px]",style:{marginTop:"0.5rem"},children:[g.jsxs("div",{className:"flex items-center justify-between mb-4 border-b pb-2",children:[g.jsx("h3",{className:"text-lg font-medium text-gray-700",children:r?"Select Date Range":"Select Date"}),g.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:"✕"})]}),r?g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsxs("button",{onClick:()=>X(!C),className:"flex items-center gap-2 hover:bg-gray-50 px-2 py-1 rounded-md",children:[g.jsx("span",{className:"text-gray-600",children:"📅"}),g.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Start: ",Rt(o,"EEE MMM dd yyyy")]})]}),C&&g.jsx(is,{onChange:U=>{i(U),X(!1)},value:o,className:"border-0 mt-2"}),n&&g.jsx(ne,{label:"Start Time",hours:u,minutes:h,seconds:v,setHours:d,setMinutes:p,setSeconds:y})]}),g.jsxs("div",{children:[g.jsxs("button",{onClick:()=>H(!q),className:"flex items-center gap-2 hover:bg-gray-50 px-2 py-1 rounded-md",children:[g.jsx("span",{className:"text-gray-600",children:"📅"}),g.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["End: ",Rt(s,"EEE MMM dd yyyy")]})]}),q&&g.jsx(is,{onChange:U=>{l(U),H(!1)},value:s,className:"border-0 mt-2"}),n&&g.jsx(ne,{label:"End Time",hours:k,minutes:N,seconds:$,setHours:S,setMinutes:T,setSeconds:I})]})]}):g.jsxs(g.Fragment,{children:[g.jsxs("button",{onClick:()=>X(!C),className:"flex items-center gap-2 hover:bg-gray-50 px-2 py-1 rounded-md mb-4",children:[g.jsx("span",{className:"text-gray-600",children:"📅"}),g.jsx("span",{className:"text-lg font-medium text-gray-700",children:Rt(o,"EEE MMM dd yyyy")})]}),C&&g.jsx("div",{className:"mb-4",children:g.jsx(is,{onChange:U=>{i(U),X(!1)},value:o,className:"border-0"})}),n&&g.jsx(ne,{label:"Time",hours:u,minutes:h,seconds:v,setHours:d,setMinutes:p,setSeconds:y})]}),g.jsx("button",{onClick:K,className:"w-full mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Apply"})]})}function ek({isOpen:e,onClose:t}){const[n,r]=b.useState([]),[o,i]=b.useState(""),[s,l]=b.useState([]),[u,d]=b.useState("");b.useEffect(()=>{e&&(async()=>{const N=await Oo("namespaces"),T=await Oo("searchParameters");N&&r(N),T&&l(T)})()},[e]);const h=async()=>{await Ns("namespaces",n),await Ns("searchParameters",s),t()},p=()=>{o&&!n.includes(o)&&(r([...n,o]),i(""))},v=S=>{r(n.filter((N,T)=>T!==S))},y=()=>{const S=u.split(",").map(N=>N.trim()).filter(N=>N&&!s.includes(N));S.length&&(l([...s,...S]),d(""))},k=S=>{l(s.filter((N,T)=>T!==S))};return e?g.jsxs(Is,{open:e,onClose:t,className:"relative z-[100]",children:[g.jsx("div",{className:"fixed inset-0","aria-hidden":"true"}),g.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:g.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:g.jsxs(Is.Panel,{className:"w-[600px] transform overflow-hidden rounded-lg bg-white text-left align-middle shadow-xl transition-all",children:[g.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[g.jsx("h2",{className:"text-xl font-semibold",children:"Search Settings"}),g.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full","aria-label":"Close",children:g.jsx(pr,{size:20})})]}),g.jsxs("div",{className:"p-6 overflow-y-auto",children:[g.jsxs("div",{className:"mb-6",children:[g.jsx("h3",{className:"text-lg font-medium mb-2",children:"Namespaces"}),g.jsxs("div",{className:"flex gap-2 mb-2",children:[g.jsx("input",{type:"text",value:o,onChange:S=>i(S.target.value),onKeyPress:S=>S.key==="Enter"&&p(),placeholder:"Add namespace...",className:"flex-1 p-2 border rounded"}),g.jsx("button",{onClick:p,className:"p-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:g.jsx(Xl,{size:20})})]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((S,N)=>g.jsxs("div",{className:"bg-gray-100 px-3 py-1 rounded-full flex items-center gap-2",children:[g.jsx("span",{children:S}),g.jsx("button",{onClick:()=>v(N),className:"hover:text-red-500",children:g.jsx(pr,{size:16})})]},N))})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-medium mb-2",children:"Search Parameters"}),g.jsxs("div",{className:"flex gap-2 mb-2",children:[g.jsx("input",{type:"text",value:u,onChange:S=>d(S.target.value),onKeyPress:S=>S.key==="Enter"&&y(),placeholder:"Add parameters (comma-separated)...",className:"flex-1 p-2 border rounded"}),g.jsx("button",{onClick:y,className:"p-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:g.jsx(Xl,{size:20})})]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:s.map((S,N)=>g.jsxs("div",{className:"bg-gray-100 px-3 py-1 rounded-full flex items-center gap-2",children:[g.jsx("span",{children:S}),g.jsx("button",{onClick:()=>k(N),className:"hover:text-red-500",children:g.jsx(pr,{size:16})})]},N))})]})]}),g.jsxs("div",{className:"p-4 border-t flex justify-end gap-2",children:[g.jsx("button",{onClick:t,className:"px-4 py-2 border rounded hover:bg-gray-50",children:"Cancel"}),g.jsx("button",{onClick:h,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Save"})]})]})})})]}):null}const tk=async(e,t,n)=>{n||(n="");const r=await fetch(`http://localhost:7531/workflow?namespace=${e}&id=${t}&runId=${n}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()},nk=async()=>{try{return(await fetch("http://localhost:7531/health",{method:"GET"})).status===200}catch{return!1}},Yo=new Set,ph=e=>{Yo.add(e),window.dispatchEvent(new CustomEvent("workflow-loading-change",{detail:{workflowId:e,isLoading:!0}}))},gh=e=>{Yo.delete(e),window.dispatchEvent(new CustomEvent("workflow-loading-change",{detail:{workflowId:e,isLoading:!1}}))};function rk(e){return Yo.has(e)}async function Xs(e,t,n,r=0){if(Yo.has(t))return n;const o=[{id:t,runId:n,workflowTaskCompletedEventId:"-1",depth:r}],i=new Set;for(;o.length>0;){const{id:s,runId:l,workflowTaskCompletedEventId:u,depth:d}=o.shift();if(i.has(s))continue;const h=await Ro(s,l);if(h&&!h.isPlaceholder){i.add(s);continue}ph(s);try{const p=await tk(e,s,l);i.add(s);const v=[];for(const y of p)y.type==="workflow"?await _s({...y,workflowTaskCompletedEventId:u,isPlaceholder:!1}):y.type==="childWorkflow"?(v.push({workflowId:y.workflowId,workflowRunId:y.runId,workflowTaskCompletedEventId:y.workflowTaskCompletedEventId}),await _s({...y,type:"workflow",isPlaceholder:!0})):y.type==="activity"&&await ff(y);d>0&&v.length>0&&v.forEach(y=>{o.push({id:y.workflowId,runId:y.workflowRunId,workflowTaskCompletedEventId:y.workflowTaskCompletedEventId,depth:d-1})})}catch(p){console.error("Error processing workflow:",p)}finally{gh(s)}}return n}async function ok(e,t,n){try{ph(t);const r=await gc(t,n),o=[];for(const s of r){const l=s.workflowId;if(Yo.has(l))continue;const u=await Ro(l,n);u&&!u.isPlaceholder||o.push(s)}const i=o.map(async s=>{try{await Xs(e,s.workflowId,s.runId,1)}catch(l){console.error("Error loading workflow:",l)}});await Promise.all(i)}catch(r){console.error("Error checking child workflow data:",r)}finally{gh(t)}}const Tu=async(e,t)=>{const n=await fetch(`http://localhost:7531/search?namespace=${e}&query=${encodeURIComponent(t)}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return n.json()};function yh({isOpen:e,onClose:t,onTemporalModalSubmit:n,onShowNodeData:r}){const[o,i]=b.useState(""),[s,l]=b.useState([]),[u,d]=b.useState([]),[h,p]=b.useState(!1),[v,y]=b.useState(-1),[k,S]=b.useState(!1),[N,T]=b.useState(!1),$=W.useRef(null),[I,C]=b.useState(null),[X,q]=b.useState(null),H=b.useRef(null),[ee,K]=b.useState(!1),[ne,U]=b.useState([]),[ie,ce]=b.useState([]),[E,z]=b.useState(""),[D,Q]=b.useState([]),[J,j]=b.useState(1),[G,se]=b.useState(1),[ae,de]=b.useState([{id:"status",label:"Status",width:120},{id:"taskQueue",label:"Task Queue",width:150},{id:"workflowType",label:"Workflow Type",width:180},{id:"execution",label:"Workflow ID",width:200},{id:"execution",label:"Run ID",width:200},{id:"duration",label:"Duration",width:180},{id:"startTime",label:"Start Time",width:180},{id:"closeTime",label:"Close Time",width:180}]),[we,ke]=b.useState(!1),[Ne,De]=b.useState(!1),[Pe,fe]=b.useState(!1),Me=async()=>{const le=await Oo("searchParameters");if(le){const me=le.map(te=>({id:te,label:te,type:"text"}));U(me)}},Ue=async()=>{const le=await Oo("namespaces")||[];ce(le),!E&&le.length>0&&z(le[0])};b.useEffect(()=>{e&&Me()},[e]),b.useEffect(()=>{Ue()},[e]),b.useEffect(()=>{(async()=>{if(e&&E&&D.length===0){ke(!0);try{const me=await Tu(E,"");Q(me.executions||[]),se(Math.min(Math.ceil(me.executions.length/100),10)),j(1)}catch(me){console.error("Error executing initial search:",me)}finally{ke(!1)}}})()},[e,E]),b.useEffect(()=>{if(Pe){const le=()=>{document.querySelectorAll('[data-workflow-loaded="true"]').length>0?(fe(!1),t()):setTimeout(le,500)};setTimeout(le,1e3)}},[Pe,t]);const je=le=>{if(le.type==="datetime")return ba.map(te=>({text:`${le.label} ${te.label}`,disabled:!1}));if(le.type==="status"){const te=s.filter(pe=>pe.field==="ExecutionStatus").map(pe=>pe.value);return Ji.filter(pe=>!te.includes(pe.value)).map(pe=>({text:`${le.label} = '${pe.value}'`,displayText:pe.value,disabled:!1,color:pe.color}))}return au.filter(te=>["equals","notEquals","starts_with"].includes(te.id)).map(te=>({text:`${le.label} ${te.label}`,disabled:!1}))},Je=()=>s.filter(le=>le.field==="ExecutionStatus").flatMap(le=>{const me=le.raw.match(/Status\s*=\s*'([^']+)'/gi);return me?me.map(te=>{const pe=te.match(/Status\s*=\s*['"]([^'"]+)['"]/i);return(pe==null?void 0:pe[1])??""}):[]}),$e=le=>{const me=le.toLowerCase().trim();if(me.startsWith("status")){const be=Je();return Ji.filter(Te=>!be.includes(Te.value)).map(Te=>{var he;return{text:`Status = '${Te.value}'`,fullText:s.some(Re=>Re.field==="ExecutionStatus")?`${(he=s.find(Re=>Re.field==="ExecutionStatus"))==null?void 0:he.raw} OR Status = '${Te.value}'`:`Status = '${Te.value}'`,displayText:Te.value,disabled:!1,color:Te.color}})}if(k)return[];const te=[...Nn,...ne],pe=new Set(s.map(be=>be.field));return te.filter(be=>be.label.toLowerCase().includes(me)).map(be=>({text:be.label,disabled:be.type!=="status"&&pe.has(be.id)}))},ze=le=>{const me=le.target.value;if(i(me),me.endsWith(" ")){const te=me.trim().split(/\s+/);if(te.length===2){const[pe,be]=te,Te=Nn.find(Re=>pe.toLowerCase()===Re.label.toLowerCase()&&Re.type==="datetime"),he=ba.some(Re=>Re.label===be||Re.alternatives.includes(be));Te&&he&&(q(Te.label),bt())}}if((!me.trim()||me.trim().toLowerCase()==="status")&&T(!1),!N||me.trim().toLowerCase()==="status"){y(-1);const te=$e(me);d(te),te.length>0&&y(0)}},qe=le=>le.match(/^Status\s*=\s*['"][^'"]+['"](\s+OR\s+Status\s*=\s*['"][^'"]+['"])*$/i)?{field:"ExecutionStatus",operator:"equals",value:le,raw:le,isValid:!0}:null,Ye=le=>{if(!h){if(le.key==="Backspace"&&o.length<=1&&T(!1),u.length>0&&!N&&(le.key==="ArrowDown"?(le.preventDefault(),y(me=>me<u.length-1?me+1:me)):le.key==="ArrowUp"?(le.preventDefault(),y(me=>me>0?me-1:0)):le.key==="Enter"&&v>=0&&(le.preventDefault(),dt(u[v]))),le.key==="Enter"||le.key==="Tab"){le.preventDefault();const me=o.trim();if(me.length===0&&s.length>0){st();return}if(me.toLowerCase().startsWith("status")){const te=qe(me);te&&(l(pe=>[...pe.filter(be=>be.field!=="ExecutionStatus"),te]),i(""),T(!1),d([]))}else{const te=At(me);te&&te.isValid&&(l(pe=>[...pe,te]),i(""),T(!1),d([]))}}else if(le.key==="Backspace"&&o.trim()===""&&s.length>0){le.preventDefault();const me=s[s.length-1];me.field==="ExecutionStatus"?(l(s.filter(te=>te.field!=="ExecutionStatus")),i(me.raw),T(!0),d([])):wt(s.length-1)}if(le.key===" "){const me=o.trim().split(/\s+/),te=me[0],pe=Nn.find(be=>te.toLowerCase()===be.label.toLowerCase()&&be.type==="datetime");if(pe&&(q(pe.label),me.length===2)){const be=me[1];ba.some(he=>he.label===be||he.alternatives.includes(be))&&bt()}}}},Ce=le=>{const[me,te]=o.trim().split(/\s+/);if(Nn.find(be=>me.toLowerCase()===be.label.toLowerCase())&&te){let be;if(te.toLowerCase()==="between"&&le.start&&le.end){const Te=Rt(le.start,"yyyy-MM-dd HH:mm:ss"),he=Rt(le.end,"yyyy-MM-dd HH:mm:ss"),Re=`${me} between '${Te}' and '${he}'`;be=At(Re)}else if(le.start){const Te=Rt(le.start,"yyyy-MM-dd HH:mm:ss"),he=`${me} ${te} '${Te}'`;be=At(he)}be&&(l(Te=>[...Te,be]),i(""),p(!1),q(null),d([]),y(-1))}},st=async()=>{const le=[];s.forEach(te=>{if(te.field==="ExecutionStatus"){const pe=te.raw.split(/\s+OR\s+/).map(be=>{const Te=be.match(/Status\s*=\s*['"]([^'"]+)['"]/i);return Te?`\`ExecutionStatus\`="${Te[1]}"`:null}).filter(Boolean);pe.length>0&&le.push(`(${pe.join(" OR ")})`)}else if(te.operator==="between"&&te.value){const[pe,be]=te.value.split(" and ");le.push(`\`${te.field}\` BETWEEN "${pe}" AND "${be}"`)}else le.push(`\`${te.field}\` ${te.operator} "${te.value}"`)});const me=le.join(" AND ");console.log("searchQuery",me),ke(!0);try{const te=await Tu(E,me);Q(te.executions||[]),se(Math.min(Math.ceil(te.executions.length/100),10)),j(1)}catch(te){console.error("Error executing search:",te)}finally{ke(!1)}},wt=le=>{var pe;const me=s[le],te=Nn.find(be=>be.id===me.field);if((te==null?void 0:te.type)==="datetime"){l(s.filter((be,Te)=>Te!==le));return}if(me.field==="ExecutionStatus"){const be=s.filter(Te=>Te.field!=="ExecutionStatus");l(be),i(me.raw),T(!0),d([])}else l(s.filter((be,Te)=>Te!==le)),i(me.raw);S(!1),(pe=H.current)==null||pe.focus()},dt=le=>{var me;if(!le.disabled){if(le.color){const te=s.filter(Te=>Te.field==="ExecutionStatus"),pe=s.filter(Te=>Te.field!=="ExecutionStatus");let be;if(te.length>0){const Te=`${te[0].raw} OR Status = '${le.displayText}'`;be=qe(Te)}else be=qe(`Status = '${le.displayText}'`);if(be){const Te=s.findIndex(Re=>Re.field==="ExecutionStatus"),he=[...pe];Te>=0?he.splice(Te,0,be):he.push(be),l(he)}i(""),d([]),T(!1)}else{const te=le.text.split(/\s+/);if(i(le.text+" "),te.length===2){const[pe,be]=te,Te=Nn.find(Re=>pe.toLowerCase()===Re.label.toLowerCase()&&Re.type==="datetime"),he=ba.some(Re=>Re.label===be||Re.alternatives.includes(be));Te&&he&&(q(Te.label),requestAnimationFrame(()=>{bt()}))}else{const pe=Nn.find(be=>be.label===le.text);d(pe?je(pe):[]),y(0),S(!1),p(!1)}}(me=H.current)==null||me.focus()}},At=le=>{if(!le.trim())return null;const me=/^([a-zA-Z]+)\s*(=|!=|>|>=|<|<=|between|starts\s*with)\s*['"]([^'"]+)['"](?:\s+and\s+['"]([^'"]+)['"])?$/,te=le.match(me);if(!te)return{field:"",operator:"",value:null,raw:le,isValid:!1};let[,pe,be,Te,he]=te;const Re=Nn.find(pt=>pe.toLowerCase()===pt.label.toLowerCase()),Ft=au.find(pt=>pt.label===be||pt.alternatives.includes(be.toLowerCase())||pt.searchOperator===be);if(!Ft)return{field:"",operator:"",value:null,raw:le,isValid:!1};if((Re==null?void 0:Re.type)==="datetime"){const pt=new Date(Te);Te=Rt(pt,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),he=he?Rt(new Date(he),"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"):""}return{field:Re?Re.id:pe,operator:Ft.searchOperator,value:he?`${Te} and ${he}`:Te,raw:le,isValid:!0}},kt=le=>le.isValid?le.field==="ExecutionStatus"||[...Nn,...ne].some(te=>te.id.toLowerCase()===le.field.toLowerCase())?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";W.useEffect(()=>{$.current&&$.current.scrollIntoView({block:"nearest"})},[v]);const bt=()=>{var te;if(!H.current)return;const le=(te=H.current)==null?void 0:te.getBoundingClientRect(),me=document.querySelector('[role="dialog"]');if(le&&me){const pe=me.getBoundingClientRect(),be=(pe.width-400)/2;C({x:be,y:le.bottom-pe.top+5}),p(!0)}},Nt=async()=>{K(!1),await Me(),await Ue()},gt=()=>{d([]),y(-1)},Tt=()=>{d([]),y(-1)},Ct=(le,me)=>{de(te=>{const pe=[...te];return pe[le]={...pe[le],width:me},pe})},Dt=le=>{const me=Ji.find(te=>te.value.toLowerCase()===le.toLowerCase());return(me==null?void 0:me.color)||"gray"},Ot=le=>Rt(new Date(le),"yyyy-MM-dd HH:mm:ss"),Xe=()=>{const le=(J-1)*100,me=le+100,te=D.slice(le,me);return g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsx("div",{className:"flex-none px-4 py-3 border-b bg-gray-50 z-[50]",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",le+1,"-",Math.min(me,D.length)," of"," ",D.length," results"]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:()=>j(pe=>Math.max(1,pe-1)),disabled:J===1,className:"p-1.5 rounded hover:bg-gray-200 disabled:opacity-50 disabled:hover:bg-transparent transition-colors",children:g.jsx(aw,{size:16})}),g.jsxs("span",{className:"text-sm font-medium",children:[J," / ",G]}),g.jsx("button",{onClick:()=>j(pe=>Math.min(G,pe+1)),disabled:J===G,className:"p-1.5 rounded hover:bg-gray-200 disabled:opacity-50 disabled:hover:bg-transparent transition-colors",children:g.jsx(iw,{size:16})})]})]})}),g.jsx("div",{className:"flex-1 overflow-auto",children:g.jsx("div",{className:"inline-block min-w-full align-middle",children:g.jsx("div",{className:"relative",children:g.jsxs("table",{className:"min-w-full border-collapse",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{className:"sticky top-0 border-b border-gray-200 bg-gray-50 z-10",style:{width:50},children:g.jsx("div",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"})}),ae.map((pe,be)=>g.jsxs("th",{className:"sticky top-0 border-b border-gray-200 bg-gray-50 z-10",style:{width:pe.width},children:[g.jsx("div",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:pe.label}),g.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1 cursor-col-resize hover:bg-blue-500 group",onMouseDown:Te=>{const he=Te.pageX,Re=pe.width,Ft=Qe=>{const lt=Qe.pageX-he;Ct(be,Math.max(100,Re+lt))},pt=()=>{document.removeEventListener("mousemove",Ft),document.removeEventListener("mouseup",pt)};document.addEventListener("mousemove",Ft),document.addEventListener("mouseup",pt)},children:g.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-px bg-gray-200 group-hover:bg-blue-500"})})]},`${pe.id}-${be}`))]})}),g.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:te.map(pe=>g.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[g.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-left",children:g.jsx("div",{className:"flex gap-2",children:g.jsx("button",{onClick:be=>{be.stopPropagation(),fe(!0),n({workflowId:pe.execution.workflowId,namespace:E,runId:pe.execution.runId}).then(()=>{fe(!1),t()}).catch(Te=>{console.error("Error loading workflow:",Te),fe(!1)})},className:"p-1 hover:bg-gray-200 rounded-full transition-colors",title:"View workflow details",children:g.jsx(lf,{size:16,className:"text-gray-600"})})})}),g.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-left",children:g.jsx("div",{className:`inline-flex items-center gap-2 px-2.5 py-1 rounded-full text-xs font-medium
                          ${Dt(pe.status)}`,children:pe.status})}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:pe.taskQueue}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:pe.type.name}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium text-left",children:pe.execution.workflowId}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 font-mono text-left",children:pe.execution.runId}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:pc(pe.startTime,pe.closeTime||new Date().toISOString())||"—"}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:Ot(pe.startTime)}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:pe.closeTime?Ot(pe.closeTime):"—"})]},`${pe.execution.workflowId}-${pe.execution.runId}`))})]})})})})]})},mt=g.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[g.jsx("span",{className:"text-gray-700 font-medium",children:"Namespace:"}),g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>De(!Ne),className:"w-64 p-2 border rounded-lg bg-white flex items-center justify-between",children:[g.jsx("span",{children:E}),g.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${Ne?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),Ne&&g.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-lg shadow-lg",children:ie.map(le=>g.jsx("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-100 first:rounded-t-lg last:rounded-b-lg",onClick:()=>{z(le),De(!1)},children:le},le))})]})]});return e?g.jsxs(g.Fragment,{children:[g.jsxs(Is,{open:e,onClose:t,className:"relative z-[1000]",children:[g.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true",onClick:Tt}),Pe&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl flex items-center gap-4",children:[g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-blue-500 border-t-transparent"}),g.jsx("span",{className:"text-gray-700",children:"Loading workflow..."})]})}),g.jsx("div",{className:"fixed inset-0",onClick:Tt,children:g.jsx("div",{className:"flex min-h-full items-start justify-center p-4 text-center",children:g.jsxs(Lf,{className:"bg-white rounded-xl w-full max-w-[120rem] h-[90vh] flex flex-col shadow-2xl relative",onClick:le=>le.stopPropagation(),children:[g.jsxs("div",{className:"p-6 flex-none border-b relative",children:[mt,g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Search settings",onClick:()=>K(!0),children:g.jsx(uw,{size:20,className:"text-gray-600"})}),g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex flex-wrap gap-2 items-center p-2 border rounded-lg bg-gray-50 min-h-[40px]",children:[s.map((le,me)=>g.jsxs("div",{className:`px-2 py-1 rounded-md ${kt(le)} flex items-center gap-1 group`,children:[g.jsx("span",{onClick:()=>wt(me),className:"flex-1 cursor-pointer",children:le.raw}),g.jsx("button",{onClick:te=>{te.stopPropagation(),l(pe=>pe.filter((be,Te)=>Te!==me))},className:"text-current opacity-50 hover:opacity-100 transition-opacity","aria-label":"Remove token",children:g.jsx(pr,{size:14})})]},me)),g.jsx("input",{ref:H,type:"text",value:o,onChange:ze,onClick:gt,onKeyDown:Ye,className:"flex-1 min-w-[200px] bg-transparent outline-none",placeholder:s.length>0?"Add another filter...":"Type to search. For example, WorkflowType = 'MyWorkflowType'"})]}),u.length>0&&g.jsx("div",{className:"absolute mt-1 w-1/2 max-h-60 overflow-auto rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[60]",children:u.map((le,me)=>g.jsx("button",{ref:me===v?$:null,className:`relative cursor-default select-none py-2 pl-3 pr-9 w-full text-left transition-colors ${le.disabled?"text-gray-400":"text-gray-900"} ${me===v||le.disabled?"bg-gray-50":"bg-white hover:bg-gray-50"}`,onClick:()=>!le.disabled&&dt(le),disabled:le.disabled,children:g.jsx("span",{className:`inline-block truncate ${le.color?ak(le.color,!1):""}`,children:le.displayText||le.text})},me))})]}),g.jsx("button",{onClick:st,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Search"})]})]}),g.jsx("div",{className:"flex-1 overflow-y-auto",children:we?g.jsx("div",{className:"flex items-center justify-center h-full",children:g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-blue-500"})}):D.length>0?Xe():g.jsx("div",{className:"p-6 text-center text-gray-500",children:"No results to display. Try searching for workflows above."})}),h&&I&&g.jsx("div",{className:"absolute z-[999]",style:{top:"100px"},children:g.jsx(JS,{onSelect:Ce,onClose:()=>{p(!1),C(null)},position:I,showTime:!0,isBetweenMode:o.toLowerCase().includes("between")})})]})})})]}),ee&&g.jsx(ek,{isOpen:ee,onClose:Nt})]}):null}const ak=(e,t)=>!e||t?"":`px-2 py-0.5 rounded ${e}`,ik=({showFocus:e,setShowFocus:t,autoZoomEnabled:n,setAutoZoomEnabled:r,setIsTemporalModalOpen:o,refreshWorkflowData:i,isRefreshing:s=!1,currentWorkflow:l,onTemporalRootWorkflowDataCollected:u,setIsSearchModalOpen:d,isSearchModalOpen:h})=>{b.useEffect(()=>{(async()=>{const S=await Oo("autoZoomEnabled");S!==void 0&&r(S)})()},[r]);const p=async()=>{const k=!n;r(k),await Ns("autoZoomEnabled",k)},v=()=>{if(console.log("Refreshing root workflow",l),!i){console.log("No refresh function provided");return}if(!l){console.log("No workflow ID provided");return}i(l.id,l.runId)},y=async()=>{const k=await kw();await u(k.rootWorkflowId,k.rootWorkflowRunId)};return g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsx("button",{onClick:v,className:"p-2",title:"Refresh workflow data from Temporal",children:g.jsx(lw,{className:"h-4 w-4"})}),g.jsx("button",{className:"px-3 py-1 rounded bg-green-500 text-white hover:bg-green-600",onClick:()=>o(!0),children:"Temporal"}),g.jsxs("button",{className:`px-3 py-1 rounded ${n?"bg-green-500 text-white":"bg-gray-200 text-gray-700"}`,onClick:p,children:["Auto Zoom ",n?"On":"Off"]}),g.jsxs("button",{className:"px-3 py-1 rounded bg-gray-200 text-gray-700 hover:bg-gray-300",onClick:()=>t(!e),children:[e?"Hide":"Show"," Focus"]}),g.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 text-gray-700 hover:bg-gray-300",onClick:y,children:"Demo"}),g.jsx("button",{className:"px-3 py-1 rounded bg-blue-500 text-white hover:bg-blue-600",onClick:()=>d(!0),children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(lf,{className:"h-4 w-4"}),"Search"]})}),g.jsx(yh,{isOpen:h,onClose:()=>d(!1)})]})};function sk({id:e,data:t,onClose:n,position:r,baseZIndex:o=100}){const[i,s]=b.useState("io"),l=b.useRef(null),u=b.useRef(null),[d,h]=b.useState({width:600,height:600}),[p,v]=b.useState(!1),[y,k]=b.useState(!1),S=b.useRef({x:0,y:0,width:0,height:0}),[N,T]=b.useState({x:0,y:0}),[$,I]=b.useState(o);b.useEffect(()=>{t&&t!==u.current&&(s("io"),u.current=t)},[t]),b.useEffect(()=>{const D=l.current;D&&(D.style.display="none",D.scrollTop=0,D.style.display="")},[t,i]),b.useEffect(()=>{I(D=>Math.max(D,o))},[o]),b.useEffect(()=>{t&&r&&setTimeout(()=>{l.current&&(l.current.style.display="none",l.current.offsetHeight,l.current.style.display="",l.current.style.visibility="visible",l.current.style.opacity="1",H())},50)},[t,r]);const C=D=>{var J;if(!D.target||!(D.target instanceof HTMLElement)||!D.target.closest("[data-drag-handle]"))return;D.preventDefault(),v(!0);const Q=(J=l.current)==null?void 0:J.getBoundingClientRect();Q&&(S.current={x:D.clientX-Q.left,y:D.clientY-Q.top,width:d.width,height:d.height}),document.body.style.userSelect="none"},X=D=>{var Q,J;D.stopPropagation(),D.preventDefault(),k(!0),S.current={x:D.clientX,y:D.clientY,width:((Q=l.current)==null?void 0:Q.offsetWidth)||d.width,height:((J=l.current)==null?void 0:J.offsetHeight)||d.height},document.body.style.userSelect="none"};b.useEffect(()=>{const D=j=>{if(!(!p&&!y))if(y&&l.current){const G=j.clientX-S.current.x,se=j.clientY-S.current.y,ae=Math.max(300,S.current.width+G),de=Math.max(400,S.current.height+se);(ae!==d.width||de!==d.height)&&h({width:ae,height:de})}else p&&T({x:j.clientX-S.current.x-r.x,y:j.clientY-S.current.y-r.y})},Q=()=>{v(!1),k(!1),document.body.style.userSelect=""},J=new AbortController;return(p||y)&&(window.addEventListener("mousemove",D,{signal:J.signal}),window.addEventListener("mouseup",Q,{signal:J.signal})),()=>{J.abort()}},[p,y,r,d]);const q=()=>{if(!r)return{};const D=20,Q=window.innerWidth,J=window.innerHeight,j=Math.min(Math.max(D,r.x+N.x),Q-d.width-D),G=Math.min(Math.max(D,r.y+N.y),J-d.height-D);return{left:j,top:G}},H=()=>{const D=document.querySelectorAll(`[data-node-panel][data-base-z-index="${o}"]`),Q=Array.from(D).reduce((J,j)=>{const G=parseInt(window.getComputedStyle(j).zIndex)||o;return Math.max(J,G)},o);I(Q+1)};if(!t||!r)return null;const ee=!!(t.lastFailure||t.failure),K=!!(t.scheduleTime||t.startTime||t.endTime),ne=!!(t.input||t.result||t.memo&&Object.keys(t.memo).length>0||t.searchAttributes&&Object.keys(t.searchAttributes).length>0),ie=(t.type==="workflow"||t.type==="childWorkflow")&&t.namespace&&t.workflowId?`https://cloud.temporal.io/namespaces/${t.namespace}/workflows/${t.workflowId}`:null,ce=({tab:D,label:Q,disabled:J})=>g.jsx("button",{onClick:()=>!J&&s(D),disabled:J,className:Bt("px-4 py-2 text-sm font-medium transition-colors rounded-t-lg","focus:outline-none",J&&"opacity-50 cursor-not-allowed",i===D?{io:"bg-blue-100 text-blue-800",error:"bg-red-100 text-red-800",time:"bg-purple-100 text-purple-800",common:"bg-green-100 text-green-800"}[D]:"text-gray-600 hover:bg-gray-100"),children:Q}),E=()=>{var Q;const D="space-y-4 min-h-[300px]";switch(i){case"io":return g.jsxs("div",{className:D,children:[t.input&&g.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto relative",children:[g.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Input"}),g.jsx(z,{content:JSON.stringify(JSON.parse(t.input),null,2)}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap break-all bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.input),null,2)})})]}),t.result&&g.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto relative",children:[g.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Result"}),g.jsx(z,{content:JSON.stringify(JSON.parse(t.result),null,2)}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap break-all bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.result),null,2)})})]}),t.header&&Object.keys(t.header).length>0&&g.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto relative",children:[g.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Header"}),g.jsx(z,{content:JSON.stringify(t.header,null,2)}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap break-all bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(t.header,null,2)})})]}),t.memo&&Object.keys(t.memo).length>0&&g.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto",children:[g.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Memo"}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(t.memo,null,2)})})]}),t.searchAttributes&&Object.keys(t.searchAttributes).length>0&&g.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto",children:[g.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Search Attributes"}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(t.searchAttributes,null,2)})})]})]});case"error":return g.jsxs("div",{className:D,children:[t.lastFailure&&g.jsxs("div",{className:"bg-red-50 p-4 rounded-lg overflow-auto relative",children:[g.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Last Failure"}),g.jsx(z,{content:JSON.stringify(JSON.parse(t.lastFailure),null,2)}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap break-all bg-red-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.lastFailure),null,2)})})]}),t.failure&&g.jsxs("div",{className:"bg-red-50 p-4 rounded-lg overflow-auto relative",children:[g.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Failure"}),g.jsx(z,{content:JSON.stringify(JSON.parse(t.failure),null,2)}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap break-all bg-red-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.failure),null,2)})})]})]});case"time":return g.jsxs("div",{className:D,children:[t.startTime&&t.endTime&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Duration"}),g.jsx("p",{className:"text-purple-700 text-lg font-semibold",children:pc(t.startTime,t.endTime)})]}),t.scheduleTime&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Schedule Time"}),g.jsx("p",{className:"text-purple-700",children:t.scheduleTime})]}),t.startTime&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Start Time"}),g.jsx("p",{className:"text-purple-700",children:t.startTime})]}),t.endTime&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"End Time"}),g.jsx("p",{className:"text-purple-700",children:t.endTime})]}),t.lastStartedTime&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Last Started Time"}),g.jsx("p",{className:"text-purple-700",children:t.lastStartedTime})]}),t.lastAttemptCompleteTime&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Last Attempt Complete Time"}),g.jsx("p",{className:"text-purple-700",children:t.lastAttemptCompleteTime})]}),(t.heartbeatTimeout||t.scheduleToCloseTimeout||t.scheduleToStartTimeout||t.startToCloseTimeout||t.workflowRunTimeout||t.workflowTaskTimeout)&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Timeouts"}),t.heartbeatTimeout&&g.jsxs("p",{className:"text-purple-700",children:["Heartbeat: ",t.heartbeatTimeout]}),t.scheduleToCloseTimeout&&g.jsxs("p",{className:"text-purple-700",children:["Schedule to Close: ",t.scheduleToCloseTimeout]}),t.scheduleToStartTimeout&&g.jsxs("p",{className:"text-purple-700",children:["Schedule to Start: ",t.scheduleToStartTimeout]}),t.startToCloseTimeout&&g.jsxs("p",{className:"text-purple-700",children:["Start to Close: ",t.startToCloseTimeout]}),t.workflowRunTimeout&&g.jsxs("p",{className:"text-purple-700",children:["Workflow Run: ",t.workflowRunTimeout]}),t.workflowTaskTimeout&&g.jsxs("p",{className:"text-purple-700",children:["Workflow Task: ",t.workflowTaskTimeout]})]})]});case"common":return g.jsxs("div",{className:D,children:[g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Basic Information"}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("p",{className:"text-green-700",children:["Type: ",t.type]}),t.activityType&&g.jsxs("p",{className:"text-green-700",children:["Activity Type: ",t.activityType]}),t.workflowType&&g.jsxs("p",{className:"text-green-700",children:["Workflow Type: ",t.workflowType]}),g.jsxs("p",{className:"text-green-700",children:["Status: ",t.status]}),t.namespace&&g.jsxs("p",{className:"text-green-700",children:["Namespace: ",t.namespace]}),t.workflowId&&g.jsxs("p",{className:"text-green-700",children:["Workflow ID: ",t.workflowId]}),(t.workflowRunId||t.runId)&&g.jsxs("p",{className:"text-green-700",children:["Run ID: ",t.workflowRunId||t.runId]}),t.activityId&&g.jsxs("p",{className:"text-green-700",children:["Activity ID: ",t.activityId]}),t.workflowTaskCompletedEventId&&g.jsxs("p",{className:"text-green-700",children:["Workflow Task Completed Event ID:"," ",t.workflowTaskCompletedEventId]})]})]}),t.taskQueue&&g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Task Queue"}),g.jsxs("p",{className:"text-green-700",children:["Name: ",t.taskQueue.name]})]}),t.retryPolicy&&g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Retry Policy"}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("p",{className:"text-green-700",children:["Initial Interval: ",t.retryPolicy.initialInterval]}),g.jsxs("p",{className:"text-green-700",children:["Backoff Coefficient: ",t.retryPolicy.backoffCoefficient]}),g.jsxs("p",{className:"text-green-700",children:["Maximum Interval: ",t.retryPolicy.maximumInterval]}),g.jsxs("p",{className:"text-green-700",children:["Maximum Attempts: ",t.retryPolicy.maximumAttempts]}),((Q=t.retryPolicy.nonRetryableErrorTypes)==null?void 0:Q.length)>0&&g.jsxs("div",{children:[g.jsx("p",{className:"text-green-700",children:"Non-retryable Error Types:"}),g.jsx("ul",{className:"list-disc pl-4",children:t.retryPolicy.nonRetryableErrorTypes.map((J,j)=>g.jsx("li",{className:"text-green-700",children:J},j))})]})]})]}),t.attempts&&g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Attempts"}),g.jsxs("p",{className:"text-green-700",children:["Count: ",t.attempts]})]}),t.lastWorkerIdentity&&g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Worker"}),g.jsxs("p",{className:"text-green-700",children:["Last Identity: ",t.lastWorkerIdentity]})]}),t.workflowReusePolicy&&g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Workflow Reuse Policy"}),g.jsx("p",{className:"text-green-700",children:t.workflowReusePolicy})]})]})}},z=({content:D})=>{const Q=()=>{navigator.clipboard.writeText(D)};return g.jsx("button",{onClick:Q,className:"absolute top-4 right-4 p-1.5 rounded bg-white/80 hover:bg-white border border-gray-200 transition-colors",title:"Copy to clipboard",children:g.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-600",children:[g.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),g.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})};return g.jsxs("div",{ref:l,"data-node-panel":!0,"data-base-z-index":o,className:"fixed bg-white rounded-lg shadow-xl border border-gray-200 overflow-hidden",style:{...q(),width:d.width,height:d.height,zIndex:$,visibility:"visible",opacity:1},onClick:H,children:[g.jsx("button",{onClick:D=>{D.stopPropagation(),n(e)},className:"absolute top-2 right-2 p-1.5 hover:bg-gray-100 rounded-full transition-colors z-50",title:"Close panel",children:g.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-500",children:[g.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),g.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),g.jsx("div",{className:"flex absolute top-0 left-0 right-0 h-4 cursor-move","data-drag-handle":!0,onMouseDown:C,children:g.jsx("div",{className:"mx-auto p-1.5 select-none",children:g.jsxs("svg",{width:"20",height:"10",viewBox:"0 0 20 4",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-gray-400 pointer-events-none",children:[g.jsx("circle",{cx:"2",cy:"2",r:"1",fill:"currentColor"}),g.jsx("circle",{cx:"10",cy:"2",r:"1",fill:"currentColor"}),g.jsx("circle",{cx:"18",cy:"2",r:"1",fill:"currentColor"})]})})}),(ie||t.type==="activity")&&g.jsxs("div",{className:Bt("px-4 py-2 bg-gray-50 border-b",t.type==="activity"&&"pt-6"),children:[g.jsxs("div",{className:"flex items-center justify-between mb-2 pr-8",children:[g.jsx("div",{className:"flex items-center gap-2",children:ie&&g.jsxs(g.Fragment,{children:[g.jsxs("svg",{className:"w-4 h-4 text-gray-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("rect",{x:"9",y:"3",width:"6",height:"6",rx:"1"}),g.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),g.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3M6 15v-3h12v3"})]}),g.jsx("a",{href:ie,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View in Temporal"})]})}),g.jsxs("div",{className:"flex flex-col items-end",children:[g.jsx("span",{className:"text-xs text-gray-500",children:t.namespace}),t.taskQueue&&g.jsx("span",{className:"text-xs text-gray-500",children:t.taskQueue.name})]})]}),g.jsxs("div",{className:"flex flex-col gap-1",children:[t.workflowType&&g.jsxs("span",{className:"text-xs text-gray-500",children:[g.jsx("span",{className:"font-bold",children:"Type:"})," ",g.jsx("span",{className:"font-bold",children:t.workflowType})]}),t.type==="activity"&&t.activityType&&g.jsxs("span",{className:"text-xs text-gray-500",children:[g.jsx("span",{className:"font-bold",children:"Type:"})," ",g.jsx("span",{className:"font-bold",children:t.activityType})]}),t.workflowId&&t.type!=="activity"&&g.jsx("span",{className:"text-xs text-gray-500 select-all font-mono",children:t.workflowId})]})]}),g.jsxs("div",{className:"border-b flex gap-1 px-2 pt-2 bg-gray-50",children:[g.jsx(ce,{tab:"io",label:"Input/Output",disabled:!ne}),g.jsx(ce,{tab:"error",label:"Error",disabled:!ee}),g.jsx(ce,{tab:"time",label:"Time",disabled:!K}),g.jsx(ce,{tab:"common",label:"Common"})]}),g.jsx("div",{className:"overflow-y-auto",style:{height:"calc(100% - 116px)"},children:g.jsx("div",{className:"p-4",children:E()})}),g.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-se-resize",onMouseDown:X,style:{background:"linear-gradient(135deg, transparent 50%, #CBD5E1 50%)"}})]})}const ka=500,Gs=200,Cu=8,ck=80;function Zs(e){var l,u,d;const t=((l=e.data)==null?void 0:l.title)||"",n=e.id||"",r=n.length>40?n.slice(0,37)+"...":n,o=t.length*Cu,i=r.length*(Cu*.8),s=Math.max(o,i)+ck;return((u=e.data)==null?void 0:u.type)==="workflow"||((d=e.data)==null?void 0:d.type)==="childWorkflow",Math.max(Math.min(Math.max(s,ka*.75),ka),Gs)}function lk(e,t=800,n=100){const r=Zs(e),o=(t-r)/2-n;return e.position={x:o,y:0},e.style={...e.style,width:r},e}function Du(e,t,n,r,o=200,i=40){var p,v;const s=[...e],l=[...t],u=s.find(y=>y.id===n);if(!u)return console.warn(`Parent node ${n} not found for layout.`),{nodes:s,edges:l};(p=u.style)!=null&&p.width||(u.style={...u.style,width:Zs(u)});const d=u.position.x+(((v=u.style)==null?void 0:v.width)||Gs);let h=u.position.y;return r.sort((y,k)=>{const S=y.data.sortEventTime.localeCompare(k.data.sortEventTime);return S!==0?S:y.data.sortEventId-k.data.sortEventId}),r.forEach((y,k)=>{const S=Zs(y);if(y.style={...y.style,width:S},y.position={x:d+o,y:h},s.push(y),k===0)l.push({id:`${n}->${y.id}`,source:n,sourceHandle:`${n}-right`,target:y.id,targetHandle:`${y.id}-left`});else{const N=r[k-1];l.push({id:`${N.id}->${y.id}`,source:N.id,sourceHandle:`${N.id}-bottom`,target:y.id,targetHandle:`${y.id}-top`,type:"step",animated:!0})}h+=(y.height||80)+i}),{nodes:s,edges:l}}function uk(e,t,n,r,o=100){const i=e.filter(k=>k.id!==n),s=[...t],l=e.find(k=>k.id===n);if(!l)return{nodes:i,edges:s};const u=t.find(k=>k.target===n),d=t.find(k=>k.source===n),h=u==null?void 0:u.source,p=d==null?void 0:d.target,v=r.map((k,S)=>{var N;return{...k,position:{x:l.position.x,y:l.position.y+(S+1)*o},style:{...k.style,width:(N=l.style)==null?void 0:N.width}}}),y=[];if(v.forEach((k,S)=>{S>0&&y.push({id:`${v[S-1].id}->${k.id}`,source:v[S-1].id,target:k.id,sourceHandle:`${v[S-1].id}-bottom`,targetHandle:`${k.id}-top`,type:"step",animated:!0})}),h&&u){y.unshift({id:`${h}->${v[0].id}`,source:h,target:v[0].id,sourceHandle:u.sourceHandle,targetHandle:`${v[0].id}-top`,type:"step",animated:!0});const k=s.findIndex(S=>S.id===u.id);k!==-1&&s.splice(k,1)}if(p&&d){y.push({id:`${v[v.length-1].id}->${p}`,source:v[v.length-1].id,target:p,sourceHandle:`${v[v.length-1].id}-bottom`,targetHandle:d.targetHandle,type:"step",animated:!0});const k=s.findIndex(S=>S.id===d.id);k!==-1&&s.splice(k,1)}return i.push(...v),s.push(...y),{nodes:i,edges:s}}const dk=async e=>{var n,r;const t={nodes:[],edges:[]};for(const o of e)if(o.type==="activity")t.nodes.push({id:`${o.activityId}-${o.workflowId}`,position:{x:0,y:0},type:"workflowNode",data:{...o,title:o.activityType,description:"",type:"activity",count:1,parentNodeId:o.workflowId,workflowTaskCompletedEventId:o.workflowTaskCompletedEventId,payload:(n=o.payload)==null?void 0:n.map(i=>i.data?atob(i.data):void 0)}});else if(o.type==="workflow"||o.type==="childWorkflow"){const i={...o,title:o.workflowType,description:"",type:o.type,count:1,workflowTaskCompletedEventId:o.workflowTaskCompletedEventId,parentNodeId:o.parentWorkflowId,groupComponentIds:[],payload:(r=o.payload)==null?void 0:r.map(s=>s.data?atob(s.data):void 0)};t.nodes.push({id:o.workflowId,position:{x:0,y:0},type:"workflowNode",data:i})}else throw new Error("Invalid item type "+o.type);return fk(t),t};function fk(e){const t={};for(const o of e.nodes){const i=o.data;let s=hk(i);const l=i.title,u=`${s}::${l}`;t[u]||(t[u]={batchKey:s,title:l,nodes:[]}),t[u].nodes.push(o)}const n=[],r=4;for(const o in t){const i=t[o],{nodes:s}=i;if(s.length<r){n.push(...s);continue}const l=s.length;let u=null;for(const v of s){const y=v.data,k=y.startTime??y.scheduleTime;k&&(u===null||k<u)&&(u=k)}const d=s[0],h=d.data,p={...d,position:{...d.position},data:{...h,count:l,batchKey:i.batchKey,groupComponentIds:i.nodes.map(v=>({type:v.data.type,id:v.data.type==="activity"?v.data.activityId:v.data.workflowId,workflowRunId:v.data.workflowRunId||v.data.runId})),nonCompletedStatusExists:i.nodes.some(v=>v.data.status!=="COMPLETED")}};p._earliestTime=u,n.push(p)}n.sort((o,i)=>{const s=o._earliestTime,l=i._earliestTime;return!s&&!l?0:s?l?s.localeCompare(l):-1:1});for(const o of n)delete o._earliestTime;e.nodes=n}function hk(e){return!e.workflowTaskCompletedEventId&&e.type==="workflow"?e.workflowId:parseInt(e.workflowTaskCompletedEventId,10).toString().padStart(10,"0")}const mk=()=>{const[e,t]=b.useState(!0),n=b.useRef(null),r=b.useRef(!0),o=b.useCallback((d,h,p,v=.75,y=800)=>{!d||!r.current||d.setCenter(h,p,{zoom:v,duration:y})},[]),i=b.useCallback(d=>{!d||!r.current||d.fitView({padding:.2,duration:800,minZoom:.4})},[]),s=b.useCallback(d=>{n.current=d},[]),l=b.useCallback(()=>{!n.current||!r.current||n.current.fitView({padding:.2,duration:800,minZoom:.4})},[]),u=b.useCallback(d=>{r.current=d,t(d)},[]);return{autoZoomEnabled:e,setAutoZoomEnabled:u,handleZoom:o,fitView:i,onInit:s,onGraphLoad:l}};function pk(){const[e,t]=b.useState({nodes:[],edges:[],rootWorkflowId:void 0}),[n,r]=W.useState(!1),o=b.useRef(e),i=b.useRef(null),s=.4,{autoZoomEnabled:l,setAutoZoomEnabled:u,handleZoom:d,fitView:h,onInit:p,onGraphLoad:v}=mk();b.useEffect(()=>{o.current=e},[e]);const y=async(I,C)=>{const X=await T(I,C),q=X.nodes.find(U=>U.id===I);if(!q){console.error(`Root node ${I} not found in graph data.`);return}const H=X.nodes.filter(U=>U.id!==I);q.data.isExpanded=!0;const ee=lk(q),{nodes:K,edges:ne}=Du([ee],[],I,H,150,20);t({nodes:K,edges:ne,rootWorkflowId:I}),r(!0),setTimeout(v,100)},k=b.useCallback(async(I,C)=>{const{nodes:X,edges:q}=await N(I);return new Promise(H=>{t(ee=>{const K=ee.nodes.filter(ie=>!X.includes(ie.id)).map(ie=>ie.id===I?{...ie,data:{...ie.data,isExpanded:!1}}:ie),ne=ee.edges.filter(ie=>!q.includes(ie.id)),U={nodes:K,edges:ne};return o.current=U,H(U),U})})},[]),S=b.useCallback(async(I,C)=>{try{const X=o.current,q=X.nodes.find(K=>K.id===I);if(!q)return;const H=X.nodes.filter(K=>K.data.type==="workflow"&&K.data.parentWorkflowId===q.data.parentWorkflowId&&K.data.workflowId!==I&&!q.data.groupComponentIds.some(ne=>ne.id===K.id)&&K.data.isExpanded);for(const K of H)await k(K.id,K.data.workflowRunId);const ee=await T(I,C);t(K=>{const ne=ee.nodes.filter(j=>j.id!==I).map(j=>({...j,data:{...j.data,parentNodeId:I}})),U=K.nodes.map(j=>j.id===I?{...j,data:{...j.data,isExpanded:!0}}:j),{nodes:ie,edges:ce}=Du(U,K.edges,I,ne),E=ee.edges.map(j=>({...j,id:`${j.id}-${Date.now()}`})),D={nodes:ie.map(j=>j.id===I?{...j,data:{...j.data,isLoading:!1}}:j),edges:[...ce,...E]};o.current=D;const Q=ie.find(j=>j.id===I),J=ie.filter(j=>j.data.parentNodeId===I);return Q&&setTimeout(()=>{const j=J.reduce((se,ae)=>Math.max(se,ae.position.x),Q.position.x),G=(Q.position.x+j)/2;d(i.current,G,Q.position.y)},50),D})}catch(X){console.error("Error expanding child workflow:",X)}},[d,k]),N=async(I,C)=>{const X=o.current.nodes.find(ne=>ne.id===I);if(!X)return console.error(`Root node ${I} not found in graph data.`),{nodes:[],edges:[]};const q=new Set,H=new Set,ee=new Set,K=ne=>{ee.has(ne)||(ee.add(ne),ne!==I&&q.add(ne),o.current.edges.forEach(U=>{var ie;if(U.source===ne){const ce=o.current.nodes.find(E=>E.id===U.target);if(!ce){console.error(`Target node ${U.target} not found in graph data.`);return}(ce.data.parentNodeId===I&&!((ie=X.data.groupComponentIds)!=null&&ie.some(E=>E.id===ce.id))||q.has(ce.data.parentNodeId))&&(H.add(U.id),K(U.target))}}))};return K(I),{nodes:Array.from(q),edges:Array.from(H)}},T=async(I,C)=>{const X=await Ro(I,C);if(!X)return console.error(`Workflow ${I} not found`),{nodes:[],edges:[]};const q=await hf(I,C),H=await gc(I,C),ee=[X,...q,...H];ee.sort((U,ie)=>{const ce=U.taskId?parseInt(U.taskId):0,E=ie.taskId?parseInt(ie.taskId):0;return ce-E});const K=await dk(ee),ne=H.map(async U=>{try{await ok(U.namespace,U.workflowId,U.runId)}catch(ie){console.error(`Error loading child workflow data for ${U.workflowId}:`,ie)}});return K.nodes=K.nodes.map(U=>({...U,data:{...U.data,isLoading:rk(U.id)}})),Promise.all(ne).catch(U=>console.error("Error loading child workflows:",U)),K},$=b.useCallback(async I=>{try{const C=o.current.nodes.find(H=>H.id===I);if(!C||!C.data.count)return;const q=(await xw(C.data.groupComponentIds,C.data.workflowId,C.data.workflowRunId||C.data.runId)).map(H=>({id:H.type==="activity"?`${H.activityId}-${H.workflowId}`:H.workflowId,type:"workflowNode",data:{...H,parentWorkflowId:C.data.parentWorkflowId,type:C.data.type,title:H.activityType||H.workflowType,workflowId:H.workflowId,count:1,groupComponentIds:[]},position:{x:0,y:0}}));q.sort((H,ee)=>{const K=H.data.taskId||"",ne=ee.data.taskId||"";return K.localeCompare(ne)}),t(H=>{const ee=new Set,K=z=>{H.edges.forEach(D=>{D.source===z&&(ee.add(D.target),K(D.target))})};K(I);const ne=q.length*100;C.data.count=1;const{nodes:U,edges:ie}=uk(H.nodes,H.edges,I,q),E={nodes:U.map(z=>ee.has(z.id)?{...z,position:{...z.position,y:z.position.y+ne+100}}:z),edges:ie};return o.current=E,setTimeout(()=>{d(i.current,C.position.x,C.position.y)},100),E})}catch(C){console.error("Error spreading batch nodes:",C)}},[d]);return b.useEffect(()=>{const I=({detail:{workflowId:C,isLoading:X}})=>{t(q=>{const H=q.nodes.map(ee=>ee.id===C?{...ee,data:{...ee.data,isLoading:X}}:ee);return{...q,nodes:H}})};return window.addEventListener("workflow-loading-change",I),()=>window.removeEventListener("workflow-loading-change",I)},[]),{graphData:e,setGraphData:t,onTemporalRootWorkflowDataCollected:y,expandChildWorkflowNode:S,collapseChildWorkflowNode:k,isRootLoaded:n,flowInstance:i,MIN_ZOOM:s,onSpreadBatchNodes:$,autoZoomEnabled:l,setAutoZoomEnabled:u,onInit:p}}const gk=(e,t)=>{const n=new Set,r=o=>{n.add(o),e.edges.forEach(i=>{i.source===o&&!n.has(i.target)&&r(i.target)})};return t.forEach(r),Array.from(n)};function yk(e,t){const[n,r]=b.useState(!1),[o,i]=b.useState(null),s=b.useRef(null),l=.4,u=b.useCallback(v=>new Set(gk(e,[v])),[e]),d=b.useCallback(v=>{if(!s.current||!v)return;const y=e.nodes.filter(ee=>ee.position.x>=v.position.x);if(y.length===0){s.current.setCenter(v.position.x,v.position.y,{zoom:1,duration:800});return}const k=y.reduce((ee,K)=>({minX:Math.min(ee.minX,K.position.x||0),minY:Math.min(ee.minY,K.position.y||0),maxX:Math.max(ee.maxX,K.position.x||0),maxY:Math.max(ee.maxY,K.position.y||0)}),{minX:v.position.x||0,minY:v.position.y||0,maxX:v.position.x||0,maxY:v.position.y||0});if(Object.values(k).some(isNaN)){console.warn("Invalid bounds detected, falling back to selected node"),s.current.setCenter(v.position.x,v.position.y,{zoom:1,duration:800});return}const S=(k.minX+k.maxX)/2,N=(k.minY+k.maxY)/2,T=100,$=Math.max(k.maxX-k.minX+T*2,100),I=Math.max(k.maxY-k.minY+T*2,100),C=s.current.getViewport(),X=C.width||1e3,q=C.height||800;let H=Math.min(X/$,q/I);H=Math.max(l,Math.min(isNaN(H)?1:H,1.5)),s.current.setCenter(isNaN(S)?v.position.x:S,isNaN(N)?v.position.y:N,{zoom:H,duration:800})},[e.nodes]),h=b.useCallback(v=>{if(i(v),!v){t(S=>({...S,nodes:S.nodes.map(N=>({...N,style:{...N.style,opacity:1}}))})),s.current&&s.current.fitView({padding:.2,minZoom:l,duration:800});return}const y=u(v),k=e.nodes.find(S=>S.id===v);t(S=>({...S,nodes:S.nodes.map(N=>({...N,style:{...N.style,opacity:y.has(N.id)?1:.2}}))})),s.current&&k&&setTimeout(()=>{d(k)},50)},[e,t,u,d]),p=b.useCallback(()=>{i(null),t(v=>({...v,nodes:v.nodes.map(y=>({...y,style:{...y.style,opacity:1}}))})),s.current&&s.current.fitView({padding:.2,minZoom:l,duration:800})},[t]);return{showFocus:n,setShowFocus:r,selectedFocusedWorkflow:o,handleFocusChange:h,handleFocusReset:p,flowInstance:s}}function vk({onTemporalRootWorkflowDataCollected:e,onBeforeSubmit:t}){const[n,r]=b.useState(!1),[o,i]=b.useState(!1),s=async(d,h)=>{const p=await gc(d,h);for(const y of p)await s(y.workflowId,h);const v=await hf(d,h);for(const y of v)await bw(d,y.activityId,h);await vw(d,h)};return{isTemporalModalOpen:n,setIsTemporalModalOpen:r,onTemporalModalSubmit:async d=>{if(t&&t(),!await nk())throw new Error("The server is not running. Please start the server and try again.");const p=await Xs(d.namespace,d.workflowId,d.runId,2);r(!1),await e(d.workflowId,p)},refreshWorkflowData:async(d,h)=>{try{i(!0);const p=await Ro(d,h);if(!p){console.error("Workflow not found for refresh");return}await s(d,h);const v=await Xs(p.namespace,d,h,2);await e(d,v)}catch(p){console.error("Error refreshing workflow data:",p)}finally{i(!1)}},isRefreshing:o}}function wk({isOpen:e,onClose:t,onSubmit:n}){const[r,o]=b.useState({namespace:"",workflowId:"",runId:""}),[i,s]=b.useState(!1),[l,u]=b.useState(null);if(!e)return null;const d=async h=>{h.preventDefault(),s(!0),u(null);try{await n(r),t()}catch(p){u(p instanceof Error?p.message:"An error occurred while fetching workflow data")}finally{s(!1)}};return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[g.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[g.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Temporal Workflow Data"}),g.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:g.jsx(pr,{className:"w-5 h-5 text-gray-500"})})]}),g.jsxs("form",{onSubmit:d,className:"p-4 space-y-4",children:[l&&g.jsx("div",{className:"p-3 bg-red-100 text-red-700 rounded-md text-sm",children:l}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Namespace"}),g.jsx("input",{type:"text",value:r.namespace,onChange:h=>o(p=>({...p,namespace:h.target.value})),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:i})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Workflow ID"}),g.jsx("input",{type:"text",value:r.workflowId,onChange:h=>o(p=>({...p,workflowId:h.target.value})),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:i})]}),g.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t mt-4",children:[g.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",disabled:i,children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-500 rounded-md hover:bg-blue-600 transition-colors disabled:bg-blue-300",disabled:i,children:i?"Loading...":"Get Data"})]})]})]})})}function bk(){const{graphData:e,setGraphData:t,onTemporalRootWorkflowDataCollected:n,expandChildWorkflowNode:r,collapseChildWorkflowNode:o,isRootLoaded:i,flowInstance:s,MIN_ZOOM:l,onSpreadBatchNodes:u,autoZoomEnabled:d,setAutoZoomEnabled:h,onInit:p}=pk(),{showFocus:v,setShowFocus:y,selectedFocusedWorkflow:k,handleFocusChange:S,handleFocusReset:N,flowInstance:T}=yk(e,t),{isTemporalModalOpen:$,setIsTemporalModalOpen:I,onTemporalModalSubmit:C,refreshWorkflowData:X,isRefreshing:q}=vk({onTemporalRootWorkflowDataCollected:n,onBeforeSubmit:()=>{Q([])}}),[H,ee]=W.useState(null),[K,ne]=W.useState(!1),[U,ie]=b.useState(!0),[ce,E]=b.useState(!1),z=W.useRef(!1),[D,Q]=b.useState([]),J=(ae,de,we)=>{const ke=ae.workflowId+(ae.runId?`-${ae.runId}`:"");ke&&Q(Ne=>{const De=Ne.findIndex(Pe=>Pe.id===ke);if(De>=0){const Pe=[...Ne];return Pe[De]={...Pe[De],position:de,baseZIndex:Math.max(we||0,1e3+Ne.length)},Pe}return[...Ne,{id:ke,node:ae,position:de,baseZIndex:Math.max(we||0,1e3+Ne.length)}]})},j=ae=>{Q(de=>de.filter(we=>we.id!==ae))},G=b.useMemo(()=>({workflowNode:ae=>g.jsx(hw,{...ae,expandChildWorkflowNode:r,collapseChildWorkflowNode:o,onSpreadBatchNodes:u,onShowNodeData:J})}),[i]),se=W.useCallback(ae=>{t(de=>({...de,nodes:zd(ae,de.nodes)}))},[t]);return W.useEffect(()=>{const ae=new URLSearchParams(window.location.search),de=decodeURIComponent(ae.get("id")||""),we=ae.get("namespace"),ke=ae.get("runID");ee(null),(async()=>{if(!z.current)if(z.current=!0,de&&we&&ke){ne(!0);try{await C({workflowId:de,namespace:we,runId:ke})}catch(De){console.error("Error loading workflow from URL params:",De),ee(De instanceof Error?De.message:"An error occurred while loading the workflow")}finally{ne(!1)}}else ee("Invalid URL parameters"),ne(!1)})()},[]),g.jsxs("div",{className:"w-screen h-screen flex flex-col bg-gray-50",children:[K&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-xl flex items-center space-x-3",children:[g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),g.jsx("div",{className:"text-gray-700",children:"Loading workflow data..."})]})}),H&&g.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[g.jsx("strong",{className:"font-bold",children:"Error: "}),g.jsx("span",{className:"block sm:inline",children:H}),g.jsxs("button",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",onClick:()=>ee(null),children:[g.jsx("span",{className:"sr-only",children:"Dismiss"}),g.jsx(pr,{className:"h-5 w-5"})]})]}),g.jsx("div",{className:"flex-grow h-full",children:g.jsxs(rf,{nodes:e.nodes,edges:e.edges,onNodesChange:se,nodeTypes:G,fitView:!1,minZoom:l,className:"bg-gray-50",onInit:ae=>{s.current=ae,T.current=ae,p(ae)},nodesDraggable:!1,edgesUpdatable:!1,children:[g.jsx(nw,{}),g.jsx(Gv,{}),g.jsx(No,{position:"bottom-right",className:"flex items-center gap-2 bg-transparent z-10 mb-2 mr-2",children:g.jsxs("button",{onClick:()=>ie(!U),className:"bg-blue-500 px-3 py-1 rounded-lg shadow-lg hover:bg-blue-600 text-white transition-colors",children:[U?"Hide":"Show"," Minimap"]})}),U&&g.jsx(zv,{zoomable:!0,pannable:!0,className:"bg-white rounded-lg shadow-lg",style:{backgroundColor:"white",width:300,height:200},maskColor:"rgba(0, 0, 0, 0.1)",nodeColor:"#aaa",nodeStrokeWidth:3,nodeBorderRadius:2}),g.jsx(No,{position:"top-right",className:"flex items-center gap-2 bg-transparent",children:g.jsx("div",{className:"bg-white p-2 rounded-lg shadow-lg",children:g.jsx(ik,{showFocus:v,setShowFocus:y,autoZoomEnabled:d,setAutoZoomEnabled:h,setIsTemporalModalOpen:I,refreshWorkflowData:X,currentWorkflow:k&&{id:k},isRefreshing:q,onTemporalRootWorkflowDataCollected:n,isSearchModalOpen:ce,setIsSearchModalOpen:E})})})]})}),D.map(ae=>g.jsx(sk,{id:ae.id,data:ae.node,position:ae.position,onClose:j,baseZIndex:ae.baseZIndex},ae.id)),v&&g.jsx(mw,{nodes:e.nodes,onFocusChange:S,selectedWorkflow:k,onReset:N,onClose:()=>y(!1)}),g.jsx(wk,{isOpen:$,onClose:()=>I(!1),onSubmit:C}),g.jsx(yh,{isOpen:ce,onClose:()=>E(!1),onTemporalModalSubmit:C,onShowNodeData:J})]})}Iu(document.getElementById("root")).render(g.jsx(b.StrictMode,{children:g.jsx(bk,{})}));
