import{r as b,a as Ou,g as Zs,R as W,c as Pr,t as ol}from"./vendor-DBEsKlBz.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var ju={exports:{}},Ya={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lh=b,Fh=Symbol.for("react.element"),Wh=Symbol.for("react.fragment"),Bh=Object.prototype.hasOwnProperty,Hh=Lh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zh={key:!0,ref:!0,__self:!0,__source:!0};function Iu(e,t,n){var r,o={},i=null,s=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)Bh.call(t,r)&&!zh.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:Fh,type:e,key:i,ref:s,props:o,_owner:Hh.current}}Ya.Fragment=Wh;Ya.jsx=Iu;Ya.jsxs=Iu;ju.exports=Ya;var g=ju.exports,Pu,al=Ou;Pu=al.createRoot,al.hydrateRoot;function Nt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Nt(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Mu={exports:{}},Au={},$u={exports:{}},Ru={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wr=b;function Yh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vh=typeof Object.is=="function"?Object.is:Yh,qh=Wr.useState,Kh=Wr.useEffect,Uh=Wr.useLayoutEffect,Xh=Wr.useDebugValue;function Gh(e,t){var n=t(),r=qh({inst:{value:n,getSnapshot:t}}),o=r[0].inst,i=r[1];return Uh(function(){o.value=n,o.getSnapshot=t,Fi(o)&&i({inst:o})},[e,n,t]),Kh(function(){return Fi(o)&&i({inst:o}),e(function(){Fi(o)&&i({inst:o})})},[e]),Xh(n),n}function Fi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Vh(e,n)}catch{return!0}}function Zh(e,t){return t()}var Qh=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Zh:Gh;Ru.useSyncExternalStore=Wr.useSyncExternalStore!==void 0?Wr.useSyncExternalStore:Qh;$u.exports=Ru;var Jh=$u.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Va=b,em=Jh;function tm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nm=typeof Object.is=="function"?Object.is:tm,rm=em.useSyncExternalStore,om=Va.useRef,am=Va.useEffect,im=Va.useMemo,sm=Va.useDebugValue;Au.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var i=om(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=im(function(){function u(y){if(!d){if(d=!0,h=y,y=r(y),o!==void 0&&s.hasValue){var k=s.value;if(o(k,y))return p=k}return p=y}if(k=p,nm(h,y))return k;var S=r(y);return o!==void 0&&o(k,S)?k:(h=y,p=S)}var d=!1,h,p,v=n===void 0?null:n;return[function(){return u(t())},v===null?void 0:function(){return u(v())}]},[t,n,r,o]);var l=rm(e,i[0],i[1]);return am(function(){s.hasValue=!0,s.value=l},[l]),sm(l),l};Mu.exports=Au;var cm=Mu.exports;const lm=Zs(cm),um={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},il=e=>{let t;const n=new Set,r=(h,p)=>{const v=typeof h=="function"?h(t):h;if(!Object.is(v,t)){const y=t;t=p??(typeof v!="object"||v===null)?v:Object.assign({},t,v),n.forEach(k=>k(t,y))}},o=()=>t,u={setState:r,getState:o,getInitialState:()=>d,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(um?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(r,o,u);return u},dm=e=>e?il(e):il,{useDebugValue:fm}=W,{useSyncExternalStoreWithSelector:hm}=lm,mm=e=>e;function Lu(e,t=mm,n){const r=hm(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return fm(r),r}const sl=(e,t)=>{const n=dm(e),r=(o,i=t)=>Lu(n,o,i);return Object.assign(r,n),r},pm=(e,t)=>e?sl(e,t):sl;function St(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var gm={value:()=>{}};function qa(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ea(n)}function Ea(e){this._=e}function ym(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ea.prototype=qa.prototype={constructor:Ea,on:function(e,t){var n=this._,r=ym(e+"",n),o,i=-1,s=r.length;if(arguments.length<2){for(;++i<s;)if((o=(e=r[i]).type)&&(o=vm(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(o=(e=r[i]).type)n[o]=cl(n[o],e.name,t);else if(t==null)for(o in n)n[o]=cl(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ea(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};function vm(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function cl(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=gm,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var ss="http://www.w3.org/1999/xhtml";const ll={svg:"http://www.w3.org/2000/svg",xhtml:ss,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ka(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ll.hasOwnProperty(t)?{space:ll[t],local:e}:e}function wm(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ss&&t.documentElement.namespaceURI===ss?t.createElement(e):t.createElementNS(n,e)}}function bm(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Fu(e){var t=Ka(e);return(t.local?bm:wm)(t)}function xm(){}function Qs(e){return e==null?xm:function(){return this.querySelector(e)}}function Sm(e){typeof e!="function"&&(e=Qs(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,l=r[o]=new Array(s),u,d,h=0;h<s;++h)(u=i[h])&&(d=e.call(u,u.__data__,h,i))&&("__data__"in u&&(d.__data__=u.__data__),l[h]=d);return new Kt(r,this._parents)}function km(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Em(){return[]}function Wu(e){return e==null?Em:function(){return this.querySelectorAll(e)}}function _m(e){return function(){return km(e.apply(this,arguments))}}function Nm(e){typeof e=="function"?e=_m(e):e=Wu(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var s=t[i],l=s.length,u,d=0;d<l;++d)(u=s[d])&&(r.push(e.call(u,u.__data__,d,s)),o.push(u));return new Kt(r,o)}function Bu(e){return function(){return this.matches(e)}}function Hu(e){return function(t){return t.matches(e)}}var Tm=Array.prototype.find;function Cm(e){return function(){return Tm.call(this.children,e)}}function Dm(){return this.firstElementChild}function Om(e){return this.select(e==null?Dm:Cm(typeof e=="function"?e:Hu(e)))}var jm=Array.prototype.filter;function Im(){return Array.from(this.children)}function Pm(e){return function(){return jm.call(this.children,e)}}function Mm(e){return this.selectAll(e==null?Im:Pm(typeof e=="function"?e:Hu(e)))}function Am(e){typeof e!="function"&&(e=Bu(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,l=r[o]=[],u,d=0;d<s;++d)(u=i[d])&&e.call(u,u.__data__,d,i)&&l.push(u);return new Kt(r,this._parents)}function zu(e){return new Array(e.length)}function $m(){return new Kt(this._enter||this._groups.map(zu),this._parents)}function Da(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Da.prototype={constructor:Da,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Rm(e){return function(){return e}}function Lm(e,t,n,r,o,i){for(var s=0,l,u=t.length,d=i.length;s<d;++s)(l=t[s])?(l.__data__=i[s],r[s]=l):n[s]=new Da(e,i[s]);for(;s<u;++s)(l=t[s])&&(o[s]=l)}function Fm(e,t,n,r,o,i,s){var l,u,d=new Map,h=t.length,p=i.length,v=new Array(h),y;for(l=0;l<h;++l)(u=t[l])&&(v[l]=y=s.call(u,u.__data__,l,t)+"",d.has(y)?o[l]=u:d.set(y,u));for(l=0;l<p;++l)y=s.call(e,i[l],l,i)+"",(u=d.get(y))?(r[l]=u,u.__data__=i[l],d.delete(y)):n[l]=new Da(e,i[l]);for(l=0;l<h;++l)(u=t[l])&&d.get(v[l])===u&&(o[l]=u)}function Wm(e){return e.__data__}function Bm(e,t){if(!arguments.length)return Array.from(this,Wm);var n=t?Fm:Lm,r=this._parents,o=this._groups;typeof e!="function"&&(e=Rm(e));for(var i=o.length,s=new Array(i),l=new Array(i),u=new Array(i),d=0;d<i;++d){var h=r[d],p=o[d],v=p.length,y=Hm(e.call(h,h&&h.__data__,d,r)),k=y.length,S=l[d]=new Array(k),N=s[d]=new Array(k),T=u[d]=new Array(v);n(h,p,S,N,T,y,t);for(var $=0,P=0,C,X;$<k;++$)if(C=S[$]){for($>=P&&(P=$+1);!(X=N[P])&&++P<k;);C._next=X||null}}return s=new Kt(s,r),s._enter=l,s._exit=u,s}function Hm(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zm(){return new Kt(this._exit||this._groups.map(zu),this._parents)}function Ym(e,t,n){var r=this.enter(),o=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function Vm(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,s=Math.min(o,i),l=new Array(o),u=0;u<s;++u)for(var d=n[u],h=r[u],p=d.length,v=l[u]=new Array(p),y,k=0;k<p;++k)(y=d[k]||h[k])&&(v[k]=y);for(;u<o;++u)l[u]=n[u];return new Kt(l,this._parents)}function qm(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,i=r[o],s;--o>=0;)(s=r[o])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function Km(e){e||(e=Um);function t(p,v){return p&&v?e(p.__data__,v.__data__):!p-!v}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var s=n[i],l=s.length,u=o[i]=new Array(l),d,h=0;h<l;++h)(d=s[h])&&(u[h]=d);u.sort(t)}return new Kt(o,this._parents).order()}function Um(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Xm(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Gm(){return Array.from(this)}function Zm(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var s=r[o];if(s)return s}return null}function Qm(){let e=0;for(const t of this)++e;return e}function Jm(){return!this.node()}function ep(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],i=0,s=o.length,l;i<s;++i)(l=o[i])&&e.call(l,l.__data__,i,o);return this}function tp(e){return function(){this.removeAttribute(e)}}function np(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rp(e,t){return function(){this.setAttribute(e,t)}}function op(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ap(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ip(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function sp(e,t){var n=Ka(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?np:tp:typeof t=="function"?n.local?ip:ap:n.local?op:rp)(n,t))}function Yu(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function cp(e){return function(){this.style.removeProperty(e)}}function lp(e,t,n){return function(){this.style.setProperty(e,t,n)}}function up(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function dp(e,t,n){return arguments.length>1?this.each((t==null?cp:typeof t=="function"?up:lp)(e,t,n??"")):Br(this.node(),e)}function Br(e,t){return e.style.getPropertyValue(t)||Yu(e).getComputedStyle(e,null).getPropertyValue(t)}function fp(e){return function(){delete this[e]}}function hp(e,t){return function(){this[e]=t}}function mp(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function pp(e,t){return arguments.length>1?this.each((t==null?fp:typeof t=="function"?mp:hp)(e,t)):this.node()[e]}function Vu(e){return e.trim().split(/^|\s+/)}function Js(e){return e.classList||new qu(e)}function qu(e){this._node=e,this._names=Vu(e.getAttribute("class")||"")}qu.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ku(e,t){for(var n=Js(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function Uu(e,t){for(var n=Js(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function gp(e){return function(){Ku(this,e)}}function yp(e){return function(){Uu(this,e)}}function vp(e,t){return function(){(t.apply(this,arguments)?Ku:Uu)(this,e)}}function wp(e,t){var n=Vu(e+"");if(arguments.length<2){for(var r=Js(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?vp:t?gp:yp)(n,t))}function bp(){this.textContent=""}function xp(e){return function(){this.textContent=e}}function Sp(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function kp(e){return arguments.length?this.each(e==null?bp:(typeof e=="function"?Sp:xp)(e)):this.node().textContent}function Ep(){this.innerHTML=""}function _p(e){return function(){this.innerHTML=e}}function Np(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Tp(e){return arguments.length?this.each(e==null?Ep:(typeof e=="function"?Np:_p)(e)):this.node().innerHTML}function Cp(){this.nextSibling&&this.parentNode.appendChild(this)}function Dp(){return this.each(Cp)}function Op(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jp(){return this.each(Op)}function Ip(e){var t=typeof e=="function"?e:Fu(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Pp(){return null}function Mp(e,t){var n=typeof e=="function"?e:Fu(e),r=t==null?Pp:typeof t=="function"?t:Qs(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ap(){var e=this.parentNode;e&&e.removeChild(this)}function $p(){return this.each(Ap)}function Rp(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Lp(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Fp(e){return this.select(e?Lp:Rp)}function Wp(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Bp(e){return function(t){e.call(this,t,this.__data__)}}function Hp(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function zp(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,i;n<o;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function Yp(e,t,n){return function(){var r=this.__on,o,i=Bp(t);if(r){for(var s=0,l=r.length;s<l;++s)if((o=r[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=t;return}}this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function Vp(e,t,n){var r=Hp(e+""),o,i=r.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,d=l.length,h;u<d;++u)for(o=0,h=l[u];o<i;++o)if((s=r[o]).type===h.type&&s.name===h.name)return h.value}return}for(l=t?Yp:zp,o=0;o<i;++o)this.each(l(r[o],t,n));return this}function Xu(e,t,n){var r=Yu(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function qp(e,t){return function(){return Xu(this,e,t)}}function Kp(e,t){return function(){return Xu(this,e,t.apply(this,arguments))}}function Up(e,t){return this.each((typeof t=="function"?Kp:qp)(e,t))}function*Xp(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length,s;o<i;++o)(s=r[o])&&(yield s)}var Gu=[null];function Kt(e,t){this._groups=e,this._parents=t}function Mo(){return new Kt([[document.documentElement]],Gu)}function Gp(){return this}Kt.prototype=Mo.prototype={constructor:Kt,select:Sm,selectAll:Nm,selectChild:Om,selectChildren:Mm,filter:Am,data:Bm,enter:$m,exit:zm,join:Ym,merge:Vm,selection:Gp,order:qm,sort:Km,call:Xm,nodes:Gm,node:Zm,size:Qm,empty:Jm,each:ep,attr:sp,style:dp,property:pp,classed:wp,text:kp,html:Tp,raise:Dp,lower:jp,append:Ip,insert:Mp,remove:$p,clone:Fp,datum:Wp,on:Vp,dispatch:Up,[Symbol.iterator]:Xp};function Gt(e){return typeof e=="string"?new Kt([[document.querySelector(e)]],[document.documentElement]):new Kt([[e]],Gu)}function Zp(e){let t;for(;t=e.sourceEvent;)e=t;return e}function tn(e,t){if(e=Zp(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const Qp={passive:!1},xo={capture:!0,passive:!1};function Wi(e){e.stopImmediatePropagation()}function Rr(e){e.preventDefault(),e.stopImmediatePropagation()}function Zu(e){var t=e.document.documentElement,n=Gt(e).on("dragstart.drag",Rr,xo);"onselectstart"in t?n.on("selectstart.drag",Rr,xo):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Qu(e,t){var n=e.document.documentElement,r=Gt(e).on("dragstart.drag",null);t&&(r.on("click.drag",Rr,xo),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ua=e=>()=>e;function cs(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:s,y:l,dx:u,dy:d,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:h}})}cs.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Jp(e){return!e.ctrlKey&&!e.button}function eg(){return this.parentNode}function tg(e,t){return t??{x:e.x,y:e.y}}function ng(){return navigator.maxTouchPoints||"ontouchstart"in this}function rg(){var e=Jp,t=eg,n=tg,r=ng,o={},i=qa("start","drag","end"),s=0,l,u,d,h,p=0;function v(C){C.on("mousedown.drag",y).filter(r).on("touchstart.drag",N).on("touchmove.drag",T,Qp).on("touchend.drag touchcancel.drag",$).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(C,X){if(!(h||!e.call(this,C,X))){var q=P(this,t.call(this,C,X),C,X,"mouse");q&&(Gt(C.view).on("mousemove.drag",k,xo).on("mouseup.drag",S,xo),Zu(C.view),Wi(C),d=!1,l=C.clientX,u=C.clientY,q("start",C))}}function k(C){if(Rr(C),!d){var X=C.clientX-l,q=C.clientY-u;d=X*X+q*q>p}o.mouse("drag",C)}function S(C){Gt(C.view).on("mousemove.drag mouseup.drag",null),Qu(C.view,d),Rr(C),o.mouse("end",C)}function N(C,X){if(e.call(this,C,X)){var q=C.changedTouches,H=t.call(this,C,X),te=q.length,K,ne;for(K=0;K<te;++K)(ne=P(this,H,C,X,q[K].identifier,q[K]))&&(Wi(C),ne("start",C,q[K]))}}function T(C){var X=C.changedTouches,q=X.length,H,te;for(H=0;H<q;++H)(te=o[X[H].identifier])&&(Rr(C),te("drag",C,X[H]))}function $(C){var X=C.changedTouches,q=X.length,H,te;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),H=0;H<q;++H)(te=o[X[H].identifier])&&(Wi(C),te("end",C,X[H]))}function P(C,X,q,H,te,K){var ne=i.copy(),U=tn(K||q,X),ie,ue,E;if((E=n.call(C,new cs("beforestart",{sourceEvent:q,target:v,identifier:te,active:s,x:U[0],y:U[1],dx:0,dy:0,dispatch:ne}),H))!=null)return ie=E.x-U[0]||0,ue=E.y-U[1]||0,function z(D,Q,J){var j=U,G;switch(D){case"start":o[te]=z,G=s++;break;case"end":delete o[te],--s;case"drag":U=tn(J||Q,X),G=s;break}ne.call(D,C,new cs(D,{sourceEvent:Q,subject:E,target:v,identifier:te,active:G,x:U[0]+ie,y:U[1]+ue,dx:U[0]-j[0],dy:U[1]-j[1],dispatch:ne}),H)}}return v.filter=function(C){return arguments.length?(e=typeof C=="function"?C:ua(!!C),v):e},v.container=function(C){return arguments.length?(t=typeof C=="function"?C:ua(C),v):t},v.subject=function(C){return arguments.length?(n=typeof C=="function"?C:ua(C),v):n},v.touchable=function(C){return arguments.length?(r=typeof C=="function"?C:ua(!!C),v):r},v.on=function(){var C=i.on.apply(i,arguments);return C===i?v:C},v.clickDistance=function(C){return arguments.length?(p=(C=+C)*C,v):Math.sqrt(p)},v}function ec(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ju(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ao(){}var So=.7,Oa=1/So,Lr="\\s*([+-]?\\d+)\\s*",ko="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",yn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",og=/^#([0-9a-f]{3,8})$/,ag=new RegExp(`^rgb\\(${Lr},${Lr},${Lr}\\)$`),ig=new RegExp(`^rgb\\(${yn},${yn},${yn}\\)$`),sg=new RegExp(`^rgba\\(${Lr},${Lr},${Lr},${ko}\\)$`),cg=new RegExp(`^rgba\\(${yn},${yn},${yn},${ko}\\)$`),lg=new RegExp(`^hsl\\(${ko},${yn},${yn}\\)$`),ug=new RegExp(`^hsla\\(${ko},${yn},${yn},${ko}\\)$`),ul={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ec(Ao,Eo,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:dl,formatHex:dl,formatHex8:dg,formatHsl:fg,formatRgb:fl,toString:fl});function dl(){return this.rgb().formatHex()}function dg(){return this.rgb().formatHex8()}function fg(){return ed(this).formatHsl()}function fl(){return this.rgb().formatRgb()}function Eo(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=og.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?hl(t):n===3?new Ht(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?da(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?da(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ag.exec(e))?new Ht(t[1],t[2],t[3],1):(t=ig.exec(e))?new Ht(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=sg.exec(e))?da(t[1],t[2],t[3],t[4]):(t=cg.exec(e))?da(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=lg.exec(e))?gl(t[1],t[2]/100,t[3]/100,1):(t=ug.exec(e))?gl(t[1],t[2]/100,t[3]/100,t[4]):ul.hasOwnProperty(e)?hl(ul[e]):e==="transparent"?new Ht(NaN,NaN,NaN,0):null}function hl(e){return new Ht(e>>16&255,e>>8&255,e&255,1)}function da(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ht(e,t,n,r)}function hg(e){return e instanceof Ao||(e=Eo(e)),e?(e=e.rgb(),new Ht(e.r,e.g,e.b,e.opacity)):new Ht}function ls(e,t,n,r){return arguments.length===1?hg(e):new Ht(e,t,n,r??1)}function Ht(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ec(Ht,ls,Ju(Ao,{brighter(e){return e=e==null?Oa:Math.pow(Oa,e),new Ht(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?So:Math.pow(So,e),new Ht(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ht(hr(this.r),hr(this.g),hr(this.b),ja(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ml,formatHex:ml,formatHex8:mg,formatRgb:pl,toString:pl}));function ml(){return`#${ur(this.r)}${ur(this.g)}${ur(this.b)}`}function mg(){return`#${ur(this.r)}${ur(this.g)}${ur(this.b)}${ur((isNaN(this.opacity)?1:this.opacity)*255)}`}function pl(){const e=ja(this.opacity);return`${e===1?"rgb(":"rgba("}${hr(this.r)}, ${hr(this.g)}, ${hr(this.b)}${e===1?")":`, ${e})`}`}function ja(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function hr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ur(e){return e=hr(e),(e<16?"0":"")+e.toString(16)}function gl(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new nn(e,t,n,r)}function ed(e){if(e instanceof nn)return new nn(e.h,e.s,e.l,e.opacity);if(e instanceof Ao||(e=Eo(e)),!e)return new nn;if(e instanceof nn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),s=NaN,l=i-o,u=(i+o)/2;return l?(t===i?s=(n-r)/l+(n<r)*6:n===i?s=(r-t)/l+2:s=(t-n)/l+4,l/=u<.5?i+o:2-i-o,s*=60):l=u>0&&u<1?0:s,new nn(s,l,u,e.opacity)}function pg(e,t,n,r){return arguments.length===1?ed(e):new nn(e,t,n,r??1)}function nn(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ec(nn,pg,Ju(Ao,{brighter(e){return e=e==null?Oa:Math.pow(Oa,e),new nn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?So:Math.pow(So,e),new nn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Ht(Bi(e>=240?e-240:e+120,o,r),Bi(e,o,r),Bi(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new nn(yl(this.h),fa(this.s),fa(this.l),ja(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ja(this.opacity);return`${e===1?"hsl(":"hsla("}${yl(this.h)}, ${fa(this.s)*100}%, ${fa(this.l)*100}%${e===1?")":`, ${e})`}`}}));function yl(e){return e=(e||0)%360,e<0?e+360:e}function fa(e){return Math.max(0,Math.min(1,e||0))}function Bi(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const td=e=>()=>e;function gg(e,t){return function(n){return e+n*t}}function yg(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function vg(e){return(e=+e)==1?nd:function(t,n){return n-t?yg(t,n,e):td(isNaN(t)?n:t)}}function nd(e,t){var n=t-e;return n?gg(e,n):td(isNaN(e)?t:e)}const vl=function e(t){var n=vg(t);function r(o,i){var s=n((o=ls(o)).r,(i=ls(i)).r),l=n(o.g,i.g),u=n(o.b,i.b),d=nd(o.opacity,i.opacity);return function(h){return o.r=s(h),o.g=l(h),o.b=u(h),o.opacity=d(h),o+""}}return r.gamma=e,r}(1);function Vn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var us=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hi=new RegExp(us.source,"g");function wg(e){return function(){return e}}function bg(e){return function(t){return e(t)+""}}function xg(e,t){var n=us.lastIndex=Hi.lastIndex=0,r,o,i,s=-1,l=[],u=[];for(e=e+"",t=t+"";(r=us.exec(e))&&(o=Hi.exec(t));)(i=o.index)>n&&(i=t.slice(n,i),l[s]?l[s]+=i:l[++s]=i),(r=r[0])===(o=o[0])?l[s]?l[s]+=o:l[++s]=o:(l[++s]=null,u.push({i:s,x:Vn(r,o)})),n=Hi.lastIndex;return n<t.length&&(i=t.slice(n),l[s]?l[s]+=i:l[++s]=i),l.length<2?u[0]?bg(u[0].x):wg(t):(t=u.length,function(d){for(var h=0,p;h<t;++h)l[(p=u[h]).i]=p.x(d);return l.join("")})}var wl=180/Math.PI,ds={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function rd(e,t,n,r,o,i){var s,l,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),e*r<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*wl,skewX:Math.atan(u)*wl,scaleX:s,scaleY:l}}var ha;function Sg(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ds:rd(t.a,t.b,t.c,t.d,t.e,t.f)}function kg(e){return e==null||(ha||(ha=document.createElementNS("http://www.w3.org/2000/svg","g")),ha.setAttribute("transform",e),!(e=ha.transform.baseVal.consolidate()))?ds:(e=e.matrix,rd(e.a,e.b,e.c,e.d,e.e,e.f))}function od(e,t,n,r){function o(d){return d.length?d.pop()+" ":""}function i(d,h,p,v,y,k){if(d!==p||h!==v){var S=y.push("translate(",null,t,null,n);k.push({i:S-4,x:Vn(d,p)},{i:S-2,x:Vn(h,v)})}else(p||v)&&y.push("translate("+p+t+v+n)}function s(d,h,p,v){d!==h?(d-h>180?h+=360:h-d>180&&(d+=360),v.push({i:p.push(o(p)+"rotate(",null,r)-2,x:Vn(d,h)})):h&&p.push(o(p)+"rotate("+h+r)}function l(d,h,p,v){d!==h?v.push({i:p.push(o(p)+"skewX(",null,r)-2,x:Vn(d,h)}):h&&p.push(o(p)+"skewX("+h+r)}function u(d,h,p,v,y,k){if(d!==p||h!==v){var S=y.push(o(y)+"scale(",null,",",null,")");k.push({i:S-4,x:Vn(d,p)},{i:S-2,x:Vn(h,v)})}else(p!==1||v!==1)&&y.push(o(y)+"scale("+p+","+v+")")}return function(d,h){var p=[],v=[];return d=e(d),h=e(h),i(d.translateX,d.translateY,h.translateX,h.translateY,p,v),s(d.rotate,h.rotate,p,v),l(d.skewX,h.skewX,p,v),u(d.scaleX,d.scaleY,h.scaleX,h.scaleY,p,v),d=h=null,function(y){for(var k=-1,S=v.length,N;++k<S;)p[(N=v[k]).i]=N.x(y);return p.join("")}}}var Eg=od(Sg,"px, ","px)","deg)"),_g=od(kg,", ",")",")"),Ng=1e-12;function bl(e){return((e=Math.exp(e))+1/e)/2}function Tg(e){return((e=Math.exp(e))-1/e)/2}function Cg(e){return((e=Math.exp(2*e))-1)/(e+1)}const Dg=function e(t,n,r){function o(i,s){var l=i[0],u=i[1],d=i[2],h=s[0],p=s[1],v=s[2],y=h-l,k=p-u,S=y*y+k*k,N,T;if(S<Ng)T=Math.log(v/d)/t,N=function(H){return[l+H*y,u+H*k,d*Math.exp(t*H*T)]};else{var $=Math.sqrt(S),P=(v*v-d*d+r*S)/(2*d*n*$),C=(v*v-d*d-r*S)/(2*v*n*$),X=Math.log(Math.sqrt(P*P+1)-P),q=Math.log(Math.sqrt(C*C+1)-C);T=(q-X)/t,N=function(H){var te=H*T,K=bl(X),ne=d/(n*$)*(K*Cg(t*te+X)-Tg(X));return[l+ne*y,u+ne*k,d*K/bl(t*te+X)]}}return N.duration=T*1e3*t/Math.SQRT2,N}return o.rho=function(i){var s=Math.max(.001,+i),l=s*s,u=l*l;return e(s,l,u)},o}(Math.SQRT2,2,4);var Hr=0,mo=0,ao=0,ad=1e3,Ia,po,Pa=0,vr=0,Ua=0,_o=typeof performance=="object"&&performance.now?performance:Date,id=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function tc(){return vr||(id(Og),vr=_o.now()+Ua)}function Og(){vr=0}function Ma(){this._call=this._time=this._next=null}Ma.prototype=sd.prototype={constructor:Ma,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?tc():+n)+(t==null?0:+t),!this._next&&po!==this&&(po?po._next=this:Ia=this,po=this),this._call=e,this._time=n,fs()},stop:function(){this._call&&(this._call=null,this._time=1/0,fs())}};function sd(e,t,n){var r=new Ma;return r.restart(e,t,n),r}function jg(){tc(),++Hr;for(var e=Ia,t;e;)(t=vr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Hr}function xl(){vr=(Pa=_o.now())+Ua,Hr=mo=0;try{jg()}finally{Hr=0,Pg(),vr=0}}function Ig(){var e=_o.now(),t=e-Pa;t>ad&&(Ua-=t,Pa=e)}function Pg(){for(var e,t=Ia,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ia=n);po=e,fs(r)}function fs(e){if(!Hr){mo&&(mo=clearTimeout(mo));var t=e-vr;t>24?(e<1/0&&(mo=setTimeout(xl,e-_o.now()-Ua)),ao&&(ao=clearInterval(ao))):(ao||(Pa=_o.now(),ao=setInterval(Ig,ad)),Hr=1,id(xl))}}function Sl(e,t,n){var r=new Ma;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var Mg=qa("start","end","cancel","interrupt"),Ag=[],cd=0,kl=1,hs=2,_a=3,El=4,ms=5,Na=6;function Xa(e,t,n,r,o,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;$g(e,n,{name:t,index:r,group:o,on:Mg,tween:Ag,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:cd})}function nc(e,t){var n=an(e,t);if(n.state>cd)throw new Error("too late; already scheduled");return n}function vn(e,t){var n=an(e,t);if(n.state>_a)throw new Error("too late; already running");return n}function an(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function $g(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=sd(i,0,n.time);function i(d){n.state=kl,n.timer.restart(s,n.delay,n.time),n.delay<=d&&s(d-n.delay)}function s(d){var h,p,v,y;if(n.state!==kl)return u();for(h in r)if(y=r[h],y.name===n.name){if(y.state===_a)return Sl(s);y.state===El?(y.state=Na,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete r[h]):+h<t&&(y.state=Na,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete r[h])}if(Sl(function(){n.state===_a&&(n.state=El,n.timer.restart(l,n.delay,n.time),l(d))}),n.state=hs,n.on.call("start",e,e.__data__,n.index,n.group),n.state===hs){for(n.state=_a,o=new Array(v=n.tween.length),h=0,p=-1;h<v;++h)(y=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(o[++p]=y);o.length=p+1}}function l(d){for(var h=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(u),n.state=ms,1),p=-1,v=o.length;++p<v;)o[p].call(e,h);n.state===ms&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Na,n.timer.stop(),delete r[t];for(var d in r)return;delete e.__transition}}function Ta(e,t){var n=e.__transition,r,o,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){i=!1;continue}o=r.state>hs&&r.state<ms,r.state=Na,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}i&&delete e.__transition}}function Rg(e){return this.each(function(){Ta(this,e)})}function Lg(e,t){var n,r;return function(){var o=vn(this,e),i=o.tween;if(i!==n){r=n=i;for(var s=0,l=r.length;s<l;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}o.tween=r}}function Fg(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=vn(this,e),s=i.tween;if(s!==r){o=(r=s).slice();for(var l={name:t,value:n},u=0,d=o.length;u<d;++u)if(o[u].name===t){o[u]=l;break}u===d&&o.push(l)}i.tween=o}}function Wg(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=an(this.node(),n).tween,o=0,i=r.length,s;o<i;++o)if((s=r[o]).name===e)return s.value;return null}return this.each((t==null?Lg:Fg)(n,e,t))}function rc(e,t,n){var r=e._id;return e.each(function(){var o=vn(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return an(o,r).value[t]}}function ld(e,t){var n;return(typeof t=="number"?Vn:t instanceof Eo?vl:(n=Eo(t))?(t=n,vl):xg)(e,t)}function Bg(e){return function(){this.removeAttribute(e)}}function Hg(e){return function(){this.removeAttributeNS(e.space,e.local)}}function zg(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttribute(e);return s===o?null:s===r?i:i=t(r=s,n)}}function Yg(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===r?i:i=t(r=s,n)}}function Vg(e,t,n){var r,o,i;return function(){var s,l=n(this),u;return l==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=l+"",s===u?null:s===r&&u===o?i:(o=u,i=t(r=s,l)))}}function qg(e,t,n){var r,o,i;return function(){var s,l=n(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=l+"",s===u?null:s===r&&u===o?i:(o=u,i=t(r=s,l)))}}function Kg(e,t){var n=Ka(e),r=n==="transform"?_g:ld;return this.attrTween(e,typeof t=="function"?(n.local?qg:Vg)(n,r,rc(this,"attr."+e,t)):t==null?(n.local?Hg:Bg)(n):(n.local?Yg:zg)(n,r,t))}function Ug(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Xg(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Gg(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Xg(e,i)),n}return o._value=t,o}function Zg(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Ug(e,i)),n}return o._value=t,o}function Qg(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Ka(e);return this.tween(n,(r.local?Gg:Zg)(r,t))}function Jg(e,t){return function(){nc(this,e).delay=+t.apply(this,arguments)}}function ey(e,t){return t=+t,function(){nc(this,e).delay=t}}function ty(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Jg:ey)(t,e)):an(this.node(),t).delay}function ny(e,t){return function(){vn(this,e).duration=+t.apply(this,arguments)}}function ry(e,t){return t=+t,function(){vn(this,e).duration=t}}function oy(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ny:ry)(t,e)):an(this.node(),t).duration}function ay(e,t){if(typeof t!="function")throw new Error;return function(){vn(this,e).ease=t}}function iy(e){var t=this._id;return arguments.length?this.each(ay(t,e)):an(this.node(),t).ease}function sy(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;vn(this,e).ease=n}}function cy(e){if(typeof e!="function")throw new Error;return this.each(sy(this._id,e))}function ly(e){typeof e!="function"&&(e=Bu(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,l=r[o]=[],u,d=0;d<s;++d)(u=i[d])&&e.call(u,u.__data__,d,i)&&l.push(u);return new In(r,this._parents,this._name,this._id)}function uy(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),s=new Array(r),l=0;l<i;++l)for(var u=t[l],d=n[l],h=u.length,p=s[l]=new Array(h),v,y=0;y<h;++y)(v=u[y]||d[y])&&(p[y]=v);for(;l<r;++l)s[l]=t[l];return new In(s,this._parents,this._name,this._id)}function dy(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function fy(e,t,n){var r,o,i=dy(t)?nc:vn;return function(){var s=i(this,e),l=s.on;l!==r&&(o=(r=l).copy()).on(t,n),s.on=o}}function hy(e,t){var n=this._id;return arguments.length<2?an(this.node(),n).on.on(e):this.each(fy(n,e,t))}function my(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function py(){return this.on("end.remove",my(this._id))}function gy(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Qs(e));for(var r=this._groups,o=r.length,i=new Array(o),s=0;s<o;++s)for(var l=r[s],u=l.length,d=i[s]=new Array(u),h,p,v=0;v<u;++v)(h=l[v])&&(p=e.call(h,h.__data__,v,l))&&("__data__"in h&&(p.__data__=h.__data__),d[v]=p,Xa(d[v],t,n,v,d,an(h,n)));return new In(i,this._parents,t,n)}function yy(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Wu(e));for(var r=this._groups,o=r.length,i=[],s=[],l=0;l<o;++l)for(var u=r[l],d=u.length,h,p=0;p<d;++p)if(h=u[p]){for(var v=e.call(h,h.__data__,p,u),y,k=an(h,n),S=0,N=v.length;S<N;++S)(y=v[S])&&Xa(y,t,n,S,v,k);i.push(v),s.push(h)}return new In(i,s,t,n)}var vy=Mo.prototype.constructor;function wy(){return new vy(this._groups,this._parents)}function by(e,t){var n,r,o;return function(){var i=Br(this,e),s=(this.style.removeProperty(e),Br(this,e));return i===s?null:i===n&&s===r?o:o=t(n=i,r=s)}}function ud(e){return function(){this.style.removeProperty(e)}}function xy(e,t,n){var r,o=n+"",i;return function(){var s=Br(this,e);return s===o?null:s===r?i:i=t(r=s,n)}}function Sy(e,t,n){var r,o,i;return function(){var s=Br(this,e),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),Br(this,e))),s===u?null:s===r&&u===o?i:(o=u,i=t(r=s,l))}}function ky(e,t){var n,r,o,i="style."+t,s="end."+i,l;return function(){var u=vn(this,e),d=u.on,h=u.value[i]==null?l||(l=ud(t)):void 0;(d!==n||o!==h)&&(r=(n=d).copy()).on(s,o=h),u.on=r}}function Ey(e,t,n){var r=(e+="")=="transform"?Eg:ld;return t==null?this.styleTween(e,by(e,r)).on("end.style."+e,ud(e)):typeof t=="function"?this.styleTween(e,Sy(e,r,rc(this,"style."+e,t))).each(ky(this._id,e)):this.styleTween(e,xy(e,r,t),n).on("end.style."+e,null)}function _y(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Ny(e,t,n){var r,o;function i(){var s=t.apply(this,arguments);return s!==o&&(r=(o=s)&&_y(e,s,n)),r}return i._value=t,i}function Ty(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Ny(e,t,n??""))}function Cy(e){return function(){this.textContent=e}}function Dy(e){return function(){var t=e(this);this.textContent=t??""}}function Oy(e){return this.tween("text",typeof e=="function"?Dy(rc(this,"text",e)):Cy(e==null?"":e+""))}function jy(e){return function(t){this.textContent=e.call(this,t)}}function Iy(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&jy(o)),t}return r._value=e,r}function Py(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Iy(e))}function My(){for(var e=this._name,t=this._id,n=dd(),r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],l=s.length,u,d=0;d<l;++d)if(u=s[d]){var h=an(u,t);Xa(u,e,n,d,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new In(r,this._parents,e,n)}function Ay(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,s){var l={value:s},u={value:function(){--o===0&&i()}};n.each(function(){var d=vn(this,r),h=d.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),d.on=t}),o===0&&i()})}var $y=0;function In(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function dd(){return++$y}var Nn=Mo.prototype;In.prototype={constructor:In,select:gy,selectAll:yy,selectChild:Nn.selectChild,selectChildren:Nn.selectChildren,filter:ly,merge:uy,selection:wy,transition:My,call:Nn.call,nodes:Nn.nodes,node:Nn.node,size:Nn.size,empty:Nn.empty,each:Nn.each,on:hy,attr:Kg,attrTween:Qg,style:Ey,styleTween:Ty,text:Oy,textTween:Py,remove:py,tween:Wg,delay:ty,duration:oy,ease:iy,easeVarying:cy,end:Ay,[Symbol.iterator]:Nn[Symbol.iterator]};function Ry(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Ly={time:null,delay:0,duration:250,ease:Ry};function Fy(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Wy(e){var t,n;e instanceof In?(t=e._id,e=e._name):(t=dd(),(n=Ly).time=tc(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],l=s.length,u,d=0;d<l;++d)(u=s[d])&&Xa(u,e,t,d,s,n||Fy(u,t));return new In(r,this._parents,e,t)}Mo.prototype.interrupt=Rg;Mo.prototype.transition=Wy;const ma=e=>()=>e;function By(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Dn(e,t,n){this.k=e,this.x=t,this.y=n}Dn.prototype={constructor:Dn,scale:function(e){return e===1?this:new Dn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Dn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var On=new Dn(1,0,0);Dn.prototype;function zi(e){e.stopImmediatePropagation()}function io(e){e.preventDefault(),e.stopImmediatePropagation()}function Hy(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function zy(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function _l(){return this.__zoom||On}function Yy(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Vy(){return navigator.maxTouchPoints||"ontouchstart"in this}function qy(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function fd(){var e=Hy,t=zy,n=qy,r=Yy,o=Vy,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],l=250,u=Dg,d=qa("start","zoom","end"),h,p,v,y=500,k=150,S=0,N=10;function T(E){E.property("__zoom",_l).on("wheel.zoom",te,{passive:!1}).on("mousedown.zoom",K).on("dblclick.zoom",ne).filter(o).on("touchstart.zoom",U).on("touchmove.zoom",ie).on("touchend.zoom touchcancel.zoom",ue).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}T.transform=function(E,z,D,Q){var J=E.selection?E.selection():E;J.property("__zoom",_l),E!==J?X(E,z,D,Q):J.interrupt().each(function(){q(this,arguments).event(Q).start().zoom(null,typeof z=="function"?z.apply(this,arguments):z).end()})},T.scaleBy=function(E,z,D,Q){T.scaleTo(E,function(){var J=this.__zoom.k,j=typeof z=="function"?z.apply(this,arguments):z;return J*j},D,Q)},T.scaleTo=function(E,z,D,Q){T.transform(E,function(){var J=t.apply(this,arguments),j=this.__zoom,G=D==null?C(J):typeof D=="function"?D.apply(this,arguments):D,se=j.invert(G),ae=typeof z=="function"?z.apply(this,arguments):z;return n(P($(j,ae),G,se),J,s)},D,Q)},T.translateBy=function(E,z,D,Q){T.transform(E,function(){return n(this.__zoom.translate(typeof z=="function"?z.apply(this,arguments):z,typeof D=="function"?D.apply(this,arguments):D),t.apply(this,arguments),s)},null,Q)},T.translateTo=function(E,z,D,Q,J){T.transform(E,function(){var j=t.apply(this,arguments),G=this.__zoom,se=Q==null?C(j):typeof Q=="function"?Q.apply(this,arguments):Q;return n(On.translate(se[0],se[1]).scale(G.k).translate(typeof z=="function"?-z.apply(this,arguments):-z,typeof D=="function"?-D.apply(this,arguments):-D),j,s)},Q,J)};function $(E,z){return z=Math.max(i[0],Math.min(i[1],z)),z===E.k?E:new Dn(z,E.x,E.y)}function P(E,z,D){var Q=z[0]-D[0]*E.k,J=z[1]-D[1]*E.k;return Q===E.x&&J===E.y?E:new Dn(E.k,Q,J)}function C(E){return[(+E[0][0]+ +E[1][0])/2,(+E[0][1]+ +E[1][1])/2]}function X(E,z,D,Q){E.on("start.zoom",function(){q(this,arguments).event(Q).start()}).on("interrupt.zoom end.zoom",function(){q(this,arguments).event(Q).end()}).tween("zoom",function(){var J=this,j=arguments,G=q(J,j).event(Q),se=t.apply(J,j),ae=D==null?C(se):typeof D=="function"?D.apply(J,j):D,fe=Math.max(se[1][0]-se[0][0],se[1][1]-se[0][1]),we=J.__zoom,Se=typeof z=="function"?z.apply(J,j):z,Ne=u(we.invert(ae).concat(fe/we.k),Se.invert(ae).concat(fe/Se.k));return function(Ce){if(Ce===1)Ce=Se;else{var je=Ne(Ce),he=fe/je[2];Ce=new Dn(he,ae[0]-je[0]*he,ae[1]-je[1]*he)}G.zoom(null,Ce)}})}function q(E,z,D){return!D&&E.__zooming||new H(E,z)}function H(E,z){this.that=E,this.args=z,this.active=0,this.sourceEvent=null,this.extent=t.apply(E,z),this.taps=0}H.prototype={event:function(E){return E&&(this.sourceEvent=E),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(E,z){return this.mouse&&E!=="mouse"&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&E!=="touch"&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&E!=="touch"&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(E){var z=Gt(this.that).datum();d.call(E,this.that,new By(E,{sourceEvent:this.sourceEvent,target:T,type:E,transform:this.that.__zoom,dispatch:d}),z)}};function te(E,...z){if(!e.apply(this,arguments))return;var D=q(this,z).event(E),Q=this.__zoom,J=Math.max(i[0],Math.min(i[1],Q.k*Math.pow(2,r.apply(this,arguments)))),j=tn(E);if(D.wheel)(D.mouse[0][0]!==j[0]||D.mouse[0][1]!==j[1])&&(D.mouse[1]=Q.invert(D.mouse[0]=j)),clearTimeout(D.wheel);else{if(Q.k===J)return;D.mouse=[j,Q.invert(j)],Ta(this),D.start()}io(E),D.wheel=setTimeout(G,k),D.zoom("mouse",n(P($(Q,J),D.mouse[0],D.mouse[1]),D.extent,s));function G(){D.wheel=null,D.end()}}function K(E,...z){if(v||!e.apply(this,arguments))return;var D=E.currentTarget,Q=q(this,z,!0).event(E),J=Gt(E.view).on("mousemove.zoom",ae,!0).on("mouseup.zoom",fe,!0),j=tn(E,D),G=E.clientX,se=E.clientY;Zu(E.view),zi(E),Q.mouse=[j,this.__zoom.invert(j)],Ta(this),Q.start();function ae(we){if(io(we),!Q.moved){var Se=we.clientX-G,Ne=we.clientY-se;Q.moved=Se*Se+Ne*Ne>S}Q.event(we).zoom("mouse",n(P(Q.that.__zoom,Q.mouse[0]=tn(we,D),Q.mouse[1]),Q.extent,s))}function fe(we){J.on("mousemove.zoom mouseup.zoom",null),Qu(we.view,Q.moved),io(we),Q.event(we).end()}}function ne(E,...z){if(e.apply(this,arguments)){var D=this.__zoom,Q=tn(E.changedTouches?E.changedTouches[0]:E,this),J=D.invert(Q),j=D.k*(E.shiftKey?.5:2),G=n(P($(D,j),Q,J),t.apply(this,z),s);io(E),l>0?Gt(this).transition().duration(l).call(X,G,Q,E):Gt(this).call(T.transform,G,Q,E)}}function U(E,...z){if(e.apply(this,arguments)){var D=E.touches,Q=D.length,J=q(this,z,E.changedTouches.length===Q).event(E),j,G,se,ae;for(zi(E),G=0;G<Q;++G)se=D[G],ae=tn(se,this),ae=[ae,this.__zoom.invert(ae),se.identifier],J.touch0?!J.touch1&&J.touch0[2]!==ae[2]&&(J.touch1=ae,J.taps=0):(J.touch0=ae,j=!0,J.taps=1+!!h);h&&(h=clearTimeout(h)),j&&(J.taps<2&&(p=ae[0],h=setTimeout(function(){h=null},y)),Ta(this),J.start())}}function ie(E,...z){if(this.__zooming){var D=q(this,z).event(E),Q=E.changedTouches,J=Q.length,j,G,se,ae;for(io(E),j=0;j<J;++j)G=Q[j],se=tn(G,this),D.touch0&&D.touch0[2]===G.identifier?D.touch0[0]=se:D.touch1&&D.touch1[2]===G.identifier&&(D.touch1[0]=se);if(G=D.that.__zoom,D.touch1){var fe=D.touch0[0],we=D.touch0[1],Se=D.touch1[0],Ne=D.touch1[1],Ce=(Ce=Se[0]-fe[0])*Ce+(Ce=Se[1]-fe[1])*Ce,je=(je=Ne[0]-we[0])*je+(je=Ne[1]-we[1])*je;G=$(G,Math.sqrt(Ce/je)),se=[(fe[0]+Se[0])/2,(fe[1]+Se[1])/2],ae=[(we[0]+Ne[0])/2,(we[1]+Ne[1])/2]}else if(D.touch0)se=D.touch0[0],ae=D.touch0[1];else return;D.zoom("touch",n(P(G,se,ae),D.extent,s))}}function ue(E,...z){if(this.__zooming){var D=q(this,z).event(E),Q=E.changedTouches,J=Q.length,j,G;for(zi(E),v&&clearTimeout(v),v=setTimeout(function(){v=null},y),j=0;j<J;++j)G=Q[j],D.touch0&&D.touch0[2]===G.identifier?delete D.touch0:D.touch1&&D.touch1[2]===G.identifier&&delete D.touch1;if(D.touch1&&!D.touch0&&(D.touch0=D.touch1,delete D.touch1),D.touch0)D.touch0[1]=this.__zoom.invert(D.touch0[0]);else if(D.end(),D.taps===2&&(G=tn(G,this),Math.hypot(p[0]-G[0],p[1]-G[1])<N)){var se=Gt(this).on("dblclick.zoom");se&&se.apply(this,arguments)}}}return T.wheelDelta=function(E){return arguments.length?(r=typeof E=="function"?E:ma(+E),T):r},T.filter=function(E){return arguments.length?(e=typeof E=="function"?E:ma(!!E),T):e},T.touchable=function(E){return arguments.length?(o=typeof E=="function"?E:ma(!!E),T):o},T.extent=function(E){return arguments.length?(t=typeof E=="function"?E:ma([[+E[0][0],+E[0][1]],[+E[1][0],+E[1][1]]]),T):t},T.scaleExtent=function(E){return arguments.length?(i[0]=+E[0],i[1]=+E[1],T):[i[0],i[1]]},T.translateExtent=function(E){return arguments.length?(s[0][0]=+E[0][0],s[1][0]=+E[1][0],s[0][1]=+E[0][1],s[1][1]=+E[1][1],T):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},T.constrain=function(E){return arguments.length?(n=E,T):n},T.duration=function(E){return arguments.length?(l=+E,T):l},T.interpolate=function(E){return arguments.length?(u=E,T):u},T.on=function(){var E=d.on.apply(d,arguments);return E===d?T:E},T.clickDistance=function(E){return arguments.length?(S=(E=+E)*E,T):Math.sqrt(S)},T.tapDistance=function(E){return arguments.length?(N=+E,T):N},T}const Ga=b.createContext(null),Ky=Ga.Provider,Pn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},hd=Pn.error001();function tt(e,t){const n=b.useContext(Ga);if(n===null)throw new Error(hd);return Lu(n,e,t)}const yt=()=>{const e=b.useContext(Ga);if(e===null)throw new Error(hd);return b.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Uy=e=>e.userSelectionActive?"none":"all";function No({position:e,children:t,className:n,style:r,...o}){const i=tt(Uy),s=`${e}`.split("-");return W.createElement("div",{className:Nt(["react-flow__panel",n,...s]),style:{...r,pointerEvents:i},...o},t)}function Xy({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:W.createElement(No,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},W.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Gy=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:i={},labelBgPadding:s=[2,4],labelBgBorderRadius:l=2,children:u,className:d,...h})=>{const p=b.useRef(null),[v,y]=b.useState({x:0,y:0,width:0,height:0}),k=Nt(["react-flow__edge-textwrapper",d]);return b.useEffect(()=>{if(p.current){const S=p.current.getBBox();y({x:S.x,y:S.y,width:S.width,height:S.height})}},[n]),typeof n>"u"||!n?null:W.createElement("g",{transform:`translate(${e-v.width/2} ${t-v.height/2})`,className:k,visibility:v.width?"visible":"hidden",...h},o&&W.createElement("rect",{width:v.width+2*s[0],x:-s[0],y:-s[1],height:v.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:l,ry:l}),W.createElement("text",{className:"react-flow__edge-text",y:v.height/2,dy:"0.3em",ref:p,style:r},n),u)};var Zy=b.memo(Gy);const oc=e=>({width:e.offsetWidth,height:e.offsetHeight}),zr=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ac=(e={x:0,y:0},t)=>({x:zr(e.x,t[0][0],t[1][0]),y:zr(e.y,t[0][1],t[1][1])}),Nl=(e,t,n)=>e<t?zr(Math.abs(e-t),1,50)/50:e>n?-zr(Math.abs(e-n),1,50)/50:0,md=(e,t)=>{const n=Nl(e.x,35,t.width-35)*20,r=Nl(e.y,35,t.height-35)*20;return[n,r]},pd=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},gd=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),To=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),yd=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Tl=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Qy=(e,t)=>yd(gd(To(e),To(t))),ps=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Jy=e=>Zt(e.width)&&Zt(e.height)&&Zt(e.x)&&Zt(e.y),Zt=e=>!isNaN(e)&&isFinite(e),ut=Symbol.for("internals"),vd=["Enter"," ","Escape"],e0=(e,t)=>{},t0=e=>"nativeEvent"in e;function gs(e){var o,i;const t=t0(e)?e.nativeEvent:e,n=((i=(o=t.composedPath)==null?void 0:o.call(t))==null?void 0:i[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const wd=e=>"clientX"in e,Zn=(e,t)=>{var i,s;const n=wd(e),r=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,o=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},Aa=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},$o=({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:v,interactionWidth:y=20})=>W.createElement(W.Fragment,null,W.createElement("path",{id:e,style:h,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:p,markerStart:v}),y&&W.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:y,className:"react-flow__edge-interaction"}),o&&Zt(n)&&Zt(r)?W.createElement(Zy,{x:n,y:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d}):null);$o.displayName="BaseEdge";function so(e,t,n){return n===void 0?n:r=>{const o=t().edges.find(i=>i.id===e);o&&n(r,{...o})}}function bd({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,i=n<e?n+o:n-o,s=Math.abs(r-t)/2,l=r<t?r+s:r-s;return[i,l,o,s]}function xd({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:s,targetControlY:l}){const u=e*.125+o*.375+s*.375+n*.125,d=t*.125+i*.375+l*.375+r*.125,h=Math.abs(u-e),p=Math.abs(d-t);return[u,d,h,p]}var wr;(function(e){e.Strict="strict",e.Loose="loose"})(wr||(wr={}));var dr;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(dr||(dr={}));var Co;(function(e){e.Partial="partial",e.Full="full"})(Co||(Co={}));var Kn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Kn||(Kn={}));var $a;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})($a||($a={}));var De;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(De||(De={}));function Cl({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===De.Left||e===De.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function Sd({sourceX:e,sourceY:t,sourcePosition:n=De.Bottom,targetX:r,targetY:o,targetPosition:i=De.Top}){const[s,l]=Cl({pos:n,x1:e,y1:t,x2:r,y2:o}),[u,d]=Cl({pos:i,x1:r,y1:o,x2:e,y2:t}),[h,p,v,y]=xd({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${e},${t} C${s},${l} ${u},${d} ${r},${o}`,h,p,v,y]}const ic=b.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=De.Bottom,targetPosition:i=De.Top,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:v,markerEnd:y,markerStart:k,interactionWidth:S})=>{const[N,T,$]=Sd({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:i});return W.createElement($o,{path:N,labelX:T,labelY:$,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:v,markerEnd:y,markerStart:k,interactionWidth:S})});ic.displayName="SimpleBezierEdge";const Dl={[De.Left]:{x:-1,y:0},[De.Right]:{x:1,y:0},[De.Top]:{x:0,y:-1},[De.Bottom]:{x:0,y:1}},n0=({source:e,sourcePosition:t=De.Bottom,target:n})=>t===De.Left||t===De.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Ol=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function r0({source:e,sourcePosition:t=De.Bottom,target:n,targetPosition:r=De.Top,center:o,offset:i}){const s=Dl[t],l=Dl[r],u={x:e.x+s.x*i,y:e.y+s.y*i},d={x:n.x+l.x*i,y:n.y+l.y*i},h=n0({source:u,sourcePosition:t,target:d}),p=h.x!==0?"x":"y",v=h[p];let y=[],k,S;const N={x:0,y:0},T={x:0,y:0},[$,P,C,X]=bd({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[p]*l[p]===-1){k=o.x??$,S=o.y??P;const H=[{x:k,y:u.y},{x:k,y:d.y}],te=[{x:u.x,y:S},{x:d.x,y:S}];s[p]===v?y=p==="x"?H:te:y=p==="x"?te:H}else{const H=[{x:u.x,y:d.y}],te=[{x:d.x,y:u.y}];if(p==="x"?y=s.x===v?te:H:y=s.y===v?H:te,t===r){const ue=Math.abs(e[p]-n[p]);if(ue<=i){const E=Math.min(i-1,i-ue);s[p]===v?N[p]=(u[p]>e[p]?-1:1)*E:T[p]=(d[p]>n[p]?-1:1)*E}}if(t!==r){const ue=p==="x"?"y":"x",E=s[p]===l[ue],z=u[ue]>d[ue],D=u[ue]<d[ue];(s[p]===1&&(!E&&z||E&&D)||s[p]!==1&&(!E&&D||E&&z))&&(y=p==="x"?H:te)}const K={x:u.x+N.x,y:u.y+N.y},ne={x:d.x+T.x,y:d.y+T.y},U=Math.max(Math.abs(K.x-y[0].x),Math.abs(ne.x-y[0].x)),ie=Math.max(Math.abs(K.y-y[0].y),Math.abs(ne.y-y[0].y));U>=ie?(k=(K.x+ne.x)/2,S=y[0].y):(k=y[0].x,S=(K.y+ne.y)/2)}return[[e,{x:u.x+N.x,y:u.y+N.y},...y,{x:d.x+T.x,y:d.y+T.y},n],k,S,C,X]}function o0(e,t,n,r){const o=Math.min(Ol(e,t)/2,Ol(t,n)/2,r),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){const d=e.x<n.x?-1:1,h=e.y<n.y?1:-1;return`L ${i+o*d},${s}Q ${i},${s} ${i},${s+o*h}`}const l=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${i},${s+o*u}Q ${i},${s} ${i+o*l},${s}`}function ys({sourceX:e,sourceY:t,sourcePosition:n=De.Bottom,targetX:r,targetY:o,targetPosition:i=De.Top,borderRadius:s=5,centerX:l,centerY:u,offset:d=20}){const[h,p,v,y,k]=r0({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:l,y:u},offset:d});return[h.reduce((N,T,$)=>{let P="";return $>0&&$<h.length-1?P=o0(h[$-1],T,h[$+1],s):P=`${$===0?"M":"L"}${T.x} ${T.y}`,N+=P,N},""),p,v,y,k]}const Za=b.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:h,sourcePosition:p=De.Bottom,targetPosition:v=De.Top,markerEnd:y,markerStart:k,pathOptions:S,interactionWidth:N})=>{const[T,$,P]=ys({sourceX:e,sourceY:t,sourcePosition:p,targetX:n,targetY:r,targetPosition:v,borderRadius:S==null?void 0:S.borderRadius,offset:S==null?void 0:S.offset});return W.createElement($o,{path:T,labelX:$,labelY:P,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:h,markerEnd:y,markerStart:k,interactionWidth:N})});Za.displayName="SmoothStepEdge";const sc=b.memo(e=>{var t;return W.createElement(Za,{...e,pathOptions:b.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});sc.displayName="StepEdge";function a0({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,i,s,l]=bd({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,i,s,l]}const cc=b.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:v,interactionWidth:y})=>{const[k,S,N]=a0({sourceX:e,sourceY:t,targetX:n,targetY:r});return W.createElement($o,{path:k,labelX:S,labelY:N,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:v,interactionWidth:y})});cc.displayName="StraightEdge";function pa(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function jl({pos:e,x1:t,y1:n,x2:r,y2:o,c:i}){switch(e){case De.Left:return[t-pa(t-r,i),n];case De.Right:return[t+pa(r-t,i),n];case De.Top:return[t,n-pa(n-o,i)];case De.Bottom:return[t,n+pa(o-n,i)]}}function kd({sourceX:e,sourceY:t,sourcePosition:n=De.Bottom,targetX:r,targetY:o,targetPosition:i=De.Top,curvature:s=.25}){const[l,u]=jl({pos:n,x1:e,y1:t,x2:r,y2:o,c:s}),[d,h]=jl({pos:i,x1:r,y1:o,x2:e,y2:t,c:s}),[p,v,y,k]=xd({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:l,sourceControlY:u,targetControlX:d,targetControlY:h});return[`M${e},${t} C${l},${u} ${d},${h} ${r},${o}`,p,v,y,k]}const Ra=b.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=De.Bottom,targetPosition:i=De.Top,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:v,markerEnd:y,markerStart:k,pathOptions:S,interactionWidth:N})=>{const[T,$,P]=kd({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:i,curvature:S==null?void 0:S.curvature});return W.createElement($o,{path:T,labelX:$,labelY:P,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:v,markerEnd:y,markerStart:k,interactionWidth:N})});Ra.displayName="BezierEdge";const lc=b.createContext(null),i0=lc.Provider;lc.Consumer;const s0=()=>b.useContext(lc),c0=e=>"id"in e&&"source"in e&&"target"in e,l0=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,vs=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,u0=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),d0=(e,t)=>{if(!e.source||!e.target)return t;let n;return c0(e)?n={...e}:n={...e,id:l0(e)},u0(n,t)?t:t.concat(n)},ws=({x:e,y:t},[n,r,o],i,[s,l])=>{const u={x:(e-n)/o,y:(t-r)/o};return i?{x:s*Math.round(u.x/s),y:l*Math.round(u.y/l)}:u},Ed=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),mr=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],o={x:e.position.x-n,y:e.position.y-r};return{...o,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:o}},Qa=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const{x:i,y:s}=mr(o,t).positionAbsolute;return gd(r,To({x:i,y:s,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return yd(n)},_d=(e,t,[n,r,o]=[0,0,1],i=!1,s=!1,l=[0,0])=>{const u={x:(t.x-n)/o,y:(t.y-r)/o,width:t.width/o,height:t.height/o},d=[];return e.forEach(h=>{const{width:p,height:v,selectable:y=!0,hidden:k=!1}=h;if(s&&!y||k)return!1;const{positionAbsolute:S}=mr(h,l),N={x:S.x,y:S.y,width:p||0,height:v||0},T=ps(u,N),$=typeof p>"u"||typeof v>"u"||p===null||v===null,P=i&&T>0,C=(p||0)*(v||0);($||P||T>=C||h.dragging)&&d.push(h)}),d},Nd=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},Td=(e,t,n,r,o,i=.1)=>{const s=t/(e.width*(1+i)),l=n/(e.height*(1+i)),u=Math.min(s,l),d=zr(u,r,o),h=e.x+e.width/2,p=e.y+e.height/2,v=t/2-h*d,y=n/2-p*d;return{x:v,y,zoom:d}},ir=(e,t=0)=>e.transition().duration(t);function Il(e,t,n,r){return(t[n]||[]).reduce((o,i)=>{var s,l;return`${e.id}-${i.id}-${n}`!==r&&o.push({id:i.id||null,type:n,nodeId:e.id,x:(((s=e.positionAbsolute)==null?void 0:s.x)??0)+i.x+i.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+i.y+i.height/2}),o},[])}function f0(e,t,n,r,o,i){const{x:s,y:l}=Zn(e),d=t.elementsFromPoint(s,l).find(k=>k.classList.contains("react-flow__handle"));if(d){const k=d.getAttribute("data-nodeid");if(k){const S=uc(void 0,d),N=d.getAttribute("data-handleid"),T=i({nodeId:k,id:N,type:S});if(T){const $=o.find(P=>P.nodeId===k&&P.type===S&&P.id===N);return{handle:{id:N,type:S,nodeId:k,x:($==null?void 0:$.x)||n.x,y:($==null?void 0:$.y)||n.y},validHandleResult:T}}}}let h=[],p=1/0;if(o.forEach(k=>{const S=Math.sqrt((k.x-n.x)**2+(k.y-n.y)**2);if(S<=r){const N=i(k);S<=p&&(S<p?h=[{handle:k,validHandleResult:N}]:S===p&&h.push({handle:k,validHandleResult:N}),p=S)}}),!h.length)return{handle:null,validHandleResult:Cd()};if(h.length===1)return h[0];const v=h.some(({validHandleResult:k})=>k.isValid),y=h.some(({handle:k})=>k.type==="target");return h.find(({handle:k,validHandleResult:S})=>y?k.type==="target":v?S.isValid:!0)||h[0]}const h0={source:null,target:null,sourceHandle:null,targetHandle:null},Cd=()=>({handleDomNode:null,isValid:!1,connection:h0,endHandle:null});function Dd(e,t,n,r,o,i,s){const l=o==="target",u=s.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),d={...Cd(),handleDomNode:u};if(u){const h=uc(void 0,u),p=u.getAttribute("data-nodeid"),v=u.getAttribute("data-handleid"),y=u.classList.contains("connectable"),k=u.classList.contains("connectableend"),S={source:l?p:n,sourceHandle:l?v:r,target:l?n:p,targetHandle:l?r:v};d.connection=S,y&&k&&(t===wr.Strict?l&&h==="source"||!l&&h==="target":p!==n||v!==r)&&(d.endHandle={nodeId:p,handleId:v,type:h},d.isValid=i(S))}return d}function m0({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((o,i)=>{if(i[ut]){const{handleBounds:s}=i[ut];let l=[],u=[];s&&(l=Il(i,s,"source",`${t}-${n}-${r}`),u=Il(i,s,"target",`${t}-${n}-${r}`)),o.push(...l,...u)}return o},[])}function uc(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Yi(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function p0(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Od({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:o,getState:i,setState:s,isValidConnection:l,edgeUpdaterType:u,onReconnectEnd:d}){const h=pd(e.target),{connectionMode:p,domNode:v,autoPanOnConnect:y,connectionRadius:k,onConnectStart:S,panBy:N,getNodes:T,cancelConnection:$}=i();let P=0,C;const{x:X,y:q}=Zn(e),H=h==null?void 0:h.elementFromPoint(X,q),te=uc(u,H),K=v==null?void 0:v.getBoundingClientRect();if(!K||!te)return;let ne,U=Zn(e,K),ie=!1,ue=null,E=!1,z=null;const D=m0({nodes:T(),nodeId:n,handleId:t,handleType:te}),Q=()=>{if(!y)return;const[G,se]=md(U,K);N({x:G,y:se}),P=requestAnimationFrame(Q)};s({connectionPosition:U,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:te,connectionStartHandle:{nodeId:n,handleId:t,type:te},connectionEndHandle:null}),S==null||S(e,{nodeId:n,handleId:t,handleType:te});function J(G){const{transform:se}=i();U=Zn(G,K);const{handle:ae,validHandleResult:fe}=f0(G,h,ws(U,se,!1,[1,1]),k,D,we=>Dd(we,p,n,t,o?"target":"source",l,h));if(C=ae,ie||(Q(),ie=!0),z=fe.handleDomNode,ue=fe.connection,E=fe.isValid,s({connectionPosition:C&&E?Ed({x:C.x,y:C.y},se):U,connectionStatus:p0(!!C,E),connectionEndHandle:fe.endHandle}),!C&&!E&&!z)return Yi(ne);ue.source!==ue.target&&z&&(Yi(ne),ne=z,z.classList.add("connecting","react-flow__handle-connecting"),z.classList.toggle("valid",E),z.classList.toggle("react-flow__handle-valid",E))}function j(G){var se,ae;(C||z)&&ue&&E&&(r==null||r(ue)),(ae=(se=i()).onConnectEnd)==null||ae.call(se,G),u&&(d==null||d(G)),Yi(ne),$(),cancelAnimationFrame(P),ie=!1,E=!1,ue=null,z=null,h.removeEventListener("mousemove",J),h.removeEventListener("mouseup",j),h.removeEventListener("touchmove",J),h.removeEventListener("touchend",j)}h.addEventListener("mousemove",J),h.addEventListener("mouseup",j),h.addEventListener("touchmove",J),h.addEventListener("touchend",j)}const Pl=()=>!0,g0=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),y0=(e,t,n)=>r=>{const{connectionStartHandle:o,connectionEndHandle:i,connectionClickStartHandle:s}=r;return{connecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n||(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n}},jd=b.forwardRef(({type:e="source",position:t=De.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:i=!0,id:s,onConnect:l,children:u,className:d,onMouseDown:h,onTouchStart:p,...v},y)=>{var K,ne;const k=s||null,S=e==="target",N=yt(),T=s0(),{connectOnClick:$,noPanClassName:P}=tt(g0,St),{connecting:C,clickConnecting:X}=tt(y0(T,k,e),St);T||(ne=(K=N.getState()).onError)==null||ne.call(K,"010",Pn.error010());const q=U=>{const{defaultEdgeOptions:ie,onConnect:ue,hasDefaultEdges:E}=N.getState(),z={...ie,...U};if(E){const{edges:D,setEdges:Q}=N.getState();Q(d0(z,D))}ue==null||ue(z),l==null||l(z)},H=U=>{if(!T)return;const ie=wd(U);o&&(ie&&U.button===0||!ie)&&Od({event:U,handleId:k,nodeId:T,onConnect:q,isTarget:S,getState:N.getState,setState:N.setState,isValidConnection:n||N.getState().isValidConnection||Pl}),ie?h==null||h(U):p==null||p(U)},te=U=>{const{onClickConnectStart:ie,onClickConnectEnd:ue,connectionClickStartHandle:E,connectionMode:z,isValidConnection:D}=N.getState();if(!T||!E&&!o)return;if(!E){ie==null||ie(U,{nodeId:T,handleId:k,handleType:e}),N.setState({connectionClickStartHandle:{nodeId:T,type:e,handleId:k}});return}const Q=pd(U.target),J=n||D||Pl,{connection:j,isValid:G}=Dd({nodeId:T,id:k,type:e},z,E.nodeId,E.handleId||null,E.type,J,Q);G&&q(j),ue==null||ue(U),N.setState({connectionClickStartHandle:null})};return W.createElement("div",{"data-handleid":k,"data-nodeid":T,"data-handlepos":t,"data-id":`${T}-${k}-${e}`,className:Nt(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",P,d,{source:!S,target:S,connectable:r,connectablestart:o,connectableend:i,connecting:X,connectionindicator:r&&(o&&!C||i&&C)}]),onMouseDown:H,onTouchStart:H,onClick:$?te:void 0,ref:y,...v},u)});jd.displayName="Handle";var Xn=b.memo(jd);const Id=({data:e,isConnectable:t,targetPosition:n=De.Top,sourcePosition:r=De.Bottom})=>W.createElement(W.Fragment,null,W.createElement(Xn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,W.createElement(Xn,{type:"source",position:r,isConnectable:t}));Id.displayName="DefaultNode";var bs=b.memo(Id);const Pd=({data:e,isConnectable:t,sourcePosition:n=De.Bottom})=>W.createElement(W.Fragment,null,e==null?void 0:e.label,W.createElement(Xn,{type:"source",position:n,isConnectable:t}));Pd.displayName="InputNode";var Md=b.memo(Pd);const Ad=({data:e,isConnectable:t,targetPosition:n=De.Top})=>W.createElement(W.Fragment,null,W.createElement(Xn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);Ad.displayName="OutputNode";var $d=b.memo(Ad);const dc=()=>null;dc.displayName="GroupNode";const v0=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),ga=e=>e.id;function w0(e,t){return St(e.selectedNodes.map(ga),t.selectedNodes.map(ga))&&St(e.selectedEdges.map(ga),t.selectedEdges.map(ga))}const Rd=b.memo(({onSelectionChange:e})=>{const t=yt(),{selectedNodes:n,selectedEdges:r}=tt(v0,w0);return b.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChange.forEach(i=>i(o))},[n,r,e]),null});Rd.displayName="SelectionListener";const b0=e=>!!e.onSelectionChange;function x0({onSelectionChange:e}){const t=tt(b0);return e||t?W.createElement(Rd,{onSelectionChange:e}):null}const S0=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Cr(e,t){b.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Be(e,t,n){b.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const k0=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:i,onConnectEnd:s,onClickConnectStart:l,onClickConnectEnd:u,nodesDraggable:d,nodesConnectable:h,nodesFocusable:p,edgesFocusable:v,edgesUpdatable:y,elevateNodesOnSelect:k,minZoom:S,maxZoom:N,nodeExtent:T,onNodesChange:$,onEdgesChange:P,elementsSelectable:C,connectionMode:X,snapGrid:q,snapToGrid:H,translateExtent:te,connectOnClick:K,defaultEdgeOptions:ne,fitView:U,fitViewOptions:ie,onNodesDelete:ue,onEdgesDelete:E,onNodeDrag:z,onNodeDragStart:D,onNodeDragStop:Q,onSelectionDrag:J,onSelectionDragStart:j,onSelectionDragStop:G,noPanClassName:se,nodeOrigin:ae,rfId:fe,autoPanOnConnect:we,autoPanOnNodeDrag:Se,onError:Ne,connectionRadius:Ce,isValidConnection:je,nodeDragThreshold:he})=>{const{setNodes:Pe,setEdges:Ge,setDefaultNodesAndEdges:Oe,setMinZoom:Je,setMaxZoom:Ae,setTranslateExtent:He,setNodeExtent:Ke,reset:ze}=tt(S0,St),Te=yt();return b.useEffect(()=>{const st=r==null?void 0:r.map(vt=>({...vt,...ne}));return Oe(n,st),()=>{ze()}},[]),Be("defaultEdgeOptions",ne,Te.setState),Be("connectionMode",X,Te.setState),Be("onConnect",o,Te.setState),Be("onConnectStart",i,Te.setState),Be("onConnectEnd",s,Te.setState),Be("onClickConnectStart",l,Te.setState),Be("onClickConnectEnd",u,Te.setState),Be("nodesDraggable",d,Te.setState),Be("nodesConnectable",h,Te.setState),Be("nodesFocusable",p,Te.setState),Be("edgesFocusable",v,Te.setState),Be("edgesUpdatable",y,Te.setState),Be("elementsSelectable",C,Te.setState),Be("elevateNodesOnSelect",k,Te.setState),Be("snapToGrid",H,Te.setState),Be("snapGrid",q,Te.setState),Be("onNodesChange",$,Te.setState),Be("onEdgesChange",P,Te.setState),Be("connectOnClick",K,Te.setState),Be("fitViewOnInit",U,Te.setState),Be("fitViewOnInitOptions",ie,Te.setState),Be("onNodesDelete",ue,Te.setState),Be("onEdgesDelete",E,Te.setState),Be("onNodeDrag",z,Te.setState),Be("onNodeDragStart",D,Te.setState),Be("onNodeDragStop",Q,Te.setState),Be("onSelectionDrag",J,Te.setState),Be("onSelectionDragStart",j,Te.setState),Be("onSelectionDragStop",G,Te.setState),Be("noPanClassName",se,Te.setState),Be("nodeOrigin",ae,Te.setState),Be("rfId",fe,Te.setState),Be("autoPanOnConnect",we,Te.setState),Be("autoPanOnNodeDrag",Se,Te.setState),Be("onError",Ne,Te.setState),Be("connectionRadius",Ce,Te.setState),Be("isValidConnection",je,Te.setState),Be("nodeDragThreshold",he,Te.setState),Cr(e,Pe),Cr(t,Ge),Cr(S,Je),Cr(N,Ae),Cr(te,He),Cr(T,Ke),null},Ml={display:"none"},E0={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ld="react-flow__node-desc",Fd="react-flow__edge-desc",_0="react-flow__aria-live",N0=e=>e.ariaLiveMessage;function T0({rfId:e}){const t=tt(N0);return W.createElement("div",{id:`${_0}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:E0},t)}function C0({rfId:e,disableKeyboardA11y:t}){return W.createElement(W.Fragment,null,W.createElement("div",{id:`${Ld}-${e}`,style:Ml},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),W.createElement("div",{id:`${Fd}-${e}`,style:Ml},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&W.createElement(T0,{rfId:e}))}var Do=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=b.useState(!1),o=b.useRef(!1),i=b.useRef(new Set([])),[s,l]=b.useMemo(()=>{if(e!==null){const d=(Array.isArray(e)?e:[e]).filter(p=>typeof p=="string").map(p=>p.split("+")),h=d.reduce((p,v)=>p.concat(...v),[]);return[d,h]}return[[],[]]},[e]);return b.useEffect(()=>{const u=typeof document<"u"?document:null,d=(t==null?void 0:t.target)||u;if(e!==null){const h=y=>{if(o.current=y.ctrlKey||y.metaKey||y.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&gs(y))return!1;const S=$l(y.code,l);i.current.add(y[S]),Al(s,i.current,!1)&&(y.preventDefault(),r(!0))},p=y=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&gs(y))return!1;const S=$l(y.code,l);Al(s,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(y[S]),y.key==="Meta"&&i.current.clear(),o.current=!1},v=()=>{i.current.clear(),r(!1)};return d==null||d.addEventListener("keydown",h),d==null||d.addEventListener("keyup",p),window.addEventListener("blur",v),()=>{d==null||d.removeEventListener("keydown",h),d==null||d.removeEventListener("keyup",p),window.removeEventListener("blur",v)}}},[e,r]),n};function Al(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function $l(e,t){return t.includes(e)?"code":"key"}function Wd(e,t,n,r){var l,u;const o=e.parentNode||e.parentId;if(!o)return n;const i=t.get(o),s=mr(i,r);return Wd(i,t,{x:(n.x??0)+s.x,y:(n.y??0)+s.y,z:(((l=i[ut])==null?void 0:l.z)??0)>(n.z??0)?((u=i[ut])==null?void 0:u.z)??0:n.z??0},r)}function Bd(e,t,n){e.forEach(r=>{var i;const o=r.parentNode||r.parentId;if(o&&!e.has(o))throw new Error(`Parent node ${o} not found`);if(o||n!=null&&n[r.id]){const{x:s,y:l,z:u}=Wd(r,e,{...r.position,z:((i=r[ut])==null?void 0:i.z)??0},t);r.positionAbsolute={x:s,y:l},r[ut].z=u,n!=null&&n[r.id]&&(r[ut].isParent=!0)}})}function Vi(e,t,n,r){const o=new Map,i={},s=r?1e3:0;return e.forEach(l=>{var y;const u=(Zt(l.zIndex)?l.zIndex:0)+(l.selected?s:0),d=t.get(l.id),h={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},p=l.parentNode||l.parentId;p&&(i[p]=!0);const v=(d==null?void 0:d.type)&&(d==null?void 0:d.type)!==l.type;Object.defineProperty(h,ut,{enumerable:!1,value:{handleBounds:v||(y=d==null?void 0:d[ut])==null?void 0:y.handleBounds,z:u}}),o.set(l.id,h)}),Bd(o,n,i),o}function Hd(e,t={}){const{getNodes:n,width:r,height:o,minZoom:i,maxZoom:s,d3Zoom:l,d3Selection:u,fitViewOnInitDone:d,fitViewOnInit:h,nodeOrigin:p}=e(),v=t.initial&&!d&&h;if(l&&u&&(v||!t.initial)){const k=n().filter(N=>{var $;const T=t.includeHiddenNodes?N.width&&N.height:!N.hidden;return($=t.nodes)!=null&&$.length?T&&t.nodes.some(P=>P.id===N.id):T}),S=k.every(N=>N.width&&N.height);if(k.length>0&&S){const N=Qa(k,p),{x:T,y:$,zoom:P}=Td(N,r,o,t.minZoom??i,t.maxZoom??s,t.padding??.1),C=On.translate(T,$).scale(P);return typeof t.duration=="number"&&t.duration>0?l.transform(ir(u,t.duration),C):l.transform(u,C),!0}}return!1}function D0(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[ut]:r[ut],selected:n.selected})}),new Map(t)}function O0(e,t){return t.map(n=>{const r=e.find(o=>o.id===n.id);return r&&(n.selected=r.selected),n})}function ya({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:o,edges:i,onNodesChange:s,onEdgesChange:l,hasDefaultNodes:u,hasDefaultEdges:d}=n();e!=null&&e.length&&(u&&r({nodeInternals:D0(e,o)}),s==null||s(e)),t!=null&&t.length&&(d&&r({edges:O0(t,i)}),l==null||l(t))}const Dr=()=>{},j0={zoomIn:Dr,zoomOut:Dr,zoomTo:Dr,getZoom:()=>1,setViewport:Dr,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Dr,fitBounds:Dr,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},I0=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),P0=()=>{const e=yt(),{d3Zoom:t,d3Selection:n}=tt(I0,St);return b.useMemo(()=>n&&t?{zoomIn:o=>t.scaleBy(ir(n,o==null?void 0:o.duration),1.2),zoomOut:o=>t.scaleBy(ir(n,o==null?void 0:o.duration),1/1.2),zoomTo:(o,i)=>t.scaleTo(ir(n,i==null?void 0:i.duration),o),getZoom:()=>e.getState().transform[2],setViewport:(o,i)=>{const[s,l,u]=e.getState().transform,d=On.translate(o.x??s,o.y??l).scale(o.zoom??u);t.transform(ir(n,i==null?void 0:i.duration),d)},getViewport:()=>{const[o,i,s]=e.getState().transform;return{x:o,y:i,zoom:s}},fitView:o=>Hd(e.getState,o),setCenter:(o,i,s)=>{const{width:l,height:u,maxZoom:d}=e.getState(),h=typeof(s==null?void 0:s.zoom)<"u"?s.zoom:d,p=l/2-o*h,v=u/2-i*h,y=On.translate(p,v).scale(h);t.transform(ir(n,s==null?void 0:s.duration),y)},fitBounds:(o,i)=>{const{width:s,height:l,minZoom:u,maxZoom:d}=e.getState(),{x:h,y:p,zoom:v}=Td(o,s,l,u,d,(i==null?void 0:i.padding)??.1),y=On.translate(h,p).scale(v);t.transform(ir(n,i==null?void 0:i.duration),y)},project:o=>{const{transform:i,snapToGrid:s,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),ws(o,i,s,l)},screenToFlowPosition:o=>{const{transform:i,snapToGrid:s,snapGrid:l,domNode:u}=e.getState();if(!u)return o;const{x:d,y:h}=u.getBoundingClientRect(),p={x:o.x-d,y:o.y-h};return ws(p,i,s,l)},flowToScreenPosition:o=>{const{transform:i,domNode:s}=e.getState();if(!s)return o;const{x:l,y:u}=s.getBoundingClientRect(),d=Ed(o,i);return{x:d.x+l,y:d.y+u}},viewportInitialized:!0}:j0,[t,n])};function fc(){const e=P0(),t=yt(),n=b.useCallback(()=>t.getState().getNodes().map(S=>({...S})),[]),r=b.useCallback(S=>t.getState().nodeInternals.get(S),[]),o=b.useCallback(()=>{const{edges:S=[]}=t.getState();return S.map(N=>({...N}))},[]),i=b.useCallback(S=>{const{edges:N=[]}=t.getState();return N.find(T=>T.id===S)},[]),s=b.useCallback(S=>{const{getNodes:N,setNodes:T,hasDefaultNodes:$,onNodesChange:P}=t.getState(),C=N(),X=typeof S=="function"?S(C):S;if($)T(X);else if(P){const q=X.length===0?C.map(H=>({type:"remove",id:H.id})):X.map(H=>({item:H,type:"reset"}));P(q)}},[]),l=b.useCallback(S=>{const{edges:N=[],setEdges:T,hasDefaultEdges:$,onEdgesChange:P}=t.getState(),C=typeof S=="function"?S(N):S;if($)T(C);else if(P){const X=C.length===0?N.map(q=>({type:"remove",id:q.id})):C.map(q=>({item:q,type:"reset"}));P(X)}},[]),u=b.useCallback(S=>{const N=Array.isArray(S)?S:[S],{getNodes:T,setNodes:$,hasDefaultNodes:P,onNodesChange:C}=t.getState();if(P){const q=[...T(),...N];$(q)}else if(C){const X=N.map(q=>({item:q,type:"add"}));C(X)}},[]),d=b.useCallback(S=>{const N=Array.isArray(S)?S:[S],{edges:T=[],setEdges:$,hasDefaultEdges:P,onEdgesChange:C}=t.getState();if(P)$([...T,...N]);else if(C){const X=N.map(q=>({item:q,type:"add"}));C(X)}},[]),h=b.useCallback(()=>{const{getNodes:S,edges:N=[],transform:T}=t.getState(),[$,P,C]=T;return{nodes:S().map(X=>({...X})),edges:N.map(X=>({...X})),viewport:{x:$,y:P,zoom:C}}},[]),p=b.useCallback(({nodes:S,edges:N})=>{const{nodeInternals:T,getNodes:$,edges:P,hasDefaultNodes:C,hasDefaultEdges:X,onNodesDelete:q,onEdgesDelete:H,onNodesChange:te,onEdgesChange:K}=t.getState(),ne=(S||[]).map(z=>z.id),U=(N||[]).map(z=>z.id),ie=$().reduce((z,D)=>{const Q=D.parentNode||D.parentId,J=!ne.includes(D.id)&&Q&&z.find(G=>G.id===Q);return(typeof D.deletable=="boolean"?D.deletable:!0)&&(ne.includes(D.id)||J)&&z.push(D),z},[]),ue=P.filter(z=>typeof z.deletable=="boolean"?z.deletable:!0),E=ue.filter(z=>U.includes(z.id));if(ie||E){const z=Nd(ie,ue),D=[...E,...z],Q=D.reduce((J,j)=>(J.includes(j.id)||J.push(j.id),J),[]);if((X||C)&&(X&&t.setState({edges:P.filter(J=>!Q.includes(J.id))}),C&&(ie.forEach(J=>{T.delete(J.id)}),t.setState({nodeInternals:new Map(T)}))),Q.length>0&&(H==null||H(D),K&&K(Q.map(J=>({id:J,type:"remove"})))),ie.length>0&&(q==null||q(ie),te)){const J=ie.map(j=>({id:j.id,type:"remove"}));te(J)}}},[]),v=b.useCallback(S=>{const N=Jy(S),T=N?null:t.getState().nodeInternals.get(S.id);return!N&&!T?[null,null,N]:[N?S:Tl(T),T,N]},[]),y=b.useCallback((S,N=!0,T)=>{const[$,P,C]=v(S);return $?(T||t.getState().getNodes()).filter(X=>{if(!C&&(X.id===P.id||!X.positionAbsolute))return!1;const q=Tl(X),H=ps(q,$);return N&&H>0||H>=$.width*$.height}):[]},[]),k=b.useCallback((S,N,T=!0)=>{const[$]=v(S);if(!$)return!1;const P=ps($,N);return T&&P>0||P>=$.width*$.height},[]);return b.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:o,getEdge:i,setNodes:s,setEdges:l,addNodes:u,addEdges:d,toObject:h,deleteElements:p,getIntersectingNodes:y,isNodeIntersecting:k}),[e,n,r,o,i,s,l,u,d,h,p,y,k])}const M0={actInsideInputWithModifier:!1};var A0=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=yt(),{deleteElements:r}=fc(),o=Do(e,M0),i=Do(t);b.useEffect(()=>{if(o){const{edges:s,getNodes:l}=n.getState(),u=l().filter(h=>h.selected),d=s.filter(h=>h.selected);r({nodes:u,edges:d}),n.setState({nodesSelectionActive:!1})}},[o]),b.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])};function $0(e){const t=yt();b.useEffect(()=>{let n;const r=()=>{var i,s;if(!e.current)return;const o=oc(e.current);(o.height===0||o.width===0)&&((s=(i=t.getState()).onError)==null||s.call(i,"004",Pn.error004())),t.setState({width:o.width||500,height:o.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const hc={position:"absolute",width:"100%",height:"100%",top:0,left:0},R0=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,va=e=>({x:e.x,y:e.y,zoom:e.k}),Or=(e,t)=>e.target.closest(`.${t}`),Rl=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Ll=e=>{const t=e.ctrlKey&&Aa()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},L0=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),F0=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:o=!0,zoomOnPinch:i=!0,panOnScroll:s=!1,panOnScrollSpeed:l=.5,panOnScrollMode:u=dr.Free,zoomOnDoubleClick:d=!0,elementsSelectable:h,panOnDrag:p=!0,defaultViewport:v,translateExtent:y,minZoom:k,maxZoom:S,zoomActivationKeyCode:N,preventScrolling:T=!0,children:$,noWheelClassName:P,noPanClassName:C})=>{const X=b.useRef(),q=yt(),H=b.useRef(!1),te=b.useRef(!1),K=b.useRef(null),ne=b.useRef({x:0,y:0,zoom:0}),{d3Zoom:U,d3Selection:ie,d3ZoomHandler:ue,userSelectionActive:E}=tt(L0,St),z=Do(N),D=b.useRef(0),Q=b.useRef(!1),J=b.useRef();return $0(K),b.useEffect(()=>{if(K.current){const j=K.current.getBoundingClientRect(),G=fd().scaleExtent([k,S]).translateExtent(y),se=Gt(K.current).call(G),ae=On.translate(v.x,v.y).scale(zr(v.zoom,k,S)),fe=[[0,0],[j.width,j.height]],we=G.constrain()(ae,fe,y);G.transform(se,we),G.wheelDelta(Ll),q.setState({d3Zoom:G,d3Selection:se,d3ZoomHandler:se.on("wheel.zoom"),transform:[we.x,we.y,we.k],domNode:K.current.closest(".react-flow")})}},[]),b.useEffect(()=>{ie&&U&&(s&&!z&&!E?ie.on("wheel.zoom",j=>{if(Or(j,P))return!1;j.preventDefault(),j.stopImmediatePropagation();const G=ie.property("__zoom").k||1;if(j.ctrlKey&&i){const je=tn(j),he=Ll(j),Pe=G*Math.pow(2,he);U.scaleTo(ie,Pe,je,j);return}const se=j.deltaMode===1?20:1;let ae=u===dr.Vertical?0:j.deltaX*se,fe=u===dr.Horizontal?0:j.deltaY*se;!Aa()&&j.shiftKey&&u!==dr.Vertical&&(ae=j.deltaY*se,fe=0),U.translateBy(ie,-(ae/G)*l,-(fe/G)*l,{internal:!0});const we=va(ie.property("__zoom")),{onViewportChangeStart:Se,onViewportChange:Ne,onViewportChangeEnd:Ce}=q.getState();clearTimeout(J.current),Q.current||(Q.current=!0,t==null||t(j,we),Se==null||Se(we)),Q.current&&(e==null||e(j,we),Ne==null||Ne(we),J.current=setTimeout(()=>{n==null||n(j,we),Ce==null||Ce(we),Q.current=!1},150))},{passive:!1}):typeof ue<"u"&&ie.on("wheel.zoom",function(j,G){if(!T&&j.type==="wheel"&&!j.ctrlKey||Or(j,P))return null;j.preventDefault(),ue.call(this,j,G)},{passive:!1}))},[E,s,u,ie,U,ue,z,i,T,P,t,e,n]),b.useEffect(()=>{U&&U.on("start",j=>{var ae,fe;if(!j.sourceEvent||j.sourceEvent.internal)return null;D.current=(ae=j.sourceEvent)==null?void 0:ae.button;const{onViewportChangeStart:G}=q.getState(),se=va(j.transform);H.current=!0,ne.current=se,((fe=j.sourceEvent)==null?void 0:fe.type)==="mousedown"&&q.setState({paneDragging:!0}),G==null||G(se),t==null||t(j.sourceEvent,se)})},[U,t]),b.useEffect(()=>{U&&(E&&!H.current?U.on("zoom",null):E||U.on("zoom",j=>{var se;const{onViewportChange:G}=q.getState();if(q.setState({transform:[j.transform.x,j.transform.y,j.transform.k]}),te.current=!!(r&&Rl(p,D.current??0)),(e||G)&&!((se=j.sourceEvent)!=null&&se.internal)){const ae=va(j.transform);G==null||G(ae),e==null||e(j.sourceEvent,ae)}}))},[E,U,e,p,r]),b.useEffect(()=>{U&&U.on("end",j=>{if(!j.sourceEvent||j.sourceEvent.internal)return null;const{onViewportChangeEnd:G}=q.getState();if(H.current=!1,q.setState({paneDragging:!1}),r&&Rl(p,D.current??0)&&!te.current&&r(j.sourceEvent),te.current=!1,(n||G)&&R0(ne.current,j.transform)){const se=va(j.transform);ne.current=se,clearTimeout(X.current),X.current=setTimeout(()=>{G==null||G(se),n==null||n(j.sourceEvent,se)},s?150:0)}})},[U,s,p,n,r]),b.useEffect(()=>{U&&U.filter(j=>{const G=z||o,se=i&&j.ctrlKey;if((p===!0||Array.isArray(p)&&p.includes(1))&&j.button===1&&j.type==="mousedown"&&(Or(j,"react-flow__node")||Or(j,"react-flow__edge")))return!0;if(!p&&!G&&!s&&!d&&!i||E||!d&&j.type==="dblclick"||Or(j,P)&&j.type==="wheel"||Or(j,C)&&(j.type!=="wheel"||s&&j.type==="wheel"&&!z)||!i&&j.ctrlKey&&j.type==="wheel"||!G&&!s&&!se&&j.type==="wheel"||!p&&(j.type==="mousedown"||j.type==="touchstart")||Array.isArray(p)&&!p.includes(j.button)&&j.type==="mousedown")return!1;const ae=Array.isArray(p)&&p.includes(j.button)||!j.button||j.button<=1;return(!j.ctrlKey||j.type==="wheel")&&ae})},[E,U,o,i,s,d,p,h,z]),W.createElement("div",{className:"react-flow__renderer",ref:K,style:hc},$)},W0=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function B0(){const{userSelectionActive:e,userSelectionRect:t}=tt(W0,St);return e&&t?W.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Fl(e,t){const n=t.parentNode||t.parentId,r=e.find(o=>o.id===n);if(r){const o=t.position.x+t.width-r.width,i=t.position.y+t.height-r.height;if(o>0||i>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,o>0&&(r.style.width+=o),i>0&&(r.style.height+=i),t.position.x<0){const s=Math.abs(t.position.x);r.position.x=r.position.x-s,r.style.width+=s,t.position.x=0}if(t.position.y<0){const s=Math.abs(t.position.y);r.position.y=r.position.y-s,r.style.height+=s,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function H0(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,o)=>{const i=e.filter(l=>l.id===o.id);if(i.length===0)return r.push(o),r;const s={...o};for(const l of i)if(l)switch(l.type){case"select":{s.selected=l.selected;break}case"position":{typeof l.position<"u"&&(s.position=l.position),typeof l.positionAbsolute<"u"&&(s.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(s.dragging=l.dragging),s.expandParent&&Fl(r,s);break}case"dimensions":{typeof l.dimensions<"u"&&(s.width=l.dimensions.width,s.height=l.dimensions.height),typeof l.updateStyle<"u"&&(s.style={...s.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(s.resizing=l.resizing),s.expandParent&&Fl(r,s);break}case"remove":return r}return r.push(s),r},n)}function zd(e,t){return H0(e,t)}const qn=(e,t)=>({id:e,type:"select",selected:t});function Mr(e,t){return e.reduce((n,r)=>{const o=t.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(qn(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(qn(r.id,!1))),n},[])}const qi=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},z0=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Yd=b.memo(({isSelecting:e,selectionMode:t=Co.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:o,onPaneClick:i,onPaneContextMenu:s,onPaneScroll:l,onPaneMouseEnter:u,onPaneMouseMove:d,onPaneMouseLeave:h,children:p})=>{const v=b.useRef(null),y=yt(),k=b.useRef(0),S=b.useRef(0),N=b.useRef(),{userSelectionActive:T,elementsSelectable:$,dragging:P}=tt(z0,St),C=()=>{y.setState({userSelectionActive:!1,userSelectionRect:null}),k.current=0,S.current=0},X=ue=>{i==null||i(ue),y.getState().resetSelectedElements(),y.setState({nodesSelectionActive:!1})},q=ue=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){ue.preventDefault();return}s==null||s(ue)},H=l?ue=>l(ue):void 0,te=ue=>{const{resetSelectedElements:E,domNode:z}=y.getState();if(N.current=z==null?void 0:z.getBoundingClientRect(),!$||!e||ue.button!==0||ue.target!==v.current||!N.current)return;const{x:D,y:Q}=Zn(ue,N.current);E(),y.setState({userSelectionRect:{width:0,height:0,startX:D,startY:Q,x:D,y:Q}}),r==null||r(ue)},K=ue=>{const{userSelectionRect:E,nodeInternals:z,edges:D,transform:Q,onNodesChange:J,onEdgesChange:j,nodeOrigin:G,getNodes:se}=y.getState();if(!e||!N.current||!E)return;y.setState({userSelectionActive:!0,nodesSelectionActive:!1});const ae=Zn(ue,N.current),fe=E.startX??0,we=E.startY??0,Se={...E,x:ae.x<fe?ae.x:fe,y:ae.y<we?ae.y:we,width:Math.abs(ae.x-fe),height:Math.abs(ae.y-we)},Ne=se(),Ce=_d(z,Se,Q,t===Co.Partial,!0,G),je=Nd(Ce,D).map(Pe=>Pe.id),he=Ce.map(Pe=>Pe.id);if(k.current!==he.length){k.current=he.length;const Pe=Mr(Ne,he);Pe.length&&(J==null||J(Pe))}if(S.current!==je.length){S.current=je.length;const Pe=Mr(D,je);Pe.length&&(j==null||j(Pe))}y.setState({userSelectionRect:Se})},ne=ue=>{if(ue.button!==0)return;const{userSelectionRect:E}=y.getState();!T&&E&&ue.target===v.current&&(X==null||X(ue)),y.setState({nodesSelectionActive:k.current>0}),C(),o==null||o(ue)},U=ue=>{T&&(y.setState({nodesSelectionActive:k.current>0}),o==null||o(ue)),C()},ie=$&&(e||T);return W.createElement("div",{className:Nt(["react-flow__pane",{dragging:P,selection:e}]),onClick:ie?void 0:qi(X,v),onContextMenu:qi(q,v),onWheel:qi(H,v),onMouseEnter:ie?void 0:u,onMouseDown:ie?te:void 0,onMouseMove:ie?K:d,onMouseUp:ie?ne:void 0,onMouseLeave:ie?U:h,ref:v,style:hc},p,W.createElement(B0,null))});Yd.displayName="Pane";function Vd(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:Vd(r,t):!1}function Wl(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function Y0(e,t,n,r){return Array.from(e.values()).filter(o=>(o.selected||o.id===r)&&(!o.parentNode||o.parentId||!Vd(o,e))&&(o.draggable||t&&typeof o.draggable>"u")).map(o=>{var i,s;return{id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((i=o.positionAbsolute)==null?void 0:i.x)??0),y:n.y-(((s=o.positionAbsolute)==null?void 0:s.y)??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode||o.parentId,parentId:o.parentNode||o.parentId,width:o.width,height:o.height,expandParent:o.expandParent}})}function V0(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function qd(e,t,n,r,o=[0,0],i){const s=V0(e,e.extent||r);let l=s;const u=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(u&&e.width&&e.height){const p=n.get(u),{x:v,y}=mr(p,o).positionAbsolute;l=p&&Zt(v)&&Zt(y)&&Zt(p.width)&&Zt(p.height)?[[v+e.width*o[0],y+e.height*o[1]],[v+p.width-e.width+e.width*o[0],y+p.height-e.height+e.height*o[1]]]:l}else i==null||i("005",Pn.error005()),l=s;else if(e.extent&&u&&e.extent!=="parent"){const p=n.get(u),{x:v,y}=mr(p,o).positionAbsolute;l=[[e.extent[0][0]+v,e.extent[0][1]+y],[e.extent[1][0]+v,e.extent[1][1]+y]]}let d={x:0,y:0};if(u){const p=n.get(u);d=mr(p,o).positionAbsolute}const h=l&&l!=="parent"?ac(t,l):t;return{position:{x:h.x-d.x,y:h.y-d.y},positionAbsolute:h}}function Ki({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[e?r.find(o=>o.id===e):r[0],r]}const Bl=(e,t,n,r)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return null;const i=Array.from(o),s=t.getBoundingClientRect(),l={x:s.width*r[0],y:s.height*r[1]};return i.map(u=>{const d=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),position:u.getAttribute("data-handlepos"),x:(d.left-s.left-l.x)/n,y:(d.top-s.top-l.y)/n,...oc(u)}})};function co(e,t,n){return n===void 0?n:r=>{const o=t().nodeInternals.get(e);o&&n(r,{...o})}}function xs({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:i,multiSelectionActive:s,nodeInternals:l,onError:u}=t.getState(),d=l.get(e);if(!d){u==null||u("012",Pn.error012(e));return}t.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&s)&&(i({nodes:[d],edges:[]}),requestAnimationFrame(()=>{var h;return(h=r==null?void 0:r.current)==null?void 0:h.blur()})):o([e])}function q0(){const e=yt();return b.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:o,snapToGrid:i}=e.getState(),s=n.touches?n.touches[0].clientX:n.clientX,l=n.touches?n.touches[0].clientY:n.clientY,u={x:(s-r[0])/r[2],y:(l-r[1])/r[2]};return{xSnapped:i?o[0]*Math.round(u.x/o[0]):u.x,ySnapped:i?o[1]*Math.round(u.y/o[1]):u.y,...u}},[])}function Ui(e){return(t,n,r)=>e==null?void 0:e(t,r)}function Kd({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:i,selectNodesOnDrag:s}){const l=yt(),[u,d]=b.useState(!1),h=b.useRef([]),p=b.useRef({x:null,y:null}),v=b.useRef(0),y=b.useRef(null),k=b.useRef({x:0,y:0}),S=b.useRef(null),N=b.useRef(!1),T=b.useRef(!1),$=b.useRef(!1),P=q0();return b.useEffect(()=>{if(e!=null&&e.current){const C=Gt(e.current),X=({x:te,y:K})=>{const{nodeInternals:ne,onNodeDrag:U,onSelectionDrag:ie,updateNodePositions:ue,nodeExtent:E,snapGrid:z,snapToGrid:D,nodeOrigin:Q,onError:J}=l.getState();p.current={x:te,y:K};let j=!1,G={x:0,y:0,x2:0,y2:0};if(h.current.length>1&&E){const ae=Qa(h.current,Q);G=To(ae)}if(h.current=h.current.map(ae=>{const fe={x:te-ae.distance.x,y:K-ae.distance.y};D&&(fe.x=z[0]*Math.round(fe.x/z[0]),fe.y=z[1]*Math.round(fe.y/z[1]));const we=[[E[0][0],E[0][1]],[E[1][0],E[1][1]]];h.current.length>1&&E&&!ae.extent&&(we[0][0]=ae.positionAbsolute.x-G.x+E[0][0],we[1][0]=ae.positionAbsolute.x+(ae.width??0)-G.x2+E[1][0],we[0][1]=ae.positionAbsolute.y-G.y+E[0][1],we[1][1]=ae.positionAbsolute.y+(ae.height??0)-G.y2+E[1][1]);const Se=qd(ae,fe,ne,we,Q,J);return j=j||ae.position.x!==Se.position.x||ae.position.y!==Se.position.y,ae.position=Se.position,ae.positionAbsolute=Se.positionAbsolute,ae}),!j)return;ue(h.current,!0,!0),d(!0);const se=o?U:Ui(ie);if(se&&S.current){const[ae,fe]=Ki({nodeId:o,dragItems:h.current,nodeInternals:ne});se(S.current,ae,fe)}},q=()=>{if(!y.current)return;const[te,K]=md(k.current,y.current);if(te!==0||K!==0){const{transform:ne,panBy:U}=l.getState();p.current.x=(p.current.x??0)-te/ne[2],p.current.y=(p.current.y??0)-K/ne[2],U({x:te,y:K})&&X(p.current)}v.current=requestAnimationFrame(q)},H=te=>{var Q;const{nodeInternals:K,multiSelectionActive:ne,nodesDraggable:U,unselectNodesAndEdges:ie,onNodeDragStart:ue,onSelectionDragStart:E}=l.getState();T.current=!0;const z=o?ue:Ui(E);(!s||!i)&&!ne&&o&&((Q=K.get(o))!=null&&Q.selected||ie()),o&&i&&s&&xs({id:o,store:l,nodeRef:e});const D=P(te);if(p.current=D,h.current=Y0(K,U,D,o),z&&h.current){const[J,j]=Ki({nodeId:o,dragItems:h.current,nodeInternals:K});z(te.sourceEvent,J,j)}};if(t)C.on(".drag",null);else{const te=rg().on("start",K=>{const{domNode:ne,nodeDragThreshold:U}=l.getState();U===0&&H(K),$.current=!1;const ie=P(K);p.current=ie,y.current=(ne==null?void 0:ne.getBoundingClientRect())||null,k.current=Zn(K.sourceEvent,y.current)}).on("drag",K=>{var ue,E;const ne=P(K),{autoPanOnNodeDrag:U,nodeDragThreshold:ie}=l.getState();if(K.sourceEvent.type==="touchmove"&&K.sourceEvent.touches.length>1&&($.current=!0),!$.current){if(!N.current&&T.current&&U&&(N.current=!0,q()),!T.current){const z=ne.xSnapped-(((ue=p==null?void 0:p.current)==null?void 0:ue.x)??0),D=ne.ySnapped-(((E=p==null?void 0:p.current)==null?void 0:E.y)??0);Math.sqrt(z*z+D*D)>ie&&H(K)}(p.current.x!==ne.xSnapped||p.current.y!==ne.ySnapped)&&h.current&&T.current&&(S.current=K.sourceEvent,k.current=Zn(K.sourceEvent,y.current),X(ne))}}).on("end",K=>{if(!(!T.current||$.current)&&(d(!1),N.current=!1,T.current=!1,cancelAnimationFrame(v.current),h.current)){const{updateNodePositions:ne,nodeInternals:U,onNodeDragStop:ie,onSelectionDragStop:ue}=l.getState(),E=o?ie:Ui(ue);if(ne(h.current,!1,!1),E){const[z,D]=Ki({nodeId:o,dragItems:h.current,nodeInternals:U});E(K.sourceEvent,z,D)}}}).filter(K=>{const ne=K.target;return!K.button&&(!n||!Wl(ne,`.${n}`,e))&&(!r||Wl(ne,r,e))});return C.call(te),()=>{C.on(".drag",null)}}}},[e,t,n,r,i,l,o,s,P]),u}function Ud(){const e=yt();return b.useCallback(n=>{const{nodeInternals:r,nodeExtent:o,updateNodePositions:i,getNodes:s,snapToGrid:l,snapGrid:u,onError:d,nodesDraggable:h}=e.getState(),p=s().filter($=>$.selected&&($.draggable||h&&typeof $.draggable>"u")),v=l?u[0]:5,y=l?u[1]:5,k=n.isShiftPressed?4:1,S=n.x*v*k,N=n.y*y*k,T=p.map($=>{if($.positionAbsolute){const P={x:$.positionAbsolute.x+S,y:$.positionAbsolute.y+N};l&&(P.x=u[0]*Math.round(P.x/u[0]),P.y=u[1]*Math.round(P.y/u[1]));const{positionAbsolute:C,position:X}=qd($,P,r,o,void 0,d);$.position=X,$.positionAbsolute=C}return $});i(T,!0,!1)},[])}const Fr={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var lo=e=>{const t=({id:n,type:r,data:o,xPos:i,yPos:s,xPosOrigin:l,yPosOrigin:u,selected:d,onClick:h,onMouseEnter:p,onMouseMove:v,onMouseLeave:y,onContextMenu:k,onDoubleClick:S,style:N,className:T,isDraggable:$,isSelectable:P,isConnectable:C,isFocusable:X,selectNodesOnDrag:q,sourcePosition:H,targetPosition:te,hidden:K,resizeObserver:ne,dragHandle:U,zIndex:ie,isParent:ue,noDragClassName:E,noPanClassName:z,initialized:D,disableKeyboardA11y:Q,ariaLabel:J,rfId:j,hasHandleBounds:G})=>{const se=yt(),ae=b.useRef(null),fe=b.useRef(null),we=b.useRef(H),Se=b.useRef(te),Ne=b.useRef(r),Ce=P||$||h||p||v||y,je=Ud(),he=co(n,se.getState,p),Pe=co(n,se.getState,v),Ge=co(n,se.getState,y),Oe=co(n,se.getState,k),Je=co(n,se.getState,S),Ae=ze=>{const{nodeDragThreshold:Te}=se.getState();if(P&&(!q||!$||Te>0)&&xs({id:n,store:se,nodeRef:ae}),h){const st=se.getState().nodeInternals.get(n);st&&h(ze,{...st})}},He=ze=>{if(!gs(ze)&&!Q)if(vd.includes(ze.key)&&P){const Te=ze.key==="Escape";xs({id:n,store:se,unselect:Te,nodeRef:ae})}else $&&d&&Object.prototype.hasOwnProperty.call(Fr,ze.key)&&(se.setState({ariaLiveMessage:`Moved selected node ${ze.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~s}`}),je({x:Fr[ze.key].x,y:Fr[ze.key].y,isShiftPressed:ze.shiftKey}))};b.useEffect(()=>()=>{fe.current&&(ne==null||ne.unobserve(fe.current),fe.current=null)},[]),b.useEffect(()=>{if(ae.current&&!K){const ze=ae.current;(!D||!G||fe.current!==ze)&&(fe.current&&(ne==null||ne.unobserve(fe.current)),ne==null||ne.observe(ze),fe.current=ze)}},[K,D,G]),b.useEffect(()=>{const ze=Ne.current!==r,Te=we.current!==H,st=Se.current!==te;ae.current&&(ze||Te||st)&&(ze&&(Ne.current=r),Te&&(we.current=H),st&&(Se.current=te),se.getState().updateNodeDimensions([{id:n,nodeElement:ae.current,forceUpdate:!0}]))},[n,r,H,te]);const Ke=Kd({nodeRef:ae,disabled:K||!$,noDragClassName:E,handleSelector:U,nodeId:n,isSelectable:P,selectNodesOnDrag:q});return K?null:W.createElement("div",{className:Nt(["react-flow__node",`react-flow__node-${r}`,{[z]:$},T,{selected:d,selectable:P,parent:ue,dragging:Ke}]),ref:ae,style:{zIndex:ie,transform:`translate(${l}px,${u}px)`,pointerEvents:Ce?"all":"none",visibility:D?"visible":"hidden",...N},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:he,onMouseMove:Pe,onMouseLeave:Ge,onContextMenu:Oe,onClick:Ae,onDoubleClick:Je,onKeyDown:X?He:void 0,tabIndex:X?0:void 0,role:X?"button":void 0,"aria-describedby":Q?void 0:`${Ld}-${j}`,"aria-label":J},W.createElement(i0,{value:n},W.createElement(e,{id:n,data:o,type:r,xPos:i,yPos:s,selected:d,isConnectable:C,sourcePosition:H,targetPosition:te,dragging:Ke,dragHandle:U,zIndex:ie})))};return t.displayName="NodeWrapper",b.memo(t)};const K0=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Qa(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function U0({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=yt(),{width:o,height:i,x:s,y:l,transformString:u,userSelectionActive:d}=tt(K0,St),h=Ud(),p=b.useRef(null);if(b.useEffect(()=>{var k;n||(k=p.current)==null||k.focus({preventScroll:!0})},[n]),Kd({nodeRef:p}),d||!o||!i)return null;const v=e?k=>{const S=r.getState().getNodes().filter(N=>N.selected);e(k,S)}:void 0,y=k=>{Object.prototype.hasOwnProperty.call(Fr,k.key)&&h({x:Fr[k.key].x,y:Fr[k.key].y,isShiftPressed:k.shiftKey})};return W.createElement("div",{className:Nt(["react-flow__nodesselection","react-flow__container",t]),style:{transform:u}},W.createElement("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:v,tabIndex:n?void 0:-1,onKeyDown:n?void 0:y,style:{width:o,height:i,top:l,left:s}}))}var X0=b.memo(U0);const G0=e=>e.nodesSelectionActive,Xd=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,deleteKeyCode:l,onMove:u,onMoveStart:d,onMoveEnd:h,selectionKeyCode:p,selectionOnDrag:v,selectionMode:y,onSelectionStart:k,onSelectionEnd:S,multiSelectionKeyCode:N,panActivationKeyCode:T,zoomActivationKeyCode:$,elementsSelectable:P,zoomOnScroll:C,zoomOnPinch:X,panOnScroll:q,panOnScrollSpeed:H,panOnScrollMode:te,zoomOnDoubleClick:K,panOnDrag:ne,defaultViewport:U,translateExtent:ie,minZoom:ue,maxZoom:E,preventScrolling:z,onSelectionContextMenu:D,noWheelClassName:Q,noPanClassName:J,disableKeyboardA11y:j})=>{const G=tt(G0),se=Do(p),ae=Do(T),fe=ae||ne,we=ae||q,Se=se||v&&fe!==!0;return A0({deleteKeyCode:l,multiSelectionKeyCode:N}),W.createElement(F0,{onMove:u,onMoveStart:d,onMoveEnd:h,onPaneContextMenu:i,elementsSelectable:P,zoomOnScroll:C,zoomOnPinch:X,panOnScroll:we,panOnScrollSpeed:H,panOnScrollMode:te,zoomOnDoubleClick:K,panOnDrag:!se&&fe,defaultViewport:U,translateExtent:ie,minZoom:ue,maxZoom:E,zoomActivationKeyCode:$,preventScrolling:z,noWheelClassName:Q,noPanClassName:J},W.createElement(Yd,{onSelectionStart:k,onSelectionEnd:S,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:fe,isSelecting:!!Se,selectionMode:y},e,G&&W.createElement(X0,{onSelectionContextMenu:D,noPanClassName:J,disableKeyboardA11y:j})))};Xd.displayName="FlowRenderer";var Z0=b.memo(Xd);function Q0(e){return tt(b.useCallback(n=>e?_d(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function J0(e){const t={input:lo(e.input||Md),default:lo(e.default||bs),output:lo(e.output||$d),group:lo(e.group||dc)},n={},r=Object.keys(e).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,i)=>(o[i]=lo(e[i]||bs),o),n);return{...t,...r}}const ev=({x:e,y:t,width:n,height:r,origin:o})=>!n||!r?{x:e,y:t}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-r*o[1]},tv=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Gd=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,updateNodeDimensions:i,onError:s}=tt(tv,St),l=Q0(e.onlyRenderVisibleElements),u=b.useRef(),d=b.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const h=new ResizeObserver(p=>{const v=p.map(y=>({id:y.target.getAttribute("data-id"),nodeElement:y.target,forceUpdate:!0}));i(v)});return u.current=h,h},[]);return b.useEffect(()=>()=>{var h;(h=u==null?void 0:u.current)==null||h.disconnect()},[]),W.createElement("div",{className:"react-flow__nodes",style:hc},l.map(h=>{var X,q,H;let p=h.type||"default";e.nodeTypes[p]||(s==null||s("003",Pn.error003(p)),p="default");const v=e.nodeTypes[p]||e.nodeTypes.default,y=!!(h.draggable||t&&typeof h.draggable>"u"),k=!!(h.selectable||o&&typeof h.selectable>"u"),S=!!(h.connectable||n&&typeof h.connectable>"u"),N=!!(h.focusable||r&&typeof h.focusable>"u"),T=e.nodeExtent?ac(h.positionAbsolute,e.nodeExtent):h.positionAbsolute,$=(T==null?void 0:T.x)??0,P=(T==null?void 0:T.y)??0,C=ev({x:$,y:P,width:h.width??0,height:h.height??0,origin:e.nodeOrigin});return W.createElement(v,{key:h.id,id:h.id,className:h.className,style:h.style,type:p,data:h.data,sourcePosition:h.sourcePosition||De.Bottom,targetPosition:h.targetPosition||De.Top,hidden:h.hidden,xPos:$,yPos:P,xPosOrigin:C.x,yPosOrigin:C.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!h.selected,isDraggable:y,isSelectable:k,isConnectable:S,isFocusable:N,resizeObserver:d,dragHandle:h.dragHandle,zIndex:((X=h[ut])==null?void 0:X.z)??0,isParent:!!((q=h[ut])!=null&&q.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!h.width&&!!h.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:h.ariaLabel,hasHandleBounds:!!((H=h[ut])!=null&&H.handleBounds)})}))};Gd.displayName="NodeRenderer";var nv=b.memo(Gd);const rv=(e,t,n)=>n===De.Left?e-t:n===De.Right?e+t:e,ov=(e,t,n)=>n===De.Top?e-t:n===De.Bottom?e+t:e,Hl="react-flow__edgeupdater",zl=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:i,onMouseOut:s,type:l})=>W.createElement("circle",{onMouseDown:o,onMouseEnter:i,onMouseOut:s,className:Nt([Hl,`${Hl}-${l}`]),cx:rv(t,r,e),cy:ov(n,r,e),r,stroke:"transparent",fill:"transparent"}),av=()=>!0;var jr=e=>{const t=({id:n,className:r,type:o,data:i,onClick:s,onEdgeDoubleClick:l,selected:u,animated:d,label:h,labelStyle:p,labelShowBg:v,labelBgStyle:y,labelBgPadding:k,labelBgBorderRadius:S,style:N,source:T,target:$,sourceX:P,sourceY:C,targetX:X,targetY:q,sourcePosition:H,targetPosition:te,elementsSelectable:K,hidden:ne,sourceHandleId:U,targetHandleId:ie,onContextMenu:ue,onMouseEnter:E,onMouseMove:z,onMouseLeave:D,reconnectRadius:Q,onReconnect:J,onReconnectStart:j,onReconnectEnd:G,markerEnd:se,markerStart:ae,rfId:fe,ariaLabel:we,isFocusable:Se,isReconnectable:Ne,pathOptions:Ce,interactionWidth:je,disableKeyboardA11y:he})=>{const Pe=b.useRef(null),[Ge,Oe]=b.useState(!1),[Je,Ae]=b.useState(!1),He=yt(),Ke=b.useMemo(()=>`url('#${vs(ae,fe)}')`,[ae,fe]),ze=b.useMemo(()=>`url('#${vs(se,fe)}')`,[se,fe]);if(ne)return null;const Te=Xe=>{var me;const{edges:mt,addSelectedEdges:bt,unselectNodesAndEdges:ce,multiSelectionActive:ee}=He.getState(),pe=mt.find(Ee=>Ee.id===n);pe&&(K&&(He.setState({nodesSelectionActive:!1}),pe.selected&&ee?(ce({nodes:[],edges:[pe]}),(me=Pe.current)==null||me.blur()):bt([n])),s&&s(Xe,pe))},st=so(n,He.getState,l),vt=so(n,He.getState,ue),dt=so(n,He.getState,E),Pt=so(n,He.getState,z),kt=so(n,He.getState,D),wt=(Xe,mt)=>{if(Xe.button!==0)return;const{edges:bt,isValidConnection:ce}=He.getState(),ee=mt?$:T,pe=(mt?ie:U)||null,me=mt?"target":"source",Ee=ce||av,le=mt,Le=bt.find(Ve=>Ve.id===n);Ae(!0),j==null||j(Xe,Le,me);const Ye=Ve=>{Ae(!1),G==null||G(Ve,Le,me)};Od({event:Xe,handleId:pe,nodeId:ee,onConnect:Ve=>J==null?void 0:J(Le,Ve),isTarget:le,getState:He.getState,setState:He.setState,isValidConnection:Ee,edgeUpdaterType:me,onReconnectEnd:Ye})},Tt=Xe=>wt(Xe,!0),pt=Xe=>wt(Xe,!1),Mt=()=>Oe(!0),Et=()=>Oe(!1),Ct=!K&&!s,At=Xe=>{var mt;if(!he&&vd.includes(Xe.key)&&K){const{unselectNodesAndEdges:bt,addSelectedEdges:ce,edges:ee}=He.getState();Xe.key==="Escape"?((mt=Pe.current)==null||mt.blur(),bt({edges:[ee.find(me=>me.id===n)]})):ce([n])}};return W.createElement("g",{className:Nt(["react-flow__edge",`react-flow__edge-${o}`,r,{selected:u,animated:d,inactive:Ct,updating:Ge}]),onClick:Te,onDoubleClick:st,onContextMenu:vt,onMouseEnter:dt,onMouseMove:Pt,onMouseLeave:kt,onKeyDown:Se?At:void 0,tabIndex:Se?0:void 0,role:Se?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":we===null?void 0:we||`Edge from ${T} to ${$}`,"aria-describedby":Se?`${Fd}-${fe}`:void 0,ref:Pe},!Je&&W.createElement(e,{id:n,source:T,target:$,selected:u,animated:d,label:h,labelStyle:p,labelShowBg:v,labelBgStyle:y,labelBgPadding:k,labelBgBorderRadius:S,data:i,style:N,sourceX:P,sourceY:C,targetX:X,targetY:q,sourcePosition:H,targetPosition:te,sourceHandleId:U,targetHandleId:ie,markerStart:Ke,markerEnd:ze,pathOptions:Ce,interactionWidth:je}),Ne&&W.createElement(W.Fragment,null,(Ne==="source"||Ne===!0)&&W.createElement(zl,{position:H,centerX:P,centerY:C,radius:Q,onMouseDown:Tt,onMouseEnter:Mt,onMouseOut:Et,type:"source"}),(Ne==="target"||Ne===!0)&&W.createElement(zl,{position:te,centerX:X,centerY:q,radius:Q,onMouseDown:pt,onMouseEnter:Mt,onMouseOut:Et,type:"target"})))};return t.displayName="EdgeWrapper",b.memo(t)};function iv(e){const t={default:jr(e.default||Ra),straight:jr(e.bezier||cc),step:jr(e.step||sc),smoothstep:jr(e.step||Za),simplebezier:jr(e.simplebezier||ic)},n={},r=Object.keys(e).filter(o=>!["default","bezier"].includes(o)).reduce((o,i)=>(o[i]=jr(e[i]||Ra),o),n);return{...t,...r}}function Yl(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,o=((n==null?void 0:n.y)||0)+t.y,i=(n==null?void 0:n.width)||t.width,s=(n==null?void 0:n.height)||t.height;switch(e){case De.Top:return{x:r+i/2,y:o};case De.Right:return{x:r+i,y:o+s/2};case De.Bottom:return{x:r+i/2,y:o+s};case De.Left:return{x:r,y:o+s/2}}}function Vl(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const sv=(e,t,n,r,o,i)=>{const s=Yl(n,e,t),l=Yl(i,r,o);return{sourceX:s.x,sourceY:s.y,targetX:l.x,targetY:l.y}};function cv({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:i,width:s,height:l,transform:u}){const d={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+i)};d.x===d.x2&&(d.x2+=1),d.y===d.y2&&(d.y2+=1);const h=To({x:(0-u[0])/u[2],y:(0-u[1])/u[2],width:s/u[2],height:l/u[2]}),p=Math.max(0,Math.min(h.x2,d.x2)-Math.max(h.x,d.x)),v=Math.max(0,Math.min(h.y2,d.y2)-Math.max(h.y,d.y));return Math.ceil(p*v)>0}function ql(e){var r,o,i,s,l;const t=((r=e==null?void 0:e[ut])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)<"u"&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.y)<"u";return[{x:((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const lv=[{level:0,isMaxLevel:!0,edges:[]}];function uv(e,t,n=!1){let r=-1;const o=e.reduce((s,l)=>{var h,p;const u=Zt(l.zIndex);let d=u?l.zIndex:0;if(n){const v=t.get(l.target),y=t.get(l.source),k=l.selected||(v==null?void 0:v.selected)||(y==null?void 0:y.selected),S=Math.max(((h=y==null?void 0:y[ut])==null?void 0:h.z)||0,((p=v==null?void 0:v[ut])==null?void 0:p.z)||0,1e3);d=(u?l.zIndex:0)+(k?S:0)}return s[d]?s[d].push(l):s[d]=[l],r=d>r?d:r,s},{}),i=Object.entries(o).map(([s,l])=>{const u=+s;return{edges:l,level:u,isMaxLevel:u===r}});return i.length===0?lv:i}function dv(e,t,n){const r=tt(b.useCallback(o=>e?o.edges.filter(i=>{const s=t.get(i.source),l=t.get(i.target);return(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&cv({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:l.width,targetHeight:l.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[e,t]));return uv(r,t,n)}const fv=({color:e="none",strokeWidth:t=1})=>W.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),hv=({color:e="none",strokeWidth:t=1})=>W.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Kl={[$a.Arrow]:fv,[$a.ArrowClosed]:hv};function mv(e){const t=yt();return b.useMemo(()=>{var o,i;return Object.prototype.hasOwnProperty.call(Kl,e)?Kl[e]:((i=(o=t.getState()).onError)==null||i.call(o,"009",Pn.error009(e)),null)},[e])}const pv=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:l="auto-start-reverse"})=>{const u=mv(t);return u?W.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:l,refX:"0",refY:"0"},W.createElement(u,{color:n,strokeWidth:s})):null},gv=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((o,i)=>([i.markerStart,i.markerEnd].forEach(s=>{if(s&&typeof s=="object"){const l=vs(s,t);r.includes(l)||(o.push({id:l,color:s.color||e,...s}),r.push(l))}}),o),[]).sort((o,i)=>o.id.localeCompare(i.id))},Zd=({defaultColor:e,rfId:t})=>{const n=tt(b.useCallback(gv({defaultColor:e,rfId:t}),[e,t]),(r,o)=>!(r.length!==o.length||r.some((i,s)=>i.id!==o[s].id)));return W.createElement("defs",null,n.map(r=>W.createElement(pv,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};Zd.displayName="MarkerDefinitions";var yv=b.memo(Zd);const vv=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Qd=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:o,noPanClassName:i,onEdgeContextMenu:s,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:d,onEdgeClick:h,onEdgeDoubleClick:p,onReconnect:v,onReconnectStart:y,onReconnectEnd:k,reconnectRadius:S,children:N,disableKeyboardA11y:T})=>{const{edgesFocusable:$,edgesUpdatable:P,elementsSelectable:C,width:X,height:q,connectionMode:H,nodeInternals:te,onError:K}=tt(vv,St),ne=dv(t,te,n);return X?W.createElement(W.Fragment,null,ne.map(({level:U,edges:ie,isMaxLevel:ue})=>W.createElement("svg",{key:U,style:{zIndex:U},width:X,height:q,className:"react-flow__edges react-flow__container"},ue&&W.createElement(yv,{defaultColor:e,rfId:r}),W.createElement("g",null,ie.map(E=>{const[z,D,Q]=ql(te.get(E.source)),[J,j,G]=ql(te.get(E.target));if(!Q||!G)return null;let se=E.type||"default";o[se]||(K==null||K("011",Pn.error011(se)),se="default");const ae=o[se]||o.default,fe=H===wr.Strict?j.target:(j.target??[]).concat(j.source??[]),we=Vl(D.source,E.sourceHandle),Se=Vl(fe,E.targetHandle),Ne=(we==null?void 0:we.position)||De.Bottom,Ce=(Se==null?void 0:Se.position)||De.Top,je=!!(E.focusable||$&&typeof E.focusable>"u"),he=E.reconnectable||E.updatable,Pe=typeof v<"u"&&(he||P&&typeof he>"u");if(!we||!Se)return K==null||K("008",Pn.error008(we,E)),null;const{sourceX:Ge,sourceY:Oe,targetX:Je,targetY:Ae}=sv(z,we,Ne,J,Se,Ce);return W.createElement(ae,{key:E.id,id:E.id,className:Nt([E.className,i]),type:se,data:E.data,selected:!!E.selected,animated:!!E.animated,hidden:!!E.hidden,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,style:E.style,source:E.source,target:E.target,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerEnd:E.markerEnd,markerStart:E.markerStart,sourceX:Ge,sourceY:Oe,targetX:Je,targetY:Ae,sourcePosition:Ne,targetPosition:Ce,elementsSelectable:C,onContextMenu:s,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,onClick:h,onEdgeDoubleClick:p,onReconnect:v,onReconnectStart:y,onReconnectEnd:k,reconnectRadius:S,rfId:r,ariaLabel:E.ariaLabel,isFocusable:je,isReconnectable:Pe,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth,disableKeyboardA11y:T})})))),N):null};Qd.displayName="EdgeRenderer";var wv=b.memo(Qd);const bv=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function xv({children:e}){const t=tt(bv);return W.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Sv(e){const t=fc(),n=b.useRef(!1);b.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const kv={[De.Left]:De.Right,[De.Right]:De.Left,[De.Top]:De.Bottom,[De.Bottom]:De.Top},Jd=({nodeId:e,handleType:t,style:n,type:r=Kn.Bezier,CustomComponent:o,connectionStatus:i})=>{var q,H,te;const{fromNode:s,handleId:l,toX:u,toY:d,connectionMode:h}=tt(b.useCallback(K=>({fromNode:K.nodeInternals.get(e),handleId:K.connectionHandleId,toX:(K.connectionPosition.x-K.transform[0])/K.transform[2],toY:(K.connectionPosition.y-K.transform[1])/K.transform[2],connectionMode:K.connectionMode}),[e]),St),p=(q=s==null?void 0:s[ut])==null?void 0:q.handleBounds;let v=p==null?void 0:p[t];if(h===wr.Loose&&(v=v||(p==null?void 0:p[t==="source"?"target":"source"])),!s||!v)return null;const y=l?v.find(K=>K.id===l):v[0],k=y?y.x+y.width/2:(s.width??0)/2,S=y?y.y+y.height/2:s.height??0,N=(((H=s.positionAbsolute)==null?void 0:H.x)??0)+k,T=(((te=s.positionAbsolute)==null?void 0:te.y)??0)+S,$=y==null?void 0:y.position,P=$?kv[$]:null;if(!$||!P)return null;if(o)return W.createElement(o,{connectionLineType:r,connectionLineStyle:n,fromNode:s,fromHandle:y,fromX:N,fromY:T,toX:u,toY:d,fromPosition:$,toPosition:P,connectionStatus:i});let C="";const X={sourceX:N,sourceY:T,sourcePosition:$,targetX:u,targetY:d,targetPosition:P};return r===Kn.Bezier?[C]=kd(X):r===Kn.Step?[C]=ys({...X,borderRadius:0}):r===Kn.SmoothStep?[C]=ys(X):r===Kn.SimpleBezier?[C]=Sd(X):C=`M${N},${T} ${u},${d}`,W.createElement("path",{d:C,fill:"none",className:"react-flow__connection-path",style:n})};Jd.displayName="ConnectionLine";const Ev=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function _v({containerStyle:e,style:t,type:n,component:r}){const{nodeId:o,handleType:i,nodesConnectable:s,width:l,height:u,connectionStatus:d}=tt(Ev,St);return!(o&&i&&l&&s)?null:W.createElement("svg",{style:e,width:l,height:u,className:"react-flow__edges react-flow__connectionline react-flow__container"},W.createElement("g",{className:Nt(["react-flow__connection",d])},W.createElement(Jd,{nodeId:o,handleType:i,style:t,type:n,CustomComponent:r,connectionStatus:d})))}function Ul(e,t){return b.useRef(null),yt(),b.useMemo(()=>t(e),[e])}const ef=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:i,onNodeClick:s,onEdgeClick:l,onNodeDoubleClick:u,onEdgeDoubleClick:d,onNodeMouseEnter:h,onNodeMouseMove:p,onNodeMouseLeave:v,onNodeContextMenu:y,onSelectionContextMenu:k,onSelectionStart:S,onSelectionEnd:N,connectionLineType:T,connectionLineStyle:$,connectionLineComponent:P,connectionLineContainerStyle:C,selectionKeyCode:X,selectionOnDrag:q,selectionMode:H,multiSelectionKeyCode:te,panActivationKeyCode:K,zoomActivationKeyCode:ne,deleteKeyCode:U,onlyRenderVisibleElements:ie,elementsSelectable:ue,selectNodesOnDrag:E,defaultViewport:z,translateExtent:D,minZoom:Q,maxZoom:J,preventScrolling:j,defaultMarkerColor:G,zoomOnScroll:se,zoomOnPinch:ae,panOnScroll:fe,panOnScrollSpeed:we,panOnScrollMode:Se,zoomOnDoubleClick:Ne,panOnDrag:Ce,onPaneClick:je,onPaneMouseEnter:he,onPaneMouseMove:Pe,onPaneMouseLeave:Ge,onPaneScroll:Oe,onPaneContextMenu:Je,onEdgeContextMenu:Ae,onEdgeMouseEnter:He,onEdgeMouseMove:Ke,onEdgeMouseLeave:ze,onReconnect:Te,onReconnectStart:st,onReconnectEnd:vt,reconnectRadius:dt,noDragClassName:Pt,noWheelClassName:kt,noPanClassName:wt,elevateEdgesOnSelect:Tt,disableKeyboardA11y:pt,nodeOrigin:Mt,nodeExtent:Et,rfId:Ct})=>{const At=Ul(e,J0),Xe=Ul(t,iv);return Sv(i),W.createElement(Z0,{onPaneClick:je,onPaneMouseEnter:he,onPaneMouseMove:Pe,onPaneMouseLeave:Ge,onPaneContextMenu:Je,onPaneScroll:Oe,deleteKeyCode:U,selectionKeyCode:X,selectionOnDrag:q,selectionMode:H,onSelectionStart:S,onSelectionEnd:N,multiSelectionKeyCode:te,panActivationKeyCode:K,zoomActivationKeyCode:ne,elementsSelectable:ue,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:se,zoomOnPinch:ae,zoomOnDoubleClick:Ne,panOnScroll:fe,panOnScrollSpeed:we,panOnScrollMode:Se,panOnDrag:Ce,defaultViewport:z,translateExtent:D,minZoom:Q,maxZoom:J,onSelectionContextMenu:k,preventScrolling:j,noDragClassName:Pt,noWheelClassName:kt,noPanClassName:wt,disableKeyboardA11y:pt},W.createElement(xv,null,W.createElement(wv,{edgeTypes:Xe,onEdgeClick:l,onEdgeDoubleClick:d,onlyRenderVisibleElements:ie,onEdgeContextMenu:Ae,onEdgeMouseEnter:He,onEdgeMouseMove:Ke,onEdgeMouseLeave:ze,onReconnect:Te,onReconnectStart:st,onReconnectEnd:vt,reconnectRadius:dt,defaultMarkerColor:G,noPanClassName:wt,elevateEdgesOnSelect:!!Tt,disableKeyboardA11y:pt,rfId:Ct},W.createElement(_v,{style:$,type:T,component:P,containerStyle:C})),W.createElement("div",{className:"react-flow__edgelabel-renderer"}),W.createElement(nv,{nodeTypes:At,onNodeClick:s,onNodeDoubleClick:u,onNodeMouseEnter:h,onNodeMouseMove:p,onNodeMouseLeave:v,onNodeContextMenu:y,selectNodesOnDrag:E,onlyRenderVisibleElements:ie,noPanClassName:wt,noDragClassName:Pt,disableKeyboardA11y:pt,nodeOrigin:Mt,nodeExtent:Et,rfId:Ct})))};ef.displayName="GraphView";var Nv=b.memo(ef);const Ss=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Hn={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Ss,nodeExtent:Ss,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:wr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:e0,isValidConnection:void 0},Tv=()=>pm((e,t)=>({...Hn,setNodes:n=>{const{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:i}=t();e({nodeInternals:Vi(n,r,o,i)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(o=>({...r,...o}))})},setDefaultNodesAndEdges:(n,r)=>{const o=typeof n<"u",i=typeof r<"u",s=o?Vi(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:s,edges:i?r:[],hasDefaultNodes:o,hasDefaultEdges:i})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:i,fitViewOnInitDone:s,fitViewOnInitOptions:l,domNode:u,nodeOrigin:d}=t(),h=u==null?void 0:u.querySelector(".react-flow__viewport");if(!h)return;const p=window.getComputedStyle(h),{m22:v}=new window.DOMMatrixReadOnly(p.transform),y=n.reduce((S,N)=>{const T=o.get(N.id);if(T!=null&&T.hidden)o.set(T.id,{...T,[ut]:{...T[ut],handleBounds:void 0}});else if(T){const $=oc(N.nodeElement);!!($.width&&$.height&&(T.width!==$.width||T.height!==$.height||N.forceUpdate))&&(o.set(T.id,{...T,[ut]:{...T[ut],handleBounds:{source:Bl(".source",N.nodeElement,v,d),target:Bl(".target",N.nodeElement,v,d)}},...$}),S.push({id:T.id,type:"dimensions",dimensions:$}))}return S},[]);Bd(o,d);const k=s||i&&!s&&Hd(t,{initial:!0,...l});e({nodeInternals:new Map(o),fitViewOnInitDone:k}),(y==null?void 0:y.length)>0&&(r==null||r(y))},updateNodePositions:(n,r=!0,o=!1)=>{const{triggerNodeChanges:i}=t(),s=n.map(l=>{const u={id:l.id,type:"position",dragging:o};return r&&(u.positionAbsolute=l.positionAbsolute,u.position=l.position),u});i(s)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:o,hasDefaultNodes:i,nodeOrigin:s,getNodes:l,elevateNodesOnSelect:u}=t();if(n!=null&&n.length){if(i){const d=zd(n,l()),h=Vi(d,o,s,u);e({nodeInternals:h})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:o,getNodes:i}=t();let s,l=null;r?s=n.map(u=>qn(u,!0)):(s=Mr(i(),n),l=Mr(o,[])),ya({changedNodes:s,changedEdges:l,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,getNodes:i}=t();let s,l=null;r?s=n.map(u=>qn(u,!0)):(s=Mr(o,n),l=Mr(i(),[])),ya({changedNodes:l,changedEdges:s,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:o,getNodes:i}=t(),s=n||i(),l=r||o,u=s.map(h=>(h.selected=!1,qn(h.id,!1))),d=l.map(h=>qn(h.id,!1));ya({changedNodes:u,changedEdges:d,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=t();r==null||r.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=t();r==null||r.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),i=r().filter(l=>l.selected).map(l=>qn(l.id,!1)),s=n.filter(l=>l.selected).map(l=>qn(l.id,!1));ya({changedNodes:i,changedEdges:s,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(o=>{o.positionAbsolute=ac(o.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:o,height:i,d3Zoom:s,d3Selection:l,translateExtent:u}=t();if(!s||!l||!n.x&&!n.y)return!1;const d=On.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),h=[[0,0],[o,i]],p=s==null?void 0:s.constrain()(d,h,u);return s.transform(l,p),r[0]!==p.x||r[1]!==p.y||r[2]!==p.k},cancelConnection:()=>e({connectionNodeId:Hn.connectionNodeId,connectionHandleId:Hn.connectionHandleId,connectionHandleType:Hn.connectionHandleType,connectionStatus:Hn.connectionStatus,connectionStartHandle:Hn.connectionStartHandle,connectionEndHandle:Hn.connectionEndHandle}),reset:()=>e({...Hn})}),Object.is),tf=({children:e})=>{const t=b.useRef(null);return t.current||(t.current=Tv()),W.createElement(Ky,{value:t.current},e)};tf.displayName="ReactFlowProvider";const nf=({children:e})=>b.useContext(Ga)?W.createElement(W.Fragment,null,e):W.createElement(tf,null,e);nf.displayName="ReactFlowWrapper";const Cv={input:Md,default:bs,output:$d,group:dc},Dv={default:Ra,straight:cc,step:sc,smoothstep:Za,simplebezier:ic},Ov=[0,0],jv=[15,15],Iv={x:0,y:0,zoom:1},Pv={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},rf=b.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:i=Cv,edgeTypes:s=Dv,onNodeClick:l,onEdgeClick:u,onInit:d,onMove:h,onMoveStart:p,onMoveEnd:v,onConnect:y,onConnectStart:k,onConnectEnd:S,onClickConnectStart:N,onClickConnectEnd:T,onNodeMouseEnter:$,onNodeMouseMove:P,onNodeMouseLeave:C,onNodeContextMenu:X,onNodeDoubleClick:q,onNodeDragStart:H,onNodeDrag:te,onNodeDragStop:K,onNodesDelete:ne,onEdgesDelete:U,onSelectionChange:ie,onSelectionDragStart:ue,onSelectionDrag:E,onSelectionDragStop:z,onSelectionContextMenu:D,onSelectionStart:Q,onSelectionEnd:J,connectionMode:j=wr.Strict,connectionLineType:G=Kn.Bezier,connectionLineStyle:se,connectionLineComponent:ae,connectionLineContainerStyle:fe,deleteKeyCode:we="Backspace",selectionKeyCode:Se="Shift",selectionOnDrag:Ne=!1,selectionMode:Ce=Co.Full,panActivationKeyCode:je="Space",multiSelectionKeyCode:he=Aa()?"Meta":"Control",zoomActivationKeyCode:Pe=Aa()?"Meta":"Control",snapToGrid:Ge=!1,snapGrid:Oe=jv,onlyRenderVisibleElements:Je=!1,selectNodesOnDrag:Ae=!0,nodesDraggable:He,nodesConnectable:Ke,nodesFocusable:ze,nodeOrigin:Te=Ov,edgesFocusable:st,edgesUpdatable:vt,elementsSelectable:dt,defaultViewport:Pt=Iv,minZoom:kt=.5,maxZoom:wt=2,translateExtent:Tt=Ss,preventScrolling:pt=!0,nodeExtent:Mt,defaultMarkerColor:Et="#b1b1b7",zoomOnScroll:Ct=!0,zoomOnPinch:At=!0,panOnScroll:Xe=!1,panOnScrollSpeed:mt=.5,panOnScrollMode:bt=dr.Free,zoomOnDoubleClick:ce=!0,panOnDrag:ee=!0,onPaneClick:pe,onPaneMouseEnter:me,onPaneMouseMove:Ee,onPaneMouseLeave:le,onPaneScroll:Le,onPaneContextMenu:Ye,children:$t,onEdgeContextMenu:Ve,onEdgeDoubleClick:ct,onEdgeMouseEnter:cn,onEdgeMouseMove:et,onEdgeMouseLeave:gt,onEdgeUpdate:ln,onEdgeUpdateStart:xn,onEdgeUpdateEnd:Sn,onReconnect:Ze,onReconnectStart:at,onReconnectEnd:$n,reconnectRadius:un=10,edgeUpdaterRadius:dn=10,onNodesChange:fn,onEdgesChange:Kr,noDragClassName:Wt="nodrag",noWheelClassName:Jt="nowheel",noPanClassName:Yt="nopan",fitView:Rn=!1,fitViewOptions:$e,connectOnClick:qe=!0,attributionPosition:nt,proOptions:ft,defaultEdgeOptions:Dt,elevateNodesOnSelect:kn=!0,elevateEdgesOnSelect:rt=!1,disableKeyboardA11y:Ut=!1,autoPanOnConnect:en=!0,autoPanOnNodeDrag:Vo=!0,connectionRadius:Ln=20,isValidConnection:kr,onError:Ur,style:Xr,id:hn,nodeDragThreshold:qo,...Er},Ko)=>{const Re=hn||"1";return W.createElement("div",{...Er,style:{...Xr,...Pv},ref:Ko,className:Nt(["react-flow",o]),"data-testid":"rf__wrapper",id:hn},W.createElement(nf,null,W.createElement(Nv,{onInit:d,onMove:h,onMoveStart:p,onMoveEnd:v,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:$,onNodeMouseMove:P,onNodeMouseLeave:C,onNodeContextMenu:X,onNodeDoubleClick:q,nodeTypes:i,edgeTypes:s,connectionLineType:G,connectionLineStyle:se,connectionLineComponent:ae,connectionLineContainerStyle:fe,selectionKeyCode:Se,selectionOnDrag:Ne,selectionMode:Ce,deleteKeyCode:we,multiSelectionKeyCode:he,panActivationKeyCode:je,zoomActivationKeyCode:Pe,onlyRenderVisibleElements:Je,selectNodesOnDrag:Ae,defaultViewport:Pt,translateExtent:Tt,minZoom:kt,maxZoom:wt,preventScrolling:pt,zoomOnScroll:Ct,zoomOnPinch:At,zoomOnDoubleClick:ce,panOnScroll:Xe,panOnScrollSpeed:mt,panOnScrollMode:bt,panOnDrag:ee,onPaneClick:pe,onPaneMouseEnter:me,onPaneMouseMove:Ee,onPaneMouseLeave:le,onPaneScroll:Le,onPaneContextMenu:Ye,onSelectionContextMenu:D,onSelectionStart:Q,onSelectionEnd:J,onEdgeContextMenu:Ve,onEdgeDoubleClick:ct,onEdgeMouseEnter:cn,onEdgeMouseMove:et,onEdgeMouseLeave:gt,onReconnect:Ze??ln,onReconnectStart:at??xn,onReconnectEnd:$n??Sn,reconnectRadius:un??dn,defaultMarkerColor:Et,noDragClassName:Wt,noWheelClassName:Jt,noPanClassName:Yt,elevateEdgesOnSelect:rt,rfId:Re,disableKeyboardA11y:Ut,nodeOrigin:Te,nodeExtent:Mt}),W.createElement(k0,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:y,onConnectStart:k,onConnectEnd:S,onClickConnectStart:N,onClickConnectEnd:T,nodesDraggable:He,nodesConnectable:Ke,nodesFocusable:ze,edgesFocusable:st,edgesUpdatable:vt,elementsSelectable:dt,elevateNodesOnSelect:kn,minZoom:kt,maxZoom:wt,nodeExtent:Mt,onNodesChange:fn,onEdgesChange:Kr,snapToGrid:Ge,snapGrid:Oe,connectionMode:j,translateExtent:Tt,connectOnClick:qe,defaultEdgeOptions:Dt,fitView:Rn,fitViewOptions:$e,onNodesDelete:ne,onEdgesDelete:U,onNodeDragStart:H,onNodeDrag:te,onNodeDragStop:K,onSelectionDrag:E,onSelectionDragStart:ue,onSelectionDragStop:z,noPanClassName:Yt,nodeOrigin:Te,rfId:Re,autoPanOnConnect:en,autoPanOnNodeDrag:Vo,onError:Ur,connectionRadius:Ln,isValidConnection:kr,nodeDragThreshold:qo}),W.createElement(x0,{onSelectionChange:ie}),$t,W.createElement(Xy,{proOptions:ft,position:nt}),W.createElement(C0,{rfId:Re,disableKeyboardA11y:Ut})))});rf.displayName="ReactFlow";const of=({id:e,x:t,y:n,width:r,height:o,style:i,color:s,strokeColor:l,strokeWidth:u,className:d,borderRadius:h,shapeRendering:p,onClick:v,selected:y})=>{const{background:k,backgroundColor:S}=i||{},N=s||k||S;return W.createElement("rect",{className:Nt(["react-flow__minimap-node",{selected:y},d]),x:t,y:n,rx:h,ry:h,width:r,height:o,fill:N,stroke:l,strokeWidth:u,shapeRendering:p,onClick:v?T=>v(T,e):void 0})};of.displayName="MiniMapNode";var Mv=b.memo(of);const Av=e=>e.nodeOrigin,$v=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),Xi=e=>e instanceof Function?e:()=>e;function Rv({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o=2,nodeComponent:i=Mv,onClick:s}){const l=tt($v,St),u=tt(Av),d=Xi(t),h=Xi(e),p=Xi(n),v=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return W.createElement(W.Fragment,null,l.map(y=>{const{x:k,y:S}=mr(y,u).positionAbsolute;return W.createElement(i,{key:y.id,x:k,y:S,width:y.width,height:y.height,style:y.style,selected:y.selected,className:p(y),color:d(y),borderRadius:r,strokeColor:h(y),strokeWidth:o,shapeRendering:v,onClick:s,id:y.id})}))}var Lv=b.memo(Rv);const Fv=200,Wv=150,Bv=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?Qy(Qa(t,e.nodeOrigin),n):n,rfId:e.rfId}},Hv="react-flow__minimap-desc";function af({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:s=2,nodeComponent:l,maskColor:u="rgb(240, 240, 240, 0.6)",maskStrokeColor:d="none",maskStrokeWidth:h=1,position:p="bottom-right",onClick:v,onNodeClick:y,pannable:k=!1,zoomable:S=!1,ariaLabel:N="React Flow mini map",inversePan:T=!1,zoomStep:$=10,offsetScale:P=5}){const C=yt(),X=b.useRef(null),{boundingRect:q,viewBB:H,rfId:te}=tt(Bv,St),K=(e==null?void 0:e.width)??Fv,ne=(e==null?void 0:e.height)??Wv,U=q.width/K,ie=q.height/ne,ue=Math.max(U,ie),E=ue*K,z=ue*ne,D=P*ue,Q=q.x-(E-q.width)/2-D,J=q.y-(z-q.height)/2-D,j=E+D*2,G=z+D*2,se=`${Hv}-${te}`,ae=b.useRef(0);ae.current=ue,b.useEffect(()=>{if(X.current){const Se=Gt(X.current),Ne=he=>{const{transform:Pe,d3Selection:Ge,d3Zoom:Oe}=C.getState();if(he.sourceEvent.type!=="wheel"||!Ge||!Oe)return;const Je=-he.sourceEvent.deltaY*(he.sourceEvent.deltaMode===1?.05:he.sourceEvent.deltaMode?1:.002)*$,Ae=Pe[2]*Math.pow(2,Je);Oe.scaleTo(Ge,Ae)},Ce=he=>{const{transform:Pe,d3Selection:Ge,d3Zoom:Oe,translateExtent:Je,width:Ae,height:He}=C.getState();if(he.sourceEvent.type!=="mousemove"||!Ge||!Oe)return;const Ke=ae.current*Math.max(1,Pe[2])*(T?-1:1),ze={x:Pe[0]-he.sourceEvent.movementX*Ke,y:Pe[1]-he.sourceEvent.movementY*Ke},Te=[[0,0],[Ae,He]],st=On.translate(ze.x,ze.y).scale(Pe[2]),vt=Oe.constrain()(st,Te,Je);Oe.transform(Ge,vt)},je=fd().on("zoom",k?Ce:null).on("zoom.wheel",S?Ne:null);return Se.call(je),()=>{Se.on("zoom",null)}}},[k,S,T,$]);const fe=v?Se=>{const Ne=tn(Se);v(Se,{x:Ne[0],y:Ne[1]})}:void 0,we=y?(Se,Ne)=>{const Ce=C.getState().nodeInternals.get(Ne);y(Se,Ce)}:void 0;return W.createElement(No,{position:p,style:e,className:Nt(["react-flow__minimap",t]),"data-testid":"rf__minimap"},W.createElement("svg",{width:K,height:ne,viewBox:`${Q} ${J} ${j} ${G}`,role:"img","aria-labelledby":se,ref:X,onClick:fe},N&&W.createElement("title",{id:se},N),W.createElement(Lv,{onClick:we,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:o,nodeStrokeWidth:s,nodeComponent:l}),W.createElement("path",{className:"react-flow__minimap-mask",d:`M${Q-D},${J-D}h${j+D*2}v${G+D*2}h${-j-D*2}z
        M${H.x},${H.y}h${H.width}v${H.height}h${-H.width}z`,fill:u,fillRule:"evenodd",stroke:d,strokeWidth:h,pointerEvents:"none"})))}af.displayName="MiniMap";var zv=b.memo(af);function Yv(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},W.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Vv(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},W.createElement("path",{d:"M0 0h32v4.2H0z"}))}function qv(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},W.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Kv(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},W.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Uv(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},W.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const go=({children:e,className:t,...n})=>W.createElement("button",{type:"button",className:Nt(["react-flow__controls-button",t]),...n},e);go.displayName="ControlButton";const Xv=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),sf=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:i,onZoomOut:s,onFitView:l,onInteractiveChange:u,className:d,children:h,position:p="bottom-left"})=>{const v=yt(),[y,k]=b.useState(!1),{isInteractive:S,minZoomReached:N,maxZoomReached:T}=tt(Xv,St),{zoomIn:$,zoomOut:P,fitView:C}=fc();if(b.useEffect(()=>{k(!0)},[]),!y)return null;const X=()=>{$(),i==null||i()},q=()=>{P(),s==null||s()},H=()=>{C(o),l==null||l()},te=()=>{v.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),u==null||u(!S)};return W.createElement(No,{className:Nt(["react-flow__controls",d]),position:p,style:e,"data-testid":"rf__controls"},t&&W.createElement(W.Fragment,null,W.createElement(go,{onClick:X,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:T},W.createElement(Yv,null)),W.createElement(go,{onClick:q,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:N},W.createElement(Vv,null))),n&&W.createElement(go,{className:"react-flow__controls-fitview",onClick:H,title:"fit view","aria-label":"fit view"},W.createElement(qv,null)),r&&W.createElement(go,{className:"react-flow__controls-interactive",onClick:te,title:"toggle interactivity","aria-label":"toggle interactivity"},S?W.createElement(Uv,null):W.createElement(Kv,null)),h)};sf.displayName="Controls";var Gv=b.memo(sf),on;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(on||(on={}));function Zv({color:e,dimensions:t,lineWidth:n}){return W.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Qv({color:e,radius:t}){return W.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const Jv={[on.Dots]:"#91919a",[on.Lines]:"#eee",[on.Cross]:"#e2e2e2"},ew={[on.Dots]:1,[on.Lines]:1,[on.Cross]:6},tw=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function cf({id:e,variant:t=on.Dots,gap:n=20,size:r,lineWidth:o=1,offset:i=2,color:s,style:l,className:u}){const d=b.useRef(null),{transform:h,patternId:p}=tt(tw,St),v=s||Jv[t],y=r||ew[t],k=t===on.Dots,S=t===on.Cross,N=Array.isArray(n)?n:[n,n],T=[N[0]*h[2]||1,N[1]*h[2]||1],$=y*h[2],P=S?[$,$]:T,C=k?[$/i,$/i]:[P[0]/i,P[1]/i];return W.createElement("svg",{className:Nt(["react-flow__background",u]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:d,"data-testid":"rf__background"},W.createElement("pattern",{id:p+e,x:h[0]%T[0],y:h[1]%T[1],width:T[0],height:T[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${C[0]},-${C[1]})`},k?W.createElement(Qv,{color:v,radius:$/i}):W.createElement(Zv,{dimensions:P,color:v,lineWidth:o})),W.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${p+e})`}))}cf.displayName="Background";var nw=b.memo(cf);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Mn=(e,t)=>{const n=b.forwardRef(({color:r="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:l="",children:u,...d},h)=>b.createElement("svg",{ref:h,...rw,width:o,height:o,stroke:r,strokeWidth:s?Number(i)*24/Number(o):i,className:["lucide",`lucide-${ow(e)}`,l].join(" "),...d},[...t.map(([p,v])=>b.createElement(p,v)),...Array.isArray(u)?u:[u]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=Mn("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=Mn("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=Mn("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=Mn("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=Mn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=Mn("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=Mn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=Mn("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=Mn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function uf(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=uf(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Bt(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=uf(e))&&(r&&(r+=" "),r+=t);return r}const mc=(e,t)=>{if(!e||!t)return null;const n=new Date(e),o=new Date(t).getTime()-n.getTime(),i=Math.floor(o/1e3),s=Math.floor(i/60),l=Math.floor(s/60),u=[];return l>0&&u.push(`${l}h`),s%60>0&&u.push(`${s%60}m`),i%60>0&&u.push(`${i%60}s`),o%1e3>0&&u.push(`${o%1e3}ms`),u.join(" ")},Gi=e=>{var t;switch((t=e.status)==null?void 0:t.toLowerCase()){case"completed":return"border-green-500";case"running":return"border-blue-500";case"retrying":return"border-orange-600";case"pending":return"border-purple-600";case"terminated":return"border-yellow-500";case"failed":return"border-red-600";default:return"border-gray-500"}},dw=(e,t=50)=>e?e.length<=t?e:e.slice(0,t)+"...":"",fw=e=>{switch(e==null?void 0:e.toLowerCase()){case"completed":return"text-green-600 bg-green-50";case"retrying":return"text-orange-700 bg-orange-100";case"running":return"text-blue-600 bg-blue-50";case"pending":return"text-purple-700 bg-purple-100";case"terminated":return"text-yellow-600 bg-yellow-50";case"failed":return"text-red-700 bg-red-100";default:return"text-gray-600 bg-gray-50"}};function hw({id:e,data:t,expandChildWorkflowNode:n,collapseChildWorkflowNode:r,onShowNodeData:o,onSpreadBatchNodes:i}){var h;const s=t.type==="workflow"||t.type==="childWorkflow",l=t.count&&t.count>1,u=`${e}-${t.type}-${t.workflowId||""}-${t.runId||""}`,d=async()=>{t.count===1&&s&&!t.isLoading&&(t.isExpanded?await r(e,t.runId):await n(e,t.runId))};return g.jsxs("div",{className:"relative min-w-[450px]",children:[g.jsx(Xn,{type:"source",position:De.Right,id:`${e}-right`,style:{top:"50%",transform:"translateY(-50%)"}}),g.jsx(Xn,{type:"target",position:De.Left,id:`${e}-left`,style:{top:"50%",transform:"translateY(-50%)"}}),g.jsx(Xn,{type:"source",position:De.Bottom,id:`${e}-bottom`,style:{left:"25px"}}),g.jsx(Xn,{type:"target",position:De.Top,id:`${e}-top`,style:{left:"25px"}}),g.jsxs("div",{className:"relative",children:[l&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:Bt("absolute rounded-xl shadow-lg border-2 transition-all duration-300",Gi(t),"opacity-40"),style:{top:"-8px",left:"-8px",width:"100%",height:"100%",pointerEvents:"none"},children:g.jsx("div",{className:"p-4 bg-white rounded-xl"})}),g.jsx("div",{className:Bt("absolute rounded-xl shadow-lg border-2 transition-all duration-300",Gi(t),"opacity-70"),style:{top:"-4px",left:"-4px",width:"100%",height:"100%",pointerEvents:"none"},children:g.jsx("div",{className:"p-4 bg-white rounded-xl"})})]}),g.jsx("div",{className:Bt("rounded-xl shadow-lg border-2 transition-all duration-300 relative",Gi(t),t.isLoading&&"opacity-75"),children:g.jsxs("div",{className:Bt("p-4 relative bg-white rounded-xl",s&&!t.isLoading&&!l&&"cursor-pointer",t.isLoading&&"pointer-events-none"),onClick:d,children:[g.jsxs("div",{className:"absolute -top-2.5 -right-2.5 flex gap-1",children:[l&&g.jsx("div",{onClick:p=>{p.stopPropagation(),r(e,t.runId),i==null||i(e)},className:"w-6 h-6 flex items-center justify-center bg-blue-500 hover:bg-blue-600 rounded-full text-white shadow-lg z-10 cursor-pointer",children:g.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4.5a6.5 6.5 0 1 0 4.135 11.286l3.572 3.572a1 1 0 0 0 1.414-1.414l-3.572-3.572A6.5 6.5 0 0 0 11 4.5z"})})}),!l&&g.jsx("div",{onClick:p=>{p.stopPropagation();const v=p.currentTarget.closest(".relative");if(v){const y=v.getBoundingClientRect();o(t,{x:y.left+y.width/2,y:y.top})}},className:"w-6 h-6 flex items-center justify-center bg-gray-500 hover:bg-gray-600 rounded-full text-white shadow-lg z-10 cursor-pointer",children:g.jsx(cw,{className:"w-3 h-3"})})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:Bt("w-8 h-8 rounded flex items-center justify-center flex-shrink-0",s?"bg-amber-50":"bg-fuchsia-50"),children:s?g.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("rect",{x:"9",y:"3",width:"6",height:"6",rx:"1"}),g.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),g.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3M6 15v-3h12v3"})]}):g.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:g.jsx("path",{d:"M5 12L12 5L19 12L12 19L5 12Z"})})}),g.jsxs("div",{className:Bt("min-w-0",s?"":"flex items-center h-[2.5rem]"),children:[g.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:t.title}),s&&g.jsx("p",{className:"text-xs text-gray-500 overflow-hidden text-ellipsis",children:dw(e)})]})]}),g.jsxs("div",{className:"absolute -top-3 left-3 flex gap-2",children:[g.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:s?"rgb(254 243 199)":"rgb(253 244 255)",color:s?"rgb(217 119 6)":"rgb(192 38 211)"},children:s?"workflow":"activity"}),g.jsx("div",{className:Bt("px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",fw(t.status)),children:((h=t.status)==null?void 0:h.toLowerCase())||"unknown"}),l&&g.jsxs("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgba(224, 242, 254, 0.9)",color:"#0369a1"},children:["batch: ",t.count]}),t.startTime&&t.endTime&&g.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgba(236, 254, 255, 0.9)",color:"#0891b2"},children:mc(t.startTime,t.endTime)})]}),t.taskQueue&&g.jsx("div",{className:"absolute -bottom-2.5 right-2",children:g.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm",style:{backgroundColor:"rgba(240, 253, 244, 0.9)",color:"#166534",fontSize:"0.7rem"},children:t.taskQueue?t.taskQueue.name:""})}),t.isLoading&&g.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-50 flex items-center justify-center z-20",children:g.jsx("div",{className:"bg-white p-2 rounded-full shadow-lg",children:g.jsx(sw,{className:"w-5 h-5 text-blue-500 animate-spin"})})})]})})]})]},u)}function mw({nodes:e,onFocusChange:t,selectedWorkflow:n,onReset:r,onClose:o}){const[i,s]=b.useState(288),l=b.useRef(null),u=b.useRef(null),d=b.useRef(!1),h=e.filter(y=>y.data.type==="workflow"||y.data.type==="childWorkflow"),p=y=>{t(n===y?null:y)};b.useEffect(()=>{const y=S=>{if(!d.current||!u.current)return;const N=S.clientX-u.current.getBoundingClientRect().left;N>200&&N<600&&s(N)},k=()=>{d.current&&(d.current=!1,document.body.style.cursor="default")};return window.addEventListener("mousemove",y),window.addEventListener("mouseup",k),()=>{window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",k)}},[]);const v=y=>{y.preventDefault(),d.current=!0,document.body.style.cursor="col-resize"};return g.jsxs("div",{ref:u,className:"absolute left-0 top-0 bottom-0 bg-white shadow-lg border-r z-10",style:{width:`${i}px`},children:[g.jsxs("div",{className:"p-4 border-b flex items-center justify-between bg-gray-50",children:[g.jsx("h3",{className:"font-semibold text-gray-800",children:"Focus Workflow"}),g.jsx("button",{onClick:o,className:"p-1 hover:bg-gray-200 rounded-full transition-colors",children:g.jsx(pr,{className:"w-5 h-5 text-gray-600"})})]}),g.jsxs("div",{className:"p-4 overflow-y-auto",children:[g.jsx("button",{onClick:r,className:"w-full mb-4 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md transition-colors",children:"Reset View"}),g.jsx("div",{className:"space-y-2",children:h.map(y=>g.jsx("button",{onClick:()=>p(y.id),className:Bt("w-full px-3 py-2 text-left rounded-md transition-colors","text-sm",n===y.id?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-50"),children:y.data.title},y.id))})]}),g.jsx("div",{ref:l,onMouseDown:v,className:"w-1 cursor-col-resize hover:bg-gray-300 absolute top-0 right-0 bottom-0"})]})}const pw={NORMAL:"TASK_QUEUE_KIND_NORMAL",STICKY:"TASK_QUEUE_KIND_STICKY"};var df={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Pr,function(){var n=function(a,c){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,m){f.__proto__=m}||function(f,m){for(var w in m)Object.prototype.hasOwnProperty.call(m,w)&&(f[w]=m[w])})(a,c)},r=function(){return(r=Object.assign||function(a){for(var c,f=1,m=arguments.length;f<m;f++)for(var w in c=arguments[f])Object.prototype.hasOwnProperty.call(c,w)&&(a[w]=c[w]);return a}).apply(this,arguments)};function o(a,c,f){for(var m,w=0,x=c.length;w<x;w++)!m&&w in c||((m=m||Array.prototype.slice.call(c,0,w))[w]=c[w]);return a.concat(m||Array.prototype.slice.call(c))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Pr,s=Object.keys,l=Array.isArray;function u(a,c){return typeof c!="object"||s(c).forEach(function(f){a[f]=c[f]}),a}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var d=Object.getPrototypeOf,h={}.hasOwnProperty;function p(a,c){return h.call(a,c)}function v(a,c){typeof c=="function"&&(c=c(d(a))),(typeof Reflect>"u"?s:Reflect.ownKeys)(c).forEach(function(f){k(a,f,c[f])})}var y=Object.defineProperty;function k(a,c,f,m){y(a,c,u(f&&p(f,"get")&&typeof f.get=="function"?{get:f.get,set:f.set,configurable:!0}:{value:f,configurable:!0,writable:!0},m))}function S(a){return{from:function(c){return a.prototype=Object.create(c.prototype),k(a.prototype,"constructor",a),{extend:v.bind(null,a.prototype)}}}}var N=Object.getOwnPropertyDescriptor,T=[].slice;function $(a,c,f){return T.call(a,c,f)}function P(a,c){return c(a)}function C(a){if(!a)throw new Error("Assertion Failed")}function X(a){i.setImmediate?setImmediate(a):setTimeout(a,0)}function q(a,c){if(typeof c=="string"&&p(a,c))return a[c];if(!c)return a;if(typeof c!="string"){for(var f=[],m=0,w=c.length;m<w;++m){var x=q(a,c[m]);f.push(x)}return f}var _=c.indexOf(".");if(_!==-1){var O=a[c.substr(0,_)];return O==null?void 0:q(O,c.substr(_+1))}}function H(a,c,f){if(a&&c!==void 0&&!("isFrozen"in Object&&Object.isFrozen(a)))if(typeof c!="string"&&"length"in c){C(typeof f!="string"&&"length"in f);for(var m=0,w=c.length;m<w;++m)H(a,c[m],f[m])}else{var x,_,O=c.indexOf(".");O!==-1?(x=c.substr(0,O),(_=c.substr(O+1))===""?f===void 0?l(a)&&!isNaN(parseInt(x))?a.splice(x,1):delete a[x]:a[x]=f:H(O=!(O=a[x])||!p(a,x)?a[x]={}:O,_,f)):f===void 0?l(a)&&!isNaN(parseInt(c))?a.splice(c,1):delete a[c]:a[c]=f}}function te(a){var c,f={};for(c in a)p(a,c)&&(f[c]=a[c]);return f}var K=[].concat;function ne(a){return K.apply([],a)}var En="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ne([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(c){return c+a+"Array"})}))).filter(function(a){return i[a]}),U=new Set(En.map(function(a){return i[a]})),ie=null;function ue(a){return ie=new WeakMap,a=function c(f){if(!f||typeof f!="object")return f;var m=ie.get(f);if(m)return m;if(l(f)){m=[],ie.set(f,m);for(var w=0,x=f.length;w<x;++w)m.push(c(f[w]))}else if(U.has(f.constructor))m=f;else{var _,O=d(f);for(_ in m=O===Object.prototype?{}:Object.create(O),ie.set(f,m),f)p(f,_)&&(m[_]=c(f[_]))}return m}(a),ie=null,a}var E={}.toString;function z(a){return E.call(a).slice(8,-1)}var D=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Q=typeof D=="symbol"?function(a){var c;return a!=null&&(c=a[D])&&c.apply(a)}:function(){return null};function J(a,c){return c=a.indexOf(c),0<=c&&a.splice(c,1),0<=c}var j={};function G(a){var c,f,m,w;if(arguments.length===1){if(l(a))return a.slice();if(this===j&&typeof a=="string")return[a];if(w=Q(a)){for(f=[];!(m=w.next()).done;)f.push(m.value);return f}if(a==null)return[a];if(typeof(c=a.length)!="number")return[a];for(f=new Array(c);c--;)f[c]=a[c];return f}for(c=arguments.length,f=new Array(c);c--;)f[c]=arguments[c];return f}var se=typeof Symbol<"u"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Tt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Xt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Tt),ae={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function fe(a,c){this.name=a,this.message=c}function we(a,c){return a+". Errors: "+Object.keys(c).map(function(f){return c[f].toString()}).filter(function(f,m,w){return w.indexOf(f)===m}).join(`
`)}function Se(a,c,f,m){this.failures=c,this.failedKeys=m,this.successCount=f,this.message=we(a,c)}function Ne(a,c){this.name="BulkError",this.failures=Object.keys(c).map(function(f){return c[f]}),this.failuresByPos=c,this.message=we(a,this.failures)}S(fe).from(Error).extend({toString:function(){return this.name+": "+this.message}}),S(Se).from(fe),S(Ne).from(fe);var Ce=Xt.reduce(function(a,c){return a[c]=c+"Error",a},{}),je=fe,he=Xt.reduce(function(a,c){var f=c+"Error";function m(w,x){this.name=f,w?typeof w=="string"?(this.message="".concat(w).concat(x?`
 `+x:""),this.inner=x||null):typeof w=="object"&&(this.message="".concat(w.name," ").concat(w.message),this.inner=w):(this.message=ae[c]||f,this.inner=null)}return S(m).from(je),a[c]=m,a},{});he.Syntax=SyntaxError,he.Type=TypeError,he.Range=RangeError;var Pe=Tt.reduce(function(a,c){return a[c+"Error"]=he[c],a},{}),Ge=Xt.reduce(function(a,c){return["Syntax","Type","Range"].indexOf(c)===-1&&(a[c+"Error"]=he[c]),a},{});function Oe(){}function Je(a){return a}function Ae(a,c){return a==null||a===Je?c:function(f){return c(a(f))}}function He(a,c){return function(){a.apply(this,arguments),c.apply(this,arguments)}}function Ke(a,c){return a===Oe?c:function(){var f=a.apply(this,arguments);f!==void 0&&(arguments[0]=f);var m=this.onsuccess,w=this.onerror;this.onsuccess=null,this.onerror=null;var x=c.apply(this,arguments);return m&&(this.onsuccess=this.onsuccess?He(m,this.onsuccess):m),w&&(this.onerror=this.onerror?He(w,this.onerror):w),x!==void 0?x:f}}function ze(a,c){return a===Oe?c:function(){a.apply(this,arguments);var f=this.onsuccess,m=this.onerror;this.onsuccess=this.onerror=null,c.apply(this,arguments),f&&(this.onsuccess=this.onsuccess?He(f,this.onsuccess):f),m&&(this.onerror=this.onerror?He(m,this.onerror):m)}}function Te(a,c){return a===Oe?c:function(f){var m=a.apply(this,arguments);u(f,m);var w=this.onsuccess,x=this.onerror;return this.onsuccess=null,this.onerror=null,f=c.apply(this,arguments),w&&(this.onsuccess=this.onsuccess?He(w,this.onsuccess):w),x&&(this.onerror=this.onerror?He(x,this.onerror):x),m===void 0?f===void 0?void 0:f:u(m,f)}}function st(a,c){return a===Oe?c:function(){return c.apply(this,arguments)!==!1&&a.apply(this,arguments)}}function vt(a,c){return a===Oe?c:function(){var f=a.apply(this,arguments);if(f&&typeof f.then=="function"){for(var m=this,w=arguments.length,x=new Array(w);w--;)x[w]=arguments[w];return f.then(function(){return c.apply(m,x)})}return c.apply(this,arguments)}}Ge.ModifyError=Se,Ge.DexieError=fe,Ge.BulkError=Ne;var dt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Pt(a){dt=a}var kt={},wt=100,En=typeof Promise>"u"?[]:function(){var a=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[a,d(a),a];var c=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[c,d(c),a]}(),Tt=En[0],Xt=En[1],En=En[2],Xt=Xt&&Xt.then,pt=Tt&&Tt.constructor,Mt=!!En,Et=function(a,c){pe.push([a,c]),At&&(queueMicrotask(et),At=!1)},Ct=!0,At=!0,Xe=[],mt=[],bt=Je,ce={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Oe,pgp:!1,env:{},finalize:Oe},ee=ce,pe=[],me=0,Ee=[];function le(a){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var c=this._PSD=ee;if(typeof a!="function"){if(a!==kt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&$t(this,this._value))}this._state=null,this._value=null,++c.ref,function f(m,w){try{w(function(x){if(m._state===null){if(x===m)throw new TypeError("A promise cannot be resolved with itself.");var _=m._lib&&gt();x&&typeof x.then=="function"?f(m,function(O,M){x instanceof le?x._then(O,M):x.then(O,M)}):(m._state=!0,m._value=x,Ve(m)),_&&ln()}},$t.bind(null,m))}catch(x){$t(m,x)}}(this,a)}var Le={get:function(){var a=ee,c=fn;function f(m,w){var x=this,_=!a.global&&(a!==ee||c!==fn),O=_&&!Yt(),M=new le(function(R,B){ct(x,new Ye(Dt(m,a,_,O),Dt(w,a,_,O),R,B,a))});return this._consoleTask&&(M._consoleTask=this._consoleTask),M}return f.prototype=kt,f},set:function(a){k(this,"then",a&&a.prototype===kt?Le:{get:function(){return a},set:Le.set})}};function Ye(a,c,f,m,w){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof c=="function"?c:null,this.resolve=f,this.reject=m,this.psd=w}function $t(a,c){var f,m;mt.push(c),a._state===null&&(f=a._lib&&gt(),c=bt(c),a._state=!1,a._value=c,m=a,Xe.some(function(w){return w._value===m._value})||Xe.push(m),Ve(a),f&&ln())}function Ve(a){var c=a._listeners;a._listeners=[];for(var f=0,m=c.length;f<m;++f)ct(a,c[f]);var w=a._PSD;--w.ref||w.finalize(),me===0&&(++me,Et(function(){--me==0&&xn()},[]))}function ct(a,c){if(a._state!==null){var f=a._state?c.onFulfilled:c.onRejected;if(f===null)return(a._state?c.resolve:c.reject)(a._value);++c.psd.ref,++me,Et(cn,[f,a,c])}else a._listeners.push(c)}function cn(a,c,f){try{var m,w=c._value;!c._state&&mt.length&&(mt=[]),m=dt&&c._consoleTask?c._consoleTask.run(function(){return a(w)}):a(w),c._state||mt.indexOf(w)!==-1||function(x){for(var _=Xe.length;_;)if(Xe[--_]._value===x._value)return Xe.splice(_,1)}(c),f.resolve(m)}catch(x){f.reject(x)}finally{--me==0&&xn(),--f.psd.ref||f.psd.finalize()}}function et(){ft(ce,function(){gt()&&ln()})}function gt(){var a=Ct;return At=Ct=!1,a}function ln(){var a,c,f;do for(;0<pe.length;)for(a=pe,pe=[],f=a.length,c=0;c<f;++c){var m=a[c];m[0].apply(null,m[1])}while(0<pe.length);At=Ct=!0}function xn(){var a=Xe;Xe=[],a.forEach(function(m){m._PSD.onunhandled.call(null,m._value,m)});for(var c=Ee.slice(0),f=c.length;f;)c[--f]()}function Sn(a){return new le(kt,!1,a)}function Ze(a,c){var f=ee;return function(){var m=gt(),w=ee;try{return qe(f,!0),a.apply(this,arguments)}catch(x){c&&c(x)}finally{qe(w,!1),m&&ln()}}}v(le.prototype,{then:Le,_then:function(a,c){ct(this,new Ye(null,null,a,c,ee))},catch:function(a){if(arguments.length===1)return this.then(null,a);var c=a,f=arguments[1];return typeof c=="function"?this.then(null,function(m){return(m instanceof c?f:Sn)(m)}):this.then(null,function(m){return(m&&m.name===c?f:Sn)(m)})},finally:function(a){return this.then(function(c){return le.resolve(a()).then(function(){return c})},function(c){return le.resolve(a()).then(function(){return Sn(c)})})},timeout:function(a,c){var f=this;return a<1/0?new le(function(m,w){var x=setTimeout(function(){return w(new he.Timeout(c))},a);f.then(m,w).finally(clearTimeout.bind(null,x))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&k(le.prototype,Symbol.toStringTag,"Dexie.Promise"),ce.env=nt(),v(le,{all:function(){var a=G.apply(null,arguments).map(Rn);return new le(function(c,f){a.length===0&&c([]);var m=a.length;a.forEach(function(w,x){return le.resolve(w).then(function(_){a[x]=_,--m||c(a)},f)})})},resolve:function(a){return a instanceof le?a:a&&typeof a.then=="function"?new le(function(c,f){a.then(c,f)}):new le(kt,!0,a)},reject:Sn,race:function(){var a=G.apply(null,arguments).map(Rn);return new le(function(c,f){a.map(function(m){return le.resolve(m).then(c,f)})})},PSD:{get:function(){return ee},set:function(a){return ee=a}},totalEchoes:{get:function(){return fn}},newPSD:Wt,usePSD:ft,scheduler:{get:function(){return Et},set:function(a){Et=a}},rejectionMapper:{get:function(){return bt},set:function(a){bt=a}},follow:function(a,c){return new le(function(f,m){return Wt(function(w,x){var _=ee;_.unhandleds=[],_.onunhandled=x,_.finalize=He(function(){var O,M=this;O=function(){M.unhandleds.length===0?w():x(M.unhandleds[0])},Ee.push(function R(){O(),Ee.splice(Ee.indexOf(R),1)}),++me,Et(function(){--me==0&&xn()},[])},_.finalize),a()},c,f,m)})}}),pt&&(pt.allSettled&&k(le,"allSettled",function(){var a=G.apply(null,arguments).map(Rn);return new le(function(c){a.length===0&&c([]);var f=a.length,m=new Array(f);a.forEach(function(w,x){return le.resolve(w).then(function(_){return m[x]={status:"fulfilled",value:_}},function(_){return m[x]={status:"rejected",reason:_}}).then(function(){return--f||c(m)})})})}),pt.any&&typeof AggregateError<"u"&&k(le,"any",function(){var a=G.apply(null,arguments).map(Rn);return new le(function(c,f){a.length===0&&f(new AggregateError([]));var m=a.length,w=new Array(m);a.forEach(function(x,_){return le.resolve(x).then(function(O){return c(O)},function(O){w[_]=O,--m||f(new AggregateError(w))})})})}),pt.withResolvers&&(le.withResolvers=pt.withResolvers));var at={awaits:0,echoes:0,id:0},$n=0,un=[],dn=0,fn=0,Kr=0;function Wt(a,c,f,m){var w=ee,x=Object.create(w);return x.parent=w,x.ref=0,x.global=!1,x.id=++Kr,ce.env,x.env=Mt?{Promise:le,PromiseProp:{value:le,configurable:!0,writable:!0},all:le.all,race:le.race,allSettled:le.allSettled,any:le.any,resolve:le.resolve,reject:le.reject}:{},c&&u(x,c),++w.ref,x.finalize=function(){--this.parent.ref||this.parent.finalize()},m=ft(x,a,f,m),x.ref===0&&x.finalize(),m}function Jt(){return at.id||(at.id=++$n),++at.awaits,at.echoes+=wt,at.id}function Yt(){return!!at.awaits&&(--at.awaits==0&&(at.id=0),at.echoes=at.awaits*wt,!0)}function Rn(a){return at.echoes&&a&&a.constructor===pt?(Jt(),a.then(function(c){return Yt(),c},function(c){return Yt(),rt(c)})):a}function $e(){var a=un[un.length-1];un.pop(),qe(a,!1)}function qe(a,c){var f,m=ee;(c?!at.echoes||dn++&&a===ee:!dn||--dn&&a===ee)||queueMicrotask(c?(function(w){++fn,at.echoes&&--at.echoes!=0||(at.echoes=at.awaits=at.id=0),un.push(ee),qe(w,!0)}).bind(null,a):$e),a!==ee&&(ee=a,m===ce&&(ce.env=nt()),Mt&&(f=ce.env.Promise,c=a.env,(m.global||a.global)&&(Object.defineProperty(i,"Promise",c.PromiseProp),f.all=c.all,f.race=c.race,f.resolve=c.resolve,f.reject=c.reject,c.allSettled&&(f.allSettled=c.allSettled),c.any&&(f.any=c.any))))}function nt(){var a=i.Promise;return Mt?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject}:{}}function ft(a,c,f,m,w){var x=ee;try{return qe(a,!0),c(f,m,w)}finally{qe(x,!1)}}function Dt(a,c,f,m){return typeof a!="function"?a:function(){var w=ee;f&&Jt(),qe(c,!0);try{return a.apply(this,arguments)}finally{qe(w,!1),m&&queueMicrotask(Yt)}}}function kn(a){Promise===pt&&at.echoes===0?dn===0?a():enqueueNativeMicroTask(a):setTimeout(a,0)}(""+Xt).indexOf("[native code]")===-1&&(Jt=Yt=Oe);var rt=le.reject,Ut="￿",en="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Vo="String expected.",Ln=[],kr="__dbnames",Ur="readonly",Xr="readwrite";function hn(a,c){return a?c?function(){return a.apply(this,arguments)&&c.apply(this,arguments)}:a:c}var qo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Er(a){return typeof a!="string"||/\./.test(a)?function(c){return c}:function(c){return c[a]===void 0&&a in c&&delete(c=ue(c))[a],c}}function Ko(){throw he.Type()}function Re(a,c){try{var f=Mc(a),m=Mc(c);if(f!==m)return f==="Array"?1:m==="Array"?-1:f==="binary"?1:m==="binary"?-1:f==="string"?1:m==="string"?-1:f==="Date"?1:m!=="Date"?NaN:-1;switch(f){case"number":case"Date":case"string":return c<a?1:a<c?-1:0;case"binary":return function(w,x){for(var _=w.length,O=x.length,M=_<O?_:O,R=0;R<M;++R)if(w[R]!==x[R])return w[R]<x[R]?-1:1;return _===O?0:_<O?-1:1}(Ac(a),Ac(c));case"Array":return function(w,x){for(var _=w.length,O=x.length,M=_<O?_:O,R=0;R<M;++R){var B=Re(w[R],x[R]);if(B!==0)return B}return _===O?0:_<O?-1:1}(a,c)}}catch{}return NaN}function Mc(a){var c=typeof a;return c!="object"?c:ArrayBuffer.isView(a)?"binary":(a=z(a),a==="ArrayBuffer"?"binary":a)}function Ac(a){return a instanceof Uint8Array?a:ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var $c=(ot.prototype._trans=function(a,c,f){var m=this._tx||ee.trans,w=this.name,x=dt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(a==="readonly"?"read":"write"," ").concat(this.name));function _(R,B,I){if(!I.schema[w])throw new he.NotFound("Table "+w+" not part of transaction");return c(I.idbtrans,I)}var O=gt();try{var M=m&&m.db._novip===this.db._novip?m===ee.trans?m._promise(a,_,f):Wt(function(){return m._promise(a,_,f)},{trans:m,transless:ee.transless||ee}):function R(B,I,V,A){if(B.idbdb&&(B._state.openComplete||ee.letThrough||B._vip)){var F=B._createTransaction(I,V,B._dbSchema);try{F.create(),B._state.PR1398_maxLoop=3}catch(Y){return Y.name===Ce.InvalidState&&B.isOpen()&&0<--B._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),B.close({disableAutoOpen:!1}),B.open().then(function(){return R(B,I,V,A)})):rt(Y)}return F._promise(I,function(Y,L){return Wt(function(){return ee.trans=F,A(Y,L,F)})}).then(function(Y){if(I==="readwrite")try{F.idbtrans.commit()}catch{}return I==="readonly"?Y:F._completion.then(function(){return Y})})}if(B._state.openComplete)return rt(new he.DatabaseClosed(B._state.dbOpenError));if(!B._state.isBeingOpened){if(!B._state.autoOpen)return rt(new he.DatabaseClosed);B.open().catch(Oe)}return B._state.dbReadyPromise.then(function(){return R(B,I,V,A)})}(this.db,a,[this.name],_);return x&&(M._consoleTask=x,M=M.catch(function(R){return console.trace(R),rt(R)})),M}finally{O&&ln()}},ot.prototype.get=function(a,c){var f=this;return a&&a.constructor===Object?this.where(a).first(c):a==null?rt(new he.Type("Invalid argument to Table.get()")):this._trans("readonly",function(m){return f.core.get({trans:m,key:a}).then(function(w){return f.hook.reading.fire(w)})}).then(c)},ot.prototype.where=function(a){if(typeof a=="string")return new this.db.WhereClause(this,a);if(l(a))return new this.db.WhereClause(this,"[".concat(a.join("+"),"]"));var c=s(a);if(c.length===1)return this.where(c[0]).equals(a[c[0]]);var f=this.schema.indexes.concat(this.schema.primKey).filter(function(O){if(O.compound&&c.every(function(R){return 0<=O.keyPath.indexOf(R)})){for(var M=0;M<c.length;++M)if(c.indexOf(O.keyPath[M])===-1)return!1;return!0}return!1}).sort(function(O,M){return O.keyPath.length-M.keyPath.length})[0];if(f&&this.db._maxKey!==Ut){var x=f.keyPath.slice(0,c.length);return this.where(x).equals(x.map(function(M){return a[M]}))}!f&&dt&&console.warn("The query ".concat(JSON.stringify(a)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(c.join("+"),"]"));var m=this.schema.idxByName;function w(O,M){return Re(O,M)===0}var _=c.reduce(function(I,M){var R=I[0],B=I[1],I=m[M],V=a[M];return[R||I,R||!I?hn(B,I&&I.multi?function(A){return A=q(A,M),l(A)&&A.some(function(F){return w(V,F)})}:function(A){return w(V,q(A,M))}):B]},[null,null]),x=_[0],_=_[1];return x?this.where(x.name).equals(a[x.keyPath]).filter(_):f?this.filter(_):this.where(c).equals("")},ot.prototype.filter=function(a){return this.toCollection().and(a)},ot.prototype.count=function(a){return this.toCollection().count(a)},ot.prototype.offset=function(a){return this.toCollection().offset(a)},ot.prototype.limit=function(a){return this.toCollection().limit(a)},ot.prototype.each=function(a){return this.toCollection().each(a)},ot.prototype.toArray=function(a){return this.toCollection().toArray(a)},ot.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ot.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,l(a)?"[".concat(a.join("+"),"]"):a))},ot.prototype.reverse=function(){return this.toCollection().reverse()},ot.prototype.mapToClass=function(a){var c,f=this.db,m=this.name;function w(){return c!==null&&c.apply(this,arguments)||this}(this.schema.mappedClass=a).prototype instanceof Ko&&(function(M,R){if(typeof R!="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function B(){this.constructor=M}n(M,R),M.prototype=R===null?Object.create(R):(B.prototype=R.prototype,new B)}(w,c=a),Object.defineProperty(w.prototype,"db",{get:function(){return f},enumerable:!1,configurable:!0}),w.prototype.table=function(){return m},a=w);for(var x=new Set,_=a.prototype;_;_=d(_))Object.getOwnPropertyNames(_).forEach(function(M){return x.add(M)});function O(M){if(!M)return M;var R,B=Object.create(a.prototype);for(R in M)if(!x.has(R))try{B[R]=M[R]}catch{}return B}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=O,this.hook("reading",O),a},ot.prototype.defineClass=function(){return this.mapToClass(function(a){u(this,a)})},ot.prototype.add=function(a,c){var f=this,m=this.schema.primKey,w=m.auto,x=m.keyPath,_=a;return x&&w&&(_=Er(x)(a)),this._trans("readwrite",function(O){return f.core.mutate({trans:O,type:"add",keys:c!=null?[c]:null,values:[_]})}).then(function(O){return O.numFailures?le.reject(O.failures[0]):O.lastResult}).then(function(O){if(x)try{H(a,x,O)}catch{}return O})},ot.prototype.update=function(a,c){return typeof a!="object"||l(a)?this.where(":id").equals(a).modify(c):(a=q(a,this.schema.primKey.keyPath),a===void 0?rt(new he.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(a).modify(c))},ot.prototype.put=function(a,c){var f=this,m=this.schema.primKey,w=m.auto,x=m.keyPath,_=a;return x&&w&&(_=Er(x)(a)),this._trans("readwrite",function(O){return f.core.mutate({trans:O,type:"put",values:[_],keys:c!=null?[c]:null})}).then(function(O){return O.numFailures?le.reject(O.failures[0]):O.lastResult}).then(function(O){if(x)try{H(a,x,O)}catch{}return O})},ot.prototype.delete=function(a){var c=this;return this._trans("readwrite",function(f){return c.core.mutate({trans:f,type:"delete",keys:[a]})}).then(function(f){return f.numFailures?le.reject(f.failures[0]):void 0})},ot.prototype.clear=function(){var a=this;return this._trans("readwrite",function(c){return a.core.mutate({trans:c,type:"deleteRange",range:qo})}).then(function(c){return c.numFailures?le.reject(c.failures[0]):void 0})},ot.prototype.bulkGet=function(a){var c=this;return this._trans("readonly",function(f){return c.core.getMany({keys:a,trans:f}).then(function(m){return m.map(function(w){return c.hook.reading.fire(w)})})})},ot.prototype.bulkAdd=function(a,c,f){var m=this,w=Array.isArray(c)?c:void 0,x=(f=f||(w?void 0:c))?f.allKeys:void 0;return this._trans("readwrite",function(_){var R=m.schema.primKey,O=R.auto,R=R.keyPath;if(R&&w)throw new he.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(w&&w.length!==a.length)throw new he.InvalidArgument("Arguments objects and keys must have the same length");var M=a.length,R=R&&O?a.map(Er(R)):a;return m.core.mutate({trans:_,type:"add",keys:w,values:R,wantResults:x}).then(function(F){var I=F.numFailures,V=F.results,A=F.lastResult,F=F.failures;if(I===0)return x?V:A;throw new Ne("".concat(m.name,".bulkAdd(): ").concat(I," of ").concat(M," operations failed"),F)})})},ot.prototype.bulkPut=function(a,c,f){var m=this,w=Array.isArray(c)?c:void 0,x=(f=f||(w?void 0:c))?f.allKeys:void 0;return this._trans("readwrite",function(_){var R=m.schema.primKey,O=R.auto,R=R.keyPath;if(R&&w)throw new he.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(w&&w.length!==a.length)throw new he.InvalidArgument("Arguments objects and keys must have the same length");var M=a.length,R=R&&O?a.map(Er(R)):a;return m.core.mutate({trans:_,type:"put",keys:w,values:R,wantResults:x}).then(function(F){var I=F.numFailures,V=F.results,A=F.lastResult,F=F.failures;if(I===0)return x?V:A;throw new Ne("".concat(m.name,".bulkPut(): ").concat(I," of ").concat(M," operations failed"),F)})})},ot.prototype.bulkUpdate=function(a){var c=this,f=this.core,m=a.map(function(_){return _.key}),w=a.map(function(_){return _.changes}),x=[];return this._trans("readwrite",function(_){return f.getMany({trans:_,keys:m,cache:"clone"}).then(function(O){var M=[],R=[];a.forEach(function(I,V){var A=I.key,F=I.changes,Y=O[V];if(Y){for(var L=0,Z=Object.keys(F);L<Z.length;L++){var re=Z[L],oe=F[re];if(re===c.schema.primKey.keyPath){if(Re(oe,A)!==0)throw new he.Constraint("Cannot update primary key in bulkUpdate()")}else H(Y,re,oe)}x.push(V),M.push(A),R.push(Y)}});var B=M.length;return f.mutate({trans:_,type:"put",keys:M,values:R,updates:{keys:m,changeSpecs:w}}).then(function(I){var V=I.numFailures,A=I.failures;if(V===0)return B;for(var F=0,Y=Object.keys(A);F<Y.length;F++){var L,Z=Y[F],re=x[Number(Z)];re!=null&&(L=A[Z],delete A[Z],A[re]=L)}throw new Ne("".concat(c.name,".bulkUpdate(): ").concat(V," of ").concat(B," operations failed"),A)})})})},ot.prototype.bulkDelete=function(a){var c=this,f=a.length;return this._trans("readwrite",function(m){return c.core.mutate({trans:m,type:"delete",keys:a})}).then(function(_){var w=_.numFailures,x=_.lastResult,_=_.failures;if(w===0)return x;throw new Ne("".concat(c.name,".bulkDelete(): ").concat(w," of ").concat(f," operations failed"),_)})},ot);function ot(){}function Gr(a){function c(_,O){if(O){for(var M=arguments.length,R=new Array(M-1);--M;)R[M-1]=arguments[M];return f[_].subscribe.apply(null,R),a}if(typeof _=="string")return f[_]}var f={};c.addEventType=x;for(var m=1,w=arguments.length;m<w;++m)x(arguments[m]);return c;function x(_,O,M){if(typeof _!="object"){var R;O=O||st;var B={subscribers:[],fire:M=M||Oe,subscribe:function(I){B.subscribers.indexOf(I)===-1&&(B.subscribers.push(I),B.fire=O(B.fire,I))},unsubscribe:function(I){B.subscribers=B.subscribers.filter(function(V){return V!==I}),B.fire=B.subscribers.reduce(O,M)}};return f[_]=c[_]=B}s(R=_).forEach(function(I){var V=R[I];if(l(V))x(I,R[I][0],R[I][1]);else{if(V!=="asap")throw new he.InvalidArgument("Invalid event config");var A=x(I,Je,function(){for(var F=arguments.length,Y=new Array(F);F--;)Y[F]=arguments[F];A.subscribers.forEach(function(L){X(function(){L.apply(null,Y)})})})}})}}function Zr(a,c){return S(c).from({prototype:a}),c}function _r(a,c){return!(a.filter||a.algorithm||a.or)&&(c?a.justLimit:!a.replayFilter)}function mi(a,c){a.filter=hn(a.filter,c)}function pi(a,c,f){var m=a.replayFilter;a.replayFilter=m?function(){return hn(m(),c())}:c,a.justLimit=f&&!m}function Uo(a,c){if(a.isPrimKey)return c.primaryKey;var f=c.getIndexByKeyPath(a.index);if(!f)throw new he.Schema("KeyPath "+a.index+" on object store "+c.name+" is not indexed");return f}function Rc(a,c,f){var m=Uo(a,c.schema);return c.openCursor({trans:f,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:m,range:a.range}})}function Xo(a,c,f,m){var w=a.replayFilter?hn(a.filter,a.replayFilter()):a.filter;if(a.or){var x={},_=function(O,M,R){var B,I;w&&!w(M,R,function(V){return M.stop(V)},function(V){return M.fail(V)})||((I=""+(B=M.primaryKey))=="[object ArrayBuffer]"&&(I=""+new Uint8Array(B)),p(x,I)||(x[I]=!0,c(O,M,R)))};return Promise.all([a.or._iterate(_,f),Lc(Rc(a,m,f),a.algorithm,_,!a.keysOnly&&a.valueMapper)])}return Lc(Rc(a,m,f),hn(a.algorithm,w),c,!a.keysOnly&&a.valueMapper)}function Lc(a,c,f,m){var w=Ze(m?function(x,_,O){return f(m(x),_,O)}:f);return a.then(function(x){if(x)return x.start(function(){var _=function(){return x.continue()};c&&!c(x,function(O){return _=O},function(O){x.stop(O),_=Oe},function(O){x.fail(O),_=Oe})||w(x.value,x,function(O){return _=O}),_()})})}var En=Symbol(),Qr=(Fc.prototype.execute=function(a){if(this.add!==void 0){var c=this.add;if(l(c))return o(o([],l(a)?a:[],!0),c).sort();if(typeof c=="number")return(Number(a)||0)+c;if(typeof c=="bigint")try{return BigInt(a)+c}catch{return BigInt(0)+c}throw new TypeError("Invalid term ".concat(c))}if(this.remove!==void 0){var f=this.remove;if(l(f))return l(a)?a.filter(function(m){return!f.includes(m)}).sort():[];if(typeof f=="number")return Number(a)-f;if(typeof f=="bigint")try{return BigInt(a)-f}catch{return BigInt(0)-f}throw new TypeError("Invalid subtrahend ".concat(f))}return c=(c=this.replacePrefix)===null||c===void 0?void 0:c[0],c&&typeof a=="string"&&a.startsWith(c)?this.replacePrefix[1]+a.substring(c.length):a},Fc);function Fc(a){Object.assign(this,a)}var vh=(Ue.prototype._read=function(a,c){var f=this._ctx;return f.error?f.table._trans(null,rt.bind(null,f.error)):f.table._trans("readonly",a).then(c)},Ue.prototype._write=function(a){var c=this._ctx;return c.error?c.table._trans(null,rt.bind(null,c.error)):c.table._trans("readwrite",a,"locked")},Ue.prototype._addAlgorithm=function(a){var c=this._ctx;c.algorithm=hn(c.algorithm,a)},Ue.prototype._iterate=function(a,c){return Xo(this._ctx,a,c,this._ctx.table.core)},Ue.prototype.clone=function(a){var c=Object.create(this.constructor.prototype),f=Object.create(this._ctx);return a&&u(f,a),c._ctx=f,c},Ue.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ue.prototype.each=function(a){var c=this._ctx;return this._read(function(f){return Xo(c,a,f,c.table.core)})},Ue.prototype.count=function(a){var c=this;return this._read(function(f){var m=c._ctx,w=m.table.core;if(_r(m,!0))return w.count({trans:f,query:{index:Uo(m,w.schema),range:m.range}}).then(function(_){return Math.min(_,m.limit)});var x=0;return Xo(m,function(){return++x,!1},f,w).then(function(){return x})}).then(a)},Ue.prototype.sortBy=function(a,c){var f=a.split(".").reverse(),m=f[0],w=f.length-1;function x(M,R){return R?x(M[f[R]],R-1):M[m]}var _=this._ctx.dir==="next"?1:-1;function O(M,R){return Re(x(M,w),x(R,w))*_}return this.toArray(function(M){return M.sort(O)}).then(c)},Ue.prototype.toArray=function(a){var c=this;return this._read(function(f){var m=c._ctx;if(m.dir==="next"&&_r(m,!0)&&0<m.limit){var w=m.valueMapper,x=Uo(m,m.table.core.schema);return m.table.core.query({trans:f,limit:m.limit,values:!0,query:{index:x,range:m.range}}).then(function(O){return O=O.result,w?O.map(w):O})}var _=[];return Xo(m,function(O){return _.push(O)},f,m.table.core).then(function(){return _})},a)},Ue.prototype.offset=function(a){var c=this._ctx;return a<=0||(c.offset+=a,_r(c)?pi(c,function(){var f=a;return function(m,w){return f===0||(f===1?--f:w(function(){m.advance(f),f=0}),!1)}}):pi(c,function(){var f=a;return function(){return--f<0}})),this},Ue.prototype.limit=function(a){return this._ctx.limit=Math.min(this._ctx.limit,a),pi(this._ctx,function(){var c=a;return function(f,m,w){return--c<=0&&m(w),0<=c}},!0),this},Ue.prototype.until=function(a,c){return mi(this._ctx,function(f,m,w){return!a(f.value)||(m(w),c)}),this},Ue.prototype.first=function(a){return this.limit(1).toArray(function(c){return c[0]}).then(a)},Ue.prototype.last=function(a){return this.reverse().first(a)},Ue.prototype.filter=function(a){var c;return mi(this._ctx,function(f){return a(f.value)}),(c=this._ctx).isMatch=hn(c.isMatch,a),this},Ue.prototype.and=function(a){return this.filter(a)},Ue.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)},Ue.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ue.prototype.desc=function(){return this.reverse()},Ue.prototype.eachKey=function(a){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(f,m){a(m.key,m)})},Ue.prototype.eachUniqueKey=function(a){return this._ctx.unique="unique",this.eachKey(a)},Ue.prototype.eachPrimaryKey=function(a){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(f,m){a(m.primaryKey,m)})},Ue.prototype.keys=function(a){var c=this._ctx;c.keysOnly=!c.isMatch;var f=[];return this.each(function(m,w){f.push(w.key)}).then(function(){return f}).then(a)},Ue.prototype.primaryKeys=function(a){var c=this._ctx;if(c.dir==="next"&&_r(c,!0)&&0<c.limit)return this._read(function(m){var w=Uo(c,c.table.core.schema);return c.table.core.query({trans:m,values:!1,limit:c.limit,query:{index:w,range:c.range}})}).then(function(m){return m.result}).then(a);c.keysOnly=!c.isMatch;var f=[];return this.each(function(m,w){f.push(w.primaryKey)}).then(function(){return f}).then(a)},Ue.prototype.uniqueKeys=function(a){return this._ctx.unique="unique",this.keys(a)},Ue.prototype.firstKey=function(a){return this.limit(1).keys(function(c){return c[0]}).then(a)},Ue.prototype.lastKey=function(a){return this.reverse().firstKey(a)},Ue.prototype.distinct=function(){var a=this._ctx,a=a.index&&a.table.schema.idxByName[a.index];if(!a||!a.multi)return this;var c={};return mi(this._ctx,function(w){var m=w.primaryKey.toString(),w=p(c,m);return c[m]=!0,!w}),this},Ue.prototype.modify=function(a){var c=this,f=this._ctx;return this._write(function(m){var w,x,_;_=typeof a=="function"?a:(w=s(a),x=w.length,function(L){for(var Z=!1,re=0;re<x;++re){var oe=w[re],de=a[oe],ge=q(L,oe);de instanceof Qr?(H(L,oe,de.execute(ge)),Z=!0):ge!==de&&(H(L,oe,de),Z=!0)}return Z});var O=f.table.core,I=O.schema.primaryKey,M=I.outbound,R=I.extractKey,B=200,I=c.db._options.modifyChunkSize;I&&(B=typeof I=="object"?I[O.name]||I["*"]||200:I);function V(L,oe){var re=oe.failures,oe=oe.numFailures;F+=L-oe;for(var de=0,ge=s(re);de<ge.length;de++){var xe=ge[de];A.push(re[xe])}}var A=[],F=0,Y=[];return c.clone().primaryKeys().then(function(L){function Z(oe){var de=Math.min(B,L.length-oe);return O.getMany({trans:m,keys:L.slice(oe,oe+de),cache:"immutable"}).then(function(ge){for(var xe=[],ye=[],ve=M?[]:null,ke=[],be=0;be<de;++be){var _e=ge[be],Me={value:ue(_e),primKey:L[oe+be]};_.call(Me,Me.value,Me)!==!1&&(Me.value==null?ke.push(L[oe+be]):M||Re(R(_e),R(Me.value))===0?(ye.push(Me.value),M&&ve.push(L[oe+be])):(ke.push(L[oe+be]),xe.push(Me.value)))}return Promise.resolve(0<xe.length&&O.mutate({trans:m,type:"add",values:xe}).then(function(Fe){for(var We in Fe.failures)ke.splice(parseInt(We),1);V(xe.length,Fe)})).then(function(){return(0<ye.length||re&&typeof a=="object")&&O.mutate({trans:m,type:"put",keys:ve,values:ye,criteria:re,changeSpec:typeof a!="function"&&a,isAdditionalChunk:0<oe}).then(function(Fe){return V(ye.length,Fe)})}).then(function(){return(0<ke.length||re&&a===gi)&&O.mutate({trans:m,type:"delete",keys:ke,criteria:re,isAdditionalChunk:0<oe}).then(function(Fe){return V(ke.length,Fe)})}).then(function(){return L.length>oe+de&&Z(oe+B)})})}var re=_r(f)&&f.limit===1/0&&(typeof a!="function"||a===gi)&&{index:f.index,range:f.range};return Z(0).then(function(){if(0<A.length)throw new Se("Error modifying one or more objects",A,F,Y);return L.length})})})},Ue.prototype.delete=function(){var a=this._ctx,c=a.range;return _r(a)&&(a.isPrimKey||c.type===3)?this._write(function(f){var m=a.table.core.schema.primaryKey,w=c;return a.table.core.count({trans:f,query:{index:m,range:w}}).then(function(x){return a.table.core.mutate({trans:f,type:"deleteRange",range:w}).then(function(_){var O=_.failures;if(_.lastResult,_.results,_=_.numFailures,_)throw new Se("Could not delete some values",Object.keys(O).map(function(M){return O[M]}),x-_);return x-_})})}):this.modify(gi)},Ue);function Ue(){}var gi=function(a,c){return c.value=null};function wh(a,c){return a<c?-1:a===c?0:1}function bh(a,c){return c<a?-1:a===c?0:1}function Vt(a,c,f){return a=a instanceof Bc?new a.Collection(a):a,a._ctx.error=new(f||TypeError)(c),a}function Nr(a){return new a.Collection(a,function(){return Wc("")}).limit(0)}function Go(a,c,f,m){var w,x,_,O,M,R,B,I=f.length;if(!f.every(function(F){return typeof F=="string"}))return Vt(a,Vo);function V(F){w=F==="next"?function(L){return L.toUpperCase()}:function(L){return L.toLowerCase()},x=F==="next"?function(L){return L.toLowerCase()}:function(L){return L.toUpperCase()},_=F==="next"?wh:bh;var Y=f.map(function(L){return{lower:x(L),upper:w(L)}}).sort(function(L,Z){return _(L.lower,Z.lower)});O=Y.map(function(L){return L.upper}),M=Y.map(function(L){return L.lower}),B=(R=F)==="next"?"":m}V("next"),a=new a.Collection(a,function(){return Fn(O[0],M[I-1]+m)}),a._ondirectionchange=function(F){V(F)};var A=0;return a._addAlgorithm(function(F,Y,L){var Z=F.key;if(typeof Z!="string")return!1;var re=x(Z);if(c(re,M,A))return!0;for(var oe=null,de=A;de<I;++de){var ge=function(xe,ye,ve,ke,be,_e){for(var Me=Math.min(xe.length,ke.length),Fe=-1,We=0;We<Me;++We){var qt=ye[We];if(qt!==ke[We])return be(xe[We],ve[We])<0?xe.substr(0,We)+ve[We]+ve.substr(We+1):be(xe[We],ke[We])<0?xe.substr(0,We)+ke[We]+ve.substr(We+1):0<=Fe?xe.substr(0,Fe)+ye[Fe]+ve.substr(Fe+1):null;be(xe[We],qt)<0&&(Fe=We)}return Me<ke.length&&_e==="next"?xe+ve.substr(xe.length):Me<xe.length&&_e==="prev"?xe.substr(0,ve.length):Fe<0?null:xe.substr(0,Fe)+ke[Fe]+ve.substr(Fe+1)}(Z,re,O[de],M[de],_,R);ge===null&&oe===null?A=de+1:(oe===null||0<_(oe,ge))&&(oe=ge)}return Y(oe!==null?function(){F.continue(oe+B)}:L),!1}),a}function Fn(a,c,f,m){return{type:2,lower:a,upper:c,lowerOpen:f,upperOpen:m}}function Wc(a){return{type:1,lower:a,upper:a}}var Bc=(Object.defineProperty(xt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),xt.prototype.between=function(a,c,f,m){f=f!==!1,m=m===!0;try{return 0<this._cmp(a,c)||this._cmp(a,c)===0&&(f||m)&&(!f||!m)?Nr(this):new this.Collection(this,function(){return Fn(a,c,!f,!m)})}catch{return Vt(this,en)}},xt.prototype.equals=function(a){return a==null?Vt(this,en):new this.Collection(this,function(){return Wc(a)})},xt.prototype.above=function(a){return a==null?Vt(this,en):new this.Collection(this,function(){return Fn(a,void 0,!0)})},xt.prototype.aboveOrEqual=function(a){return a==null?Vt(this,en):new this.Collection(this,function(){return Fn(a,void 0,!1)})},xt.prototype.below=function(a){return a==null?Vt(this,en):new this.Collection(this,function(){return Fn(void 0,a,!1,!0)})},xt.prototype.belowOrEqual=function(a){return a==null?Vt(this,en):new this.Collection(this,function(){return Fn(void 0,a)})},xt.prototype.startsWith=function(a){return typeof a!="string"?Vt(this,Vo):this.between(a,a+Ut,!0,!0)},xt.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):Go(this,function(c,f){return c.indexOf(f[0])===0},[a],Ut)},xt.prototype.equalsIgnoreCase=function(a){return Go(this,function(c,f){return c===f[0]},[a],"")},xt.prototype.anyOfIgnoreCase=function(){var a=G.apply(j,arguments);return a.length===0?Nr(this):Go(this,function(c,f){return f.indexOf(c)!==-1},a,"")},xt.prototype.startsWithAnyOfIgnoreCase=function(){var a=G.apply(j,arguments);return a.length===0?Nr(this):Go(this,function(c,f){return f.some(function(m){return c.indexOf(m)===0})},a,Ut)},xt.prototype.anyOf=function(){var a=this,c=G.apply(j,arguments),f=this._cmp;try{c.sort(f)}catch{return Vt(this,en)}if(c.length===0)return Nr(this);var m=new this.Collection(this,function(){return Fn(c[0],c[c.length-1])});m._ondirectionchange=function(x){f=x==="next"?a._ascending:a._descending,c.sort(f)};var w=0;return m._addAlgorithm(function(x,_,O){for(var M=x.key;0<f(M,c[w]);)if(++w===c.length)return _(O),!1;return f(M,c[w])===0||(_(function(){x.continue(c[w])}),!1)}),m},xt.prototype.notEqual=function(a){return this.inAnyRange([[-1/0,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},xt.prototype.noneOf=function(){var a=G.apply(j,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch{return Vt(this,en)}var c=a.reduce(function(f,m){return f?f.concat([[f[f.length-1][1],m]]):[[-1/0,m]]},null);return c.push([a[a.length-1],this.db._maxKey]),this.inAnyRange(c,{includeLowers:!1,includeUppers:!1})},xt.prototype.inAnyRange=function(Z,c){var f=this,m=this._cmp,w=this._ascending,x=this._descending,_=this._min,O=this._max;if(Z.length===0)return Nr(this);if(!Z.every(function(re){return re[0]!==void 0&&re[1]!==void 0&&w(re[0],re[1])<=0}))return Vt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",he.InvalidArgument);var M=!c||c.includeLowers!==!1,R=c&&c.includeUppers===!0,B,I=w;function V(re,oe){return I(re[0],oe[0])}try{(B=Z.reduce(function(re,oe){for(var de=0,ge=re.length;de<ge;++de){var xe=re[de];if(m(oe[0],xe[1])<0&&0<m(oe[1],xe[0])){xe[0]=_(xe[0],oe[0]),xe[1]=O(xe[1],oe[1]);break}}return de===ge&&re.push(oe),re},[])).sort(V)}catch{return Vt(this,en)}var A=0,F=R?function(re){return 0<w(re,B[A][1])}:function(re){return 0<=w(re,B[A][1])},Y=M?function(re){return 0<x(re,B[A][0])}:function(re){return 0<=x(re,B[A][0])},L=F,Z=new this.Collection(this,function(){return Fn(B[0][0],B[B.length-1][1],!M,!R)});return Z._ondirectionchange=function(re){I=re==="next"?(L=F,w):(L=Y,x),B.sort(V)},Z._addAlgorithm(function(re,oe,de){for(var ge,xe=re.key;L(xe);)if(++A===B.length)return oe(de),!1;return!F(ge=xe)&&!Y(ge)||(f._cmp(xe,B[A][1])===0||f._cmp(xe,B[A][0])===0||oe(function(){I===w?re.continue(B[A][0]):re.continue(B[A][1])}),!1)}),Z},xt.prototype.startsWithAnyOf=function(){var a=G.apply(j,arguments);return a.every(function(c){return typeof c=="string"})?a.length===0?Nr(this):this.inAnyRange(a.map(function(c){return[c,c+Ut]})):Vt(this,"startsWithAnyOf() only works with strings")},xt);function xt(){}function mn(a){return Ze(function(c){return Jr(c),a(c.target.error),!1})}function Jr(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var eo="storagemutated",yi="x-storagemutated-1",Wn=Gr(null,eo),xh=(pn.prototype._lock=function(){return C(!ee.global),++this._reculock,this._reculock!==1||ee.global||(ee.lockOwnerFor=this),this},pn.prototype._unlock=function(){if(C(!ee.global),--this._reculock==0)for(ee.global||(ee.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var a=this._blockedFuncs.shift();try{ft(a[1],a[0])}catch{}}return this},pn.prototype._locked=function(){return this._reculock&&ee.lockOwnerFor!==this},pn.prototype.create=function(a){var c=this;if(!this.mode)return this;var f=this.db.idbdb,m=this.db._state.dbOpenError;if(C(!this.idbtrans),!a&&!f)switch(m&&m.name){case"DatabaseClosedError":throw new he.DatabaseClosed(m);case"MissingAPIError":throw new he.MissingAPI(m.message,m);default:throw new he.OpenFailed(m)}if(!this.active)throw new he.TransactionInactive;return C(this._completion._state===null),(a=this.idbtrans=a||(this.db.core||f).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ze(function(w){Jr(w),c._reject(a.error)}),a.onabort=Ze(function(w){Jr(w),c.active&&c._reject(new he.Abort(a.error)),c.active=!1,c.on("abort").fire(w)}),a.oncomplete=Ze(function(){c.active=!1,c._resolve(),"mutatedParts"in a&&Wn.storagemutated.fire(a.mutatedParts)}),this},pn.prototype._promise=function(a,c,f){var m=this;if(a==="readwrite"&&this.mode!=="readwrite")return rt(new he.ReadOnly("Transaction is readonly"));if(!this.active)return rt(new he.TransactionInactive);if(this._locked())return new le(function(x,_){m._blockedFuncs.push([function(){m._promise(a,c,f).then(x,_)},ee])});if(f)return Wt(function(){var x=new le(function(_,O){m._lock();var M=c(_,O,m);M&&M.then&&M.then(_,O)});return x.finally(function(){return m._unlock()}),x._lib=!0,x});var w=new le(function(x,_){var O=c(x,_,m);O&&O.then&&O.then(x,_)});return w._lib=!0,w},pn.prototype._root=function(){return this.parent?this.parent._root():this},pn.prototype.waitFor=function(a){var c,f=this._root(),m=le.resolve(a);f._waitingFor?f._waitingFor=f._waitingFor.then(function(){return m}):(f._waitingFor=m,f._waitingQueue=[],c=f.idbtrans.objectStore(f.storeNames[0]),function x(){for(++f._spinCount;f._waitingQueue.length;)f._waitingQueue.shift()();f._waitingFor&&(c.get(-1/0).onsuccess=x)}());var w=f._waitingFor;return new le(function(x,_){m.then(function(O){return f._waitingQueue.push(Ze(x.bind(null,O)))},function(O){return f._waitingQueue.push(Ze(_.bind(null,O)))}).finally(function(){f._waitingFor===w&&(f._waitingFor=null)})})},pn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new he.Abort))},pn.prototype.table=function(a){var c=this._memoizedTables||(this._memoizedTables={});if(p(c,a))return c[a];var f=this.schema[a];if(!f)throw new he.NotFound("Table "+a+" not part of transaction");return f=new this.db.Table(a,f,this),f.core=this.db.core.table(a),c[a]=f},pn);function pn(){}function vi(a,c,f,m,w,x,_){return{name:a,keyPath:c,unique:f,multi:m,auto:w,compound:x,src:(f&&!_?"&":"")+(m?"*":"")+(w?"++":"")+Hc(c)}}function Hc(a){return typeof a=="string"?a:a?"["+[].join.call(a,"+")+"]":""}function wi(a,c,f){return{name:a,primKey:c,indexes:f,mappedClass:null,idxByName:(m=function(w){return[w.name,w]},f.reduce(function(w,x,_){return _=m(x,_),_&&(w[_[0]]=_[1]),w},{}))};var m}var to=function(a){try{return a.only([[]]),to=function(){return[[]]},[[]]}catch{return to=function(){return Ut},Ut}};function bi(a){return a==null?function(){}:typeof a=="string"?(c=a).split(".").length===1?function(f){return f[c]}:function(f){return q(f,c)}:function(f){return q(f,a)};var c}function zc(a){return[].slice.call(a)}var Sh=0;function no(a){return a==null?":id":typeof a=="string"?a:"[".concat(a.join("+"),"]")}function kh(a,c,M){function m(L){if(L.type===3)return null;if(L.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var A=L.lower,F=L.upper,Y=L.lowerOpen,L=L.upperOpen;return A===void 0?F===void 0?null:c.upperBound(F,!!L):F===void 0?c.lowerBound(A,!!Y):c.bound(A,F,!!Y,!!L)}function w(V){var A,F=V.name;return{name:F,schema:V,mutate:function(Y){var L=Y.trans,Z=Y.type,re=Y.keys,oe=Y.values,de=Y.range;return new Promise(function(ge,xe){ge=Ze(ge);var ye=L.objectStore(F),ve=ye.keyPath==null,ke=Z==="put"||Z==="add";if(!ke&&Z!=="delete"&&Z!=="deleteRange")throw new Error("Invalid operation type: "+Z);var be,_e=(re||oe||{length:1}).length;if(re&&oe&&re.length!==oe.length)throw new Error("Given keys array must have same length as given values array.");if(_e===0)return ge({numFailures:0,failures:{},results:[],lastResult:void 0});function Me(Rt){++qt,Jr(Rt)}var Fe=[],We=[],qt=0;if(Z==="deleteRange"){if(de.type===4)return ge({numFailures:qt,failures:We,results:[],lastResult:void 0});de.type===3?Fe.push(be=ye.clear()):Fe.push(be=ye.delete(m(de)))}else{var ve=ke?ve?[oe,re]:[oe,null]:[re,null],Ie=ve[0],jt=ve[1];if(ke)for(var It=0;It<_e;++It)Fe.push(be=jt&&jt[It]!==void 0?ye[Z](Ie[It],jt[It]):ye[Z](Ie[It])),be.onerror=Me;else for(It=0;It<_e;++It)Fe.push(be=ye[Z](Ie[It])),be.onerror=Me}function la(Rt){Rt=Rt.target.result,Fe.forEach(function(ar,Li){return ar.error!=null&&(We[Li]=ar.error)}),ge({numFailures:qt,failures:We,results:Z==="delete"?re:Fe.map(function(ar){return ar.result}),lastResult:Rt})}be.onerror=function(Rt){Me(Rt),la(Rt)},be.onsuccess=la})},getMany:function(Y){var L=Y.trans,Z=Y.keys;return new Promise(function(re,oe){re=Ze(re);for(var de,ge=L.objectStore(F),xe=Z.length,ye=new Array(xe),ve=0,ke=0,be=function(Fe){Fe=Fe.target,ye[Fe._pos]=Fe.result,++ke===ve&&re(ye)},_e=mn(oe),Me=0;Me<xe;++Me)Z[Me]!=null&&((de=ge.get(Z[Me]))._pos=Me,de.onsuccess=be,de.onerror=_e,++ve);ve===0&&re(ye)})},get:function(Y){var L=Y.trans,Z=Y.key;return new Promise(function(re,oe){re=Ze(re);var de=L.objectStore(F).get(Z);de.onsuccess=function(ge){return re(ge.target.result)},de.onerror=mn(oe)})},query:(A=R,function(Y){return new Promise(function(L,Z){L=Ze(L);var re,oe,de,ve=Y.trans,ge=Y.values,xe=Y.limit,be=Y.query,ye=xe===1/0?void 0:xe,ke=be.index,be=be.range,ve=ve.objectStore(F),ke=ke.isPrimaryKey?ve:ve.index(ke.name),be=m(be);if(xe===0)return L({result:[]});A?((ye=ge?ke.getAll(be,ye):ke.getAllKeys(be,ye)).onsuccess=function(_e){return L({result:_e.target.result})},ye.onerror=mn(Z)):(re=0,oe=!ge&&"openKeyCursor"in ke?ke.openKeyCursor(be):ke.openCursor(be),de=[],oe.onsuccess=function(_e){var Me=oe.result;return Me?(de.push(ge?Me.value:Me.primaryKey),++re===xe?L({result:de}):void Me.continue()):L({result:de})},oe.onerror=mn(Z))})}),openCursor:function(Y){var L=Y.trans,Z=Y.values,re=Y.query,oe=Y.reverse,de=Y.unique;return new Promise(function(ge,xe){ge=Ze(ge);var ke=re.index,ye=re.range,ve=L.objectStore(F),ve=ke.isPrimaryKey?ve:ve.index(ke.name),ke=oe?de?"prevunique":"prev":de?"nextunique":"next",be=!Z&&"openKeyCursor"in ve?ve.openKeyCursor(m(ye),ke):ve.openCursor(m(ye),ke);be.onerror=mn(xe),be.onsuccess=Ze(function(_e){var Me,Fe,We,qt,Ie=be.result;Ie?(Ie.___id=++Sh,Ie.done=!1,Me=Ie.continue.bind(Ie),Fe=(Fe=Ie.continuePrimaryKey)&&Fe.bind(Ie),We=Ie.advance.bind(Ie),qt=function(){throw new Error("Cursor not stopped")},Ie.trans=L,Ie.stop=Ie.continue=Ie.continuePrimaryKey=Ie.advance=function(){throw new Error("Cursor not started")},Ie.fail=Ze(xe),Ie.next=function(){var jt=this,It=1;return this.start(function(){return It--?jt.continue():jt.stop()}).then(function(){return jt})},Ie.start=function(jt){function It(){if(be.result)try{jt()}catch(Rt){Ie.fail(Rt)}else Ie.done=!0,Ie.start=function(){throw new Error("Cursor behind last entry")},Ie.stop()}var la=new Promise(function(Rt,ar){Rt=Ze(Rt),be.onerror=mn(ar),Ie.fail=ar,Ie.stop=function(Li){Ie.stop=Ie.continue=Ie.continuePrimaryKey=Ie.advance=qt,Rt(Li)}});return be.onsuccess=Ze(function(Rt){be.onsuccess=It,It()}),Ie.continue=Me,Ie.continuePrimaryKey=Fe,Ie.advance=We,It(),la},ge(Ie)):ge(null)},xe)})},count:function(Y){var L=Y.query,Z=Y.trans,re=L.index,oe=L.range;return new Promise(function(de,ge){var xe=Z.objectStore(F),ye=re.isPrimaryKey?xe:xe.index(re.name),xe=m(oe),ye=xe?ye.count(xe):ye.count();ye.onsuccess=Ze(function(ve){return de(ve.target.result)}),ye.onerror=mn(ge)})}}}var x,_,O,B=(_=M,O=zc((x=a).objectStoreNames),{schema:{name:x.name,tables:O.map(function(V){return _.objectStore(V)}).map(function(V){var A=V.keyPath,L=V.autoIncrement,F=l(A),Y={},L={name:V.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:A==null,compound:F,keyPath:A,autoIncrement:L,unique:!0,extractKey:bi(A)},indexes:zc(V.indexNames).map(function(Z){return V.index(Z)}).map(function(de){var re=de.name,oe=de.unique,ge=de.multiEntry,de=de.keyPath,ge={name:re,compound:l(de),keyPath:de,unique:oe,multiEntry:ge,extractKey:bi(de)};return Y[no(de)]=ge}),getIndexByKeyPath:function(Z){return Y[no(Z)]}};return Y[":id"]=L.primaryKey,A!=null&&(Y[no(A)]=L.primaryKey),L})},hasGetAll:0<O.length&&"getAll"in _.objectStore(O[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),M=B.schema,R=B.hasGetAll,B=M.tables.map(w),I={};return B.forEach(function(V){return I[V.name]=V}),{stack:"dbcore",transaction:a.transaction.bind(a),table:function(V){if(!I[V])throw new Error("Table '".concat(V,"' not found"));return I[V]},MIN_KEY:-1/0,MAX_KEY:to(c),schema:M}}function Eh(a,c,f,m){var w=f.IDBKeyRange;return f.indexedDB,{dbcore:(m=kh(c,w,m),a.dbcore.reduce(function(x,_){return _=_.create,r(r({},x),_(x))},m))}}function Zo(a,m){var f=m.db,m=Eh(a._middlewares,f,a._deps,m);a.core=m.dbcore,a.tables.forEach(function(w){var x=w.name;a.core.schema.tables.some(function(_){return _.name===x})&&(w.core=a.core.table(x),a[x]instanceof a.Table&&(a[x].core=w.core))})}function Qo(a,c,f,m){f.forEach(function(w){var x=m[w];c.forEach(function(_){var O=function M(R,B){return N(R,B)||(R=d(R))&&M(R,B)}(_,w);(!O||"value"in O&&O.value===void 0)&&(_===a.Transaction.prototype||_ instanceof a.Transaction?k(_,w,{get:function(){return this.table(w)},set:function(M){y(this,w,{value:M,writable:!0,configurable:!0,enumerable:!0})}}):_[w]=new a.Table(w,x))})})}function xi(a,c){c.forEach(function(f){for(var m in f)f[m]instanceof a.Table&&delete f[m]})}function _h(a,c){return a._cfg.version-c._cfg.version}function Nh(a,c,f,m){var w=a._dbSchema;f.objectStoreNames.contains("$meta")&&!w.$meta&&(w.$meta=wi("$meta",Vc("")[0],[]),a._storeNames.push("$meta"));var x=a._createTransaction("readwrite",a._storeNames,w);x.create(f),x._completion.catch(m);var _=x._reject.bind(x),O=ee.transless||ee;Wt(function(){return ee.trans=x,ee.transless=O,c!==0?(Zo(a,f),R=c,((M=x).storeNames.includes("$meta")?M.table("$meta").get("version").then(function(B){return B??R}):le.resolve(R)).then(function(B){return V=B,A=x,F=f,Y=[],B=(I=a)._versions,L=I._dbSchema=ea(0,I.idbdb,F),(B=B.filter(function(Z){return Z._cfg.version>=V})).length!==0?(B.forEach(function(Z){Y.push(function(){var re=L,oe=Z._cfg.dbschema;ta(I,re,F),ta(I,oe,F),L=I._dbSchema=oe;var de=Si(re,oe);de.add.forEach(function(ke){ki(F,ke[0],ke[1].primKey,ke[1].indexes)}),de.change.forEach(function(ke){if(ke.recreate)throw new he.Upgrade("Not yet support for changing primary key");var be=F.objectStore(ke.name);ke.add.forEach(function(_e){return Jo(be,_e)}),ke.change.forEach(function(_e){be.deleteIndex(_e.name),Jo(be,_e)}),ke.del.forEach(function(_e){return be.deleteIndex(_e)})});var ge=Z._cfg.contentUpgrade;if(ge&&Z._cfg.version>V){Zo(I,F),A._memoizedTables={};var xe=te(oe);de.del.forEach(function(ke){xe[ke]=re[ke]}),xi(I,[I.Transaction.prototype]),Qo(I,[I.Transaction.prototype],s(xe),xe),A.schema=xe;var ye,ve=se(ge);return ve&&Jt(),de=le.follow(function(){var ke;(ye=ge(A))&&ve&&(ke=Yt.bind(null,null),ye.then(ke,ke))}),ye&&typeof ye.then=="function"?le.resolve(ye):de.then(function(){return ye})}}),Y.push(function(re){var oe,de,ge=Z._cfg.dbschema;oe=ge,de=re,[].slice.call(de.db.objectStoreNames).forEach(function(xe){return oe[xe]==null&&de.db.deleteObjectStore(xe)}),xi(I,[I.Transaction.prototype]),Qo(I,[I.Transaction.prototype],I._storeNames,I._dbSchema),A.schema=I._dbSchema}),Y.push(function(re){I.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(I.idbdb.version/10)===Z._cfg.version?(I.idbdb.deleteObjectStore("$meta"),delete I._dbSchema.$meta,I._storeNames=I._storeNames.filter(function(oe){return oe!=="$meta"})):re.objectStore("$meta").put(Z._cfg.version,"version"))})}),function Z(){return Y.length?le.resolve(Y.shift()(A.idbtrans)).then(Z):le.resolve()}().then(function(){Yc(L,F)})):le.resolve();var I,V,A,F,Y,L}).catch(_)):(s(w).forEach(function(B){ki(f,B,w[B].primKey,w[B].indexes)}),Zo(a,f),void le.follow(function(){return a.on.populate.fire(x)}).catch(_));var M,R})}function Th(a,c){Yc(a._dbSchema,c),c.db.version%10!=0||c.objectStoreNames.contains("$meta")||c.db.createObjectStore("$meta").add(Math.ceil(c.db.version/10-1),"version");var f=ea(0,a.idbdb,c);ta(a,a._dbSchema,c);for(var m=0,w=Si(f,a._dbSchema).change;m<w.length;m++){var x=function(_){if(_.change.length||_.recreate)return console.warn("Unable to patch indexes of table ".concat(_.name," because it has changes on the type of index or primary key.")),{value:void 0};var O=c.objectStore(_.name);_.add.forEach(function(M){dt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(_.name,".").concat(M.src)),Jo(O,M)})}(w[m]);if(typeof x=="object")return x.value}}function Si(a,c){var f,m={del:[],add:[],change:[]};for(f in a)c[f]||m.del.push(f);for(f in c){var w=a[f],x=c[f];if(w){var _={name:f,def:x,recreate:!1,del:[],add:[],change:[]};if(""+(w.primKey.keyPath||"")!=""+(x.primKey.keyPath||"")||w.primKey.auto!==x.primKey.auto)_.recreate=!0,m.change.push(_);else{var O=w.idxByName,M=x.idxByName,R=void 0;for(R in O)M[R]||_.del.push(R);for(R in M){var B=O[R],I=M[R];B?B.src!==I.src&&_.change.push(I):_.add.push(I)}(0<_.del.length||0<_.add.length||0<_.change.length)&&m.change.push(_)}}else m.add.push([f,x])}return m}function ki(a,c,f,m){var w=a.db.createObjectStore(c,f.keyPath?{keyPath:f.keyPath,autoIncrement:f.auto}:{autoIncrement:f.auto});return m.forEach(function(x){return Jo(w,x)}),w}function Yc(a,c){s(a).forEach(function(f){c.db.objectStoreNames.contains(f)||(dt&&console.debug("Dexie: Creating missing table",f),ki(c,f,a[f].primKey,a[f].indexes))})}function Jo(a,c){a.createIndex(c.name,c.keyPath,{unique:c.unique,multiEntry:c.multi})}function ea(a,c,f){var m={};return $(c.objectStoreNames,0).forEach(function(w){for(var x=f.objectStore(w),_=vi(Hc(R=x.keyPath),R||"",!0,!1,!!x.autoIncrement,R&&typeof R!="string",!0),O=[],M=0;M<x.indexNames.length;++M){var B=x.index(x.indexNames[M]),R=B.keyPath,B=vi(B.name,R,!!B.unique,!!B.multiEntry,!1,R&&typeof R!="string",!1);O.push(B)}m[w]=wi(w,_,O)}),m}function ta(a,c,f){for(var m=f.db.objectStoreNames,w=0;w<m.length;++w){var x=m[w],_=f.objectStore(x);a._hasGetAll="getAll"in _;for(var O=0;O<_.indexNames.length;++O){var M=_.indexNames[O],R=_.index(M).keyPath,B=typeof R=="string"?R:"["+$(R).join("+")+"]";!c[x]||(R=c[x].idxByName[B])&&(R.name=M,delete c[x].idxByName[B],c[x].idxByName[M]=R)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function Vc(a){return a.split(",").map(function(c,f){var m=(c=c.trim()).replace(/([&*]|\+\+)/g,""),w=/^\[/.test(m)?m.match(/^\[(.*)\]$/)[1].split("+"):m;return vi(m,w||null,/\&/.test(c),/\*/.test(c),/\+\+/.test(c),l(w),f===0)})}var Ch=(na.prototype._parseStoresSpec=function(a,c){s(a).forEach(function(f){if(a[f]!==null){var m=Vc(a[f]),w=m.shift();if(w.unique=!0,w.multi)throw new he.Schema("Primary key cannot be multi-valued");m.forEach(function(x){if(x.auto)throw new he.Schema("Only primary key can be marked as autoIncrement (++)");if(!x.keyPath)throw new he.Schema("Index must have a name and cannot be an empty string")}),c[f]=wi(f,w,m)}})},na.prototype.stores=function(f){var c=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,f):f;var f=c._versions,m={},w={};return f.forEach(function(x){u(m,x._cfg.storesSource),w=x._cfg.dbschema={},x._parseStoresSpec(m,w)}),c._dbSchema=w,xi(c,[c._allTables,c,c.Transaction.prototype]),Qo(c,[c._allTables,c,c.Transaction.prototype,this._cfg.tables],s(w),w),c._storeNames=s(w),this},na.prototype.upgrade=function(a){return this._cfg.contentUpgrade=vt(this._cfg.contentUpgrade||Oe,a),this},na);function na(){}function Ei(a,c){var f=a._dbNamesDB;return f||(f=a._dbNamesDB=new _n(kr,{addons:[],indexedDB:a,IDBKeyRange:c})).version(1).stores({dbnames:"name"}),f.table("dbnames")}function _i(a){return a&&typeof a.databases=="function"}function Ni(a){return Wt(function(){return ee.letThrough=!0,a()})}function Ti(a){return!("from"in a)}var Ot=function(a,c){if(!this){var f=new Ot;return a&&"d"in a&&u(f,a),f}u(this,arguments.length?{d:1,from:a,to:1<arguments.length?c:a}:{d:0})};function ro(a,c,f){var m=Re(c,f);if(!isNaN(m)){if(0<m)throw RangeError();if(Ti(a))return u(a,{from:c,to:f,d:1});var w=a.l,m=a.r;if(Re(f,a.from)<0)return w?ro(w,c,f):a.l={from:c,to:f,d:1,l:null,r:null},Kc(a);if(0<Re(c,a.to))return m?ro(m,c,f):a.r={from:c,to:f,d:1,l:null,r:null},Kc(a);Re(c,a.from)<0&&(a.from=c,a.l=null,a.d=m?m.d+1:1),0<Re(f,a.to)&&(a.to=f,a.r=null,a.d=a.l?a.l.d+1:1),f=!a.r,w&&!a.l&&oo(a,w),m&&f&&oo(a,m)}}function oo(a,c){Ti(c)||function f(m,M){var x=M.from,_=M.to,O=M.l,M=M.r;ro(m,x,_),O&&f(m,O),M&&f(m,M)}(a,c)}function qc(a,c){var f=ra(c),m=f.next();if(m.done)return!1;for(var w=m.value,x=ra(a),_=x.next(w.from),O=_.value;!m.done&&!_.done;){if(Re(O.from,w.to)<=0&&0<=Re(O.to,w.from))return!0;Re(w.from,O.from)<0?w=(m=f.next(O.from)).value:O=(_=x.next(w.from)).value}return!1}function ra(a){var c=Ti(a)?null:{s:0,n:a};return{next:function(f){for(var m=0<arguments.length;c;)switch(c.s){case 0:if(c.s=1,m)for(;c.n.l&&Re(f,c.n.from)<0;)c={up:c,n:c.n.l,s:1};else for(;c.n.l;)c={up:c,n:c.n.l,s:1};case 1:if(c.s=2,!m||Re(f,c.n.to)<=0)return{value:c.n,done:!1};case 2:if(c.n.r){c.s=3,c={up:c,n:c.n.r,s:0};continue}case 3:c=c.up}return{done:!0}}}}function Kc(a){var c,f,m=(((c=a.r)===null||c===void 0?void 0:c.d)||0)-(((f=a.l)===null||f===void 0?void 0:f.d)||0),w=1<m?"r":m<-1?"l":"";w&&(c=w=="r"?"l":"r",f=r({},a),m=a[w],a.from=m.from,a.to=m.to,a[w]=m[w],f[w]=m[c],(a[c]=f).d=Uc(f)),a.d=Uc(a)}function Uc(f){var c=f.r,f=f.l;return(c?f?Math.max(c.d,f.d):c.d:f?f.d:0)+1}function oa(a,c){return s(c).forEach(function(f){a[f]?oo(a[f],c[f]):a[f]=function m(w){var x,_,O={};for(x in w)p(w,x)&&(_=w[x],O[x]=!_||typeof _!="object"||U.has(_.constructor)?_:m(_));return O}(c[f])}),a}function Ci(a,c){return a.all||c.all||Object.keys(a).some(function(f){return c[f]&&qc(c[f],a[f])})}v(Ot.prototype,((Xt={add:function(a){return oo(this,a),this},addKey:function(a){return ro(this,a,a),this},addKeys:function(a){var c=this;return a.forEach(function(f){return ro(c,f,f)}),this},hasKey:function(a){var c=ra(this).next(a).value;return c&&Re(c.from,a)<=0&&0<=Re(c.to,a)}})[D]=function(){return ra(this)},Xt));var rr={},Di={},Oi=!1;function aa(a){oa(Di,a),Oi||(Oi=!0,setTimeout(function(){Oi=!1,ji(Di,!(Di={}))},0))}function ji(a,c){c===void 0&&(c=!1);var f=new Set;if(a.all)for(var m=0,w=Object.values(rr);m<w.length;m++)Xc(_=w[m],a,f,c);else for(var x in a){var _,O=/^idb\:\/\/(.*)\/(.*)\//.exec(x);O&&(x=O[1],O=O[2],(_=rr["idb://".concat(x,"/").concat(O)])&&Xc(_,a,f,c))}f.forEach(function(M){return M()})}function Xc(a,c,f,m){for(var w=[],x=0,_=Object.entries(a.queries.query);x<_.length;x++){for(var O=_[x],M=O[0],R=[],B=0,I=O[1];B<I.length;B++){var V=I[B];Ci(c,V.obsSet)?V.subscribers.forEach(function(L){return f.add(L)}):m&&R.push(V)}m&&w.push([M,R])}if(m)for(var A=0,F=w;A<F.length;A++){var Y=F[A],M=Y[0],R=Y[1];a.queries.query[M]=R}}function Dh(a){var c=a._state,f=a._deps.indexedDB;if(c.isBeingOpened||a.idbdb)return c.dbReadyPromise.then(function(){return c.dbOpenError?rt(c.dbOpenError):a});c.isBeingOpened=!0,c.dbOpenError=null,c.openComplete=!1;var m=c.openCanceller,w=Math.round(10*a.verno),x=!1;function _(){if(c.openCanceller!==m)throw new he.DatabaseClosed("db.open() was cancelled")}function O(){return new le(function(V,A){if(_(),!f)throw new he.MissingAPI;var F=a.name,Y=c.autoSchema||!w?f.open(F):f.open(F,w);if(!Y)throw new he.MissingAPI;Y.onerror=mn(A),Y.onblocked=Ze(a._fireOnBlocked),Y.onupgradeneeded=Ze(function(L){var Z;B=Y.transaction,c.autoSchema&&!a._options.allowEmptyDB?(Y.onerror=Jr,B.abort(),Y.result.close(),(Z=f.deleteDatabase(F)).onsuccess=Z.onerror=Ze(function(){A(new he.NoSuchDatabase("Database ".concat(F," doesnt exist")))})):(B.onerror=mn(A),L=L.oldVersion>Math.pow(2,62)?0:L.oldVersion,I=L<1,a.idbdb=Y.result,x&&Th(a,B),Nh(a,L/10,B,A))},A),Y.onsuccess=Ze(function(){B=null;var L,Z,re,oe,de,ge=a.idbdb=Y.result,xe=$(ge.objectStoreNames);if(0<xe.length)try{var ye=ge.transaction((oe=xe).length===1?oe[0]:oe,"readonly");if(c.autoSchema)Z=ge,re=ye,(L=a).verno=Z.version/10,re=L._dbSchema=ea(0,Z,re),L._storeNames=$(Z.objectStoreNames,0),Qo(L,[L._allTables],s(re),re);else if(ta(a,a._dbSchema,ye),((de=Si(ea(0,(de=a).idbdb,ye),de._dbSchema)).add.length||de.change.some(function(ve){return ve.add.length||ve.change.length}))&&!x)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ge.close(),w=ge.version+1,x=!0,V(O());Zo(a,ye)}catch{}Ln.push(a),ge.onversionchange=Ze(function(ve){c.vcFired=!0,a.on("versionchange").fire(ve)}),ge.onclose=Ze(function(ve){a.on("close").fire(ve)}),I&&(de=a._deps,ye=F,ge=de.indexedDB,de=de.IDBKeyRange,_i(ge)||ye===kr||Ei(ge,de).put({name:ye}).catch(Oe)),V()},A)}).catch(function(V){switch(V==null?void 0:V.name){case"UnknownError":if(0<c.PR1398_maxLoop)return c.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),O();break;case"VersionError":if(0<w)return w=0,O()}return le.reject(V)})}var M,R=c.dbReadyResolve,B=null,I=!1;return le.race([m,(typeof navigator>"u"?le.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(V){function A(){return indexedDB.databases().finally(V)}M=setInterval(A,100),A()}).finally(function(){return clearInterval(M)}):Promise.resolve()).then(O)]).then(function(){return _(),c.onReadyBeingFired=[],le.resolve(Ni(function(){return a.on.ready.fire(a.vip)})).then(function V(){if(0<c.onReadyBeingFired.length){var A=c.onReadyBeingFired.reduce(vt,Oe);return c.onReadyBeingFired=[],le.resolve(Ni(function(){return A(a.vip)})).then(V)}})}).finally(function(){c.openCanceller===m&&(c.onReadyBeingFired=null,c.isBeingOpened=!1)}).catch(function(V){c.dbOpenError=V;try{B&&B.abort()}catch{}return m===c.openCanceller&&a._close(),rt(V)}).finally(function(){c.openComplete=!0,R()}).then(function(){var V;return I&&(V={},a.tables.forEach(function(A){A.schema.indexes.forEach(function(F){F.name&&(V["idb://".concat(a.name,"/").concat(A.name,"/").concat(F.name)]=new Ot(-1/0,[[[]]]))}),V["idb://".concat(a.name,"/").concat(A.name,"/")]=V["idb://".concat(a.name,"/").concat(A.name,"/:dels")]=new Ot(-1/0,[[[]]])}),Wn(eo).fire(V),ji(V,!0)),a})}function Ii(a){function c(x){return a.next(x)}var f=w(c),m=w(function(x){return a.throw(x)});function w(x){return function(M){var O=x(M),M=O.value;return O.done?M:M&&typeof M.then=="function"?M.then(f,m):l(M)?Promise.all(M).then(f,m):f(M)}}return w(c)()}function ia(a,c,f){for(var m=l(a)?a.slice():[a],w=0;w<f;++w)m.push(c);return m}var Oh={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(a){return r(r({},a),{table:function(c){var f=a.table(c),m=f.schema,w={},x=[];function _(I,V,A){var F=no(I),Y=w[F]=w[F]||[],L=I==null?0:typeof I=="string"?1:I.length,Z=0<V,Z=r(r({},A),{name:Z?"".concat(F,"(virtual-from:").concat(A.name,")"):A.name,lowLevelIndex:A,isVirtual:Z,keyTail:V,keyLength:L,extractKey:bi(I),unique:!Z&&A.unique});return Y.push(Z),Z.isPrimaryKey||x.push(Z),1<L&&_(L===2?I[0]:I.slice(0,L-1),V+1,A),Y.sort(function(re,oe){return re.keyTail-oe.keyTail}),Z}c=_(m.primaryKey.keyPath,0,m.primaryKey),w[":id"]=[c];for(var O=0,M=m.indexes;O<M.length;O++){var R=M[O];_(R.keyPath,0,R)}function B(I){var V,A=I.query.index;return A.isVirtual?r(r({},I),{query:{index:A.lowLevelIndex,range:(V=I.query.range,A=A.keyTail,{type:V.type===1?2:V.type,lower:ia(V.lower,V.lowerOpen?a.MAX_KEY:a.MIN_KEY,A),lowerOpen:!0,upper:ia(V.upper,V.upperOpen?a.MIN_KEY:a.MAX_KEY,A),upperOpen:!0})}}):I}return r(r({},f),{schema:r(r({},m),{primaryKey:c,indexes:x,getIndexByKeyPath:function(I){return(I=w[no(I)])&&I[0]}}),count:function(I){return f.count(B(I))},query:function(I){return f.query(B(I))},openCursor:function(I){var V=I.query.index,A=V.keyTail,F=V.isVirtual,Y=V.keyLength;return F?f.openCursor(B(I)).then(function(Z){return Z&&L(Z)}):f.openCursor(I);function L(Z){return Object.create(Z,{continue:{value:function(re){re!=null?Z.continue(ia(re,I.reverse?a.MAX_KEY:a.MIN_KEY,A)):I.unique?Z.continue(Z.key.slice(0,Y).concat(I.reverse?a.MIN_KEY:a.MAX_KEY,A)):Z.continue()}},continuePrimaryKey:{value:function(re,oe){Z.continuePrimaryKey(ia(re,a.MAX_KEY,A),oe)}},primaryKey:{get:function(){return Z.primaryKey}},key:{get:function(){var re=Z.key;return Y===1?re[0]:re.slice(0,Y)}},value:{get:function(){return Z.value}}})}}})}})}};function Pi(a,c,f,m){return f=f||{},m=m||"",s(a).forEach(function(w){var x,_,O;p(c,w)?(x=a[w],_=c[w],typeof x=="object"&&typeof _=="object"&&x&&_?(O=z(x))!==z(_)?f[m+w]=c[w]:O==="Object"?Pi(x,_,f,m+w+"."):x!==_&&(f[m+w]=c[w]):x!==_&&(f[m+w]=c[w])):f[m+w]=void 0}),s(c).forEach(function(w){p(a,w)||(f[m+w]=c[w])}),f}function Mi(a,c){return c.type==="delete"?c.keys:c.keys||c.values.map(a.extractKey)}var jh={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return r(r({},a),{table:function(c){var f=a.table(c),m=f.schema.primaryKey;return r(r({},f),{mutate:function(w){var x=ee.trans,_=x.table(c).hook,O=_.deleting,M=_.creating,R=_.updating;switch(w.type){case"add":if(M.fire===Oe)break;return x._promise("readwrite",function(){return B(w)},!0);case"put":if(M.fire===Oe&&R.fire===Oe)break;return x._promise("readwrite",function(){return B(w)},!0);case"delete":if(O.fire===Oe)break;return x._promise("readwrite",function(){return B(w)},!0);case"deleteRange":if(O.fire===Oe)break;return x._promise("readwrite",function(){return function I(V,A,F){return f.query({trans:V,values:!1,query:{index:m,range:A},limit:F}).then(function(Y){var L=Y.result;return B({type:"delete",keys:L,trans:V}).then(function(Z){return 0<Z.numFailures?Promise.reject(Z.failures[0]):L.length<F?{failures:[],numFailures:0,lastResult:void 0}:I(V,r(r({},A),{lower:L[L.length-1],lowerOpen:!0}),F)})})}(w.trans,w.range,1e4)},!0)}return f.mutate(w);function B(I){var V,A,F,Y=ee.trans,L=I.keys||Mi(m,I);if(!L)throw new Error("Keys missing");return(I=I.type==="add"||I.type==="put"?r(r({},I),{keys:L}):r({},I)).type!=="delete"&&(I.values=o([],I.values)),I.keys&&(I.keys=o([],I.keys)),V=f,F=L,((A=I).type==="add"?Promise.resolve([]):V.getMany({trans:A.trans,keys:F,cache:"immutable"})).then(function(Z){var re=L.map(function(oe,de){var ge,xe,ye,ve=Z[de],ke={onerror:null,onsuccess:null};return I.type==="delete"?O.fire.call(ke,oe,ve,Y):I.type==="add"||ve===void 0?(ge=M.fire.call(ke,oe,I.values[de],Y),oe==null&&ge!=null&&(I.keys[de]=oe=ge,m.outbound||H(I.values[de],m.keyPath,oe))):(ge=Pi(ve,I.values[de]),(xe=R.fire.call(ke,ge,oe,ve,Y))&&(ye=I.values[de],Object.keys(xe).forEach(function(be){p(ye,be)?ye[be]=xe[be]:H(ye,be,xe[be])}))),ke});return f.mutate(I).then(function(oe){for(var de=oe.failures,ge=oe.results,xe=oe.numFailures,oe=oe.lastResult,ye=0;ye<L.length;++ye){var ve=(ge||L)[ye],ke=re[ye];ve==null?ke.onerror&&ke.onerror(de[ye]):ke.onsuccess&&ke.onsuccess(I.type==="put"&&Z[ye]?I.values[ye]:ve)}return{failures:de,results:ge,numFailures:xe,lastResult:oe}}).catch(function(oe){return re.forEach(function(de){return de.onerror&&de.onerror(oe)}),Promise.reject(oe)})})}}})}})}};function Gc(a,c,f){try{if(!c||c.keys.length<a.length)return null;for(var m=[],w=0,x=0;w<c.keys.length&&x<a.length;++w)Re(c.keys[w],a[x])===0&&(m.push(f?ue(c.values[w]):c.values[w]),++x);return m.length===a.length?m:null}catch{return null}}var Ih={stack:"dbcore",level:-1,create:function(a){return{table:function(c){var f=a.table(c);return r(r({},f),{getMany:function(m){if(!m.cache)return f.getMany(m);var w=Gc(m.keys,m.trans._cache,m.cache==="clone");return w?le.resolve(w):f.getMany(m).then(function(x){return m.trans._cache={keys:m.keys,values:m.cache==="clone"?ue(x):x},x})},mutate:function(m){return m.type!=="add"&&(m.trans._cache=null),f.mutate(m)}})}}}};function Zc(a,c){return a.trans.mode==="readonly"&&!!a.subscr&&!a.trans.explicit&&a.trans.db._options.cache!=="disabled"&&!c.schema.primaryKey.outbound}function Qc(a,c){switch(a){case"query":return c.values&&!c.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ph={stack:"dbcore",level:0,name:"Observability",create:function(a){var c=a.schema.name,f=new Ot(a.MIN_KEY,a.MAX_KEY);return r(r({},a),{transaction:function(m,w,x){if(ee.subscr&&w!=="readonly")throw new he.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ee.querier));return a.transaction(m,w,x)},table:function(m){var w=a.table(m),x=w.schema,_=x.primaryKey,I=x.indexes,O=_.extractKey,M=_.outbound,R=_.autoIncrement&&I.filter(function(A){return A.compound&&A.keyPath.includes(_.keyPath)}),B=r(r({},w),{mutate:function(A){function F(be){return be="idb://".concat(c,"/").concat(m,"/").concat(be),oe[be]||(oe[be]=new Ot)}var Y,L,Z,re=A.trans,oe=A.mutatedParts||(A.mutatedParts={}),de=F(""),ge=F(":dels"),xe=A.type,ke=A.type==="deleteRange"?[A.range]:A.type==="delete"?[A.keys]:A.values.length<50?[Mi(_,A).filter(function(be){return be}),A.values]:[],ye=ke[0],ve=ke[1],ke=A.trans._cache;return l(ye)?(de.addKeys(ye),(ke=xe==="delete"||ye.length===ve.length?Gc(ye,ke):null)||ge.addKeys(ye),(ke||ve)&&(Y=F,L=ke,Z=ve,x.indexes.forEach(function(be){var _e=Y(be.name||"");function Me(We){return We!=null?be.extractKey(We):null}function Fe(We){return be.multiEntry&&l(We)?We.forEach(function(qt){return _e.addKey(qt)}):_e.addKey(We)}(L||Z).forEach(function(We,jt){var Ie=L&&Me(L[jt]),jt=Z&&Me(Z[jt]);Re(Ie,jt)!==0&&(Ie!=null&&Fe(Ie),jt!=null&&Fe(jt))})}))):ye?(ve={from:(ve=ye.lower)!==null&&ve!==void 0?ve:a.MIN_KEY,to:(ve=ye.upper)!==null&&ve!==void 0?ve:a.MAX_KEY},ge.add(ve),de.add(ve)):(de.add(f),ge.add(f),x.indexes.forEach(function(be){return F(be.name).add(f)})),w.mutate(A).then(function(be){return!ye||A.type!=="add"&&A.type!=="put"||(de.addKeys(be.results),R&&R.forEach(function(_e){for(var Me=A.values.map(function(Ie){return _e.extractKey(Ie)}),Fe=_e.keyPath.findIndex(function(Ie){return Ie===_.keyPath}),We=0,qt=be.results.length;We<qt;++We)Me[We][Fe]=be.results[We];F(_e.name).addKeys(Me)})),re.mutatedParts=oa(re.mutatedParts||{},oe),be})}}),I=function(F){var Y=F.query,F=Y.index,Y=Y.range;return[F,new Ot((F=Y.lower)!==null&&F!==void 0?F:a.MIN_KEY,(Y=Y.upper)!==null&&Y!==void 0?Y:a.MAX_KEY)]},V={get:function(A){return[_,new Ot(A.key)]},getMany:function(A){return[_,new Ot().addKeys(A.keys)]},count:I,query:I,openCursor:I};return s(V).forEach(function(A){B[A]=function(F){var Y=ee.subscr,L=!!Y,Z=Zc(ee,w)&&Qc(A,F)?F.obsSet={}:Y;if(L){var re=function(ve){return ve="idb://".concat(c,"/").concat(m,"/").concat(ve),Z[ve]||(Z[ve]=new Ot)},oe=re(""),de=re(":dels"),Y=V[A](F),L=Y[0],Y=Y[1];if((A==="query"&&L.isPrimaryKey&&!F.values?de:re(L.name||"")).add(Y),!L.isPrimaryKey){if(A!=="count"){var ge=A==="query"&&M&&F.values&&w.query(r(r({},F),{values:!1}));return w[A].apply(this,arguments).then(function(ve){if(A==="query"){if(M&&F.values)return ge.then(function(Me){return Me=Me.result,oe.addKeys(Me),ve});var ke=F.values?ve.result.map(O):ve.result;(F.values?oe:de).addKeys(ke)}else if(A==="openCursor"){var be=ve,_e=F.values;return be&&Object.create(be,{key:{get:function(){return de.addKey(be.primaryKey),be.key}},primaryKey:{get:function(){var Me=be.primaryKey;return de.addKey(Me),Me}},value:{get:function(){return _e&&oe.addKey(be.primaryKey),be.value}}})}return ve})}de.add(f)}}return w[A].apply(this,arguments)}}),B}})}};function Jc(a,c,f){if(f.numFailures===0)return c;if(c.type==="deleteRange")return null;var m=c.keys?c.keys.length:"values"in c&&c.values?c.values.length:1;return f.numFailures===m?null:(c=r({},c),l(c.keys)&&(c.keys=c.keys.filter(function(w,x){return!(x in f.failures)})),"values"in c&&l(c.values)&&(c.values=c.values.filter(function(w,x){return!(x in f.failures)})),c)}function Ai(a,c){return f=a,((m=c).lower===void 0||(m.lowerOpen?0<Re(f,m.lower):0<=Re(f,m.lower)))&&(a=a,(c=c).upper===void 0||(c.upperOpen?Re(a,c.upper)<0:Re(a,c.upper)<=0));var f,m}function el(a,c,V,m,w,x){if(!V||V.length===0)return a;var _=c.query.index,O=_.multiEntry,M=c.query.range,R=m.schema.primaryKey.extractKey,B=_.extractKey,I=(_.lowLevelIndex||_).extractKey,V=V.reduce(function(A,F){var Y=A,L=[];if(F.type==="add"||F.type==="put")for(var Z=new Ot,re=F.values.length-1;0<=re;--re){var oe,de=F.values[re],ge=R(de);Z.hasKey(ge)||(oe=B(de),(O&&l(oe)?oe.some(function(be){return Ai(be,M)}):Ai(oe,M))&&(Z.addKey(ge),L.push(de)))}switch(F.type){case"add":var xe=new Ot().addKeys(c.values?A.map(function(_e){return R(_e)}):A),Y=A.concat(c.values?L.filter(function(_e){return _e=R(_e),!xe.hasKey(_e)&&(xe.addKey(_e),!0)}):L.map(function(_e){return R(_e)}).filter(function(_e){return!xe.hasKey(_e)&&(xe.addKey(_e),!0)}));break;case"put":var ye=new Ot().addKeys(F.values.map(function(_e){return R(_e)}));Y=A.filter(function(_e){return!ye.hasKey(c.values?R(_e):_e)}).concat(c.values?L:L.map(function(_e){return R(_e)}));break;case"delete":var ve=new Ot().addKeys(F.keys);Y=A.filter(function(_e){return!ve.hasKey(c.values?R(_e):_e)});break;case"deleteRange":var ke=F.range;Y=A.filter(function(_e){return!Ai(R(_e),ke)})}return Y},a);return V===a?a:(V.sort(function(A,F){return Re(I(A),I(F))||Re(R(A),R(F))}),c.limit&&c.limit<1/0&&(V.length>c.limit?V.length=c.limit:a.length===c.limit&&V.length<c.limit&&(w.dirty=!0)),x?Object.freeze(V):V)}function tl(a,c){return Re(a.lower,c.lower)===0&&Re(a.upper,c.upper)===0&&!!a.lowerOpen==!!c.lowerOpen&&!!a.upperOpen==!!c.upperOpen}function Mh(a,c){return function(f,m,w,x){if(f===void 0)return m!==void 0?-1:0;if(m===void 0)return 1;if((m=Re(f,m))===0){if(w&&x)return 0;if(w)return 1;if(x)return-1}return m}(a.lower,c.lower,a.lowerOpen,c.lowerOpen)<=0&&0<=function(f,m,w,x){if(f===void 0)return m!==void 0?1:0;if(m===void 0)return-1;if((m=Re(f,m))===0){if(w&&x)return 0;if(w)return-1;if(x)return 1}return m}(a.upper,c.upper,a.upperOpen,c.upperOpen)}function Ah(a,c,f,m){a.subscribers.add(f),m.addEventListener("abort",function(){var w,x;a.subscribers.delete(f),a.subscribers.size===0&&(w=a,x=c,setTimeout(function(){w.subscribers.size===0&&J(x,w)},3e3))})}var $h={stack:"dbcore",level:0,name:"Cache",create:function(a){var c=a.schema.name;return r(r({},a),{transaction:function(f,m,w){var x,_,O=a.transaction(f,m,w);return m==="readwrite"&&(_=(x=new AbortController).signal,w=function(M){return function(){if(x.abort(),m==="readwrite"){for(var R=new Set,B=0,I=f;B<I.length;B++){var V=I[B],A=rr["idb://".concat(c,"/").concat(V)];if(A){var F=a.table(V),Y=A.optimisticOps.filter(function(_e){return _e.trans===O});if(O._explicit&&M&&O.mutatedParts)for(var L=0,Z=Object.values(A.queries.query);L<Z.length;L++)for(var re=0,oe=(xe=Z[L]).slice();re<oe.length;re++)Ci((ye=oe[re]).obsSet,O.mutatedParts)&&(J(xe,ye),ye.subscribers.forEach(function(_e){return R.add(_e)}));else if(0<Y.length){A.optimisticOps=A.optimisticOps.filter(function(_e){return _e.trans!==O});for(var de=0,ge=Object.values(A.queries.query);de<ge.length;de++)for(var xe,ye,ve,ke=0,be=(xe=ge[de]).slice();ke<be.length;ke++)(ye=be[ke]).res!=null&&O.mutatedParts&&(M&&!ye.dirty?(ve=Object.isFrozen(ye.res),ve=el(ye.res,ye.req,Y,F,ye,ve),ye.dirty?(J(xe,ye),ye.subscribers.forEach(function(_e){return R.add(_e)})):ve!==ye.res&&(ye.res=ve,ye.promise=le.resolve({result:ve}))):(ye.dirty&&J(xe,ye),ye.subscribers.forEach(function(_e){return R.add(_e)})))}}}R.forEach(function(_e){return _e()})}}},O.addEventListener("abort",w(!1),{signal:_}),O.addEventListener("error",w(!1),{signal:_}),O.addEventListener("complete",w(!0),{signal:_})),O},table:function(f){var m=a.table(f),w=m.schema.primaryKey;return r(r({},m),{mutate:function(x){var _=ee.trans;if(w.outbound||_.db._options.cache==="disabled"||_.explicit||_.idbtrans.mode!=="readwrite")return m.mutate(x);var O=rr["idb://".concat(c,"/").concat(f)];return O?(_=m.mutate(x),x.type!=="add"&&x.type!=="put"||!(50<=x.values.length||Mi(w,x).some(function(M){return M==null}))?(O.optimisticOps.push(x),x.mutatedParts&&aa(x.mutatedParts),_.then(function(M){0<M.numFailures&&(J(O.optimisticOps,x),(M=Jc(0,x,M))&&O.optimisticOps.push(M),x.mutatedParts&&aa(x.mutatedParts))}),_.catch(function(){J(O.optimisticOps,x),x.mutatedParts&&aa(x.mutatedParts)})):_.then(function(M){var R=Jc(0,r(r({},x),{values:x.values.map(function(B,I){var V;return M.failures[I]?B:(B=(V=w.keyPath)!==null&&V!==void 0&&V.includes(".")?ue(B):r({},B),H(B,w.keyPath,M.results[I]),B)})}),M);O.optimisticOps.push(R),queueMicrotask(function(){return x.mutatedParts&&aa(x.mutatedParts)})}),_):m.mutate(x)},query:function(x){if(!Zc(ee,m)||!Qc("query",x))return m.query(x);var _=((R=ee.trans)===null||R===void 0?void 0:R.db._options.cache)==="immutable",I=ee,O=I.requery,M=I.signal,R=function(F,Y,L,Z){var re=rr["idb://".concat(F,"/").concat(Y)];if(!re)return[];if(!(Y=re.queries[L]))return[null,!1,re,null];var oe=Y[(Z.query?Z.query.index.name:null)||""];if(!oe)return[null,!1,re,null];switch(L){case"query":var de=oe.find(function(ge){return ge.req.limit===Z.limit&&ge.req.values===Z.values&&tl(ge.req.query.range,Z.query.range)});return de?[de,!0,re,oe]:[oe.find(function(ge){return("limit"in ge.req?ge.req.limit:1/0)>=Z.limit&&(!Z.values||ge.req.values)&&Mh(ge.req.query.range,Z.query.range)}),!1,re,oe];case"count":return de=oe.find(function(ge){return tl(ge.req.query.range,Z.query.range)}),[de,!!de,re,oe]}}(c,f,"query",x),B=R[0],I=R[1],V=R[2],A=R[3];return B&&I?B.obsSet=x.obsSet:(I=m.query(x).then(function(F){var Y=F.result;if(B&&(B.res=Y),_){for(var L=0,Z=Y.length;L<Z;++L)Object.freeze(Y[L]);Object.freeze(Y)}else F.result=ue(Y);return F}).catch(function(F){return A&&B&&J(A,B),Promise.reject(F)}),B={obsSet:x.obsSet,promise:I,subscribers:new Set,type:"query",req:x,dirty:!1},A?A.push(B):(A=[B],(V=V||(rr["idb://".concat(c,"/").concat(f)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[x.query.index.name||""]=A)),Ah(B,A,O,M),B.promise.then(function(F){return{result:el(F.result,x,V==null?void 0:V.optimisticOps,m,B,_)}})}})}})}};function sa(a,c){return new Proxy(a,{get:function(f,m,w){return m==="db"?c:Reflect.get(f,m,w)}})}var _n=(ht.prototype.version=function(a){if(isNaN(a)||a<.1)throw new he.Type("Given version is not a positive number");if(a=Math.round(10*a)/10,this.idbdb||this._state.isBeingOpened)throw new he.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var c=this._versions,f=c.filter(function(m){return m._cfg.version===a})[0];return f||(f=new this.Version(a),c.push(f),c.sort(_h),f.stores({}),this._state.autoSchema=!1,f)},ht.prototype._whenReady=function(a){var c=this;return this.idbdb&&(this._state.openComplete||ee.letThrough||this._vip)?a():new le(function(f,m){if(c._state.openComplete)return m(new he.DatabaseClosed(c._state.dbOpenError));if(!c._state.isBeingOpened){if(!c._state.autoOpen)return void m(new he.DatabaseClosed);c.open().catch(Oe)}c._state.dbReadyPromise.then(f,m)}).then(a)},ht.prototype.use=function(a){var c=a.stack,f=a.create,m=a.level,w=a.name;return w&&this.unuse({stack:c,name:w}),a=this._middlewares[c]||(this._middlewares[c]=[]),a.push({stack:c,create:f,level:m??10,name:w}),a.sort(function(x,_){return x.level-_.level}),this},ht.prototype.unuse=function(a){var c=a.stack,f=a.name,m=a.create;return c&&this._middlewares[c]&&(this._middlewares[c]=this._middlewares[c].filter(function(w){return m?w.create!==m:!!f&&w.name!==f})),this},ht.prototype.open=function(){var a=this;return ft(ce,function(){return Dh(a)})},ht.prototype._close=function(){var a=this._state,c=Ln.indexOf(this);if(0<=c&&Ln.splice(c,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}a.isBeingOpened||(a.dbReadyPromise=new le(function(f){a.dbReadyResolve=f}),a.openCanceller=new le(function(f,m){a.cancelOpen=m}))},ht.prototype.close=function(f){var c=(f===void 0?{disableAutoOpen:!0}:f).disableAutoOpen,f=this._state;c?(f.isBeingOpened&&f.cancelOpen(new he.DatabaseClosed),this._close(),f.autoOpen=!1,f.dbOpenError=new he.DatabaseClosed):(this._close(),f.autoOpen=this._options.autoOpen||f.isBeingOpened,f.openComplete=!1,f.dbOpenError=null)},ht.prototype.delete=function(a){var c=this;a===void 0&&(a={disableAutoOpen:!0});var f=0<arguments.length&&typeof arguments[0]!="object",m=this._state;return new le(function(w,x){function _(){c.close(a);var O=c._deps.indexedDB.deleteDatabase(c.name);O.onsuccess=Ze(function(){var M,R,B;M=c._deps,R=c.name,B=M.indexedDB,M=M.IDBKeyRange,_i(B)||R===kr||Ei(B,M).delete(R).catch(Oe),w()}),O.onerror=mn(x),O.onblocked=c._fireOnBlocked}if(f)throw new he.InvalidArgument("Invalid closeOptions argument to db.delete()");m.isBeingOpened?m.dbReadyPromise.then(_):_()})},ht.prototype.backendDB=function(){return this.idbdb},ht.prototype.isOpen=function(){return this.idbdb!==null},ht.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"},ht.prototype.hasFailed=function(){return this._state.dbOpenError!==null},ht.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(ht.prototype,"tables",{get:function(){var a=this;return s(this._allTables).map(function(c){return a._allTables[c]})},enumerable:!1,configurable:!0}),ht.prototype.transaction=function(){var a=(function(c,f,m){var w=arguments.length;if(w<2)throw new he.InvalidArgument("Too few arguments");for(var x=new Array(w-1);--w;)x[w-1]=arguments[w];return m=x.pop(),[c,ne(x),m]}).apply(this,arguments);return this._transaction.apply(this,a)},ht.prototype._transaction=function(a,c,f){var m=this,w=ee.trans;w&&w.db===this&&a.indexOf("!")===-1||(w=null);var x,_,O=a.indexOf("?")!==-1;a=a.replace("!","").replace("?","");try{if(_=c.map(function(R){if(R=R instanceof m.Table?R.name:R,typeof R!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return R}),a=="r"||a===Ur)x=Ur;else{if(a!="rw"&&a!=Xr)throw new he.InvalidArgument("Invalid transaction mode: "+a);x=Xr}if(w){if(w.mode===Ur&&x===Xr){if(!O)throw new he.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");w=null}w&&_.forEach(function(R){if(w&&w.storeNames.indexOf(R)===-1){if(!O)throw new he.SubTransaction("Table "+R+" not included in parent transaction.");w=null}}),O&&w&&!w.active&&(w=null)}}catch(R){return w?w._promise(null,function(B,I){I(R)}):rt(R)}var M=(function R(B,I,V,A,F){return le.resolve().then(function(){var Y=ee.transless||ee,L=B._createTransaction(I,V,B._dbSchema,A);if(L.explicit=!0,Y={trans:L,transless:Y},A)L.idbtrans=A.idbtrans;else try{L.create(),L.idbtrans._explicit=!0,B._state.PR1398_maxLoop=3}catch(oe){return oe.name===Ce.InvalidState&&B.isOpen()&&0<--B._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),B.close({disableAutoOpen:!1}),B.open().then(function(){return R(B,I,V,null,F)})):rt(oe)}var Z,re=se(F);return re&&Jt(),Y=le.follow(function(){var oe;(Z=F.call(L,L))&&(re?(oe=Yt.bind(null,null),Z.then(oe,oe)):typeof Z.next=="function"&&typeof Z.throw=="function"&&(Z=Ii(Z)))},Y),(Z&&typeof Z.then=="function"?le.resolve(Z).then(function(oe){return L.active?oe:rt(new he.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Y.then(function(){return Z})).then(function(oe){return A&&L._resolve(),L._completion.then(function(){return oe})}).catch(function(oe){return L._reject(oe),rt(oe)})})}).bind(null,this,x,_,w,f);return w?w._promise(x,M,"lock"):ee.trans?ft(ee.transless,function(){return m._whenReady(M)}):this._whenReady(M)},ht.prototype.table=function(a){if(!p(this._allTables,a))throw new he.InvalidTable("Table ".concat(a," does not exist"));return this._allTables[a]},ht);function ht(a,c){var f=this;this._middlewares={},this.verno=0;var m=ht.dependencies;this._options=c=r({addons:ht.addons,autoOpen:!0,indexedDB:m.indexedDB,IDBKeyRange:m.IDBKeyRange,cache:"cloned"},c),this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange},m=c.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var w,x,_,O,M,R={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Oe,dbReadyPromise:null,cancelOpen:Oe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:c.autoOpen};R.dbReadyPromise=new le(function(I){R.dbReadyResolve=I}),R.openCanceller=new le(function(I,V){R.cancelOpen=V}),this._state=R,this.name=a,this.on=Gr(this,"populate","blocked","versionchange","close",{ready:[vt,Oe]}),this.on.ready.subscribe=P(this.on.ready.subscribe,function(I){return function(V,A){ht.vip(function(){var F,Y=f._state;Y.openComplete?(Y.dbOpenError||le.resolve().then(V),A&&I(V)):Y.onReadyBeingFired?(Y.onReadyBeingFired.push(V),A&&I(V)):(I(V),F=f,A||I(function L(){F.on.ready.unsubscribe(V),F.on.ready.unsubscribe(L)}))})}}),this.Collection=(w=this,Zr(vh.prototype,function(Z,L){this.db=w;var A=qo,F=null;if(L)try{A=L()}catch(re){F=re}var Y=Z._ctx,L=Y.table,Z=L.hook.reading.fire;this._ctx={table:L,index:Y.index,isPrimKey:!Y.index||L.schema.primKey.keyPath&&Y.index===L.schema.primKey.name,range:A,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:F,or:Y.or,valueMapper:Z!==Je?Z:null}})),this.Table=(x=this,Zr($c.prototype,function(I,V,A){this.db=x,this._tx=A,this.name=I,this.schema=V,this.hook=x._allTables[I]?x._allTables[I].hook:Gr(null,{creating:[Ke,Oe],reading:[Ae,Je],updating:[Te,Oe],deleting:[ze,Oe]})})),this.Transaction=(_=this,Zr(xh.prototype,function(I,V,A,F,Y){var L=this;this.db=_,this.mode=I,this.storeNames=V,this.schema=A,this.chromeTransactionDurability=F,this.idbtrans=null,this.on=Gr(this,"complete","error","abort"),this.parent=Y||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new le(function(Z,re){L._resolve=Z,L._reject=re}),this._completion.then(function(){L.active=!1,L.on.complete.fire()},function(Z){var re=L.active;return L.active=!1,L.on.error.fire(Z),L.parent?L.parent._reject(Z):re&&L.idbtrans&&L.idbtrans.abort(),rt(Z)})})),this.Version=(O=this,Zr(Ch.prototype,function(I){this.db=O,this._cfg={version:I,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(M=this,Zr(Bc.prototype,function(I,V,A){if(this.db=M,this._ctx={table:I,index:V===":id"?null:V,or:A},this._cmp=this._ascending=Re,this._descending=function(F,Y){return Re(Y,F)},this._max=function(F,Y){return 0<Re(F,Y)?F:Y},this._min=function(F,Y){return Re(F,Y)<0?F:Y},this._IDBKeyRange=M._deps.IDBKeyRange,!this._IDBKeyRange)throw new he.MissingAPI})),this.on("versionchange",function(I){0<I.newVersion?console.warn("Another connection wants to upgrade database '".concat(f.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(f.name,"'. Closing db now to resume the delete request.")),f.close({disableAutoOpen:!1})}),this.on("blocked",function(I){!I.newVersion||I.newVersion<I.oldVersion?console.warn("Dexie.delete('".concat(f.name,"') was blocked")):console.warn("Upgrade '".concat(f.name,"' blocked by other connection holding version ").concat(I.oldVersion/10))}),this._maxKey=to(c.IDBKeyRange),this._createTransaction=function(I,V,A,F){return new f.Transaction(I,V,A,f._options.chromeTransactionDurability,F)},this._fireOnBlocked=function(I){f.on("blocked").fire(I),Ln.filter(function(V){return V.name===f.name&&V!==f&&!V._state.vcFired}).map(function(V){return V.on("versionchange").fire(I)})},this.use(Ih),this.use($h),this.use(Ph),this.use(Oh),this.use(jh);var B=new Proxy(this,{get:function(I,V,A){if(V==="_vip")return!0;if(V==="table")return function(Y){return sa(f.table(Y),B)};var F=Reflect.get(I,V,A);return F instanceof $c?sa(F,B):V==="tables"?F.map(function(Y){return sa(Y,B)}):V==="_createTransaction"?function(){return sa(F.apply(this,arguments),B)}:F}});this.vip=B,m.forEach(function(I){return I(f)})}var ca,Xt=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Rh=($i.prototype.subscribe=function(a,c,f){return this._subscribe(a&&typeof a!="function"?a:{next:a,error:c,complete:f})},$i.prototype[Xt]=function(){return this},$i);function $i(a){this._subscribe=a}try{ca={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{ca={indexedDB:null,IDBKeyRange:null}}function nl(a){var c,f=!1,m=new Rh(function(w){var x=se(a),_,O=!1,M={},R={},B={get closed(){return O},unsubscribe:function(){O||(O=!0,_&&_.abort(),I&&Wn.storagemutated.unsubscribe(A))}};w.start&&w.start(B);var I=!1,V=function(){return kn(F)},A=function(Y){oa(M,Y),Ci(R,M)&&V()},F=function(){var Y,L,Z;!O&&ca.indexedDB&&(M={},Y={},_&&_.abort(),_=new AbortController,Z=function(re){var oe=gt();try{x&&Jt();var de=Wt(a,re);return de=x?de.finally(Yt):de}finally{oe&&ln()}}(L={subscr:Y,signal:_.signal,requery:V,querier:a,trans:null}),Promise.resolve(Z).then(function(re){f=!0,c=re,O||L.signal.aborted||(M={},function(oe){for(var de in oe)if(p(oe,de))return;return 1}(R=Y)||I||(Wn(eo,A),I=!0),kn(function(){return!O&&w.next&&w.next(re)}))},function(re){f=!1,["DatabaseClosedError","AbortError"].includes(re==null?void 0:re.name)||O||kn(function(){O||w.error&&w.error(re)})}))};return setTimeout(V,0),B});return m.hasValue=function(){return f},m.getValue=function(){return c},m}var or=_n;function Ri(a){var c=Bn;try{Bn=!0,Wn.storagemutated.fire(a),ji(a,!0)}finally{Bn=c}}v(or,r(r({},Ge),{delete:function(a){return new or(a,{addons:[]}).delete()},exists:function(a){return new or(a,{addons:[]}).open().then(function(c){return c.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return c=or.dependencies,f=c.indexedDB,c=c.IDBKeyRange,(_i(f)?Promise.resolve(f.databases()).then(function(m){return m.map(function(w){return w.name}).filter(function(w){return w!==kr})}):Ei(f,c).toCollection().primaryKeys()).then(a)}catch{return rt(new he.MissingAPI)}var c,f},defineClass:function(){return function(a){u(this,a)}},ignoreTransaction:function(a){return ee.trans?ft(ee.transless,a):a()},vip:Ni,async:function(a){return function(){try{var c=Ii(a.apply(this,arguments));return c&&typeof c.then=="function"?c:le.resolve(c)}catch(f){return rt(f)}}},spawn:function(a,c,f){try{var m=Ii(a.apply(f,c||[]));return m&&typeof m.then=="function"?m:le.resolve(m)}catch(w){return rt(w)}},currentTransaction:{get:function(){return ee.trans||null}},waitFor:function(a,c){return c=le.resolve(typeof a=="function"?or.ignoreTransaction(a):a).timeout(c||6e4),ee.trans?ee.trans.waitFor(c):c},Promise:le,debug:{get:function(){return dt},set:function(a){Pt(a)}},derive:S,extend:u,props:v,override:P,Events:Gr,on:Wn,liveQuery:nl,extendObservabilitySet:oa,getByKeyPath:q,setByKeyPath:H,delByKeyPath:function(a,c){typeof c=="string"?H(a,c,void 0):"length"in c&&[].map.call(c,function(f){H(a,f,void 0)})},shallowClone:te,deepClone:ue,getObjectDiff:Pi,cmp:Re,asap:X,minKey:-1/0,addons:[],connections:Ln,errnames:Ce,dependencies:ca,cache:rr,semVer:"4.0.10",version:"4.0.10".split(".").map(function(a){return parseInt(a)}).reduce(function(a,c,f){return a+c/Math.pow(10,2*f)})})),or.maxKey=to(or.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Wn(eo,function(a){Bn||(a=new CustomEvent(yi,{detail:a}),Bn=!0,dispatchEvent(a),Bn=!1)}),addEventListener(yi,function(a){a=a.detail,Bn||Ri(a)}));var Tr,Bn=!1,rl=function(){};return typeof BroadcastChannel<"u"&&((rl=function(){(Tr=new BroadcastChannel(yi)).onmessage=function(a){return a.data&&Ri(a.data)}})(),typeof Tr.unref=="function"&&Tr.unref(),Wn(eo,function(a){Bn||Tr.postMessage(a)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(a){if(!_n.disableBfCache&&a.persisted){dt&&console.debug("Dexie: handling persisted pagehide"),Tr!=null&&Tr.close();for(var c=0,f=Ln;c<f.length;c++)f[c].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(a){!_n.disableBfCache&&a.persisted&&(dt&&console.debug("Dexie: handling persisted pageshow"),rl(),Ri({all:new Ot(-1/0,[[]])}))})),le.rejectionMapper=function(a,c){return!a||a instanceof fe||a instanceof TypeError||a instanceof SyntaxError||!a.name||!Pe[a.name]?a:(c=new Pe[a.name](c||a.message,a),"stack"in a&&k(c,"stack",{get:function(){return this.inner.stack}}),c)},Pt(dt),r(_n,Object.freeze({__proto__:null,Dexie:_n,liveQuery:nl,Entity:Ko,cmp:Re,PropModSymbol:En,PropModification:Qr,replacePrefix:function(a,c){return new Qr({replacePrefix:[a,c]})},add:function(a){return new Qr({add:a})},remove:function(a){return new Qr({remove:a})},default:_n,RangeSet:Ot,mergeRanges:oo,rangesOverlap:qc}),{default:_n}),_n})})(df);var gw=df.exports;const ks=Zs(gw),Gl=Symbol.for("Dexie"),Es=globalThis[Gl]||(globalThis[Gl]=ks);if(ks.semVer!==Es.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ks.semVer} and ${Es.semVer}`);class yw extends Es{constructor(){super("TemporalDB"),this.version(3).stores({workflows:"[workflowId+runId],[parentWorkflowId+parentWorkflowRunId], parentWorkflowId, parentWorkflowRunId",activities:"[activityId+workflowId+workflowRunId],[workflowId+workflowRunId], workflowId, workflowRunId",settings:"id"})}}const wn=new yw;async function _s(e){try{await wn.workflows.put(e),console.debug("Workflow added successfully:",e)}catch(t){console.error("Failed to add workflow:",t,e)}}async function Ro(e,t){if(t)try{const n=await wn.workflows.get({workflowId:e,runId:t});return console.debug("Retrieved Workflow:",n),n}catch(n){console.error("Failed to retrieve workflow:",n);return}}async function vw(e,t){try{await wn.workflows.where({workflowId:e,runId:t}).delete(),console.debug(`Deleted Workflow with ID: ${e}`)}catch(n){console.error("Failed to delete workflow:",n)}}async function ff(e){try{await wn.activities.put(e),console.debug("Activity added successfully:",e)}catch(t){console.error("Failed to add activity:",t,e)}}async function ww(e,t,n){try{const r=await wn.activities.get({activityId:t,workflowId:e,workflowRunId:n});return console.debug("Retrieved Activity:",r),r}catch(r){console.error("Failed to retrieve activity:",r);return}}async function bw(e,t,n){try{await wn.activities.where({activityId:t,workflowId:e,workflowRunId:n}).delete(),console.debug(`Deleted Activity with ID: ${t}`)}catch(r){console.error("Failed to delete activity:",r)}}async function hf(e,t){try{return await wn.activities.where(["workflowId","workflowRunId"]).equals([e,t]).toArray()}catch(n){return console.error("Failed to retrieve activities by workflowId:",n),[]}}async function pc(e,t){try{return await wn.workflows.where(["parentWorkflowId","parentWorkflowRunId"]).equals([e,t]).toArray()}catch(n){return console.error("Failed to retrieve child workflows:",n),[]}}async function xw(e,t,n){if(!e)return[];const r=[];for(const o of e)if(o.type==="workflow"||o.type==="childWorkflow"){const i=await Ro(o.id,o.workflowRunId);i&&r.push(i)}else if(o.type==="activity"){const i=await ww(t,o.id,n);i&&r.push(i)}return r}async function Oo(e){try{const t=await wn.settings.get(e);return t==null?void 0:t.value}catch(t){console.error("Failed to retrieve setting:",t);return}}async function Ns(e,t){try{await wn.settings.put({id:e,value:t}),console.debug(`Setting ${e} updated successfully:`,t)}catch(n){console.error("Failed to update setting:",n)}}const zn={name:"default-queue",kind:pw.NORMAL},Sw=()=>{const e="demo-order-processing-wf-001",t="1",n=new Date().toISOString(),r=new Date(Date.parse(n)+6e4).toISOString(),o=new Date(Date.parse(n)+12e4).toISOString(),i=new Date(Date.parse(n)+18e4).toISOString(),s="1",l="2",u="3",d={orderId:"ORD-001",customer:{id:"CUST-123",name:"John Doe",email:"john.doe@example.com"},items:[{id:"ITEM-1",name:"Gaming Laptop",price:1299.99,quantity:1},{id:"ITEM-2",name:"Wireless Mouse",price:49.99,quantity:2}],totalAmount:1399.97,shippingAddress:{street:"123 Tech Lane",city:"San Francisco",state:"CA",zipCode:"94105"}},h=[{type:"workflow",namespace:"default",workflowId:e,runId:t,workflowType:"OrderProcessingWorkflow",status:"RUNNING",startTime:n,endTime:void 0,sortEventTime:n,taskQueue:zn,input:JSON.stringify(d),workflowTaskCompletedEventId:s,memo:{description:"Process customer order with validation and fulfillment",priority:"HIGH"}},{type:"childWorkflow",namespace:"default",workflowId:"demo-fulfillment-wf-001",runId:"2",workflowType:"OrderFulfillmentWorkflow",parentWorkflowId:e,parentWorkflowRunId:t,status:"RUNNING",startTime:n,endTime:void 0,sortEventTime:n,taskQueue:zn,workflowTaskCompletedEventId:l,input:JSON.stringify({orderId:d.orderId,items:d.items,shippingAddress:d.shippingAddress,warehouseId:"WH-SF-001"})},...Array(5).fill(null).map((v,y)=>({type:"childWorkflow",runId:`child_${y+1}`,namespace:"default",workflowId:`demo-shipping-wf-00${y+1}`,workflowType:"ShippingWorkflow",parentWorkflowId:"demo-fulfillment-wf-001",parentWorkflowRunId:"2",status:"RUNNING",startTime:n,endTime:void 0,sortEventTime:n,taskQueue:zn,workflowTaskCompletedEventId:u,input:JSON.stringify({packageId:`PKG-00${y+1}`,orderId:d.orderId,item:d.items[y%2],shippingAddress:d.shippingAddress,carrier:"FastShip",trackingPrefix:"FS"})}))],p=[{type:"activity",activityId:"validate-order-001",activityType:"ValidateOrderActivity",workflowId:e,workflowRunId:t,status:"COMPLETED",startTime:n,endTime:r,sortEventTime:r,taskQueue:zn,input:JSON.stringify({orderId:d.orderId,customerId:d.customer.id,items:d.items,totalAmount:d.totalAmount}),result:JSON.stringify({isValid:!0,validatedAt:n,checks:{inventory:!0,pricing:!0,customerStatus:"ACTIVE",fraudCheck:{passed:!0,score:.95,reasons:["Valid customer history","Normal order pattern"]}}}),workflowTaskCompletedEventId:s},{type:"activity",activityId:"process-payment-001",activityType:"ProcessPaymentActivity",workflowId:e,workflowRunId:t,status:"COMPLETED",startTime:r,endTime:o,sortEventTime:o,taskQueue:zn,input:JSON.stringify({orderId:d.orderId,amount:d.totalAmount,customerId:d.customer.id,paymentMethod:{type:"CREDIT_CARD",last4:"4242",brand:"Visa",expiryMonth:12,expiryYear:2025}}),result:JSON.stringify({transactionId:"TX-789012",status:"APPROVED",processedAt:r,paymentDetails:{authorizationCode:"AUTH123",avsResult:"Y",cvvResult:"M",processorResponse:"Approved"}}),workflowTaskCompletedEventId:s},{type:"activity",activityId:"inventory-check-001",activityType:"CheckInventoryActivity",workflowId:"demo-fulfillment-wf-001",workflowRunId:"2",status:"COMPLETED",startTime:o,endTime:i,sortEventTime:i,taskQueue:zn,input:JSON.stringify({warehouseId:"WH-SF-001",items:d.items,reservationDuration:"30m"}),result:JSON.stringify({available:!0,itemsAvailability:d.items.map(v=>({itemId:v.id,available:!0,quantity:v.quantity,location:"Zone-A12",binNumber:"BIN-456",reservationId:`RES-${v.id}`,expiresAt:new Date(Date.parse(i)+18e5).toISOString()}))}),workflowTaskCompletedEventId:l},{type:"activity",activityId:"prepare-shipment-001",activityType:"PrepareShipmentActivity",workflowId:"demo-fulfillment-wf-001",workflowRunId:"2",status:"FAILED",startTime:i,endTime:new Date(Date.parse(i)+3e4).toISOString(),sortEventTime:new Date(Date.parse(i)+3e4).toISOString(),taskQueue:zn,input:JSON.stringify({orderId:d.orderId,items:d.items,warehouseId:"WH-SF-001",packagingType:"STANDARD",packagingRequirements:{type:"BOX_MEDIUM",reinforced:!0,materials:["bubble_wrap","foam_padding"]}}),result:JSON.stringify({error:"PACKAGING_MATERIAL_UNAVAILABLE",message:"Required packaging material out of stock",details:{missingMaterials:["foam_padding"],availableAlternatives:["air_pillows"],nextRestockScheduled:new Date(Date.parse(n)+864e5).toISOString()},timestamp:i,errorCode:"PKG_001",severity:"MEDIUM"}),workflowTaskCompletedEventId:l},...Array(5).fill(null).map((v,y)=>({type:"activity",activityId:`process-shipping-00${y+1}`,activityType:"ProcessShippingActivity",workflowId:`demo-shipping-wf-00${y+1}`,workflowRunId:`child_${y+1}`,status:"RUNNING",startTime:new Date(Date.parse(i)+y*1e4).toISOString(),endTime:void 0,taskQueue:zn,sortEventTime:new Date(Date.parse(i)+y*1e4).toISOString(),input:JSON.stringify({packageId:`PKG-00${y+1}`,orderId:d.orderId,carrier:"FastShip",service:"NEXT_DAY",dimensions:{length:15,width:10,height:5,weight:2.5,unit:"IMPERIAL"},shippingAddress:d.shippingAddress,item:d.items[y%2],specialInstructions:"Handle with care",insurance:{required:!0,value:d.items[y%2].price}}),workflowTaskCompletedEventId:u}))];return{workflows:h,activities:p}},kw=async()=>{const e="demo-order-processing-wf-001",t="1";try{const{workflows:n,activities:r}=Sw();for(const o of n)await _s(o);for(const o of r)await ff(o);return console.log("Demo data stored successfully"),{rootWorkflowId:e,rootWorkflowRunId:t}}catch(n){throw console.error("Error storing demo data:",n),n}};var Ew=Object.defineProperty,_w=(e,t,n)=>t in e?Ew(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zi=(e,t,n)=>(_w(e,typeof t!="symbol"?t+"":t,n),n);let Nw=class{constructor(){Zi(this,"current",this.detect()),Zi(this,"handoffState","pending"),Zi(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},gr=new Nw;function Ja(e){return gr.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function ei(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function er(){let e=[],t={addEventListener(n,r,o,i){return n.addEventListener(r,o,i),t.add(()=>n.removeEventListener(r,o,i))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return ei(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,o){let i=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:o}),this.add(()=>{Object.assign(n.style,{[r]:i})})},group(n){let r=er();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let o of e.splice(r,1))o()}},dispose(){for(let n of e.splice(0))n()}};return t}function gc(){let[e]=b.useState(er);return b.useEffect(()=>()=>e.dispose(),[e]),e}let Ft=(e,t)=>{gr.isServer?b.useEffect(e,t):b.useLayoutEffect(e,t)};function br(e){let t=b.useRef(e);return Ft(()=>{t.current=e},[e]),t}let lt=function(e){let t=br(e);return W.useCallback((...n)=>t.current(...n),[t])},Tw=b.createContext(void 0);function Cw(){return b.useContext(Tw)}function Ts(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Qn(e,t,...n){if(e in t){let o=t[e];return typeof o=="function"?o(...n):o}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(o=>`"${o}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Qn),r}var La=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(La||{}),Gn=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Gn||{});function Qt(){let e=Ow();return b.useCallback(t=>Dw({mergeRefs:e,...t}),[e])}function Dw({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:o,visible:i=!0,name:s,mergeRefs:l}){l=l??jw;let u=mf(t,e);if(i)return wa(u,n,r,s,l);let d=o??0;if(d&2){let{static:h=!1,...p}=u;if(h)return wa(p,n,r,s,l)}if(d&1){let{unmount:h=!0,...p}=u;return Qn(h?0:1,{0(){return null},1(){return wa({...p,hidden:!0,style:{display:"none"}},n,r,s,l)}})}return wa(u,n,r,s,l)}function wa(e,t={},n,r,o){let{as:i=n,children:s,refName:l="ref",...u}=Qi(e,["unmount","static"]),d=e.ref!==void 0?{[l]:e.ref}:{},h=typeof s=="function"?s(t):s;"className"in u&&u.className&&typeof u.className=="function"&&(u.className=u.className(t)),u["aria-labelledby"]&&u["aria-labelledby"]===u.id&&(u["aria-labelledby"]=void 0);let p={};if(t){let v=!1,y=[];for(let[k,S]of Object.entries(t))typeof S=="boolean"&&(v=!0),S===!0&&y.push(k.replace(/([A-Z])/g,N=>`-${N.toLowerCase()}`));if(v){p["data-headlessui-state"]=y.join(" ");for(let k of y)p[`data-${k}`]=""}}if(i===b.Fragment&&(Object.keys(sr(u)).length>0||Object.keys(sr(p)).length>0))if(!b.isValidElement(h)||Array.isArray(h)&&h.length>1){if(Object.keys(sr(u)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(sr(u)).concat(Object.keys(sr(p))).map(v=>`  - ${v}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(v=>`  - ${v}`).join(`
`)].join(`
`))}else{let v=h.props,y=v==null?void 0:v.className,k=typeof y=="function"?(...T)=>Ts(y(...T),u.className):Ts(y,u.className),S=k?{className:k}:{},N=mf(h.props,sr(Qi(u,["ref"])));for(let T in p)T in N&&delete p[T];return b.cloneElement(h,Object.assign({},N,p,d,{ref:o(Iw(h),d.ref)},S))}return b.createElement(i,Object.assign({},Qi(u,["ref"]),i!==b.Fragment&&d,i!==b.Fragment&&p),h)}function Ow(){let e=b.useRef([]),t=b.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function jw(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function mf(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let o in r)o.startsWith("on")&&typeof r[o]=="function"?(n[o]!=null||(n[o]=[]),n[o].push(r[o])):t[o]=r[o];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[o=>{var i;return(i=o==null?void 0:o.preventDefault)==null?void 0:i.call(o)}]);for(let r in n)Object.assign(t,{[r](o,...i){let s=n[r];for(let l of s){if((o instanceof Event||(o==null?void 0:o.nativeEvent)instanceof Event)&&o.defaultPrevented)return;l(o,...i)}}});return t}function zt(e){var t;return Object.assign(b.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function sr(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Qi(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function Iw(e){return W.version.split(".")[0]>="19"?e.props.ref:e.ref}let Pw="span";var Fa=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Fa||{});function Mw(e,t){var n;let{features:r=1,...o}=e,i={ref:t,"aria-hidden":(r&2)===2?!0:(n=o["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Qt()({ourProps:i,theirProps:o,slot:{},defaultTag:Pw,name:"Hidden"})}let Cs=zt(Mw),pf=Symbol();function Aw(e,t=!0){return Object.assign(e,{[pf]:t})}function bn(...e){let t=b.useRef(e);b.useEffect(()=>{t.current=e},[e]);let n=lt(r=>{for(let o of t.current)o!=null&&(typeof o=="function"?o(r):o.current=r)});return e.every(r=>r==null||(r==null?void 0:r[pf]))?void 0:n}let yc=b.createContext(null);yc.displayName="DescriptionContext";function gf(){let e=b.useContext(yc);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,gf),t}return e}function $w(){let[e,t]=b.useState([]);return[e.length>0?e.join(" "):void 0,b.useMemo(()=>function(n){let r=lt(i=>(t(s=>[...s,i]),()=>t(s=>{let l=s.slice(),u=l.indexOf(i);return u!==-1&&l.splice(u,1),l}))),o=b.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return W.createElement(yc.Provider,{value:o},n.children)},[t])]}let Rw="p";function Lw(e,t){let n=b.useId(),r=Cw(),{id:o=`headlessui-description-${n}`,...i}=e,s=gf(),l=bn(t);Ft(()=>s.register(o),[o,s.register]);let u=r||!1,d=b.useMemo(()=>({...s.slot,disabled:u}),[s.slot,u]),h={ref:l,...s.props,id:o};return Qt()({ourProps:h,theirProps:i,slot:d,defaultTag:Rw,name:s.name||"Description"})}let Fw=zt(Lw),Ww=Object.assign(Fw,{});var yf=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(yf||{});let Bw=b.createContext(()=>{});function Hw({value:e,children:t}){return W.createElement(Bw.Provider,{value:e},t)}let zw=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};function vf(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(o){return r.add(o),()=>r.delete(o)},dispatch(o,...i){let s=t[o].call(n,...i);s&&(n=s,r.forEach(l=>l()))}}}function wf(e){return b.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}let Yw=new zw(()=>vf(()=>[],{ADD(e){return this.includes(e)?this:[...this,e]},REMOVE(e){let t=this.indexOf(e);if(t===-1)return this;let n=this.slice();return n.splice(t,1),n}}));function Yr(e,t){let n=Yw.get(t),r=b.useId(),o=wf(n);if(Ft(()=>{if(e)return n.dispatch("ADD",r),()=>n.dispatch("REMOVE",r)},[n,e]),!e)return!1;let i=o.indexOf(r),s=o.length;return i===-1&&(i=s,s+=1),i===s-1}let Ds=new Map,wo=new Map;function Zl(e){var t;let n=(t=wo.get(e))!=null?t:0;return wo.set(e,n+1),n!==0?()=>Ql(e):(Ds.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Ql(e))}function Ql(e){var t;let n=(t=wo.get(e))!=null?t:1;if(n===1?wo.delete(e):wo.set(e,n-1),n!==1)return;let r=Ds.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,Ds.delete(e))}function Vw(e,{allowed:t,disallowed:n}={}){let r=Yr(e,"inert-others");Ft(()=>{var o,i;if(!r)return;let s=er();for(let u of(o=n==null?void 0:n())!=null?o:[])u&&s.add(Zl(u));let l=(i=t==null?void 0:t())!=null?i:[];for(let u of l){if(!u)continue;let d=Ja(u);if(!d)continue;let h=u.parentElement;for(;h&&h!==d.body;){for(let p of h.children)l.some(v=>p.contains(v))||s.add(Zl(p));h=h.parentElement}}return s.dispose},[r,t,n])}function qw(e,t,n){let r=br(o=>{let i=o.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&n()});b.useEffect(()=>{if(!e)return;let o=t===null?null:t instanceof HTMLElement?t:t.current;if(!o)return;let i=er();if(typeof ResizeObserver<"u"){let s=new ResizeObserver(()=>r.current(o));s.observe(o),i.add(()=>s.disconnect())}if(typeof IntersectionObserver<"u"){let s=new IntersectionObserver(()=>r.current(o));s.observe(o),i.add(()=>s.disconnect())}return()=>i.dispose()},[t,r,e])}let Wa=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),Kw=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Cn=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(Cn||{}),Os=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Os||{}),Uw=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Uw||{});function Xw(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Wa)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function Gw(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Kw)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var bf=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(bf||{});function Zw(e,t=0){var n;return e===((n=Ja(e))==null?void 0:n.body)?!1:Qn(t,{0(){return e.matches(Wa)},1(){let r=e;for(;r!==null;){if(r.matches(Wa))return!0;r=r.parentElement}return!1}})}var Qw=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Qw||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function jn(e){e==null||e.focus({preventScroll:!0})}let Jw=["textarea","input"].join(",");function eb(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,Jw))!=null?n:!1}function tb(e,t=n=>n){return e.slice().sort((n,r)=>{let o=t(n),i=t(r);if(o===null||i===null)return 0;let s=o.compareDocumentPosition(i);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function bo(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:o=[]}={}){let i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,s=Array.isArray(e)?n?tb(e):e:t&64?Gw(e):Xw(e);o.length>0&&s.length>1&&(s=s.filter(y=>!o.some(k=>k!=null&&"current"in k?(k==null?void 0:k.current)===y:k===y))),r=r??i.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,s.indexOf(r))-1;if(t&4)return Math.max(0,s.indexOf(r))+1;if(t&8)return s.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=t&32?{preventScroll:!0}:{},h=0,p=s.length,v;do{if(h>=p||h+p<=0)return 0;let y=u+h;if(t&16)y=(y+p)%p;else{if(y<0)return 3;if(y>=p)return 1}v=s[y],v==null||v.focus(d),h+=l}while(v!==i.activeElement);return t&6&&eb(v)&&v.select(),2}function xf(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function nb(){return/Android/gi.test(window.navigator.userAgent)}function rb(){return xf()||nb()}function uo(e,t,n,r){let o=br(n);b.useEffect(()=>{if(!e)return;function i(s){o.current(s)}return document.addEventListener(t,i,r),()=>document.removeEventListener(t,i,r)},[e,t,r])}function Sf(e,t,n,r){let o=br(n);b.useEffect(()=>{if(!e)return;function i(s){o.current(s)}return window.addEventListener(t,i,r),()=>window.removeEventListener(t,i,r)},[e,t,r])}const Jl=30;function ob(e,t,n){let r=Yr(e,"outside-click"),o=br(n),i=b.useCallback(function(u,d){if(u.defaultPrevented)return;let h=d(u);if(h===null||!h.getRootNode().contains(h)||!h.isConnected)return;let p=function v(y){return typeof y=="function"?v(y()):Array.isArray(y)||y instanceof Set?y:[y]}(t);for(let v of p)if(v!==null&&(v.contains(h)||u.composed&&u.composedPath().includes(v)))return;return!Zw(h,bf.Loose)&&h.tabIndex!==-1&&u.preventDefault(),o.current(u,h)},[o,t]),s=b.useRef(null);uo(r,"pointerdown",u=>{var d,h;s.current=((h=(d=u.composedPath)==null?void 0:d.call(u))==null?void 0:h[0])||u.target},!0),uo(r,"mousedown",u=>{var d,h;s.current=((h=(d=u.composedPath)==null?void 0:d.call(u))==null?void 0:h[0])||u.target},!0),uo(r,"click",u=>{rb()||s.current&&(i(u,()=>s.current),s.current=null)},!0);let l=b.useRef({x:0,y:0});uo(r,"touchstart",u=>{l.current.x=u.touches[0].clientX,l.current.y=u.touches[0].clientY},!0),uo(r,"touchend",u=>{let d={x:u.changedTouches[0].clientX,y:u.changedTouches[0].clientY};if(!(Math.abs(d.x-l.current.x)>=Jl||Math.abs(d.y-l.current.y)>=Jl))return i(u,()=>u.target instanceof HTMLElement?u.target:null)},!0),Sf(r,"blur",u=>i(u,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Lo(...e){return b.useMemo(()=>Ja(...e),[...e])}function kf(e,t,n,r){let o=br(n);b.useEffect(()=>{e=e??window;function i(s){o.current(s)}return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)},[e,t,r])}function ab(){let e;return{before({doc:t}){var n;let r=t.documentElement,o=(n=t.defaultView)!=null?n:window;e=Math.max(0,o.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,o=Math.max(0,r.clientWidth-r.offsetWidth),i=Math.max(0,e-o);n.style(r,"paddingRight",`${i}px`)}}}function ib(){return xf()?{before({doc:e,d:t,meta:n}){function r(o){return n.containers.flatMap(i=>i()).some(i=>i.contains(o))}t.microTask(()=>{var o;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=er();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let i=(o=window.scrollY)!=null?o:window.pageYOffset,s=null;t.addEventListener(e,"click",l=>{if(l.target instanceof HTMLElement)try{let u=l.target.closest("a");if(!u)return;let{hash:d}=new URL(u.href),h=e.querySelector(d);h&&!r(h)&&(s=h)}catch{}},!0),t.addEventListener(e,"touchstart",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let u=l.target;for(;u.parentElement&&r(u.parentElement);)u=u.parentElement;t.style(u,"overscrollBehavior","contain")}else t.style(l.target,"touchAction","none")}),t.addEventListener(e,"touchmove",l=>{if(l.target instanceof HTMLElement){if(l.target.tagName==="INPUT")return;if(r(l.target)){let u=l.target;for(;u.parentElement&&u.dataset.headlessuiPortal!==""&&!(u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth);)u=u.parentElement;u.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()}},{passive:!1}),t.add(()=>{var l;let u=(l=window.scrollY)!=null?l:window.pageYOffset;i!==u&&window.scrollTo(0,i),s&&s.isConnected&&(s.scrollIntoView({block:"nearest"}),s=null)})})}}:{}}function sb(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function cb(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let fr=vf(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:er(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:cb(n)},o=[ib(),ab(),sb()];o.forEach(({before:i})=>i==null?void 0:i(r)),o.forEach(({after:i})=>i==null?void 0:i(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});fr.subscribe(()=>{let e=fr.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",o=n.count!==0;(o&&!r||!o&&r)&&fr.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&fr.dispatch("TEARDOWN",n)}});function lb(e,t,n=()=>({containers:[]})){let r=wf(fr),o=t?r.get(t):void 0,i=o?o.count>0:!1;return Ft(()=>{if(!(!t||!e))return fr.dispatch("PUSH",t,n),()=>fr.dispatch("POP",t,n)},[e,t]),i}function ub(e,t,n=()=>[document.body]){let r=Yr(e,"scroll-lock");lb(r,t,o=>{var i;return{containers:[...(i=o.containers)!=null?i:[],n]}})}function db(e=0){let[t,n]=b.useState(e),r=b.useCallback(u=>n(u),[t]),o=b.useCallback(u=>n(d=>d|u),[t]),i=b.useCallback(u=>(t&u)===u,[t]),s=b.useCallback(u=>n(d=>d&~u),[n]),l=b.useCallback(u=>n(d=>d^u),[n]);return{flags:t,setFlag:r,addFlag:o,hasFlag:i,removeFlag:s,toggleFlag:l}}var fb={},eu,tu;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((eu=process==null?void 0:fb)==null?void 0:eu.NODE_ENV)==="test"&&typeof((tu=Element==null?void 0:Element.prototype)==null?void 0:tu.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var hb=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(hb||{});function mb(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function pb(e,t,n,r){let[o,i]=b.useState(n),{hasFlag:s,addFlag:l,removeFlag:u}=db(e&&o?3:0),d=b.useRef(!1),h=b.useRef(!1),p=gc();return Ft(()=>{var v;if(e){if(n&&i(!0),!t){n&&l(3);return}return(v=r==null?void 0:r.start)==null||v.call(r,n),gb(t,{inFlight:d,prepare(){h.current?h.current=!1:h.current=d.current,d.current=!0,!h.current&&(n?(l(3),u(4)):(l(4),u(2)))},run(){h.current?n?(u(3),l(4)):(u(4),l(3)):n?u(1):l(1)},done(){var y;h.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(d.current=!1,u(7),n||i(!1),(y=r==null?void 0:r.end)==null||y.call(r,n))}})}},[e,n,t,p]),e?[o,{closed:s(1),enter:s(2),leave:s(4),transition:s(2)||s(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function gb(e,{prepare:t,run:n,done:r,inFlight:o}){let i=er();return vb(e,{prepare:t,inFlight:o}),i.nextFrame(()=>{n(),i.requestAnimationFrame(()=>{i.add(yb(e,r))})}),i.dispose}function yb(e,t){var n,r;let o=er();if(!e)return o.dispose;let i=!1;o.add(()=>{i=!0});let s=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(l=>l instanceof CSSTransition))!=null?r:[];return s.length===0?(t(),o.dispose):(Promise.allSettled(s.map(l=>l.finished)).then(()=>{i||t()}),o.dispose)}function vb(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function vc(e,t){let n=b.useRef([]),r=lt(e);b.useEffect(()=>{let o=[...n.current];for(let[i,s]of t.entries())if(n.current[i]!==s){let l=r(t,o);return n.current=t,l}},[r,...t])}let ti=b.createContext(null);ti.displayName="OpenClosedContext";var rn=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(rn||{});function ni(){return b.useContext(ti)}function wb({value:e,children:t}){return W.createElement(ti.Provider,{value:e},t)}function bb({children:e}){return W.createElement(ti.Provider,{value:null},e)}function xb(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Un=[];xb(()=>{function e(t){if(!(t.target instanceof HTMLElement)||t.target===document.body||Un[0]===t.target)return;let n=t.target;n=n.closest(Wa),Un.unshift(n??t.target),Un=Un.filter(r=>r!=null&&r.isConnected),Un.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function Ef(e){let t=lt(e),n=b.useRef(!1);b.useEffect(()=>(n.current=!1,()=>{n.current=!0,ei(()=>{n.current&&t()})}),[t])}function Sb(){let e=typeof document>"u";return"useSyncExternalStore"in ol?(t=>t.useSyncExternalStore)(ol)(()=>()=>{},()=>!1,()=>!e):!1}function Fo(){let e=Sb(),[t,n]=b.useState(gr.isHandoffComplete);return t&&gr.isHandoffComplete===!1&&n(!1),b.useEffect(()=>{t!==!0&&n(!0)},[t]),b.useEffect(()=>gr.handoff(),[]),e?!1:t}let _f=b.createContext(!1);function kb(){return b.useContext(_f)}function nu(e){return W.createElement(_f.Provider,{value:e.force},e.children)}function Eb(e){let t=kb(),n=b.useContext(Tf),r=Lo(e),[o,i]=b.useState(()=>{var s;if(!t&&n!==null)return(s=n.current)!=null?s:null;if(gr.isServer)return null;let l=r==null?void 0:r.getElementById("headlessui-portal-root");if(l)return l;if(r===null)return null;let u=r.createElement("div");return u.setAttribute("id","headlessui-portal-root"),r.body.appendChild(u)});return b.useEffect(()=>{o!==null&&(r!=null&&r.body.contains(o)||r==null||r.body.appendChild(o))},[o,r]),b.useEffect(()=>{t||n!==null&&i(n.current)},[n,i,t]),o}let Nf=b.Fragment,_b=zt(function(e,t){let n=e,r=b.useRef(null),o=bn(Aw(p=>{r.current=p}),t),i=Lo(r),s=Eb(r),[l]=b.useState(()=>{var p;return gr.isServer?null:(p=i==null?void 0:i.createElement("div"))!=null?p:null}),u=b.useContext(js),d=Fo();Ft(()=>{!s||!l||s.contains(l)||(l.setAttribute("data-headlessui-portal",""),s.appendChild(l))},[s,l]),Ft(()=>{if(l&&u)return u.register(l)},[u,l]),Ef(()=>{var p;!s||!l||(l instanceof Node&&s.contains(l)&&s.removeChild(l),s.childNodes.length<=0&&((p=s.parentElement)==null||p.removeChild(s)))});let h=Qt();return d?!s||!l?null:Ou.createPortal(h({ourProps:{ref:o},theirProps:n,slot:{},defaultTag:Nf,name:"Portal"}),l):null});function Nb(e,t){let n=bn(t),{enabled:r=!0,...o}=e,i=Qt();return r?W.createElement(_b,{...o,ref:n}):i({ourProps:{ref:n},theirProps:o,slot:{},defaultTag:Nf,name:"Portal"})}let Tb=b.Fragment,Tf=b.createContext(null);function Cb(e,t){let{target:n,...r}=e,o={ref:bn(t)},i=Qt();return W.createElement(Tf.Provider,{value:n},i({ourProps:o,theirProps:r,defaultTag:Tb,name:"Popover.Group"}))}let js=b.createContext(null);function Db(){let e=b.useContext(js),t=b.useRef([]),n=lt(i=>(t.current.push(i),e&&e.register(i),()=>r(i))),r=lt(i=>{let s=t.current.indexOf(i);s!==-1&&t.current.splice(s,1),e&&e.unregister(i)}),o=b.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,b.useMemo(()=>function({children:i}){return W.createElement(js.Provider,{value:o},i)},[o])]}let Ob=zt(Nb),Cf=zt(Cb),jb=Object.assign(Ob,{Group:Cf});function Ib(e,t=typeof document<"u"?document.defaultView:null,n){let r=Yr(e,"escape");kf(t,"keydown",o=>{r&&(o.defaultPrevented||o.key===yf.Escape&&n(o))})}function Pb(){var e;let[t]=b.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=b.useState((e=t==null?void 0:t.matches)!=null?e:!1);return Ft(()=>{if(!t)return;function o(i){r(i.matches)}return t.addEventListener("change",o),()=>t.removeEventListener("change",o)},[t]),n}function Mb({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=Lo(n),o=lt(()=>{var i,s;let l=[];for(let u of e)u!==null&&(u instanceof HTMLElement?l.push(u):"current"in u&&u.current instanceof HTMLElement&&l.push(u.current));if(t!=null&&t.current)for(let u of t.current)l.push(u);for(let u of(i=r==null?void 0:r.querySelectorAll("html > *, body > *"))!=null?i:[])u!==document.body&&u!==document.head&&u instanceof HTMLElement&&u.id!=="headlessui-portal-root"&&(n&&(u.contains(n)||u.contains((s=n==null?void 0:n.getRootNode())==null?void 0:s.host))||l.some(d=>u.contains(d))||l.push(u));return l});return{resolveContainers:o,contains:lt(i=>o().some(s=>s.contains(i)))}}let Df=b.createContext(null);function ru({children:e,node:t}){let[n,r]=b.useState(null),o=Of(t??n);return W.createElement(Df.Provider,{value:o},e,o===null&&W.createElement(Cs,{features:Fa.Hidden,ref:i=>{var s,l;if(i){for(let u of(l=(s=Ja(i))==null?void 0:s.querySelectorAll("html > *, body > *"))!=null?l:[])if(u!==document.body&&u!==document.head&&u instanceof HTMLElement&&u!=null&&u.contains(i)){r(u);break}}}}))}function Of(e=null){var t;return(t=b.useContext(Df))!=null?t:e}function wc(){let e=b.useRef(!1);return Ft(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var yo=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(yo||{});function Ab(){let e=b.useRef(0);return Sf(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function jf(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let $b="div";var lr=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(lr||{});function Rb(e,t){let n=b.useRef(null),r=bn(n,t),{initialFocus:o,initialFocusFallback:i,containers:s,features:l=15,...u}=e;Fo()||(l=0);let d=Lo(n);Bb(l,{ownerDocument:d});let h=Hb(l,{ownerDocument:d,container:n,initialFocus:o,initialFocusFallback:i});zb(l,{ownerDocument:d,container:n,containers:s,previousActiveElement:h});let p=Ab(),v=lt($=>{let P=n.current;P&&(C=>C())(()=>{Qn(p.current,{[yo.Forwards]:()=>{bo(P,Cn.First,{skipElements:[$.relatedTarget,i]})},[yo.Backwards]:()=>{bo(P,Cn.Last,{skipElements:[$.relatedTarget,i]})}})})}),y=Yr(!!(l&2),"focus-trap#tab-lock"),k=gc(),S=b.useRef(!1),N={ref:r,onKeyDown($){$.key=="Tab"&&(S.current=!0,k.requestAnimationFrame(()=>{S.current=!1}))},onBlur($){if(!(l&4))return;let P=jf(s);n.current instanceof HTMLElement&&P.add(n.current);let C=$.relatedTarget;C instanceof HTMLElement&&C.dataset.headlessuiFocusGuard!=="true"&&(If(P,C)||(S.current?bo(n.current,Qn(p.current,{[yo.Forwards]:()=>Cn.Next,[yo.Backwards]:()=>Cn.Previous})|Cn.WrapAround,{relativeTo:$.target}):$.target instanceof HTMLElement&&jn($.target)))}},T=Qt();return W.createElement(W.Fragment,null,y&&W.createElement(Cs,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:v,features:Fa.Focusable}),T({ourProps:N,theirProps:u,defaultTag:$b,name:"FocusTrap"}),y&&W.createElement(Cs,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:v,features:Fa.Focusable}))}let Lb=zt(Rb),Fb=Object.assign(Lb,{features:lr});function Wb(e=!0){let t=b.useRef(Un.slice());return vc(([n],[r])=>{r===!0&&n===!1&&ei(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Un.slice())},[e,Un,t]),lt(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function Bb(e,{ownerDocument:t}){let n=!!(e&8),r=Wb(n);vc(()=>{n||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&jn(r())},[n]),Ef(()=>{n&&jn(r())})}function Hb(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:o}){let i=b.useRef(null),s=Yr(!!(e&1),"focus-trap#initial-focus"),l=wc();return vc(()=>{if(e===0)return;if(!s){o!=null&&o.current&&jn(o.current);return}let u=n.current;u&&ei(()=>{if(!l.current)return;let d=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===d){i.current=d;return}}else if(u.contains(d)){i.current=d;return}if(r!=null&&r.current)jn(r.current);else{if(e&16){if(bo(u,Cn.First|Cn.AutoFocus)!==Os.Error)return}else if(bo(u,Cn.First)!==Os.Error)return;if(o!=null&&o.current&&(jn(o.current),(t==null?void 0:t.activeElement)===o.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t==null?void 0:t.activeElement})},[o,s,e]),i}function zb(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:o}){let i=wc(),s=!!(e&4);kf(t==null?void 0:t.defaultView,"focus",l=>{if(!s||!i.current)return;let u=jf(r);n.current instanceof HTMLElement&&u.add(n.current);let d=o.current;if(!d)return;let h=l.target;h&&h instanceof HTMLElement?If(u,h)?(o.current=h,jn(h)):(l.preventDefault(),l.stopPropagation(),jn(d)):jn(o.current)},!0)}function If(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function Pf(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:Af)!==b.Fragment||W.Children.count(e.children)===1}let ri=b.createContext(null);ri.displayName="TransitionContext";var Yb=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Yb||{});function Vb(){let e=b.useContext(ri);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function qb(){let e=b.useContext(oi);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let oi=b.createContext(null);oi.displayName="NestingContext";function ai(e){return"children"in e?ai(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function Mf(e,t){let n=br(e),r=b.useRef([]),o=wc(),i=gc(),s=lt((y,k=Gn.Hidden)=>{let S=r.current.findIndex(({el:N})=>N===y);S!==-1&&(Qn(k,{[Gn.Unmount](){r.current.splice(S,1)},[Gn.Hidden](){r.current[S].state="hidden"}}),i.microTask(()=>{var N;!ai(r)&&o.current&&((N=n.current)==null||N.call(n))}))}),l=lt(y=>{let k=r.current.find(({el:S})=>S===y);return k?k.state!=="visible"&&(k.state="visible"):r.current.push({el:y,state:"visible"}),()=>s(y,Gn.Unmount)}),u=b.useRef([]),d=b.useRef(Promise.resolve()),h=b.useRef({enter:[],leave:[]}),p=lt((y,k,S)=>{u.current.splice(0),t&&(t.chains.current[k]=t.chains.current[k].filter(([N])=>N!==y)),t==null||t.chains.current[k].push([y,new Promise(N=>{u.current.push(N)})]),t==null||t.chains.current[k].push([y,new Promise(N=>{Promise.all(h.current[k].map(([T,$])=>$)).then(()=>N())})]),k==="enter"?d.current=d.current.then(()=>t==null?void 0:t.wait.current).then(()=>S(k)):S(k)}),v=lt((y,k,S)=>{Promise.all(h.current[k].splice(0).map(([N,T])=>T)).then(()=>{var N;(N=u.current.shift())==null||N()}).then(()=>S(k))});return b.useMemo(()=>({children:r,register:l,unregister:s,onStart:p,onStop:v,wait:d,chains:h}),[l,s,r,p,v,h,d])}let Af=b.Fragment,$f=La.RenderStrategy;function Kb(e,t){var n,r;let{transition:o=!0,beforeEnter:i,afterEnter:s,beforeLeave:l,afterLeave:u,enter:d,enterFrom:h,enterTo:p,entered:v,leave:y,leaveFrom:k,leaveTo:S,...N}=e,[T,$]=b.useState(null),P=b.useRef(null),C=Pf(e),X=bn(...C?[P,t,$]:t===null?[]:[t]),q=(n=N.unmount)==null||n?Gn.Unmount:Gn.Hidden,{show:H,appear:te,initial:K}=Vb(),[ne,U]=b.useState(H?"visible":"hidden"),ie=qb(),{register:ue,unregister:E}=ie;Ft(()=>ue(P),[ue,P]),Ft(()=>{if(q===Gn.Hidden&&P.current){if(H&&ne!=="visible"){U("visible");return}return Qn(ne,{hidden:()=>E(P),visible:()=>ue(P)})}},[ne,P,ue,E,H,q]);let z=Fo();Ft(()=>{if(C&&z&&ne==="visible"&&P.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[P,ne,z,C]);let D=K&&!te,Q=te&&H&&K,J=b.useRef(!1),j=Mf(()=>{J.current||(U("hidden"),E(P))},ie),G=lt(Ce=>{J.current=!0;let je=Ce?"enter":"leave";j.onStart(P,je,he=>{he==="enter"?i==null||i():he==="leave"&&(l==null||l())})}),se=lt(Ce=>{let je=Ce?"enter":"leave";J.current=!1,j.onStop(P,je,he=>{he==="enter"?s==null||s():he==="leave"&&(u==null||u())}),je==="leave"&&!ai(j)&&(U("hidden"),E(P))});b.useEffect(()=>{C&&o||(G(H),se(H))},[H,C,o]);let ae=!(!o||!C||!z||D),[,fe]=pb(ae,T,H,{start:G,end:se}),we=sr({ref:X,className:((r=Ts(N.className,Q&&d,Q&&h,fe.enter&&d,fe.enter&&fe.closed&&h,fe.enter&&!fe.closed&&p,fe.leave&&y,fe.leave&&!fe.closed&&k,fe.leave&&fe.closed&&S,!fe.transition&&H&&v))==null?void 0:r.trim())||void 0,...mb(fe)}),Se=0;ne==="visible"&&(Se|=rn.Open),ne==="hidden"&&(Se|=rn.Closed),fe.enter&&(Se|=rn.Opening),fe.leave&&(Se|=rn.Closing);let Ne=Qt();return W.createElement(oi.Provider,{value:j},W.createElement(wb,{value:Se},Ne({ourProps:we,theirProps:N,defaultTag:Af,features:$f,visible:ne==="visible",name:"Transition.Child"})))}function Ub(e,t){let{show:n,appear:r=!1,unmount:o=!0,...i}=e,s=b.useRef(null),l=Pf(e),u=bn(...l?[s,t]:t===null?[]:[t]);Fo();let d=ni();if(n===void 0&&d!==null&&(n=(d&rn.Open)===rn.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[h,p]=b.useState(n?"visible":"hidden"),v=Mf(()=>{n||p("hidden")}),[y,k]=b.useState(!0),S=b.useRef([n]);Ft(()=>{y!==!1&&S.current[S.current.length-1]!==n&&(S.current.push(n),k(!1))},[S,n]);let N=b.useMemo(()=>({show:n,appear:r,initial:y}),[n,r,y]);Ft(()=>{n?p("visible"):!ai(v)&&s.current!==null&&p("hidden")},[n,v]);let T={unmount:o},$=lt(()=>{var X;y&&k(!1),(X=e.beforeEnter)==null||X.call(e)}),P=lt(()=>{var X;y&&k(!1),(X=e.beforeLeave)==null||X.call(e)}),C=Qt();return W.createElement(oi.Provider,{value:v},W.createElement(ri.Provider,{value:N},C({ourProps:{...T,as:b.Fragment,children:W.createElement(Rf,{ref:u,...T,...i,beforeEnter:$,beforeLeave:P})},theirProps:{},defaultTag:b.Fragment,features:$f,visible:h==="visible",name:"Transition"})))}function Xb(e,t){let n=b.useContext(ri)!==null,r=ni()!==null;return W.createElement(W.Fragment,null,!n&&r?W.createElement(Is,{ref:t,...e}):W.createElement(Rf,{ref:t,...e}))}let Is=zt(Ub),Rf=zt(Kb),bc=zt(Xb),Gb=Object.assign(Is,{Child:bc,Root:Is});var Zb=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Zb||{}),Qb=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(Qb||{});let Jb={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},xc=b.createContext(null);xc.displayName="DialogContext";function ii(e){let t=b.useContext(xc);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ii),n}return t}function ex(e,t){return Qn(t.type,Jb,e,t)}let ou=zt(function(e,t){let n=b.useId(),{id:r=`headlessui-dialog-${n}`,open:o,onClose:i,initialFocus:s,role:l="dialog",autoFocus:u=!0,__demoMode:d=!1,unmount:h=!1,...p}=e,v=b.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(v.current||(v.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let y=ni();o===void 0&&y!==null&&(o=(y&rn.Open)===rn.Open);let k=b.useRef(null),S=bn(k,t),N=Lo(k),T=o?0:1,[$,P]=b.useReducer(ex,{titleId:null,descriptionId:null,panelRef:b.createRef()}),C=lt(()=>i(!1)),X=lt(se=>P({type:0,id:se})),q=Fo()?T===0:!1,[H,te]=Db(),K={get current(){var se;return(se=$.panelRef.current)!=null?se:k.current}},ne=Of(),{resolveContainers:U}=Mb({mainTreeNode:ne,portals:H,defaultContainers:[K]}),ie=y!==null?(y&rn.Closing)===rn.Closing:!1;Vw(d||ie?!1:q,{allowed:lt(()=>{var se,ae;return[(ae=(se=k.current)==null?void 0:se.closest("[data-headlessui-portal]"))!=null?ae:null]}),disallowed:lt(()=>{var se;return[(se=ne==null?void 0:ne.closest("body > *:not(#headlessui-portal-root)"))!=null?se:null]})}),ob(q,U,se=>{se.preventDefault(),C()}),Ib(q,N==null?void 0:N.defaultView,se=>{se.preventDefault(),se.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),C()}),ub(d||ie?!1:q,N,U),qw(q,k,C);let[ue,E]=$w(),z=b.useMemo(()=>[{dialogState:T,close:C,setTitleId:X,unmount:h},$],[T,$,C,X,h]),D=b.useMemo(()=>({open:T===0}),[T]),Q={ref:S,id:r,role:l,tabIndex:-1,"aria-modal":d?void 0:T===0?!0:void 0,"aria-labelledby":$.titleId,"aria-describedby":ue,unmount:h},J=!Pb(),j=lr.None;q&&!d&&(j|=lr.RestoreFocus,j|=lr.TabLock,u&&(j|=lr.AutoFocus),J&&(j|=lr.InitialFocus));let G=Qt();return W.createElement(bb,null,W.createElement(nu,{force:!0},W.createElement(jb,null,W.createElement(xc.Provider,{value:z},W.createElement(Cf,{target:k},W.createElement(nu,{force:!1},W.createElement(E,{slot:D},W.createElement(te,null,W.createElement(Fb,{initialFocus:s,initialFocusFallback:k,containers:U,features:j},W.createElement(Hw,{value:C},G({ourProps:Q,theirProps:p,slot:D,defaultTag:tx,features:nx,visible:T===0,name:"Dialog"})))))))))))}),tx="div",nx=La.RenderStrategy|La.Static;function rx(e,t){let{transition:n=!1,open:r,...o}=e,i=ni(),s=e.hasOwnProperty("open")||i!==null,l=e.hasOwnProperty("onClose");if(!s&&!l)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!s)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!l)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!o.static?W.createElement(ru,null,W.createElement(Gb,{show:r,transition:n,unmount:o.unmount},W.createElement(ou,{ref:t,...o}))):W.createElement(ru,null,W.createElement(ou,{ref:t,open:r,...o}))}let ox="div";function ax(e,t){let n=b.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:o=!1,...i}=e,[{dialogState:s,unmount:l},u]=ii("Dialog.Panel"),d=bn(t,u.panelRef),h=b.useMemo(()=>({open:s===0}),[s]),p=lt(N=>{N.stopPropagation()}),v={ref:d,id:r,onClick:p},y=o?bc:b.Fragment,k=o?{unmount:l}:{},S=Qt();return W.createElement(y,{...k},S({ourProps:v,theirProps:i,slot:h,defaultTag:ox,name:"Dialog.Panel"}))}let ix="div";function sx(e,t){let{transition:n=!1,...r}=e,[{dialogState:o,unmount:i}]=ii("Dialog.Backdrop"),s=b.useMemo(()=>({open:o===0}),[o]),l={ref:t,"aria-hidden":!0},u=n?bc:b.Fragment,d=n?{unmount:i}:{},h=Qt();return W.createElement(u,{...d},h({ourProps:l,theirProps:r,slot:s,defaultTag:ix,name:"Dialog.Backdrop"}))}let cx="h2";function lx(e,t){let n=b.useId(),{id:r=`headlessui-dialog-title-${n}`,...o}=e,[{dialogState:i,setTitleId:s}]=ii("Dialog.Title"),l=bn(t);b.useEffect(()=>(s(r),()=>s(null)),[r,s]);let u=b.useMemo(()=>({open:i===0}),[i]),d={ref:l,id:r};return Qt()({ourProps:d,theirProps:o,slot:u,defaultTag:cx,name:"Dialog.Title"})}let ux=zt(rx),Sc=zt(ax);zt(sx);let dx=zt(lx),Lf=Object.assign(ux,{Panel:Sc,Title:dx,Description:Ww});const Tn=[{id:"WorkflowType",label:"WorkflowType",type:"text"},{id:"WorkflowId",label:"WorkflowId",type:"text"},{id:"RunId",label:"RunId",type:"text"},{id:"ExecutionStatus",label:"Status",type:"status"},{id:"StartTime",label:"StartTime",type:"datetime"},{id:"CloseTime",label:"CloseTime",type:"datetime"},{id:"TaskQueue",label:"TaskQueue",type:"text"}],au=[{id:"equals",label:"=",alternatives:["equals","is"],searchOperator:"="},{id:"notEquals",label:"!=",alternatives:["not equals","is not"],searchOperator:"!="},{id:"starts_with",label:"starts with",alternatives:["startswith","start"],searchOperator:"starts_with"},{id:"isNull",label:"is null",alternatives:["null"],searchOperator:"is null"},{id:"isNotNull",label:"is not null",alternatives:["not null"],searchOperator:"is not null"},{id:"greaterThan",label:">",alternatives:["after","greater than"],searchOperator:">"},{id:"lessThan",label:"<",alternatives:["before","less than"],searchOperator:"<"},{id:"between",label:"between",alternatives:[],searchOperator:"between"}],Ji=[{value:"Completed",color:"text-green-700 bg-green-50"},{value:"Running",color:"text-blue-700 bg-blue-50"},{value:"TimedOut",color:"text-orange-700 bg-orange-50"},{value:"Failed",color:"text-red-700 bg-red-50"},{value:"Canceled",color:"text-gray-700 bg-gray-50"},{value:"Terminated",color:"text-yellow-700 bg-yellow-50"},{value:"Continued as New",color:"text-pink-700 bg-pink-50"}],ba=[{id:"equals",label:"=",alternatives:["==","is","="]},{id:"between",label:"between",alternatives:["between"]},{id:"greater",label:">",alternatives:["gt",">"]},{id:"greaterOrEqual",label:">=",alternatives:["gte",">="]},{id:"less",label:"<",alternatives:["lt","<"]},{id:"lessOrEqual",label:"<=",alternatives:["lte","<="]}],Ff=6048e5,fx=864e5,iu=Symbol.for("constructDateFrom");function Jn(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&iu in e?e[iu](t):e instanceof Date?new e.constructor(t):new Date(t)}function sn(e,t){return Jn(t||e,e)}let hx={};function si(){return hx}function jo(e,t){var l,u,d,h;const n=si(),r=(t==null?void 0:t.weekStartsOn)??((u=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,o=sn(e,t==null?void 0:t.in),i=o.getDay(),s=(i<r?7:0)+i-r;return o.setDate(o.getDate()-s),o.setHours(0,0,0,0),o}function Ba(e,t){return jo(e,{...t,weekStartsOn:1})}function Wf(e,t){const n=sn(e,t==null?void 0:t.in),r=n.getFullYear(),o=Jn(n,0);o.setFullYear(r+1,0,4),o.setHours(0,0,0,0);const i=Ba(o),s=Jn(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const l=Ba(s);return n.getTime()>=i.getTime()?r+1:n.getTime()>=l.getTime()?r:r-1}function su(e){const t=sn(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function mx(e,...t){const n=Jn.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function cu(e,t){const n=sn(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function px(e,t,n){const[r,o]=mx(n==null?void 0:n.in,e,t),i=cu(r),s=cu(o),l=+i-su(i),u=+s-su(s);return Math.round((l-u)/fx)}function gx(e,t){const n=Wf(e,t),r=Jn(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Ba(r)}function yx(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function vx(e){return!(!yx(e)&&typeof e!="number"||isNaN(+sn(e)))}function wx(e,t){const n=sn(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const bx={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},xx=(e,t,n)=>{let r;const o=bx[e];return typeof o=="string"?r=o:t===1?r=o.one:r=o.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function es(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Sx={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},kx={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ex={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_x={date:es({formats:Sx,defaultWidth:"full"}),time:es({formats:kx,defaultWidth:"full"}),dateTime:es({formats:Ex,defaultWidth:"full"})},Nx={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Tx=(e,t,n,r)=>Nx[e];function fo(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let o;if(r==="formatting"&&e.formattingValues){const s=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):s;o=e.formattingValues[l]||e.formattingValues[s]}else{const s=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;o=e.values[l]||e.values[s]}const i=e.argumentCallback?e.argumentCallback(t):t;return o[i]}}const Cx={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Dx={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ox={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},jx={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ix={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Px={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Mx=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Ax={ordinalNumber:Mx,era:fo({values:Cx,defaultWidth:"wide"}),quarter:fo({values:Dx,defaultWidth:"wide",argumentCallback:e=>e-1}),month:fo({values:Ox,defaultWidth:"wide"}),day:fo({values:jx,defaultWidth:"wide"}),dayPeriod:fo({values:Ix,defaultWidth:"wide",formattingValues:Px,defaultFormattingWidth:"wide"})};function ho(e){return(t,n={})=>{const r=n.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(o);if(!i)return null;const s=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(l)?Rx(l,p=>p.test(s)):$x(l,p=>p.test(s));let d;d=e.valueCallback?e.valueCallback(u):u,d=n.valueCallback?n.valueCallback(d):d;const h=t.slice(s.length);return{value:d,rest:h}}}function $x(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Rx(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Lx(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const o=r[0],i=t.match(e.parsePattern);if(!i)return null;let s=e.valueCallback?e.valueCallback(i[0]):i[0];s=n.valueCallback?n.valueCallback(s):s;const l=t.slice(o.length);return{value:s,rest:l}}}const Fx=/^(\d+)(th|st|nd|rd)?/i,Wx=/\d+/i,Bx={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Hx={any:[/^b/i,/^(a|c)/i]},zx={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Yx={any:[/1/i,/2/i,/3/i,/4/i]},Vx={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},qx={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Kx={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ux={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Xx={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Gx={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Zx={ordinalNumber:Lx({matchPattern:Fx,parsePattern:Wx,valueCallback:e=>parseInt(e,10)}),era:ho({matchPatterns:Bx,defaultMatchWidth:"wide",parsePatterns:Hx,defaultParseWidth:"any"}),quarter:ho({matchPatterns:zx,defaultMatchWidth:"wide",parsePatterns:Yx,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ho({matchPatterns:Vx,defaultMatchWidth:"wide",parsePatterns:qx,defaultParseWidth:"any"}),day:ho({matchPatterns:Kx,defaultMatchWidth:"wide",parsePatterns:Ux,defaultParseWidth:"any"}),dayPeriod:ho({matchPatterns:Xx,defaultMatchWidth:"any",parsePatterns:Gx,defaultParseWidth:"any"})},Qx={code:"en-US",formatDistance:xx,formatLong:_x,formatRelative:Tx,localize:Ax,match:Zx,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Jx(e,t){const n=sn(e,t==null?void 0:t.in);return px(n,wx(n))+1}function e1(e,t){const n=sn(e,t==null?void 0:t.in),r=+Ba(n)-+gx(n);return Math.round(r/Ff)+1}function Bf(e,t){var h,p,v,y;const n=sn(e,t==null?void 0:t.in),r=n.getFullYear(),o=si(),i=(t==null?void 0:t.firstWeekContainsDate)??((p=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??o.firstWeekContainsDate??((y=(v=o.locale)==null?void 0:v.options)==null?void 0:y.firstWeekContainsDate)??1,s=Jn((t==null?void 0:t.in)||e,0);s.setFullYear(r+1,0,i),s.setHours(0,0,0,0);const l=jo(s,t),u=Jn((t==null?void 0:t.in)||e,0);u.setFullYear(r,0,i),u.setHours(0,0,0,0);const d=jo(u,t);return+n>=+l?r+1:+n>=+d?r:r-1}function t1(e,t){var l,u,d,h;const n=si(),r=(t==null?void 0:t.firstWeekContainsDate)??((u=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=Bf(e,t),i=Jn((t==null?void 0:t.in)||e,0);return i.setFullYear(o,0,r),i.setHours(0,0,0,0),jo(i,t)}function n1(e,t){const n=sn(e,t==null?void 0:t.in),r=+jo(n,t)-+t1(n,t);return Math.round(r/Ff)+1}function Qe(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Yn={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Qe(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Qe(n+1,2)},d(e,t){return Qe(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Qe(e.getHours()%12||12,t.length)},H(e,t){return Qe(e.getHours(),t.length)},m(e,t){return Qe(e.getMinutes(),t.length)},s(e,t){return Qe(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),o=Math.trunc(r*Math.pow(10,n-3));return Qe(o,t.length)}},Ir={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},lu={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return Yn.y(e,t)},Y:function(e,t,n,r){const o=Bf(e,r),i=o>0?o:1-o;if(t==="YY"){const s=i%100;return Qe(s,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):Qe(i,t.length)},R:function(e,t){const n=Wf(e);return Qe(n,t.length)},u:function(e,t){const n=e.getFullYear();return Qe(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Qe(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Qe(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Yn.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Qe(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const o=n1(e,r);return t==="wo"?n.ordinalNumber(o,{unit:"week"}):Qe(o,t.length)},I:function(e,t,n){const r=e1(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Qe(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Yn.d(e,t)},D:function(e,t,n){const r=Jx(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Qe(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const o=e.getDay(),i=(o-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Qe(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const o=e.getDay(),i=(o-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Qe(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),o=r===0?7:r;switch(t){case"i":return String(o);case"ii":return Qe(o,t.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const o=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let o;switch(r===12?o=Ir.noon:r===0?o=Ir.midnight:o=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let o;switch(r>=17?o=Ir.evening:r>=12?o=Ir.afternoon:r>=4?o=Ir.morning:o=Ir.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Yn.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Yn.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Qe(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Qe(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Yn.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Yn.s(e,t)},S:function(e,t){return Yn.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return du(r);case"XXXX":case"XX":return cr(r);case"XXXXX":case"XXX":default:return cr(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return du(r);case"xxxx":case"xx":return cr(r);case"xxxxx":case"xxx":default:return cr(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+uu(r,":");case"OOOO":default:return"GMT"+cr(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+uu(r,":");case"zzzz":default:return"GMT"+cr(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return Qe(r,t.length)},T:function(e,t,n){return Qe(+e,t.length)}};function uu(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),o=Math.trunc(r/60),i=r%60;return i===0?n+String(o):n+String(o)+t+Qe(i,2)}function du(e,t){return e%60===0?(e>0?"-":"+")+Qe(Math.abs(e)/60,2):cr(e,t)}function cr(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),o=Qe(Math.trunc(r/60),2),i=Qe(r%60,2);return n+o+t+i}const fu=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Hf=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},r1=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],o=n[2];if(!o)return fu(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",fu(r,t)).replace("{{time}}",Hf(o,t))},o1={p:Hf,P:r1},a1=/^D+$/,i1=/^Y+$/,s1=["D","DD","YY","YYYY"];function c1(e){return a1.test(e)}function l1(e){return i1.test(e)}function u1(e,t,n){const r=d1(e,t,n);if(console.warn(r),s1.includes(e))throw new RangeError(r)}function d1(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const f1=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,h1=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,m1=/^'([^]*?)'?$/,p1=/''/g,g1=/[a-zA-Z]/;function Lt(e,t,n){var h,p,v,y;const r=si(),o=r.locale??Qx,i=r.firstWeekContainsDate??((p=(h=r.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,s=r.weekStartsOn??((y=(v=r.locale)==null?void 0:v.options)==null?void 0:y.weekStartsOn)??0,l=sn(e,n==null?void 0:n.in);if(!vx(l))throw new RangeError("Invalid time value");let u=t.match(h1).map(k=>{const S=k[0];if(S==="p"||S==="P"){const N=o1[S];return N(k,o.formatLong)}return k}).join("").match(f1).map(k=>{if(k==="''")return{isToken:!1,value:"'"};const S=k[0];if(S==="'")return{isToken:!1,value:y1(k)};if(lu[S])return{isToken:!0,value:k};if(S.match(g1))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:k}});o.localize.preprocessor&&(u=o.localize.preprocessor(l,u));const d={firstWeekContainsDate:i,weekStartsOn:s,locale:o};return u.map(k=>{if(!k.isToken)return k.value;const S=k.value;(l1(S)||c1(S))&&u1(S,t,String(e));const N=lu[S[0]];return N(l,S,o.localize,d)}).join("")}function y1(e){const t=e.match(m1);return t?t[1].replace(p1,"'"):e}const v1=(e,t,n,r)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;const o=Object.getOwnPropertyDescriptor(e,n),i=Object.getOwnPropertyDescriptor(t,n);!w1(o,i)&&r||Object.defineProperty(e,n,i)},w1=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},b1=(e,t)=>{const n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)},x1=(e,t)=>`/* Wrapped ${e}*/
${t}`,S1=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),k1=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),E1=(e,t,n)=>{const r=n===""?"":`with ${n.trim()}() `,o=x1.bind(null,r,t.toString());Object.defineProperty(o,"name",k1),Object.defineProperty(e,"toString",{...S1,value:o})},_1=(e,t,{ignoreNonConfigurable:n=!1}={})=>{const{name:r}=e;for(const o of Reflect.ownKeys(t))v1(e,t,o,n);return b1(e,t),E1(e,t,r),e};var N1=_1,Ps={exports:{}},T1=()=>{const e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e};(function(e,t){var n=Pr&&Pr.__awaiter||function(s,l,u,d){return new(u||(u=Promise))(function(h,p){function v(S){try{k(d.next(S))}catch(N){p(N)}}function y(S){try{k(d.throw(S))}catch(N){p(N)}}function k(S){S.done?h(S.value):new u(function(N){N(S.value)}).then(v,y)}k((d=d.apply(s,l||[])).next())})},r=Pr&&Pr.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(T1);function i(s,l="maxAge"){let u,d,h;const p=()=>n(this,void 0,void 0,function*(){if(u!==void 0)return;const k=S=>n(this,void 0,void 0,function*(){h=o.default();const N=S[1][l]-Date.now();if(N<=0){s.delete(S[0]),h.resolve();return}return u=S[0],d=setTimeout(()=>{s.delete(S[0]),h&&h.resolve()},N),typeof d.unref=="function"&&d.unref(),h.promise});try{for(const S of s)yield k(S)}catch{}u=void 0}),v=()=>{u=void 0,d!==void 0&&(clearTimeout(d),d=void 0),h!==void 0&&(h.reject(void 0),h=void 0)},y=s.set.bind(s);return s.set=(k,S)=>{s.has(k)&&s.delete(k);const N=y(k,S);return u&&u===k&&v(),p(),N},p(),s}t.default=i,e.exports=i,e.exports.default=i})(Ps,Ps.exports);var C1=Ps.exports;const D1=N1,O1=C1,ts=new WeakMap,zf=new WeakMap,Ha=(e,{cacheKey:t,cache:n=new Map,maxAge:r}={})=>{typeof r=="number"&&O1(n);const o=function(...i){const s=t?t(i):i[0],l=n.get(s);if(l)return l.data;const u=e.apply(this,i);return n.set(s,{data:u,maxAge:r?Date.now()+r:Number.POSITIVE_INFINITY}),u};return D1(o,e,{ignoreNonConfigurable:!0}),zf.set(o,n),o};Ha.decorator=(e={})=>(t,n,r)=>{const o=t[n];if(typeof o!="function")throw new TypeError("The decorated value must be a function");delete r.value,delete r.writable,r.get=function(){if(!ts.has(this)){const i=Ha(o,e);return ts.set(this,i),i}return ts.get(this)}};Ha.clear=e=>{const t=zf.get(e);if(!t)throw new TypeError("Can't clear a function that was not memoized!");if(typeof t.clear!="function")throw new TypeError("The cache Map can't be cleared!");t.clear()};var j1=Ha;const Yf=Zs(j1);function I1(e){return typeof e=="string"}function P1(e,t,n){return n.indexOf(e)===t}function M1(e){return e.toLowerCase()===e}function hu(e){return e.indexOf(",")===-1?e:e.split(",")}function Ms(e){if(!e)return e;if(e==="C"||e==="posix"||e==="POSIX")return"en-US";if(e.indexOf(".")!==-1){var t=e.split(".")[0],n=t===void 0?"":t;return Ms(n)}if(e.indexOf("@")!==-1){var r=e.split("@")[0],n=r===void 0?"":r;return Ms(n)}if(e.indexOf("-")===-1||!M1(e))return e;var o=e.split("-"),i=o[0],s=o[1],l=s===void 0?"":s;return"".concat(i,"-").concat(l.toUpperCase())}function A1(e){var t=e===void 0?{}:e,n=t.useFallbackLocale,r=n===void 0?!0:n,o=t.fallbackLocale,i=o===void 0?"en-US":o,s=[];if(typeof navigator<"u"){for(var l=navigator.languages||[],u=[],d=0,h=l;d<h.length;d++){var p=h[d];u=u.concat(hu(p))}var v=navigator.language,y=v&&hu(v);s=s.concat(u,y)}return r&&s.push(i),s.filter(I1).map(Ms).filter(P1)}var $1=Yf(A1,{cacheKey:JSON.stringify});function R1(e){return $1(e)[0]||null}var Vf=Yf(R1,{cacheKey:JSON.stringify});function An(e,t,n){return function(o,i){i===void 0&&(i=n);var s=e(o)+i;return t(s)}}function Wo(e){return function(n){return new Date(e(n).getTime()-1)}}function Bo(e,t){return function(r){return[e(r),t(r)]}}function it(e){if(e instanceof Date)return e.getFullYear();if(typeof e=="number")return e;var t=parseInt(e,10);if(typeof e=="string"&&!isNaN(t))return t;throw new Error("Failed to get year from date: ".concat(e,"."))}function tr(e){if(e instanceof Date)return e.getMonth();throw new Error("Failed to get month from date: ".concat(e,"."))}function ci(e){if(e instanceof Date)return e.getDate();throw new Error("Failed to get year from date: ".concat(e,"."))}function Vr(e){var t=it(e),n=t+(-t+1)%100,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var L1=An(it,Vr,-100),qf=An(it,Vr,100),kc=Wo(qf),F1=An(it,kc,-100),Kf=Bo(Vr,kc);function nr(e){var t=it(e),n=t+(-t+1)%10,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var Uf=An(it,nr,-10),Ec=An(it,nr,10),li=Wo(Ec),Xf=An(it,li,-10),Gf=Bo(nr,li);function qr(e){var t=it(e),n=new Date;return n.setFullYear(t,0,1),n.setHours(0,0,0,0),n}var Zf=An(it,qr,-1),_c=An(it,qr,1),ui=Wo(_c),Qf=An(it,ui,-1),W1=Bo(qr,ui);function Nc(e,t){return function(r,o){o===void 0&&(o=t);var i=it(r),s=tr(r)+o,l=new Date;return l.setFullYear(i,s,1),l.setHours(0,0,0,0),e(l)}}function xr(e){var t=it(e),n=tr(e),r=new Date;return r.setFullYear(t,n,1),r.setHours(0,0,0,0),r}var Jf=Nc(xr,-1),Tc=Nc(xr,1),Ho=Wo(Tc),eh=Nc(Ho,-1),B1=Bo(xr,Ho);function H1(e,t){return function(r,o){o===void 0&&(o=t);var i=it(r),s=tr(r),l=ci(r)+o,u=new Date;return u.setFullYear(i,s,l),u.setHours(0,0,0,0),e(u)}}function zo(e){var t=it(e),n=tr(e),r=ci(e),o=new Date;return o.setFullYear(t,n,r),o.setHours(0,0,0,0),o}var z1=H1(zo,1),Cc=Wo(z1),Y1=Bo(zo,Cc);function th(e){return ci(Ho(e))}var _t={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},V1={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},Dc=[0,1,2,3,4,5,6],ns=new Map;function q1(e){return function(n,r){var o=n||Vf();ns.has(o)||ns.set(o,new Map);var i=ns.get(o);return i.has(e)||i.set(e,new Intl.DateTimeFormat(o||void 0,e).format),i.get(e)(r)}}function K1(e){var t=new Date(e);return new Date(t.setHours(12))}function Sr(e){return function(t,n){return q1(e)(t,K1(n))}}var U1={day:"numeric"},X1={day:"numeric",month:"long",year:"numeric"},G1={month:"long"},Z1={month:"long",year:"numeric"},Q1={weekday:"short"},J1={weekday:"long"},eS={year:"numeric"},tS=Sr(U1),nS=Sr(X1),rS=Sr(G1),nh=Sr(Z1),oS=Sr(Q1),aS=Sr(J1),di=Sr(eS),iS=Dc[0],sS=Dc[5],mu=Dc[6];function Io(e,t){t===void 0&&(t=_t.ISO_8601);var n=e.getDay();switch(t){case _t.ISO_8601:return(n+6)%7;case _t.ISLAMIC:return(n+1)%7;case _t.HEBREW:case _t.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function cS(e){var t=Vr(e);return it(t)}function lS(e){var t=nr(e);return it(t)}function As(e,t){t===void 0&&(t=_t.ISO_8601);var n=it(e),r=tr(e),o=e.getDate()-Io(e,t);return new Date(n,r,o)}function uS(e,t){t===void 0&&(t=_t.ISO_8601);var n=t===_t.GREGORY?_t.GREGORY:_t.ISO_8601,r=As(e,t),o=it(e)+1,i,s;do i=new Date(o,0,n===_t.ISO_8601?4:1),s=As(i,t),o-=1;while(e<s);return Math.round((r.getTime()-s.getTime())/(864e5*7))+1}function yr(e,t){switch(e){case"century":return Vr(t);case"decade":return nr(t);case"year":return qr(t);case"month":return xr(t);case"day":return zo(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function dS(e,t){switch(e){case"century":return L1(t);case"decade":return Uf(t);case"year":return Zf(t);case"month":return Jf(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function rh(e,t){switch(e){case"century":return qf(t);case"decade":return Ec(t);case"year":return _c(t);case"month":return Tc(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function fS(e,t){switch(e){case"decade":return Uf(t,-100);case"year":return Zf(t,-10);case"month":return Jf(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function hS(e,t){switch(e){case"decade":return Ec(t,100);case"year":return _c(t,10);case"month":return Tc(t,12);default:throw new Error("Invalid rangeType: ".concat(e))}}function oh(e,t){switch(e){case"century":return kc(t);case"decade":return li(t);case"year":return ui(t);case"month":return Ho(t);case"day":return Cc(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function mS(e,t){switch(e){case"century":return F1(t);case"decade":return Xf(t);case"year":return Qf(t);case"month":return eh(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function pS(e,t){switch(e){case"decade":return Xf(t,-100);case"year":return Qf(t,-10);case"month":return eh(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function pu(e,t){switch(e){case"century":return Kf(t);case"decade":return Gf(t);case"year":return W1(t);case"month":return B1(t);case"day":return Y1(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function gS(e,t,n){var r=[t,n].sort(function(o,i){return o.getTime()-i.getTime()});return[yr(e,r[0]),oh(e,r[1])]}function ah(e,t,n){return n.map(function(r){return(t||di)(e,r)}).join(" – ")}function yS(e,t,n){return ah(e,t,Kf(n))}function ih(e,t,n){return ah(e,t,Gf(n))}function vS(e){return e.getDay()===new Date().getDay()}function sh(e,t){t===void 0&&(t=_t.ISO_8601);var n=e.getDay();switch(t){case _t.ISLAMIC:case _t.HEBREW:return n===sS||n===mu;case _t.ISO_8601:case _t.GREGORY:return n===mu||n===iS;default:throw new Error("Unsupported calendar type.")}}var gn="react-calendar__navigation";function wS(e){var t=e.activeStartDate,n=e.drillUp,r=e.formatMonthYear,o=r===void 0?nh:r,i=e.formatYear,s=i===void 0?di:i,l=e.locale,u=e.maxDate,d=e.minDate,h=e.navigationAriaLabel,p=h===void 0?"":h,v=e.navigationAriaLive,y=e.navigationLabel,k=e.next2AriaLabel,S=k===void 0?"":k,N=e.next2Label,T=N===void 0?"»":N,$=e.nextAriaLabel,P=$===void 0?"":$,C=e.nextLabel,X=C===void 0?"›":C,q=e.prev2AriaLabel,H=q===void 0?"":q,te=e.prev2Label,K=te===void 0?"«":te,ne=e.prevAriaLabel,U=ne===void 0?"":ne,ie=e.prevLabel,ue=ie===void 0?"‹":ie,E=e.setActiveStartDate,z=e.showDoubleView,D=e.view,Q=e.views,J=Q.indexOf(D)>0,j=D!=="century",G=dS(D,t),se=j?fS(D,t):void 0,ae=rh(D,t),fe=j?hS(D,t):void 0,we=function(){if(G.getFullYear()<0)return!0;var Ae=mS(D,t);return d&&d>=Ae}(),Se=j&&function(){if(se.getFullYear()<0)return!0;var Ae=pS(D,t);return d&&d>=Ae}(),Ne=u&&u<ae,Ce=j&&u&&u<fe;function je(){E(G,"prev")}function he(){E(se,"prev2")}function Pe(){E(ae,"next")}function Ge(){E(fe,"next2")}function Oe(Ae){var He=function(){switch(D){case"century":return yS(l,s,Ae);case"decade":return ih(l,s,Ae);case"year":return s(l,Ae);case"month":return o(l,Ae);default:throw new Error("Invalid view: ".concat(D,"."))}}();return y?y({date:Ae,label:He,locale:l||Vf()||void 0,view:D}):He}function Je(){var Ae="".concat(gn,"__label");return g.jsxs("button",{"aria-label":p,"aria-live":v,className:Ae,disabled:!J,onClick:n,style:{flexGrow:1},type:"button",children:[g.jsx("span",{className:"".concat(Ae,"__labelText ").concat(Ae,"__labelText--from"),children:Oe(t)}),z?g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"".concat(Ae,"__divider"),children:" – "}),g.jsx("span",{className:"".concat(Ae,"__labelText ").concat(Ae,"__labelText--to"),children:Oe(ae)})]}):null]})}return g.jsxs("div",{className:gn,children:[K!==null&&j?g.jsx("button",{"aria-label":H,className:"".concat(gn,"__arrow ").concat(gn,"__prev2-button"),disabled:Se,onClick:he,type:"button",children:K}):null,ue!==null&&g.jsx("button",{"aria-label":U,className:"".concat(gn,"__arrow ").concat(gn,"__prev-button"),disabled:we,onClick:je,type:"button",children:ue}),Je(),X!==null&&g.jsx("button",{"aria-label":P,className:"".concat(gn,"__arrow ").concat(gn,"__next-button"),disabled:Ne,onClick:Pe,type:"button",children:X}),T!==null&&j?g.jsx("button",{"aria-label":S,className:"".concat(gn,"__arrow ").concat(gn,"__next2-button"),disabled:Ce,onClick:Ge,type:"button",children:T}):null]})}var Ar=function(){return Ar=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ar.apply(this,arguments)},bS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function gu(e){return"".concat(e,"%")}function Oc(e){var t=e.children,n=e.className,r=e.count,o=e.direction,i=e.offset,s=e.style,l=e.wrap,u=bS(e,["children","className","count","direction","offset","style","wrap"]);return g.jsx("div",Ar({className:n,style:Ar({display:"flex",flexDirection:o,flexWrap:l?"wrap":"nowrap"},s)},u,{children:b.Children.map(t,function(d,h){var p=i&&h===0?gu(100*i/r):null;return b.cloneElement(d,Ar(Ar({},d.props),{style:{flexBasis:gu(100/r),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:p,marginInlineStart:p,marginInlineEnd:0}}))})}))}function xS(e,t,n){return t&&t>e?t:n&&n<e?n:e}function Po(e,t){return t[0]<=e&&t[1]>=e}function SS(e,t){return e[0]<=t[0]&&e[1]>=t[1]}function ch(e,t){return Po(e[0],t)||Po(e[1],t)}function yu(e,t,n){var r=ch(t,e),o=[];if(r){o.push(n);var i=Po(e[0],t),s=Po(e[1],t);i&&o.push("".concat(n,"Start")),s&&o.push("".concat(n,"End")),i&&s&&o.push("".concat(n,"BothEnds"))}return o}function kS(e){return Array.isArray(e)?e[0]!==null&&e[1]!==null:e!==null}function ES(e){if(!e)throw new Error("args is required");var t=e.value,n=e.date,r=e.hover,o="react-calendar__tile",i=[o];if(!n)return i;var s=new Date,l=function(){if(Array.isArray(n))return n;var y=e.dateType;if(!y)throw new Error("dateType is required when date is not an array of two dates");return pu(y,n)}();if(Po(s,l)&&i.push("".concat(o,"--now")),!t||!kS(t))return i;var u=function(){if(Array.isArray(t))return t;var y=e.valueType;if(!y)throw new Error("valueType is required when value is not an array of two dates");return pu(y,t)}();SS(u,l)?i.push("".concat(o,"--active")):ch(u,l)&&i.push("".concat(o,"--hasActive"));var d=yu(u,l,"".concat(o,"--range"));i.push.apply(i,d);var h=Array.isArray(t)?t:[t];if(r&&h.length===1){var p=r>u[0]?[u[0],r]:[r,u[0]],v=yu(p,l,"".concat(o,"--hover"));i.push.apply(i,v)}return i}function fi(e){for(var t=e.className,n=e.count,r=n===void 0?3:n,o=e.dateTransform,i=e.dateType,s=e.end,l=e.hover,u=e.offset,d=e.renderTile,h=e.start,p=e.step,v=p===void 0?1:p,y=e.value,k=e.valueType,S=[],N=h;N<=s;N+=v){var T=o(N);S.push(d({classes:ES({date:T,dateType:i,hover:l,value:y,valueType:k}),date:T}))}return g.jsx(Oc,{className:t,count:r,offset:u,wrap:!0,children:S})}function hi(e){var t=e.activeStartDate,n=e.children,r=e.classes,o=e.date,i=e.formatAbbr,s=e.locale,l=e.maxDate,u=e.maxDateTransform,d=e.minDate,h=e.minDateTransform,p=e.onClick,v=e.onMouseOver,y=e.style,k=e.tileClassName,S=e.tileContent,N=e.tileDisabled,T=e.view,$=b.useMemo(function(){var C={activeStartDate:t,date:o,view:T};return typeof k=="function"?k(C):k},[t,o,k,T]),P=b.useMemo(function(){var C={activeStartDate:t,date:o,view:T};return typeof S=="function"?S(C):S},[t,o,S,T]);return g.jsxs("button",{className:Bt(r,$),disabled:d&&h(d)>o||l&&u(l)<o||(N==null?void 0:N({activeStartDate:t,date:o,view:T})),onClick:p?function(C){return p(o,C)}:void 0,onFocus:v?function(){return v(o)}:void 0,onMouseOver:v?function(){return v(o)}:void 0,style:y,type:"button",children:[i?g.jsx("abbr",{"aria-label":i(s,o),children:n}):n,P]})}var $s=function(){return $s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},$s.apply(this,arguments)},_S=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},vu="react-calendar__century-view__decades__decade";function NS(e){var t=e.classes,n=t===void 0?[]:t,r=e.currentCentury,o=e.formatYear,i=o===void 0?di:o,s=_S(e,["classes","currentCentury","formatYear"]),l=s.date,u=s.locale,d=[];return n&&d.push.apply(d,n),d.push(vu),Vr(l).getFullYear()!==r&&d.push("".concat(vu,"--neighboringCentury")),g.jsx(hi,$s({},s,{classes:d,maxDateTransform:li,minDateTransform:nr,view:"century",children:ih(u,i,l)}))}var Rs=function(){return Rs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Rs.apply(this,arguments)},wu=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function TS(e){var t=e.activeStartDate,n=e.hover,r=e.showNeighboringCentury,o=e.value,i=e.valueType,s=wu(e,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),l=cS(t),u=l+(r?119:99);return g.jsx(fi,{className:"react-calendar__century-view__decades",dateTransform:nr,dateType:"decade",end:u,hover:n,renderTile:function(d){var h=d.date,p=wu(d,["date"]);return g.jsx(NS,Rs({},s,p,{activeStartDate:t,currentCentury:l,date:h}),h.getTime())},start:l,step:10,value:o,valueType:i})}var Ls=function(){return Ls=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ls.apply(this,arguments)};function CS(e){function t(){return g.jsx(TS,Ls({},e))}return g.jsx("div",{className:"react-calendar__century-view",children:t()})}var Fs=function(){return Fs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Fs.apply(this,arguments)},DS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},bu="react-calendar__decade-view__years__year";function OS(e){var t=e.classes,n=t===void 0?[]:t,r=e.currentDecade,o=e.formatYear,i=o===void 0?di:o,s=DS(e,["classes","currentDecade","formatYear"]),l=s.date,u=s.locale,d=[];return n&&d.push.apply(d,n),d.push(bu),nr(l).getFullYear()!==r&&d.push("".concat(bu,"--neighboringDecade")),g.jsx(hi,Fs({},s,{classes:d,maxDateTransform:ui,minDateTransform:qr,view:"decade",children:i(u,l)}))}var Ws=function(){return Ws=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ws.apply(this,arguments)},xu=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function jS(e){var t=e.activeStartDate,n=e.hover,r=e.showNeighboringDecade,o=e.value,i=e.valueType,s=xu(e,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),l=lS(t),u=l+(r?11:9);return g.jsx(fi,{className:"react-calendar__decade-view__years",dateTransform:qr,dateType:"year",end:u,hover:n,renderTile:function(d){var h=d.date,p=xu(d,["date"]);return g.jsx(OS,Ws({},s,p,{activeStartDate:t,currentDecade:l,date:h}),h.getTime())},start:l,value:o,valueType:i})}var Bs=function(){return Bs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Bs.apply(this,arguments)};function IS(e){function t(){return g.jsx(jS,Bs({},e))}return g.jsx("div",{className:"react-calendar__decade-view",children:t()})}var Hs=function(){return Hs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Hs.apply(this,arguments)},PS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},Su=function(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},MS="react-calendar__year-view__months__month";function AS(e){var t=e.classes,n=t===void 0?[]:t,r=e.formatMonth,o=r===void 0?rS:r,i=e.formatMonthYear,s=i===void 0?nh:i,l=PS(e,["classes","formatMonth","formatMonthYear"]),u=l.date,d=l.locale;return g.jsx(hi,Hs({},l,{classes:Su(Su([],n,!0),[MS],!1),formatAbbr:s,maxDateTransform:Ho,minDateTransform:xr,view:"year",children:o(d,u)}))}var zs=function(){return zs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},zs.apply(this,arguments)},ku=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function $S(e){var t=e.activeStartDate,n=e.hover,r=e.value,o=e.valueType,i=ku(e,["activeStartDate","hover","value","valueType"]),s=0,l=11,u=it(t);return g.jsx(fi,{className:"react-calendar__year-view__months",dateTransform:function(d){var h=new Date;return h.setFullYear(u,d,1),xr(h)},dateType:"month",end:l,hover:n,renderTile:function(d){var h=d.date,p=ku(d,["date"]);return g.jsx(AS,zs({},i,p,{activeStartDate:t,date:h}),h.getTime())},start:s,value:r,valueType:o})}var Ys=function(){return Ys=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ys.apply(this,arguments)};function RS(e){function t(){return g.jsx($S,Ys({},e))}return g.jsx("div",{className:"react-calendar__year-view",children:t()})}var Vs=function(){return Vs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Vs.apply(this,arguments)},LS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},rs="react-calendar__month-view__days__day";function FS(e){var t=e.calendarType,n=e.classes,r=n===void 0?[]:n,o=e.currentMonthIndex,i=e.formatDay,s=i===void 0?tS:i,l=e.formatLongDate,u=l===void 0?nS:l,d=LS(e,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),h=d.date,p=d.locale,v=[];return r&&v.push.apply(v,r),v.push(rs),sh(h,t)&&v.push("".concat(rs,"--weekend")),h.getMonth()!==o&&v.push("".concat(rs,"--neighboringMonth")),g.jsx(hi,Vs({},d,{classes:v,formatAbbr:u,maxDateTransform:Cc,minDateTransform:zo,view:"month",children:s(p,h)}))}var qs=function(){return qs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},qs.apply(this,arguments)},Eu=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function WS(e){var t=e.activeStartDate,n=e.calendarType,r=e.hover,o=e.showFixedNumberOfWeeks,i=e.showNeighboringMonth,s=e.value,l=e.valueType,u=Eu(e,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),d=it(t),h=tr(t),p=o||i,v=Io(t,n),y=p?0:v,k=(p?-v:0)+1,S=function(){if(o)return k+6*7-1;var N=th(t);if(i){var T=new Date;T.setFullYear(d,h,N),T.setHours(0,0,0,0);var $=7-Io(T,n)-1;return N+$}return N}();return g.jsx(fi,{className:"react-calendar__month-view__days",count:7,dateTransform:function(N){var T=new Date;return T.setFullYear(d,h,N),zo(T)},dateType:"day",hover:r,end:S,renderTile:function(N){var T=N.date,$=Eu(N,["date"]);return g.jsx(FS,qs({},u,$,{activeStartDate:t,calendarType:n,currentMonthIndex:h,date:T}),T.getTime())},offset:y,start:k,value:s,valueType:l})}var lh="react-calendar__month-view__weekdays",os="".concat(lh,"__weekday");function BS(e){for(var t=e.calendarType,n=e.formatShortWeekday,r=n===void 0?oS:n,o=e.formatWeekday,i=o===void 0?aS:o,s=e.locale,l=e.onMouseLeave,u=new Date,d=xr(u),h=it(d),p=tr(d),v=[],y=1;y<=7;y+=1){var k=new Date(h,p,y-Io(d,t)),S=i(s,k);v.push(g.jsx("div",{className:Bt(os,vS(k)&&"".concat(os,"--current"),sh(k,t)&&"".concat(os,"--weekend")),children:g.jsx("abbr",{"aria-label":S,title:S,children:r(s,k).replace(".","")})},y))}return g.jsx(Oc,{className:lh,count:7,onFocus:l,onMouseOver:l,children:v})}var za=function(){return za=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},za.apply(this,arguments)},_u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},Nu="react-calendar__tile";function HS(e){var t=e.onClickWeekNumber,n=e.weekNumber,r=g.jsx("span",{children:n});if(t){var o=e.date,i=e.onClickWeekNumber,s=e.weekNumber,l=_u(e,["date","onClickWeekNumber","weekNumber"]);return g.jsx("button",za({},l,{className:Nu,onClick:function(u){return i(s,o,u)},type:"button",children:r}))}else{e.date,e.onClickWeekNumber,e.weekNumber;var l=_u(e,["date","onClickWeekNumber","weekNumber"]);return g.jsx("div",za({},l,{className:Nu,children:r}))}}function zS(e){var t=e.activeStartDate,n=e.calendarType,r=e.onClickWeekNumber,o=e.onMouseLeave,i=e.showFixedNumberOfWeeks,s=function(){if(i)return 6;var d=th(t),h=Io(t,n),p=d-(7-h);return 1+Math.ceil(p/7)}(),l=function(){for(var d=it(t),h=tr(t),p=ci(t),v=[],y=0;y<s;y+=1)v.push(As(new Date(d,h,p+y*7),n));return v}(),u=l.map(function(d){return uS(d,n)});return g.jsx(Oc,{className:"react-calendar__month-view__weekNumbers",count:s,direction:"column",onFocus:o,onMouseOver:o,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:u.map(function(d,h){var p=l[h];if(!p)throw new Error("date is not defined");return g.jsx(HS,{date:p,onClickWeekNumber:r,weekNumber:d},d)})})}var Ks=function(){return Ks=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ks.apply(this,arguments)},YS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function VS(e){if(e)for(var t=0,n=Object.entries(V1);t<n.length;t++){var r=n[t],o=r[0],i=r[1];if(i.includes(e))return o}return _t.ISO_8601}function qS(e){var t=e.activeStartDate,n=e.locale,r=e.onMouseLeave,o=e.showFixedNumberOfWeeks,i=e.calendarType,s=i===void 0?VS(n):i,l=e.formatShortWeekday,u=e.formatWeekday,d=e.onClickWeekNumber,h=e.showWeekNumbers,p=YS(e,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function v(){return g.jsx(BS,{calendarType:s,formatShortWeekday:l,formatWeekday:u,locale:n,onMouseLeave:r})}function y(){return h?g.jsx(zS,{activeStartDate:t,calendarType:s,onClickWeekNumber:d,onMouseLeave:r,showFixedNumberOfWeeks:o}):null}function k(){return g.jsx(WS,Ks({calendarType:s},p))}var S="react-calendar__month-view";return g.jsx("div",{className:Bt(S,h?"".concat(S,"--weekNumbers"):""),children:g.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[y(),g.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[v(),k()]})]})})}var $r=function(){return $r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},$r.apply(this,arguments)},xa="react-calendar",Ca=["century","decade","year","month"],KS=["decade","year","month","day"],jc=new Date;jc.setFullYear(1,0,1);jc.setHours(0,0,0,0);var US=new Date(864e13);function vo(e){return e instanceof Date?e:new Date(e)}function uh(e,t){return Ca.slice(Ca.indexOf(e),Ca.indexOf(t)+1)}function XS(e,t,n){var r=uh(t,n);return r.indexOf(e)!==-1}function Ic(e,t,n){return e&&XS(e,t,n)?e:n}function dh(e){var t=Ca.indexOf(e);return KS[t]}function GS(e,t){var n=Array.isArray(e)?e[t]:e;if(!n)return null;var r=vo(n);if(Number.isNaN(r.getTime()))throw new Error("Invalid date: ".concat(e));return r}function fh(e,t){var n=e.value,r=e.minDate,o=e.maxDate,i=e.maxDetail,s=GS(n,t);if(!s)return null;var l=dh(i),u=function(){switch(t){case 0:return yr(l,s);case 1:return oh(l,s);default:throw new Error("Invalid index value: ".concat(t))}}();return xS(u,r,o)}var Pc=function(e){return fh(e,0)},hh=function(e){return fh(e,1)},ZS=function(e){return[Pc,hh].map(function(t){return t(e)})};function mh(e){var t=e.maxDate,n=e.maxDetail,r=e.minDate,o=e.minDetail,i=e.value,s=e.view,l=Ic(s,o,n),u=Pc({value:i,minDate:r,maxDate:t,maxDetail:n})||new Date;return yr(l,u)}function QS(e){var t=e.activeStartDate,n=e.defaultActiveStartDate,r=e.defaultValue,o=e.defaultView,i=e.maxDate,s=e.maxDetail,l=e.minDate,u=e.minDetail,d=e.value,h=e.view,p=Ic(h,u,s),v=t||n;return v?yr(p,v):mh({maxDate:i,maxDetail:s,minDate:l,minDetail:u,value:d||r,view:h||o})}function as(e){return e&&(!Array.isArray(e)||e.length===1)}function Sa(e,t){return e instanceof Date&&t instanceof Date&&e.getTime()===t.getTime()}var is=b.forwardRef(function(t,n){var r=t.activeStartDate,o=t.allowPartialRange,i=t.calendarType,s=t.className,l=t.defaultActiveStartDate,u=t.defaultValue,d=t.defaultView,h=t.formatDay,p=t.formatLongDate,v=t.formatMonth,y=t.formatMonthYear,k=t.formatShortWeekday,S=t.formatWeekday,N=t.formatYear,T=t.goToRangeStartOnSelect,$=T===void 0?!0:T,P=t.inputRef,C=t.locale,X=t.maxDate,q=X===void 0?US:X,H=t.maxDetail,te=H===void 0?"month":H,K=t.minDate,ne=K===void 0?jc:K,U=t.minDetail,ie=U===void 0?"century":U,ue=t.navigationAriaLabel,E=t.navigationAriaLive,z=t.navigationLabel,D=t.next2AriaLabel,Q=t.next2Label,J=t.nextAriaLabel,j=t.nextLabel,G=t.onActiveStartDateChange,se=t.onChange,ae=t.onClickDay,fe=t.onClickDecade,we=t.onClickMonth,Se=t.onClickWeekNumber,Ne=t.onClickYear,Ce=t.onDrillDown,je=t.onDrillUp,he=t.onViewChange,Pe=t.prev2AriaLabel,Ge=t.prev2Label,Oe=t.prevAriaLabel,Je=t.prevLabel,Ae=t.returnValue,He=Ae===void 0?"start":Ae,Ke=t.selectRange,ze=t.showDoubleView,Te=t.showFixedNumberOfWeeks,st=t.showNavigation,vt=st===void 0?!0:st,dt=t.showNeighboringCentury,Pt=t.showNeighboringDecade,kt=t.showNeighboringMonth,wt=kt===void 0?!0:kt,Tt=t.showWeekNumbers,pt=t.tileClassName,Mt=t.tileContent,Et=t.tileDisabled,Ct=t.value,At=t.view,Xe=b.useState(l),mt=Xe[0],bt=Xe[1],ce=b.useState(null),ee=ce[0],pe=ce[1],me=b.useState(Array.isArray(u)?u.map(function($e){return $e!==null?vo($e):null}):u!=null?vo(u):null),Ee=me[0],le=me[1],Le=b.useState(d),Ye=Le[0],$t=Le[1],Ve=r||mt||QS({activeStartDate:r,defaultActiveStartDate:l,defaultValue:u,defaultView:d,maxDate:q,maxDetail:te,minDate:ne,minDetail:ie,value:Ct,view:At}),ct=function(){var $e=function(){return Ke&&as(Ee)?Ee:Ct!==void 0?Ct:Ee}();return $e?Array.isArray($e)?$e.map(function(qe){return qe!==null?vo(qe):null}):$e!==null?vo($e):null:null}(),cn=dh(te),et=Ic(At||Ye,ie,te),gt=uh(ie,te),ln=Ke?ee:null,xn=gt.indexOf(et)<gt.length-1,Sn=gt.indexOf(et)>0,Ze=b.useCallback(function($e){var qe=function(){switch(He){case"start":return Pc;case"end":return hh;case"range":return ZS;default:throw new Error("Invalid returnValue.")}}();return qe({maxDate:q,maxDetail:te,minDate:ne,value:$e})},[q,te,ne,He]),at=b.useCallback(function($e,qe){bt($e);var nt={action:qe,activeStartDate:$e,value:ct,view:et};G&&!Sa(Ve,$e)&&G(nt)},[Ve,G,ct,et]),$n=b.useCallback(function($e,qe){var nt=function(){switch(et){case"century":return fe;case"decade":return Ne;case"year":return we;case"month":return ae;default:throw new Error("Invalid view: ".concat(et,"."))}}();nt&&nt($e,qe)},[ae,fe,we,Ne,et]),un=b.useCallback(function($e,qe){if(xn){$n($e,qe);var nt=gt[gt.indexOf(et)+1];if(!nt)throw new Error("Attempted to drill down from the lowest view.");bt($e),$t(nt);var ft={action:"drillDown",activeStartDate:$e,value:ct,view:nt};G&&!Sa(Ve,$e)&&G(ft),he&&et!==nt&&he(ft),Ce&&Ce(ft)}},[Ve,xn,G,$n,Ce,he,ct,et,gt]),dn=b.useCallback(function(){if(Sn){var $e=gt[gt.indexOf(et)-1];if(!$e)throw new Error("Attempted to drill up from the highest view.");var qe=yr($e,Ve);bt(qe),$t($e);var nt={action:"drillUp",activeStartDate:qe,value:ct,view:$e};G&&!Sa(Ve,qe)&&G(nt),he&&et!==$e&&he(nt),je&&je(nt)}},[Ve,Sn,G,je,he,ct,et,gt]),fn=b.useCallback(function($e,qe){var nt=ct;$n($e,qe);var ft=Ke&&!as(nt),Dt;if(Ke)if(ft)Dt=yr(cn,$e);else{if(!nt)throw new Error("previousValue is required");if(Array.isArray(nt))throw new Error("previousValue must not be an array");Dt=gS(cn,nt,$e)}else Dt=Ze($e);var kn=!Ke||ft||$?mh({maxDate:q,maxDetail:te,minDate:ne,minDetail:ie,value:Dt,view:et}):null;qe.persist(),bt(kn),le(Dt);var rt={action:"onChange",activeStartDate:kn,value:Dt,view:et};if(G&&!Sa(Ve,kn)&&G(rt),se)if(Ke){var Ut=as(Dt);if(!Ut)se(Dt||null,qe);else if(o){if(Array.isArray(Dt))throw new Error("value must not be an array");se([Dt||null,null],qe)}}else se(Dt||null,qe)},[Ve,o,Ze,$,q,te,ne,ie,G,se,$n,Ke,ct,cn,et]);function Kr($e){pe($e)}function Wt(){pe(null)}b.useImperativeHandle(n,function(){return{activeStartDate:Ve,drillDown:un,drillUp:dn,onChange:fn,setActiveStartDate:at,value:ct,view:et}},[Ve,un,dn,fn,at,ct,et]);function Jt($e){var qe=$e?rh(et,Ve):yr(et,Ve),nt=xn?un:fn,ft={activeStartDate:qe,hover:ln,locale:C,maxDate:q,minDate:ne,onClick:nt,onMouseOver:Ke?Kr:void 0,tileClassName:pt,tileContent:Mt,tileDisabled:Et,value:ct,valueType:cn};switch(et){case"century":return g.jsx(CS,$r({formatYear:N,showNeighboringCentury:dt},ft));case"decade":return g.jsx(IS,$r({formatYear:N,showNeighboringDecade:Pt},ft));case"year":return g.jsx(RS,$r({formatMonth:v,formatMonthYear:y},ft));case"month":return g.jsx(qS,$r({calendarType:i,formatDay:h,formatLongDate:p,formatShortWeekday:k,formatWeekday:S,onClickWeekNumber:Se,onMouseLeave:Ke?Wt:void 0,showFixedNumberOfWeeks:typeof Te<"u"?Te:ze,showNeighboringMonth:wt,showWeekNumbers:Tt},ft));default:throw new Error("Invalid view: ".concat(et,"."))}}function Yt(){return vt?g.jsx(wS,{activeStartDate:Ve,drillUp:dn,formatMonthYear:y,formatYear:N,locale:C,maxDate:q,minDate:ne,navigationAriaLabel:ue,navigationAriaLive:E,navigationLabel:z,next2AriaLabel:D,next2Label:Q,nextAriaLabel:J,nextLabel:j,prev2AriaLabel:Pe,prev2Label:Ge,prevAriaLabel:Oe,prevLabel:Je,setActiveStartDate:at,showDoubleView:ze,view:et,views:gt}):null}var Rn=Array.isArray(ct)?ct:[ct];return g.jsxs("div",{className:Bt(xa,Ke&&Rn.length===1&&"".concat(xa,"--selectRange"),ze&&"".concat(xa,"--doubleView"),s),ref:P,children:[Yt(),g.jsxs("div",{className:"".concat(xa,"__viewContainer"),onBlur:Ke?Wt:void 0,onMouseLeave:Ke?Wt:void 0,children:[Jt(),ze?Jt(!0):null]})]})});function JS({onSelect:e,onClose:t,showTime:n=!0,isBetweenMode:r=!1}){const[o,i]=b.useState(new Date),[s,l]=b.useState(new Date),[u,d]=b.useState(Lt(new Date,"HH")),[h,p]=b.useState(Lt(new Date,"mm")),[v,y]=b.useState(Lt(new Date,"ss")),[k,S]=b.useState(Lt(new Date,"HH")),[N,T]=b.useState(Lt(new Date,"mm")),[$,P]=b.useState(Lt(new Date,"ss")),[C,X]=b.useState(!1),[q,H]=b.useState(!1),te=b.useRef(null);b.useEffect(()=>{function U(ie){te.current&&!te.current.contains(ie.target)&&t()}return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[t]),b.useEffect(()=>{function U(ie){ie.key==="Enter"&&(ie.preventDefault(),ie.stopPropagation(),K(),t())}return document.addEventListener("keydown",U),()=>document.removeEventListener("keydown",U)},[o,s,u,h,v,k,N,$,r,t]);const K=()=>{if(r){const U=new Date(o);U.setHours(parseInt(u),parseInt(h),parseInt(v));const ie=new Date(s);ie.setHours(parseInt(k),parseInt(N),parseInt($)),e({start:U,end:ie})}else{const U=new Date(o);U.setHours(parseInt(u),parseInt(h),parseInt(v)),e({start:U})}t()},ne=({label:U,hours:ie,minutes:ue,seconds:E,setHours:z,setMinutes:D,setSeconds:Q})=>g.jsxs("div",{className:"flex flex-col gap-2",children:[g.jsx("div",{className:"text-sm font-medium text-gray-700",children:U}),g.jsxs("div",{className:"flex justify-between items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"number",min:"0",max:"23",value:ie,onChange:J=>z(J.target.value.padStart(2,"0")),className:"w-16 px-3 py-2 bg-white border rounded-md text-center text-lg font-medium text-gray-700"}),g.jsx("span",{className:"text-gray-500 text-sm",children:"hrs"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"number",min:"0",max:"59",value:ue,onChange:J=>D(J.target.value.padStart(2,"0")),className:"w-16 px-3 py-2 bg-white border rounded-md text-center text-lg font-medium text-gray-700"}),g.jsx("span",{className:"text-gray-500 text-sm",children:"min"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"number",min:"0",max:"59",value:E,onChange:J=>Q(J.target.value.padStart(2,"0")),className:"w-16 px-3 py-2 bg-white border rounded-md text-center text-lg font-medium text-gray-700"}),g.jsx("span",{className:"text-gray-500 text-sm",children:"sec"})]})]})]});return g.jsxs("div",{ref:te,className:"bg-white rounded-lg shadow-xl p-4 w-[400px]",style:{marginTop:"0.5rem"},children:[g.jsxs("div",{className:"flex items-center justify-between mb-4 border-b pb-2",children:[g.jsx("h3",{className:"text-lg font-medium text-gray-700",children:r?"Select Date Range":"Select Date"}),g.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:"✕"})]}),r?g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsxs("button",{onClick:()=>X(!C),className:"flex items-center gap-2 hover:bg-gray-50 px-2 py-1 rounded-md",children:[g.jsx("span",{className:"text-gray-600",children:"📅"}),g.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Start: ",Lt(o,"EEE MMM dd yyyy")]})]}),C&&g.jsx(is,{onChange:U=>{i(U),X(!1)},value:o,className:"border-0 mt-2"}),n&&g.jsx(ne,{label:"Start Time",hours:u,minutes:h,seconds:v,setHours:d,setMinutes:p,setSeconds:y})]}),g.jsxs("div",{children:[g.jsxs("button",{onClick:()=>H(!q),className:"flex items-center gap-2 hover:bg-gray-50 px-2 py-1 rounded-md",children:[g.jsx("span",{className:"text-gray-600",children:"📅"}),g.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["End: ",Lt(s,"EEE MMM dd yyyy")]})]}),q&&g.jsx(is,{onChange:U=>{l(U),H(!1)},value:s,className:"border-0 mt-2"}),n&&g.jsx(ne,{label:"End Time",hours:k,minutes:N,seconds:$,setHours:S,setMinutes:T,setSeconds:P})]})]}):g.jsxs(g.Fragment,{children:[g.jsxs("button",{onClick:()=>X(!C),className:"flex items-center gap-2 hover:bg-gray-50 px-2 py-1 rounded-md mb-4",children:[g.jsx("span",{className:"text-gray-600",children:"📅"}),g.jsx("span",{className:"text-lg font-medium text-gray-700",children:Lt(o,"EEE MMM dd yyyy")})]}),C&&g.jsx("div",{className:"mb-4",children:g.jsx(is,{onChange:U=>{i(U),X(!1)},value:o,className:"border-0"})}),n&&g.jsx(ne,{label:"Time",hours:u,minutes:h,seconds:v,setHours:d,setMinutes:p,setSeconds:y})]}),g.jsx("button",{onClick:K,className:"w-full mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Apply"})]})}function ek({isOpen:e,onClose:t}){const[n,r]=b.useState([]),[o,i]=b.useState(""),[s,l]=b.useState([]),[u,d]=b.useState("");b.useEffect(()=>{e&&(async()=>{const N=await Oo("namespaces"),T=await Oo("searchParameters");N&&r(N),T&&l(T)})()},[e]);const h=async()=>{await Ns("namespaces",n),await Ns("searchParameters",s),t()},p=()=>{o&&!n.includes(o)&&(r([...n,o]),i(""))},v=S=>{r(n.filter((N,T)=>T!==S))},y=()=>{const S=u.split(",").map(N=>N.trim()).filter(N=>N&&!s.includes(N));S.length&&(l([...s,...S]),d(""))},k=S=>{l(s.filter((N,T)=>T!==S))};return e?g.jsxs(Lf,{open:e,onClose:t,className:"relative z-[2000]",children:[g.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),g.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:g.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:g.jsxs(Sc,{className:"w-[600px] transform overflow-hidden rounded-lg bg-white text-left align-middle shadow-xl transition-all",children:[g.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[g.jsx("h2",{className:"text-xl font-semibold",children:"Search Settings"}),g.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full","aria-label":"Close",children:g.jsx(pr,{size:20})})]}),g.jsxs("div",{className:"p-6 overflow-y-auto",children:[g.jsxs("div",{className:"mb-6",children:[g.jsx("h3",{className:"text-lg font-medium mb-2",children:"Namespaces"}),g.jsxs("div",{className:"flex gap-2 mb-2",children:[g.jsx("input",{type:"text",value:o,onChange:S=>i(S.target.value),onKeyDown:S=>S.key==="Enter"&&p(),placeholder:"Add namespace...",className:"flex-1 p-2 border rounded"}),g.jsx("button",{onClick:p,className:"p-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:g.jsx(Xl,{size:20})})]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((S,N)=>g.jsxs("div",{className:"bg-gray-100 px-3 py-1 rounded-full flex items-center gap-2",children:[g.jsx("span",{children:S}),g.jsx("button",{onClick:()=>v(N),className:"hover:text-red-500",children:g.jsx(pr,{size:16})})]},N))})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-medium mb-2",children:"Search Parameters"}),g.jsxs("div",{className:"flex gap-2 mb-2",children:[g.jsx("input",{type:"text",value:u,onChange:S=>d(S.target.value),onKeyDown:S=>S.key==="Enter"&&y(),placeholder:"Add parameters (comma-separated)...",className:"flex-1 p-2 border rounded"}),g.jsx("button",{onClick:y,className:"p-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:g.jsx(Xl,{size:20})})]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:s.map((S,N)=>g.jsxs("div",{className:"bg-gray-100 px-3 py-1 rounded-full flex items-center gap-2",children:[g.jsx("span",{children:S}),g.jsx("button",{onClick:()=>k(N),className:"hover:text-red-500",children:g.jsx(pr,{size:16})})]},N))})]})]}),g.jsxs("div",{className:"p-4 border-t flex justify-end gap-2",children:[g.jsx("button",{onClick:t,className:"px-4 py-2 border rounded hover:bg-gray-50",children:"Cancel"}),g.jsx("button",{onClick:h,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Save"})]})]})})})]}):null}const tk=async(e,t,n)=>{n||(n="");const r=await fetch(`http://localhost:7531/workflow?namespace=${e}&id=${t}&runId=${n}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()},nk=async()=>{try{return(await fetch("http://localhost:7531/health",{method:"GET"})).status===200}catch{return!1}},Yo=new Set,ph=e=>{Yo.add(e),window.dispatchEvent(new CustomEvent("workflow-loading-change",{detail:{workflowId:e,isLoading:!0}}))},gh=e=>{Yo.delete(e),window.dispatchEvent(new CustomEvent("workflow-loading-change",{detail:{workflowId:e,isLoading:!1}}))};function rk(e){return Yo.has(e)}async function Us(e,t,n,r=0){if(Yo.has(t))return n;const o=[{id:t,runId:n,workflowTaskCompletedEventId:"-1",depth:r}],i=new Set;for(;o.length>0;){const{id:s,runId:l,workflowTaskCompletedEventId:u,depth:d}=o.shift();if(i.has(s))continue;const h=await Ro(s,l);if(h&&!h.isPlaceholder){i.add(s);continue}ph(s);try{const p=await tk(e,s,l);i.add(s);const v=[];for(const y of p)y.type==="workflow"?await _s({...y,workflowTaskCompletedEventId:u,isPlaceholder:!1}):y.type==="childWorkflow"?(v.push({workflowId:y.workflowId,workflowRunId:y.runId,workflowTaskCompletedEventId:y.workflowTaskCompletedEventId}),await _s({...y,type:"workflow",isPlaceholder:!0})):y.type==="activity"&&await ff(y);d>0&&v.length>0&&v.forEach(y=>{o.push({id:y.workflowId,runId:y.workflowRunId,workflowTaskCompletedEventId:y.workflowTaskCompletedEventId,depth:d-1})})}catch(p){console.error("Error processing workflow:",p)}finally{gh(s)}}return n}async function ok(e,t,n){try{ph(t);const r=await pc(t,n),o=[];for(const s of r){const l=s.workflowId;if(Yo.has(l))continue;const u=await Ro(l,n);u&&!u.isPlaceholder||o.push(s)}const i=o.map(async s=>{try{await Us(e,s.workflowId,s.runId,1)}catch(l){console.error("Error loading workflow:",l)}});await Promise.all(i)}catch(r){console.error("Error checking child workflow data:",r)}finally{gh(t)}}const Tu=async(e,t)=>{const n=await fetch(`http://localhost:7531/search?namespace=${e}&query=${encodeURIComponent(t)}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return n.json()};function yh({isOpen:e,onClose:t,onTemporalModalSubmit:n,onShowNodeData:r}){const[o,i]=b.useState(""),[s,l]=b.useState([]),[u,d]=b.useState([]),[h,p]=b.useState(!1),[v,y]=b.useState(-1),[k,S]=b.useState(!1),[N,T]=b.useState(!1),$=W.useRef(null),[P,C]=b.useState(null),[X,q]=b.useState(null),H=b.useRef(null),[te,K]=b.useState(!1),[ne,U]=b.useState([]),[ie,ue]=b.useState([]),[E,z]=b.useState(""),[D,Q]=b.useState([]),[J,j]=b.useState(1),[G,se]=b.useState(1),[ae,fe]=b.useState([{id:"status",label:"Status",width:120},{id:"taskQueue",label:"Task Queue",width:150},{id:"workflowType",label:"Workflow Type",width:180},{id:"execution",label:"Workflow ID",width:200},{id:"execution",label:"Run ID",width:200},{id:"duration",label:"Duration",width:180},{id:"startTime",label:"Start Time",width:180},{id:"closeTime",label:"Close Time",width:180}]),[we,Se]=b.useState(!1),[Ne,Ce]=b.useState(!1),[je,he]=b.useState(!1),Pe=async()=>{const ce=await Oo("searchParameters");if(ce){const ee=ce.map(pe=>({id:pe,label:pe,type:"text"}));U(ee)}},Ge=async()=>{const ce=await Oo("namespaces")||[];ue(ce),!E&&ce.length>0&&z(ce[0])};b.useEffect(()=>{e&&Pe()},[e]),b.useEffect(()=>{Ge()},[e]),b.useEffect(()=>{(async()=>{if(e&&E&&D.length===0){Se(!0);try{const ee=await Tu(E,"");Q(ee.executions||[]),se(Math.min(Math.ceil(ee.executions.length/100),10)),j(1)}catch(ee){console.error("Error executing initial search:",ee)}finally{Se(!1)}}})()},[e,E]),b.useEffect(()=>{if(je){const ce=()=>{document.querySelectorAll('[data-workflow-loaded="true"]').length>0?(he(!1),t()):setTimeout(ce,500)};setTimeout(ce,1e3)}},[je,t]);const Oe=ce=>{if(ce.type==="datetime")return ba.map(pe=>({text:`${ce.label} ${pe.label}`,disabled:!1}));if(ce.type==="status"){const pe=s.filter(me=>me.field==="ExecutionStatus").map(me=>me.value);return Ji.filter(me=>!pe.includes(me.value)).map(me=>({text:`${ce.label} = '${me.value}'`,displayText:me.value,disabled:!1,color:me.color}))}return au.filter(pe=>["equals","notEquals","starts_with"].includes(pe.id)).map(pe=>({text:`${ce.label} ${pe.label}`,disabled:!1}))},Je=()=>s.filter(ce=>ce.field==="ExecutionStatus").flatMap(ce=>{const ee=ce.raw.match(/Status\s*=\s*'([^']+)'/gi);return ee?ee.map(pe=>{const me=pe.match(/Status\s*=\s*['"]([^'"]+)['"]/i);return(me==null?void 0:me[1])??""}):[]}),Ae=ce=>{const ee=ce.toLowerCase().trim();if(ee.startsWith("status")){const Ee=Je();return Ji.filter(le=>!Ee.includes(le.value)).map(le=>{var Le;return{text:`Status = '${le.value}'`,fullText:s.some(Ye=>Ye.field==="ExecutionStatus")?`${(Le=s.find(Ye=>Ye.field==="ExecutionStatus"))==null?void 0:Le.raw} OR Status = '${le.value}'`:`Status = '${le.value}'`,displayText:le.value,disabled:!1,color:le.color}})}if(k)return[];const pe=[...Tn,...ne],me=new Set(s.map(Ee=>Ee.field));return pe.filter(Ee=>Ee.label.toLowerCase().includes(ee)).map(Ee=>({text:Ee.label,disabled:Ee.type!=="status"&&me.has(Ee.id)}))},He=ce=>{const ee=ce.target.value;if(i(ee),ee.endsWith(" ")){const pe=ee.trim().split(/\s+/);if(pe.length===2){const[me,Ee]=pe,le=Tn.find(Ye=>me.toLowerCase()===Ye.label.toLowerCase()&&Ye.type==="datetime"),Le=ba.some(Ye=>Ye.label===Ee||Ye.alternatives.includes(Ee));le&&Le&&(q(le.label),wt())}}if((!ee.trim()||ee.trim().toLowerCase()==="status")&&T(!1),!N||ee.trim().toLowerCase()==="status"){y(-1);const pe=Ae(ee);d(pe),pe.length>0&&y(0)}},Ke=ce=>ce.match(/^Status\s*=\s*['"][^'"]+['"](\s+OR\s+Status\s*=\s*['"][^'"]+['"])*$/i)?{field:"ExecutionStatus",operator:"equals",value:ce,raw:ce,isValid:!0}:null,ze=ce=>{if(!h){if(ce.key==="Backspace"&&o.length<=1&&T(!1),u.length>0&&!N&&(ce.key==="ArrowDown"?(ce.preventDefault(),y(ee=>ee<u.length-1?ee+1:ee)):ce.key==="ArrowUp"?(ce.preventDefault(),y(ee=>ee>0?ee-1:0)):ce.key==="Enter"&&v>=0&&(ce.preventDefault(),dt(u[v]))),ce.key==="Enter"||ce.key==="Tab"){ce.preventDefault();const ee=o.trim();if(ee.length===0&&s.length>0){st();return}if(ee.toLowerCase().startsWith("status")){const pe=Ke(ee);pe&&(l(me=>[...me.filter(Ee=>Ee.field!=="ExecutionStatus"),pe]),i(""),T(!1),d([]))}else{const pe=Pt(ee);pe&&pe.isValid&&(l(me=>[...me,pe]),i(""),T(!1),d([]))}}else if(ce.key==="Backspace"&&o.trim()===""&&s.length>0){ce.preventDefault();const ee=s[s.length-1];ee.field==="ExecutionStatus"?(l(s.filter(pe=>pe.field!=="ExecutionStatus")),i(ee.raw),T(!0),d([])):vt(s.length-1)}if(ce.key===" "){const ee=o.trim().split(/\s+/),pe=ee[0],me=Tn.find(Ee=>pe.toLowerCase()===Ee.label.toLowerCase()&&Ee.type==="datetime");if(me&&(q(me.label),ee.length===2)){const Ee=ee[1];ba.some(Le=>Le.label===Ee||Le.alternatives.includes(Ee))&&wt()}}}},Te=ce=>{const[ee,pe]=o.trim().split(/\s+/);if(Tn.find(Ee=>ee.toLowerCase()===Ee.label.toLowerCase())&&pe){let Ee;if(pe.toLowerCase()==="between"&&ce.start&&ce.end){const le=Lt(ce.start,"yyyy-MM-dd HH:mm:ss"),Le=Lt(ce.end,"yyyy-MM-dd HH:mm:ss"),Ye=`${ee} between '${le}' and '${Le}'`;Ee=Pt(Ye)}else if(ce.start){const le=Lt(ce.start,"yyyy-MM-dd HH:mm:ss"),Le=`${ee} ${pe} '${le}'`;Ee=Pt(Le)}Ee&&(l(le=>[...le,Ee]),i(""),p(!1),q(null),d([]),y(-1))}},st=async()=>{const ce=[];s.forEach(pe=>{if(pe.field==="ExecutionStatus"){const me=pe.raw.split(/\s+OR\s+/).map(Ee=>{const le=Ee.match(/Status\s*=\s*['"]([^'"]+)['"]/i);return le?`\`ExecutionStatus\`="${le[1]}"`:null}).filter(Boolean);me.length>0&&ce.push(`(${me.join(" OR ")})`)}else if(pe.operator==="between"&&pe.value){const[me,Ee]=pe.value.split(" and ");ce.push(`\`${pe.field}\` BETWEEN "${me}" AND "${Ee}"`)}else ce.push(`\`${pe.field}\` ${pe.operator} "${pe.value}"`)});const ee=ce.join(" AND ");console.log("searchQuery",ee),Se(!0);try{const pe=await Tu(E,ee);Q(pe.executions||[]),se(Math.min(Math.ceil(pe.executions.length/100),10)),j(1)}catch(pe){console.error("Error executing search:",pe)}finally{Se(!1)}},vt=ce=>{var me;const ee=s[ce],pe=Tn.find(Ee=>Ee.id===ee.field);if((pe==null?void 0:pe.type)==="datetime"){l(s.filter((Ee,le)=>le!==ce));return}if(ee.field==="ExecutionStatus"){const Ee=s.filter(le=>le.field!=="ExecutionStatus");l(Ee),i(ee.raw),T(!0),d([])}else l(s.filter((Ee,le)=>le!==ce)),i(ee.raw);S(!1),(me=H.current)==null||me.focus()},dt=ce=>{var ee;if(!ce.disabled){if(ce.color){const pe=s.filter(le=>le.field==="ExecutionStatus"),me=s.filter(le=>le.field!=="ExecutionStatus");let Ee;if(pe.length>0){const le=`${pe[0].raw} OR Status = '${ce.displayText}'`;Ee=Ke(le)}else Ee=Ke(`Status = '${ce.displayText}'`);if(Ee){const le=s.findIndex(Ye=>Ye.field==="ExecutionStatus"),Le=[...me];le>=0?Le.splice(le,0,Ee):Le.push(Ee),l(Le)}i(""),d([]),T(!1)}else{const pe=ce.text.split(/\s+/);if(i(ce.text+" "),pe.length===2){const[me,Ee]=pe,le=Tn.find(Ye=>me.toLowerCase()===Ye.label.toLowerCase()&&Ye.type==="datetime"),Le=ba.some(Ye=>Ye.label===Ee||Ye.alternatives.includes(Ee));le&&Le&&(q(le.label),requestAnimationFrame(()=>{wt()}))}else{const me=Tn.find(Ee=>Ee.label===ce.text);d(me?Oe(me):[]),y(0),S(!1),p(!1)}}(ee=H.current)==null||ee.focus()}},Pt=ce=>{if(!ce.trim())return null;const ee=/^([a-zA-Z]+)\s*(=|!=|>|>=|<|<=|between|starts\s*with)\s*['"]([^'"]+)['"](?:\s+and\s+['"]([^'"]+)['"])?$/,pe=ce.match(ee);if(!pe)return{field:"",operator:"",value:null,raw:ce,isValid:!1};let[,me,Ee,le,Le]=pe;const Ye=Tn.find(Ve=>me.toLowerCase()===Ve.label.toLowerCase()),$t=au.find(Ve=>Ve.label===Ee||Ve.alternatives.includes(Ee.toLowerCase())||Ve.searchOperator===Ee);if(!$t)return{field:"",operator:"",value:null,raw:ce,isValid:!1};if((Ye==null?void 0:Ye.type)==="datetime"){const Ve=new Date(le);le=Lt(Ve,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),Le=Le?Lt(new Date(Le),"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"):""}return{field:Ye?Ye.id:me,operator:$t.searchOperator,value:Le?`${le} and ${Le}`:le,raw:ce,isValid:!0}},kt=ce=>ce.isValid?ce.field==="ExecutionStatus"||[...Tn,...ne].some(pe=>pe.id.toLowerCase()===ce.field.toLowerCase())?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";W.useEffect(()=>{$.current&&$.current.scrollIntoView({block:"nearest"})},[v]);const wt=()=>{var pe;if(!H.current)return;const ce=(pe=H.current)==null?void 0:pe.getBoundingClientRect(),ee=document.querySelector('[role="dialog"]');if(ce&&ee){const me=ee.getBoundingClientRect(),Ee=(me.width-400)/2;C({x:Ee,y:ce.bottom-me.top+5}),p(!0)}},Tt=async()=>{K(!1),await Pe(),await Ge()},pt=ce=>{ce.stopPropagation(),K(!0)},Mt=()=>{d([]),y(-1)},Et=()=>{d([]),y(-1)},Ct=(ce,ee)=>{fe(pe=>{const me=[...pe];return me[ce]={...me[ce],width:ee},me})},At=ce=>{const ee=Ji.find(pe=>pe.value.toLowerCase()===ce.toLowerCase());return(ee==null?void 0:ee.color)||"gray"},Xe=ce=>Lt(new Date(ce),"yyyy-MM-dd HH:mm:ss"),mt=()=>{const ce=(J-1)*100,ee=ce+100,pe=D.slice(ce,ee);return g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsx("div",{className:"flex-none px-4 py-3 border-b bg-gray-50 z-[50]",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",ce+1,"-",Math.min(ee,D.length)," of"," ",D.length," results"]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:()=>j(me=>Math.max(1,me-1)),disabled:J===1,className:"p-1.5 rounded hover:bg-gray-200 disabled:opacity-50 disabled:hover:bg-transparent transition-colors",children:g.jsx(aw,{size:16})}),g.jsxs("span",{className:"text-sm font-medium",children:[J," / ",G]}),g.jsx("button",{onClick:()=>j(me=>Math.min(G,me+1)),disabled:J===G,className:"p-1.5 rounded hover:bg-gray-200 disabled:opacity-50 disabled:hover:bg-transparent transition-colors",children:g.jsx(iw,{size:16})})]})]})}),g.jsx("div",{className:"flex-1 overflow-auto",children:g.jsx("div",{className:"inline-block min-w-full align-middle",children:g.jsx("div",{className:"relative",children:g.jsxs("table",{className:"min-w-full border-collapse",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{className:"sticky top-0 border-b border-gray-200 bg-gray-50 z-10",style:{width:50},children:g.jsx("div",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"})}),ae.map((me,Ee)=>g.jsxs("th",{className:"sticky top-0 border-b border-gray-200 bg-gray-50 z-10",style:{width:me.width},children:[g.jsx("div",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:me.label}),g.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1 cursor-col-resize hover:bg-blue-500 group",onMouseDown:le=>{const Le=le.pageX,Ye=me.width,$t=ct=>{const cn=ct.pageX-Le;Ct(Ee,Math.max(100,Ye+cn))},Ve=()=>{document.removeEventListener("mousemove",$t),document.removeEventListener("mouseup",Ve)};document.addEventListener("mousemove",$t),document.addEventListener("mouseup",Ve)},children:g.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-px bg-gray-200 group-hover:bg-blue-500"})})]},`${me.id}-${Ee}`))]})}),g.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:pe.map(me=>g.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[g.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-left",children:g.jsx("div",{className:"flex gap-2",children:g.jsx("button",{onClick:Ee=>{Ee.stopPropagation(),he(!0),n({workflowId:me.execution.workflowId,namespace:E,runId:me.execution.runId}).then(()=>{he(!1),t()}).catch(le=>{console.error("Error loading workflow:",le),he(!1)})},className:"p-1 hover:bg-gray-200 rounded-full transition-colors",title:"View workflow details",children:g.jsx(lf,{size:16,className:"text-gray-600"})})})}),g.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-left",children:g.jsx("div",{className:`inline-flex items-center gap-2 px-2.5 py-1 rounded-full text-xs font-medium
                          ${At(me.status)}`,children:me.status})}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:me.taskQueue}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:me.type.name}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium text-left",children:me.execution.workflowId}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 font-mono text-left",children:me.execution.runId}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:mc(me.startTime,me.closeTime||new Date().toISOString())||"—"}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:Xe(me.startTime)}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:me.closeTime?Xe(me.closeTime):"—"})]},`${me.execution.workflowId}-${me.execution.runId}`))})]})})})})]})},bt=g.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[g.jsx("span",{className:"text-gray-700 font-medium",children:"Namespace:"}),g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>Ce(!Ne),className:"w-64 p-2 border rounded-lg bg-white flex items-center justify-between",children:[g.jsx("span",{children:E}),g.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${Ne?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),Ne&&g.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-lg shadow-lg",children:ie.map(ce=>g.jsx("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-100 first:rounded-t-lg last:rounded-b-lg",onClick:()=>{z(ce),Ce(!1)},children:ce},ce))})]})]});return e?g.jsxs(g.Fragment,{children:[g.jsxs(Lf,{open:e,onClose:t,className:"relative z-[1000]",children:[g.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true",onClick:Et}),je&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl flex items-center gap-4",children:[g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-blue-500 border-t-transparent"}),g.jsx("span",{className:"text-gray-700",children:"Loading workflow..."})]})}),g.jsx("div",{className:"fixed inset-0",onClick:Et,children:g.jsx("div",{className:"flex min-h-full items-start justify-center p-4 text-center",children:g.jsxs(Sc,{className:"bg-white rounded-xl w-full max-w-[120rem] h-[90vh] flex flex-col shadow-2xl relative",onClick:ce=>ce.stopPropagation(),children:[g.jsxs("div",{className:"p-6 flex-none border-b relative",children:[bt,g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Search settings",onClick:pt,children:g.jsx(uw,{size:20,className:"text-gray-600"})}),g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex flex-wrap gap-2 items-center p-2 border rounded-lg bg-gray-50 min-h-[40px]",children:[s.map((ce,ee)=>g.jsxs("div",{className:`px-2 py-1 rounded-md ${kt(ce)} flex items-center gap-1 group`,children:[g.jsx("span",{onClick:()=>vt(ee),className:"flex-1 cursor-pointer",children:ce.raw}),g.jsx("button",{onClick:pe=>{pe.stopPropagation(),l(me=>me.filter((Ee,le)=>le!==ee))},className:"text-current opacity-50 hover:opacity-100 transition-opacity","aria-label":"Remove token",children:g.jsx(pr,{size:14})})]},ee)),g.jsx("input",{ref:H,type:"text",value:o,onChange:He,onClick:Mt,onKeyDown:ze,className:"flex-1 min-w-[200px] bg-transparent outline-none",placeholder:s.length>0?"Add another filter...":"Type to search. For example, WorkflowType = 'MyWorkflowType'"})]}),u.length>0&&g.jsx("div",{className:"absolute mt-1 w-1/2 max-h-60 overflow-auto rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[60]",children:u.map((ce,ee)=>g.jsx("button",{ref:ee===v?$:null,className:`relative cursor-default select-none py-2 pl-3 pr-9 w-full text-left transition-colors ${ce.disabled?"text-gray-400":"text-gray-900"} ${ee===v||ce.disabled?"bg-gray-50":"bg-white hover:bg-gray-50"}`,onClick:()=>!ce.disabled&&dt(ce),disabled:ce.disabled,children:g.jsx("span",{className:`inline-block truncate ${ce.color?ak(ce.color,!1):""}`,children:ce.displayText||ce.text})},ee))})]}),g.jsx("button",{onClick:st,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Search"})]})]}),g.jsx("div",{className:"flex-1 overflow-y-auto",children:we?g.jsx("div",{className:"flex items-center justify-center h-full",children:g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-blue-500"})}):D.length>0?mt():g.jsx("div",{className:"p-6 text-center text-gray-500",children:"No results to display. Try searching for workflows above."})}),h&&P&&g.jsx("div",{className:"absolute z-[999]",style:{top:"100px"},children:g.jsx(JS,{onSelect:Te,onClose:()=>{p(!1),C(null)},position:P,showTime:!0,isBetweenMode:o.toLowerCase().includes("between")})})]})})})]}),g.jsx(ek,{isOpen:te,onClose:Tt})]}):null}const ak=(e,t)=>!e||t?"":`px-2 py-0.5 rounded ${e}`,ik=({showFocus:e,setShowFocus:t,autoZoomEnabled:n,setAutoZoomEnabled:r,setIsTemporalModalOpen:o,refreshWorkflowData:i,isRefreshing:s=!1,currentWorkflow:l,onTemporalRootWorkflowDataCollected:u,setIsSearchModalOpen:d,isSearchModalOpen:h})=>{b.useEffect(()=>{(async()=>{const S=await Oo("autoZoomEnabled");S!==void 0&&r(S)})()},[r]);const p=async()=>{const k=!n;r(k),await Ns("autoZoomEnabled",k)},v=()=>{if(console.log("Refreshing root workflow",l),!i){console.log("No refresh function provided");return}if(!l){console.log("No workflow ID provided");return}i(l.id,l.runId)},y=async()=>{const k=await kw();await u(k.rootWorkflowId,k.rootWorkflowRunId)};return g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsx("button",{onClick:v,className:"p-2",title:"Refresh workflow data from Temporal",children:g.jsx(lw,{className:"h-4 w-4"})}),g.jsx("button",{className:"px-3 py-1 rounded bg-green-500 text-white hover:bg-green-600",onClick:()=>o(!0),children:"Temporal"}),g.jsxs("button",{className:`px-3 py-1 rounded ${n?"bg-green-500 text-white":"bg-gray-200 text-gray-700"}`,onClick:p,children:["Auto Zoom ",n?"On":"Off"]}),g.jsxs("button",{className:"px-3 py-1 rounded bg-gray-200 text-gray-700 hover:bg-gray-300",onClick:()=>t(!e),children:[e?"Hide":"Show"," Focus"]}),g.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 text-gray-700 hover:bg-gray-300",onClick:y,children:"Demo"}),g.jsx("button",{className:"px-3 py-1 rounded bg-blue-500 text-white hover:bg-blue-600",onClick:()=>d(!0),children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(lf,{className:"h-4 w-4"}),"Search"]})}),g.jsx(yh,{isOpen:h,onClose:()=>d(!1)})]})};function sk({id:e,data:t,onClose:n,position:r,baseZIndex:o=100}){const[i,s]=b.useState("io"),l=b.useRef(null),u=b.useRef(null),[d,h]=b.useState({width:600,height:600}),[p,v]=b.useState(!1),[y,k]=b.useState(!1),S=b.useRef({x:0,y:0,width:0,height:0}),[N,T]=b.useState({x:0,y:0}),[$,P]=b.useState(o);b.useEffect(()=>{t&&t!==u.current&&(s("io"),u.current=t)},[t]),b.useEffect(()=>{const D=l.current;D&&(D.style.display="none",D.scrollTop=0,D.style.display="")},[t,i]),b.useEffect(()=>{P(D=>Math.max(D,o))},[o]),b.useEffect(()=>{t&&r&&setTimeout(()=>{l.current&&(l.current.style.display="none",l.current.offsetHeight,l.current.style.display="",l.current.style.visibility="visible",l.current.style.opacity="1",H())},50)},[t,r]);const C=D=>{var J;if(!D.target||!(D.target instanceof HTMLElement)||!D.target.closest("[data-drag-handle]"))return;D.preventDefault(),v(!0);const Q=(J=l.current)==null?void 0:J.getBoundingClientRect();Q&&(S.current={x:D.clientX-Q.left,y:D.clientY-Q.top,width:d.width,height:d.height}),document.body.style.userSelect="none"},X=D=>{var Q,J;D.stopPropagation(),D.preventDefault(),k(!0),S.current={x:D.clientX,y:D.clientY,width:((Q=l.current)==null?void 0:Q.offsetWidth)||d.width,height:((J=l.current)==null?void 0:J.offsetHeight)||d.height},document.body.style.userSelect="none"};b.useEffect(()=>{const D=j=>{if(!(!p&&!y))if(y&&l.current){const G=j.clientX-S.current.x,se=j.clientY-S.current.y,ae=Math.max(300,S.current.width+G),fe=Math.max(400,S.current.height+se);(ae!==d.width||fe!==d.height)&&h({width:ae,height:fe})}else p&&T({x:j.clientX-S.current.x-r.x,y:j.clientY-S.current.y-r.y})},Q=()=>{v(!1),k(!1),document.body.style.userSelect=""},J=new AbortController;return(p||y)&&(window.addEventListener("mousemove",D,{signal:J.signal}),window.addEventListener("mouseup",Q,{signal:J.signal})),()=>{J.abort()}},[p,y,r,d]);const q=()=>{if(!r)return{};const D=20,Q=window.innerWidth,J=window.innerHeight,j=Math.min(Math.max(D,r.x+N.x),Q-d.width-D),G=Math.min(Math.max(D,r.y+N.y),J-d.height-D);return{left:j,top:G}},H=()=>{const D=document.querySelectorAll(`[data-node-panel][data-base-z-index="${o}"]`),Q=Array.from(D).reduce((J,j)=>{const G=parseInt(window.getComputedStyle(j).zIndex)||o;return Math.max(J,G)},o);P(Q+1)};if(!t||!r)return null;const te=!!(t.lastFailure||t.failure),K=!!(t.scheduleTime||t.startTime||t.endTime),ne=!!(t.input||t.result||t.memo&&Object.keys(t.memo).length>0||t.searchAttributes&&Object.keys(t.searchAttributes).length>0),ie=(t.type==="workflow"||t.type==="childWorkflow")&&t.namespace&&t.workflowId?`https://cloud.temporal.io/namespaces/${t.namespace}/workflows/${t.workflowId}`:null,ue=({tab:D,label:Q,disabled:J})=>g.jsx("button",{onClick:()=>!J&&s(D),disabled:J,className:Bt("px-4 py-2 text-sm font-medium transition-colors rounded-t-lg","focus:outline-none",J&&"opacity-50 cursor-not-allowed",i===D?{io:"bg-blue-100 text-blue-800",error:"bg-red-100 text-red-800",time:"bg-purple-100 text-purple-800",common:"bg-green-100 text-green-800"}[D]:"text-gray-600 hover:bg-gray-100"),children:Q}),E=()=>{var Q;const D="space-y-4 min-h-[300px]";switch(i){case"io":return g.jsxs("div",{className:D,children:[t.input&&g.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto relative",children:[g.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Input"}),g.jsx(z,{content:JSON.stringify(JSON.parse(t.input),null,2)}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap break-all bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.input),null,2)})})]}),t.result&&g.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto relative",children:[g.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Result"}),g.jsx(z,{content:JSON.stringify(JSON.parse(t.result),null,2)}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap break-all bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.result),null,2)})})]}),t.header&&Object.keys(t.header).length>0&&g.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto relative",children:[g.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Header"}),g.jsx(z,{content:JSON.stringify(t.header,null,2)}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap break-all bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(t.header,null,2)})})]}),t.memo&&Object.keys(t.memo).length>0&&g.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto",children:[g.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Memo"}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(t.memo,null,2)})})]}),t.searchAttributes&&Object.keys(t.searchAttributes).length>0&&g.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto",children:[g.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Search Attributes"}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(t.searchAttributes,null,2)})})]})]});case"error":return g.jsxs("div",{className:D,children:[t.lastFailure&&g.jsxs("div",{className:"bg-red-50 p-4 rounded-lg overflow-auto relative",children:[g.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Last Failure"}),g.jsx(z,{content:JSON.stringify(JSON.parse(t.lastFailure),null,2)}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap break-all bg-red-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.lastFailure),null,2)})})]}),t.failure&&g.jsxs("div",{className:"bg-red-50 p-4 rounded-lg overflow-auto relative",children:[g.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Failure"}),g.jsx(z,{content:JSON.stringify(JSON.parse(t.failure),null,2)}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap break-all bg-red-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.failure),null,2)})})]})]});case"time":return g.jsxs("div",{className:D,children:[t.startTime&&t.endTime&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Duration"}),g.jsx("p",{className:"text-purple-700 text-lg font-semibold",children:mc(t.startTime,t.endTime)})]}),t.scheduleTime&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Schedule Time"}),g.jsx("p",{className:"text-purple-700",children:t.scheduleTime})]}),t.startTime&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Start Time"}),g.jsx("p",{className:"text-purple-700",children:t.startTime})]}),t.endTime&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"End Time"}),g.jsx("p",{className:"text-purple-700",children:t.endTime})]}),t.lastStartedTime&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Last Started Time"}),g.jsx("p",{className:"text-purple-700",children:t.lastStartedTime})]}),t.lastAttemptCompleteTime&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Last Attempt Complete Time"}),g.jsx("p",{className:"text-purple-700",children:t.lastAttemptCompleteTime})]}),(t.heartbeatTimeout||t.scheduleToCloseTimeout||t.scheduleToStartTimeout||t.startToCloseTimeout||t.workflowRunTimeout||t.workflowTaskTimeout)&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Timeouts"}),t.heartbeatTimeout&&g.jsxs("p",{className:"text-purple-700",children:["Heartbeat: ",t.heartbeatTimeout]}),t.scheduleToCloseTimeout&&g.jsxs("p",{className:"text-purple-700",children:["Schedule to Close: ",t.scheduleToCloseTimeout]}),t.scheduleToStartTimeout&&g.jsxs("p",{className:"text-purple-700",children:["Schedule to Start: ",t.scheduleToStartTimeout]}),t.startToCloseTimeout&&g.jsxs("p",{className:"text-purple-700",children:["Start to Close: ",t.startToCloseTimeout]}),t.workflowRunTimeout&&g.jsxs("p",{className:"text-purple-700",children:["Workflow Run: ",t.workflowRunTimeout]}),t.workflowTaskTimeout&&g.jsxs("p",{className:"text-purple-700",children:["Workflow Task: ",t.workflowTaskTimeout]})]})]});case"common":return g.jsxs("div",{className:D,children:[g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Basic Information"}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("p",{className:"text-green-700",children:["Type: ",t.type]}),t.activityType&&g.jsxs("p",{className:"text-green-700",children:["Activity Type: ",t.activityType]}),t.workflowType&&g.jsxs("p",{className:"text-green-700",children:["Workflow Type: ",t.workflowType]}),g.jsxs("p",{className:"text-green-700",children:["Status: ",t.status]}),t.namespace&&g.jsxs("p",{className:"text-green-700",children:["Namespace: ",t.namespace]}),t.workflowId&&g.jsxs("p",{className:"text-green-700",children:["Workflow ID: ",t.workflowId]}),(t.workflowRunId||t.runId)&&g.jsxs("p",{className:"text-green-700",children:["Run ID: ",t.workflowRunId||t.runId]}),t.activityId&&g.jsxs("p",{className:"text-green-700",children:["Activity ID: ",t.activityId]}),t.workflowTaskCompletedEventId&&g.jsxs("p",{className:"text-green-700",children:["Workflow Task Completed Event ID:"," ",t.workflowTaskCompletedEventId]})]})]}),t.taskQueue&&g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Task Queue"}),g.jsxs("p",{className:"text-green-700",children:["Name: ",t.taskQueue.name]})]}),t.retryPolicy&&g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Retry Policy"}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("p",{className:"text-green-700",children:["Initial Interval: ",t.retryPolicy.initialInterval]}),g.jsxs("p",{className:"text-green-700",children:["Backoff Coefficient: ",t.retryPolicy.backoffCoefficient]}),g.jsxs("p",{className:"text-green-700",children:["Maximum Interval: ",t.retryPolicy.maximumInterval]}),g.jsxs("p",{className:"text-green-700",children:["Maximum Attempts: ",t.retryPolicy.maximumAttempts]}),((Q=t.retryPolicy.nonRetryableErrorTypes)==null?void 0:Q.length)>0&&g.jsxs("div",{children:[g.jsx("p",{className:"text-green-700",children:"Non-retryable Error Types:"}),g.jsx("ul",{className:"list-disc pl-4",children:t.retryPolicy.nonRetryableErrorTypes.map((J,j)=>g.jsx("li",{className:"text-green-700",children:J},j))})]})]})]}),t.attempts&&g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Attempts"}),g.jsxs("p",{className:"text-green-700",children:["Count: ",t.attempts]})]}),t.lastWorkerIdentity&&g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Worker"}),g.jsxs("p",{className:"text-green-700",children:["Last Identity: ",t.lastWorkerIdentity]})]}),t.workflowReusePolicy&&g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Workflow Reuse Policy"}),g.jsx("p",{className:"text-green-700",children:t.workflowReusePolicy})]})]})}},z=({content:D})=>{const Q=()=>{navigator.clipboard.writeText(D)};return g.jsx("button",{onClick:Q,className:"absolute top-4 right-4 p-1.5 rounded bg-white/80 hover:bg-white border border-gray-200 transition-colors",title:"Copy to clipboard",children:g.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-600",children:[g.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),g.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})};return g.jsxs("div",{ref:l,"data-node-panel":!0,"data-base-z-index":o,className:"fixed bg-white rounded-lg shadow-xl border border-gray-200 overflow-hidden",style:{...q(),width:d.width,height:d.height,zIndex:$,visibility:"visible",opacity:1},onClick:H,children:[g.jsx("button",{onClick:D=>{D.stopPropagation(),n(e)},className:"absolute top-2 right-2 p-1.5 hover:bg-gray-100 rounded-full transition-colors z-50",title:"Close panel",children:g.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-500",children:[g.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),g.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),g.jsx("div",{className:"flex absolute top-0 left-0 right-0 h-4 cursor-move","data-drag-handle":!0,onMouseDown:C,children:g.jsx("div",{className:"mx-auto p-1.5 select-none",children:g.jsxs("svg",{width:"20",height:"10",viewBox:"0 0 20 4",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-gray-400 pointer-events-none",children:[g.jsx("circle",{cx:"2",cy:"2",r:"1",fill:"currentColor"}),g.jsx("circle",{cx:"10",cy:"2",r:"1",fill:"currentColor"}),g.jsx("circle",{cx:"18",cy:"2",r:"1",fill:"currentColor"})]})})}),(ie||t.type==="activity")&&g.jsxs("div",{className:Bt("px-4 py-2 bg-gray-50 border-b",t.type==="activity"&&"pt-6"),children:[g.jsxs("div",{className:"flex items-center justify-between mb-2 pr-8",children:[g.jsx("div",{className:"flex items-center gap-2",children:ie&&g.jsxs(g.Fragment,{children:[g.jsxs("svg",{className:"w-4 h-4 text-gray-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("rect",{x:"9",y:"3",width:"6",height:"6",rx:"1"}),g.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),g.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3M6 15v-3h12v3"})]}),g.jsx("a",{href:ie,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View in Temporal"})]})}),g.jsxs("div",{className:"flex flex-col items-end",children:[g.jsx("span",{className:"text-xs text-gray-500",children:t.namespace}),t.taskQueue&&g.jsx("span",{className:"text-xs text-gray-500",children:t.taskQueue.name})]})]}),g.jsxs("div",{className:"flex flex-col gap-1",children:[t.workflowType&&g.jsxs("span",{className:"text-xs text-gray-500",children:[g.jsx("span",{className:"font-bold",children:"Type:"})," ",g.jsx("span",{className:"font-bold",children:t.workflowType})]}),t.type==="activity"&&t.activityType&&g.jsxs("span",{className:"text-xs text-gray-500",children:[g.jsx("span",{className:"font-bold",children:"Type:"})," ",g.jsx("span",{className:"font-bold",children:t.activityType})]}),t.workflowId&&t.type!=="activity"&&g.jsx("span",{className:"text-xs text-gray-500 select-all font-mono",children:t.workflowId})]})]}),g.jsxs("div",{className:"border-b flex gap-1 px-2 pt-2 bg-gray-50",children:[g.jsx(ue,{tab:"io",label:"Input/Output",disabled:!ne}),g.jsx(ue,{tab:"error",label:"Error",disabled:!te}),g.jsx(ue,{tab:"time",label:"Time",disabled:!K}),g.jsx(ue,{tab:"common",label:"Common"})]}),g.jsx("div",{className:"overflow-y-auto",style:{height:"calc(100% - 116px)"},children:g.jsx("div",{className:"p-4",children:E()})}),g.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-se-resize",onMouseDown:X,style:{background:"linear-gradient(135deg, transparent 50%, #CBD5E1 50%)"}})]})}const ka=500,Xs=200,Cu=8,ck=80;function Gs(e){var l,u,d;const t=((l=e.data)==null?void 0:l.title)||"",n=e.id||"",r=n.length>40?n.slice(0,37)+"...":n,o=t.length*Cu,i=r.length*(Cu*.8),s=Math.max(o,i)+ck;return((u=e.data)==null?void 0:u.type)==="workflow"||((d=e.data)==null?void 0:d.type)==="childWorkflow",Math.max(Math.min(Math.max(s,ka*.75),ka),Xs)}function lk(e,t=800,n=100){const r=Gs(e),o=(t-r)/2-n;return e.position={x:o,y:0},e.style={...e.style,width:r},e}function Du(e,t,n,r,o=200,i=40){var p,v;const s=[...e],l=[...t],u=s.find(y=>y.id===n);if(!u)return console.warn(`Parent node ${n} not found for layout.`),{nodes:s,edges:l};(p=u.style)!=null&&p.width||(u.style={...u.style,width:Gs(u)});const d=u.position.x+(((v=u.style)==null?void 0:v.width)||Xs);let h=u.position.y;return r.sort((y,k)=>{const S=y.data.sortEventTime.localeCompare(k.data.sortEventTime);return S!==0?S:y.data.sortEventId-k.data.sortEventId}),r.forEach((y,k)=>{const S=Gs(y);if(y.style={...y.style,width:S},y.position={x:d+o,y:h},s.push(y),k===0)l.push({id:`${n}->${y.id}`,source:n,sourceHandle:`${n}-right`,target:y.id,targetHandle:`${y.id}-left`});else{const N=r[k-1];l.push({id:`${N.id}->${y.id}`,source:N.id,sourceHandle:`${N.id}-bottom`,target:y.id,targetHandle:`${y.id}-top`,type:"step",animated:!0})}h+=(y.height||80)+i}),{nodes:s,edges:l}}function uk(e,t,n,r,o=100){const i=e.filter(k=>k.id!==n),s=[...t],l=e.find(k=>k.id===n);if(!l)return{nodes:i,edges:s};const u=t.find(k=>k.target===n),d=t.find(k=>k.source===n),h=u==null?void 0:u.source,p=d==null?void 0:d.target,v=r.map((k,S)=>{var N;return{...k,position:{x:l.position.x,y:l.position.y+(S+1)*o},style:{...k.style,width:(N=l.style)==null?void 0:N.width}}}),y=[];if(v.forEach((k,S)=>{S>0&&y.push({id:`${v[S-1].id}->${k.id}`,source:v[S-1].id,target:k.id,sourceHandle:`${v[S-1].id}-bottom`,targetHandle:`${k.id}-top`,type:"step",animated:!0})}),h&&u){y.unshift({id:`${h}->${v[0].id}`,source:h,target:v[0].id,sourceHandle:u.sourceHandle,targetHandle:`${v[0].id}-top`,type:"step",animated:!0});const k=s.findIndex(S=>S.id===u.id);k!==-1&&s.splice(k,1)}if(p&&d){y.push({id:`${v[v.length-1].id}->${p}`,source:v[v.length-1].id,target:p,sourceHandle:`${v[v.length-1].id}-bottom`,targetHandle:d.targetHandle,type:"step",animated:!0});const k=s.findIndex(S=>S.id===d.id);k!==-1&&s.splice(k,1)}return i.push(...v),s.push(...y),{nodes:i,edges:s}}const dk=async e=>{var n,r;const t={nodes:[],edges:[]};for(const o of e)if(o.type==="activity")t.nodes.push({id:`${o.activityId}-${o.workflowId}`,position:{x:0,y:0},type:"workflowNode",data:{...o,title:o.activityType,description:"",type:"activity",count:1,parentNodeId:o.workflowId,workflowTaskCompletedEventId:o.workflowTaskCompletedEventId,payload:(n=o.payload)==null?void 0:n.map(i=>i.data?atob(i.data):void 0)}});else if(o.type==="workflow"||o.type==="childWorkflow"){const i={...o,title:o.workflowType,description:"",type:o.type,count:1,workflowTaskCompletedEventId:o.workflowTaskCompletedEventId,parentNodeId:o.parentWorkflowId,groupComponentIds:[],payload:(r=o.payload)==null?void 0:r.map(s=>s.data?atob(s.data):void 0)};t.nodes.push({id:o.workflowId,position:{x:0,y:0},type:"workflowNode",data:i})}else throw new Error("Invalid item type "+o.type);return fk(t),t};function fk(e){const t={};for(const o of e.nodes){const i=o.data;let s=hk(i);const l=i.title,u=`${s}::${l}`;t[u]||(t[u]={batchKey:s,title:l,nodes:[]}),t[u].nodes.push(o)}const n=[],r=4;for(const o in t){const i=t[o],{nodes:s}=i;if(s.length<r){n.push(...s);continue}const l=s.length;let u=null;for(const v of s){const y=v.data,k=y.startTime??y.scheduleTime;k&&(u===null||k<u)&&(u=k)}const d=s[0],h=d.data,p={...d,position:{...d.position},data:{...h,count:l,batchKey:i.batchKey,groupComponentIds:i.nodes.map(v=>({type:v.data.type,id:v.data.type==="activity"?v.data.activityId:v.data.workflowId,workflowRunId:v.data.workflowRunId||v.data.runId})),nonCompletedStatusExists:i.nodes.some(v=>v.data.status!=="COMPLETED")}};p._earliestTime=u,n.push(p)}n.sort((o,i)=>{const s=o._earliestTime,l=i._earliestTime;return!s&&!l?0:s?l?s.localeCompare(l):-1:1});for(const o of n)delete o._earliestTime;e.nodes=n}function hk(e){return!e.workflowTaskCompletedEventId&&e.type==="workflow"?e.workflowId:parseInt(e.workflowTaskCompletedEventId,10).toString().padStart(10,"0")}const mk=()=>{const[e,t]=b.useState(!0),n=b.useRef(null),r=b.useRef(!0),o=b.useCallback((d,h,p,v=.75,y=800)=>{!d||!r.current||d.setCenter(h,p,{zoom:v,duration:y})},[]),i=b.useCallback(d=>{!d||!r.current||d.fitView({padding:.2,duration:800,minZoom:.4})},[]),s=b.useCallback(d=>{n.current=d},[]),l=b.useCallback(()=>{!n.current||!r.current||n.current.fitView({padding:.2,duration:800,minZoom:.4})},[]),u=b.useCallback(d=>{r.current=d,t(d)},[]);return{autoZoomEnabled:e,setAutoZoomEnabled:u,handleZoom:o,fitView:i,onInit:s,onGraphLoad:l}};function pk(){const[e,t]=b.useState({nodes:[],edges:[],rootWorkflowId:void 0}),[n,r]=W.useState(!1),o=b.useRef(e),i=b.useRef(null),s=.4,{autoZoomEnabled:l,setAutoZoomEnabled:u,handleZoom:d,fitView:h,onInit:p,onGraphLoad:v}=mk();b.useEffect(()=>{o.current=e},[e]);const y=async(P,C)=>{const X=await T(P,C),q=X.nodes.find(U=>U.id===P);if(!q){console.error(`Root node ${P} not found in graph data.`);return}const H=X.nodes.filter(U=>U.id!==P);q.data.isExpanded=!0;const te=lk(q),{nodes:K,edges:ne}=Du([te],[],P,H,150,20);t({nodes:K,edges:ne,rootWorkflowId:P}),r(!0),setTimeout(v,100)},k=b.useCallback(async(P,C)=>{const{nodes:X,edges:q}=await N(P);return new Promise(H=>{t(te=>{const K=te.nodes.filter(ie=>!X.includes(ie.id)).map(ie=>ie.id===P?{...ie,data:{...ie.data,isExpanded:!1}}:ie),ne=te.edges.filter(ie=>!q.includes(ie.id)),U={nodes:K,edges:ne};return o.current=U,H(U),U})})},[]),S=b.useCallback(async(P,C)=>{try{const X=o.current,q=X.nodes.find(K=>K.id===P);if(!q)return;const H=X.nodes.filter(K=>K.data.type==="workflow"&&K.data.parentWorkflowId===q.data.parentWorkflowId&&K.data.workflowId!==P&&!q.data.groupComponentIds.some(ne=>ne.id===K.id)&&K.data.isExpanded);for(const K of H)await k(K.id,K.data.workflowRunId);const te=await T(P,C);t(K=>{const ne=te.nodes.filter(j=>j.id!==P).map(j=>({...j,data:{...j.data,parentNodeId:P}})),U=K.nodes.map(j=>j.id===P?{...j,data:{...j.data,isExpanded:!0}}:j),{nodes:ie,edges:ue}=Du(U,K.edges,P,ne),E=te.edges.map(j=>({...j,id:`${j.id}-${Date.now()}`})),D={nodes:ie.map(j=>j.id===P?{...j,data:{...j.data,isLoading:!1}}:j),edges:[...ue,...E]};o.current=D;const Q=ie.find(j=>j.id===P),J=ie.filter(j=>j.data.parentNodeId===P);return Q&&setTimeout(()=>{const j=J.reduce((se,ae)=>Math.max(se,ae.position.x),Q.position.x),G=(Q.position.x+j)/2;d(i.current,G,Q.position.y)},50),D})}catch(X){console.error("Error expanding child workflow:",X)}},[d,k]),N=async(P,C)=>{const X=o.current.nodes.find(ne=>ne.id===P);if(!X)return console.error(`Root node ${P} not found in graph data.`),{nodes:[],edges:[]};const q=new Set,H=new Set,te=new Set,K=ne=>{te.has(ne)||(te.add(ne),ne!==P&&q.add(ne),o.current.edges.forEach(U=>{var ie;if(U.source===ne){const ue=o.current.nodes.find(E=>E.id===U.target);if(!ue){console.error(`Target node ${U.target} not found in graph data.`);return}(ue.data.parentNodeId===P&&!((ie=X.data.groupComponentIds)!=null&&ie.some(E=>E.id===ue.id))||q.has(ue.data.parentNodeId))&&(H.add(U.id),K(U.target))}}))};return K(P),{nodes:Array.from(q),edges:Array.from(H)}},T=async(P,C)=>{const X=await Ro(P,C);if(!X)return console.error(`Workflow ${P} not found`),{nodes:[],edges:[]};const q=await hf(P,C),H=await pc(P,C),te=[X,...q,...H];te.sort((U,ie)=>{const ue=U.taskId?parseInt(U.taskId):0,E=ie.taskId?parseInt(ie.taskId):0;return ue-E});const K=await dk(te),ne=H.map(async U=>{try{await ok(U.namespace,U.workflowId,U.runId)}catch(ie){console.error(`Error loading child workflow data for ${U.workflowId}:`,ie)}});return K.nodes=K.nodes.map(U=>({...U,data:{...U.data,isLoading:rk(U.id)}})),Promise.all(ne).catch(U=>console.error("Error loading child workflows:",U)),K},$=b.useCallback(async P=>{try{const C=o.current.nodes.find(H=>H.id===P);if(!C||!C.data.count)return;const q=(await xw(C.data.groupComponentIds,C.data.workflowId,C.data.workflowRunId||C.data.runId)).map(H=>({id:H.type==="activity"?`${H.activityId}-${H.workflowId}`:H.workflowId,type:"workflowNode",data:{...H,parentWorkflowId:C.data.parentWorkflowId,type:C.data.type,title:H.activityType||H.workflowType,workflowId:H.workflowId,count:1,groupComponentIds:[]},position:{x:0,y:0}}));q.sort((H,te)=>{const K=H.data.taskId||"",ne=te.data.taskId||"";return K.localeCompare(ne)}),t(H=>{const te=new Set,K=z=>{H.edges.forEach(D=>{D.source===z&&(te.add(D.target),K(D.target))})};K(P);const ne=q.length*100;C.data.count=1;const{nodes:U,edges:ie}=uk(H.nodes,H.edges,P,q),E={nodes:U.map(z=>te.has(z.id)?{...z,position:{...z.position,y:z.position.y+ne+100}}:z),edges:ie};return o.current=E,setTimeout(()=>{d(i.current,C.position.x,C.position.y)},100),E})}catch(C){console.error("Error spreading batch nodes:",C)}},[d]);return b.useEffect(()=>{const P=({detail:{workflowId:C,isLoading:X}})=>{t(q=>{const H=q.nodes.map(te=>te.id===C?{...te,data:{...te.data,isLoading:X}}:te);return{...q,nodes:H}})};return window.addEventListener("workflow-loading-change",P),()=>window.removeEventListener("workflow-loading-change",P)},[]),{graphData:e,setGraphData:t,onTemporalRootWorkflowDataCollected:y,expandChildWorkflowNode:S,collapseChildWorkflowNode:k,isRootLoaded:n,flowInstance:i,MIN_ZOOM:s,onSpreadBatchNodes:$,autoZoomEnabled:l,setAutoZoomEnabled:u,onInit:p}}const gk=(e,t)=>{const n=new Set,r=o=>{n.add(o),e.edges.forEach(i=>{i.source===o&&!n.has(i.target)&&r(i.target)})};return t.forEach(r),Array.from(n)};function yk(e,t){const[n,r]=b.useState(!1),[o,i]=b.useState(null),s=b.useRef(null),l=.4,u=b.useCallback(v=>new Set(gk(e,[v])),[e]),d=b.useCallback(v=>{if(!s.current||!v)return;const y=e.nodes.filter(te=>te.position.x>=v.position.x);if(y.length===0){s.current.setCenter(v.position.x,v.position.y,{zoom:1,duration:800});return}const k=y.reduce((te,K)=>({minX:Math.min(te.minX,K.position.x||0),minY:Math.min(te.minY,K.position.y||0),maxX:Math.max(te.maxX,K.position.x||0),maxY:Math.max(te.maxY,K.position.y||0)}),{minX:v.position.x||0,minY:v.position.y||0,maxX:v.position.x||0,maxY:v.position.y||0});if(Object.values(k).some(isNaN)){console.warn("Invalid bounds detected, falling back to selected node"),s.current.setCenter(v.position.x,v.position.y,{zoom:1,duration:800});return}const S=(k.minX+k.maxX)/2,N=(k.minY+k.maxY)/2,T=100,$=Math.max(k.maxX-k.minX+T*2,100),P=Math.max(k.maxY-k.minY+T*2,100),C=s.current.getViewport(),X=C.width||1e3,q=C.height||800;let H=Math.min(X/$,q/P);H=Math.max(l,Math.min(isNaN(H)?1:H,1.5)),s.current.setCenter(isNaN(S)?v.position.x:S,isNaN(N)?v.position.y:N,{zoom:H,duration:800})},[e.nodes]),h=b.useCallback(v=>{if(i(v),!v){t(S=>({...S,nodes:S.nodes.map(N=>({...N,style:{...N.style,opacity:1}}))})),s.current&&s.current.fitView({padding:.2,minZoom:l,duration:800});return}const y=u(v),k=e.nodes.find(S=>S.id===v);t(S=>({...S,nodes:S.nodes.map(N=>({...N,style:{...N.style,opacity:y.has(N.id)?1:.2}}))})),s.current&&k&&setTimeout(()=>{d(k)},50)},[e,t,u,d]),p=b.useCallback(()=>{i(null),t(v=>({...v,nodes:v.nodes.map(y=>({...y,style:{...y.style,opacity:1}}))})),s.current&&s.current.fitView({padding:.2,minZoom:l,duration:800})},[t]);return{showFocus:n,setShowFocus:r,selectedFocusedWorkflow:o,handleFocusChange:h,handleFocusReset:p,flowInstance:s}}function vk({onTemporalRootWorkflowDataCollected:e,onBeforeSubmit:t}){const[n,r]=b.useState(!1),[o,i]=b.useState(!1),s=async(d,h)=>{const p=await pc(d,h);for(const y of p)await s(y.workflowId,h);const v=await hf(d,h);for(const y of v)await bw(d,y.activityId,h);await vw(d,h)};return{isTemporalModalOpen:n,setIsTemporalModalOpen:r,onTemporalModalSubmit:async d=>{if(t&&t(),!await nk())throw new Error("The server is not running. Please start the server and try again.");const p=await Us(d.namespace,d.workflowId,d.runId,2);r(!1),await e(d.workflowId,p)},refreshWorkflowData:async(d,h)=>{try{i(!0);const p=await Ro(d,h);if(!p){console.error("Workflow not found for refresh");return}await s(d,h);const v=await Us(p.namespace,d,h,2);await e(d,v)}catch(p){console.error("Error refreshing workflow data:",p)}finally{i(!1)}},isRefreshing:o}}function wk({isOpen:e,onClose:t,onSubmit:n}){const[r,o]=b.useState({namespace:"",workflowId:"",runId:""}),[i,s]=b.useState(!1),[l,u]=b.useState(null);if(!e)return null;const d=async h=>{h.preventDefault(),s(!0),u(null);try{await n(r),t()}catch(p){u(p instanceof Error?p.message:"An error occurred while fetching workflow data")}finally{s(!1)}};return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[g.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[g.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Temporal Workflow Data"}),g.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:g.jsx(pr,{className:"w-5 h-5 text-gray-500"})})]}),g.jsxs("form",{onSubmit:d,className:"p-4 space-y-4",children:[l&&g.jsx("div",{className:"p-3 bg-red-100 text-red-700 rounded-md text-sm",children:l}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Namespace"}),g.jsx("input",{type:"text",value:r.namespace,onChange:h=>o(p=>({...p,namespace:h.target.value})),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:i})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Workflow ID"}),g.jsx("input",{type:"text",value:r.workflowId,onChange:h=>o(p=>({...p,workflowId:h.target.value})),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:i})]}),g.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t mt-4",children:[g.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",disabled:i,children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-500 rounded-md hover:bg-blue-600 transition-colors disabled:bg-blue-300",disabled:i,children:i?"Loading...":"Get Data"})]})]})]})})}function bk(){const{graphData:e,setGraphData:t,onTemporalRootWorkflowDataCollected:n,expandChildWorkflowNode:r,collapseChildWorkflowNode:o,isRootLoaded:i,flowInstance:s,MIN_ZOOM:l,onSpreadBatchNodes:u,autoZoomEnabled:d,setAutoZoomEnabled:h,onInit:p}=pk(),{showFocus:v,setShowFocus:y,selectedFocusedWorkflow:k,handleFocusChange:S,handleFocusReset:N,flowInstance:T}=yk(e,t),{isTemporalModalOpen:$,setIsTemporalModalOpen:P,onTemporalModalSubmit:C,refreshWorkflowData:X,isRefreshing:q}=vk({onTemporalRootWorkflowDataCollected:n,onBeforeSubmit:()=>{Q([])}}),[H,te]=W.useState(null),[K,ne]=W.useState(!1),[U,ie]=b.useState(!0),[ue,E]=b.useState(!1),z=W.useRef(!1),[D,Q]=b.useState([]),J=(ae,fe,we)=>{const Se=ae.workflowId+(ae.runId?`-${ae.runId}`:"");Se&&Q(Ne=>{const Ce=Ne.findIndex(je=>je.id===Se);if(Ce>=0){const je=[...Ne];return je[Ce]={...je[Ce],position:fe,baseZIndex:Math.max(we||0,1e3+Ne.length)},je}return[...Ne,{id:Se,node:ae,position:fe,baseZIndex:Math.max(we||0,1e3+Ne.length)}]})},j=ae=>{Q(fe=>fe.filter(we=>we.id!==ae))},G=b.useMemo(()=>({workflowNode:ae=>g.jsx(hw,{...ae,expandChildWorkflowNode:r,collapseChildWorkflowNode:o,onSpreadBatchNodes:u,onShowNodeData:J})}),[i]),se=W.useCallback(ae=>{t(fe=>({...fe,nodes:zd(ae,fe.nodes)}))},[t]);return W.useEffect(()=>{const ae=new URLSearchParams(window.location.search),fe=decodeURIComponent(ae.get("id")||""),we=ae.get("namespace"),Se=ae.get("runID");te(null),(async()=>{if(!z.current)if(z.current=!0,fe&&we&&Se){ne(!0);try{await C({workflowId:fe,namespace:we,runId:Se})}catch(Ce){console.error("Error loading workflow from URL params:",Ce),te(Ce instanceof Error?Ce.message:"An error occurred while loading the workflow")}finally{ne(!1)}}else te("Invalid URL parameters"),ne(!1)})()},[]),g.jsxs("div",{className:"w-screen h-screen flex flex-col bg-gray-50",children:[K&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-xl flex items-center space-x-3",children:[g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),g.jsx("div",{className:"text-gray-700",children:"Loading workflow data..."})]})}),H&&g.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[g.jsx("strong",{className:"font-bold",children:"Error: "}),g.jsx("span",{className:"block sm:inline",children:H}),g.jsxs("button",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",onClick:()=>te(null),children:[g.jsx("span",{className:"sr-only",children:"Dismiss"}),g.jsx(pr,{className:"h-5 w-5"})]})]}),g.jsx("div",{className:"flex-grow h-full",children:g.jsxs(rf,{nodes:e.nodes,edges:e.edges,onNodesChange:se,nodeTypes:G,fitView:!1,minZoom:l,className:"bg-gray-50",onInit:ae=>{s.current=ae,T.current=ae,p(ae)},nodesDraggable:!1,edgesUpdatable:!1,children:[g.jsx(nw,{}),g.jsx(Gv,{}),g.jsx(No,{position:"bottom-right",className:"flex items-center gap-2 bg-transparent z-10 mb-2 mr-2",children:g.jsxs("button",{onClick:()=>ie(!U),className:"bg-blue-500 px-3 py-1 rounded-lg shadow-lg hover:bg-blue-600 text-white transition-colors",children:[U?"Hide":"Show"," Minimap"]})}),U&&g.jsx(zv,{zoomable:!0,pannable:!0,className:"bg-white rounded-lg shadow-lg",style:{backgroundColor:"white",width:300,height:200},maskColor:"rgba(0, 0, 0, 0.1)",nodeColor:"#aaa",nodeStrokeWidth:3,nodeBorderRadius:2}),g.jsx(No,{position:"top-right",className:"flex items-center gap-2 bg-transparent",children:g.jsx("div",{className:"bg-white p-2 rounded-lg shadow-lg",children:g.jsx(ik,{showFocus:v,setShowFocus:y,autoZoomEnabled:d,setAutoZoomEnabled:h,setIsTemporalModalOpen:P,refreshWorkflowData:X,currentWorkflow:k&&{id:k},isRefreshing:q,onTemporalRootWorkflowDataCollected:n,isSearchModalOpen:ue,setIsSearchModalOpen:E})})})]})}),D.map(ae=>g.jsx(sk,{id:ae.id,data:ae.node,position:ae.position,onClose:j,baseZIndex:ae.baseZIndex},ae.id)),v&&g.jsx(mw,{nodes:e.nodes,onFocusChange:S,selectedWorkflow:k,onReset:N,onClose:()=>y(!1)}),g.jsx(wk,{isOpen:$,onClose:()=>P(!1),onSubmit:C}),g.jsx(yh,{isOpen:ue,onClose:()=>E(!1),onTemporalModalSubmit:C,onShowNodeData:J})]})}Pu(document.getElementById("root")).render(g.jsx(b.StrictMode,{children:g.jsx(bk,{})}));
